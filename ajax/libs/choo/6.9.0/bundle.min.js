!function(){"use strict";var e=function(e){var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})},t="undefined"!=typeof window;function n(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}n.prototype.push=function(e){this.hasWindow&&(this.queue.push(e),this.schedule())},n.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},n.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})};var r,i=function(){var e;return t?(window._nanoScheduler||(window._nanoScheduler=new n(!0)),e=window._nanoScheduler):e=new n,e}();o.disabled=!0;try{r=window.performance,o.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function o(e){if(o.disabled)return s;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function a(o){var s="end-"+t+"-"+e;r.mark(s),i.push(function(){var i=null;try{var a=e+" ["+t+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(e){i=e}o&&o(i,e)})}return r.mark(n),a.uuid=t,a}function s(e){e&&i.push(function(){e(new Error("nanotiming: performance API unavailable"))})}var a=o,u=function(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}},h={};function c(e){if(!(this instanceof c))return new c(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}h=c,c.prototype.emit=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var i=a(this._name+"('"+e+"')"),o=this._listeners[e];return o&&o.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,i.uuid),i(),this},c.prototype.on=c.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},c.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},c.prototype.once=function(e,t){var n=this;return this.on(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},c.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},c.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(u(e,n,1),!0):void 0}}},c.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},c.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,i=0;i<r;i++)n.push(t[i]);return n},c.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var i=e.length,o=0;o<i;o++){var s=e[o];s.apply(s,n)}}};var l=/(noopener|noreferrer) (noopener|noreferrer)/,d=/^[\w-_]+:/,f=function(){return window.location.pathname.replace(/\/$/,"")+window.location.hash.replace(/^#/,"/")},p=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],m=p.length;function v(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}var w=function(e,t){var n=e.nodeType,r=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,r=e.attributes,i=null,o=null,s=null,a=null,u=r.length-1;u>=0;--u)s=(a=r[u]).name,i=a.namespaceURI,o=a.value,i?(s=a.localName||s,t.getAttributeNS(i,s)!==o&&t.setAttributeNS(i,s,o)):t.hasAttribute(s)?t.getAttribute(s)!==o&&("null"===o||"undefined"===o?t.removeAttribute(s):t.setAttribute(s,o)):t.setAttribute(s,o);for(var h=n.length-1;h>=0;--h)!1!==(a=n[h]).specified&&(s=a.name,(i=a.namespaceURI)?(s=a.localName||s,e.hasAttributeNS(i,s)||t.removeAttributeNS(i,s)):e.hasAttributeNS(null,s)||t.removeAttribute(s))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===r?function(e,t){var n=e.value,r=t.value;v(e,t,"checked"),v(e,t,"disabled"),n!==r&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===r?function(e,t){v(e,t,"selected")}(e,t):"TEXTAREA"===r&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<m;n++){var r=p[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)},_=3;function y(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===_&&e.nodeValue===t.nodeValue}var b=function(e,t){return function e(t,n){return n?t?t.isSameNode&&t.isSameNode(n)?n:t.tagName!==n.tagName?t:(w(t,n),function(t,n){for(var r,i,o,s,a=0,u=0;r=n.childNodes[u],i=t.childNodes[u-a],r||i;u++)if(i)if(r)if(y(i,r))(o=e(i,r))!==r&&(n.replaceChild(o,r),a++);else{s=null;for(var h=u;h<n.childNodes.length;h++)if(y(n.childNodes[h],i)){s=n.childNodes[h];break}s?((o=e(i,s))!==s&&a++,n.insertBefore(o,r)):i.id||r.id?(n.insertBefore(i,r),a++):(o=e(i,r))!==r&&(n.replaceChild(o,r),a++)}else n.appendChild(i),a++;else n.removeChild(r),u--}(t,n),n):null:t}(t,e)},g=/([^?=&]+)(=([^&]*))?/g,A=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)E.call(n,r)&&(e[r]=n[r])}return e},E=Object.prototype.hasOwnProperty,N=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)T.call(n,r)&&(e[r]=n[r])}return e},T=Object.prototype.hasOwnProperty,L={};function S(){if(!(this instanceof S))return new S;this.trie={nodes:{}}}L=S,S.prototype.create=function(e){var t=e.replace(/^\//,"").split("/");return function e(n,r){var i=t.hasOwnProperty(n)&&t[n];if(!1===i)return r;var o=null;return/^:|^\*/.test(i)?(r.nodes.hasOwnProperty("$$")?o=r.nodes.$$:(o={nodes:{}},r.nodes.$$=o),"*"===i[0]&&(r.wildcard=!0),r.name=i.replace(/^:|^\*/,"")):r.nodes.hasOwnProperty(i)?o=r.nodes[i]:(o={nodes:{}},r.nodes[i]=o),e(n+1,o)}(0,this.trie)},S.prototype.match=function(e){var t=e.replace(/^\//,"").split("/"),n={},r=function e(r,i){if(void 0!==i){var o=t[r];if(void 0===o)return i;if(i.nodes.hasOwnProperty(o))return e(r+1,i.nodes[o]);if(i.name){try{n[i.name]=decodeURIComponent(o)}catch(t){return e(r,void 0)}return e(r+1,i.nodes.$$)}if(i.wildcard){try{n.wildcard=decodeURIComponent(t.slice(r).join("/"))}catch(t){return e(r,void 0)}return i.nodes.$$}return e(r+1)}}(0,this.trie);if(r)return(r=A(r)).params=n,r},S.prototype.mount=function(e,t){var n=e.replace(/^\//,"").split("/"),r=null,i=null;if(1===n.length)i=n[0],r=this.create(i);else{var o=n.join("/");i=n[0],r=this.create(o)}N(r.nodes,t.nodes),t.name&&(r.name=t.name),r.nodes[""]&&(Object.keys(r.nodes[""]).forEach(function(e){"nodes"!==e&&(r[e]=r.nodes[""][e])}),N(r.nodes,r.nodes[""].nodes),delete r.nodes[""].nodes)};var O=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),r=L();return i._trie=r,i.on=function(e,t){(e=e||"/",t.route=e,t&&t._wayfarer&&t._trie)?r.mount(e,t._trie.trie):r.create(e).cb=t;return i},i.emit=i,i.match=o,i._wayfarer=!0,i;function i(e){var t=o(e),n=new Array(arguments.length);n[0]=t.params;for(var r=1;r<n.length;r++)n[r]=arguments[r];return t.cb.apply(t.cb,n)}function o(e){var t=r.match(e);if(t&&t.cb)return new s(t);var i=r.match(n);if(i&&i.cb)return new s(i);throw new Error("route '"+e+"' did not match")}function s(e){this.cb=e.cb,this.route=e.cb.route,this.params=e.params}},R={},I=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),C=new RegExp("^(file://|/)(.*.html?/?)?"),P=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),k=new RegExp("#"),D=new RegExp("[?].*$");function V(e){if(!(this instanceof V))return new V(e);e=e||{},this.router=O(e.default||"/404")}function M(e,t){return(e=t?e.replace(C,""):e.replace(P,"")).replace(D,"").replace(k,"/")}R=V,V.prototype.on=function(e,t){e=e.replace(/^[#/]/,""),this.router.on(e,t)},V.prototype.emit=function(e){return e=M(e,I),this.router.emit(e)},V.prototype.match=function(e){return e=M(e,I),this.router.match(e)};var $={};function q(e){if(!(this instanceof q))return new q(e);e=e||{};var t=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hasWindow="undefined"!=typeof window,this._createLocation=f,this._loaded=!1,this._tree=null,this.router=R(),this.emitter=h("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter);var n={events:this._events};this._hasWindow?(this.state=window.initialState?A(window.initialState,n):n,delete window.initialState):this.state=n,this._hasWindow&&(this.state.title=document.title),this.emitter.prependListener(this._events.DOMTITLECHANGE,function(e){t.state.title=e,t._hasWindow&&(document.title=e)})}q.prototype.route=function(e,t){this.router.on(e,t)},q.prototype.use=function(e){var t="choo.use";t=e.storeName?t+"("+e.storeName+")":t;var n=a(t);e(this.state,this.emitter,this),n()},q.prototype.start=function(){var t,n,r=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){r._matchRoute(),r._loaded&&(r.emitter.emit(r._events.RENDER),setTimeout(function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(e){}}.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){r.emitter.emit(r._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){window.history.pushState($,null,e),r.emitter.emit(r._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){window.history.replaceState($,null,e),r.emitter.emit(r._events.NAVIGATE)}),window.onpopstate=function(){r.emitter.emit(r._events.POPSTATE)},r._hrefEnabled&&(t=function(e){var t=e.href;t!==window.location.href&&r.emitter.emit(r._events.PUSHSTATE,t)},n=n||window.document,window.addEventListener("click",function(e){if(!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.defaultPrevented)){var r=function e(t){if(t&&t!==n)return"a"!==t.localName||void 0===t.href?e(t.parentNode):t}(e.target);r&&(window.location.origin!==r.origin||r.hasAttribute("download")||"_blank"===r.getAttribute("target")&&l.test(r.getAttribute("rel"))||d.test(r.getAttribute("href"))||(e.preventDefault(),t(r)))}}))),this._matchRoute(),this._tree=this._prerender(this.state),this.emitter.prependListener(r._events.RENDER,function(e,t){t||(t=window.requestAnimationFrame);var n=!1,r=null;return function(){null!==r||n||(n=!0,t(function(){n=!1;for(var t=r.length,i=new Array(t),o=0;o<t;o++)i[o]=r[o];e.apply(e,i),r=null})),r=arguments}}(function(){var e=a("choo.render"),t=r._prerender(r.state),n=a("choo.morph");b(r._tree,t),n(),e()})),e(function(){r.emitter.emit(r._events.DOMCONTENTLOADED),r._loaded=!0}),this._tree},q.prototype.mount=function(t){if("object"!=typeof window)return this.selector=t,this;var n=this;e(function(){var e=a("choo.render"),r=n.start();n._tree="string"==typeof t?document.querySelector(t):t;var i=a("choo.morph");b(n._tree,r),i(),e()})},q.prototype.toString=function(e,t){this.state=A(this.state,t||{}),this._matchRoute(e);var n=this._prerender(this.state);return"string"==typeof n.outerHTML?n.outerHTML:n.toString()},q.prototype._matchRoute=function(e){var t,n;e?(t=e.replace(/\?.+$/,""),n=e):(t=this._createLocation(),n=window.location.search);var r,i=this.router.match(t);return this.state.href=t,this.state.query=(r={},n.replace(/^.*\?/,"").replace(g,function(e,t,n,i){r[decodeURIComponent(t)]=decodeURIComponent(i)}),r),this.state.route=i.route,this.state.params=i.params,this.state._handler=i.cb,this.state},q.prototype._prerender=function(e){var t=a("choo.prerender('"+e.route+"')"),n=e._handler(e,this.emit);return t(),n}}();