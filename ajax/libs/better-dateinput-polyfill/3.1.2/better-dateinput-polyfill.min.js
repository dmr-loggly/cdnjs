/**
 * better-dateinput-polyfill: input[type=date] polyfill for better-dom
 * @version 3.1.2 Sun, 18 Nov 2018 13:15:41 GMT
 * @link https://github.com/chemerisuk/better-dateinput-polyfill
 * @copyright 2018 Maksim Chemerisuk
 * @license MIT
 */
!function(){"use strict";function t(t,e){return"string"==typeof e?Array(t+1).join(e):Array.apply(null,Array(t)).map(e).join("")}function e(t){var e=new Date(Date.UTC(u(2001,2002),0,t));if(l)try{return e.toLocaleDateString(d.lang,{weekday:"short"})}catch(i){}return e.toUTCString().split(",")[0].slice(0,2)}function i(t){var e=new Date(Date.UTC(2010,t));if(l)try{return e.toLocaleDateString(d.lang,{month:"short"})}catch(i){}return e.toUTCString().split(" ")[2]}function n(t,e){var i=new Date(e,t,12);if(l)try{return i.toLocaleDateString(d.lang,{month:"long",year:"numeric"})}catch(n){}return i.toUTCString().split(" ").slice(2,4).join(" ")}var a="dateinput-picker{display:inline-block;vertical-align:bottom}dateinput-picker>object{width:21rem;max-height:calc(2.5rem*8);box-shadow:0 0 15px gray;background:white;position:absolute;opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-transform-origin:0 0;transform-origin:0 0;transition:.1s ease-out}dateinput-picker[aria-hidden=true]>object{opacity:0;-webkit-transform:skew(-25deg) scaleX(.75);transform:skew(-25deg) scaleX(.75);visibility:hidden;height:0}dateinput-picker[aria-expanded=true]>object{max-height:calc(2.5rem + 3.75rem*3)}dateinput-picker+input{color:transparent!important;caret-color:transparent!important}dateinput-picker+input::selection{background:transparent}dateinput-picker+input::-moz-selection{background:transparent}",r="body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;line-height:2.5rem;text-align:center;cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:0;overflow:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{width:3rem;height:2.5rem;position:absolute;text-decoration:none;color:inherit}b{display:block;cursor:pointer}table{width:100%;table-layout:fixed;border-spacing:0;border-collapse:collapse;text-align:center;line-height:2.5rem}td,th{padding:0}thead{background:lightgray;font-size:smaller;font-weight:700}[aria-selected=false],[aria-disabled=true]{color:gray}[aria-selected=true]{box-shadow:inset 0 0 0 1px gray}a:hover,td:hover,[aria-disabled=true],[aria-selected=true]{background-color:whitesmoke}table+table{line-height:3.75rem;background:white;position:absolute;top:2.5rem;left:0;opacity:1;transition:.1s ease-out}table+table[aria-hidden=true]{visibility:hidden!important;opacity:0}",o="orientation"in window?"touchend":"mousedown",s="ScriptEngineMajorVersion"in window,l=function(){try{(new Date).toLocaleString("i")}catch(t){return t instanceof RangeError}return!1}(),c=function(){return"_"!==DOM.create("<input type='date'>").value("_").value()}(),d=DOM.get("documentElement"),u=function(t,e){return"en-US"===d.lang?t:e},h=function(t){return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")},g=function(t){var e=t.split("-"),i=new Date(e[0],e[1]-1,e[2]);return isNaN(i.getTime())?null:i},f='<a style="left:0">&#x25C4;</a> <a style="right:0">&#x25BA;</a> <b></b><table><thead>'+t(7,function(t,i){return"<th>"+e(i)})+"</thead><tbody>"+t(7,"<tr>"+t(7,"<td>")+"</tr>")+"</tbody></table><table><tbody>"+t(3,function(e,n){return"<tr>"+t(4,function(t,e){return"<td>"+i(4*n+e)})})+"</tbody></table>";DOM.extend("input[type=date]",{constructor:function(){var t=this;if(this._isNative())return!1;this._svgTextOptions=this.css(["color","font","padding-left","border-left-width","text-indent","padding-top","border-top-width"]),this._svgTextOptions.dx=["padding-left","border-left-width","text-indent"].map(function(e){return parseFloat(t._svgTextOptions[e])}).reduce(function(t,e){return t+e}),this._svgTextOptions.dy=["padding-top","border-top-width"].map(function(e){return parseFloat(t._svgTextOptions[e])}).reduce(function(t,e){return t+e})/2;var e=DOM.create("<dateinput-picker tabindex='-1'>");e._readyCallback=this._initPicker.bind(this,e),this.before(e.hide())},_isNative:function(){var t=this.get("data-polyfill"),e="orientation"in window?"mobile":"desktop";return"none"===t||(!t||t!==e&&"all"!==t?c:(this.set("type","text"),!1))},_initPicker:function(t,e){var i=e.find("b"),n=e.find("table"),a=e.find("table+table"),r=this._invalidatePicker.bind(this,a,n),s=this._syncValue.bind(this,t,r,"defaultValue"),l=this._syncValue.bind(this,t,r,"value"),c=this._togglePicker.bind(this,t,r),d=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");Object.defineProperty(this[0],"value",{configurable:!1,enumerable:!0,get:d.get,set:this._setValue.bind(this,d.set,l)}),Object.defineProperty(this[0],"valueAsDate",{configurable:!1,enumerable:!0,get:this._getValueAsDate.bind(this),set:this._setValueAsDate.bind(this)}),this.on("focus",this._focusPicker.bind(this,t,c)),this.on("blur",this._blurPicker.bind(this,t)),this.on("change",l),this.on("keydown",["which"],this._keydownPicker.bind(this,t,c)),this.closest("form").on("reset",s),n.on("picker:invalidate",["detail"],this._invalidateDays.bind(this,n)),a.on("picker:invalidate",["detail"],this._invalidateMonths.bind(this,a)),e.on("picker:invalidate",["detail"],this._invalidateCaption.bind(this,i,t)),e.on(o,"a",["target"],this._clickPickerButton.bind(this,t)),e.on(o,"td",["target"],this._clickPickerDay.bind(this,t,c)),i.on(o,c),e.on(o,function(){return!1}),this.on(o,this._focusPicker.bind(this,t,c)),s(),DOM.get("activeElement")===this[0]&&t.show()},_setValue:function(t,e,i){var n=g(i);if(n){var a=g(this.get("min"))||Number.MIN_VALUE,r=g(this.get("max"))||Number.MAX_VALUE;n<a?i=h(a):n>r&&(i=h(r))}else i="";t.call(this[0],i),e()},_getValueAsDate:function(){return g(this.value())},_setValueAsDate:function(t){t instanceof Date&&!isNaN(t.getTime())&&this.value(h(t))},_invalidatePicker:function(t,e,i,n){n&&!isNaN(n.getTime())||(n=this.get("valueAsDate")||new Date);var a=i?t:e;a.fire("picker:invalidate",n),i?t.show():t.hide()},_invalidateDays:function(t,e){var i=e.getMonth(),n=e.getDate(),a=e.getFullYear(),r=g(this.get("min"))||Number.MIN_VALUE,o=g(this.get("max"))||Number.MAX_VALUE,s=new Date(a,i,1);s.setDate(1-s.getDay()-u(1,0)),t.findAll("td").forEach(function(t){s.setDate(s.getDate()+1);var e=i-s.getMonth(),l=null,c=null;a!==s.getFullYear()&&(e*=-1),s<r||s>o?c="true":e>0||e<0?l="false":n===s.getDate()&&(l="true"),t._ts=s.getTime(),t.set("aria-selected",l),t.set("aria-disabled",c),t.value(s.getDate())})},_invalidateMonths:function(t,e){var i=e.getMonth(),n=e.getFullYear(),a=g(this.get("min"))||Number.MIN_VALUE,r=g(this.get("max"))||Number.MAX_VALUE,o=new Date(n,i,1);t.findAll("td").forEach(function(t,e){o.setMonth(e);var n=i-o.getMonth(),s=null;o<a||o>r?s="false":n||(s="true"),t._ts=o.getTime(),t.set("aria-selected",s)})},_invalidateCaption:function(t,e,i){var a=i.getFullYear();"true"===e.get("aria-expanded")?t.value(a):t.value(n(i.getMonth(),a))},_syncValue:function(t,e,i){var n=this.get(i),a=g(n);if(a&&l){var r=this.get("data-format");try{n=new Date(a.getFullYear(),a.getMonth(),a.getDate(),12).toLocaleDateString(d.lang,r?JSON.parse(r):{})}catch(o){}}this.css("background-image","url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg"><text x="'+this._svgTextOptions.dx+'" y="50%" dy="'+this._svgTextOptions.dy+'" fill="'+this._svgTextOptions.color+'" style="font:'+this._svgTextOptions.font+'">'+n+"</text></svg>")+"')"),e("true"===t.get("aria-expanded"),a)},_clickPickerButton:function(t,e){var i=e.next("a")[0]?-1:1,n=this.get("valueAsDate")||new Date;"true"===t.get("aria-expanded")?n.setFullYear(n.getFullYear()+i):n.setMonth(n.getMonth()+i),this.value(h(n)).fire("change")},_clickPickerDay:function(t,e,i){var n;"true"===t.get("aria-expanded")?(n=isNaN(i._ts)?new Date:new Date(i._ts),e(!1)):isNaN(i._ts)||(n=new Date(i._ts),t.hide()),null!=n&&this.value(h(n)).fire("change")},_togglePicker:function(t,e,i){"boolean"!=typeof i&&(i="true"!==t.get("aria-expanded")),t.set("aria-expanded",i),e(i)},_keydownPicker:function(t,e,i){if(13===i&&"true"===t.get("aria-hidden"))return!0;if(32===i)this.get("readonly")||(e(!1),"true"===t.get("aria-hidden")?t.show():t.hide());else if(27===i||9===i||13===i)t.hide();else if(8===i||46===i)this.value("").fire("change");else if(17===i)e();else{var n;if(74===i||40===i?n=7:75===i||38===i?n=-7:76===i||39===i?n=1:72!==i&&37!==i||(n=-1),n){var a=this.get("valueAsDate")||new Date,r="true"===t.get("aria-expanded");!r||40!==i&&38!==i?!r||37!==i&&39!==i?a.setDate(a.getDate()+n):a.setMonth(a.getMonth()+(n>0?1:-1)):a.setMonth(a.getMonth()+(n>0?4:-4)),this.value(h(a)).fire("change")}}return 9===i},_blurPicker:function(t){t.hide()},_focusPicker:function(t,e){if(this.get("readonly"))return!1;var i=this.offset(),n=t.offset(),a=i.height;d.clientHeight<i.bottom+n.height&&(a=-n.height),e(!1),t.css("margin-top",a).show()}}),DOM.extend("dateinput-picker",{constructor:function(){var t=DOM.create("<object type='text/html' width='100%' height='100%'>");s||t.set("data","about:blank"),this.on("load",{capture:!0,once:!0},["target"],this._loadContent.bind(this)),this.append(t),s&&t.set("data","about:blank")},_loadContent:function(t){var e=DOM.constructor(t.get("contentDocument")),i=e.find("body");e.importStyles(r),i.set(f),this._readyCallback(i),delete this._readyCallback}}),DOM.importStyles(a)}();