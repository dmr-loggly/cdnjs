!function o(i,s,h){function u(r,t){if(!s[r]){if(!i[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=s[r]={exports:{}};i[r][0].call(a.exports,function(t){return u(i[r][1][t]||t)},a,a.exports,o,i,s,h)}return s[r].exports}for(var f="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,r,e){},{}],2:[function(t,r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t("./types");var s,o,l,f=t("./Vector");try{var n=t("nblas");s=n.axpy,o=n.scal,l=n.gemm}catch(t){console.log("skipping nblas...")}var a=function(){function c(t,r){return this.type=Float64Array,this.data=new this.type(0),this.shape=[0,0],t&&t.buffer&&t.buffer instanceof ArrayBuffer?c.fromTypedArray(t,r&&r.shape):t instanceof Array?c.fromArray(t):t instanceof f.default?c.fromVector(t,r&&r.shape):t instanceof c?c.fromMatrix(t):"number"==typeof t&&"number"==typeof r?c.fromShape([t,r]):t&&!t.buffer&&t.shape?c.fromShape(t.shape):void 0}return c.fromTypedArray=function(t,r){if(t.length!==r[0]*r[1])throw new Error("Shape does not match typed array dimensions.");var e=Object.create(c.prototype);return e.shape=r,e.data=t,e.type=t.constructor,e},c.fromArray=function(t){var r,e,n=t.length,a=t[0].length,o=new Float64Array(n*a);for(r=0;r<n;++r)for(e=0;e<a;++e)o[r*a+e]=t[r][e];return c.fromTypedArray(o,[n,a])},c.fromMatrix=function(t){var r=Object.create(c.prototype);return r.shape=[t.shape[0],t.shape[1]],r.data=new t.type(t.data),r.type=t.type,r},c.fromVector=function(t,r){if(r&&t.length!==r[0]*r[1])throw new Error("Shape does not match vector dimensions.");var e=Object.create(c.prototype);return e.shape=r||[t.length,1],e.data=new t.type(t.data),e.type=t.type,e},c.fromShape=function(t){var r=t[0],e=t[1];return c.fromTypedArray(new Float64Array(r*e),t)},c.binOp=function(t,r,e){return new c(t).binOp(r,e)},c.prototype.binOp=function(t,r){var e,n=this.shape[0],a=this.shape[1],o=n*a,i=this.data,s=t.data;if(n!==t.shape[0]||a!==t.shape[1])throw new Error("sizes do not match!");for(e=0;e<o;e++)i[e]=r(i[e],s[e],e);return this},c.add=function(t,r){return new c(t).add(r)},c.prototype.add=function(r){try{var t=this.shape,e=t[0],n=t[1],a=r.shape,o=a[0],i=a[1];if(e!==o||n!==i)throw new Error("sizes do not match!");return s(r.data,this.data),this}catch(t){return this.binOp(r,function(t,r){return t+r})}},c.subtract=function(t,r){return new c(t).subtract(r)},c.prototype.subtract=function(r){try{var t=this.shape,e=t[0],n=t[1],a=r.shape,o=a[0],i=a[1];if(e!==o||n!==i)throw new Error("sizes do not match!");return s(r.data,this.data,-1),this}catch(t){return this.binOp(r,function(t,r){return t-r})}},c.product=function(t,r){return new c(t).product(r)},c.prototype.product=function(t){return this.binOp(t,function(t,r){return t*r})},c.scale=function(t,r){return new c(t).scale(r)},c.prototype.scale=function(r){try{return o(this.data,r),this}catch(t){var e,n=this.shape[0]*this.shape[1],a=this.data;for(e=0;e<n;e++)a[e]*=r;return this}},c.fill=function(t,r,e,n){if(t<=0||r<=0)throw new Error("invalid size");e=e||0;var a,o,i=new(n=n||Float64Array)(t*r),s=0;for(a=0;a<t;a++)for(o=0;o<r;o++,s++)i[s]=e instanceof Function?e(a,o):e;return c.fromTypedArray(i,[t,r])},c.zeros=function(t,r,e){return c.fill(t,r,0,e)},c.ones=function(t,r,e){return c.fill(t,r,1,e)},c.random=function(t,r,e,n,a){return null==e&&(e=1),null==n&&(n=0),c.fill(t,r,function(){return e*Math.random()+n},a)},c.multiply=function(t,r){return t.multiply(r)},c.prototype.multiply=function(t){var r=this.shape[0],e=this.shape[1],n=t.shape[0],a=t.shape[1],o=this.data,i=t.data;if(e!==n)throw new Error("sizes do not match");var s,h,u,f,p=new this.type(r*a);try{return l(o,i,p,r,a,e),c.fromTypedArray(p,[r,a])}catch(t){for(s=0;s<r;s++)for(h=0;h<a;h++){for(u=f=0;u<e;u++)f+=o[s*e+u]*i[h+u*a];p[s*a+h]=f}return c.fromTypedArray(p,[r,a])}},Object.defineProperty(c.prototype,"T",{get:function(){return this.transpose()},enumerable:!0,configurable:!0}),c.prototype.transpose=function(){var t,r,e=this.shape[0],n=this.shape[1],a=new this.type(n*e);for(t=0;t<e;t++)for(r=0;r<n;r++)a[r*e+t]=this.data[t*n+r];return c.fromTypedArray(a,[n,e])},c.prototype.inverse=function(){var t=this.shape[0],r=this.shape[1];if(t!==r)throw new Error("invalid dimensions");var e,n,a=c.identity(t),o=c.augment(this,a).gauss(),i=c.zeros(t,r),s=c.zeros(t,r),h=o.shape[1];for(e=0;e<t;e++)for(n=0;n<h;n++)n<r?i.set(e,n,o.get(e,n)):s.set(e,n-t,o.get(e,n));if(!i.equals(c.identity(t)))throw new Error("matrix is not invertible");return s},c.prototype.gauss=function(){var t,r,e,n,a,o=this.shape[0],i=this.shape[1],s=new c(this),h=0;for(r=0;r<o;r++){if(i<=h)throw new Error("matrix is singular");for(e=r;0===s.data[e*i+h];)if(o===++e&&(e=r,i===++h))throw new Error("matrix is singular");if(s.swap(r,e),0!==(t=s.data[r*i+h]))for(n=0;n<i;n++)s.data[r*i+n]=s.data[r*i+n]/t;for(e=0;e<o;e++)if(a=s.data[e*i+h],e!==r)for(n=0;n<i;n++)s.data[e*i+n]=s.data[e*i+n]-s.data[r*i+n]*a;h++}for(r=0;r<o;r++){for(e=t=0;e<i;e++)t||(t=s.data[r*i+e]);if(t)for(n=0;n<i;n++)s.data[r*i+n]=s.data[r*i+n]/t}return s},c.prototype.lu=function(){var t,r,e=this.shape[0],n=this.shape[1],a=c.plu(this),o=a[1],i=new c(a[0]),s=new c(a[0]);for(t=0;t<e;t++)for(r=t;r<n;r++)i.data[t*n+r]=t===r?1:0;for(t=0;t<e;t++)for(r=0;r<t&&r<n;r++)s.data[t*n+r]=0;return[i,s,o]},c.plu=function(t){return new c(t).plu()},c.prototype.plu=function(){var t,r,e,n,a,o,i,s=this.data,h=this.shape[0],u=new Int32Array(h);for(i=0;i<h;++i){for(n=i,t=Math.abs(s[i*h+i]),o=i+1;o<h;++o)t<(r=Math.abs(s[o*h+i]))&&(t=r,n=o);for((u[i]=n)!==i&&this.swap(i,n),e=s[i*h+i],a=i+1;a<h;++a)s[a*h+i]/=e;for(a=i+1;a<h;++a){for(o=i+1;o<h-1;++o)s[a*h+o]-=s[a*h+i]*s[i*h+o],s[a*h+ ++o]-=s[a*h+i]*s[i*h+o];o===h-1&&(s[a*h+o]-=s[a*h+i]*s[i*h+o])}}return[this,u]},c.prototype.lusolve=function(t,r){var e,n,a,o=this.data,i=t.shape[0],s=t.shape[1],h=t.data;for(e=0;e<r.length;e++)e!==r[e]&&t.swap(e,r[e]);for(a=0;a<s;a++){for(e=0;e<i;e++)for(n=0;n<e;n++)h[e*s+a]-=o[e*i+n]*h[n*s+a];for(e=i-1;0<=e;e--){for(n=e+1;n<i;n++)h[e*s+a]-=o[e*i+n]*h[n*s+a];h[e*s+a]/=o[e*i+e]}}return t},c.prototype.solve=function(t){var r=c.plu(this),e=r[0],n=r[1];return e.lusolve(new c(t),n)},c.augment=function(t,r){return new c(t).augment(r)},c.prototype.augment=function(t){var r,e,n=this.shape[0],a=this.shape[1],o=t.shape[0],i=t.shape[1],s=this.data,h=t.data;if(0===o&&0===i)return this;if(n!==o)throw new Error("Rows do not match.");var u=a+i,f=new this.type(u*n);for(r=0;r<n;r++)for(e=0;e<a;e++)f[r*u+e]=s[r*a+e];for(r=0;r<o;r++)for(e=0;e<i;e++)f[r*u+e+a]=h[r*i+e];return this.shape=[n,u],this.data=f,this},c.identity=function(t,r){return c.fill(t,t,function(t,r){return t===r?1:0},r)},c.magic=function(t,r){if(t<0)throw new Error("invalid size");function e(t,r,e){return(r+2*e+1)%t}var n,a,o=new(r=r||Float64Array)(t*t);for(n=0;n<t;n++)for(a=0;a<t;a++)o[(t-n-1)*t+(t-a-1)]=e(t,t-a-1,n)*t+e(t,a,n)+1;return c.fromTypedArray(o,[t,t])},c.prototype.diag=function(){var t,r=this.shape[0],e=this.shape[1],n=new this.type(Math.min(r,e));for(t=0;t<r&&t<e;t++)n[t]=this.data[t*e+t];return new f.default(n)},c.prototype.determinant=function(){if(this.shape[0]!==this.shape[1])throw new Error("matrix is not square");var t,r=c.plu(this),e=r[0],n=r[1],a=this.shape[0],o=this.shape[1],i=1,s=1;for(t=0;t<a;t++)t!==n[t]&&(s*=-1);for(t=0;t<a;t++)i*=e.data[t*o+t];return s*i},c.prototype.trace=function(){var t,r,e=this.diag(),n=0;for(t=0,r=e.length;t<r;t++)n+=e.get(t);return n},c.equals=function(t,r){return t.equals(r)},c.prototype.equals=function(t){var r,e=this.shape[0],n=this.shape[1],a=e*n,o=this.data,i=t.data;if(e!==t.shape[0]||n!==t.shape[1]||this.type!==t.type)return!1;for(r=0;r<a;r++)if(o[r]!==i[r])return!1;return!0},c.prototype.check=function(t,r){if(isNaN(t)||isNaN(r)||t<0||r<0||t>this.shape[0]-1||r>this.shape[1]-1)throw new Error("index out of bounds")},c.prototype.get=function(t,r){return this.check(t,r),this.data[t*this.shape[1]+r]},c.prototype.set=function(t,r,e){return this.check(t,r),this.data[t*this.shape[1]+r]=e,this},c.prototype.swap=function(t,r){if(t<0||r<0||t>this.shape[0]-1||r>this.shape[0]-1)throw new Error("index out of bounds");var e=this.shape[1],n=this.data.slice(t*e,(t+1)*e);return this.data.copyWithin(t*e,r*e,(r+1)*e),this.data.set(n,r*e),this},c.prototype.map=function(t){var r,e=this.shape[0],n=this.shape[1],a=e*n,o=new c(this),i=o.data;for(r=0;r<a;r++)i[r]=t.call(o,i[r],r/n|0,r%n,i);return o},c.prototype.each=function(t){var r,e=this.shape[0],n=this.shape[1],a=e*n;for(r=0;r<a;r++)t.call(this,this.data[r],r/n|0,r%n);return this},c.prototype.reduce=function(t,r){var e=this.shape[0],n=this.shape[1],a=e*n;if(0===a&&!r)throw new Error("Reduce of empty matrix with no initial value.");for(var o=0,i=r||this.data[o++];o<a;o++)i=t.call(this,i,this.data[o],o/n|0,o%n);return i},c.rank=function(t){return new c(t).rank()},c.prototype.rank=function(){var t,r,e,n,a,o,i=this.toArray().map(function(t){return new f.default(t)}),s=this.shape[0],h=this.shape[1],u=0;for(t=0;t<s-1;t++){for(n=null,r=t;r<s;r++)if(i[t].get(t)){t!==r&&(e=i[t],i[t]=i[r],i[r]=e),n=i[t];break}if(n)for(r=t+1;r<s;r++)o=(a=i[r]).get(t)/n.get(t),i[r]=a.subtract(n.scale(o))}for(t=0;t<s;t++)for(r=0;r<h;r++)if(i[t].get(r)){u++;break}return u},c.prototype.toString=function(){var t,r=[],e=this.shape[0],n=this.shape[1];for(t=0;t<e;t++)r.push("["+this.data.subarray(t*n,(t+1)*n).toString()+"]");return"["+r.join(", \n")+"]"},c.prototype.toArray=function(){var t,r=[],e=this.shape[0],n=this.shape[1];for(t=0;t<e;t++)r.push(Array.prototype.slice.call(this.data.subarray(t*n,(t+1)*n)));return r},c}();e.default=a;try{window.Matrix=a}catch(t){}},{"./Vector":3,"./types":4,nblas:1}],3:[function(t,r,e){"use strict";var n,a,s,o,i;Object.defineProperty(e,"__esModule",{value:!0}),t("./types");try{var h=t("nblas");n=h.axpy,a=h.scal,s=h.dot,o=h.nrm2,i=h.idamax}catch(t){console.log("skipping nblas...")}var u=function(){function p(t){this.type=Float64Array,this.data=new this.type(0),this.length=0,t instanceof p?this.combine(t):t&&t.shape?(this.data=new t.type(t.data),this.length=t.shape[0]*t.shape[1],this.type=t.type):t instanceof Array?(this.data=new this.type(t),this.length=t.length):t&&t.buffer&&t.buffer instanceof ArrayBuffer&&(this.data=t,this.length=t.length,this.type=t.constructor)}return p.binOp=function(t,r,e){return new p(t).binOp(r,e)},p.prototype.binOp=function(t,r){var e,n=this.length,a=t.length;if(n!==a)throw new Error("sizes do not match!");if(!n&&!a)return this;for(e=0;e<n;e++)this.data[e]=r(this.data[e],t.data[e],e);return this},p.add=function(t,r){return new p(t).add(r)},p.prototype.add=function(r){try{if(this.length!==r.length)throw new Error("sizes do not match!");return n(r.data,this.data),this}catch(t){return this.binOp(r,function(t,r){return t+r})}},p.subtract=function(t,r){return new p(t).subtract(r)},p.prototype.subtract=function(r){try{if(this.length!==r.length)throw new Error("sizes do not match!");return n(r.data,this.data,-1),this}catch(t){return this.binOp(r,function(t,r){return t-r})}},p.scale=function(t,r){return new p(t).scale(r)},p.prototype.scale=function(n){try{return a(this.data,n),this}catch(t){return this.each(function(t,r,e){e[r]*=n})}},p.normalize=function(t){return new p(t).normalize()},p.prototype.normalize=function(){return this.scale(1/this.magnitude())},p.project=function(t,r){return t.project(new p(r))},p.prototype.project=function(t){return t.scale(this.dot(t)/t.dot(t))},p.fill=function(t,r,e){if(t<0)throw new Error("invalid size");if(0===t)return new p;null==r&&(r=0),null==e&&(e=Float64Array);var n,a=new e(t);if("function"==typeof r)for(n=0;n<t;n++)a[n]=r(n);else for(n=0;n<t;n++)a[n]=r;return new p(a)},p.zeros=function(t,r){return p.fill(t,0,r)},p.ones=function(t,r){return p.fill(t,1,r)},p.random=function(t,r,e,n){return null==r&&(r=1),null==e&&(e=0),p.fill(t,function(){return r*Math.random()+e},n)},p.range=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e,n,a,o=!1,i=Float64Array;switch("function"==typeof t[t.length-1]&&(i=t.pop()),t.length){case 2:a=t.pop(),n=1,e=t.pop();break;case 3:a=t.pop(),n=t.pop(),e=t.pop();break;default:throw new Error("invalid range")}if(a-e<0){var s=a;a=e,e=s,o=!0}if(a-e<n)throw new Error("invalid range");var h=new i(Math.ceil((a-e)/n)),u=e,f=0;if(o)for(;u<a;u+=n,f++)h[f]=a-u+e;else for(;u<a;u+=n,f++)h[f]=u;return new p(h)},p.dot=function(t,r){return t.dot(r)},p.prototype.dot=function(r){if(this.length!==r.length)throw new Error("sizes do not match");try{return s(this.data,r.data)}catch(t){var e,n,a=this.data,o=r.data,i=0;for(e=0,n=this.length;e<n;e++)i+=a[e]*o[e];return i}},p.prototype.magnitude=function(){if(!this.length)return 0;try{return o(this.data)}catch(t){var r,e,n=0,a=this.data;for(r=0,e=this.length;r<e;r++)n+=a[r]*a[r];return Math.sqrt(n)}},p.angle=function(t,r){return t.angle(r)},p.prototype.angle=function(t){return Math.acos(this.dot(t)/this.magnitude()/t.magnitude())},p.equals=function(t,r){return t.equals(r)},p.prototype.equals=function(t){if(this.length!==t.length)return!1;for(var r=0;r<this.length&&this.data[r]===t.data[r];)r++;return r===this.length},p.prototype.min=function(){return this.reduce(function(t,r){return t<r?t:r},Number.POSITIVE_INFINITY)},p.prototype.max=function(){try{return this.data[i(this.length,this.data,1)]}catch(t){return this.reduce(function(t,r){return t<r?r:t},Number.NEGATIVE_INFINITY)}},p.prototype.check=function(t){if(!isFinite(t)||t<0||t>this.length-1)throw new Error("index out of bounds")},p.prototype.get=function(t){return this.check(t),this.data[t]},p.prototype.set=function(t,r){return this.check(t),this.data[t]=r,this},Object.defineProperty(p.prototype,"x",{get:function(){return this.get(0)},set:function(t){this.set(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"y",{get:function(){return this.get(1)},set:function(t){this.set(1,t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"z",{get:function(){return this.get(2)},set:function(t){this.set(2,t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"w",{get:function(){return this.get(3)},set:function(t){this.set(3,t)},enumerable:!0,configurable:!0}),p.combine=function(t,r){return new p(t).combine(r)},p.prototype.combine=function(t){if(!t.length)return this;if(!this.length)return this.data=new t.type(t.data),this.length=t.length,this.type=t.type,this;var r=this.length,e=t.length,n=this.data,a=t.data,o=new this.type(r+e);return o.set(n),o.set(a,r),this.data=o,this.length=r+e,this},p.prototype.push=function(t){return this.combine(new p([t]))},p.prototype.map=function(t){var r,e=new p(this),n=e.data;for(r=0;r<this.length;r++)n[r]=t.call(e,n[r],r,n);return e},p.prototype.each=function(t){var r;for(r=0;r<this.length;r++)t.call(this,this.data[r],r,this.data);return this},p.prototype.reduce=function(t,r){var e=this.length;if(0===e&&!r)throw new Error("Reduce of empty matrix with no initial value.");for(var n=0,a=null!=r?r:this.data[n++];n<e;n++)a=t.call(this,a,this.data[n],n,this.data);return a},p.prototype.toString=function(){var t=["["],r=0;for(r<this.length&&t.push(String(this.data[r++]));r<this.length;)t.push(", "+this.data[r++]);return t.push("]"),t.join("")},p.prototype.toArray=function(){return this.data?[].slice.call(this.data):[]},p}();e.default=u;try{window.Vector=u}catch(t){}},{"./types":4,nblas:1}],4:[function(t,r,e){},{}]},{},[3,2]);