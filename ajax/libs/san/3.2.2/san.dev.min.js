!function(t){function e(){}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t,e){var n=t.prototype,r=new Function;r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,i(t.prototype,n)}function r(t,e){var i=Function.prototype.bind,n=Array.prototype.slice;if(i&&t.bind===i)return i.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}function s(t,e,i){if(t&&t.length>0){i&&(e=r(e,i));for(var n=0,s=t.length;n<s&&!1!==e(t[n],n);n++);}}function o(t,e){var i=!1;return s(t,function(t){return!(i=t===e)}),i}function a(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function p(t,e,i){t.addEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)}function c(t){return jt[t]?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)}function h(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function u(){return"_san_"+Ht++}function l(t,e){if(e&&(t=r(t,e)),Yt.push(t),!Ft)if(Ft=function(){var t=Yt.slice(0);Yt=[],Ft=null,s(t,function(t){t()})},"function"==typeof MutationObserver){var i=1,n=new MutationObserver(Ft),o=document.createTextNode(i);n.observe(o,{characterData:!0}),o.data=++i}else"function"==typeof setImmediate?setImmediate(Ft):setTimeout(Ft,0)}function f(){this.raw=Vt?[]:"",this.length=0}function d(){this.raw=[],this.index={}}function v(t){return t&&1===t.nodeType?"element":Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function g(t){var i=function(){};i.isRequired=e;var n=function(e,i,n,r,s){var o=i[n],a=v(o);if(r=r||zt,null!=o)t(i,n,r,s);else if(e)throw new Error("[SAN ERROR] The `"+n+"` is marked as required in `"+r+"`, but its value is "+a)};return i=r(n,null,!1),i.isRequired=r(n,null,!0),i}function y(t){return g(function(e,i,n,r){var s=e[i],o=v(s);if(o!==t)throw new Error("[SAN ERROR] Invalid "+n+" data `"+r+"` of type("+o+" supplied to "+n+", expected "+t+")")})}function m(t){return g(function(e,i,n,r){if("function"!=typeof t)throw new Error("[SAN ERROR] Data `"+i+"` of `"+n+"` has invalid DataType notation inside `arrayOf`, expected `function`");var s=e[i],o=v(s);if("array"!==o)throw new Error("[SAN ERROR] Invalid "+n+" data `"+r+"` of type("+o+" supplied to "+n+", expected array)");for(var a=0,p=s.length;a<p;a++)t(s,a,n,r+"["+a+"]")})}function x(t){return g(function(e,i,n,r){var s=e[i];if(!(s instanceof t)){var o=s.constructor&&s.constructor.name?s.constructor.name:zt,a=t.name||zt;throw new Error("[SAN ERROR] Invalid "+n+" data `"+r+"` of type("+o+" supplied to "+n+", expected instance of "+a+")")}})}function w(t){return g(function(e,i,n,r){if("object"!==v(t))throw new Error("[SAN ERROR] Data `"+r+"` of `"+n+"` has invalid DataType notation inside `shape`, expected `object`");var s=e[i],o=v(s);if("object"!==o)throw new Error("[SAN ERROR] Invalid "+n+" data `"+r+"` of type("+o+" supplied to "+n+", expected object)");for(var a in t)if(t.hasOwnProperty(a)){var p=t[a];"function"==typeof p&&p(s,a,n,r+"."+a)}})}function N(t){return g(function(e,i,n,r){if("array"!==v(t))throw new Error("[SAN ERROR] Data `"+r+"` of `"+n+"` has invalid DataType notation inside `oneOf`, array is expected.");for(var s=e[i],o=0,a=t.length;o<a;o++)if(s===t[o])return;throw new Error("[SAN ERROR] Invalid "+n+" data `"+r+"` of value(`"+s+"` supplied to "+n+", expected one of "+t.join(",")+")")})}function _(t){return g(function(e,i,n,r){if("array"!==v(t))throw new Error("[SAN ERROR] Data `"+i+"` of `"+n+"` has invalid DataType notation inside `oneOf`, array is expected.");for(var s=e[i],o=0,a=t.length;o<a;o++){var p=t[o];if("function"==typeof p)try{return void p(e,i,n,r)}catch(c){}}throw new Error("[SAN ERROR] Invalid "+n+" data `"+i+"` of value(`"+s+"` supplied to "+n+")")})}function C(t){return g(function(e,i,n,r){if("function"!=typeof t)throw new Error("[SAN ERROR] Data `"+i+"` of `"+n+"` has invalid DataType notation inside `objectOf`, expected function");var s=e[i],o=v(s);if("object"!==o)throw new Error("[SAN ERROR] Invalid "+n+" data `"+i+"` of type("+o+" supplied to "+n+", expected object)");for(var a in s)s.hasOwnProperty(a)&&t(s,a,n,r+"."+a)})}function E(t){return g(function(e,n,r,s,o){if("object"!==v(t))throw new Error("[SAN ERROR] Data `"+n+"` of `"+r+"` has invalid DataType notation inside `exact`");var a=e[n],p=v(a);if("object"!==p)throw new Error("[SAN ERROR] Invalid data `"+s+"` of type `"+p+"`(supplied to "+r+", expected `object`)");var c={};i(c,t),i(c,a);for(var h in c)if(c.hasOwnProperty(h)){var u=t[h];if(!u)throw new Error("[SAN ERROR] Invalid data `"+s+"` key `"+h+"` supplied to `"+r+"`. (`"+h+"` is not defined in `DataTypes.exact`)");if(!(h in a))throw new Error("[SAN ERROR] Invalid data `"+s+"` key `"+h+"` supplied to `"+r+"`. (`"+h+"` is marked `required` in `DataTypes.exact`)");u(a,h,r,s+"."+h,o)}})}function T(t,e){return function(i){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("function"!=typeof r)throw new Error("[SAN ERROR] "+e+":"+n+" is invalid; it must be a function, usually from san.DataTypes");r(i,n,e,n)}}}function R(t){this.source=t,this.len=this.source.length,this.index=0}function b(t){var e,i=t.currentCode(),n=t.index;t:for(;e=t.nextCode();)switch(e){case 92:t.go(1);break;case i:t.go(1);break t}var r=t.cut(n,t.index);return{type:qt.STRING,value:new Function("return "+r)()}}function A(t){var e=t.match(/\s*(-?[0-9]+(.[0-9]+)?)/g);return{type:qt.NUMBER,value:e[1]-0}}function S(t){return t.match(/\s*([\$0-9a-z_]+)/gi)[1]}function k(t){var e=F(t);if(t.goUntil(),63===t.currentCode()){t.go(1);var i=k(t);if(t.goUntil(),58===t.currentCode())return t.go(1),{type:qt.TERTIARY,segs:[e,i,k(t)]}}return e}function O(t){var e=S(t);switch(e){case"true":case"false":return{type:qt.BOOL,value:"true"===e}}var i={type:qt.ACCESSOR,paths:[{type:qt.STRING,value:e}]};t:for(;;)switch(t.currentCode()){case 46:t.go(1),i.paths.push({type:qt.STRING,value:S(t)});break;case 91:t.go(1),i.paths.push(k(t)),t.goUntil(93);break;default:break t}return i}function I(t){t.go(1);var e=k(t);return t.goUntil(41),e}function L(t){switch(t.goUntil(),t.currentCode()){case 33:return t.go(1),{type:qt.UNARY,expr:L(t)};case 34:case 39:return b(t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return A(t);case 40:return I(t)}return O(t)}function P(t){var e=L(t);t.goUntil();var i=t.currentCode();switch(i){case 42:case 47:return t.go(1),{type:qt.BINARY,operator:i,segs:[e,P(t)]}}return e}function U(t){var e=P(t);t.goUntil();var i=t.currentCode();switch(i){case 43:case 45:return t.go(1),{type:qt.BINARY,operator:i,segs:[e,U(t)]}}return e}function M(t){var e=U(t);t.goUntil();var i=t.currentCode();switch(i){case 60:case 62:return 61===t.nextCode()&&(i+=61,t.go(1)),{type:qt.BINARY,operator:i,segs:[e,M(t)]}}return e}function B(t){var e=M(t);t.goUntil();var i=t.currentCode();switch(i){case 61:case 33:if(61===t.nextCode())return i+=61,61===t.nextCode()&&(i+=61,t.go(1)),{type:qt.BINARY,operator:i,segs:[e,B(t)]};t.go(-1)}return e}function j(t){var e=B(t);if(t.goUntil(),38===t.currentCode()){if(38===t.nextCode())return t.go(1),{type:qt.BINARY,operator:76,segs:[e,j(t)]};t.go(-1)}return e}function F(t){var e=j(t);if(t.goUntil(),124===t.currentCode()){if(124===t.nextCode())return t.go(1),{type:qt.BINARY,operator:248,segs:[e,F(t)]};t.go(-1)}return e}function H(t){t.goUntil();var e=S(t),i=[];if(t.goUntil(40))for(;!t.goUntil(41);)i.push(k(t)),t.goUntil(44);return{type:qt.CALL,name:e,args:i}}function Y(t){for(var e=new R(t),i=k(e),n=[];e.goUntil(124);)n.push(H(e));return{type:qt.INTERP,expr:i,filters:n}}function D(t){function e(t){t&&o.push({type:qt.STRING,value:t})}for(var i,n=/\{\{\s*([\s\S]+?)\s*\}\}/gi,r=new R(t),s=0,o=[];null!=(i=r.match(n));)e(r.cut(s,r.index-i[0].length)),o.push(Y(i[1])),s=r.index;e(r.cut(s));var a={type:qt.TEXT,segs:o,raw:t};return 1===o.length&&o[0].type===qt.STRING&&(a.value=o[0].value),a}function W(t){return t=t||{},t.isText?t.textExpr=D(t.text):(t.directives=t.directives||new d,t.props=t.props||new d,t.events=t.events||[],t.childs=t.childs||[]),t}function $(t){if("object"==typeof t&&t.type)return t;var e=k(new R(t));return e.raw=t,e}function V(t){var e=H(new R(t));return e.raw=t,e}function G(t,e){var i=Jt[t];if(i){var n=i(e);return n.name=t,n.raw=e,n}}function z(t,e,i,n){if("id"===e)return void(t.id=i);var r,s,o=e.indexOf("-");switch(o>0&&(s=e.slice(0,o),r=e.slice(o+1)),s){case"on":t.events.push({name:r,expr:V(i)});break;case"san":case"s":var a=G(r,i);a&&t.directives.push(a);break;case"prop":X(t,r,i);break;default:n||X(t,e,i)}}function X(t,e,i){var n=i.match(/^\{=\s*(.*?)\s*=\}$/);if(n)return void t.props.push({name:e,expr:$(n[1]),x:1,raw:i});var r={name:e,expr:D(i),raw:i};switch(r.name){case"class":case"style":s(r.expr.segs,function(t){t.type===qt.INTERP&&t.filters.push({type:qt.CALL,name:"_"+r.name,args:[]})})}t.props.push(r)}function q(t){function e(t){t&&a.childs.push(W({isText:1,text:t,parent:a}))}var i=W();if("string"!=typeof t)return i;t=t.replace(/<!--([\s\S]*?)-->/gm,"").replace(/(^\s+|\s+$)/g,"");for(var n,r=new R(t),s=/<(\/)?([a-z0-9-]+)\s*/gi,o=/([-:0-9a-z\(\)\[\]]+)(=(['"])([^\3]*?)\3)?\s*/gi,a=i,p=0;null!=(n=r.match(s));){var c=n[1],h=n[2].toLowerCase();if(e(t.slice(p,r.index-n[0].length)),c&&62===r.currentCode()){for(var u=a;u&&u.tagName!==h;)u=u.parent;u&&(a=u.parent),r.go(1)}else if(!c){for(var l=W({tagName:h,parent:a}),f=Gt[h];;){var d=r.currentCode();if(62===d){r.go(1);break}if(47===d&&62===r.charCode(r.index+1)){r.go(2),f=1;break}var v=r.match(o);v&&z(l,v[1],v[2]?v[4]:"")}var g=l.directives.get("else");if(g)for(var y=a.childs.length;y--;){var m=a.childs[y];if(!m.isText){var x=m.directives.get("if");if(!x)throw new Error("[SAN FATEL] else not match if.");m["else"]=l,g.value={type:qt.UNARY,expr:x.value};break}}a.childs.push(l),f||(a=l)}p=r.index}return e(r.cut(p)),i}function J(t){return Qt[t]}function K(t){return null==t?"":(""+t).replace(/[&<>"']/g,J)}function Q(t,e,i,n){if(null!=t.value)return t.value;switch(t.type){case qt.UNARY:return!Q(t.expr,e,i);case qt.BINARY:var r=Kt[t.operator];if("function"==typeof r)return r(Q(t.segs[0],e,i),Q(t.segs[1],e,i));return;case qt.TERTIARY:return Q(t.segs[Q(t.segs[0],e,i)?1:2],e,i);case qt.ACCESSOR:return e.get(t);case qt.INTERP:var o=Q(t.expr,e,i);return i&&s(t.filters,function(t){var n=t.name,r=i.filters[n]||Zt[n];if("function"==typeof r){var a=[o];s(t.args,function(t){a.push(Q(t,e,i))}),o=r.apply(i,a)}}),null==o&&(o=""),o;case qt.TEXT:var a=new f;return s(t.segs,function(t){var r=Q(t,e,i);n&&t.type===qt.INTERP&&!t.filters[0]&&(r=K(r)),a.push(r)}),a.toString()}}function Z(t,e,i){var n;return s(e,function(e){return!(n=tt(t,e,i))}),n?1:0}function tt(t,e,i){switch(e.type){case qt.ACCESSOR:for(var n=e.paths,r=n.length,o=t.paths,a=o.length,p=1,c=0;c<r;c++){var h=n[c];if(h.type===qt.ACCESSOR&&tt(t,h,i))return 1;p&&c<a&&Q(h,i)!=Q(o[c],i)&&(p=0)}return p&&(p=Math.max(1,a-r+2)),p;case qt.UNARY:return tt(t,e.expr,i)?1:0;case qt.TEXT:case qt.BINARY:case qt.TERTIARY:return Z(t,e.segs,i);case qt.INTERP:if(!tt(t,e.expr,i)){var u;return s(e.filters,function(e){return!(u=Z(t,e.args,i))}),u?1:0}return 1}return 0}function et(t,e){this.parent=e,this.raw=t||{},this.listeners=[]}function it(t,e,i,n){if(0===e.length)return i;var r=Q(e[0],n);if(t instanceof Array){var s=+r;if(!isNaN(s)){var o=t.slice(0);return o[s]=it(o[s],e.slice(1),i,n),o}}else if("object"==typeof t){var o={};for(var a in t)a!==r&&(o[a]=t[a]);return o[r]=it(t[r]||{},e.slice(1),i,n),o}return t}function nt(){this.raw={}}function rt(t){return t&&"san-cmpt"===t._type}function st(t){this.lifeCycle=new nt,this.init(t||{})}function ot(t,e){e.push("\x3c!--san:"+t.id+"--\x3e")}function at(t,e){return 8===t.nodeType&&t.data==="/s-"+e}function pt(t){if("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document&&/^(col|colgroup|frameset|style|table|tbody|tfoot|thead|tr|select)$/i.test(t.tagName)){var e='[SAN WARNING] set html for element "'+t.tagName+'" may cause an error in old IE';if("object"!=typeof console||!console.warn)throw new Error(e);console.warn(e)}}function ct(t){st.call(this,t)}function ht(t,e){var i=t.props.get("value"),n=t.props.get("type");if(i&&n)switch(n.raw){case"checkbox":return o(e,t.evalExpr(i.expr));case"radio":return e===t.evalExpr(i.expr)}}function ut(t){var e=" "+t;return{input:{attr:function(t,i,n){if(""===t.props.get(i).raw||n&&"false"!==n&&"0"!==n)return e},prop:function(e,i,n){var r=ie[t]||t;e.el[r]=!(!n||"false"===n||"0"===n)}}}}function lt(t,e){return(se[t.tagName]||{})[e]||re[e]||ne}function ft(t,e,i){var n=t.option.target;return n&&n.id===e.id&&(!i||n.prop===i)}function dt(t,e,i,n){var r=[],o=t.expr;s(o.args,function(t){r.push(t.type===qt.ACCESSOR&&1===t.paths.length&&"$event"===t.paths[0].value?e?n:n||window.event:Q(t,i))});var a=this[o.name];"function"==typeof a&&a.apply(this,r)}function vt(t,e){t.tagName&&(e.push("<"+t.tagName+' id="'+t.id+'"'),t.props.each(function(i){var n=rt(t)?Q(i.expr,t.data,t):t.evalExpr(i.expr,1);e.push(lt(t,i.name).input.attr(t,i.name,n)||"")}),e.push(">"))}function gt(t,e){var i=t.tagName;Gt[i]||(e.push("</"),e.push(i),e.push(">"))}function yt(t,e){if("textarea"===t.tagName){var i=t.props.get("value");i&&e.push(K(t.evalExpr(i.expr)))}else{var n=t.aNode.directives.get("html");n?e.push(t.evalExpr(n.value)):s(t.aNode.childs,function(i){var n=xt(i,t);n._static||(n.lifeCycle.set("painting"),t.childs.push(n)),n.genHTML(e)})}}function mt(t){this.childs=[],this.slotChilds=[],this._elFns={},st.call(this,t)}function xt(t,e,i){var n=rt(e)?e:e.owner;i=i||(rt(e)?e.data:e.scope);var r={aNode:t,owner:n,scope:i,parent:e};if(t.isText)return new ct(r);if(t.directives.get("if")||t.directives.get("else"))return new Ct(r);if(t.directives.get("for"))return new bt(r);var s=n.components[t.tagName];return s?(r.subTag=t.tagName,new s(r)):"slot"===t.tagName?new Mt(r):new mt(r)}function wt(t,e,i,n){var r=rt(e)?e:e.owner;n=n||(rt(e)?e.data:e.scope);var s={owner:r,scope:n,parent:e,el:t,elWalker:i};{if(8!==t.nodeType){var o=t.tagName.toLowerCase(),a=Bt(t);s.aNode=a;var p=null;o.indexOf("-")>0&&(p=r.components[o]);var c=t.getAttribute("s-component");return c&&(p=r.components[c],a.tagName=c),a.directives.get("if")||a.directives.get("else")?new Ct(s):p?new p(s):new mt(s)}var h=t.data.match(/^\s*s-([a-z]+)(:[\s\S]+)?$/);if(h)switch(s.stumpText=h[2]?h[2].slice(1):"",h[1]){case"text":return new ct(s);case"for":return new bt(s);case"slot":return new Mt(s);case"if":case"else":return new Ct(s);case"data":var u=new Function("return "+s.stumpText.replace(/^[\s\n]*/,""))();for(var l in u)r.data.set(l,u[l]);return}}}function Nt(t){if(t.el)return t.el.parentNode;for(var e=t.parent._getEl();e&&1!==e.nodeType;)e=e.parentNode;return e}function _t(t){if("undefined"==typeof t.el){for(var e=Nt(t),i=e.firstChild;i&&(8!==i.nodeType||0!==i.data.indexOf("san:")||i.data.replace("san:","")!==t.id);)i=i.nextSibling;t.el=i}return t.el}function Ct(t){mt.call(this,t)}function Et(t){var e=t.aNode,i=W({childs:e.childs,props:e.props,events:e.events,tagName:e.tagName,directives:(new d).concat(e.directives)});return i.directives.remove("if"),i.directives.remove("else"),xt(i,t)}function Tt(t,e,i,n){et.call(this,{},t),this.directive=e,et.prototype.set.call(this,e.item,i),et.prototype.set.call(this,e.index,n)}function Rt(t,e,i){var n=new Tt(t.scope,t.aNode.directives.get("for"),e,i);return xt(t.itemANode,t,n)}function bt(t){mt.call(this,t)}function At(t,e){ae&&oe&&oe.debug&&window.__san_devtool__&&window.__san_devtool__.emit(t,e)}function St(t){this.dataChanges=[],this.listeners={},this.ownSlotChilds=[],mt.call(this,t)}function kt(t){function e(t){St.call(this,t)}if("function"==typeof t)return t;if("object"!=typeof t)throw new Error("[SAN FATAL] param must be a plain object.");return e.prototype=t,n(e,St),e}function Ot(t){this.raw=[],this.index=0;for(var e=t.firstChild;e;){switch(e.nodeType){case 1:case 8:this.raw.push(e)}e=e.nextSibling}this.current=this.raw[this.index],this.next=this.raw[this.index+1]}function It(t){for(var e,i=new Ot(t.el);e=i.current;){var n=wt(e,t,i);n&&!n._static&&t.childs.push(n),i.goNext()}}function Lt(t){t.each(function(t){var e=t.expr;if(e.type===qt.TEXT)switch(e.segs.length){case 0:t.expr={type:qt.BOOL,value:!0};break;case 1:e=t.expr=e.segs[0],e.type===qt.INTERP&&0===e.filters.length&&(t.expr=e.expr)}})}function Pt(t){return t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})}function Ut(t){var e=new d;return t.each(function(t){e.push({name:Pt(t.name),expr:t.expr,x:t.x,raw:t.raw})}),e}function Mt(t){this.childs=[],st.call(this,t)}function Bt(t){var e=W();return e.tagName=t.tagName.toLowerCase(),s(t.attributes,function(t){z(e,t.name,t.value,1)}),e}var jt={};s("svg,g,defs,desc,metadata,symbol,use,image,path,rect,circle,line,ellipse,polyline,polygon,text,tspan,tref,textpath,marker,pattern,clippath,mask,filter,cursor,view,animate,font,font-face,glyph,missing-glyph".split(","),function(t){jt[t]=1});var Ft,Ht=1,Yt=[],Dt="undefined"!=typeof navigator&&navigator.userAgent.match(/msie\s*([0-9]+)/i),Wt=Dt?Dt[1]-0:0,$t=Wt&&Wt<9,Vt=Wt&&Wt<8;f.prototype.toString=function(){return Vt?this.raw.join(""):this.raw},f.prototype.push=Vt?function(t){this.raw[this.length++]=t}:function(t){this.length++,this.raw+=t},d.prototype.push=function(t){if(!t.name)throw new Error('[SAN ERROR] Miss "name" property');this.index[t.name]||(this.raw.push(t),this.index[t.name]=t)},d.prototype.get=function(t){return this.index[t]},d.prototype.each=function(t,e){s(this.raw,t,e)},d.prototype.remove=function(t){this.index[t]=null;for(var e=this.raw.length;e--;)if(this.raw[e].name===t){this.raw.splice(e,1);break}},d.prototype.concat=function(t){var e=new d;return s(this.raw.concat(t.raw),function(t){e.push(t)}),e};var Gt={};s("area,base,br,col,embed,hr,img,input,keygen,param,source,track,wbr".split(","),function(t){Gt[t]=1});var zt="<<anonymous>>",Xt={array:g(e),object:g(e),func:g(e),string:g(e),number:g(e),bool:g(e),symbol:g(e),any:g,arrayOf:g,instanceOf:g,shape:g,oneOf:g,oneOfType:g,objectOf:g,exact:g};Xt={any:g(e),array:y("array"),object:y("object"),func:y("function"),string:y("string"),number:y("number"),bool:y("boolean"),symbol:y("symbol"),arrayOf:m,instanceOf:x,shape:w,oneOf:N,oneOfType:_,objectOf:C,exact:E},R.prototype.currentCode=function(){return this.charCode(this.index)},R.prototype.cut=function(t,e){return this.source.slice(t,e)},R.prototype.go=function(t){this.index+=t},R.prototype.nextCode=function(){return this.go(1),this.currentCode()},R.prototype.charCode=function(t){return this.source.charCodeAt(t)},R.prototype.goUntil=function(t){for(var e;this.index<this.len&&(e=this.currentCode());)switch(e){case 32:case 9:this.index++;break;default:if(e===t)return this.index++,1;return}},R.prototype.match=function(t){t.lastIndex=this.index;var e=t.exec(this.source);return e&&(this.index=t.lastIndex),e};var qt={STRING:1,NUMBER:2,BOOL:3,ACCESSOR:4,INTERP:5,CALL:6,TEXT:7,BINARY:8,UNARY:9,TERTIARY:10},Jt={"for":function(t){var e=new R(t),i=e.match(/^\s*([\$0-9a-z_]+)(\s*,\s*([\$0-9a-z_]+))?\s+in\s+/gi);if(i)return{item:$(i[1]),index:$(i[3]||"$index"),list:O(e)};throw new Error("[SAN FATAL] for syntax error: "+t)},ref:function(t){return{value:D(t)}},"if":function(t){return{value:$(t.replace(/(^\{\{|\}\}$)/g,""))}},"else":function(){return{value:1}},html:function(t){return{value:Y(t)}}},Kt={43:function(t,e){return t+e},45:function(t,e){return t-e},42:function(t,e){return t*e},47:function(t,e){return t/e},60:function(t,e){return t<e},62:function(t,e){return t>e},76:function(t,e){return t&&e},94:function(t,e){return t!=e},121:function(t,e){return t<=e},122:function(t,e){return t==e},123:function(t,e){return t>=e},155:function(t,e){return t!==e},183:function(t,e){return t===e},248:function(t,e){return t||e}},Qt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zt={html:K,url:encodeURIComponent,raw:function(t){return t},_class:function(t){return t instanceof Array?t.join(" "):t},_style:function(t){if("object"==typeof t){var e="";for(var i in t)e+=i+":"+t[i]+";";return e}return t},_sep:function(t,e){return t?e+t:t}},te={SET:1,SPLICE:2};et.prototype.checkDataTypes=function(){this.typeChecker&&this.typeChecker(this.raw)},et.prototype.setTypeChecker=function(t){this.typeChecker=t},et.prototype.listen=function(t){"function"==typeof t&&this.listeners.push(t)},et.prototype.unlisten=function(t){for(var e=this.listeners.length;e--;)t&&this.listeners[e]!==t||this.listeners.splice(e,1)},et.prototype.fire=function(t){s(this.listeners,function(e){e.call(this,t)},this)},et.prototype.get=function(t){var e=this.raw;if(!t)return e;t=$(t);for(var i=t.paths,n=0,r=i.length;n<r&&null!=i[n].value;n++);for(var s=0;null!=e&&s<n;s++)e=e[i[s].value];for(null==e&&this.parent&&(e=this.parent.get({type:qt.ACCESSOR,paths:i.slice(0,n)})),s=n;null!=e&&s<r;s++)e=e[Q(i[s],this)];return e},et.prototype.set=function(t,e,i){i=i||{};var n=t;if(t=$(t),t.type!==qt.ACCESSOR)throw new Error("[SAN ERROR] Invalid Expression in Data set: "+n);this.get(t)!==e&&(this.raw=it(this.raw,t.paths,e,this),!i.silence&&this.fire({type:te.SET,expr:t,value:e,option:i}),this.checkDataTypes())},et.prototype.splice=function(t,e,i){i=i||{};var n=t;if(t=$(t),t.type!==qt.ACCESSOR)throw new Error("[SAN ERROR] Invalid Expression in Data splice: "+n);var r=this.get(t),s=[];if(r instanceof Array){var o=e[0];if(o<0||o>r.length)return;var a=r.slice(0);s=a.splice.apply(a,e),this.raw=it(this.raw,t.paths,a,this),!i.silence&&this.fire({expr:t,type:te.SPLICE,index:o,deleteCount:s.length,value:s,insertions:e.slice(2),option:i})}return this.checkDataTypes(),s},et.prototype.push=function(t,e,i){var n=this.get(t);n instanceof Array&&this.splice(t,[n.length,0,e],i)},et.prototype.pop=function(t,e){var i=this.get(t);if(i instanceof Array){var n=i.length;if(n)return this.splice(t,[n-1,1],e)[0]}},et.prototype.shift=function(t,e){return this.splice(t,[0,1],e)[0]},et.prototype.unshift=function(t,e,i){this.splice(t,[0,0,e],i)},et.prototype.removeAt=function(t,e,i){this.splice(t,[e,1],i)},et.prototype.remove=function(t,e,i){var n=this.get(t);if(n instanceof Array)for(var r=n.length;r--;)if(n[r]===e){this.splice(t,[r,1],i);break}};var ee={compiled:{value:1},inited:{value:2},painting:{value:3},created:{value:4,mutex:"painting"},attached:{value:5,mutex:"detached,painting"},detached:{value:6,mutex:"attached"},disposed:{value:7,mutex:"*"}};nt.prototype.set=function(t){var e=this,i=ee[t];i&&("*"===i.mutex?e.raw={}:i.mutex&&s(i.mutex.split(","),function(t){e.raw[ee[t].value]=0}),e.raw[i.value]=1)},nt.prototype.is=function(t){var e=ee[t];return e&&!!this.raw[e.value]},st.prototype._toPhase=function(t){this.lifeCycle.set(t)},st.prototype.init=function(t){this._init(t),this._toPhase("inited")},st.prototype._init=function(t){this.owner=t.owner,this.parent=t.parent,this.parentComponent=rt(this.parent)?this.parent:this.parent&&this.parent.parentComponent,this.scope=t.scope,this.aNode=this.aNode||t.aNode,this.el=t.el,this.id=this.el&&this.el.id||this.aNode&&this.aNode.id||u()},st.prototype._getEl=function(){return this.el||(this.el=document.getElementById(this.id)),this.el},st.prototype._toAttached=function(){s(this.childs,function(t){t._toAttached()}),this.lifeCycle.is("created")||this._toPhase("created"),this.lifeCycle.is("attached")||(this._attached&&this._attached(),this._toPhase("attached"))},st.prototype.dispose=function(){this._dispose(),this._toPhase("disposed")},st.prototype._dispose=function(){this.el=null,this.owner=null,this.scope=null,this.aNode=null,this.parent=null,this.parentComponent=null},st.prototype.evalExpr=function(t,e){return Q(t,this.scope,this.owner,e)},n(ct,st),ct.prototype._init=function(t){if(st.prototype._init.call(this,t),this.el){for(this.aNode=W({isText:1,text:t.stumpText}),this.parent._pushChildANode(this.aNode);;){var e=t.elWalker.next;if(at(e,"text")){t.elWalker.goNext(),h(e);break}t.elWalker.goNext()}h(this.el),this.el=null}this._static=this.aNode.textExpr.value},ct.prototype.genHTML=function(t){t.push(this.evalExpr(this.aNode.textExpr,1))},ct.prototype.update=function(){var t=this;this._located||(s(this.parent.childs,function(e,i){if(e===t)return t._prev=t.parent.childs[i-1],!1}),this._located=1);for(var e=this.parent._getEl(),i=t._prev&&t._prev._getEl().nextSibling||e.firstChild,n=i;n&&!/^_san_/.test(n.id);)i=n.nextSibling,h(n),n=i;pt(e);var r=this.evalExpr(this.aNode.textExpr,1);i?i.insertAdjacentHTML("beforebegin",r):t._prev?t._prev._getEl().insertAdjacentHTML("afterend",r):e.innerHTML=r},ct.prototype.updateView=function(t){var e=this;s(t,function(t){if(tt(t.expr,e.aNode.textExpr,e.scope))return e.update(),!1})};var ie={readonly:"readOnly",cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder","for":"htmlFor","class":"className"},ne={input:{attr:function(t,e,i){if(i)return" "+e+'="'+i+'"'},prop:function(t,e,i){e=ie[e]||e,jt[t.tagName]?t.el.setAttribute(e,i):t.el[e]=i}},output:function(t,e,i){i.set(e.expr,t.el[e.name],{target:{id:t.id,prop:e.name}})}},re={style:{input:{attr:function(t,e,i){if(i)return' style="'+i+'"'},prop:function(t,e,i){t.el.style.cssText=i}}},draggable:ut("draggable"),readonly:ut("readonly"),disabled:ut("disabled")},se={input:{mutiple:ut("mutiple"),checked:{input:{attr:function(t,e,i){if(ht(t,i))return' checked="checked"'},prop:function(t,e,i){var n=ht(t,i);null!=n&&(t.el.checked=n)}},output:function(t,e,i){var n=t.el;switch((t.props.get("type")||{}).raw){case"checkbox":i[n.checked?"push":"remove"](e.expr,n.value);break;case"radio":n.checked&&i.set(e.expr,n.value,{target:{id:t.id,prop:e.name}})}}}},textarea:{value:{input:{attr:e,prop:ne.input.prop},output:ne.output}},option:{value:{input:{attr:function(t,e,i){for(var n=' value="'+(i||"")+'"',r=t.parent;r&&"select"!==r.tagName;)r=r.parent;if(r){var s,o,a=null;(s=r.props.get("value"))&&(o=s.expr)&&(a=rt(r)?Q(o,r.data,r):r.evalExpr(o)||""),a===i&&(n+=" selected")}return n},prop:ne.input.prop}}},select:{value:{input:{attr:e,prop:function(t,e,i){t.el.value=i||""}},output:ne.output}}};n(mt,st),mt.prototype._init=function(t){st.prototype._init.call(this,t),this.el&&(this._initFromEl(t),this.el.id=this.id),this.tagName=this.tagName||this.aNode.tagName||"div",$t&&this.tagName.indexOf("-")>0&&(this.tagName="div"),"option"===this.tagName&&!this.aNode.props.get("value")&&this.aNode.childs[0]&&this.aNode.props.push({name:"value",expr:this.aNode.childs[0].textExpr}),this.props=this.aNode.props,this.binds=this.aNode.binds||this.aNode.props},mt.prototype._initFromEl=function(){this.aNode=Bt(this.el),this.parent&&this.parent._pushChildANode(this.aNode),this.tagName=this.aNode.tagName,this.aNode.directives.get("html")||It(this)},mt.prototype._create=function(){var t=this;this.el||(t.lifeCycle.set("painting"),t.el=c(t.tagName),t.el.id=t.id,t.props.each(function(e){var i=rt(t)?Q(e.expr,t.data,t):t.evalExpr(e.expr,1),n=/^\s+([a-z0-9_-]+)=(['"])([^\2]*)\2$/.exec(lt(t,e.name).input.attr(t,e.name,i));n&&t.el.setAttribute(n[1],n[3])}))},mt.prototype.create=function(){this.lifeCycle.is("created")||(this._create(),this._toPhase("created"))},mt.prototype._attached=function(){this._initRootBindx();var t=this;s(this.aNode.events,function(e){t._onEl(e.name,r(dt,rt(t)?t:t.owner,e,0,t.data||t.scope))})},mt.prototype._initRootBindx=function(){var t=this,e=rt(t)?this.props:this.binds,i=rt(t)?this.data:this.scope;e&&e.each(function(e){function n(){lt(t,e.name).output(t,e,i)}if(e.x){var r=t._getEl();switch(e.name){case"value":switch(t.tagName){case"input":case"textarea":ae&&window.CompositionEvent&&(t._onEl("compositionstart",function(){this.composing=1}),t._onEl("compositionend",function(){this.composing=0;var t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),this.dispatchEvent(t)})),t._onEl("oninput"in r?"input":"propertychange",function(t){this.composing||n(t)});break;case"select":t._onEl("change",n)}break;case"checked":switch(t.tagName){case"input":switch(r.type){case"checkbox":case"radio":t._onEl("click",n)}}}}})},mt.prototype.attach=function(t,e){this.lifeCycle.is("attached")||(this._attach(t,e),this._toAttached())},mt.prototype._attach=function(t,e){if(this.create(),t&&(e?t.insertBefore(this.el,e):t.appendChild(this.el)),!this._contentReady){var i=new f;yt(this,i);var n=i.toString();n&&(pt(this.el),this.el.innerHTML=n),this._contentReady=1}},mt.prototype._onEl=function(t,e){"function"==typeof e&&(this._elFns[t]||(this._elFns[t]=[]),this._elFns[t].push(e),a(this._getEl(),t,e))},mt.prototype.genHTML=function(t){vt(this,t),yt(this,t),gt(this,t)},mt.prototype.setProp=function(t,e){this.lifeCycle.is("created")&&lt(this,t).input.prop(this,t,e)},mt.prototype.updateView=function(t){this._getEl();var e=this;this.props.each(function(i){s(t,function(t){if(!ft(t,e,i.name)&&tt(t.expr,i.expr,e.scope))return e.setProp(i.name,e.evalExpr(i.expr)),!1})});var i=this.aNode.directives.get("html");i?s(t,function(t){if(tt(t.expr,i.value,e.scope))return pt(e.el),e.el.innerHTML=e.evalExpr(i.value),!1}):this.updateChilds(t)},mt.prototype.updateChilds=function(t,e){s(this.childs,function(e){e.updateView(t)}),s(this[e||"slotChilds"],function(e){mt.prototype.updateChilds.call(e,t)})},mt.prototype.detach=function(){this.lifeCycle.is("attached")&&(this._detach(),this._toPhase("detached"))},mt.prototype._detach=function(){h(this._getEl())},mt.prototype._dispose=function(){this._disposeChilds(),this.detach();for(var t in this._elFns)for(var e=this._elFns[t],i=e&&e.length;i--;)p(this._getEl(),t,e[i]);this._elFns=null,this.childs=null,this.props=null,this.binds=null,this.slotChilds=null,st.prototype._dispose.call(this)},mt.prototype._disposeChilds=function(){s(this.childs,function(t){t.dispose()}),this.childs.length=0},mt.prototype._pushChildANode=function(t){this.aNode.childs.push(t)},n(Ct,mt),Ct.prototype._create=function(){this.el||(this.el=document.createComment("san:"+this.id))},Ct.prototype._init=function(t){if(st.prototype._init.call(this,t),t.el){if(8===t.el.nodeType){var e=q(t.stumpText).childs[0];this.aNode=e}else{this.el=null,this._create(),t.el.parentNode.insertBefore(this.el,t.el.nextSibling),t.el.removeAttribute("san-if"),t.el.removeAttribute("san-else"),t.el.removeAttribute("s-if"),t.el.removeAttribute("s-else");var i=wt(t.el,this,t.elWalker);this.childs[0]=i,this.aNode.childs=i.aNode.childs.slice(0)}var n=this.aNode.directives.get("else");if(n)for(var r=this.parent.childs,s=r.length;s--;){var i=r[s];if(!(i instanceof ct)){if(i instanceof Ct){n.value={type:qt.UNARY,expr:i.aNode.directives.get("if").value};break}throw new Error("[SAN FATEL] else not match if.")}}this.parent._pushChildANode(this.aNode)}this.cond=(this.aNode.directives.get("else")||this.aNode.directives.get("if")).value},Ct.prototype.genHTML=function(t){if(this.evalExpr(this.cond)){var e=Et(this);this.childs[0]=e,e.genHTML(t)}ot(this,t)},Ct.prototype.updateView=function(t){var e=this.childs[0];if(this.evalExpr(this.cond))if(e)this.updateChilds(t);else{e=Et(this);var i=Nt(this);e.attach(i,this._getEl()||i.firstChild),this.childs[0]=e}else this._disposeChilds()},Ct.prototype._getEl=function(){return _t(this)},Ct.prototype._pushChildANode=e,Tt.prototype.exprResolve=function(t){function e(t){return t.type===qt.ACCESSOR&&t.paths[0].value===i.item.paths[0].value?{type:qt.ACCESSOR,paths:i.list.paths.concat({type:qt.NUMBER,value:n.get(i.index)},t.paths.slice(1))}:t}var i=this.directive,n=this;t=e(t);var r=[];return s(t.paths,function(t){r.push(t.type===qt.ACCESSOR&&t.paths[0].value===i.index.paths[0].value?{type:qt.NUMBER,value:n.get(i.index)}:e(t))}),{type:qt.ACCESSOR,paths:r}},n(Tt,et),s(["set","remove","unshift","shift","push","pop","splice"],function(t){Tt.prototype[t]=function(e){e=this.exprResolve($(e)),this.parent[t].apply(this.parent,[e].concat(Array.prototype.slice.call(arguments,1)))}}),n(bt,mt),bt.prototype._pushChildANode=e,bt.prototype.genHTML=function(t,e){s(this.evalExpr(this.aNode.directives.get("for").list),function(e,i){var n=Rt(this,e,i);this.childs.push(n),n.genHTML(t)},this),e||ot(this,t)},bt.prototype._init=function(t){st.prototype._init.call(this,t);var e=this.aNode;if(t.el){e=q(t.stumpText).childs[0],this.aNode=e;for(var i=0,n=e.directives.get("for"),r=this.evalExpr(n.list)||[];;){var s=t.elWalker.next;if(at(s,"for")){h(t.el),this.el=s,t.elWalker.goNext();break}var o=new Tt(this.scope,n,r[i],i),a=wt(s,this,t.elWalker,o);this.childs.push(a),i++,t.elWalker.goNext()}this.parent._pushChildANode(this.aNode)}this.itemANode=W({childs:e.childs,props:e.props,events:e.events,tagName:e.tagName,directives:(new d).concat(e.directives)}),this.itemANode.directives.remove("for")},bt.prototype._attach=function(t,e){this.create(),t&&(e?t.insertBefore(this.el,e):t.appendChild(this.el)),this._paintList()},bt.prototype._paintList=function(){var t=Nt(this),e=this._getEl()||t.firstChild,i=e&&e.previousSibling,n=new f;i?1===i.nodeType?(this.genHTML(n,1),pt(t),i.insertAdjacentHTML("afterend",n.toString())):s(this.evalExpr(this.aNode.directives.get("for").list),function(i,n){var r=Rt(this,i,n);this.childs.push(r),r.attach(t,e)},this):(this.genHTML(n,1),pt(t),t.insertAdjacentHTML("afterbegin",n.toString()))},bt.prototype._detach=function(){this._disposeChilds(),h(this._getEl())},bt.prototype._create=function(){this.el||(this.el=document.createComment("san:"+this.id))},bt.prototype.updateView=function(t){var e=[];s(this.childs,function(){e.push([])});var n=0,r=this.aNode.directives.get("for");if(s(t,function(t){var o=tt(t.expr,r.list,this.scope);if(o){if(o>2){var a=t.expr.paths,p=r.list.paths.length;t=i({},t),t.expr={type:qt.ACCESSOR,paths:r.item.paths.concat(a.slice(p+1))};var c=+this.evalExpr(a[p]);switch(e[c].push(t),t.type){case te.SET:et.prototype.set.call(this.childs[c].scope,t.expr,t.value,{silence:1});break;case te.SPLICE:et.prototype.splice.call(this.childs[c].scope,t.expr,[].concat(t.index,t.deleteCount,t.insertions),{silence:1})}}else if(t.type===te.SET)this._disposeChilds(),n=1;else if(2===o&&t.type===te.SPLICE){var h=t.index,u=t.deleteCount,l={type:te.SET,option:t.option,expr:{type:qt.ACCESSOR,paths:t.expr.paths.concat({type:qt.STRING,value:"length"})}},f={type:te.SET,option:t.option,expr:r.index},d=t.insertions.length;s(this.childs,function(t,i){e[i].push(l),i>=h+u&&(e[i].push(f),et.prototype.set.call(t.scope,f.expr,i-u+d,{silence:1}))},this);var v=[h,u],g=[h,u];s(t.insertions,function(t,e){v.push(Rt(this,t,h+e)),g.push([])},this),s(this.childs.splice.apply(this.childs,v),function(t){t.dispose()}),e.splice.apply(e,g)}}else s(e,function(e){e.push(t)});return!n},this),n)this._paintList(),this._toAttached();else for(var o=this.childs.length,a=this;o--;){var p=this.childs[o];p.lifeCycle.is("attached")?e[o].length&&p.updateView(e[o]):p.attach(Nt(a),a._getEl()),a=p}},bt.prototype._getEl=function(){return _t(this)};var oe,ae="undefined"!=typeof window;At.start=function(t){oe=t,At("san",t)},n(St,mt),St.prototype._type="san-cmpt",St.prototype._callHook=St.prototype._toPhase=function(t){st.prototype._toPhase.call(this,t),"function"==typeof this[t]&&this[t].call(this),At("comp-"+t,this)},St.prototype._toAttached=function(){this._getEl(),st.prototype._toAttached.call(this)},St.prototype.on=function(t,e,i){"function"==typeof e&&(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({fn:e,declaration:i}))},St.prototype.un=function(t,e){for(var i=this.listeners[t],n=i&&i.length;n--;)e&&e!==i[n].fn||i.splice(n,1)},St.prototype.fire=function(t,e){s(this.listeners[t],function(t){t.fn.call(this,e)},this)},St.prototype.init=function(t){this.filters=this.filters||this.constructor.filters||{},this.computed=this.computed||this.constructor.computed||{},this.messages=this.messages||this.constructor.messages||{},this.subTag=t.subTag,this._compile();var e=this,n=t.aNode,o=this.constructor.prototype.aNode;if(n){var a={};s(n.childs,function(t){var e="____",i=!t.isText&&t.props.get("slot");i&&(e=i.raw),a[e]||(a[e]=[]),a[e].push(t)}),this.aNode=W({tagName:o.tagName||n.tagName,givenSlots:a,childs:o.childs,props:o.props,binds:Ut(n.props),events:o.events,directives:n.directives}),s(n.events,function(i){e.on(i.name,r(dt,t.owner,i,1,t.scope),i)})}this._toPhase("compiled"),this.data=new et(i("function"==typeof this.initData&&this.initData()||{},t.data)),mt.prototype._init.call(this,t),Lt(this.binds),this.scope&&this.binds.each(function(t){e.data.set(t.name,e.evalExpr(t.expr))});var p=this.dataTypes||this.constructor.dataTypes;if(p){var c=T(p,this.subTag||this.name||this.constructor.name);this.data.setTypeChecker(c),this.data.checkDataTypes()}this.computedDeps={};for(var h in this.computed)this.computedDeps[h]||this._calcComputed(h);this.dataChanger||(this.dataChanger=r(this._dataChanger,this),this.data.listen(this.dataChanger)),this._toPhase("inited"),this._isInitFromEl&&this._toAttached()},St.prototype._initFromEl=function(){this._isInitFromEl=1,this.aNode=Bt(this.el),this.aNode.givenSlots={},this.aNode.binds=Ut(this.aNode.props),this.aNode.props=this.constructor.prototype.aNode.props,this.parent&&this.parent._pushChildANode(this.aNode),this.tagName=this.aNode.tagName,It(this)},St.prototype._calcComputed=function(t){var e=this.computedDeps[t];e||(e=this.computedDeps[t]={}),this.data.set(t,this.computed[t].call({data:{get:r(function(i){if(!i)throw new Error("[SAN ERROR] call get method in computed need argument");return e[i]||(e[i]=1,this.computed[i]&&this._calcComputed(i),this.watch(i,function(){this._calcComputed(t)})),this.data.get(i)},this)}}))},St.prototype.dispatch=function(t,e){for(var i=this.parentComponent;i;){if("function"==typeof i.messages[t]){i.messages[t].call(i,{target:this,value:e});break}i=i.parentComponent}},St.prototype.ref=function(t){function e(t){s(t,function(t){return i(t),!n})}function i(o){e(o.slotChilds),s(o.childs,function(s){if(rt(s)){var o=s.aNode.directives.get("ref");o&&Q(o.value,s.scope||r.data,r)===t&&(n=s),e(s.slotChilds)}return!n&&s instanceof mt&&i(s),!n})}var n,r=this;return i(this),e(this.ownSlotChilds),n};var pe=[{name:"class",expr:D("{{class | _class | _sep(' ')}}")},{name:"style",expr:D("{{style | _style | _sep(';')}}")}];St.prototype._compile=function(){var t=this.constructor,e=t.prototype;if(!e.hasOwnProperty("_cmptReady")){e.components=t.components||e.components||{};var i=e.components;for(var n in i){var r=i[n];"object"==typeof r?i[n]=kt(r):"self"===r&&(i[n]=t)}e._cmptReady=1}if(!e.hasOwnProperty("_compiled")){e.aNode=W();var o=t.template||e.template;if(o){var a=q(o),p=a.childs[0];if(1!==a.childs.length||p.isText)throw new Error("[SAN FATAL] template must have a root element.");e.aNode=p,"template"===p.tagName&&(p.tagName=null),p.binds=new d,s(pe,function(t){var e=p.props.get(t.name);e?(e.expr.segs.push(t.expr.segs[0]),e.expr.value=null):p.props.push({name:t.name,expr:t.expr})})}e._compiled=1}},St.prototype.updateView=function(t){if(!this.lifeCycle.is("disposed")){var e=this;s(t,function(t){var i=t.expr;e.binds.each(function(n){var r,s=n.name,o=n.expr;!ft(t,e,s)&&(r=tt(i,o,e.scope))&&(r>2&&(s={type:qt.ACCESSOR,paths:[{type:qt.STRING,value:s}].concat(i.paths.slice(o.paths.length))},o=i),e.data.set(s,e.evalExpr(o),{target:{id:e.owner.id}}))})}),s(this.slotChilds,function(e){mt.prototype.updateChilds.call(e,t)});var i=e.dataChanges;i.length&&(e.dataChanges=[],e.props.each(function(t){s(i,function(i){if(tt(i.expr,t.expr,e.data))return e.setProp(t.name,Q(t.expr,e.data,e)),!1})}),this.updateChilds(i,"ownSlotChilds"),this._toPhase("updated"),e.owner&&(s(i,function(t){e.binds.each(function(i){var n=t.expr;if(i.x&&!ft(t,e.owner)&&tt(n,$(i.name),e.data)){var r=i.expr;n.paths.length>1&&(r={type:qt.ACCESSOR,paths:i.expr.paths.concat(n.paths.slice(1))}),e.scope.set(r,Q(n,e.data,e),{target:{id:e.id,prop:i.name}})}})}),e.owner.updateView()))}},St.prototype._dataChanger=function(t){if(this.lifeCycle.is("painting")||this.lifeCycle.is("created")){var e=this.dataChanges.length;for(e||l(this.updateView,this);e--;)switch(tt(t.expr,this.dataChanges[e].expr)){case 1:case 2:t.type===te.SET&&this.dataChanges.splice(e,1)}this.dataChanges.push(t)}},St.prototype.watch=function(t,e){var i=$(t);this.data.listen(r(function(t){tt(t.expr,i,this.data)&&e.call(this,Q(i,this.data,this),t)},this))},St.prototype._dispose=function(){mt.prototype._dispose.call(this),this.ownSlotChilds=null,this.data.unlisten(),this.dataChanger=null,this.dataChanges=null,this.listeners=null},Ot.prototype.goNext=function(){this.current=this.raw[++this.index],this.next=this.raw[this.index+1]},n(Mt,st),Mt.prototype._init=function(t){var e=t.owner,i=W();if(t.el)0!==t.stumpText.indexOf("!")&&(t.owner=e.owner,t.scope=e.scope,t.stumpText=t.stumpText.slice(1)),this.name=t.stumpText||"____";else{var n=t.aNode.props.get("name");this.name=n?n.raw:"____";var r=e.aNode.givenSlots,s=r&&r[this.name];i.childs=s||t.aNode.childs.slice(0),s&&(t.owner=e.owner,t.scope=e.scope)}t.aNode=i,st.prototype._init.call(this,t);for(var o=this.parent;o;){if(o===this.owner){o.ownSlotChilds.push(this);break}if(!(o instanceof Mt)&&o.owner===this.owner){o.slotChilds.push(this);break}o=o.parent}if(t.el){for(;;){var a=t.elWalker.next;if(!a||at(a,"slot")){a&&t.elWalker.goNext();break}var p=wt(a,this,t.elWalker);this.childs.push(p),t.elWalker.goNext()}e!==this.owner&&(e.aNode.givenSlots[this.name]=this.aNode)}},Mt.prototype.genHTML=function(t){yt(this,t)},Mt.prototype.updateView=e,Mt.prototype._getEl=function(){return this.parent._getEl()},Mt.prototype._dispose=function(){mt.prototype._disposeChilds.call(this),st.prototype._dispose.call(this)},Mt.prototype._pushChildANode=mt.prototype._pushChildANode;var ce={version:"3.2.2",debug:!0,Component:St,defineComponent:kt,parseTemplate:q,parseExpr:$,ExprType:qt,LifeCycle:nt,nextTick:l,inherits:n,DataTypes:Xt};"object"==typeof exports&&"object"==typeof module?exports=module.exports=ce:"function"==typeof define&&define.amd?define("san",[],ce):t.san=ce,At.start(ce)}(this);