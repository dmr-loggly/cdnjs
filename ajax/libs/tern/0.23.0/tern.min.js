!function(e,t){"object"==typeof exports&&"object"==typeof module?t(exports,require("./infer"),require("./signal"),require("acorn"),require("acorn-walk")):"function"==typeof define&&define.amd?define(["exports","./infer","./signal","acorn/dist/acorn","acorn-walk/dist/walk"],t):t(e.tern||(e.tern={}),tern,tern.signal,acorn,acorn.walk)}(this,function(e,P,t,k,F){"use strict";var i=Object.create(null);e.registerPlugin=function(e,t){i[e]=t};var r=e.defaultOptions={debug:!1,async:!1,getFile:function(e,t){this.async&&t(null,null)},normalizeFilename:function(e){return e},defs:[],plugins:{},fetchTimeout:1e3,dependencyBudget:2e4,reuseInstances:!0,stripCRs:!1,ecmaVersion:9,projectDir:"/",parent:null},l={completions:{takesFile:!0,run:function(s,o,e){if(null==o.end)throw C("missing .query.end field");var t=s.signalReturnFirst("completion",e,o);if(t)return t;var n=T(e,o.end),r=n,i=e.text;for(;n&&k.isIdentifierChar(i.charCodeAt(n-1));)--n;if(!1!==o.expandWordForward)for(;r<i.length&&k.isIdentifierChar(i.charCodeAt(r));)++r;var a,f,l,u,p=i.slice(n,r),c=[];o.caseInsensitive&&(p=p.toLowerCase());function d(e,t,n,r){if((!g&&!1===o.omitObjectPrototype||t!=s.cx.protos.Object||p)&&!(!1!==o.filter&&p&&0!==(o.caseInsensitive?e.toLowerCase():e).indexOf(p)||a&&a.props[e])){var i=I(o,c,e,t&&t.props[e],n);r&&i&&"string"!=typeof i&&r(i)}}var h,g,y=P.findExpressionAround(e.ast,null,n,e.scope);if(y){var v=y.node;if(!1===o.inLiteral&&"Literal"===v.type&&("string"==typeof v.value||v.regex))return{start:E(o,e,n),end:E(o,e,r),completions:[]};if("MemberExpression"==v.type&&v.object.end<n)h=y;else if(w=n,F=r,"Literal"==(b=v).type&&"string"==typeof b.value&&b.start==w-1&&b.end<=F+1){var m=P.parentNode(v,e.ast);"MemberExpression"==m.type&&m.property==v&&(h={node:m,state:y.state})}else if("ObjectExpression"==v.type){var x=q(v,r);x?(g=y,A=u=x.key.name):p||/:\s*$/.test(e.text.slice(0,n))||(g=y,A=u=!0)}}var b,w,F;if(g)l=P.typeFromContext(e.ast,g),a=g.node.objType;else if(h)A="Literal"==(A=h.node.property).type?A.value.slice(1):A.name,h.node=h.node.object,l=P.expressionType(h);else if("."==i.charAt(n-1)){for(var O=n-1;O&&("."==i.charAt(O-1)||k.isIdentifierChar(i.charCodeAt(O-1)));)O--;var j=i.slice(O,n-1);j&&(l=P.def.parsePath(j,e.scope).getObjType(),A=p)}if(null!=A){if(s.cx.completingProperty=A,l&&P.forAllPropertiesOf(l,d),!c.length&&!1!==o.guess&&l&&l.guessProperties&&l.guessProperties(function(e,t,n){e!=A&&"âœ–"!=e&&"<i>"!=e&&d(e,t,n)}),!c.length&&2<=p.length&&!1!==o.guess)for(var A in s.cx.props)d(A,s.cx.props[A][0],0);f="memberCompletion"}else P.forAllLocalsAt(e.ast,n,e.scope,d),o.includeKeywords&&(6<=s.options.ecmaVersion?D:N).forEach(function(e){d(e,null,0,function(e){e.isKeyword=!0})}),f="variableCompletion";s.signal(f,e,n,r,d),!1!==o.sort&&c.sort(M);return s.cx.completingProperty=null,{start:E(o,e,n),end:E(o,e,r),isProperty:!!A,isObjectKey:!!u,completions:c}}},properties:{run:function(e,t){var n=t.prefix,r=[];for(var i in e.cx.props)"<i>"==i||n&&0!==i.indexOf(n)||r.push(i);!1!==t.sort&&r.sort(M);return{completions:r}}},type:{takesFile:!0,run:function(e,t,n){var r,i,s,o=L(n,t),a=$(e,t,n,o);(r=a[0])||(o=R(n,t),a=$(e,t,n,o),r=a[0]);i=a[1],s=a[2];var f={guess:P.didGuess(),type:P.toString(s,t.depth),name:r&&r.name,exprName:i,doc:s.doc,url:s.url};r&&V(t,r,f);return b(f)}},documentation:{takesFile:!0,run:function(e,t,n){var r=L(n,t),i=G(e,t,n,r),s=i.getType();s||(r=R(n,t),i=G(e,t,n,r),s=i.getType());var o={url:i.url,doc:B(t,i.doc),type:P.toString(i)};s&&V(t,s,o);return b(o)}},definition:{takesFile:!0,run:function(e,t,n){var r=L(n,t),i=G(e,t,n,r);if(P.didGuess())return{};var s=K(i),o={url:i.url,doc:B(t,i.doc),origin:i.origin};if(i.types)for(var a=i.types.length-1;0<=a;--a){var f=i.types[a];V(t,f,o),s||(s=K(f))}if(s&&s.node){var l=s.node.sourceFile||e.fileMap[s.origin],u=E(t,l,s.node.start),p=E(t,l,s.node.end);o.start=u,o.end=p,o.file=s.origin;var c=Math.max(0,s.node.start-50);o.contextOffset=s.node.start-c,o.context=l.text.slice(c,c+50)}else s&&(o.file=s.origin,Z(e,t,s,o));return b(o)}},refs:{takesFile:!0,fullFile:!0,run:function(e,t,n){var r=S(n,t,!0);{if(r&&"Identifier"==r.node.type)return H(e,t,n,r);if(r&&"MemberExpression"==r.node.type&&!r.node.computed){var i=r.node.property;return r.node=r.node.object,Q(e,t,n,r,i)}if(r&&"ObjectExpression"==r.node.type)for(var s=T(n,t.end),o=0;o<r.node.properties.length;++o){var a=r.node.properties[o].key;if(a.start<=s&&a.end>=s)return Q(e,t,n,r,a)}else if(r&&"MethodDefinition"==r.node.type){var i=r.node.key;return Q(e,t,n,r,i)}}throw C("Not at a variable or property name.")}},rename:{takesFile:!0,fullFile:!0,run:function(e,t,n){if("string"!=typeof t.newName)throw C(".query.newName should be a string");var r=S(n,t);if(!r||"Identifier"!=r.node.type)throw C("Not at a variable.");var i=H(e,t,n,r,t.newName),s=i.refs;delete i.refs,i.files=e.files.map(function(e){return e.name});for(var o=i.changes=[],a=0;a<s.length;++a){var f=s[a];f.isShorthand?f.text=r.node.name+": "+t.newName:f.text=t.newName,o.push(f)}return i}},files:{run:function(e){return{files:e.files.map(function(e){return e.name})}}}};function o(e,t){this.name=e,this.parent=t,this.scope=this.text=this.ast=this.lineOffsets=null}function O(e,t){var n={directSourceFile:t,allowReturnOutsideFunction:!0,allowImportExportEverywhere:!0,ecmaVersion:e.options.ecmaVersion,allowHashBang:!0},r=e.signalReturnFirst("preParse",t.text,n)||t.text,i=P.parse(r,n);return e.signal("postParse",i,r),i}e.defineQueryType=function(e,t){l[e]=t},o.prototype.asLineChar=function(e){return x(this,e)};var s=/[\uD800-\uDBFF]/g;function a(e,t,n){e.text=n.options.stripCRs?t.replace(/\r\n/g,"\n"):t,e.hasAstral=s.test(e.text),P.withContext(n.cx,function(){e.ast=O(n,e)}),e.lineOffsets=null}function u(e,t){return P.withContext(e.cx,function(){t.scope=e.cx.topScope,e.signal("beforeLoad",t),P.analyze(t.ast,t.name,t.scope),e.signal("afterLoad",t)}),t}function p(n,e,t,r){var i=n.findFile(e);if(i)return null!=r&&(i.scope&&(n.needsPurge.push(e),P.clearScopes(i.ast),i.scope=null),a(i,r,n)),void(h(n,i.parent)>h(n,t)&&(i.parent=t,i.excluded&&(i.excluded=null)));var s=new o(e,t);n.files.push(s),n.fileMap[e]=s,null!=r?a(s,r,n):n.options.async?(n.startAsyncAction(),n.options.getFile(e,function(e,t){a(s,t||"",n),n.finishAsyncAction(e)})):a(s,n.options.getFile(e)||"",n)}function c(e,t,n){var r=function(){e.off("everythingFetched",r),clearTimeout(i),d(e,t,n)};e.on("everythingFetched",r);var i=setTimeout(r,e.options.fetchTimeout)}function d(n,e,t){if(n.pending)return c(n,e,t);var r=n.fetchError;if(r)return n.fetchError=null,t(r);0<n.needsPurge.length&&P.withContext(n.cx,function(){P.purge(n.needsPurge),n.needsPurge.length=0});for(var i=!0,s=0;s<n.files.length;){for(var o=[];s<n.files.length;++s){null==(f=n.files[s]).text?i=!1:null!=f.scope||f.excluded||o.push(f)}o.sort(function(e,t){return h(n,e.parent)-h(n,t.parent)});for(var a=0;a<o.length;a++){var f;if((f=o[a]).parent&&!g(n,f))f.excluded=!0;else if(e){var l=+new Date;try{P.withTimeout(e[0],function(){u(n,f)})}catch(r){if(r instanceof P.TimedOut)return t(r);throw r}e[0]-=+new Date-l}else u(n,f)}}i?t():c(n,e,t)}function j(e){for(var t=0;e;++t,e=e.prev);return t}function C(e){var t=new Error(e);return t.name="TernError",t}function h(e,t){for(var n=0;t;)t=e.fileMap[t].parent,++n;return n}function g(e,t){var n,r,i=function(e,t){for(;;){var n=e.fileMap[t.parent];if(!n.parent)break;t=n}return t.name}(e,t),s=(n=t.ast,r=0,F.simple(n,{Expression:function(){++r}}),r),o=e.budgets[i];return null==o&&(o=e.budgets[i]=e.options.dependencyBudget),!(o<s)&&(e.budgets[i]=o-s,!0)}function f(e){return"number"==typeof e||"object"==typeof e&&"number"==typeof e.line&&"number"==typeof e.ch}(e.Server=function(e){for(var t in this.cx=null,this.options=e||{},r)e.hasOwnProperty(t)||(e[t]=r[t]);for(var n in this.projectDir=e.projectDir.replace(/\\/g,"/"),/\/$/.test(this.projectDir)||(this.projectDir+="/"),this.parent=e.parent,this.handlers=Object.create(null),this.files=[],this.fileMap=Object.create(null),this.needsPurge=[],this.budgets=Object.create(null),this.uses=0,this.pending=0,this.asyncError=null,this.mod={},this.defs=e.defs.slice(0),this.plugins=Object.create(null),e.plugins)e.plugins.hasOwnProperty(n)&&this.loadPlugin(n,e.plugins[n]);this.reset()}).prototype=t.mixin({addFile:function(e,t,n){!n||n in this.fileMap||(n=null),e in this.fileMap||(e=this.normalizeFilename(e)),p(this,e,n,t)},delFile:function(e){var t=this.findFile(e);if(t){this.needsPurge.push(t.name);for(var n=0;n<this.files.length;n++)this.files[n]==t?this.files.splice(n--,1):this.files[n].parent==e&&(this.files[n].parent=null);delete this.fileMap[t.name]}},reset:function(){this.signal("reset"),this.cx=new P.Context(this.defs,this),this.uses=0,this.budgets=Object.create(null);for(var e=0;e<this.files.length;++e){var t=this.files[e];t.scope&&(P.clearScopes(t.ast),t.scope=null)}this.signal("postReset")},request:function(e,n){var t=function(e){if(e.query){if("string"!=typeof e.query.type)return".query.type must be a string";if(e.query.start&&!f(e.query.start))return".query.start must be a position";if(e.query.end&&!f(e.query.end))return".query.end must be a position"}if(e.files){if(!Array.isArray(e.files))return"Files property must be an array";for(var t=0;t<e.files.length;++t){var n=e.files[t];if("object"!=typeof n)return".files[n] must be objects";if("string"!=typeof n.name)return".files[n].name must be a string";if("delete"!=n.type){if("string"!=typeof n.text)return".files[n].text must be a string";if("part"==n.type){if(!f(n.offset)&&"number"!=typeof n.offsetLines)return".files[n].offset must be a position"}else if("full"!=n.type)return'.files[n].type must be "full" or "part"'}}}}(e);if(t)return n(t);var r=this;!function(r,e,i){if(e.query&&!l.hasOwnProperty(e.query.type))return i("No query type '"+e.query.type+"' defined");var s=e.query;s||i(null,{});var t=e.files||[];t.length&&++r.uses;for(var n=0;n<t.length;++n){var o=t[n];o.name=r.normalizeFilename(o.name),"delete"==o.type?r.delFile(o.name):p(r,o.name,null,"full"==o.type?o.text:null)}var a="number"==typeof e.timeout?[e.timeout]:null;if(!s)return d(r,a,function(){});var f=l[s.type];if(f.takesFile){if("string"!=typeof s.file)return i(".query.file must be a string");/^#/.test(s.file)||p(r,s.file,null)}d(r,a,function(e){if(e)return i(e);var n=f.takesFile&&function(h,e,t){var n=t.match(/^#(\d+)$/);if(!n)return h.findFile(t);var g=e[n[1]];if(!g||"delete"==g.type)throw C("Reference to unknown file "+t);if("full"==g.type)return h.fileMap[g.name];var y,v,m=g.backing=h.fileMap[g.name],r=T(m,null==g.offsetLines?g.offset:{line:g.offsetLines,ch:0},!0),x=(i=g.text,s=i.indexOf("\n"),s<0?i:i.slice(0,s)),b=function(e,t,n){var r=Math.max(0,n-500),i=null;if(!/^\s*$/.test(e))for(;;){var s=t.indexOf(e,r);if(s<0||n+500<s)break;(null==i||Math.abs(i-n)>Math.abs(s-n))&&(i=s),r=s+e.length}return i}(x,m.text,r),w=null==b?Math.max(0,m.text.lastIndexOf("\n",r)):b;var i,s;return P.withContext(h.cx,function(){P.purge(g.name,w,w+g.text.length);var e,t=g.text;if(e=t.match(/(?:"([^"]*)"|([\w$]+))\s*:\s*function\b/)){var n=F.findNodeAround(g.backing.ast,w,"ObjectExpression");n&&n.node.objType&&(y={type:n.node.objType,prop:e[2]||e[1]})}if(b&&(e=x.match(/^(.*?)\bfunction\b/))){for(var r=e[1].length,i="",s=0;s<r;++s)i+=" ";g.text=i+t.slice(r),v=!0}var o=P.scopeAt(m.ast,w,m.scope),a=P.scopeAt(m.ast,w+t.length,m.scope),f=g.scope=j(o)<j(a)?a:o;g.ast=O(h,g),P.analyze(g.ast,g.name,f);e:if(y||v){var l=P.scopeAt(g.ast,x.length,o);if(!l.fnType)break e;if(y)y.type.getProp(y.prop).addType(l.fnType);else if(v){var u=P.scopeAt(m.ast,w+x.length,m.scope);if(u==o||!u.fnType)break e;var p=u.fnType,c=l.fnType;if(!c||c.name!=p.name&&p.name)break e;s=0;for(var d=Math.min(p.args.length,c.args.length);s<d;++s)p.args[s].propagate(c.args[s]);p.self.propagate(c.self),c.retval.propagate(p.retval)}}}),g}(r,t,s.file);if(f.fullFile&&"part"==n.type)return i("Can't run a "+s.type+" query on a file fragment");P.resetGuessing(),P.withContext(r.cx,function(){var e,t=function(){e=f.run(r,s,n)};try{a?P.withTimeout(a[0],t):t()}catch(e){return r.options.debug&&"TernError"!=e.name&&console.error(e.stack),i(e)}i(null,e)})})}(this,e,function(e,t){n(e,t),40<r.uses&&(r.reset(),d(r,null,function(){}))})},findFile:function(e){return this.fileMap[this.normalizeFilename(e)]},flush:function(t){var n=this.cx;d(this,null,function(e){if(e)return t(e);P.withContext(n,t)})},startAsyncAction:function(){++this.pending},finishAsyncAction:function(e){e&&(this.asyncError=e),0==--this.pending&&this.signal("everythingFetched")},addDefs:function(e,t){t?this.defs.unshift(e):this.defs.push(e),this.cx&&this.reset()},deleteDefs:function(e){for(var t=0;t<this.defs.length;t++)if(this.defs[t]["!name"]==e)return this.defs.splice(t,1),void(this.cx&&this.reset())},loadPlugin:function(e,t){if(1==arguments.length&&(t=this.options.plugins[e]||!0),!(e in this.plugins)&&e in i&&t){this.plugins[e]=!0;var n=i[e](this,t);if(n&&(n.defs&&this.addDefs(n.defs,n.loadFirst),n.passes))for(var r in n.passes)n.passes.hasOwnProperty(r)&&this.on(r,n.passes[r])}},normalizeFilename:function(e){var t=this.options.normalizeFilename(e).replace(/\\/g,"/");return 0==t.indexOf(this.projectDir)&&(t=t.slice(this.projectDir.length)),t}});var y=25;function v(e,t,n){var r,i=t+n;if(e.hasAstral)for(s.lastIndex=t;(r=s.exec(e.text))&&r.index<i;)i++;return i}var T=e.resolvePos=function(e,t,n){if("number"!=typeof t){var r=function(e,t){var n=e.text,r=e.lineOffsets||(e.lineOffsets=[0]),i=0,s=0,o=Math.min(Math.floor(t/y),r.length-1);for(i=r[o],s=o*y;s<t;){if(++s,0===(i=n.indexOf("\n",i)+1))return null;s%y==0&&r.push(i)}return i}(e,t.line);if(null==r){if(!n)throw C("File doesn't contain a line "+t.line);t=e.text.length}else t=v(e,r,t.ch)}else t=v(e,0,t);if(t>e.text.length){if(!n)throw C("Position "+t+" is outside of file.");t=e.text.length}return t};function m(e,t,n){var r,i=n-t;if(e.hasAstral)for(s.lastIndex=t;(r=s.exec(e.text))&&r.index<n;)i--;return i}function x(e,t){if(!e)return{line:0,ch:0};for(var n,r,i=e.lineOffsets||(e.lineOffsets=[0]),s=e.text,o=i.length-1;0<=o;--o)i[o]<=t&&(n=o*y,r=i[o]);for(;;){var a=s.indexOf("\n",r);if(t<=a||a<0)break;r=a+1,++n}return{line:n,ch:m(e,r,t)}}var E=e.outputPos=function(e,t,n){if(e.lineCharPositions){var r=x(t,n);return"part"==t.type&&(r.line+=null!=t.offsetLines?t.offsetLines:x(t.backing,t.offset).line),r}return m(t,0,n)+("part"==t.type?t.offset:0)};function b(e){for(var t in e)null==e[t]&&delete e[t];return e}function w(e,t,n){null!=n&&(e[t]=n)}function M(e,t){"string"!=typeof e&&(e=e.name,t=t.name);var n=/^[A-Z]/.test(e);return n==/^[A-Z]/.test(t)?e<t?-1:e==t?0:1:n?1:-1}function q(e,t){for(var n=0;n<e.properties.length;n++){var r=e.properties[n];if(r.key.start<=t&&r.key.end>=t)return r}}var N="break do instanceof typeof case else new var catch finally return void continue for switch while debugger function this with default if throw delete in try".split(" "),D=N.concat("export class extends const super yield import let static".split(" ")),I=e.addCompletion=function(e,t,n,r,i){for(var s=e.types||e.docs||e.urls||e.origins,o=s||e.depths,a=0;a<t.length;++a){var f=t[a];if((o?f.name:f)==n)return}var l=o?{name:n}:n;if(t.push(l),r&&s){P.resetGuessing();var u=r.getType();l.guess=P.didGuess(),e.types&&(l.type=P.toString(r)),e.docs&&w(l,"doc",B(e,r.doc||u&&u.doc)),e.urls&&w(l,"url",r.url||u&&u.url),e.origins&&w(l,"origin",r.origin||u&&u.origin)}return e.depths&&(l.depth=i||0),l};function A(e,t){var n,r,i=e.body;return!!i&&(r=Array.isArray(i)?(n=i[0].start,i[i.length-1].end):(n=i.start,i.end),n<=t&&t<=r)}var L=e.findQueryExpr=function(e,t,n){if(null==t.end)throw C("missing .query.end field");if(t.variable){var r=P.scopeAt(e.ast,T(e,t.end),e.scope);return{node:{type:"Identifier",name:t.variable,start:t.end,end:t.end+1},state:r}}var i=t.start&&T(e,t.start),s=T(e,t.end),o=P.findExpressionAt(e.ast,i,s,e.scope);if(!o){var a=P.findClosestExpression(e.ast,i,s,e.scope);a&&!A(a.node,s)&&(n||(null==i?s:i)-a.node.start<20||a.node.end-s<20)&&(o=a)}if(!o){var f=P.findExpressionAround(e.ast,i,s,e.scope);f&&!A(f.node,s)&&("ObjectExpression"==f.node.type||n||(null==i?s:i)-f.node.start<20||f.node.end-s<20)&&(o=f)}return o};function R(e,t,n){var r=t.start&&T(e,t.start),i=T(e,t.end),s=null,o=P.findExpressionAround(e.ast,r,i,e.scope);return o&&!A(o.node,i)&&("ObjectExpression"==o.node.type||n||(null==r?i:r)-o.node.start<20||o.node.end-i<20)&&(s=o),s}function S(e,t,n){var r=L(e,t,n);if(r)return r;throw C("No expression at the given position.")}function z(e){return e&&(e=e.getType())&&e instanceof P.Obj?e:null}function G(e,t,n,r){var i;r&&(P.resetGuessing(),i=P.expressionType(r));var s,o=e.hasHandler("typeAt");if(o)for(var a=T(n,t.end),f=0;f<o.length;f++)i=o[f](n,a,r,i);if(!i)throw C("No type found at the given position.");if("ObjectExpression"==r.node.type&&null!=t.end&&(s=q(r.node,T(n,t.end)))){var l=s.key.name,u=z(P.typeFromContext(n.ast,r));if(u&&u.hasProp(l))i=u.hasProp(l);else{var p=z(i);p&&p.hasProp(l)&&(i=p.hasProp(l))}}return i}function $(e,t,n,r){var i,s=G(e,t,n,r),o=s;if(s=t.preferFunction&&s.getFunctionType()||s.getType(),r&&("Identifier"==r.node.type?i=r.node.name:"MemberExpression"!=r.node.type||r.node.computed?"MethodDefinition"!=r.node.type||r.node.computed||(i=r.node.key.name):i=r.node.property.name),null!=t.depth&&"number"!=typeof t.depth)throw C(".query.depth must be a number");return[s,i,o]}function B(e,t){if(!t)return null;if("full"==e.docFormat)return t;var n=/.\n[\s@\n]/.exec(t);if(n&&(t=t.slice(0,n.index+1)),(t=t.replace(/\n\s*/g," ")).length<100)return t;var r=/[\.!?] [A-Z]/g;r.lastIndex=80;var i=r.exec(t);return i&&(t=t.slice(0,i.index+1)),t}function V(e,t,n){n.url||(n.url=t.url),n.doc||(n.doc=B(e,t.doc)),n.origin||(n.origin=t.origin);var r,i=P.cx().protos;!n.url&&!n.doc&&t.proto&&(r=t.proto.hasCtor)&&t.proto!=i.Object&&t.proto!=i.Function&&t.proto!=i.Array&&(n.url=r.url,n.doc=B(e,r.doc))}var K=e.getSpan=function(e){if(e.origin){if(e.originNode){var t=e.originNode;return/^Function/.test(t.type)&&t.id&&(t=t.id),{origin:e.origin,node:t}}return e.span?{origin:e.origin,span:e.span}:void 0}},Z=e.storeSpan=function(e,t,n,r){if(r.origin=n.origin,n.span){var i=/^(\d+)\[(\d+):(\d+)\]-(\d+)\[(\d+):(\d+)\]$/.exec(n.span);r.start=t.lineCharPositions?{line:Number(i[2]),ch:Number(i[3])}:Number(i[1]),r.end=t.lineCharPositions?{line:Number(i[5]),ch:Number(i[6])}:Number(i[4])}else{var s=e.fileMap[n.origin];r.start=E(t,s,n.node.start),r.end=E(t,s,n.node.end)}};function H(e,f,t,n,l){for(var u=n.node.name,p=n.state;p&&!(u in p.props);p=p.prev);if(!p)throw C("Could not find a definition for "+u);var r,c=[];function i(a){return function(e,t,n){var r={file:a.name,start:E(f,a,e.start),end:E(f,a,e.end)};if(l){for(var i=t;i!=p;i=i.prev){var s=i.hasProp(l);if(s)throw C("Renaming `"+u+"` to `"+l+"` would make a variable at line "+(x(a,e.start).line+1)+" point to the definition at line "+(x(a,s.name.start).line+1))}var o=n[n.length-2];o&&"Property"==o.type&&o.key==o.value&&(r.isShorthand=!0)}c.push(r)}}if(p.originNode){if(r="local",l){for(var s=p.prev;s&&!(l in s.props);s=s.prev);s&&P.findRefs(p.originNode,p,l,s,function(e){throw C("Renaming `"+u+"` to `"+l+"` would shadow the definition used at line "+(x(t,e.start).line+1))})}P.findRefs(p.originNode,p,u,p,i(t))}else if(r="global",f.onlySourceFile)P.findRefs(t.ast,t.scope,u,p,i(t));else for(var o=0;o<e.files.length;++o){var a=e.files[o];P.findRefs(a.ast,a.scope,u,p,i(a))}return{refs:c,type:r,name:u}}function Q(e,n,t,r,i){var s=P.expressionType(r);"MethodDefinition"==r.node.type&&(s=s.propertyOf);var o=s.getObjType();if(!o)throw C("Couldn't determine type of base object.");var a=[];function f(t){return function(e){a.push({file:t.name,start:E(n,t,e.start),end:E(n,t,e.end)})}}if(n.onlySourceFile)P.findPropRefs(t.ast,t.scope,o,i.name,f(t));else for(var l=0;l<e.files.length;++l){var u=e.files[l];P.findPropRefs(u.ast,u.scope,o,i.name,f(u))}return{refs:a,name:i.name}}e.version="0.23.0"});