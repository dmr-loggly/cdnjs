!function(P,I){var V="snapper";I.fn[V]=function(T){var t,b,k=arguments,e="scroll-snap-type",q=P.CSS&&P.CSS.supports&&(P.CSS.supports(e,"mandatory")||P.CSS.supports("-webkit-"+e,"mandatory")||P.CSS.supports("-ms-"+e,"mandatory"));function s(t,e){var a=I(t).find("."+V+"_item"),r=I(t).width(),n=[];return a.each(function(t){this.offsetLeft>=e-5&&this.offsetLeft<e+r-5&&n.push(this)}),I(n)}function F(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function D(t,e,a){a=a?a+"-":"";var r=s(t,e);I(t).trigger(V+"."+a+"snap",{activeSlides:r})}function M(t,e,a,r){!1,D(t,e);var n=function(){t.scrollLeft=e,I(t).closest("."+V).removeClass(V+"-looping"),I(t).trigger(V+".after-goto",{activeSlides:s(t,e)}),r&&r(),D(t,e,"after"),!0};!P.toss&&P.overthrow&&(P.toss=P.overthrow.toss),void 0===P.toss||a?(t.scrollLeft=e,n()):P.toss(t,{left:e,finished:n})}return t=this.each(function(){if(void 0===b){var r,n=this,s=I(n),t=s.is("[data-"+V+"-nextprev]"),g=I("."+V+"_pane",n),m=g.find("."+V+"_items"),y=m.children();y.addClass(V+"_item");var _=y.length,c=I("."+V+"_nav",n),u=V+"_nav_item-selected",i="false"!==s.attr("data-snapper-deeplinking");if("string"!=typeof T){if(!s.attr("data-"+V+"-enhanced")){var o,l,e,h=c.find("."+V+"_nav_inner");if(h.length||(h=I('<div class="'+V+'_nav_inner"></div>').append(c.children()).appendTo(c)),g.attr("tabindex","0"),C(),I(n).addClass("snapper-enhanced"),t){var a=I('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),f=I(".snapper_nextprev_contain",n);f.length||(f=I(n)),a.appendTo(f)}if(I("a",this).bind("click",function(t){clearTimeout(r);var e=I(this).attr("href");if(I(this).is(".snapper_nextprev_next"))return t.preventDefault(),S(!0);if(I(this).is(".snapper_nextprev_prev"))return t.preventDefault(),S(!1);if(0===e.indexOf("#")&&1<e.length){t.preventDefault();var a=I(e,n);a.length&&(M(g[0],a[0].offsetLeft),i&&"replaceState"in P.history&&P.history.replaceState({},document.title,e))}}),I(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearTimeout(r),t.preventDefault(),t.stopImmediatePropagation(),S(!1)),39!==t.keyCode&&40!==t.keyCode||(clearTimeout(r),t.preventDefault(),t.stopImmediatePropagation(),S(!0))}),I(P).bind("resize",function(){var t=g[0].scrollLeft,e=y.length,a=m.width();void 0===o&&(o=Math.round(t/a*e)),l&&clearTimeout(l),l=setTimeout(function(){C(),M(g[0],y[o].offsetLeft,!0),o=l=void 0},50)}),c.length){function p(){var t,e,a,r,n=g[0].scrollLeft,s=F(m),i=F(c),o=(t=c).height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top")),l=Math.round(n/s*_)||0,f=c.find("a").removeClass(u).eq(l).addClass(u),p=f[0].offsetLeft-i/2,d=f[0].offsetTop-o/2;e=h[0],a=p,r=d,void 0!==P.toss?P.toss(e,{left:a,top:r}):(e.scrollLeft=a,e.scrollTop=r)}g.bind("scroll",p),p()}g.bind("scroll",function(t){e&&clearTimeout(e),e=setTimeout(L,50)}),s.bind("touchstart",function(){clearTimeout(r)}),function e(t){t&&(r=setTimeout(function(){var t=x();t&&(S(!0),e(t))},t))}(x()),s.attr("data-"+V+"-enhanced",!0)}}else{var d,v=Array.prototype.slice.call(k,1),w=m.width()/_;switch(T){case"goto":d=v[0]%_,offset=w*d,M(g[0],offset,!1,function(){L(),"function"==typeof v[1]&&v[1]()});break;case"getIndex":b=Math.floor((g[0].scrollLeft+1)/w);break;case"updateWidths":C()}}}function x(){var t=s.attr("data-autoplay")||s.attr("data-snapper-autoplay"),e=!1;if(t){try{t=parseInt(t,10)}catch(t){e=!0}if(!t||e){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}}return t}function C(){var t=m.attr("style");m.attr("style","");var e=y.eq(0).attr("style");y.eq(0).attr("style","");var a=g.width(),r=y.eq(0).width(),n=P.getComputedStyle(y[0],null),s=parseFloat(n.getPropertyValue("margin-left")),i=parseFloat(n.getPropertyValue("margin-right")),o=r+s+i;y.eq(0).attr("style",e),m.attr("style",t);var l=_/Math.round(a/o)*100,f=r/a*100,p=i/a*100,d=s/a*100,c=f+d+p,u=f/c,h=p/c,v=d/c;m.css("width",l+"%"),y.css("width",100/_*u+"%"),y.css("margin-left",100/_*v+"%"),y.css("margin-right",100/_*h+"%")}function L(){var t=g[0].scrollLeft,e=m.width(),a=y[1]?y[1].offsetLeft:F(y.eq(0)),r=Math.round(t/a)*a,n=e-g.width();n<r&&(r=n),t!==r&&(q?(D(g[0],r),D(g[0],r,"after")):M(g[0],r))}function S(t){var e=g[0].scrollLeft,a=m.width(),r=F(g);return t?a-r-5<=e?(s.addClass(V+"-looping"),void M(g[0],0)):void M(g[0],g[0].scrollLeft+m.width()/_,!1,function(){g.trigger(V+".after-next")}):0===e?(s.addClass(V+"-looping"),void M(g[0],m.width()-g.width())):void M(g[0],g[0].scrollLeft-m.width()/_,!1,function(){g.trigger(V+".after-prev")})}}),void 0!==b?b:t}}(this,jQuery);