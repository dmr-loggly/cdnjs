'use strict';(function(a,b){'function'==typeof define&&define.amd?define('tinysort',function(){return b}):a.tinysort=b})(window||module||{},function(a){function c(a,b){for(var c=a.length,d=c,e=void 0;d--;)e=c-d-1,b(a[e],e)}function b(a,b,c){for(var d in b)(c||a[d]===e)&&(a[d]=b[d]);return a}function d(a,b,c){l.push({prepare:a,sort:b,sortBy:c})}var e=a,f=null,g=window,h=g.document,i=parseFloat,j=/(-?\d+\.?\d*)\s*$/g,k=/(\d+\.?\d*)\s*$/g,l=[],m=function(a){return String.fromCharCode(a)},n=function(a){return Array.from([,,,],function(b,c){return m(a+c)})},o=n(0),p=n(4095),q={selector:f,order:'asc',attr:f,data:f,useVal:!1,place:'org',returns:!1,cases:!1,natural:!1,forceStrings:!1,ignoreDashes:!1,sortFunction:f,useFlex:!1,emptyEnd:!1,console:console},r=0,s=0;return g.Element&&function(a){return a.matches=a.matches||a.msMatchesSelector}(Element.prototype),b(d,{loop:c}),b(function(a,d){function g(a){var c=!!a.selector,d=c&&':'===a.selector[0],e=b(a||{},q);I.push(b({hasSelector:c,hasAttr:e.attr!==f&&''!==e.attr,hasData:e.data!==f,hasFilter:d,sortReturnNumber:'asc'===e.order?1:-1},e))}function m(){c(a,function(a,b){J?J!==a.parentNode&&(K=!1):J=a.parentNode;var c=I[0],d=c.hasFilter,e=c.selector,f=!e||d&&a.matches(e)||e&&a.querySelector(e),g=f?F:G,h={elm:a,pos:b,posn:g.length};E.push(h),g.push(h)}),H.splice.apply(H,[0,Number.MAX_SAFE_INTEGER].concat(F))}function n(e,a,b){for(var f=b(e.toString()),g=b(a.toString()),h=0;f[h]&&g[h];h++)if(f[h]!==g[h]){var i=+f[h],c=+g[h];return i==f[h]&&c==g[h]?i-c:f[h]>g[h]?1:-1}return f.length-g.length}function t(a){for(var b,c=[],d=0,e=-1,f=0,g=void 0,h=void 0;g=(h=a.charAt(d++)).charCodeAt(0);)b=46===g||48<=g&&57>=g,b!==f&&(c[++e]='',f=b),c[e]+=h;return c}function u(d,a){var b=0;0!==s&&(s=0);for(var e=function(){var e=I[s],f=e.ignoreDashes?k:j;c(l,function(a){return a.prepare&&a.prepare(e)});var g=!1,h=z(d,e),m=z(a,e);if(e.sortFunction)b=e.sortFunction(d,a);else if('rand'===e.order)b=.5>Math.random()?1:-1;else if(h===m)b=0;else{if(!e.forceStrings){var o=!!A(h)&&h&&h.match(f),p=!!A(m)&&m&&m.match(f);if(o&&p){var q=h.substr(0,h.length-o[0].length),r=m.substr(0,m.length-p[0].length);q==r&&(g=!0,h=i(o[0]),m=i(p[0]))}}b=e.natural&&(isNaN(h)||isNaN(m))?n(h,m,t):h<m?-1:h>m?1:0}c(l,function(a){var c=a.sort;return c&&(b=c(e,g,h,m,b))}),b*=e.sortReturnNumber,0===b&&s++};0===b&&s<r;)e();return 0===b&&(b=d.pos>a.pos?1:-1),b}function v(){var a=F.length,b=a===E.length,c=a===J.children.length,d=I[0],e=d.place,f=d.console;if(K&&b&&c)N?F.forEach(function(a,b){return a.elm.style.order=b}):J?J.appendChild(w()):f&&f.warn&&f.warn('parentNode has been removed');else{var g='start'===e,h='end'===e,i='first'===e;if('org'===e)F.forEach(x),F.forEach(function(a,b){return y(H[b],a.elm)});else if(g||h){var j=H[g?0:H.length-1],k=j&&j.elm.parentNode,l=k&&(g&&k.firstChild||k.lastChild);l&&(l!==j.elm&&(j={elm:l}),x(j),h&&k.appendChild(j.ghost),y(j,w()))}else if(i||'last'===e){var m=H[i?0:H.length-1];y(x(m),w())}}}function w(){return F.forEach(function(a){return D.appendChild(a.elm)}),D}function x(a){var b=a.elm,c=h.createElement('div');return a.ghost=c,b.parentNode.insertBefore(c,b),a}function y(a,b){var c=a.ghost,d=c.parentNode;d.insertBefore(b,c),d.removeChild(c),delete a.ghost}function z(a,b){var c,d=a.elm,g=b.selector;g&&(b.hasFilter?!d.matches(g)&&(d=f):d=d.querySelector(g)),b.hasAttr?c=d.getAttribute(b.attr):b.useVal?c=d.value||d.getAttribute('value'):b.hasData?c=d.getAttribute('data-'+b.data):d&&(c=d.textContent),A(c)&&(!b.cases&&(c=c.toLowerCase()),c=c.replace(/\s+/g,' '));var h=[e,f,''].indexOf(c);return-1!==h&&(c=(b.emptyEnd?p:o)[h]),c}function A(a){return'string'==typeof a}A(a)&&(a=h.querySelectorAll(a));var B=Object.assign({},q,d||{}),C=B.console;0===a.length&&C&&C.warn&&C.warn('No elements to sort');var D=h.createDocumentFragment(),E=[],F=[],G=[],H=[],I=[],J=void 0,K=!0,L=a.length&&a[0].parentNode,M=L.rootNode!==document,N=a.length&&(d===e||!1!==d.useFlex)&&!M&&-1!==getComputedStyle(L,null).display.indexOf('flex');return function(){0===arguments.length?g({}):c(arguments,function(a){return g(A(a)?{selector:a}:a)}),r=I.length}.apply(f,Array.prototype.slice.call(arguments,1)),m(),F.sort(d&&d.sortFunction||u),v(),F.map(function(a){return a.elm})},{plugin:d,defaults:q})}());
