!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom={})}(this,function(e){"use strict";var t="#".charCodeAt(0),i=".".charCodeAt(0),n=function(e,n){var r=function(e){for(var n=null,r=null,o=null,l=0,s=0,u=0;u<=e.length;u++){var a=e.charCodeAt(u),f=a===t,d=a===i;(f||d||!a)&&(0===l?n=0===u?"div":e.substring(s,u):1===l?r=e.substring(s,u):o?o+=" "+e.substring(s,u):o=e.substring(s,u),f?l=1:d&&(l=2),s=u+1)}return{tag:n,id:r,className:o}}(e),o=r.tag,l=r.id,s=r.className,u=n?document.createElementNS(n,o):document.createElement(o);return l&&(u.id=l),s&&(n?u.setAttribute("class",s):u.className=s),u},r=function(e,t){var i=p(e),n=p(t);return t===n&&n.__redom_view&&(t=n.__redom_view),n.parentNode&&(o(t,n,i),i.removeChild(n)),t},o=function(e,t,i){var n=t.__redom_lifecycle;if(l(n))t.__redom_mounted=!1;else{var r=i;for(t.__redom_mounted&&d(t,"onunmount");r;){var o=r.__redom_lifecycle||{};for(var s in n)o[s]&&(o[s]-=n[s]);l(o)&&(r.__redom_lifecycle=null),r=r.parentNode}}},l=function(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0},s=["onmount","onremount","onunmount"],u="undefined"!=typeof window&&"ShadowRoot"in window,a=function(e,t,i,n){var r=p(e),l=p(t);t===l&&l.__redom_view&&(t=l.__redom_view),t!==l&&(l.__redom_view=t);var s=l.__redom_mounted,u=l.parentNode;return s&&u!==r&&o(t,l,u),null!=i?n?r.replaceChild(l,p(i)):r.insertBefore(l,p(i)):r.appendChild(l),f(t,l,r,u),t},f=function(e,t,i,n){for(var r=t.__redom_lifecycle||(t.__redom_lifecycle={}),o=i===n,l=!1,a=0,f=s;a<f.length;a+=1){var h=f[a];o||e!==t&&h in e&&(r[h]=(r[h]||0)+1),r[h]&&(l=!0)}if(l){var v=i,_=!1;for((o||v&&v.__redom_mounted)&&(d(t,o?"onremount":"onmount"),_=!0);v;){var c=v.parentNode,w=v.__redom_lifecycle||(v.__redom_lifecycle={});for(var m in r)w[m]=(w[m]||0)+r[m];if(_)break;(v===document||u&&v instanceof window.ShadowRoot||c&&c.__redom_mounted)&&(d(v,o?"onremount":"onmount"),_=!0),v=c}}else t.__redom_mounted=!0},d=function(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var i=e.__redom_lifecycle;if(i){var n=e.__redom_view,r=0;for(var o in n&&n[t]&&n[t](),i)o&&r++;if(r)for(var l=e.firstChild;l;){var s=l.nextSibling;d(l,t),l=s}}},h=function(e,t,i){var n=p(e);if(void 0!==i)n.style[t]=i;else if(y(t))n.setAttribute("style",t);else for(var r in t)h(n,r,t[r])},v="http://www.w3.org/1999/xlink",_=function(e,t,i){var n=p(e),r=n instanceof SVGElement;if(void 0!==i)if("style"===t)h(n,i);else if(r&&g(i))n[t]=i;else if("dataset"===t)!function(e,t){for(var i in t)e.dataset[i]=t[i]}(n,i);else if(!r&&(t in n||g(i)))n[t]=i;else{if(r&&"xlink"===t)return void function(e,t){for(var i in t)e.setAttributeNS(v,i,t[i])}(n,i);n.setAttribute(t,i)}else for(var o in t)_(n,o,t[o])};var c=function(e){return document.createTextNode(null!=e?e:"")},w=function(e,t){for(var i=0,n=t;i<n.length;i+=1){var r=n[i];if(0===r||r){var o=typeof r;"function"===o?r(e):"string"===o||"number"===o?e.appendChild(c(r)):b(p(r))?a(e,r):r.length?w(e,r):"object"===o&&_(e,r)}}},m=function(e){return y(e)?k(e):p(e)},p=function(e){return e.nodeType&&e||!e.el&&e||p(e.el)},y=function(e){return"string"==typeof e},g=function(e){return"function"==typeof e},b=function(e){return e&&e.nodeType},x={},N=function(e){return x[e]||(x[e]=n(e))},k=function(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];if(y(e))t=N(e).cloneNode(!1);else if(b(e))t=e.cloneNode(!1);else{if(!g(e))throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return w(p(t),i),t};k.extend=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=N(e);return k.bind.apply(k,[this,n].concat(t))};var A=k,S=k,C=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var n=function e(t,i,n){var r=n;var o=new Array(i.length);for(var l=0;l<i.length;l++)o[l]=i[l]&&p(i[l]);for(var s=0;s<i.length;s++){var u=i[s];if(u){var f=o[s];if(f!==r)if(b(f)){var d=r&&r.nextSibling,h=null!=u.__redom_index,v=h&&d===o[s+1];a(t,u,r,v),v&&(r=d)}else null!=u.length&&(r=e(t,u,r));else r=r.nextSibling}}return r}(e,t,p(e).firstChild);n;){var o=n.nextSibling;r(e,n),n=o}};var V=function(e,t,i){this.View=e,this.initData=i,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=t&&(this.key=g(t)?t:function(e){return function(t){return t[e]}}(t))};V.prototype.update=function(e,t){for(var i=this.View,n=this.key,r=this.initData,o=null!=n,l=this.lookup,s={},u=new Array(e.length),a=this.views,f=0;f<e.length;f++){var d=e[f],h=void 0;if(o){var v=n(d);h=l[v]||new i(r,d,f,e),s[v]=h,h.__redom_id=v}else h=a[f]||new i(r,d,f,e);h.update&&h.update(d,f,e,t),p(h.el).__redom_view=h,u[f]=h}this.oldViews=a,this.views=u,this.oldLookup=l,this.lookup=s};var D=function(e,t,i,n){return new E(e,t,i,n)},E=function(e,t,i,n){this.__redom_list=!0,this.View=t,this.initData=n,this.views=[],this.pool=new V(t,i,n),this.el=m(e),this.keySet=null!=i};E.prototype.update=function(e,t){void 0===e&&(e=[]);var i=this.keySet,n=this.views;this.pool.update(e,t);var o=this.pool,l=o.views,s=o.lookup;if(i)for(var u=0;u<n.length;u++){var a=n[u];null==s[a.__redom_id]&&(a.__redom_index=null,r(this,a))}for(var f=0;f<l.length;f++){l[f].__redom_index=f}C(this,l),i&&(this.lookup=s),this.views=l},E.extend=function(e,t,i,n){return E.bind(E,e,t,i,n)},D.extend=E.extend;var L=function(e,t){this.el=c(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:this._View=e,this._initData=t};L.prototype.update=function(e,t){var i=this._placeholder,n=this.el.parentNode;if(e){if(!this.visible){if(this._el)return a(n,this._el,i),r(n,i),this.el=this._el,void(this.visible=e);var o=new(0,this._View)(this._initData);this.el=p(o),this.view=o,a(n,o,i),r(n,i)}this.view&&this.view.update&&this.view.update(t)}else if(this.visible){if(this._el)return a(n,i,this._el),r(n,this._el),this.el=i,void(this.visible=e);a(n,i,this.view),r(n,this.view),this.el=i,this.view=null}this.visible=e};var P=function(e,t,i){this.el=m(e),this.Views=t,this.initData=i};P.prototype.update=function(e,t){if(e!==this.route){var i=this.Views[e];this.route=e,this.view=i&&new i(this.initData,t),C(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var j="http://www.w3.org/2000/svg",R={},T=function(e){return R[e]||(R[e]=n(e,j))},q=function(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];if(y(e))t=T(e).cloneNode(!1);else if(b(e))t=e.cloneNode(!1);else{if(!g(e))throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return w(p(t),i),t};q.extend=function(e){var t=T(e);return q.bind(this,t)},q.ns=j;var F=q;e.el=A,e.h=S,e.html=k,e.list=D,e.List=E,e.listPool=function(e,t,i){return new V(e,t,i)},e.ListPool=V,e.mount=a,e.unmount=r,e.place=function(e,t){return new L(e,t)},e.Place=L,e.router=function(e,t,i){return new P(e,t,i)},e.Router=P,e.setAttr=_,e.setStyle=h,e.setChildren=C,e.s=F,e.svg=q,e.text=c,Object.defineProperty(e,"__esModule",{value:!0})});