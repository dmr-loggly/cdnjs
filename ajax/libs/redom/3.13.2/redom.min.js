(function(e,u){"object"===typeof exports&&"undefined"!==typeof module?u(exports):"function"===typeof define&&define.amd?define(["exports"],u):u(e.redom={})})(this,function(e){function u(a,c,b){for(var d=0;d<c.length;d+=1){var f=c[d];if(f){var k=g(f);k===b?b=b.nextSibling:k&&k.nodeType?h(a,f,b):null!=f.length&&(b=u(a,f,b))}}return b}var x=function(a,c){for(var b,d=null,f=b=null,k=0,e=0,g=0;g<=a.length;g++){var l=a.charCodeAt(g),r=35===l,n=46===l;l=!l;if(r||n||l)0===k?d=0===g?"div":a.substring(e,g):
1===k?b=a.substring(e,g):f=f?f+(" "+a.substring(e,g)):a.substring(e,g),r?k=1:n&&(k=2),e=g+1}a=d;a=c?document.createElementNS(c,a):document.createElement(a);b&&(a.id=b);f&&(c?a.setAttribute("class",f):a.className=f);return a},q=function(a,c){a=g(a);var b=g(c);c===b&&b.__redom_view&&(c=b.__redom_view);b.parentNode&&(K(c,b,a),a.removeChild(b));return c},K=function(a,c,b){a=c.__redom_lifecycle;if(L(a))c.__redom_mounted=!1;else for(c.__redom_mounted&&y(c,"onunmount");b;){c=b.__redom_lifecycle||{};for(var d in a)c[d]&&
(c[d]-=a[d]);L(c)&&(b.__redom_lifecycle=null);b=b.parentNode}},L=function(a){if(null==a)return!0;for(var c in a)if(a[c])return!1;return!0},M=["onmount","onremount","onunmount"],P="undefined"!==typeof window&&"ShadowRoot"in window,h=function(a,c,b){var d=g(a);a=g(c);c===a&&a.__redom_view&&(c=a.__redom_view);c!==a&&(a.__redom_view=c);var f=a.parentNode;a.__redom_mounted&&f!==d&&K(c,a,f);null!=b?d.insertBefore(a,g(b)):d.appendChild(a);var k=c;b=a.__redom_lifecycle||(a.__redom_lifecycle={});f=d===f;for(var e=
!1,h=0;h<M.length;h+=1){var l=M[h];f||k!==a&&l in k&&(b[l]=(b[l]||0)+1);b[l]&&(e=!0)}if(e){k=!1;if(f||d&&d.__redom_mounted)y(a,f?"onremount":"onmount"),k=!0;for(;d;){a=d.parentNode;e=d.__redom_lifecycle||(d.__redom_lifecycle={});for(var r in b)e[r]=(e[r]||0)+b[r];if(k)break;else{if(d===document||P&&d instanceof window.ShadowRoot||a&&a.__redom_mounted)y(d,f?"onremount":"onmount"),k=!0;d=a}}}else a.__redom_mounted=!0;return c},y=function(a,c){"onmount"===c||"onremount"===c?a.__redom_mounted=!0:"onunmount"===
c&&(a.__redom_mounted=!1);var b=a.__redom_lifecycle;if(b){var d=a.__redom_view,f=0;d&&d[c]&&d[c]();for(var e in b)e&&f++;if(f)for(a=a.firstChild;a;)b=a.nextSibling,y(a,c),a=b}},D=function(a,c,b){a=g(a);if(void 0!==b)a.style[c]=b;else if(z(c))a.setAttribute("style",c);else for(var d in c)D(a,d,c[d])},E=function(a,c,b){a=g(a);var d=a instanceof SVGElement;if(void 0!==b)if("style"===c)D(a,b);else if(d&&v(b))a[c]=b;else if("dataset"===c)for(var f in b)a.dataset[f]=b[f];else if(!d&&(c in a||v(b)))a[c]=
b;else if(d&&"xlink"===c)for(var e in b)a.setAttributeNS("http://www.w3.org/1999/xlink",e,b[e]);else a.setAttribute(c,b);else for(var h in c)E(a,h,c[h])},F=function(a){return document.createTextNode(null!=a?a:"")},G=function(a,c){for(var b=0;b<c.length;b+=1){var d=c[b];if(0===d||d){var f=typeof d;if("function"===f)d(a);else if("string"===f||"number"===f)a.appendChild(F(d));else{var e=g(d);e&&e.nodeType?h(a,d):d.length?G(a,d):"object"===f&&E(a,d)}}}},N=function(a){return z(a)?m(a):g(a)},g=function(a){return a.nodeType&&
a||!a.el&&a||g(a.el)},z=function(a){return"string"===typeof a},v=function(a){return"function"===typeof a},A={},m=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];if(z(a))b=(A[a]||(A[a]=x(a))).cloneNode(!1);else if(a&&a.nodeType)b=a.cloneNode(!1);else if(v(a))b=new (Function.prototype.bind.apply(a,[null].concat(c)));else throw Error("At least one argument required");G(g(b),c);return b};m.extend=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=A[a]||
(A[a]=x(a));return m.bind.apply(m,[this,b].concat(c))};var H=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=g(a);for(c=u(a,c,b.firstChild);c;)b=c.nextSibling,q(a,c),c=b},Q=function(a){return function(c){return c[a]}},B=function(a,c,b){this.View=a;this.initData=b;this.oldLookup={};this.lookup={};this.oldViews=[];this.views=[];null!=c&&(this.lookup={},this.key=v(c)?c:Q(c))};B.prototype.update=function(a,c){for(var b=this.View,d=this.key,e=this.initData,k=null!=d,h=this.lookup,
q={},l=Array(a.length),r=this.views,n=0;n<a.length;n++){var m=a[n];if(k){var p=d(m);var t=h[p]||new b(e,m,n,a);q[p]=t;t.__redom_id=p}else t=r[n]||new b(e,m,n,a);t.update&&t.update(m,n,a,c);g(t.el).__redom_view=t;l[n]=t}this.oldViews=r;this.views=l;this.oldLookup=h;this.lookup=q};var O=function(a,c,b,d){return new p(a,c,b,d)},p=function(a,c,b,d){this.__redom_list=!0;this.View=c;this.initData=d;this.views=[];this.pool=new B(c,b,d);this.el=N(a);this.keySet=null!=b};p.prototype.update=function(a,c){void 0===
a&&(a=[]);var b=this.keySet,d=this.views,e=b&&this.lookup;this.pool.update(a,c);c=this.pool;a=c.views;c=c.lookup;if(b)for(var g=0;g<d.length;g+=1){var h=d[g].__redom_id;h in c||q(this,e[h])}H(this,a);b&&(this.lookup=c);this.views=a};p.extend=function(a,c,b,d){return p.bind(p,a,c,b,d)};O.extend=p.extend;var I=function(a,c){this.el=F("");this.visible=!1;this.view=null;this._placeholder=this.el;a instanceof Node?this._el=a:this._View=a;this._initData=c};I.prototype.update=function(a,c){var b=this._placeholder,
d=this.el.parentNode;if(a){if(!this.visible){if(this._el){h(d,this._el,b);q(d,b);this.el=this._el;this.visible=a;return}var e=new this._View(this._initData);this.el=g(e);this.view=e;h(d,e,b);q(d,b)}this.view&&this.view.update&&this.view.update(c)}else if(this.visible){if(this._el){h(d,b,this._el);q(d,this._el);this.el=b;this.visible=a;return}h(d,b,this.view);q(d,this.view);this.el=b;this.view=null}this.visible=a};var J=function(a,c,b){this.el=N(a);this.Views=c;this.initData=b};J.prototype.update=
function(a,c){if(a!==this.route){var b=this.Views[a];this.route=a;this.view=b&&new b(this.initData,c);H(this.el,[this.view])}this.view&&this.view.update&&this.view.update(c,a)};var C={},w=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];if(z(a))b=(C[a]||(C[a]=x(a,"http://www.w3.org/2000/svg"))).cloneNode(!1);else if(a&&a.nodeType)b=a.cloneNode(!1);else if(v(a))b=new (Function.prototype.bind.apply(a,[null].concat(c)));else throw Error("At least one argument required");G(g(b),
c);return b};w.extend=function(a){a=C[a]||(C[a]=x(a,"http://www.w3.org/2000/svg"));return w.bind(this,a)};w.ns="http://www.w3.org/2000/svg";e.el=m;e.h=m;e.html=m;e.list=O;e.List=p;e.listPool=function(a,c,b){return new B(a,c,b)};e.ListPool=B;e.mount=h;e.unmount=q;e.place=function(a,c){return new I(a,c)};e.Place=I;e.router=function(a,c,b){return new J(a,c,b)};e.Router=J;e.setAttr=E;e.setStyle=D;e.setChildren=H;e.s=w;e.svg=w;e.text=F;Object.defineProperty(e,"__esModule",{value:!0})});
