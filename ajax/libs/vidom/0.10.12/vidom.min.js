/**
 * Vidom
 * @author Filatov Dmitry <dfilatov@inbox.ru>
 * @version 0.10.12
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vidom={})}(this,function(t){"use strict";function e(t){t+="";for(var e=t.length,n=0;e-- >0;)switch(t.charCodeAt(e)){case 38:n|=1;break;case 34:n|=2}return 1===(1&n)&&(t=t.replace(te,"&amp;")),2===(2&n)&&(t=t.replace(ee,"&quot;")),t}function n(t,e){for(var n=t.length,i=0;i<n;)if(t[i++]==e)return!0;return!1}function i(t){return t.replace(ne,"$1-$2").toLowerCase()}function r(t,e,n){if("type"===e&&"INPUT"===t.tagName){var i=t.value;t.setAttribute(e,""+n),t.value=i}else t.setAttribute(_(e),""+n)}function o(t,e,n){n?r(t,e,n):a(t,e)}function s(t,e,n){t[e]=n}function u(t,e,n){var i=t[e];for(var r in n)i[r]=null==n[r]?"":n[r]}function l(t,e,n){"value"===e&&"SELECT"===t.tagName?c(t,n):t[e]!==n&&(t[e]=n)}function a(t,e){t.removeAttribute(_(e))}function h(t,e){"style"===e?t[e].cssText="":"value"===e&&"SELECT"===t.tagName?d(t):t[e]=g(t.tagName,e)}function c(t,e){var i=Array.isArray(e);if(i)for(var r=t.options,o=r.length,s=0,u=void 0;s<o;)u=r[s++],u.selected=null!=e&&n(e,u.value);else t.value=e}function d(t){for(var e=t.options,n=e.length,i=0;i<n;)e[i++].selected=!1}function f(t,n){var i=_(t);return i&&i+'="'+e(n)+'"'}function p(t,e){return e?_(t):""}function v(t,e){return"boolean"==typeof e?p(t,e):f(t,e)}function m(t,e){var n="",r=void 0;for(r in e)null!=e[r]&&(n+=i(r)+":"+e[r]+";");return n?t+'="'+n+'"':n}function g(t,e){var n=t+":"+e;if(n in se)return se[n];var i=t in oe?oe[t]:oe[t]=document.createElement(t);return se[n]=i[e]}function _(t){return t in he?he[t]:he[t]=ae.test(t)?t.toLowerCase():""}function y(t,e){if(Array.isArray(t))b(e,t[1]);else if(Array.isArray(e)){for(var n=e[0],i=void 0,r=e[1];n!==r;)i=n.nextSibling,t.appendChild(n),n=i;t.appendChild(r)}else t.appendChild(e)}function C(t){if(Array.isArray(t)){for(var e=t[0],n=void 0,i=t[1],r=i.parentNode;e!==i;)n=e.nextSibling,r.removeChild(e),e=n;r.removeChild(i)}else t.parentNode.removeChild(t)}function b(t,e){if(Array.isArray(e)&&(e=e[0]),Array.isArray(t)){for(var n=t[0],i=void 0,r=t[1],o=r.parentNode;n!==r;)i=n.nextSibling,o.insertBefore(n,e),n=i;o.insertBefore(r,e)}else e.parentNode.insertBefore(t,e)}function x(t,e,n){if(n){Array.isArray(e)&&(e=e[1]);var i=e.nextSibling;i?b(t,i):y(e.parentNode,t)}else b(t,e)}function A(t,e){Array.isArray(t)?(b(e,t),C(t)):t.parentNode.replaceChild(e,t)}function D(t){if(Array.isArray(t))for(var e=t[0].nextSibling,n=void 0,i=t[1],r=i.parentNode;e!==i;)n=e.nextSibling,r.removeChild(e),e=n;else t.textContent=""}function N(t,e,n){if(Array.isArray(t)){var i=t[1],r=i.previousSibling;r===t[0]?i.parentNode.insertBefore(document.createTextNode(e),i):r.nodeValue=e}else if(n){var o=t.firstChild;o?o.nodeValue=e:t.textContent=e}else t.innerHTML=e}function w(t){if(Array.isArray(t)){var e=t[0].nextSibling;e.parentNode.removeChild(e)}else t.textContent=""}function E(t,e){this.type=t,this.target=e.target,this.nativeEvent=e,this._isPropagationStopped=!1,this._isDefaultPrevented=!1,this._isPersisted=!1}function S(t,e){if(t in ye){var n=ye[t];if(!n._isPersisted)return n.target=e.target,n.nativeEvent=e,n._isPropagationStopped=!1,n._isDefaultPrevented=!1,n}return ye[t]=new E(t,e)}function T(t,e){return Ce in t?t[Ce]:e?null:t[Ce]=be++}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.type;if(Me)for(var n=t.target,i=Re[e].listenersCount,r=void 0,o=void 0,s=void 0;i&&n&&n!==document;){if((o=T(n,!0))&&o in ke&&(r=ke[o][e],null!=r&&(r(s||(s=S(e,t))),0===--i||s.isPropagationStopped())))return;n=n.parentNode}}function R(t){Me&&ke[T(t.currentTarget)][t.type](S(t.type,t))}function M(t,e,n){t.bubbles?++t.listenersCount:e.addEventListener(n,R,!1)}function O(t,e,n){if(e in Re){var i=Re[e];i.set||(null!==i.setup?i.setup():i.bubbles&&document.addEventListener(e,k,!1),i.set=!0);var r=T(t),o=void 0;r in ke?(o=ke[r],null==o[e]&&M(i,t,e)):(o=ke[r]=Object.create(null),M(i,t,e)),o[e]=n}}function j(t,e,n){t.bubbles?--t.listenersCount:e.removeEventListener(n,R)}function P(t,e){var n=T(t,!0);if(null!==n&&n in ke){var i=ke[n];i[e]=null,j(Re[e],t,e)}}function F(t){var e=T(t,!0);if(null!==e&&e in ke){var n=ke[e];for(var i in n)null!==n[i]&&j(Re[i],t,i);delete ke[e]}}function I(){Me=!1}function L(){Me=!0}function U(t){return Array.isArray(t)?q(t):t.namespaceURI===Oe.html?null:t.namespaceURI}function q(t){return U((Array.isArray(t)?t[t.length-1]:t).parentNode)}function B(t,e){var n=t.getDomNode();_e.append(n,e.renderToDom(U(n))),e.mount()}function H(t,e){var n=e.getDomNode();_e.insertBefore(t.renderToDom(q(n)),n),t.mount()}function V(t){var e=t.getDomNode();t.unmount(),_e.remove(e)}function K(t,e,n){var i=document.activeElement;I(),_e.move(t.getDomNode(),e.getDomNode(),n),document.activeElement!==i&&i.focus(),L()}function W(t){for(var e=t.getDomNode(),n=t.children,i=n.length,r=0;r<i;)n[r++].unmount();_e.removeChildren(e)}function Z(t,e){var n=t.getDomNode();t.unmount(),_e.replace(n,e.renderToDom(q(n))),e.mount()}function $(t,e,n){var i=t.getDomNode();e in je?O(i,je[e],n):ge(e).set(i,e,n)}function z(t,e){var n=t.getDomNode();e in je?P(n,je[e]):ge(e).remove(n,e)}function G(t,e,n){_e.updateText(t.getDomNode(),e,n)}function J(t){_e.removeText(t.getDomNode())}function Q(t,e){var n=t.children,i=e.children,r=n.length,o=i.length;if(1===r&&1===o)return void n[0].patch(i[0]);for(var s=0,u=r-1,l=n[s],a=l.key,h=n[u],c=h.key,d=0,f=o-1,p=i[d],v=p.key,m=i[f],g=m.key,_=0,y=null,C=void 0,b=void 0,x=Object.create(null);s<=u&&d<=f;)s in x?_=1:u in x?_=2:a===v?(l.patch(p),_=5):c===g?(h.patch(m),_=10):null!==a&&a===g?(Pe.moveChild(l,h,!0),l.patch(m),_=9):null!==c&&c===v?(Pe.moveChild(h,l,!1),h.patch(p),_=6):null!==a&&null===v?(Pe.insertChild(p,l),_=4):null===a&&null!==v?(Pe.removeChild(l),_=1):(null===y&&(y=X(n,s,u)),v in y?(C=y[v],b=n[C],x[C]=!0,Pe.moveChild(b,l,!1),b.patch(p)):Pe.insertChild(p,l),_=4),1===(1&_)&&++s<=u&&(l=n[s],a=l.key),2===(2&_)&&--u>=s&&(h=n[u],c=h.key),4===(4&_)&&++d<=f&&(p=i[d],v=p.key),8===(8&_)&&--f>=d&&(m=i[f],g=m.key),_=0;for(;s<=u;)s in x||Pe.removeChild(n[s]),++s;for(;d<=f;)f<o-1?Pe.insertChild(i[d],i[f+1]):Pe.appendChild(e,i[d]),++d}function X(t,e,n){for(var i=Object.create(null),r=void 0;e<n;)r=t[e].key,null!==r&&(i[r]=e),++e;return i}function Y(t){t+="";for(var e=t.length,n=0;e-- >0;)switch(t.charCodeAt(e)){case 38:n|=1;break;case 60:n|=2;break;case 62:n|=4}return 1===(1&n)&&(t=t.replace(Fe,"&amp;")),2===(2&n)&&(t=t.replace(Ie,"&lt;")),4===(4&n)&&(t=t.replace(Le,"&gt;")),t}function tt(t,e,n){var i={};for(var r in t)i[r]=t[r];for(var o in e){var s=e[o];(n||"undefined"!=typeof s)&&(i[o]=s)}return i}function et(t,e){var n=void 0;if(null===e)n=t in qe?qe[t]:qe[t]="!"===t?document.createComment(""):document.createElement(t);else{var i=e+":"+t;n=i in qe?qe[i]:qe[i]=document.createElementNS(e,t)}return n.cloneNode()}function nt(t,e,n){var i=He[e]||"div",r=Ve[i]||(Ve[i]=document.createElement(i));if(!n||!Be[n]||Be[n]===e)return r.innerHTML=t,r.removeChild(r.firstChild);var o=Be[n];return r.innerHTML="<"+o+' xmlns="'+n+'">'+t+"</"+o+">",r.removeChild(r.firstChild).firstChild}function it(t){if(null==t)return null;var e=typeof t;if("object"!==e)return"string"===e?t||null:"boolean"===e?null:""+t;if(!Array.isArray(t))return t;if(0===t.length)return null;for(var n=t,i=0,r=!1,o=void 0,s=t.length,u=Object.create(null);i<s;){if(o=i in u?u[i]:it(t[i]),null===o)null!==n&&(r?n===t&&(n=t.slice(0,i)):n=null);else if("object"==typeof o)Array.isArray(o)?n=r?(n===t?n.slice(0,i):Array.isArray(n)?n:[rt(n)]).concat(o):o:n!==t?r?Array.isArray(n)?n.push(o):n=[rt(n),o]:n=o:o!==t[i]&&(r?(n=n.slice(0,i),n.push(o)):n=o),r=!0;else{for(var l=void 0,a=i;++a<s;)if(l=u[a]=it(t[a]),"string"==typeof l)o+=l;else if(null!==l)break;r?Array.isArray(n)?(n===t&&(n=n.slice(0,i)),n.push(rt(o))):n=[n,rt(o)]:n=""+o,i=a-1,r=!0}++i}return n}function rt(t){return"object"==typeof t?t:Jt("plaintext",null,null,t)}function ot(t,e,n,i,r,o){this.type=Ke,this.tag=t,this.key=null==e?null:e,this.attrs=n||Ue,this.children=st(i),this.ref=null==r?null:r,this._domNode=null,this._ns=t in Oe?Oe[t]:null,this._escapeChildren=o!==!1,this._ctx=Ue}function st(t){var e=it(t),n=null===e||"object"!=typeof e||Array.isArray(e)?e:[e];return n}function ut(){}function lt(t,e){return t.priority-e.priority}function at(){for(var t=0;t<Xe.length;){Xe.sort(lt);for(var e=Xe.length;t<e;){var n=Xe[t++],i=n.fn,r=n.ctx;i.call(r)}Xe.length>e&&(Xe=Xe.slice(e),t=0)}Xe=[]}function ht(t){1===Xe.push(t)&&Qe(at)}function ct(t){var e=it(t);return null===e?Jt("!"):"object"==typeof e?Array.isArray(e)?Jt("fragment",null,null,e):e:Jt("plaintext",null,null,e)}function dt(){this._listeners=Object.create(null)}function ft(t,e,n,i,r){var o=T(t),s=nn[o],u=void 0;if(s&&null!==s.tree){u=++s.id;var l=function(){if(s=nn[o],s&&s.id===u){var t=s.tree,r=ct(e);n&&r.setCtx(n),t.patch(r),s.tree=r,vt(i)}};r?l():ht({priority:0,fn:l})}else{if(s=nn[o]={tree:null,id:u=++rn},t.childNodes.length>0){var a=mt(t);if(null!==a){var h=s.tree=ct(e);return n&&h.setCtx(n),h.adoptDom(a,0),h.mount(),void vt(i)}t.textContent=""}var c=function(){var r=nn[o];if(r&&r.id===u){var s=r.tree=ct(e);n&&s.setCtx(n),_e.append(t,s.renderToDom(U(t))),s.mount(),vt(i)}};r?c():ht({priority:0,fn:c})}}function pt(t,e,n){var i=T(t),r=nn[i];if(r){var o=++r.id,s=function(){if(r=nn[i],r&&r.id===o){delete nn[i];var t=r.tree;if(null!==t){var n=t.getDomNode();t.unmount(),_e.remove(n)}vt(e)}};r.tree?n?s():ht({priority:0,fn:s}):n||vt(e)}else n||vt(e)}function vt(t){t&&t()}function mt(t){for(var e=t.childNodes,n=e.length,i=0,r=null,o=void 0;i<n;)o=e[i++],r?r.push(o):o.nodeType===Node.COMMENT_NODE&&"vidom"===o.textContent&&(r=[]);return r}function gt(t,e,n,i){"function"==typeof n&&(i=n,n=this),ft(t,e,n,i,!1)}function _t(t,e,n){ft(t,e,n,null,!0)}function yt(t,e){pt(t,e,!1)}function Ct(t){pt(t,null,!0)}function bt(){var t=[];for(var e in nn){var n=nn[e].tree;n&&t.push(n)}return t}function xt(){this.onInit()}function At(){this.__isMounted=!0,this.__prevState=this.state,this.getRootElement().mount(),this.onMount()}function Dt(){this.__isMounted=!1,this.getRootElement().unmount(),this.onUnmount()}function Nt(t,e,n,i){i&&(this.__prevAttrs=this.attrs,this.__prevChildren=this.children,this.__prevContext=this.context,this.attrs=this.__buildAttrs(t),this.children=e,this.context=n),this.__isUpdating=!0,this.onChange(this.__prevAttrs,this.__prevChildren,this.__prevState,this.__prevContext),this.__isUpdating=!1;var r=this.shouldRerender(this.__prevAttrs,this.__prevChildren,this.__prevState,this.__prevContext);if(r){var o=this.getRootElement();this.__rootElement=this.render(),o.patch(this.__rootElement)}this.onUpdate(this.__prevAttrs,this.__prevChildren,this.__prevState,this.__prevContext),this.__prevAttrs=this.attrs,this.__prevChildren=this.children,this.__prevState=this.state,this.__prevContext=this.context}function wt(){return!0}function Et(){return null}function St(t){return this.getRootElement().renderToDom(t)}function Tt(){return this.getRootElement().renderToString()}function kt(t,e){return this.getRootElement().adoptDom(t,e)}function Rt(){return this.getRootElement().getDomNode()}function Mt(){return Ue}function Ot(t){this.state=this.state===Ue?t:tt(this.state,t,!0),this.update()}function jt(){var t=ct(this.onRender()),e=this.onChildContextRequest(),n=e===Ue?this.context:this.context===Ue?e:tt(this.context,e);return t.setCtx(n),t}function Pt(){!this.__isUpdating&&this.isMounted()&&(this.__isUpdating=!0,ht({priority:this.__id,fn:Ft,ctx:this}))}function Ft(){if(this.__isUpdating&&this.isMounted()){this.patch(this.attrs,this.children,this.context,!1)}}function It(){return null===this.__rootElement?this.__rootElement=this.render():this.__rootElement}function Lt(){return this.__isMounted}function Ut(){return this}function qt(t){if(t===this.attrs)return t;var e=this.constructor.defaultAttrs,n=null!=e,i=t===Ue?n?e:t:n?tt(e,t):t;return i}function Bt(t,e){var n=function(t,e,n){this.attrs=this.__buildAttrs(t),this.children=e,this.state=Ue,this.context=n,this.__id=sn++,this.__isMounted=!1,this.__isUpdating=!1,this.__rootElement=null,this.__prevAttrs=this.attrs,this.__prevChildren=this.children,this.__prevState=Ue,this.__prevContext=this.context},i={constructor:n,init:xt,onInit:ut,mount:At,unmount:Dt,onMount:ut,onUnmount:ut,onChange:ut,shouldRerender:wt,onRender:Et,onUpdate:ut,isMounted:Lt,setState:Ot,renderToDom:St,renderToString:Tt,adoptDom:kt,getDomNode:Rt,getRootElement:It,render:jt,update:Pt,patch:Nt,onChildContextRequest:Mt,onRefRequest:Ut,__buildAttrs:qt};for(var r in t)i[r]=t[r];n.prototype=i;for(var o in e)n[o]=e[o];return n.__vidom__component__=!0,n}function Ht(t,e){t in ln?ln[t].push(e):ln[t]=[e]}function Vt(t,e){for(var n=ln[t],i=n.length,r=0;r<i;){if(n[r]===e)return void(1===i?delete ln[t]:n.splice(r,1));r++}}function Kt(t,e,n,i,r){if(this.type=$e,this.key=null==e?null:e,this.attrs=n||Ue,this.children=i,this.ref=null==r?null:r,t===un)switch(this.attrs.type){case"radio":this.component=an;break;case"checkbox":this.component=hn;break;case"file":this.component=cn;break;default:this.component=t}else this.component=t;this._instance=null,this._ctx=Ue}function Wt(t,e,n,i){this.type=ze,this.component=t,this.key=null==e?null:e,this.attrs=n||Ue,this.children=i,this._rootElement=null,this._ctx=Ue}function Zt(t,e){this.type=Ze,this.key=null==t?null:t,this.children=$t(e),this._domNode=null,this._ctx=Ue}function $t(t){var e=it(t),n=null===e||Array.isArray(e)?e:["string"==typeof e?ct(e):e];return n}function zt(t,e){this.type=We,this.key=null==t?null:t,this.children=Gt(e),this._domNode=null}function Gt(t){if(null==t)return null;switch(typeof t){case"string":return t;case"boolean":return null;default:return""+t}}function Jt(t,e,n,i,r,o){switch(typeof t){case"string":switch(t){case"fragment":return new Zt(e,i);case"plaintext":return new zt(e,i);case"input":return new Kt(un,e,n,i,r);case"textarea":return new Kt(dn,e,n,i,r);case"select":return new Kt(fn,e,n,i,r);default:return new ot(t,e,n,i,r,o)}case"function":return t.__vidom__component__?new Kt(t,e,n,i,r):new Wt(t,e,n,i)}}function Qt(t,e){var n=!1,i=null,r=null,o=null,s=arguments.length>2?arguments.length>3?pn.call(arguments,2):arguments[2]:null,u=void 0;if(e)for(var l in e)switch(l){case"key":r=e[l],n=!0;break;case"ref":o=e[l],n=!0;break;case"html":s=e[l],u=!1,n=!0;break;default:null===i&&(i=Object.create(null)),i[l]=e[l]}return Jt(t,r,n?i:e,s,o,u)}function Xt(t){return"<!--vidom-->"+ct(t).renderToString()}function Yt(t){var e=it(t);return null===e?[]:"string"==typeof e?[Jt("plaintext",null,null,e)]:Array.isArray(e)?e:[e]}var te=/&/g,ee=/"/g,ne=/([^A-Z]+)([A-Z])/g,ie=!1,re=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oe=Object.create(null),se=Object.create(null),ue=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",le=ue+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ae=new RegExp("^["+ue+"]["+le+"]*$"),he=Object.create(null),ce={set:r,remove:a,toString:f},de=re({},ce,{set:o,toString:p}),fe=re({},de,{toString:v}),pe={set:s,remove:h,toString:f},ve=re({},pe,{toString:p}),me=Object.create(null);he.acceptCharset="accept-charset",he.className="class",he.htmlFor="for",he.httpEquiv="http-equiv",me.autoPlay=de,me.checked=ve,me.controls=pe,me.disabled=de,me.download=fe,me.id=pe,me.ismap=de,me.loop=pe,me.multiple=ve,me.muted=pe,me.open=de,me.readOnly=ve,me.selected=ve,me.srcDoc=pe,me.style={set:u,remove:h,toString:m},me.value={set:l,remove:h,toString:f};var ge=function(t){return t in me?me[t]:ce},_e={append:y,remove:C,insertBefore:b,move:x,replace:A,removeChildren:D,updateText:N,removeText:w};E.prototype={stopPropagation:function(){this._isPropagationStopped=!0;var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},isPropagationStopped:function(){return this._isPropagationStopped},preventDefault:function(){this._isDefaultPrevented=!0;var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=!1},isDefaultPrevented:function(){return this._isDefaultPrevented},persist:function(){this._isPersisted=!0}};var ye=Object.create(null),Ce="undefined"==typeof Symbol?"__vidom__id__":Symbol(),be=1,xe="undefined"==typeof navigator?"":navigator.userAgent,Ae="undefined"==typeof navigator?"":navigator.platform,De=xe.indexOf("Trident")>-1,Ne=xe.indexOf("Edge")>-1,we=/iPad|iPhone|iPod/.test(Ae),Ee=["click","mousedown","mousemove","mouseout","mouseover","mouseup"],Se=["animationend","animationiteration","animationstart","blur","change","contextmenu","copy","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","input","keydown","keypress","keyup","paste","submit","touchcancel","touchend","touchmove","touchstart","transitionend","wheel"],Te=["canplay","canplaythrough","complete","durationchange","emptied","ended","error","load","loadeddata","loadedmetadata","loadstart","mouseenter","mouseleave","pause","play","playing","progress","ratechange","scroll","seeked","seeking","select","stalled","suspend","timeupdate","volumechange","waiting"];we?Te=[].concat(Te,Ee):Se=[].concat(Se,Ee);var ke=Object.create(null),Re=Object.create(null),Me=!0;"undefined"!=typeof document&&!function(){var t={focus:"focusin",blur:"focusout"},e=0,n=!0,i=void 0,r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/);for(null!==r&&Number(r[1])<52&&(n=!1);e<Se.length;)i=Se[e++],Re[i]={type:i,bubbles:!0,listenersCount:0,set:!1,setup:i in t?n?function(){var e=this.type;document.addEventListener(t[e],function(t){k(t,e)})}:function(){document.addEventListener(this.type,k,!0)}:null};for(e=0;e<Te.length;)Re[Te[e++]]={type:i,bubbles:!1,set:!1,setup:null}}();var Oe=Object.create(null);Oe.html="http://www.w3.org/1999/xhtml",Oe.svg="http://www.w3.org/2000/svg",Oe.math="http://www.w3.org/1998/Math/MathML";var je=["onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onChange","onClick","onComplete","onContextMenu","onCopy","onCut","onDblClick","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEnded","onError","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onScroll","onSeeked","onSeeking","onSelect","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"].reduce(function(t,e){return t[e]=e.substr(2).toLowerCase(),t},Object.create(null)),Pe={appendChild:B,insertChild:H,removeChild:V,moveChild:K,removeChildren:W,replace:Z,updateAttr:$,removeAttr:z,updateText:G,removeText:J},Fe=/&/g,Ie=/</g,Le=/>/g,Ue=Object.create(null),qe=Object.create(null),Be={"http://www.w3.org/2000/svg":"svg","http://www.w3.org/1998/Math/MathML":"math"},He={thead:"table",tbody:"table",tfoot:"table",tr:"tbody",td:"tr"},Ve=Object.create(null),Ke=1,We=2,Ze=3,$e=4,ze=5,Ge=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"].reduce(function(t,e){return t[e]=!0,t},Object.create(null)),Je=De||Ne;ot.prototype={getDomNode:function(){return this._domNode},setCtx:function(t){if(t!==Ue){this._ctx=t;var e=this.children;if(null!==e&&"string"!=typeof e)for(var n=e.length,i=0;i<n;)e[i++].setCtx(t)}return this},renderToDom:function(t){var e=this.tag,n=this.children,i=this._ns||t;if(Je&&n&&"string"!=typeof n){var r=nt(this.renderToString(),e,i);return this.adoptDom([r],0),r}var o=this._domNode=et(e,i),s=this.attrs;if(null!==n)if("string"==typeof n)this._escapeChildren?o.textContent=n:o.innerHTML=n;else for(var u=0,l=n.length;u<l;)o.appendChild(n[u++].renderToDom(i));if(s!==Ue){var a=void 0,h=void 0;for(a in s)null!=(h=s[a])&&(a in je?O(o,je[a],h):ge(a).set(o,a,h))}return o},renderToString:function(){var t=this.tag;if("!"===t)return"<!---->";var e=this._ns,i=this.attrs,r=this.children,o="<"+t;if(null!==e&&(o+=' xmlns="'+e+'"'),i!==Ue){var s=void 0,u=void 0,l=void 0;for(s in i)if(u=i[s],null!=u){if("value"===s)switch(t){case"textarea":r=u;continue;case"select":this.setCtx({value:u,multiple:i.multiple});continue;case"option":var a=this._ctx;(a.multiple?n(a.value,u):a.value===u)&&(o+=" "+ge("selected").toString("selected",!0))}s in je||""===(l=ge(s).toString(s,u))||(o+=" "+l)}}if(t in Ge)o+="/>";else{if(o+=">",null!==r)if("string"==typeof r)o+=this._escapeChildren?Y(r):r;else for(var h=0,c=r.length;h<c;)o+=r[h++].renderToString();o+="</"+t+">"}return o},adoptDom:function(t,e){var n=this._domNode=t[e],i=this.attrs,r=this.children;if(i!==Ue){var o=void 0,s=void 0;for(o in i)null!=(s=i[o])&&o in je&&O(n,je[o],s)}if(null!==r&&"string"!=typeof r){var u=0,l=r.length;if(l>0)for(var a=n.childNodes,h=0;u<l;)h=r[u++].adoptDom(a,h)}return e+1},mount:function(){var t=this.children;if(null!==t&&"string"!=typeof t)for(var e=0,n=t.length;e<n;)t[e++].mount();null!==this.ref&&this.ref(this._domNode)},unmount:function(){var t=this.children;if(t&&"string"!=typeof t)for(var e=0,n=t.length;e<n;)t[e++].unmount();F(this._domNode),this._domNode=null,null!==this.ref&&this.ref(null)},clone:function(t,e,n){var i=new ot(this.tag,this.key);return i.attrs=null==t?this.attrs:tt(this.attrs,t),i.children=null==e?this.children:st(e),i.ref=null==n?this.ref:n,i._escapeChildren=this._escapeChildren,i._ctx=this._ctx,i},patch:function(t){this===t?this._patchChildren(t):this.type===t.type&&this.tag===t.tag&&this._ns===t._ns?(t._domNode=this._domNode,this._patchAttrs(t),this._patchChildren(t),this._patchRef(t)):Pe.replace(this,t)},_patchChildren:function(t){var e=this.children,n=t.children;if(null!==e||null!==n){var i="string"==typeof e,r="string"==typeof n;if(r)return i?void(e!==n&&Pe.updateText(this,n,t._escapeChildren)):(null!==e&&e.length>0&&Pe.removeChildren(this),void(""!==n&&Pe.updateText(this,n,t._escapeChildren)));if(null===n||0===n.length)return void(e&&(i?Pe.removeText(this):e.length>0&&Pe.removeChildren(this)));if(i&&""!==e&&Pe.removeText(this),i||null===e||0===e.length)for(var o=n.length,s=0;s<o;)Pe.appendChild(t,n[s++]);else Q(this,t)}},_patchAttrs:function(t){var e=this.attrs,n=t.attrs;if(e!==n){var i=void 0;if(n!==Ue){var r=void 0,o=void 0,s=void 0,u=void 0;for(i in n)o=n[i],e===Ue||null==(r=e[i])?null!=o&&Pe.updateAttr(this,i,o):null==o?Pe.removeAttr(this,i):"object"==typeof o&&"object"==typeof r?(u=Array.isArray(o),s=Array.isArray(r),u||s?u&&s?this._patchAttrArr(i,r,o):Pe.updateAttr(this,i,o):this._patchAttrObj(i,r,o)):r!==o&&Pe.updateAttr(this,i,o)}if(e!==Ue)for(i in e)n!==Ue&&i in n||null==e[i]||Pe.removeAttr(this,i)}},_patchAttrArr:function(t,e,n){if(e!==n){var i=e.length,r=!1;if(i===n.length)for(var o=0;!r&&o<i;)e[o]!=n[o]&&(r=!0),++o;else r=!0;r&&Pe.updateAttr(this,t,n)}},_patchAttrObj:function(t,e,n){if(e!==n){var i=Object.create(null),r=!1;for(var o in n)e[o]!=n[o]&&(r=!0,i[o]=n[o]);for(var s in e)null==e[s]||s in n||(r=!0,i[s]=null);r&&Pe.updateAttr(this,t,i)}},_patchRef:function(t){null!==this.ref?this.ref!==t.ref&&(this.ref(null),null!==t.ref&&t.ref(t._domNode)):null!==t.ref&&t.ref(t._domNode)}};var Qe="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)||function(t){setTimeout(t,1e3/60)},Xe=[],Ye="undefined"==typeof console?null:console,tn={},en={log:"",info:"",warn:"Warning!",error:"Error!"};["log","info","warn","error"].forEach(function(t){tn[t]=Ye?Ye[t]?function(e,n,i,r,o){var s=en[t];switch(arguments.length){case 1:Ye[t](s,e);break;case 2:Ye[t](s,e,n);break;case 3:Ye[t](s,e,n,i);break;case 4:Ye[t](s,e,n,i,r);break;case 5:Ye[t](s,e,n,i,r,o)}}:function(){Ye.log.apply(Ye,arguments)}:ut}),dt.prototype={on:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,fnCtx:n}),this},off:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this._listeners[t];if(i)for(var r=0,o=void 0;r<i.length;){if(o=i[r],o.fn===e&&o.fnCtx===n){i.splice(r,1);break}r++}return this},emit:function(t){var e=this._listeners[t];if(e){for(var n=0,i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(;n<e.length;){var s=e[n++],u=s.fn,l=s.fnCtx;u.call.apply(u,[l].concat(r))}}return this}};var nn=Object.create(null),rn=0,on=new dt;on.getRootNodes=bt;var sn=1,un=Bt({onInit:function(){var t=this;this._addAttrs={onChange:null,onInput:function(e){t.onInput(e)}}},onRender:function(){return new ot("input",null,tt(this.attrs,this._addAttrs))},onInput:function(t){var e=this.attrs,n=e.onChange,i=e.value,r=void 0===i?"":i,o=this.getDomNode();if(r!==o.value&&(n&&n(t),at(),this.isMounted())){var s=this.attrs.value;"undefined"!=typeof s&&o.value!==s&&(o.value=s)}},onRefRequest:function(){return this.getDomNode()}}),ln=Object.create(null),an=Bt({onInit:function(){var t=this;this._addAttrs={onChange:function(e){t.onInputChange(e)}}},onRender:function(){return new ot("input",null,tt(this.attrs,this._addAttrs))},onMount:function(){var t=this.attrs.name;t&&Ht(t,this)},onUpdate:function(t){var e=t.name,n=this.attrs.name;n!==e&&(e&&Vt(e,this),n&&Ht(n,this))},onUnmount:function(){var t=this.attrs.name;t&&Vt(t,this)},onInputChange:function(t){var e=this.attrs.onChange;if(e&&e(t),at(),this.isMounted()){var n=this.getDomNode(),i=this.attrs,r=i.name,o=i.checked;if("undefined"!=typeof o&&n.checked!==o)if(r){for(var s=ln[r],u=s.length,l=0,a=void 0,h=void 0;l<u;)if(a=s[l++],h=a.attrs.checked,"undefined"!=typeof h){var c=a.getDomNode();h!==c.checked&&(c.checked=h)}}else n.checked=o}},onRefRequest:function(){return this.getDomNode()}}),hn=Bt({onInit:function(){var t=this;this._addAttrs={onChange:function(e){t.onInputChange(e)}}},onRender:function(){return new ot("input",null,tt(this.attrs,this._addAttrs))},onInputChange:function(t){var e=this.attrs.onChange;if(e&&e(t),at(),this.isMounted()){var n=this.getDomNode(),i=this.attrs.checked;"undefined"!=typeof i&&n.checked!==i&&(n.checked=i)}},onRefRequest:function(){return this.getDomNode()}}),cn=Bt({onRender:function(){return new ot("input",null,this.attrs)},onRefRequest:function(){return this.getDomNode()}});Kt.prototype={getDomNode:function(){return null===this._instance?null:this._instance.getDomNode()},setCtx:function(t){return this._ctx=t,this},renderToDom:function(t){return this._getInstance().renderToDom(t)},renderToString:function(){return this._getInstance().renderToString()},adoptDom:function(t,e){return this._getInstance().adoptDom(t,e)},mount:function(){this._instance.mount(),null!==this.ref&&this.ref(this._instance.onRefRequest())},unmount:function(){null!==this._instance&&(this._instance.unmount(),this._instance=null),null!==this.ref&&this.ref(null)},clone:function(t,e,n){var i=new Kt(this.component,this.key);return i.attrs=null==t?this.attrs:tt(this.attrs,t),i.children=null==e?this.children:e,i.ref=null==n?this.ref:n,i._ctx=this._ctx,i},patch:function(t){var e=this._getInstance();this===t?e.patch(t.attrs,t.children,t._ctx,!0):this.type===t.type&&this.component===t.component?(e.patch(t.attrs,t.children,t._ctx,!0),t._instance=e,this._patchRef(t)):(Pe.replace(this,t),this._instance=null)},_patchRef:function(t){null!==this.ref?this.ref!==t.ref&&(this.ref(null),null!==t.ref&&t.ref(t._instance.onRefRequest())):null!==t.ref&&t.ref(t._instance.onRefRequest())},_getInstance:function(){return null===this._instance&&(this._instance=new this.component(this.attrs,this.children,this._ctx),this._instance.init()),this._instance}},Wt.prototype={getDomNode:function(){return null===this._rootElement?null:this._rootElement.getDomNode()},setCtx:function(t){return this._ctx=t,this},renderToDom:function(t){return this._getRootElement().renderToDom(t)},renderToString:function(){return this._getRootElement().renderToString()},adoptDom:function(t,e){return this._getRootElement().adoptDom(t,e)},mount:function(){this._getRootElement().mount()},unmount:function(){null!==this._rootElement&&(this._rootElement.unmount(),this._rootElement=null)},clone:function(t,e){var n=new Wt(this.component,this.key);return n.attrs=null==t?this.attrs:tt(this.attrs,t),n.children=null==e?this.children:e,n._ctx=this._ctx,n},patch:function(t){if(this===t){var e=this._getRootElement();this._rootElement=null,e.patch(this._getRootElement())}else this.type===t.type&&this.component===t.component?(this._getRootElement().patch(t._getRootElement()),this._rootElement=null):(Pe.replace(this,t),this._rootElement=null)},_getRootElement:function(){if(null!==this._rootElement)return this._rootElement;var t=this.attrs,e=this.component,n=e.defaultAttrs,i=null!=n,r=t===Ue?i?n:t:i?tt(n,t):t;return this._rootElement=ct(e(r,this.children,this._ctx)),this._rootElement.setCtx(this._ctx),this._rootElement}},Zt.prototype={getDomNode:function(){return this._domNode},setCtx:function(t){if(t!==Ue){this._ctx=t;var e=this.children;if(null!==e)for(var n=e.length,i=0;i<n;)e[i++].setCtx(t)}return this},renderToDom:function(t){var e=this.children,n=[et("!",null),et("!",null)],i=document.createDocumentFragment();if(i.appendChild(n[0]),null!==e)for(var r=e.length,o=0;o<r;)i.appendChild(e[o++].renderToDom(t));return i.appendChild(n[1]),this._domNode=n,i},renderToString:function(){var t=this.children,e="<!---->";if(null!==t)for(var n=t.length-1;n>=0;)e=t[n--].renderToString()+e;return"<!---->"+e},adoptDom:function(t,e){var n=[t[e++]],i=this.children;if(null!==i)for(var r=i.length,o=0;o<r;)e=i[o++].adoptDom(t,e);return n.push(t[e]),this._domNode=n,e+1},mount:function(){var t=this.children;if(null!==t)for(var e=0,n=t.length;e<n;)t[e++].mount()},unmount:function(){var t=this.children;if(null!==t)for(var e=t.length,n=0;n<e;)t[n++].unmount()},clone:function(t){var e=new Zt(this.key);return e.children=null==t?this.children:$t(t),e._ctx=this._ctx,e},patch:function(t){this===t?this._patchChildren(t):this.type===t.type?(t._domNode=this._domNode,this._patchChildren(t)):Pe.replace(this,t)},_patchChildren:function(t){var e=this.children,n=t.children;if(null!==e||null!==n){if(null===n||0===n.length)return void(null!==e&&e.length>0&&Pe.removeChildren(this));if(null!==e&&0!==e.length)Q(this,t);else for(var i=n.length,r=0;r<i;)Pe.appendChild(t,n[r++])}}},zt.prototype={getDomNode:function(){return this._domNode},setCtx:function(){return this},renderToDom:function(){var t=document.createDocumentFragment(),e=[et("!",null),et("!",null)],n=this.children;return t.appendChild(e[0]),null!==n&&t.appendChild(document.createTextNode(n)),t.appendChild(e[1]),this._domNode=e,t},renderToString:function(){return"<!---->"+(this.children?Y(this.children):"")+"<!---->"},adoptDom:function(t,e){var n=[t[e++]];return this.children&&e++,n.push(t[e++]),this._domNode=n,e},mount:ut,unmount:ut,clone:function(t){var e=new zt(this.key);return e.children=null==t?this.children:Gt(t),e},patch:function(t){this!==t&&(this.type===t.type?(t._domNode=this._domNode,this._patchChildren(t)):Pe.replace(this,t))},_patchChildren:function(t){var e=this.children,n=t.children;e!==n&&(n?Pe.updateText(this,n,!1):e&&Pe.removeText(this))}};var dn=Bt({onInit:function(){var t=this;this._addAttrs={onChange:null,onInput:function(e){t.onInput(e)}}},onRender:function(){return new ot("textarea",null,tt(this.attrs,this._addAttrs))},onInput:function(t){var e=this.attrs,n=e.onChange,i=e.value,r=void 0===i?"":i,o=this.getDomNode();if(r!==o.value&&(n&&n(t),at(),this.isMounted())){var s=this.attrs.value;"undefined"!=typeof s&&o.value!==s&&(o.value=s)}},onRefRequest:function(){return this.getDomNode()}}),fn=Bt({onInit:function(){var t=this;this._addAttrs={onChange:function(e){t.onInputChange(e)}}},onRender:function(){return new ot("select",null,tt(this.attrs,this._addAttrs),this.children);
},onInputChange:function(t){var e=t.target,i=this.attrs,r=i.onChange,o=i.multiple;if(r)if(o){for(var s=[],u=e.options,l=u.length,a=0,h=void 0;a<l;)h=u[a++],h.selected&&s.push(h.value);r(t,s)}else r(t);if(at(),this.isMounted()){var c=this.attrs,d=c.value,f=c.multiple;if("undefined"!=typeof d)if(f)for(var p=e.options,v=p.length,m=0,g=void 0;m<v;)g=p[m++],g.selected=n(d,g.value);else e.value!=d&&(e.value=d)}},onRefRequest:function(){return this.getDomNode()}}),pn=Array.prototype.slice,vn=Bt();t.h=Qt,t.elem=Jt,t.createComponent=Bt,t.renderToString=Xt,t.toElem=ct,t.toElems=Yt,t.IS_DEBUG=ie,t.console=tn,t.Component=vn,t.mount=gt,t.mountSync=_t,t.unmount=yt,t.unmountSync=Ct,t.getMountedRootNodes=bt,Object.defineProperty(t,"__esModule",{value:!0})});
