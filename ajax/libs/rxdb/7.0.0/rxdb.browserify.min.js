!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r||e)},f,f.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";e("babel-polyfill");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./index.js"));n.default.plugin(e("pouchdb-adapter-idb")),n.default.plugin(e("pouchdb-adapter-http")),window.RxDB=n.default},{"./index.js":8,"babel-polyfill":40,"pouchdb-adapter-http":570,"pouchdb-adapter-idb":571}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new a(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("babel-runtime/helpers/classCallCheck")),s=n(e("babel-runtime/helpers/createClass"));r.create=i;var a=function(){function e(t){var r=this;(0,o.default)(this,e),this.collection=t,this.subs=[],this.limit=100,this.buffer=[],this.counter=0,this.eventCounterMap=new WeakMap,this.subs.push(this.collection.$.subscribe(function(e){return r._handleChangeEvent(e)}))}return(0,s.default)(e,[{key:"_handleChangeEvent",value:function(e){for(this.counter++,this.buffer.push(e),this.eventCounterMap.set(e,this.counter);this.buffer.length>this.limit;)this.buffer.shift()}},{key:"getArrayIndexByPointer",value:function(e){var t=this.buffer[0],r=this.eventCounterMap.get(t);if(e<r)return null;return e-r}},{key:"getFrom",value:function(e){var t=[],r=this.getArrayIndexByPointer(e);if(null===r)return null;for(;;){var n=this.buffer[r];if(r++,!n)return t;t.push(n)}}},{key:"runFrom",value:function(e,t){this.getFrom(e).forEach(function(e){return t(e)})}},{key:"reduceByLastOfDoc",value:function(e){var t={};return e.forEach(function(e){t[e.data.doc]=e}),Object.values(t)}},{key:"destroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}}]),e}();r.default={create:i}},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.isRxSchema=r.isRxQuery=r.isRxDocument=r.isRxCollection=r.isRxDatabase=r.plugin=r.checkAdapter=r.removeDatabase=r.create=void 0;var i=n(e("./rx-database")),o=n(e("./rx-schema")),s=n(e("./rx-document")),a=n(e("./rx-query")),u=n(e("./rx-collection")),c=n(e("./query-change-detector")),f=n(e("./plugin")),l=n(e("./pouch-db")),d=r.create=i.default.create,h=r.removeDatabase=i.default.removeDatabase,p=r.checkAdapter=i.default.checkAdapter,b=r.plugin=f.default.addPlugin,y=r.isRxDatabase=i.default.isInstanceOf,v=r.isRxCollection=u.default.isInstanceOf,_=r.isRxDocument=s.default.isInstanceOf,m=r.isRxQuery=a.default.isInstanceOf,g=r.isRxSchema=o.default.isInstanceOf;r.default={create:d,removeDatabase:h,checkAdapter:p,plugin:b,isRxDatabase:y,isRxCollection:v,isRxDocument:_,isRxQuery:m,isRxSchema:g,RxSchema:o.default,PouchDB:l.default,QueryChangeDetector:c.default,RxDatabase:i.default}},{"./plugin":12,"./pouch-db":25,"./query-change-detector":27,"./rx-collection":30,"./rx-database":31,"./rx-document":32,"./rx-query":34,"./rx-schema":35}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return new f(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.Crypter=void 0;var o=n(e("babel-runtime/helpers/classCallCheck")),s=n(e("babel-runtime/helpers/createClass"));r.create=i;var a=n(e("object-path")),u=n(e("clone")),c=n(e("./rx-error")),f=r.Crypter=function(){function e(t,r){(0,o.default)(this,e),this._password=t,this._schema=r}return(0,s.default)(e,[{key:"_encryptValue",value:function(){throw c.default.pluginMissing("encryption")}},{key:"_decryptValue",value:function(){throw c.default.pluginMissing("encryption")}},{key:"encrypt",value:function(e){var t=this;return e=(0,u.default)(e),this._password?(Object.keys(this._schema.encryptedPaths).map(function(r){var n=a.default.get(e,r),i=t._encryptValue(n);a.default.set(e,r,i)}),e):e}},{key:"decrypt",value:function(e){var t=this;return e=(0,u.default)(e),this._password?(Object.keys(this._schema.encryptedPaths).map(function(r){var n=a.default.get(e,r),i=t._decryptValue(n);a.default.set(e,r,i)}),e):e}}]),e}();r.default={create:i,Crypter:f}},{"./rx-error":33,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,clone:63,"object-path":567}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return new v(e,t)}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("babel-runtime/regenerator")),s=n(e("babel-runtime/helpers/asyncToGenerator")),a=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass"));r.create=i;var c=n(e("./pouch-db")),f=n(e("clone")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),d=n(e("./rx-schema")),h=n(e("./crypter")),p=n(e("./rx-error")),b=n(e("./overwritable")),y=n(e("./hooks")),v=function(){function e(t,r){(0,a.default)(this,e),this.newestCollection=t,this.migrationStrategies=r,this.currentSchema=t.schema,this.database=t.database,this.name=t.name}return(0,u.default)(e,[{key:"_getOldCollections",value:function(){var e=this;return Promise.all(this.currentSchema.previousVersions.map(function(t){return e.database._collectionsPouch.get(e.name+"-"+t)}).map(function(e){return e.catch(function(){return null})})).then(function(t){return t.filter(function(e){return null!==e}).map(function(t){return new _(t.schema.version,t.schema,e)})})}},{key:"migrate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(this._migrated)throw new Error("Migration has already run");this._migrated=!0;var r={done:!1,total:null,handled:0,success:0,deleted:0,percent:0};return new l.Rx.Observable(function(){var n=(0,s.default)(o.default.mark(function n(i){var s,a,u,c,l;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e._getOldCollections();case 2:return s=n.sent,n.next=5,Promise.all(s.map(function(e){return e.countAllUndeleted()}));case 5:a=n.sent,u=a.reduce(function(e,t){return t=e+t},0),r.total=u,i.next((0,f.default)(r)),c=null,l=o.default.mark(function n(){var s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.migrate(t),e.next=3,new Promise(function(e){var t=s.subscribe(function(e){r.handled++,r[e.type]=r[e.type]+1,r.percent=Math.round(r.handled/r.total*100),i.next((0,f.default)(r))},function(e){t.unsubscribe(),i.error(e)},function(){t.unsubscribe(),e()})});case 3:case"end":return e.stop()}},n,e)});case 11:if(!(c=s.shift())){n.next=15;break}return n.delegateYield(l(),"t0",13);case 13:n.next=11;break;case 15:r.done=!0,r.percent=100,i.next((0,f.default)(r)),i.complete();case 19:case"end":return n.stop()}},n,e)}));return function(e){return n.apply(this,arguments)}}())}},{key:"migratePromise",value:function(e){var t=this;return this._migratePromise||(this._migratePromise=new Promise(function(r,n){t.migrate(e).subscribe(null,n,r)})),this._migratePromise}}]),e}(),_=function(){function e(t,r,n){(0,a.default)(this,e),this.version=t,this.dataMigrator=n,this.schemaObj=r,this.newestCollection=n.newestCollection,this.database=n.newestCollection.database}return(0,u.default)(e,[{key:"countAllUndeleted",value:function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.default.countAllUndeleted(this.pouchdb));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBatch",value:function(e){var t=this;return c.default.getBatch(this.pouchdb,e).then(function(e){return e.map(function(e){return t._handleFromPouch(e)})})}},{key:"_handleFromPouch",value:function(e){var t=(0,f.default)(e);return t=this.schema.swapIdToPrimary(e),this.schema.doKeyCompression()&&(t=this.keyCompressor.decompress(t)),t=this.crypter.decrypt(t)}},{key:"_handleToPouch",value:function(e){var t=(0,f.default)(e);return t=this.crypter.encrypt(t),t=this.schema.swapPrimaryToId(t),this.schema.doKeyCompression()&&(t=this.keyCompressor.compress(t)),t}},{key:"migrateDocumentData",value:function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,f.default)(t),r=this.version+1;case 2:if(!(r<=this.newestCollection.schema.version)){e.next=11;break}return e.next=5,this.dataMigrator.migrationStrategies[r+""](t);case 5:if(t=e.sent,r++,null!==t){e.next=9;break}return e.abrupt("return",null);case 9:e.next=2;break;case 11:e.prev=11,this.newestCollection.schema.validate(t),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(11),p.default.newRxError("migration of document from v"+this.version+" to v"+this.newestCollection.schema.version+" failed\n                final document does not match final schema",{finalDoc:t});case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}},e,this,[[11,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_migrateDocument",value:function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.migrateDocumentData(t);case 2:if(r=e.sent,n={doc:t,migrated:r,oldCollection:this,newestCollection:this.newestCollection},!r){e.next=16;break}return y.default.runPluginHooks("preMigrateDocument",n),delete r._rev,e.next=9,this.newestCollection._pouchPut(r,!0);case 9:return i=e.sent,n.res=i,n.type="success",e.next=14,y.default.runAsyncPluginHooks("postMigrateDocument",n);case 14:e.next=17;break;case 16:n.type="deleted";case 17:return e.prev=17,e.next=20,this.pouchdb.remove(this._handleToPouch(t));case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}},e,this,[[17,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=this;return this.pouchdb.destroy().then(function(){return e.database.removeCollectionDoc(e.dataMigrator.name,e.schema)})}},{key:"migrate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(this._migrate)throw new Error("migration already running");this._migrate=!0;return new l.Rx.Observable(function(){var r=(0,s.default)(o.default.mark(function r(n){var i,s;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getBatch(t);case 2:i=r.sent,s=void 0;case 4:return r.next=6,Promise.all(i.map(function(t){return e._migrateDocument(t).then(function(e){return n.next(e)})})).catch(function(e){return s=e});case 6:if(!s){r.next=9;break}return n.error(s),r.abrupt("return");case 9:return r.next=11,e.getBatch(t);case 11:i=r.sent;case 12:if(!s&&i.length>0){r.next=4;break}case 13:return r.next=15,e.delete();case 15:n.complete();case 16:case"end":return r.stop()}},r,e)}));return function(e){return r.apply(this,arguments)}}())}},{key:"migratePromise",value:function(e){var t=this;return this._migratePromise||(this._migratePromise=new Promise(function(r,n){t.migrate(e).subscribe(null,n,r)})),this._migratePromise}},{key:"schema",get:function(){return this._schema||(this._schema=d.default.create(this.schemaObj,!1)),this._schema}},{key:"keyCompressor",get:function(){return this._keyCompressor||(this._keyCompressor=b.default.createKeyCompressor(this.schema)),this._keyCompressor}},{key:"crypter",get:function(){return this._crypter||(this._crypter=h.default.create(this.database.password,this.schema)),this._crypter}},{key:"pouchdb",get:function(){return this._pouchdb||(this._pouchdb=this.database._spawnPouchDB(this.newestCollection.name,this.version,this.newestCollection.pouchSettings)),this._pouchdb}}]),e}();r.default={create:i}},{"./crypter":4,"./hooks":7,"./overwritable":11,"./pouch-db":25,"./rx-error":33,"./rx-schema":35,"./util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57,clone:63}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return new a}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("babel-runtime/helpers/classCallCheck")),s=n(e("babel-runtime/helpers/createClass"));r.create=i;var a=function(){function e(){(0,o.default)(this,e),this._map={}}return(0,s.default)(e,[{key:"get",value:function(e){return this._map[e]}},{key:"set",value:function(e,t){return this._map[e]=t}},{key:"delete",value:function(e){delete this._map[e]}}]),e}();r.default={create:i}},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){u[e].forEach(function(e){return e(t)})}Object.defineProperty(r,"__esModule",{value:!0}),r.runAsyncPluginHooks=r.HOOKS=void 0;var o=n(e("babel-runtime/regenerator")),s=n(e("babel-runtime/helpers/asyncToGenerator")),a=r.runAsyncPluginHooks=function(){var e=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(u[t].map(function(e){return e(r)})));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}();r.runPluginHooks=i;var u=r.HOOKS={createRxDatabase:[],createRxCollection:[],preCreateRxSchema:[],createRxSchema:[],createRxQuery:[],createRxDocument:[],preCreatePouchDb:[],preMigrateDocument:[],postMigrateDocument:[]};r.default={runPluginHooks:i,runAsyncPluginHooks:a,HOOKS:u}},{"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/regenerator":57}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.checkAdapter=r.RxDatabase=r.QueryChangeDetector=r.PouchDB=r.RxSchema=r.isRxSchema=r.isRxQuery=r.isRxDocument=r.isRxCollection=r.isRxDatabase=r.plugin=r.removeDatabase=r.create=void 0;var i=n(e("./core")),o=n(e("./plugins/schema-check")),s=n(e("./plugins/validate")),a=n(e("./plugins/key-compression")),u=n(e("./plugins/leader-election")),c=n(e("./plugins/encryption")),f=n(e("./plugins/update")),l=n(e("./plugins/replication")),d=n(e("./plugins/adapter-check")),h=n(e("./plugins/json-dump")),p=n(e("./plugins/in-memory")),b=n(e("./plugins/attachments")),y=n(e("./plugins/local-documents"));i.default.plugin(o.default),i.default.plugin(s.default),i.default.plugin(a.default),i.default.plugin(u.default),i.default.plugin(c.default),i.default.plugin(f.default),i.default.plugin(l.default),i.default.plugin(d.default),i.default.plugin(h.default),i.default.plugin(p.default),i.default.plugin(b.default),i.default.plugin(y.default);var v=r.create=i.default.create,_=r.removeDatabase=i.default.removeDatabase,m=r.plugin=i.default.plugin,g=r.isRxDatabase=i.default.isRxDatabase,w=r.isRxCollection=i.default.isRxCollection,x=r.isRxDocument=i.default.isRxDocument,k=r.isRxQuery=i.default.isRxQuery,j=r.isRxSchema=i.default.isRxSchema,S=r.RxSchema=i.default.RxSchema,E=r.PouchDB=i.default.PouchDB,O=r.QueryChangeDetector=i.default.QueryChangeDetector,C=r.RxDatabase=i.default.RxDatabase,A=r.checkAdapter=i.default.checkAdapter;r.default={create:v,checkAdapter:A,removeDatabase:_,plugin:m,isRxDatabase:g,isRxCollection:w,isRxDocument:x,isRxQuery:k,isRxSchema:j,RxSchema:S,PouchDB:E,QueryChangeDetector:O,RxDatabase:C}},{"./core":3,"./plugins/adapter-check":13,"./plugins/attachments":14,"./plugins/encryption":15,"./plugins/in-memory":16,"./plugins/json-dump":17,"./plugins/key-compression":18,"./plugins/leader-election":19,"./plugins/local-documents":20,"./plugins/replication":21,"./plugins/schema-check":22,"./plugins/update":23,"./plugins/validate":24}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){if(Array.isArray(e.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");if(r&&r.$meta){(e.sort||(e.sort={}))[t]={$meta:r.$meta}}else{var n=String(r||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(n))throw Array.isArray(r)&&(r="["+r+"]"),new TypeError("Invalid sort value: {"+t+": "+r+" }");var i=e.sort||(e.sort={}),o=r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");i[t]=parseInt(o,10)}}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("babel-runtime/helpers/typeof")),s=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/createClass")),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./mquery_utils")),c=n(e("clone")),f=function(){function e(t){(0,s.default)(this,e);var r=this.constructor.prototype;this.options={},this._conditions=r._conditions?(0,c.default)(r._conditions):{},this._fields=r._fields?(0,c.default)(r._fields):void 0,this._path=r._path||void 0,t&&this.find(t)}return(0,a.default)(e,[{key:"clone",value:function(){var t=new e;return Object.entries(this).forEach(function(e){t[e[0]]=(0,c.default)(e[1])}),t}},{key:"where",value:function(){if(!arguments.length)return this;var e=(0,o.default)(arguments[0]);if("string"===e)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"===e&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")}},{key:"equals",value:function(e){this._ensurePath("equals");var t=this._path;return this._conditions[t]=e,this}},{key:"eq",value:function(e){this._ensurePath("eq");var t=this._path;return this._conditions[t]=e,this}},{key:"or",value:function(e){var t=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this}},{key:"nor",value:function(e){var t=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this}},{key:"and",value:function(e){var t=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this}},{key:"mod",value:function(){var e=void 0,t=void 0;1===arguments.length?(this._ensurePath("mod"),e=arguments[0],t=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(e=arguments.slice(1),t=arguments[0]):(e=arguments[1],t=arguments[0]):(this._ensurePath("mod"),e=arguments.slice(),t=this._path);return(this._conditions[t]||(this._conditions[t]={})).$mod=e,this}},{key:"exists",value:function(){var e=void 0,t=void 0;0===arguments.length?(this._ensurePath("exists"),e=this._path,t=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),e=this._path,t=arguments[0]):(e=arguments[0],t=!0):2===arguments.length&&(e=arguments[0],t=arguments[1]);return(this._conditions[e]||(this._conditions[e]={})).$exists=t,this}},{key:"elemMatch",value:function(){if(null===arguments[0])throw new TypeError("Invalid argument");var t=void 0,r=void 0,n=void 0;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),r=this._path,t=arguments[0];else if(u.isObject(arguments[0]))this._ensurePath("elemMatch"),r=this._path,n=arguments[0];else if("function"==typeof arguments[1])r=arguments[0],t=arguments[1];else{if(!arguments[1]||!u.isObject(arguments[1]))throw new TypeError("Invalid argument");r=arguments[0],n=arguments[1]}t&&(t(n=new e),n=n._conditions);return(this._conditions[r]||(this._conditions[r]={})).$elemMatch=n,this}},{key:"sort",value:function(e){var t=this;if(!e)return this;var r=void 0,n=void 0===e?"undefined":(0,o.default)(e);if(Array.isArray(e)){r=e.length;for(var s=0;s<e.length;++s)!function(e,t,r){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw new TypeError("\n          Can't mix sort syntaxes. Use either array or object:\n            \n- .sort([['field', 1], ['test', -1]])\n            \n- .sort({ field: 1, test: -1 })");e.sort.push([t,r])}(this.options,e[s][0],e[s][1]);return this}if(1===arguments.length&&"string"===n){r=(e=e.split(/\s+/)).length;for(var a=0;a<r;++a){var c=e[a];if(c){var f="-"===c[0]?-1:1;-1===f&&(c=c.substring(1)),i(this.options,c,f)}}return this}if(u.isObject(e)){return Object.keys(e).forEach(function(r){return i(t.options,r,e[r])}),this}throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")}},{key:"merge",value:function(t){if(!t)return this;if(!e.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof e?(t._conditions&&u.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),u.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),u.merge(this.options,t.options)),t._update&&(this._update||(this._update={}),u.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),this):(u.merge(this._conditions,t),this)}},{key:"find",value:function(t){return e.canMerge(t)&&this.merge(t),this}},{key:"_optionsForExec",value:function(){return(0,c.default)(this.options)}},{key:"_ensurePath",value:function(e){if(!this._path)throw new Error("\n              "+e+"() must be used after where()\n              when called with these arguments\n            ")}}]),e}();["gt","gte","lt","lte","ne","in","nin","all","regex","size"].forEach(function(e){f.prototype[e]=function(){var t=void 0,r=void 0;1===arguments.length?(this._ensurePath(e),r=arguments[0],t=this._path):(r=arguments[1],t=arguments[0]);return(null===this._conditions[t]||"object"===(0,o.default)(this._conditions[t])?this._conditions[t]:this._conditions[t]={})["$"+e]=r,this}}),f.canMerge=function(e){return e instanceof f||u.isObject(e)},["limit","skip","maxScan","batchSize","comment"].forEach(function(e){f.prototype[e]=function(t){return this.options[e]=t,this}}),f.utils=u,r.default=f},{"./mquery_utils":10,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/typeof":56,clone:63}],10:[function(e,t,r){"use strict";function n(e,t){for(var r=Object.keys(t),i=r.length,s=void 0;i--;)void 0===e[s=r[i]]?e[s]=t[s]:o(t[s])?n(e[s],t[s]):e[s]=t[s]}function i(e,t){for(var r=Object.keys(t),n=r.length,a=void 0;n--;)void 0===e[a=r[n]]?e[a]=(0,s.default)(t[a],{retainKeyOrder:1}):o(t[a])?i(e[a],t[a]):e[a]=(0,s.default)(t[a],{retainKeyOrder:1})}function o(e){return"[object Object]"===e.toString()}Object.defineProperty(r,"__esModule",{value:!0}),r.merge=n,r.mergeClone=i,r.isObject=o;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("clone"))},{clone:63}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./rx-error")),i={validatePassword:function(){throw n.default.pluginMissing("encryption")},createKeyCompressor:function(){throw n.default.pluginMissing("keycompression")},createLeaderElector:function(){throw n.default.pluginMissing("leaderelection")},checkAdapter:function(){throw n.default.pluginMissing("adapter-check")}};r.default=i},{"./rx-error":33}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.rxdb||("object"===(void 0===e?"undefined":(0,o.default)(e))&&e.default&&(e=e.default),d.default.plugin(e)),e.prototypes&&Object.entries(e.prototypes).forEach(function(e){var t=e[0];(0,e[1])(b[t])}),e.overwritable&&Object.entries(e.overwritable).forEach(function(e){var t=e[0],r=e[1];h.default[t]=r}),e.hooks&&Object.entries(e.hooks).forEach(function(e){var t=e[0],r=e[1];p.HOOKS[t].push(r)})}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("babel-runtime/helpers/typeof"));r.addPlugin=i;var s=n(e("./rx-schema")),a=n(e("./crypter")),u=n(e("./rx-document")),c=n(e("./rx-query")),f=n(e("./rx-collection")),l=n(e("./rx-database")),d=n(e("./pouch-db")),h=n(e("./overwritable")),p=e("./hooks"),b={RxSchema:s.default.RxSchema.prototype,Crypter:a.default.Crypter.prototype,RxDocument:u.default.RxDocument.prototype,RxQuery:c.default.RxQuery.prototype,RxCollection:f.default.RxCollection.prototype,RxDatabase:l.default.RxDatabase.prototype};r.default={addPlugin:i,overwritable:h.default}},{"./crypter":4,"./hooks":7,"./overwritable":11,"./pouch-db":25,"./rx-collection":30,"./rx-database":31,"./rx-document":32,"./rx-query":34,"./rx-schema":35,"babel-runtime/helpers/typeof":56}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=r.checkAdapter=void 0;var i=n(e("babel-runtime/regenerator")),o=n(e("babel-runtime/helpers/asyncToGenerator")),s=r.checkAdapter=function(){var e=(0,o.default)(i.default.mark(function e(t){var r,n,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="rxdb-test-adapter-"+u.generateId(),n=null,o=void 0,e.prev=3,o=new a.default(r,u.adapterObject(t),{auto_compaction:!1,revs_limit:1}),e.next=7,o.info();case 7:return e.next=9,o.put({_id:r,value:!0});case 9:return e.next=11,o.get(r);case 11:n=e.sent,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",!1);case 17:return e.prev=17,e.next=20,o.destroy();case 20:e.next=24;break;case 22:e.prev=22,e.t1=e.catch(17);case 24:if(!n||!n.value){e.next=28;break}return e.abrupt("return",!0);case 28:return e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,this,[[3,14],[17,22]])}));return function(t){return e.apply(this,arguments)}}(),a=n(e("../pouch-db")),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),c=r.rxdb=!0,f=r.prototypes={},l=r.overwritable={checkAdapter:s};r.default={rxdb:c,prototypes:f,overwritable:l}},{"../pouch-db":25,"../util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/regenerator":57}],14:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!e.collection.schema.jsonID.attachments)throw new Error("to use attachments, please define this in your schema")}function o(e){return g.has(e)||g.set(e,new v.default),g.get(e)}function s(e){return!!e.collection.schema.jsonID.attachments.encrypted}function a(e){i(this);var t=this._dataSync$.getValue();if(!t._attachments||!t._attachments[e])return null;var r=t._attachments[e];return k.fromPouchDocument(e,r,this)}function u(){var e=this;i(this);var t=this._dataSync$.getValue();return Object.keys(t._attachments).map(function(r){return k.fromPouchDocument(r,t._attachments[r],e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.hooks=r.overwritable=r.prototypes=r.rxdb=r.postMigrateDocument=r.preMigrateDocument=r.putAttachment=r.RxAttachment=r.blobBufferUtil=void 0;var c=n(e("babel-runtime/helpers/classCallCheck")),f=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/regenerator")),d=n(e("babel-runtime/helpers/asyncToGenerator")),h=function(){var e=(0,d.default)(l.default.mark(function e(t){var r,n,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection.pouch.get(t.primary);case 2:r=e.sent,n=t.collection._handleFromPouch(r),i=_.default.create("UPDATE",t.collection.database,t.collection,t,n),t.$emit(i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=r.putAttachment=function(){var e=(0,d.default)(l.default.mark(function e(t){var r,n,a,u=this,c=t.id,f=t.data,p=t.type,b=void 0===p?"text/plain":p;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(this),r=o(this),s(this)&&(f=this.collection._crypter._encryptValue(f)),n=w.createBlobBuffer(f,b),e.next=6,r.requestIdlePromise();case 6:return e.next=8,r.wrapCall((0,d.default)(l.default.mark(function e(){var t,r,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.collection.pouch.putAttachment(u.primary,c,u._data._rev,n,b);case 2:return e.next=4,u.collection.pouch.get(u.primary);case 4:return t=e.sent,r=t._attachments[c],i=k.fromPouchDocument(c,r,u),u._data._rev=t._rev,u._data._attachments=t._attachments,e.next=11,h(u);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}},e,u)})));case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),b=r.preMigrateDocument=function(){var e=(0,d.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return delete t.migrated._attachments,e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),y=r.postMigrateDocument=function(){var e=(0,d.default)(l.default.mark(function e(t){var r,n,i,o,s,a,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.oldCollection.schema.primaryPath,n=t.doc._attachments){e.next=4;break}return e.abrupt("return",t);case 4:e.t0=l.default.keys(n);case 5:if((e.t1=e.t0()).done){e.next=21;break}return i=e.t1.value,o=n[i],s=t.doc[r],e.next=11,t.oldCollection.pouchdb.getAttachment(s,i);case 11:return a=e.sent,e.next=14,w.toString(a);case 14:return a=e.sent,e.next=17,t.newestCollection.pouch.putAttachment(s,i,t.res.rev,w.createBlobBuffer(a,o.content_type),o.content_type);case 17:u=e.sent,t.res=u,e.next=5;break;case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.getAtomicQueueOfDocument=o,r.getAttachment=a,r.allAttachments=u;var v=n(e("custom-idle-queue")),_=n(e("./../rx-change-event")),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./../util")),g=new WeakMap,w=r.blobBufferUtil={createBlobBuffer:function(e,r){var n=void 0;try{n=new Blob([e],{type:r})}catch(i){n=new t(e,{type:r})}return n},toString:function(e){return e instanceof t?m.nextTick().then(function(){return e.toString()}):new Promise(function(t){var r=new FileReader;r.addEventListener("loadend",function(e){var r=e.target.result;t(r)}),r.readAsText(e)})}},x=function(e){Object.entries(e.doc.collection._attachments).forEach(function(t){var r=t[0],n=t[1];e.__defineGetter__(r,function(){return n.bind(e)})})},k=r.RxAttachment=function(){function e(t){var r=t.doc,n=t.id,i=t.type,o=t.length,s=t.digest,a=t.rev;(0,c.default)(this,e),this.doc=r,this.id=n,this.type=i,this.length=o,this.digest=s,this.rev=a,x(this)}return(0,f.default)(e,[{key:"remove",value:function(){var e=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doc.collection.pouch.removeAttachment(this.doc.primary,this.id,this.doc._data._rev);case 2:return e.next=4,h(this.doc);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=(0,d.default)(l.default.mark(function e(){var t,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doc.collection.pouch.getAttachment(this.doc.primary,this.id);case 2:if(t=e.sent,!s(this.doc)){e.next=8;break}return e.next=6,w.toString(t);case 6:r=e.sent,t=w.createBlobBuffer(this.doc.collection._crypter._decryptValue(r),this.type);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getStringData",value:function(){var e=(0,d.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:return t=e.sent,e.next=5,w.toString(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();k.fromPouchDocument=function(e,t,r){return new k({doc:r,id:e,type:t.content_type,length:t.length,digest:t.digest,rev:t.revpos})};var j=r.rxdb=!0,S=r.prototypes={RxDocument:function(e){e.putAttachment=p,e.getAttachment=a,e.allAttachments=u,Object.defineProperty(e,"allAttachments$",{get:function(){var e=this;return this._dataSync$.map(function(e){return e._attachments?e._attachments:{}}).map(function(e){return Object.entries(e)}).map(function(t){return t.map(function(t){var r=t[0],n=t[1];return k.fromPouchDocument(r,n,e)})})}})}},E=r.overwritable={},O=r.hooks={preMigrateDocument:b,postMigrateDocument:y};r.default={rxdb:j,prototypes:S,overwritable:E,hooks:O,blobBufferUtil:w}}).call(this,e("buffer").Buffer)},{"./../rx-change-event":29,"./../util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57,buffer:61,"custom-idle-queue":492}],15:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){return s.encrypt(e,t).toString()}function o(e,t){return s.decrypt(e,t).toString(a)}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=void 0,r.encrypt=i,r.decrypt=o;var s=n(e("crypto-js/aes")),a=n(e("crypto-js/enc-utf8")),u=r.rxdb=!0,c=r.prototypes={Crypter:function(e){e._encryptValue=function(e){return i(JSON.stringify(e),this._password)},e._decryptValue=function(e){var t=o(e,this._password);return JSON.parse(t)}}},f=r.overwritable={validatePassword:function(e){if(e&&"string"!=typeof e)throw new TypeError("password is no string");if(e&&e.length<8)throw new Error("password must have at least 8 chars (given: "+e+")")}};r.default={rxdb:u,prototypes:c,overwritable:f}},{"crypto-js/aes":482,"crypto-js/enc-utf8":486}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=r.spawnInMemory=r.InMemoryRxCollection=void 0;var i=n(e("babel-runtime/helpers/typeof")),o=n(e("babel-runtime/regenerator")),s=n(e("babel-runtime/helpers/asyncToGenerator")),a=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/possibleConstructorReturn")),f=n(e("babel-runtime/helpers/inherits")),l=r.spawnInMemory=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S||(S=!0,h.default.plugin(g.default)),!w.has(this)){e.next=5;break}return e.next=4,x.get(this);case 4:return e.abrupt("return",w.get(this));case 5:return t=new j(this),r=t.prepare(),w.set(this,t),x.set(this,r),e.next=11,r;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),d=n(e("../rx-collection")),h=n(e("../core")),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),b=n(e("../crypter")),y=n(e("../change-event-buffer")),v=n(e("../rx-schema")),_=n(e("../pouch-db")),m=n(e("clone")),g=n(e("pouchdb-adapter-memory")),w=new WeakMap,x=new WeakMap,k={new_edits:!1},j=r.InMemoryRxCollection=function(e){function t(e,r){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.database,e.name,function(e){var t=(0,m.default)(e.jsonID);return t.disableKeyCompression=!0,delete t.properties._id,delete t.properties._rev,delete t.properties._attachments,function e(t,r){delete t.encrypted,Object.values(t).filter(function(e){return"object"===(void 0===e?"undefined":(0,i.default)(e))}).forEach(function(t){return e(t,r)})}(t,t),v.default.create(t)}(e.schema),r,{},e._methods));return n._isInMemory=!0,n._parentCollection=e,n._parentCollection.onDestroy.then(function(){return n.destroy()}),n._changeStreams=[],n.onDestroy.then(function(){n._changeStreams.forEach(function(e){return e.cancel()}),n.pouch.destroy()}),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"prepare",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._crypter=b.default.create(this.database.password,this.schema),this.pouch=new _.default("rxdb-in-memory-"+p.randomCouchString(10),p.adapterObject("memory"),{}),this._observable$=new p.Rx.Subject,this._changeEventBuffer=y.default.create(this),e.next=6,Promise.all(this.schema.indexes.map(function(e){return t.pouch.createIndex({index:{fields:e}})}));case 6:return this._subs.push(this._observable$.subscribe(function(e){var r=t._docCache.get(e.data.doc);r&&r._handleChangeEvent(e)})),e.next=9,this._initialSync();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_initialSync",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,i=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._parentCollection.pouch.allDocs({attachments:!1,include_docs:!0});case 2:return t=e.sent,e.next=5,this.pouch.bulkDocs({docs:t.rows.map(function(e){return e.doc}).filter(function(e){return!e.language}).map(function(e){return i._parentCollection._handleFromPouch(e)})},k);case 5:this._parentCollection.watchForChanges(),this.watchForChanges(),r=this.pouch.changes({since:"now",include_docs:!0,live:!0}).on("change",function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=i._parentCollection._handleToPouch(t.doc),i._parentCollection.pouch.bulkDocs({docs:[r]},k);case 2:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()),this._changeStreams.push(r),n=this._parentCollection.pouch.changes({since:"now",include_docs:!0,live:!0}).on("change",function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=i._parentCollection._handleFromPouch(t.doc),r=i.schema.swapPrimaryToId(r),i.pouch.bulkDocs({docs:[r]},k);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()),this._changeStreams.push(n);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"$emit",value:function(e){this._observable$.next(e),this._eventCounter||(this._eventCounter=0),this._eventCounter++,10===this._eventCounter&&(this._eventCounter=0,this.pouch.compact())}}]),t}(d.default.RxCollection),S=!1,E=r.rxdb=!0,O=r.prototypes={RxCollection:function(e){e.inMemory=l}},C=r.overwritable={};r.default={rxdb:E,prototypes:O,overwritable:C,spawnInMemory:l}},{"../change-event-buffer":2,"../core":3,"../crypter":4,"../pouch-db":25,"../rx-collection":30,"../rx-schema":35,"../util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/helpers/typeof":56,"babel-runtime/regenerator":57,clone:63,"pouchdb-adapter-memory":573}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=void 0;var i=n(e("babel-runtime/regenerator")),o=n(e("babel-runtime/helpers/asyncToGenerator")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),a=n(e("../rx-query")),u=n(e("../rx-error")),c=function(){var e=(0,o.default)(i.default.mark(function e(){var t,r,n=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.name,instanceToken:this.token,encrypted:!1,passwordHash:null,collections:[]},this.password&&(t.passwordHash=s.hash(this.password),t.encrypted=!o),r=Object.keys(this.collections).filter(function(e){return!a||a.includes(e)}).filter(function(e){return"_"!==e.charAt(0)}).map(function(e){return n.collections[e]}),e.next=5,Promise.all(r.map(function(e){return e.dump(o)}));case 5:return t.collections=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,o.default)(i.default.mark(function e(t){var r,n=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.collections.filter(function(e){return!n.collections[e.name]}).map(function(e){return e.name})).length>0)){e.next=3;break}throw u.default.newRxError("You must create the collections before you can import their data",{missingCollections:r});case 3:return e.abrupt("return",Promise.all(t.collections.map(function(e){return n.collections[e.name].importDump(e)})));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,o.default)(i.default.mark(function e(){var t,r,n,o,u=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!u,r={name:this.name,schemaHash:this.schema.hash,encrypted:!1,passwordHash:null,docs:[]},this.database.password&&t&&(r.passwordHash=s.hash(this.database.password),r.encrypted=!0),n=a.default.create("find",{},this),e.next=6,this._pouchFind(n,null,t);case 6:return o=e.sent,r.docs=o.map(function(e){return delete e._rev,e}),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.default)(i.default.mark(function e(t){var r,n=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.schemaHash===this.schema.hash){e.next=2;break}throw new Error("the imported json relies on a different schema");case 2:if(!t.encrypted||t.passwordHash===s.hash(this.database.password)){e.next=4;break}throw new Error("json.passwordHash does not match the own");case 4:return r=t.docs.map(function(e){return n._crypter.decrypt(e)}).map(function(e){return n.schema.validate(e)}).map(function(e){return n._pouchPut(e)}),e.abrupt("return",Promise.all(r));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=r.rxdb=!0,p=r.prototypes={RxDatabase:function(e){e.dump=c,e.importDump=f},RxCollection:function(e){e.dump=l,e.importDump=d}},b=r.overwritable={};r.default={rxdb:h,prototypes:p,overwritable:b}},{"../rx-error":33,"../rx-query":34,"../util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/regenerator":57}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new f(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=void 0;var o=n(e("babel-runtime/helpers/typeof")),s=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/createClass"));r.create=i;var u=n(e("clone")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),f=function(){function e(t){(0,s.default)(this,e),this.schema=t,this._table,this._reverseTable,this._fullTable}return(0,a.default)(e,[{key:"_compressObj",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={};return"object"!==(void 0===e?"undefined":(0,o.default)(e))?e:Array.isArray(e)?e.map(function(e){return t._compressObj(e,c.trimDots(r+".item"))}):(Object.keys(e).forEach(function(i){var o=e[i],s=c.trimDots(r+"."+i),a=t.table[s]?t.table[s]:i,u=o;u=t._compressObj(o,s),n[a]=u}),n)}},{key:"compress",value:function(e){return this.schema.doKeyCompression()?this._compressObj(e):(0,u.default)(e)}},{key:"_decompressObj",value:function(e){var t=this,r=this.reverseTable;if("object"!==(void 0===e?"undefined":(0,o.default)(e))||null===e)return e;if(Array.isArray(e))return e.map(function(e){return t._decompressObj(e)});var n={};return Object.keys(e).forEach(function(i){var o=i;(i.startsWith("|")||i.startsWith("_"))&&r[i]&&(o=r[i]),n[o]=t._decompressObj(e[i])}),n}},{key:"decompress",value:function(e){if(!this.schema.doKeyCompression())return(0,u.default)(e);return this._decompressObj(e)}},{key:"_transformKey",value:function(e,t,r){var n=this.table;e=c.trimDots(e),t=c.trimDots(t);var i=r.shift(),o=c.trimDots(e+"."+i);return n[o]?t+="."+n[o]:t+="."+i,r.length>0?this._transformKey(o,t,r):c.trimDots(t)}},{key:"compressQuery",value:function(e){var t=this;if(e=(0,u.default)(e),!this.schema.doKeyCompression())return e;var r={};return Object.keys(e.selector).forEach(function(n){var i=e.selector[n];if(n.startsWith("$")){var o=i.map(function(e){var r={};return Object.keys(e).forEach(function(n){var i=t._transformKey("","",n.split("."));r[i]=e[n]}),r});r[n]=o}else{var s=t._transformKey("","",n.split("."));r[s]=i}}),e.selector=r,e.sort&&(e.sort=e.sort.map(function(e){var r=Object.keys(e)[0],n=e[r],i={};return i[t._transformKey("","",r.split("."))]=n,i})),e}},{key:"table",get:function(){var e=this;if(!this._table){var t=0;this._table={};!function r(n,i){Object.keys(i).map(function(s){var a=i[s],u="properties"===s?n:c.trimDots(n+"."+s);"object"===(void 0===a?"undefined":(0,o.default)(a))&&!Array.isArray(a)&&!e._table[u]&&""!==u&&s.length>3&&!u.startsWith("_")&&(e._table[u]="|"+(t++,c.numberToLetter(t-1))),!0===a.primary&&(e._table[u]="_id"),"object"!==(void 0===a?"undefined":(0,o.default)(a))||Array.isArray(a)||r(u,a)})}("",this.schema.normalized)}return this._table}},{key:"reverseTable",get:function(){var e=this;if(!this._reverseTable){var t=this.table;this._reverseTable={},Object.keys(t).forEach(function(r){var n=t[r],i=r.split(".").pop();e._reverseTable[n]=i})}return this._reverseTable}}]),e}(),l=r.rxdb=!0,d=r.prototypes={},h=r.overwritable={createKeyCompressor:i};r.default={rxdb:l,prototypes:d,overwritable:h}},{"../util":37,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/typeof":56,clone:63}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new p(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=r.SIGNAL_TIME=r.documentID=void 0;var o=n(e("babel-runtime/regenerator")),s=n(e("babel-runtime/helpers/asyncToGenerator")),a=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass"));r.create=i;var c=n(e("unload")),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),l=n(e("../rx-broadcast-channel")),d=r.documentID="_local/leader",h=r.SIGNAL_TIME=500,p=function(){function e(t){(0,a.default)(this,e),this.destroyed=!1,this.subs=[],this.unloads=[],this.database=t,this.token=this.database.token,this.isLeader=!1,this.becomeLeader$=new f.Rx.BehaviorSubject({isLeader:!1}),this.isDead=!1,this.isApplying=!1,this.isWaiting=!1,this.bc=l.default.create(this.database,"leader"),this.electionChannel=this.bc?"broadcast":"socket"}return(0,u.default)(e,[{key:"createLeaderObject",value:function(){return{_id:d,is:"",apply:"",t:0}}},{key:"getLeaderObject",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,this.database._adminPouch.get(d);case 4:t=e.sent,e.next=14;break;case 7:return e.prev=7,e.t0=e.catch(1),t=this.createLeaderObject(),e.next=12,this.database._adminPouch.put(t);case 12:r=e.sent,t._rev=r.rev;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"setLeaderObject",value:function(e){return this.database._adminPouch.put(e)}},{key:"getApplyFunction",value:function(e){if("socket"===e)return this.applySocket.bind(this);if("broadcast"===e)return this.applyBroadcast.bind(this);throw new Error("this should not happen")}},{key:"applyOnce",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLeader){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.isDead){e.next=4;break}return e.abrupt("return",!1);case 4:if(!this.isApplying){e.next=6;break}return e.abrupt("return",!1);case 6:if(!this.destroyed){e.next=8;break}return e.abrupt("return",!1);case 8:return this.isApplying=!0,e.next=11,this.getApplyFunction(this.electionChannel)();case 11:if(!(t=e.sent)){e.next=15;break}return e.next=15,this.beLeader();case 15:return this.isApplying=!1,e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"applySocket",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLeaderObject();case 3:if(t=e.sent,r=(new Date).getTime()-2*h,!(t.t>=r)){e.next=7;break}throw new Error("someone else is applying/leader");case 7:return t.apply=this.token,t.t=(new Date).getTime(),e.next=11,this.setLeaderObject(t);case 11:return e.next=13,f.promiseWait(.5*h);case 13:return e.next=15,this.getLeaderObject();case 15:if((t=e.sent).apply===this.token){e.next=18;break}throw new Error("someone else overwrote apply");case 18:return e.abrupt("return",!0);case 21:return e.prev=21,e.t0=e.catch(0),e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,this,[[0,21]])}));return function(){return e.apply(this,arguments)}}()},{key:"applyBroadcast",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,i,a,u=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),r=[],n=[],i=function(){var e=(0,s.default)(o.default.mark(function e(){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.push(u.bc.$.filter(function(){return!!u.isApplying}).filter(function(e){return e.t>=t}).filter(function(e){return"apply"===e.type}).filter(function(e){return e.data<t||e.data===t&&e.it>u.token}).filter(function(){return n.length<1}).subscribe(function(e){return n.push("other is applying:"+e.it)})),r.push(u.bc.$.filter(function(){return!!u.isApplying}).filter(function(e){return e.t>=t}).filter(function(e){return"tell"===e.type}).filter(function(){return n.length<1}).subscribe(function(e){return n.push("other is leader"+e.it)})),r.push(u.bc.$.filter(function(){return!!u.isApplying}).filter(function(e){return"apply"===e.type}).filter(function(e){return e.data>t||e.data===t&&e.it>u.token}).subscribe(function(){return u.bc.write("apply",t)})),i=3;case 4:if(!(i>0)){e.next=14;break}return i--,e.next=8,u.bc.write("apply",t);case 8:return e.next=10,f.promiseWait(300);case 10:if(!(n.length>0)){e.next=12;break}return e.abrupt("return",!1);case 12:e.next=4;break;case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,u)}));return function(){return e.apply(this,arguments)}}(),e.next=6,i();case 6:return a=e.sent,r.map(function(e){return e.unsubscribe()}),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"leaderSignal",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:if(!this.leaderSignal_run){e.next=4;break}return e.abrupt("return");case 4:this.leaderSignal_run=!0,e.t0=this.electionChannel,e.next="broadcast"===e.t0?8:"socket"===e.t0?11:31;break;case 8:return e.next=10,this.bc.write("tell");case 10:return e.abrupt("break",31);case 11:t=!1;case 12:if(t){e.next=30;break}return e.prev=13,e.next=16,this.getLeaderObject();case 16:return r=e.sent,r.is=this.token,r.apply=this.token,r.t=(new Date).getTime(),e.next=22,this.setLeaderObject(r);case 22:t=!0,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(13),console.dir(e.t1);case 28:e.next=12;break;case 30:return e.abrupt("break",31);case 31:return this.leaderSignal_run=!1,e.abrupt("return");case 33:case"end":return e.stop()}},e,this,[[13,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"beLeader",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDead){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.isLeader){e.next=4;break}return e.abrupt("return",!1);case 4:return this.isLeader=!0,this.becomeLeader$.next({isLeader:!0}),e.next=8,this.leaderSignal();case 8:e.t0=this.electionChannel,e.next="broadcast"===e.t0?11:"socket"===e.t0?14:16;break;case 11:return this.signalLeadership=this.bc.$.filter(function(){return!!t.isLeader}).filter(function(e){return"tell"!==e.type}).subscribe(function(){return t.leaderSignal()}),this.subs.push(this.signalLeadership),e.abrupt("break",16);case 14:return(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destroyed){e.next=9;break}return e.next=3,f.promiseWait(h);case 3:if(t.isLeader){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.leaderSignal();case 7:e.next=0;break;case 9:case"end":return e.stop()}},e,t)}))(),e.abrupt("break",16);case 16:return this.unloads.push(c.default.add(function(){t.bc&&t.bc.write("death"),t.die()})),e.abrupt("return",!0);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"die",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLeader){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.isDead){e.next=4;break}return e.abrupt("return",!1);case 4:this.isDead=!0,this.isLeader=!1,this.signalLeadership&&this.signalLeadership.unsubscribe(),e.t0=this.electionChannel,e.next="broadcast"===e.t0?10:"socket"===e.t0?13:30;break;case 10:return e.next=12,this.bc.write("death");case 12:return e.abrupt("break",30);case 13:t=!1;case 14:if(t){e.next=29;break}return e.prev=15,e.next=18,this.getLeaderObject();case 18:return r=e.sent,r.t=0,e.next=22,this.setLeaderObject(r);case 22:t=!0,e.next=27;break;case 25:e.prev=25,e.t1=e.catch(15);case 27:e.next=14;break;case 29:return e.abrupt("break",30);case 30:return e.abrupt("return",!0);case 31:case"end":return e.stop()}},e,this,[[15,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"waitForLeadership",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLeader){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:if(this.isWaiting){e.next=14;break}this.isWaiting=!0,this.applyOnce(),t=5*h,e.t0=this.electionChannel,e.next="broadcast"===e.t0?9:"socket"===e.t0?11:13;break;case 9:return this.subs.push(this.bc.$.filter(function(e){return"death"===e.type}).subscribe(function(){return r.applyOnce()})),e.abrupt("break",13);case 11:return t=2*h,e.abrupt("break",13);case 13:(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.destroyed||r.isLeader){e.next=16;break}return e.next=3,f.promiseWait(t);case 3:e.t0=r.electionChannel,e.next="broadcast"===e.t0?6:"socket"===e.t0?9:12;break;case 6:return e.next=8,f.requestIdlePromise(t);case 8:return e.abrupt("break",12);case 9:return e.next=11,r.database.requestIdlePromise(t);case 11:return e.abrupt("break",12);case 12:return e.next=14,r.applyOnce();case 14:e.next=0;break;case 16:case"end":return e.stop()}},e,r)}))();case 14:return e.abrupt("return",this.becomeLeader$.asObservable().filter(function(e){return!0===e.isLeader}).first().toPromise());case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.destroyed=!0,this.subs.map(function(e){return e.unsubscribe()}),this.unloads.map(function(e){return e()}),e.next=5,this.die();case 5:this.bc&&this.bc.destroy();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),b=r.rxdb=!0,y=r.prototypes={},v=r.overwritable={createLeaderElector:i};r.default={rxdb:b,prototypes:y,overwritable:v}},{"../rx-broadcast-channel":28,"../util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57,unload:769}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=r.RxLocalDocument=void 0;var i=n(e("babel-runtime/regenerator")),o=n(e("babel-runtime/helpers/asyncToGenerator")),s=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),c=n(e("babel-runtime/helpers/inherits")),f=n(e("clone")),l=n(e("object-path")),d=n(e("deep-equal")),h=n(e("../rx-document")),p=n(e("../rx-database")),b=n(e("../rx-collection")),y=n(e("../rx-change-event")),v=n(e("../doc-cache")),_=n(e("../rx-error")),m=new WeakMap,g=function(e){return m.has(e)||m.set(e,v.default.create()),m.get(e)},w=new WeakMap,x=r.RxLocalDocument=function(e){function t(e,r,n){(0,s.default)(this,t);var i=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,r));return i.id=e,i.parent=n,i}return(0,c.default)(t,e),(0,a.default)(t,[{key:"toPouchJson",value:function(){(0,f.default)(this._data)._id="_local/"+this.id}},{key:"_handleChangeEvent",value:function(e){if(e.data.doc===this.primary)switch(e.data.op){case"UPDATE":var t=(0,f.default)(e.data.v),r=this._dataSync$.getValue(),n=this._data;(0,d.default)(r,n)?(this._data=t,!0!==this._synced$.getValue()&&this._synced$.next(!0)):(!1!==this._synced$.getValue()&&this._synced$.next(!1),this._data._rev=t._rev),this._dataSync$.next((0,f.default)(t));break;case"REMOVE":g(this.parent).delete(this.primary),this._deleted$.next(!0)}}},{key:"$emit",value:function(e){return this.parent.$emit(e)}},{key:"get",value:function(e){if(this._data){if("string"!=typeof e)throw new TypeError("RxDocument.get(): objPath must be a string");var t=l.default.get(this._data,e);return t=(0,f.default)(t)}}},{key:"get$",value:function(e){if(e.includes(".item."))throw new Error("cannot get observable of in-array fields because order cannot be guessed: "+e);if(e===this.primaryPath)throw _.default.newRxError("cannot observe primary path");return this._dataSync$.map(function(t){return l.default.get(t,e)}).distinctUntilChanged().asObservable()}},{key:"set",value:function(e,t){if(!t){var r=(0,f.default)(e);return r._rev=this._data._rev,this._data=r,this}if("_id"===e)throw new Error("id cannot be modified");if(!Object.is(this.get(e),t))return l.default.set(this._data,e,t),this}},{key:"save",value:function(){var e=(0,o.default)(i.default.mark(function e(){var t,r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,f.default)(this._data),t._id="_local/"+this.id,e.next=4,this.parentPouch.put(t);case 4:r=e.sent,this._data._rev=r.rev,n=y.default.create("UPDATE",p.default.isInstanceOf(this.parent)?this.parent:this.parent.database,b.default.isInstanceOf(this.parent)?this.parent:null,this,(0,f.default)(this._data),!0),this.$emit(n);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,o.default)(i.default.mark(function e(){var t,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_local/"+this.id,e.next=3,this.parentPouch.remove(t,this._data._rev);case 3:g(this.parent).delete(this.id),r=y.default.create("REMOVE",p.default.isInstanceOf(this.parent)?this.parent:this.parent.database,b.default.isInstanceOf(this.parent)?this.parent:null,this,(0,f.default)(this._data),!0),this.$emit(r);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isLocal",get:function(){return!0}},{key:"parentPouch",get:function(){return j(this.parent)}},{key:"allAttachments$",get:function(){throw new Error("cant use attachments on local documents")}},{key:"primaryPath",get:function(){return"id"}},{key:"primary",get:function(){return this.id}},{key:"$",get:function(){return this._dataSync$.asObservable()}}]),t}(h.default.RxDocument),k=!1;x.create=function(e,t,r){k||(k=!0,["populate","update","putAttachment","getAttachment","allAttachments"].forEach(function(e){return x.prototype[e]=function(e){return function(){throw new Error("Function "+e+" is not useable on local documents")}}(e)})),function(e){if(!w.has(e)){var t=e.$.filter(function(e){return e.data.isLocal}).subscribe(function(t){var r=g(e).get(t.data.doc);r&&r._handleChangeEvent(t)});e._subs.push(t),w.set(e,t)}w.get(e)}(r);var n=new x(e,t,r);return g(r).set(e,n),n};var j=function(e){return p.default.isInstanceOf(e)?e._adminPouch:e.pouch},S=function(){var e=(0,o.default)(i.default.mark(function e(t,r){var n,o,s,a,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.default.isInstanceOf(this)||!this._isInMemory){e.next=2;break}return e.abrupt("return",this._parentCollection.insertLocal(t,r));case 2:return r=(0,f.default)(r),e.next=5,this.getLocal(t);case 5:if(!(n=e.sent)){e.next=8;break}throw _.default.newRxError("Local document already exists",{id:t,data:r});case 8:return o=j(this),s=(0,f.default)(r),s._id="_local/"+t,e.next=13,o.put(s);case 13:return a=e.sent,r._rev=a.rev,u=x.create(t,r,this),e.abrupt("return",u);case 17:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.default)(i.default.mark(function e(t,r){var n,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.default.isInstanceOf(this)||!this._isInMemory){e.next=2;break}return e.abrupt("return",this._parentCollection.upsertLocal(t,r));case 2:return e.next=4,this.getLocal(t);case 4:if(n=e.sent){e.next=10;break}return o=this.insertLocal(t,r),e.abrupt("return",o);case 10:return r._rev=n._data._rev,n._data=r,e.next=14,n.save();case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=(0,o.default)(i.default.mark(function e(t){var r,n,o,s,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.default.isInstanceOf(this)||!this._isInMemory){e.next=2;break}return e.abrupt("return",this._parentCollection.getLocal(t));case 2:if(r=j(this),n=g(this),o=n.get(t)){e.next=19;break}return e.prev=6,e.next=9,r.get("_local/"+t);case 9:if(s=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return a=x.create(t,s,this),e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(6),e.abrupt("return",null);case 19:return e.abrupt("return",o);case 20:case"end":return e.stop()}},e,this,[[6,16]])}));return function(t){return e.apply(this,arguments)}}(),C=r.rxdb=!0,A=r.prototypes={RxCollection:function(e){e.insertLocal=S,e.upsertLocal=E,e.getLocal=O},RxDatabase:function(e){e.insertLocal=S,e.upsertLocal=E,e.getLocal=O}},P=r.overwritable={};r.default={rxdb:C,prototypes:A,overwritable:P}},{"../doc-cache":6,"../rx-change-event":29,"../rx-collection":30,"../rx-database":31,"../rx-document":32,"../rx-error":33,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54,"babel-runtime/regenerator":57,clone:63,"deep-equal":496,"object-path":567}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new v(e)}function o(){var e=this;if(!this.synced){var t={},r=h.Rx.Observable.fromEvent(this.pouch.changes({since:"now",live:!0,include_docs:!0}),"change").filter(function(e){return"_"!==e.id.charAt(0)}).map(function(e){return e.doc}).filter(function(t){return!e._changeEventBuffer.buffer.map(function(e){return e.data.v._rev}).includes(t._rev)}).filter(function(e){return t[e._rev]="YES"}).delay(10).map(function(e){var r=null;return"YES"===t[e._rev]&&(r=e),delete t[e._rev],r}).filter(function(e){return null!==e}).subscribe(function(t){e.$emit(y.default.fromPouchChange(t,e))});this._subs.push(r);var n=this.$.map(function(e){return e.data.v}).map(function(e){e&&t[e._rev]&&(t[e._rev]="NO")}).subscribe();this._subs.push(n),this.synced=!0}}function s(e){var t=this,r=e.remote,n=e.waitForLeadership,o=void 0===n||n,s=e.direction,c=void 0===s?{pull:!0,push:!0}:s,f=e.options,d=void 0===f?{live:!0,retry:!0}:f,p=e.query;if(d=(0,l.default)(d),b.default.isInstanceOf(r)&&(r=r.pouch),p&&this!==p.collection)throw new Error("RxCollection.sync() query must be from the same RxCollection");var y=h.pouchReplicationFunction(this.pouch,c);p&&(d.selector=p.keyCompress().selector);var v=i(this);return(0,u.default)(a.default.mark(function e(){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,t.database.waitForLeadership();case 3:e.next=7;break;case 5:return e.next=7,h.promiseWait(0);case 7:n=y(r,d),t.watchForChanges(),v.setPouchEventEmitter(n),t._repStates.push(v);case 11:case"end":return e.stop()}},e,t)}))(),v}Object.defineProperty(r,"__esModule",{value:!0}),r.overwritable=r.prototypes=r.rxdb=r.RxReplicationState=void 0;var a=n(e("babel-runtime/regenerator")),u=n(e("babel-runtime/helpers/asyncToGenerator")),c=n(e("babel-runtime/helpers/classCallCheck")),f=n(e("babel-runtime/helpers/createClass"));r.createRxReplicationState=i,r.watchForChanges=o,r.sync=s;var l=n(e("clone")),d=n(e("pouchdb-replication")),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),p=n(e("../core")),b=n(e("../rx-collection")),y=n(e("../rx-change-event"));p.default.plugin(d.default);var v=r.RxReplicationState=function(){function e(t){var r=this;(0,c.default)(this,e),this._subs=[],this.collection=t,this._pouchEventEmitterObject=null,this._subjects={change:new h.Rx.Subject,docs:new h.Rx.Subject,active:new h.Rx.BehaviorSubject(!1),complete:new h.Rx.BehaviorSubject(!1),error:new h.Rx.Subject},Object.keys(this._subjects).forEach(function(e){Object.defineProperty(r,e+"$",{get:function(){return this._subjects[e].asObservable()}})})}return(0,f.default)(e,[{key:"setPouchEventEmitter",value:function(e){var t=this;if(this._pouchEventEmitterObject)throw new Error("already added");this._pouchEventEmitterObject=e,this._subs.push(h.Rx.Observable.fromEvent(e,"change").subscribe(function(e){return t._subjects.change.next(e)})),this._subs.push(h.Rx.Observable.fromEvent(e,"change").subscribe(function(e){0!==t._subjects.docs.observers.length&&"pull"===e.direction&&e.change.docs.filter(function(e){return"query"!==e.language}).map(function(e){return t.collection._handleFromPouch(e)}).forEach(function(e){return t._subjects.docs.next(e)})})),this._subs.push(h.Rx.Observable.fromEvent(e,"error").subscribe(function(e){return t._subjects.error.next(e)})),this._subs.push(h.Rx.Observable.fromEvent(e,"active").subscribe(function(){return t._subjects.active.next(!0)})),this._subs.push(h.Rx.Observable.fromEvent(e,"paused").subscribe(function(){return t._subjects.active.next(!1)})),this._subs.push(h.Rx.Observable.fromEvent(e,"complete").subscribe(function(e){return t._subjects.complete.next(e)}))}},{key:"cancel",value:function(){var e=(0,u.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._pouchEventEmitterObject&&this._pouchEventEmitterObject.cancel(),this._subs.forEach(function(e){return e.unsubscribe()});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),_=r.rxdb=!0,m=r.prototypes={RxCollection:function(e){e.watchForChanges=o,e.sync=s}},g=r.overwritable={};r.default={rxdb:_,prototypes:m,overwritable:g,watchForChanges:o,sync:s}},{"../core":3,"../rx-change-event":29,"../rx-collection":30,"../util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57,clone:63,"pouchdb-replication":605}],22:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(""!==e){if(["properties","language"].includes(e))throw new Error("fieldname is not allowed: "+e);var t="^[a-zA-Z][[a-zA-Z0-9_]*]?[a-zA-Z0-9]$",r=new RegExp(t);if(!e.match(r))throw f.default.newRxError("fieldnames do not match the regex",{regex:t,fieldName:e})}}function o(e){function t(e,r){if("object"===(void 0===e?"undefined":(0,a.default)(e)))for(var n in e){e.properties||function(e,t,r){if("string"!=typeof e||"object"!==(void 0===t?"undefined":(0,a.default)(t))||Array.isArray(t)||i(e),t.hasOwnProperty("item")&&"array"!==t.type)throw new Error("name 'item' reserved for array-fields: "+e);if(t.hasOwnProperty("ref"))switch(t.type){case"string":break;case"array":if(!t.items||!t.items.type||"string"!==t.items.type)throw new Error("fieldname "+e+" has a ref-array but items-type is not string");break;default:throw new Error("fieldname "+e+" has a ref but is not type string or array<string>")}if(t.hasOwnProperty("ref")&&t.primary)throw new Error("fieldname "+e+" cannot be primary and ref at same time");var n=r.split(".").length>=2;if(n){if(t.primary)throw new Error("primary can only be defined at top-level");if(t.default)throw new Error("default-values can only be defined at top-level")}if(!n&&"_"===e.charAt(0))throw new Error("first level-fields cannot start with underscore _ "+e)}(n,e[n],r);var o=r;"properties"!==n&&(o=o+"."+n),t(e[n],o)}}return t(e,""),!0}function s(e){if(e.properties._id)throw new Error("schema defines ._id, this will be done automatically");if(e.properties._rev)throw new Error("schema defines ._rev, this will be done automatically");if(!e.hasOwnProperty("version")||"number"!=typeof e.version||e.version<0)throw new Error("schema need an number>=0 as version; given: "+e.version);o(e);var t=void 0;if(Object.keys(e.properties).forEach(function(r){var n=e.properties[r];if(n.primary){if(t)throw new Error("primary can only be defined once");if(t=r,n.index)throw new Error("primary is always index, do not declare it as index");if(n.unique)throw new Error("primary is always unique, do not declare it as unique");if(n.encrypted)throw new Error("primary cannot be encrypted");if("string"!==n.type)throw new Error("primary must have type: string")}if(c.default.properties().includes(r))throw new Error("top-level fieldname is not allowed: "+r)}),e.compoundIndexes){if(!Array.isArray(e.compoundIndexes))throw new Error("compoundIndexes must be an array");e.compoundIndexes.forEach(function(e){if(!Array.isArray(e))throw new Error("compoundIndexes must contain arrays");e.forEach(function(e){if("string"!=typeof e)throw new Error("compoundIndexes.array must contains strings")})})}(0,l.getIndexes)(e).reduce(function(e,t){return e.concat(t)},[]).filter(function(e,t,r){return r.indexOf(e)===t}).map(function(t){var r=u.default.get(e,"properties."+t.replace(".",".properties."));if(!r||"object"!==(void 0===r?"undefined":(0,a.default)(r)))throw new Error("given index("+t+") is not defined in schema");return{key:t,schemaObj:r}}).filter(function(e){return"string"!==e.schemaObj.type&&"integer"!==e.schemaObj.type}).forEach(function(e){throw new Error("given indexKey ("+e.key+") is not type:string but\n                 "+e.schemaObj.type)})}Object.defineProperty(r,"__esModule",{value:!0}),r.hooks=r.rxdb=void 0;var a=n(e("babel-runtime/helpers/typeof"));r.checkFieldNameRegex=i,r.validateFieldsDeep=o,r.checkSchema=s;var u=n(e("object-path")),c=n(e("../rx-document")),f=n(e("../rx-error")),l=e("../rx-schema"),d=r.rxdb=!0,h=r.hooks={preCreateRxSchema:s};r.default={rxdb:d,hooks:h}},{"../rx-document":32,"../rx-error":33,"../rx-schema":35,"babel-runtime/helpers/typeof":56,"object-path":567}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=this,r=(0,u.default)(this._data,e);return Object.keys(this._data).forEach(function(e){r[e]?(0,c.default)(t._data[e],r[e])||(t._data[e]=r[e]):delete t._data[e]}),delete r._rev,delete r._id,Object.keys(r).filter(function(e){return!(0,c.default)(t._data[e],r[e])}).forEach(function(e){return t._data[e]=r[e]}),this.save()}Object.defineProperty(r,"__esModule",{value:!0}),r.prototypes=r.rxdb=r.RxQueryUpdate=void 0;var o=n(e("babel-runtime/regenerator")),s=n(e("babel-runtime/helpers/asyncToGenerator")),a=r.RxQueryUpdate=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exec();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if(!Array.isArray(r)){e.next=10;break}return e.next=8,Promise.all(r.map(function(e){return e.update(t)}));case 8:e.next=12;break;case 10:return e.next=12,r.update(t);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.update=i;var u=n(e("modifyjs")),c=n(e("deep-equal")),f=r.rxdb=!0,l=r.prototypes={RxDocument:function(e){e.update=i},RxQuery:function(e){e.update=a}};r.default={rxdb:f,prototypes:l}},{"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/regenerator":57,"deep-equal":496,modifyjs:562}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.hooks=r.prototypes=r.rxdb=void 0;var i=n(e("is-my-json-valid")),o=n(e("../rx-error")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../util")),a={},u=r.rxdb=!0,c=r.prototypes={RxSchema:function(e){e._getValidator=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.hash;a[t]||(a[t]={});var r=a[t];if(!r[e]){var n=""===e?this.jsonID:this.getSchemaByObjectPath(e);if(!n)throw o.default.newRxError("Sub-schema not found, does the schemaPath exists in your schema?",{schemaPath:e});r[e]=(0,i.default)(n)}return r[e]},e.validate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this._getValidator(t);if(r(e))return e;throw o.default.newRxError("object does not match schema",{errors:r.errors,schemaPath:t,obj:e,schema:this.jsonID})}}},f=r.hooks={createRxSchema:function(e){s.requestIdleCallbackIfAvailable(function(){e._getValidator()})}};r.default={rxdb:u,prototypes:c,hooks:f}},{"../rx-error":33,"../util":37,"is-my-json-valid":529}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("pouchdb-core")),o=n(e("pouchdb-find"));i.default.plugin(o.default),i.default.countAllUndeleted=function(e){return e.allDocs({include_docs:!1,attachments:!1}).then(function(e){return e.rows.filter(function(e){return!e.id.startsWith("_design/")}).length})},i.default.getBatch=function(e,t){if(t<=1)throw new Error("PouchDB.getBatch: limit must be > 2");return e.allDocs({include_docs:!0,attachments:!1,limit:t}).then(function(e){return e.rows.map(function(e){return e.doc}).filter(function(e){return!e._id.startsWith("_design")})})},r.default=i.default},{"pouchdb-core":595,"pouchdb-find":598}],26:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return new a}Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("babel-runtime/helpers/classCallCheck")),s=n(e("babel-runtime/helpers/createClass"));r.create=i;var a=function(){function e(){(0,o.default)(this,e),this.subs=[],this._map={}}return(0,s.default)(e,[{key:"getByQuery",value:function(e){var t=e.toString(),r=this._map[t];return r||(this._map[t]=e,e)}},{key:"destroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this._map={}}}]),e}();r.default={create:i}},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){console.log("QueryChangeDetector.enableDebugging()"),l=!0}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("QueryChangeDetector.enableDebugging("+e+")"),d=e}function s(e){return new h(e)}Object.defineProperty(r,"__esModule",{value:!0});var a=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass"));r.enableDebugging=i,r.enable=o,r.create=s;var c=e("pouchdb-selector-core"),f=n(e("object-path")),l=!1,d=!1,h=function(){function e(t){(0,a.default)(this,e),this.query=t,this.primaryKey=this.query.collection.schema.primaryPath}return(0,u.default)(e,[{key:"runChangeDetection",value:function(e){var t=this;if(0===e.length)return!1;if(!d)return!0;var r=this.query._resultsData,n=!1;return!!e.find(function(e){var i=t.handleSingleChange(r,e);return Array.isArray(i)?(n=!0,r=i,!1):!!i||void 0})||!!n&&r}},{key:"_debugMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"optimized";console.dir({name:"QueryChangeDetector",title:r,query:this.query.toString(),key:e,changeEventData:t})}},{key:"handleSingleChange",value:function(e,t){var r=this,n=e.slice(0),i=this.query.toJSON(),o=t.data.v,s=this._isDocInResultData(o,e),a=this.doesDocMatchQuery(o),u=!i.limit||i.limit&&e.length>=i.limit,c=i.limit&&e.length>=i.limit;l&&(console.log("!!!:!!!:   handleSingleChange()"),this._debugMessage("start",t.data.v,"handleSingleChange()"),console.log("changeEvent.data:"),console.dir(t.data),console.log("wasDocInResults: "+s),console.log("doesMatchNow: "+a),console.log("isFilled: "+u));var f=null,d=null,h=null;if("REMOVE"===t.data.op){if(!a)return l&&this._debugMessage("R1",o),!1;if(i.skip&&a&&(null===d&&(d=r._isSortedBefore(o,n[0])),d)&&!u)return l&&this._debugMessage("R2",o),n.shift(),n;if(a&&s&&!u)return l&&this._debugMessage("R3",o),n=n.filter(function(e){return e[r.primaryKey]!==o[r.primaryKey]});if(a&&s&&!i.limit&&!i.skip)return l&&this._debugMessage("R3.1",o),n=n.filter(function(e){return e[r.primaryKey]!==o[r.primaryKey]});if(a&&i.limit&&(null===f&&(f=r._isSortedBefore(n[n.length-1],o)),f))return l&&this._debugMessage("R4",o),!1}else{if(!(i.skip||i.limit||s||a))return l&&this._debugMessage("U1",o),!1;if(!i.skip&&!i.limit&&s&&a){var p=n.find(function(e){return e[r.primaryKey]===o[r.primaryKey]}),b=n.indexOf(p);return n[b]=o,function(){if(null===h){var t=e.find(function(e){return e[r.primaryKey]===o[r.primaryKey]});h=r._sortFieldChanged(t,o)}return h}()?(l&&this._debugMessage("U2 - resort",o),this._resortDocData(n)):(l&&this._debugMessage("U2 - no-resort",o),n)}if(!i.skip&&!c&&!s&&a){l&&this._debugMessage("U3",o),n.push(o);return this._resortDocData(n)}}return!0}},{key:"doesDocMatchQuery",value:function(e){e=this.query.collection.schema.swapPrimaryToId(e);var t=Object.keys(this.query.toJSON().selector);return 1===(0,c.filterInMemoryFields)([{doc:e}],{selector:(0,c.massageSelector)(this.query.toJSON().selector)},t).length}},{key:"_isDocInResultData",value:function(e,t){var r=this.query.collection.schema.primaryPath;return!!t.find(function(t){return t[r]===e[r]})}},{key:"_sortFieldChanged",value:function(e,t){var r=!1;return this.query.toJSON().sort.map(function(e){return Object.keys(e).pop()}).find(function(n){return f.default.get(e,n)!==f.default.get(t,n)&&(r=!0,!0)}),r}},{key:"_isSortedBefore",value:function(e,t){var r=this.query.toJSON(),n=Object.keys(this.query.toJSON().selector),i=this.query.collection.schema.swapPrimaryToId(e),o=[i,this.query.collection.schema.swapPrimaryToId(t)].map(function(e){return{id:e._id,doc:e}});return(0,c.filterInMemoryFields)(o,{selector:(0,c.massageSelector)(this.query.toJSON().selector),sort:r.sort},n)[0].id===i._id}},{key:"_resortDocData",value:function(e){var t=this,r=e.map(function(e){return{doc:t.query.collection.schema.swapPrimaryToId(e)}}),n=this.query.toJSON(),i=Object.keys(this.query.toJSON().selector);return(0,c.filterInMemoryFields)(r,{selector:(0,c.massageSelector)(this.query.toJSON().selector),sort:n.sort},i).map(function(e){return e.doc}).map(function(e){return t.query.collection.schema.swapIdToPrimary(e)})}}]),e}();r.default={create:s,enableDebugging:i,enable:o}},{"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"object-path":567,"pouchdb-selector-core":606}],28:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return null===l&&(l=!("object"!==("undefined"==typeof window?"undefined":(0,s.default)(window))||!window.BroadcastChannel||"function"!=typeof window.BroadcastChannel||"function"!=typeof window.BroadcastChannel.prototype.postMessage||"function"!=typeof window.BroadcastChannel.prototype.close)),l}function o(e,t){return i()?new f(e,t):null}Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("babel-runtime/helpers/typeof")),a=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass"));r.canIUse=i,r.create=o;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),f=function(){function e(t,r){(0,a.default)(this,e),this.name=r,this.database=t,this.token=t.token}return(0,u.default)(e,[{key:"write",value:function(e,t){return this.bc.postMessage(JSON.stringify({type:e,it:this.token,data:t,t:(new Date).getTime()}))}},{key:"destroy",value:function(){this._bc&&this._bc.close()}},{key:"bc",get:function(){return this._bc||(this._bc=new BroadcastChannel("RxDB:"+this.database.name+":"+this.name)),this._bc}},{key:"$",get:function(){var e=this;return this._$||(this._$=c.Rx.Observable.fromEvent(this.bc,"message").map(function(e){return e.data}).map(function(e){return JSON.parse(e)}).filter(function(t){return t.it!==e.token})),this._$}}]),e}(),l=null;r.default={create:o,canIUse:i}},{"./util":37,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/typeof":56}],29:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new l(e)}function o(e,t){var r=e._rev.startsWith("1-")?"INSERT":"UPDATE";e._deleted&&(r="REMOVE"),e=t._handleFromPouch(e);var n={op:r,t:(new Date).getTime(),db:"remote",col:t.name,it:t.database.token,doc:e[t.schema.primaryPath],v:e};return new l(n)}function s(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s={op:e,t:(new Date).getTime(),db:t.name,it:t.token,isLocal:o};return r&&(s.col=r.name),n&&(s.doc=n.primary),i&&(s.v=i),new l(s)}function a(e){return e instanceof l}Object.defineProperty(r,"__esModule",{value:!0}),r.RxChangeEvent=void 0;var u=n(e("babel-runtime/helpers/classCallCheck")),c=n(e("babel-runtime/helpers/createClass"));r.fromJSON=i,r.fromPouchChange=o,r.create=s,r.isInstanceOf=a;var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),l=r.RxChangeEvent=function(){function e(t){(0,u.default)(this,e),this.data=t}return(0,c.default)(e,[{key:"toJSON",value:function(){var e={op:this.data.op,t:this.data.t,db:this.data.db,it:this.data.it,isLocal:this.data.isLocal};return this.data.col&&(e.col=this.data.col),this.data.doc&&(e.doc=this.data.doc),this.data.v&&(e.v=this.data.v),e}},{key:"isIntern",value:function(){return!(!this.data.col||"_"!==this.data.col.charAt(0))}},{key:"isSocket",value:function(){return!(!this.data.col||"_socket"!==this.data.col)}},{key:"hash",get:function(){return this._hash||(this._hash=f.hash(this.data)),this._hash}}]),e}();r.default={fromJSON:i,fromPouchChange:o,create:s,isInstanceOf:a}},{"./util":37,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){if(!R){var e=new P,t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));R=[].concat((0,s.default)(t),(0,s.default)(r))}return R}function o(e){return e instanceof P}Object.defineProperty(r,"__esModule",{value:!0}),r.create=r.RxCollection=void 0;var s=n(e("babel-runtime/helpers/toConsumableArray")),a=n(e("babel-runtime/helpers/typeof")),u=n(e("babel-runtime/regenerator")),c=n(e("babel-runtime/helpers/asyncToGenerator")),f=n(e("babel-runtime/helpers/classCallCheck")),l=n(e("babel-runtime/helpers/createClass")),d=r.create=function(){var e=(0,c.default)(u.default.mark(function e(t){var r,n=t.database,i=t.name,o=t.schema,s=t.pouchSettings,a=void 0===s?{}:s,c=t.migrationStrategies,f=void 0===c?{}:c,l=t.autoMigrate,d=void 0===l||l,h=t.statics,b=void 0===h?{}:h,y=t.methods,v=void 0===y?{}:y,_=t.attachments,m=void 0===_?{}:_;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.default.isInstanceOf(o)){e.next=2;break}throw new TypeError("given schema is no Schema-object");case 2:if(O.default.isInstanceOf(n)){e.next=4;break}throw new TypeError("given database is no Database-object");case 4:if("boolean"==typeof d){e.next=6;break}throw new TypeError("autoMigrate must be boolean");case 6:return p.validateCouchDBString(i),M(o,f),I(b),I(v),I(m),Object.keys(v).filter(function(e){return o.topLevelFields.includes(e)}).forEach(function(e){throw new Error("collection-method not allowed because fieldname is in the schema "+e)}),r=new P(n,i,o,a,f,v,m),e.next=15,r.prepare();case 15:if(Object.entries(b).forEach(function(e){var t=e.pop(),n=e.pop();r.__defineGetter__(n,function(){return t.bind(r)})}),!d){e.next=19;break}return e.next=19,r.migratePromise();case 19:return(0,S.runPluginHooks)("createRxCollection",r),e.abrupt("return",r);case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.properties=i,r.isInstanceOf=o;var h=n(e("clone")),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),b=n(e("./rx-document")),y=n(e("./rx-query")),v=n(e("./rx-change-event")),_=n(e("./rx-error")),m=n(e("./data-migrator")),g=n(e("./crypter")),w=n(e("./doc-cache")),x=n(e("./query-cache")),k=n(e("./change-event-buffer")),j=n(e("./overwritable")),S=e("./hooks"),E=n(e("./rx-schema")),O=n(e("./rx-database")),C=["pre","post"],A=["insert","save","remove","create"],P=r.RxCollection=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};(0,f.default)(this,e),this._isInMemory=!1,this.destroyed=!1,this.database=t,this.name=r,this.schema=n,this._migrationStrategies=o,this._pouchSettings=i,this._methods=a,this._attachments=u,this._atomicUpsertLocks={},this._docCache=w.default.create(),this._queryCache=x.default.create(),this.synced=!1,this.hooks={},this._subs=[],this._repStates=[],this.pouch=null,A.forEach(function(e){C.map(function(t){var r=t+p.ucfirst(e);s[r]=function(r,n){return s.addHook(t,e,r,n)}})})}return(0,l.default)(e,[{key:"prepare",value:function(){var e=(0,c.default)(u.default.mark(function e(){var t=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._dataMigrator=m.default.create(this,this._migrationStrategies),this._crypter=g.default.create(this.database.password,this.schema),this.pouch=this.database._spawnPouchDB(this.name,this.schema.version,this._pouchSettings),e.next=5,this.database.lockedRun(function(){return t.pouch.info()});case 5:return this._observable$=this.database.$.filter(function(e){return e.data.col===t.name}),this._changeEventBuffer=k.default.create(this),e.next=9,Promise.all(this.schema.indexes.map(function(e){var r=e.map(function(e){return t.schema.doKeyCompression()?t._keyCompressor._transformKey("","",e.split(".")):e});return t.database.lockedRun(function(){return t.pouch.createIndex({index:{fields:r}})})}));case 9:this._subs.push(this._observable$.filter(function(e){return!e.data.isLocal}).subscribe(function(e){var r=t._docCache.get(e.data.doc);r&&r._handleChangeEvent(e)}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"migrationNeeded",value:function(){return 0!==this.schema.version&&this._dataMigrator._getOldCollections().then(function(e){return e.length>0})}},{key:"migrate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._dataMigrator.migrate(e)}},{key:"migratePromise",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._dataMigrator.migratePromise(e)}},{key:"_handleToPouch",value:function(e){var t=(0,h.default)(e);return t=this._crypter.encrypt(t),t=this.schema.swapPrimaryToId(t),this.schema.doKeyCompression()&&(t=this._keyCompressor.compress(t)),t}},{key:"_handleFromPouch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,h.default)(e);return r=this.schema.swapIdToPrimary(r),this.schema.doKeyCompression()&&(r=this._keyCompressor.decompress(r)),t?r:r=this._crypter.decrypt(r)}},{key:"_pouchPut",value:function(){var e=(0,c.default)(u.default.mark(function e(t){var r,n,i=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._handleToPouch(t),r=null,e.prev=2,e.next=5,this.database.lockedRun(function(){return i.pouch.put(t)});case 5:r=e.sent,e.next=21;break;case 8:if(e.prev=8,e.t0=e.catch(2),!o||409!==e.t0.status){e.next=20;break}return e.next=13,this.database.lockedRun(function(){return i.pouch.get(t._id)});case 13:return n=e.sent,t._rev=n._rev,e.next=17,this.database.lockedRun(function(){return i.pouch.put(t)});case 17:r=e.sent,e.next=21;break;case 20:throw e.t0;case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_pouchGet",value:function(e){var t=this;return this.pouch.get(e).then(function(e){return t._handleFromPouch(e)})}},{key:"_pouchFind",value:function(){var e=(0,c.default)(u.default.mark(function e(t,r){var n,i,o,s=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.keyCompress(),r&&(n.limit=r),e.next=4,this.database.lockedRun(function(){return s.pouch.find(n)});case 4:return i=e.sent,o=i.docs.map(function(e){return s._handleFromPouch(e,a)}),e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_assignMethodsToDocument",value:function(e){Object.entries(this._methods).forEach(function(t){var r=t[0],n=t[1];e.__defineGetter__(r,function(){return n.bind(e)})})}},{key:"_createDocument",value:function(){var e=(0,c.default)(u.default.mark(function e(t){var r,n,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t[this.schema.primaryPath],!(n=this._docCache.get(r))){e.next=4;break}return e.abrupt("return",n);case 4:return i=b.default.create(this,t),this._assignMethodsToDocument(i),this._docCache.set(r,i),this._runHooksSync("post","create",i),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_createDocuments",value:function(){var e=(0,c.default)(u.default.mark(function e(t){var r=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(e){return r._createDocument(e)})));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"$emit",value:function(e){return this.database.$emit(e)}},{key:"insert",value:function(){var e=(0,c.default)(u.default.mark(function e(t){var r,n,i,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!b.default.isInstanceOf(t)){e.next=6;break}if(r=t,t._isTemporary){e.next=5;break}throw new Error("You cannot insert an existing document");case 5:t=t.toJSON();case 6:if(t=(0,h.default)(t),!(t=this.schema.fillObjectWithDefaults(t))._id){e.next=10;break}throw new Error("do not provide ._id, it will be generated");case 10:return"_id"!==this.schema.primaryPath||t._id||(t._id=p.generateId()),e.next=13,this._runHooks("pre","insert",t);case 13:return this.schema.validate(t),e.next=16,this._pouchPut(t);case 16:if(n=e.sent,t[this.schema.primaryPath]=n.id,t._rev=n.rev,i=r,!r){e.next=24;break}r._data=t,e.next=27;break;case 24:return e.next=26,this._createDocument(t);case 26:i=e.sent;case 27:return e.next=29,this._runHooks("post","insert",i);case 29:return o=v.default.create("INSERT",this.database,this,i,t),this.$emit(o),e.abrupt("return",i);case 32:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"upsert",value:function(){var e=(0,c.default)(u.default.mark(function e(t){var r,n,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,h.default)(t),r=t[this.schema.primaryPath]){e.next=4;break}throw _.default.newRxError("RxCollection.upsert() does not work without primary",{primaryPath:this.schema.primaryPath,data:t});case 4:return e.next=6,this.findOne(r).exec();case 6:if(!(n=e.sent)){e.next=15;break}return t._rev=n._rev,n._data=t,e.next=12,n.save();case 12:return e.abrupt("return",n);case 15:return e.next=17,this.insert(t);case 17:return i=e.sent,e.abrupt("return",i);case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_atomicUpsertEnsureRxDocumentExists",value:function(e,t){var r=this;return this.findOne(e).exec().then(function(e){if(!e)return r.insert(t)})}},{key:"atomicUpsert",value:function(e){var t=this,r=(e=(0,h.default)(e))[this.schema.primaryPath];if(!r)throw new Error("RxCollection.atomicUpsert() does not work without primary");return this._atomicUpsertLocks[r]||(this._atomicUpsertLocks[r]=this._atomicUpsertEnsureRxDocumentExists(r,e)),this._atomicUpsertLocks[r].then(function(){return t.findOne(r).exec()}).then(function(t){return t.atomicUpdate(function(t){e._rev=t._rev,t._data=e})})}},{key:"find",value:function(e){if("string"==typeof e)throw new Error("if you want to search by _id, use .findOne(_id)");return y.default.create("find",e,this)}},{key:"findOne",value:function(e){var t=void 0;if(t="string"==typeof e?y.default.create("findOne",{_id:e},this):y.default.create("findOne",e,this),"number"==typeof e||Array.isArray(e))throw new TypeError(".findOne() needs a queryObject or string");return t}},{key:"dump",value:function(){throw _.default.pluginMissing("json-dump")}},{key:"importDump",value:function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw _.default.pluginMissing("json-dump");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"watchForChanges",value:function(){throw _.default.pluginMissing("replication")}},{key:"sync",value:function(){throw _.default.pluginMissing("replication")}},{key:"inMemory",value:function(){throw _.default.pluginMissing("in-memory")}},{key:"addHook",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!=typeof r)throw new TypeError(t+"-hook must be a function");if(!C.includes(e))throw new TypeError("hooks-when not known");if(!A.includes(t))throw new Error("hook-name "+t+"not known");if("post"===e&&"create"===t&&!0===n)throw new Error(".postCreate-hooks cannot be async");var i=n?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][i].push(r)}},{key:"getHooks",value:function(e,t){try{return this.hooks[t][e]}catch(e){return{series:[],parallel:[]}}}},{key:"_runHooks",value:function(){var e=(0,c.default)(u.default.mark(function e(t,r,n){var i,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getHooks(t,r)){e.next=3;break}return e.abrupt("return");case 3:o=0;case 4:if(!(o<i.series.length)){e.next=10;break}return e.next=7,i.series[o](n);case 7:o++,e.next=4;break;case 10:return e.next=12,Promise.all(i.parallel.map(function(e){return e(n)}));case 12:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_runHooksSync",value:function(e,t,r){var n=this.getHooks(e,t);n&&n.series.forEach(function(e){return e(r)})}},{key:"newDocument",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.schema.fillObjectWithDefaults(e);var t=b.default.create(this,e);return t._isTemporary=!0,this._assignMethodsToDocument(t),this._runHooksSync("post","create",t),t}},{key:"destroy",value:function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:this._onDestroyCall&&this._onDestroyCall(),this._subs.forEach(function(e){return e.unsubscribe()}),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this._queryCache.destroy(),this._repStates.forEach(function(e){return e.cancel()}),delete this.database.collections[this.name],this.destroyed=!0;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){return this.database.removeCollection(this.name)}},{key:"_keyCompressor",get:function(){return this.__keyCompressor||(this.__keyCompressor=j.default.createKeyCompressor(this.schema)),this.__keyCompressor}},{key:"$",get:function(){return this._observable$}},{key:"onDestroy",get:function(){var e=this;return this._onDestroy||(this._onDestroy=new Promise(function(t){return e._onDestroyCall=t})),this._onDestroy}}]),e}(),M=function(e,t){if("object"!==(void 0===t?"undefined":(0,a.default)(t))||Array.isArray(t))throw new TypeError("migrationStrategies must be an object");if(e.previousVersions.length!==Object.keys(t).length)throw _.default.newRxError("A migrationStrategy is missing or too much",{have:Object.keys(t),should:e.previousVersions});return e.previousVersions.map(function(e){return{v:e,s:t[e+1+""]}}).filter(function(e){return"function"!=typeof e.s}).forEach(function(e){throw new TypeError("migrationStrategy(v"+e.v+") must be a function; is : "+(void 0===e?"undefined":(0,a.default)(e)))}),!0},R=null,I=function(e){Object.entries(e).forEach(function(e){if("string"!=typeof e[0])throw new TypeError("given static method-name ("+e[0]+") is not a string");if(e[0].startsWith("_"))throw new TypeError("static method-names cannot start with underscore _ ("+e[0]+")");if("function"!=typeof e[1])throw new TypeError("given static method ("+e[0]+") is not a function but "+(0,a.default)(e[1]));if(i().includes(e[0])||b.default.properties().includes(e[0]))throw new Error("statics-name not allowed: "+e[0])})};r.default={create:d,properties:i,isInstanceOf:o,RxCollection:P}},{"./change-event-buffer":2,"./crypter":4,"./data-migrator":5,"./doc-cache":6,"./hooks":7,"./overwritable":11,"./query-cache":26,"./rx-change-event":29,"./rx-database":31,"./rx-document":32,"./rx-error":33,"./rx-query":34,"./rx-schema":35,"./util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/toConsumableArray":55,"babel-runtime/helpers/typeof":56,"babel-runtime/regenerator":57,clone:63}],31:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){if(!P){var e=new A,t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));P=[].concat((0,c.default)(t),(0,c.default)(r))}return P}function o(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o={location:e+"-rxdb-"+n+"-"+r,adapter:g.adapterObject(t),settings:i};return(0,O.runPluginHooks)("preCreatePouchDb",o),new m.default(o.location,o.adapter,o.settings)}function s(e,t){return o(e,t,"_admin",0,{auto_compaction:!1,revs_limit:1})}function a(e,t){return o(e,t,"_collections",0,{auto_compaction:!1,revs_limit:1})}function u(e){return e instanceof A}Object.defineProperty(r,"__esModule",{value:!0}),r.RxSchema=r.checkAdapter=r.removeDatabase=r.create=r.RxDatabase=void 0;var c=n(e("babel-runtime/helpers/toConsumableArray")),f=n(e("babel-runtime/regenerator")),l=n(e("babel-runtime/helpers/asyncToGenerator")),d=n(e("babel-runtime/helpers/classCallCheck")),h=n(e("babel-runtime/helpers/createClass")),p=r.create=function(){var e=(0,l.default)(f.default.mark(function e(t){var r,n=t.name,i=t.adapter,o=t.password,s=t.multiInstance,a=void 0===s||s,u=t.ignoreDuplicate,c=void 0!==u&&u;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.validateCouchDBString(n),"string"!=typeof i){e.next=6;break}if(m.default.adapters&&m.default.adapters[i]){e.next=4;break}throw new Error("Adapter "+i+" not added.\n                 Use RxDB.plugin(require('pouchdb-adapter-"+i+"');");case 4:e.next=9;break;case 6:if(g.isLevelDown(i),m.default.adapters&&m.default.adapters.leveldb){e.next=9;break}throw new Error("To use leveldown-adapters, you have to add the leveldb-plugin.\n                 Use RxDB.plugin(require('pouchdb-adapter-leveldb'));");case 9:return o&&E.default.validatePassword(o),c||function(e,t){if(!C[e])return!1;var r=!1;if(C[e].forEach(function(e){e===t&&(r=!0)}),r)throw w.default.newRxError("RxDatabase.create(): A RxDatabase with the same name and adapter already exists.\nMake sure to use this combination only once or set ignoreDuplicate to true if you do this intentional",{name:e,adapter:t,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(n,i),C[n]||(C[n]=[]),C[n].push(i),r=new A(n,i,o,a),e.next=16,r.prepare();case 16:return(0,O.runPluginHooks)("createRxDatabase",r),e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),b=r.removeDatabase=function(){var e=(0,l.default)(f.default.mark(function e(t,r){var n,i,u,c;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s(t,r),i=o(t,r,"_socket",0),u=a(t,r),e.next=5,u.allDocs({include_docs:!0});case 5:return c=e.sent,Promise.all(c.rows.map(function(e){return e.id}).map(function(e){var n=e.split("-"),i=n[0],s=parseInt(n[1],10);return o(t,r,i,s).destroy()})),e.next=9,Promise.all([u.destroy(),n.destroy(),i.destroy()]);case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),y=r.checkAdapter=function(){var e=(0,l.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.checkAdapter(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.properties=i,r.isInstanceOf=u;var v=n(e("random-token")),_=n(e("custom-idle-queue")),m=n(e("./pouch-db")),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),w=n(e("./rx-error")),x=n(e("./rx-collection")),k=n(e("./rx-schema")),j=n(e("./rx-change-event")),S=n(e("./socket")),E=n(e("./overwritable")),O=e("./hooks"),C={},A=r.RxDatabase=function(){function e(t,r,n,i){(0,d.default)(this,e),this.name=t,this.adapter=r,this.password=n,this.multiInstance=i,this.idleQueue=new _.default,this.token=(0,v.default)(10),this._subs=[],this.destroyed=!1,this.collections={},this.subject=new g.Rx.Subject,this.observable$=this.subject.asObservable().filter(function(e){return j.default.isInstanceOf(e)})}return(0,h.default)(e,[{key:"prepare",value:function(){var e=(0,l.default)(f.default.mark(function e(){var t,r=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.password){e.next=22;break}return e.next=3,this.lockedRun(function(){return r._adminPouch.info()});case 3:return t=null,e.prev=4,e.next=7,this.lockedRun(function(){return r._adminPouch.get("_local/pwHash")});case 7:t=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:if(t){e.next=20;break}return e.prev=13,e.next=16,this.lockedRun(function(){return r._adminPouch.put({_id:"_local/pwHash",value:g.hash(r.password)})});case 16:e.next=20;break;case 18:e.prev=18,e.t1=e.catch(13);case 20:if(!t||!this.password||g.hash(this.password)===t.value){e.next=22;break}throw new Error("another instance on this adapter has a different password");case 22:if(!this.multiInstance){e.next=27;break}return e.next=25,S.default.create(this);case 25:this.socket=e.sent,this._subs.push(this.socket.messages$.subscribe(function(e){return r.$emit(e)}));case 27:case"end":return e.stop()}},e,this,[[4,10],[13,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"_spawnPouchDB",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(this.name,this.adapter,e,t,r)}},{key:"waitForLeadership",value:function(){var e=(0,l.default)(f.default.mark(function e(){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.multiInstance){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",this.leaderElector.waitForLeadership());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"writeToSocket",value:function(e){return this.multiInstance&&!e.isIntern()&&this.socket?this.socket.write(e).then(function(){return!0}):Promise.resolve(!1)}},{key:"$emit",value:function(e){e&&(this.subject.next(e),e.data.it===this.token&&this.writeToSocket(e))}},{key:"_collectionNamePrimary",value:function(e,t){return e+"-"+t.version}},{key:"removeCollectionDoc",value:function(e,t){var r=this,n=this._collectionNamePrimary(e,t);return this._collectionsPouch.get(n).then(function(e){return r.lockedRun(function(){return r._collectionsPouch.remove(e)})})}},{key:"_removeAllOfCollection",value:function(){var e=(0,l.default)(f.default.mark(function e(t){var r,n,i=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lockedRun(function(){return i._collectionsPouch.allDocs({include_docs:!0})});case 2:return r=e.sent,n=r.rows.map(function(e){return e.doc}).filter(function(e){return e._id.split("-")[0]===t}),e.next=6,Promise.all(n.map(function(e){return i.lockedRun(function(){return i._collectionsPouch.remove(e)})}));case 6:return e.abrupt("return",n.map(function(e){return e.version}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"collection",value:function(){var e=(0,l.default)(f.default.mark(function e(t){var r,n,o,s,a,u=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.database=this,"_"!==t.name.charAt(0)){e.next=3;break}throw new Error("collection("+t.name+"): collection-names cannot start with underscore _");case 3:if(!this.collections[t.name]){e.next=5;break}throw new Error("collection("+t.name+") already exists. use myDatabase."+t.name+" to get it");case 5:if(t.schema){e.next=7;break}throw new Error("collection("+t.name+"): schema is missing");case 7:if(k.default.isInstanceOf(t.schema)||(t.schema=k.default.create(t.schema)),r=this._collectionNamePrimary(t.name,t.schema),!i().includes(t.name)){e.next=11;break}throw new Error("Collection-name "+t.name+" not allowed");case 11:return n=t.schema.hash,o=null,e.prev=13,e.next=16,this.lockedRun(function(){return u._collectionsPouch.get(r)});case 16:o=e.sent,e.next=21;break;case 19:e.prev=19,e.t0=e.catch(13);case 21:if(!o||o.schemaHash===n){e.next=23;break}throw new Error("collection("+t.name+"): another instance created this collection with a different schema");case 23:return e.next=25,x.default.create(t);case 25:if(s=e.sent,!(Object.keys(s.schema.encryptedPaths).length>0)||this.password){e.next=28;break}throw new Error("collection("+t.name+"): schema encrypted but no password given");case 28:if(o){e.next=36;break}return e.prev=29,e.next=32,this.lockedRun(function(){return u._collectionsPouch.put({_id:r,schemaHash:n,schema:s.schema.normalized,version:s.schema.version})});case 32:e.next=36;break;case 34:e.prev=34,e.t1=e.catch(29);case 36:return a=j.default.create("RxDatabase.collection",this),a.data.v=s.name,a.data.col="_collections",this.$emit(a),this.collections[t.name]=s,this.__defineGetter__(t.name,function(){return u.collections[t.name]}),e.abrupt("return",s);case 43:case"end":return e.stop()}},e,this,[[13,19],[29,34]])}));return function(t){return e.apply(this,arguments)}}()},{key:"removeCollection",value:function(){var e=(0,l.default)(f.default.mark(function e(t){var r,n,i=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.collections[t]){e.next=3;break}return e.next=3,this.collections[t].destroy();case 3:return e.next=5,this._removeAllOfCollection(t);case 5:return r=e.sent,n=r.map(function(e){return i._spawnPouchDB(t,e)}),e.abrupt("return",Promise.all(n.map(function(e){return i.lockedRun(function(){return e.destroy()})})));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"lockedRun",value:function(e){return this.idleQueue.wrapCall(e)}},{key:"requestIdlePromise",value:function(){return this.idleQueue.requestIdlePromise()}},{key:"dump",value:function(){throw w.default.pluginMissing("json-dump")}},{key:"importDump",value:function(){throw w.default.pluginMissing("json-dump")}},{key:"destroy",value:function(){var e=(0,l.default)(f.default.mark(function e(){var t=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:if(this.destroyed=!0,e.t0=this.socket,!e.t0){e.next=7;break}return e.next=7,this.socket.destroy();case 7:if(!this._leaderElector){e.next=10;break}return e.next=10,this._leaderElector.destroy();case 10:return this._subs.map(function(e){return e.unsubscribe()}),e.next=13,Promise.all(Object.keys(this.collections).map(function(e){return t.collections[e]}).map(function(e){return e.destroy()}));case 13:!function(e,t){if(C[e]){var r=C[e].indexOf(t);C[e].splice(r,1)}}(this.name,this.adapter);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=this;return this.destroy().then(function(){return b(e.name,e.adapter)})}},{key:"_adminPouch",get:function(){return this.__adminPouch||(this.__adminPouch=s(this.name,this.adapter)),this.__adminPouch}},{key:"_collectionsPouch",get:function(){return this.__collectionsPouch||(this.__collectionsPouch=a(this.name,this.adapter)),this.__collectionsPouch}},{key:"leaderElector",get:function(){return this._leaderElector||(this._leaderElector=E.default.createLeaderElector(this)),this._leaderElector}},{key:"isLeader",get:function(){return!this.multiInstance||this.leaderElector.isLeader}},{key:"$",get:function(){return this.observable$}}]),e}(),P=null;r.RxSchema=k.default,r.default={create:p,removeDatabase:b,checkAdapter:y,isInstanceOf:u,RxDatabase:A,RxSchema:k.default}},{"./hooks":7,"./overwritable":11,"./pouch-db":25,"./rx-change-event":29,"./rx-collection":30,"./rx-error":33,"./rx-schema":35,"./socket":36,"./util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/toConsumableArray":55,"babel-runtime/regenerator":57,"custom-idle-queue":492,"random-token":612}],32:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(t[e.schema.primaryPath]&&t[e.schema.primaryPath].startsWith("_design"))return null;var r=new w(e,t);return r.prepare(),(0,g.runPluginHooks)("createRxDocument",r),r}function o(e,t){return t.map(function(t){return i(e,t)}).filter(function(e){return null!==e})}function s(){if(!x){var e=new w,t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));x=[].concat((0,u.default)(t),(0,u.default)(r),["deleted","synced"])}return x}function a(e){return e instanceof w}Object.defineProperty(r,"__esModule",{value:!0}),r.RxDocument=void 0;var u=n(e("babel-runtime/helpers/toConsumableArray")),c=n(e("babel-runtime/regenerator")),f=n(e("babel-runtime/helpers/asyncToGenerator")),l=n(e("babel-runtime/helpers/typeof")),d=n(e("babel-runtime/helpers/classCallCheck")),h=n(e("babel-runtime/helpers/createClass"));r.create=i,r.createAr=o,r.properties=s,r.isInstanceOf=a;var p=n(e("clone")),b=n(e("object-path")),y=n(e("deep-equal")),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),_=n(e("./rx-change-event")),m=n(e("./rx-error")),g=e("./hooks"),w=r.RxDocument=function(){function e(t,r){(0,d.default)(this,e),this.collection=t,this._isTemporary=!1,this._dataSync$=new v.Rx.BehaviorSubject((0,p.default)(r)),this._data=(0,p.default)(r),this._atomicUpdates=[],this._atomicUpdatesResolveFunctions=new WeakMap,this._synced$=new v.Rx.BehaviorSubject(!0),this._deleted$=new v.Rx.BehaviorSubject(!1)}return(0,h.default)(e,[{key:"prepare",value:function(){this._defineGetterSetter(this,"")}},{key:"resync",value:function(){var e=this._dataSync$.getValue();this._synced$.getValue()&&(0,y.default)(e,this._data)||(this._data=(0,p.default)(this._dataSync$.getValue()),this._synced$.next(!0))}},{key:"_handleChangeEvent",value:function(e){if(e.data.doc===this.primary)switch(e.data.op){case"INSERT":break;case"UPDATE":var t=(0,p.default)(e.data.v),r=this._dataSync$.getValue(),n=this._data;(0,y.default)(r,n)?(this._data=t,!0!==this._synced$.getValue()&&this._synced$.next(!0)):(!1!==this._synced$.getValue()&&this._synced$.next(!1),this._data._rev=t._rev),this._dataSync$.next((0,p.default)(t));break;case"REMOVE":this.collection._docCache.delete(this.primary),this._deleted$.next(!0)}}},{key:"$emit",value:function(e){return this.collection.$emit(e)}},{key:"get$",value:function(e){if(e.includes(".item."))throw new Error("cannot get observable of in-array fields because order cannot be guessed: "+e);if(e===this.primaryPath)throw m.default.newRxError("cannot observe primary path");if(this.collection.schema.finalFields.includes(e))throw m.default.newRxError("final fields cannot be observed",{path:e});if(!this.collection.schema.getSchemaByObjectPath(e))throw new Error("cannot observe a non-existed field ("+e+")");return this._dataSync$.map(function(t){return b.default.get(t,e)}).distinctUntilChanged().asObservable()}},{key:"populate",value:function(e){var t=this.collection.schema.getSchemaByObjectPath(e),r=this.get(e);if(!t)throw new Error("cannot populate a non-existed field ("+e+")");if(!t.ref)throw new Error("cannot populate because path has no ref ("+e+")");var n=this.collection.database.collections[t.ref];if(!n)throw new Error("ref-collection ("+t.ref+") not in database");return"array"===t.type?Promise.all(r.map(function(e){return n.findOne(e).exec()})):n.findOne(r).exec()}},{key:"get",value:function(e){if(this._data){if("string"!=typeof e)throw new TypeError("RxDocument.get(): objPath must be a string");var t=b.default.get(this._data,e);return"object"!==(void 0===(t=(0,p.default)(t))?"undefined":(0,l.default)(t))||Array.isArray(t)?t:(this._defineGetterSetter(t,e),t)}}},{key:"_defineGetterSetter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null!==e){var n=this.collection.schema.getSchemaByObjectPath(r);n.properties&&(n=n.properties),Object.keys(n).forEach(function(n){var i=v.trimDots(r+"."+n);e.__defineGetter__(n,function(){return t.get(i)}),Object.defineProperty(e,n+"$",{get:function(){return t.get$(i)},enumerable:!1,configurable:!1}),Object.defineProperty(e,n+"_",{get:function(){return t.populate(i)},enumerable:!1,configurable:!1}),e.__defineSetter__(n,function(e){return t.set(i,e)})})}}},{key:"toJSON",value:function(){return(0,p.default)(this._data)}},{key:"set",value:function(e,t){if("string"!=typeof e)throw new TypeError("RxDocument.set(): objPath must be a string");if(!this._isTemporary&&e===this.primaryPath)throw new Error("RxDocument.set(): primary-key ("+this.primaryPath+")\n                cannot be modified");if(!this._isTemporary&&this.collection.schema.finalFields.includes(e))throw m.default.newRxError("final fields cannot be modified",{path:e,value:t});if(!Object.is(this.get(e),t)){var r=e.split(".");r.pop();var n=r.join(".");if(void 0===b.default.get(this._data,n))throw new Error("cannot set childpath "+e+"\n                 when rootPath "+n+" not selected");return this._isTemporary||this.collection.schema.validate(t,e),b.default.set(this._data,e,t),this}}},{key:"update",value:function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw m.default.pluginMissing("update");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"putAttachment",value:function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw m.default.pluginMissing("attachments");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAttachment",value:function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw m.default.pluginMissing("attachments");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"allAttachments",value:function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw m.default.pluginMissing("attachments");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"atomicUpdate",value:function(){var e=(0,f.default)(c.default.mark(function e(t){var r,n=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._atomicUpdates.push(t),r=new Promise(function(e,r){n._atomicUpdatesResolveFunctions.set(t,{resolve:e,reject:r})}),this._runAtomicUpdates(),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_runAtomicUpdates",value:function(){var e=(0,f.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.__runAtomicUpdates_running){e.next=4;break}return e.abrupt("return");case 4:this.__runAtomicUpdates_running=!0;case 5:if(0!==this._atomicUpdates.length){e.next=8;break}return this.__runAtomicUpdates_running=!1,e.abrupt("return");case 8:return t=this._atomicUpdates.shift(),e.prev=10,e.next=13,t(this);case 13:return e.next=15,this.save();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),this._atomicUpdatesResolveFunctions.get(t).reject(e.t0);case 20:this._atomicUpdatesResolveFunctions.get(t).resolve(this),this.__runAtomicUpdates_running=!1,this._runAtomicUpdates();case 23:case"end":return e.stop()}},e,this,[[10,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,f.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isTemporary){e.next=2;break}return e.abrupt("return",this._saveTemporary());case 2:if(!this._deleted$.getValue()){e.next=4;break}throw new Error("RxDocument.save(): cant save deleted document");case 4:if(!(0,y.default)(this._data,this._dataSync$.getValue())){e.next=7;break}return this._synced$.next(!0),e.abrupt("return",!1);case 7:return e.next=9,this.collection._runHooks("pre","save",this);case 9:return this.collection.schema.validate(this._data),e.next=12,this.collection._pouchPut((0,p.default)(this._data));case 12:if((t=e.sent).ok){e.next=15;break}throw new Error("RxDocument.save(): error "+JSON.stringify(t));case 15:return r=(0,p.default)(this._data),r._rev=t.rev,this._data=r,e.next=20,this.collection._runHooks("post","save",this);case 20:return this._synced$.next(!0),this._dataSync$.next((0,p.default)(r)),n=_.default.create("UPDATE",this.collection.database,this.collection,this,r),this.$emit(n),e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_saveTemporary",value:function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collection.insert(this);case 2:return this._isTemporary=!1,this.collection._docCache.set(this.primary,this),this._synced$.next(!0),this._dataSync$.next((0,p.default)(this._data)),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,f.default)(c.default.mark(function e(){var t=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.deleted){e.next=2;break}throw new Error("RxDocument.remove(): Document is already deleted");case 2:return e.next=4,this.collection._runHooks("pre","remove",this);case 4:return e.next=6,this.collection.database.lockedRun(function(){return t.collection.pouch.remove(t.primary,t._data._rev)});case 6:return this.$emit(_.default.create("REMOVE",this.collection.database,this.collection,this,this._data)),e.next=9,this.collection._runHooks("post","remove",this);case 9:return e.next=11,v.promiseWait(0);case 11:return e.abrupt("return");case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){throw new Error("RxDocument.destroy() does not exist")}},{key:"primaryPath",get:function(){return this.collection.schema.primaryPath}},{key:"primary",get:function(){return this._data[this.primaryPath]}},{key:"revision",get:function(){return this._data._rev}},{key:"deleted$",get:function(){return this._deleted$.asObservable()}},{key:"deleted",get:function(){return this._deleted$.getValue()}},{key:"synced$",get:function(){return this._synced$.asObservable().distinctUntilChanged()}},{key:"synced",get:function(){return this._synced$.getValue()}},{key:"$",get:function(){return this._dataSync$.asObservable()}},{key:"allAttachments$",get:function(){throw m.default.pluginMissing("attachments")}}]),e}(),x=void 0;r.default={create:i,createAr:o,properties:s,RxDocument:w,isInstanceOf:a}},{"./hooks":7,"./rx-change-event":29,"./rx-error":33,"./util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/toConsumableArray":55,"babel-runtime/helpers/typeof":56,"babel-runtime/regenerator":57,clone:63,"deep-equal":496,"object-path":567}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new l("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n          - es5-require:\n            RxDB.plugin(require('rxdb/plugins/"+e+"'))\n          - es6-import:\n            import "+c.ucfirst(e)+"Plugin from 'rxdb/plugins/"+e+"';\n            RxDB.plugin("+c.ucfirst(e)+"Plugin);\n        ",{pluginKey:e})}Object.defineProperty(r,"__esModule",{value:!0}),r.newRxError=r.RxError=void 0;var o=n(e("babel-runtime/helpers/classCallCheck")),s=n(e("babel-runtime/helpers/createClass")),a=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/inherits"));r.pluginMissing=i;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),f=function(e,t){return"RxError:\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length?t:(t+="Given parameters: {\n",t+=Object.keys(e).map(function(t){var r="[object Object]";try{r=JSON.stringify(e[t],null,2)}catch(e){}return t+":"+r}).join("\n"),t+="}")}(t)},l=r.RxError=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t);var n=f(e,r),i=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.message=n,i.parameters=r,i.rxdb=!0,i}return(0,u.default)(t,e),(0,s.default)(t,[{key:"toString",value:function(){return this.message}},{key:"name",get:function(){return"RxError"}}]),t}(Error),d=r.newRxError=function(e,t){return new l(e,t)};r.default={newRxError:d,pluginMissing:i}},{"./util":37,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/inherits":53,"babel-runtime/helpers/possibleConstructorReturn":54}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){if(t&&"object"!==(void 0===t?"undefined":(0,s.default)(t)))throw new TypeError("query must be an object");if(Array.isArray(t))throw new TypeError("query cannot be an array");var n=new g(e,t,r);return x||(x=!0,w(Object.getPrototypeOf(n),Object.getOwnPropertyNames(n.mquery.__proto__))),(0,v.runPluginHooks)("createRxQuery",n),n}function o(e){return e instanceof g}Object.defineProperty(r,"__esModule",{value:!0}),r.RxQuery=void 0;var s=n(e("babel-runtime/helpers/typeof")),a=n(e("babel-runtime/regenerator")),u=n(e("babel-runtime/helpers/asyncToGenerator")),c=n(e("babel-runtime/helpers/defineProperty")),f=n(e("babel-runtime/helpers/classCallCheck")),l=n(e("babel-runtime/helpers/createClass"));r.create=i,r.isInstanceOf=o;var d=n(e("deep-equal")),h=n(e("./mquery/mquery")),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),b=n(e("./query-change-detector")),y=n(e("./rx-error")),v=e("./hooks"),_=0,m=function(){return++_},g=r.RxQuery=function(){function e(t,r,n){(0,f.default)(this,e),this.op=t,this.collection=n,this.id=m(),r||(r=this._defaultQuery()),this.mquery=new h.default(r),this._queryChangeDetector=b.default.create(this),this._resultsData=null,this._results$=new p.Rx.BehaviorSubject(null),this._latestChangeEvent=-1,this._runningPromise=Promise.resolve(!0),this._mustReExec=!0,this._execOverDatabaseCount=0}return(0,l.default)(e,[{key:"_defaultQuery",value:function(){return(0,c.default)({},this.collection.schema.primaryPath,{})}},{key:"_clone",value:function(){var t=new e(this.op,this._defaultQuery(),this.collection);return t.mquery=this.mquery.clone(),t}},{key:"_tunnelQueryCache",value:function(){return this.collection._queryCache.getByQuery(this)}},{key:"toString",value:function(){if(!this.stringRep){var e=p.sortObject({op:this.op,options:this.mquery.options,_conditions:this.mquery._conditions,_path:this.mquery._path,_fields:this.mquery._fields},!0);this.stringRep=JSON.stringify(e,p.stringifyFilter)}return this.stringRep}},{key:"_ensureEqual",value:function(){var e=(0,u.default)(a.default.mark(function e(){var t,r,n,i,o,s,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._latestChangeEvent>=this.collection._changeEventBuffer.counter)){e.next=2;break}return e.abrupt("return",!1);case 2:return t=!1,e.next=5,this._runningPromise;case 5:if(r=void 0,this._runningPromise=new Promise(function(e){r=e}),this._mustReExec){e.next=21;break}if(null!==(n=this.collection._changeEventBuffer.getFrom(this._latestChangeEvent+1))){e.next=13;break}this._mustReExec=!0,e.next=21;break;case 13:if(this._latestChangeEvent=this.collection._changeEventBuffer.counter,i=this.collection._changeEventBuffer.reduceByLastOfDoc(n),o=this._queryChangeDetector.runChangeDetection(i),!Array.isArray(o)&&o&&(this._mustReExec=!0),!Array.isArray(o)||(0,d.default)(o,this._resultsData)){e.next=21;break}return t=!0,e.next=21,this._setResultData(o);case 21:if(!this._mustReExec){e.next=31;break}return s=this.collection._changeEventBuffer.counter,e.next=25,this._execOverDatabase();case 25:if(u=e.sent,this._latestChangeEvent=s,(0,d.default)(u,this._resultsData)){e.next=31;break}return t=!0,e.next=31,this._setResultData(u);case 31:return r(!0),e.abrupt("return",t);case 33:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_setResultData",value:function(e){var t=this;return this._resultsData=e,this.collection._createDocuments(this._resultsData).then(function(e){return t._results$.next(e)})}},{key:"_execOverDatabase",value:function(){var e=this;this._execOverDatabaseCount++;var t=void 0;switch(this.op){case"find":t=this.collection._pouchFind(this);break;case"findOne":t=this.collection._pouchFind(this,1);break;default:throw new Error("RxQuery.exec(): op ("+this.op+") not known")}return t.then(function(t){return e._mustReExec=!1,t})}},{key:"toJSON",value:function(){if(this._toJSON)return this._toJSON;var e=this.collection.schema.primaryPath,t={selector:this.mquery._conditions},r=this.mquery._optionsForExec();if(r.sort){var n=[];Object.keys(r.sort).map(function(t){var i="asc";-1===r.sort[t]&&(i="desc");var o={};t===e&&(t="_id"),o[t]=i,n.push(o)}),t.sort=n}else t.sort=[{_id:"asc"}];if(r.limit){if("number"!=typeof r.limit)throw new TypeError("limit() must get a number");t.limit=r.limit}if(r.skip){if("number"!=typeof r.skip)throw new TypeError("skip() must get a number");t.skip=r.skip}return t.selector.language||(t.selector.language={}),t.selector.language.$ne="query",Object.entries(t.selector).filter(function(e){return"object"===(0,s.default)(e[1])}).filter(function(e){return null!==e[1]}).filter(function(e){return!Array.isArray(e[1])}).filter(function(e){return 0===Object.keys(e[1]).length}).forEach(function(e){return delete t.selector[e[0]]}),"_id"!==e&&t.selector[e]&&(t.selector._id=t.selector[e],delete t.selector[e]),this._toJSON=t,this._toJSON}},{key:"keyCompress",value:function(){return this.collection.schema.doKeyCompression()?(this._keyCompress||(this._keyCompress=this.collection._keyCompressor.compressQuery(this.toJSON())),this._keyCompress):this.toJSON()}},{key:"remove",value:function(){var e=void 0;return this.exec().then(function(t){return e=t,Array.isArray(t)?Promise.all(t.map(function(e){return e.remove()})):t.remove()}).then(function(){return e})}},{key:"update",value:function(){throw y.default.pluginMissing("update")}},{key:"exec",value:function(){return this.$.first().toPromise()}},{key:"regex",value:function(e){var t=this._clone();if(this.mquery._path===this.collection.schema.primaryPath)throw new Error("You cannot use .regex() on the primary field '"+this.mquery._path+"'");return t.mquery.regex(e),t._tunnelQueryCache()}},{key:"sort",value:function(e){var t=function(e){throw new Error("RxQuery.sort("+e+") does not work because "+e+" is not defined in the schema")},r=this._clone();if("object"!==(void 0===e?"undefined":(0,s.default)(e))){var n="-"===e.charAt(0)?e.substring(1):e;if(!r.mquery._conditions[n]){var i=r.collection.schema.getSchemaByObjectPath(n);i||t(n),"integer"===i.type?r.mquery.where(n).gt(-1e28):r.mquery.where(n).gt(null)}}else Object.keys(e).filter(function(e){return!r.mquery._conditions[e]||!r.mquery._conditions[e].$gt}).forEach(function(e){var n=r.collection.schema.getSchemaByObjectPath(e);n||t(e),"integer"===n.type?r.mquery.where(e).gt(-1e28):r.mquery.where(e).gt(null)});return r.mquery.sort(e),r._tunnelQueryCache()}},{key:"limit",value:function(e){if("findOne"===this.op)throw new Error(".limit() cannot be called on .findOne()");var t=this._clone();return t.mquery.limit(e),t._tunnelQueryCache()}},{key:"$",get:function(){var e=this;if(!this._$){var t=this._results$.mergeMap(function(t){return e._ensureEqual().then(function(e){return e?"WAITFORNEXTEMIT":t})}).filter(function(e){return"WAITFORNEXTEMIT"!==e}).asObservable(),r=this.collection.$.filter(function(e){return["INSERT","UPDATE","REMOVE"].includes(e.data.op)}).mergeMap((0,u.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._ensureEqual());case 1:case"end":return t.stop()}},t,e)}))).filter(function(){return!1});this._$=p.Rx.Observable.merge(t,r).filter(function(e){return null!==e}).map(function(t){return"findOne"!==e.op?t:0===t.length?null:t[0]})}return this._$}}]),e}(),w=function(e,t){t.filter(function(e){return!e.startsWith("_")}).filter(function(t){return!e[t]}).forEach(function(t){e[t]=function(e){var r=this._clone();return r.mquery[t](e),r._tunnelQueryCache()}})},x=!1;r.default={create:i,RxQuery:g,isInstanceOf:o}},{"./hooks":7,"./mquery/mquery":9,"./query-change-detector":27,"./rx-error":33,"./util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/defineProperty":52,"babel-runtime/helpers/typeof":56,"babel-runtime/regenerator":57,"deep-equal":496}],35:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,n){if("object"===(void 0===e?"undefined":(0,d.default)(e)))if(e.encrypted)r[n.substring(1)]=e;else for(var i in e){var o=n;"properties"!==i&&(o=o+"."+i),t(e[i],o)}}var r={};return t(e.properties,""),r}function o(e){var t=i(e);return Object.keys(t).length>0}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[];if(Object.entries(e).forEach(function(e){var n=e[0],i=e[1],o="properties"===n?t:v.trimDots(t+"."+n);if(i.index&&r.push([o]),"object"===(void 0===i?"undefined":(0,d.default)(i))&&!Array.isArray(i)){var a=s(i,o);r=r.concat(a)}}),""===t){var n=e.compoundIndexes||[];r=r.concat(n)}return r=r.filter(function(e,t,r){return r.indexOf(e)===t})}function a(e){var t=Object.keys(e.properties).filter(function(t){return e.properties[t].primary}).shift();return t||"_id"}function u(e){return Object.keys(e.properties).filter(function(t){return e.properties[t].final})}function c(e){return v.sortObject((0,y.default)(e))}function f(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(0,m.runPluginHooks)("preCreateRxSchema",e);var t=new g(w(e));return(0,m.runPluginHooks)("createRxSchema",t),t}function l(e){return e instanceof g}Object.defineProperty(r,"__esModule",{value:!0}),r.RxSchema=void 0;var d=n(e("babel-runtime/helpers/typeof")),h=n(e("babel-runtime/helpers/classCallCheck")),p=n(e("babel-runtime/helpers/createClass"));r.getEncryptedPaths=i,r.hasCrypt=o,r.getIndexes=s,r.getPrimary=a,r.getFinalFields=u,r.normalize=c,r.create=f,r.isInstanceOf=l;var b=n(e("object-path")),y=n(e("clone")),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),_=n(e("./rx-error")),m=e("./hooks"),g=r.RxSchema=function(){function e(t){var r=this;(0,h.default)(this,e),this.jsonID=t,this.compoundIndexes=this.jsonID.compoundIndexes,this.indexes=s(this.jsonID),this.indexes.forEach(function(e){e.filter(function(e){return!r.jsonID.required.includes(e)}).filter(function(e){return!e.includes(".")}).forEach(function(e){return r.jsonID.required.push(e)})}),this.primaryPath=a(this.jsonID),this.primaryPath&&this.jsonID.required.push(this.primaryPath),this.finalFields=u(this.jsonID),this.jsonID.required=this.jsonID.required.concat(this.finalFields).filter(function(e,t,r){return r.indexOf(e)===t}),this.jsonID.properties[this.primaryPath]||(this.jsonID.properties[this.primaryPath]={type:"string",minLength:1})}return(0,p.default)(e,[{key:"getSchemaByObjectPath",value:function(e){e="properties."+(e=e.replace(/\./g,".properties.")),e=v.trimDots(e);return b.default.get(this.jsonID,e)}},{key:"validate",value:function(){throw _.default.pluginMissing("validate")}},{key:"fillObjectWithDefaults",value:function(e){return e=(0,y.default)(e),Object.entries(this.defaultValues).filter(function(t){return!e.hasOwnProperty(t[0])}).forEach(function(t){e[t[0]]=t[1]}),e}},{key:"swapIdToPrimary",value:function(e){return"_id"===this.primaryPath||e[this.primaryPath]?e:(e[this.primaryPath]=e._id,delete e._id,e)}},{key:"swapPrimaryToId",value:function(e){var t=this;if("_id"===this.primaryPath)return e;var r={};return Object.entries(e).forEach(function(e){var n=e[0]===t.primaryPath?"_id":e[0];r[n]=e[1]}),r}},{key:"doKeyCompression",value:function(){return!this.jsonID.disableKeyCompression}},{key:"version",get:function(){return this.jsonID.version}},{key:"previousVersions",get:function(){var e=0;return new Array(this.version).fill(0).map(function(){return e++})}},{key:"crypt",get:function(){return this._crypt||(this._crypt=o(this.jsonID)),this._crypt}},{key:"normalized",get:function(){return this._normalized||(this._normalized=c(this.jsonID)),this._normalized}},{key:"topLevelFields",get:function(){return Object.keys(this.normalized.properties)}},{key:"defaultValues",get:function(){var e=this;return this._defaultValues||(this._defaultValues={},Object.entries(this.normalized.properties).filter(function(e){return e[1].default}).forEach(function(t){return e._defaultValues[t[0]]=t[1].default})),this._defaultValues}},{key:"encryptedPaths",get:function(){return this._encryptedPaths||(this._encryptedPaths=i(this.jsonID)),this._encryptedPaths}},{key:"hash",get:function(){return this._hash||(this._hash=v.hash(this.normalized)),this._hash}}]),e}(),w=function(e){return e=(0,y.default)(e),e.additionalProperties=!1,e.hasOwnProperty("disableKeyCompression")||(e.disableKeyCompression=!1),e.compoundIndexes=e.compoundIndexes||[],e.required=e.required||[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.version=e.version||0,e};r.default={RxSchema:g,getEncryptedPaths:i,hasCrypt:o,getIndexes:s,getPrimary:a,getFinalFields:u,normalize:c,create:f,isInstanceOf:l}},{"./hooks":7,"./rx-error":33,"./util":37,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/helpers/typeof":56,clone:63,"object-path":567}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new h(e).prepare()}Object.defineProperty(r,"__esModule",{value:!0}),r.PULL_TIME=r.EVENT_TTL=void 0;var o=n(e("babel-runtime/regenerator")),s=n(e("babel-runtime/helpers/asyncToGenerator")),a=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass"));r.create=i;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./util")),f=n(e("./rx-change-event")),l=n(e("./rx-broadcast-channel")),d=l.default.canIUse()?2500:200,h=function(){function e(t){(0,a.default)(this,e),this._destroyed=!1,this.database=t,this.token=t.token,this.subs=[],this.pullCount=0,this.pull_running=!1,this.lastPull=(new Date).getTime(),this.receivedEvents={},this.bc=l.default.create(this.database,"socket"),this.messages$=new c.Rx.Subject}return(0,u.default)(e,[{key:"prepare",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.pouch=this.database._spawnPouchDB("_socket",0,{auto_compaction:!1,revs_limit:1}),this.bc&&this.subs.push(this.bc.$.filter(function(e){return"pull"===e.type}).subscribe(function(){return t.pull()})),(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._destroyed){e.next=8;break}return e.next=3,c.promiseWait(d);case 3:if(!(t.messages$.observers.length>0)||t._destroyed){e.next=6;break}return e.next=6,t.pull();case 6:e.next=0;break;case 8:case"end":return e.stop()}},e,t)}))(),e.abrupt("return",this);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.toJSON(),delete r.db,r._id=""+c.fastUnsecureHash(r)+r.t,e.next=5,this.database.lockedRun(function(){return n.pouch.put(r)});case 5:if(e.t0=this.bc,!e.t0){e.next=9;break}return e.next=9,this.bc.write("pull");case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDocs",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.lockedRun(function(){return r.pouch.allDocs({include_docs:!0})});case 2:return t=e.sent,e.abrupt("return",t.rows.map(function(e){return e.doc}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteDoc",value:function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.prev=1,e.next=4,this.database.lockedRun(function(){return n.pouch.remove(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),r=!1;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_cleanupDocs",value:function(e){var t=this;e.forEach(function(e){t.database.requestIdlePromise().then(function(){t._destroyed||t.deleteDoc(e)})}),e.length>0&&this.database.requestIdlePromise().then(function(){t._destroyed||t.database.lockedRun(function(){return t.pouch.compact()})})}},{key:"pull",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,i,s=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPulling){e.next=3;break}return this._repullAfter=!0,e.abrupt("return",!1);case 3:return this.isPulling=!0,this.pullCount++,e.next=7,c.requestIdlePromise(2500);case 7:if(!this._destroyed){e.next=9;break}return e.abrupt("return");case 9:return t=this.lastPull-100,e.next=12,this.fetchDocs();case 12:if(r=e.sent,!this._destroyed){e.next=15;break}return e.abrupt("return");case 15:if(r.filter(function(e){return e.it!==s.token}).filter(function(e){return e.t>t}).sort(function(e,t){return e.t>t.t?1:-1}).map(function(e){return f.default.fromJSON(e)}).filter(function(e){return!s.receivedEvents[e.hash]&&(s.receivedEvents[e.hash]=(new Date).getTime())}).filter(function(e){return setTimeout(function(){return delete s.receivedEvents[e.hash]},15e3)}).forEach(function(e){return s.messages$.next(e)}),!this._destroyed){e.next=18;break}return e.abrupt("return");case 18:return n=(new Date).getTime()-5e3,i=r.filter(function(e){return e.t<n}),this._cleanupDocs(i),this.lastPull=(new Date).getTime(),this.isPulling=!1,this._repull&&(this._repull=!1,this.pull()),e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._destroyed=!0,this.subs.map(function(e){return e.unsubscribe()}),this.bc&&this.bc.destroy();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"$",get:function(){return this._$||(this._$=this.messages$.asObservable()),this._$}}]),e}();r.EVENT_TTL=5e3,r.PULL_TIME=d,r.default={create:i,EVENT_TTL:5e3,PULL_TIME:d}},{"./rx-broadcast-channel":28,"./rx-change-event":29,"./util":37,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/classCallCheck":50,"babel-runtime/helpers/createClass":51,"babel-runtime/regenerator":57}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;if(!t&&Array.isArray(e))return e.sort(function(e,t){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"object"===(void 0===e?"undefined":(0,o.default)(e))?1:-1}).map(function(e){return i(e)});if("object"===(void 0===e?"undefined":(0,o.default)(e))){if(e instanceof RegExp)return e;var r={};return Object.keys(e).sort(function(e,t){return e.localeCompare(t)}).forEach(function(t){r[t]=i(e[t])}),r}return e}Object.defineProperty(r,"__esModule",{value:!0}),r.requestIdlePromise=r.promiseWait=r.Rx=void 0;var o=n(e("babel-runtime/helpers/typeof")),s=n(e("babel-runtime/regenerator")),a=n(e("babel-runtime/helpers/asyncToGenerator"));r.promiseWait=function(){var e=(0,a.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r.requestIdlePromise=function(){var e=(0,a.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==("undefined"==typeof window?"undefined":(0,o.default)(window))||!window.requestIdleCallback){e.next=4;break}return e.abrupt("return",new Promise(function(e){return window.requestIdleCallback(e,{timeout:t})}));case 4:return e.abrupt("return",new Promise(function(e){return setTimeout(e,0)}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();r.isLevelDown=function(e){if(!e||"function"!=typeof e.super_||"function"!=typeof e.destroy)throw new Error("given leveldown is no valid adapter")},r.fastUnsecureHash=function(e){"string"!=typeof e&&(e=JSON.stringify(e));var t=0,r=void 0,n=void 0;if(0===e.length)return t;for(r=0,n=e.length;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t<0&&(t*=-1),t},r.hash=function(e){var t=e;return"string"!=typeof e&&(t=JSON.stringify(e)),h.default.hash(t)},r.generateId=function(){return(0,u.default)(10)+":"+(new Date).getTime()},r.nextTick=function(){return new Promise(function(e){return setTimeout(e,0)})},r.requestIdleCallbackIfAvailable=function(e){"object"===("undefined"==typeof window?"undefined":(0,o.default)(window))&&window.requestIdleCallback&&window.requestIdleCallback(e)},r.ucfirst=function(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)},r.numberToLetter=function(e){var t=[];do{var r=e%b;t.push(r),e=Math.floor(e/b)}while(e-- >0);return t.reverse().map(function(e){return p[e]}).join("")},r.trimDots=function(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e},r.validateCouchDBString=function(e){if("string"!=typeof e||0===e.length)throw new TypeError("given name is no string or empty");if(e.includes("/")||e.includes("\\"))return!0;var t=new RegExp("^[a-z][a-z0-9]*$");if(!e.match(t))throw new c.default.newRxError("collection- and database-names must match the regex\n            info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'\n            ",{regex:"^[a-z][a-z0-9]*$",givenName:e});return!0},r.sortObject=i,r.stringifyFilter=function(e,t){return t instanceof RegExp?t.toString():t},r.pouchReplicationFunction=function(e,t){var r=t.pull,n=void 0===r||r,i=t.push,o=void 0===i||i;if(n&&o)return e.sync.bind(e);if(!n&&o)return e.replicate.to.bind(e);if(n&&!o)return e.replicate.from.bind(e);if(!n&&!o)throw new Error("replication-direction must either be push or pull or both. But not none.")},r.randomCouchString=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",r="abcdefghijklmnopqrstuvwxyz",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},r.shuffleArray=function(e){return e.sort(function(){return Math.random()-.5})},r.adapterObject=function(e){var t={db:e};return"string"==typeof e&&(t={adapter:e}),t};var u=n(e("random-token")),c=n(e("./rx-error")),f=e("rxjs/Observable"),l=e("rxjs/Subject"),d=e("rxjs/BehaviorSubject");e("rxjs/add/observable/merge"),e("rxjs/add/observable/interval"),e("rxjs/add/observable/from"),e("rxjs/add/observable/fromEvent"),e("rxjs/add/observable/defer"),e("rxjs/add/operator/publishReplay"),e("rxjs/add/operator/publish"),e("rxjs/add/operator/timeout"),e("rxjs/add/operator/delay"),e("rxjs/add/operator/do"),e("rxjs/add/operator/map"),e("rxjs/add/operator/mergeMap"),e("rxjs/add/operator/filter"),e("rxjs/add/operator/first"),e("rxjs/add/operator/startWith"),e("rxjs/add/operator/toPromise"),e("rxjs/add/operator/distinctUntilChanged"),e("rxjs/add/operator/distinct");var h=n(e("spark-md5")),p=(r.Rx={Observable:f.Observable,Subject:l.Subject,BehaviorSubject:d.BehaviorSubject},"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ123456789"),b=p.length},{"./rx-error":33,"babel-runtime/helpers/asyncToGenerator":49,"babel-runtime/helpers/typeof":56,"babel-runtime/regenerator":57,"random-token":612,"rxjs/BehaviorSubject":631,"rxjs/Observable":634,"rxjs/Subject":639,"rxjs/add/observable/defer":643,"rxjs/add/observable/from":644,"rxjs/add/observable/fromEvent":645,"rxjs/add/observable/interval":646,"rxjs/add/observable/merge":647,"rxjs/add/operator/delay":648,"rxjs/add/operator/distinct":649,"rxjs/add/operator/distinctUntilChanged":650,"rxjs/add/operator/do":651,"rxjs/add/operator/filter":652,"rxjs/add/operator/first":653,"rxjs/add/operator/map":654,"rxjs/add/operator/mergeMap":655,"rxjs/add/operator/publish":656,"rxjs/add/operator/publishReplay":657,"rxjs/add/operator/startWith":658,"rxjs/add/operator/timeout":659,"rxjs/add/operator/toPromise":660,"spark-md5":743}],38:[function(e,t,r){"use strict";t.exports=function(e){return function(){var t=arguments.length;if(t){for(var r=[],n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}return e.call(this,[])}}},{}],39:[function(e,t,r){"use strict";t.exports=function(e){try{return{threw:!1,value:e.apply(this,function(e){var t=e.length>>>0,r=[],n=t-1;if(n<1)return r;r.length=n;for(var i=1;i<t;i+=1)r[i-1]=e[i];return r}(arguments))}}catch(e){return{threw:!0,value:e}}}},{}],40:[function(e,t,r){(function(t){"use strict";function r(e,t,r){e[t]||Object[n](e,t,{writable:!0,configurable:!0,value:r})}if(e("core-js/shim"),e("regenerator-runtime/runtime"),e("core-js/fn/regexp/escape"),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var n="defineProperty";r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&r(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":64,"core-js/shim":480,"regenerator-runtime/runtime":41}],41:[function(e,t,r){(function(e){!function(e){"use strict";function r(e,t,r,o){var s=t&&t.prototype instanceof i?t:i,a=Object.create(s.prototype),u=new l(o||[]);return a._invoke=function(e,t,r){var i=k;return function(o,s){if(i===S)throw new Error("Generator is already running");if(i===E){if("throw"===o)throw s;return h()}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=c(a,r);if(u){if(u===O)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===k)throw i=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=S;var f=n(e,t,r);if("normal"===f.type){if(i=r.done?E:j,f.arg===O)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(i=E,r.method="throw",r.arg=f.arg)}}}(e,r,u),a}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function s(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(t){function r(e,i,o,s){var a=n(t[e],t,i);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,o,s)},function(e){r("throw",e,o,s)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},s)}s(a.arg)}"object"==typeof e.process&&e.process.domain&&(r=e.process.domain.bind(r));var i;this._invoke=function(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return i=i?i.then(n,n):n()}}function c(e,t){var r=e.iterator[t.method];if(r===p){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=p,c(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=p),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function l(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(function(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)},this),this.reset(!0)}function d(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=p,t.done=!0,t};return n.next=n}}return{next:h}}function h(){return{value:p,done:!0}}var p,b=Object.prototype,y=b.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},_=v.iterator||"@@iterator",m=v.asyncIterator||"@@asyncIterator",g=v.toStringTag||"@@toStringTag",w="object"==typeof t,x=e.regeneratorRuntime;if(x)w&&(t.exports=x);else{(x=e.regeneratorRuntime=w?t.exports:{}).wrap=r;var k="suspendedStart",j="suspendedYield",S="executing",E="completed",O={},C={};C[_]=function(){return this};var A=Object.getPrototypeOf,P=A&&A(A(d([])));P&&P!==b&&y.call(P,_)&&(C=P);var M=s.prototype=i.prototype=Object.create(C);o.prototype=M.constructor=s,s.constructor=o,s[g]=o.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,g in e||(e[g]="GeneratorFunction")),e.prototype=Object.create(M),e},x.awrap=function(e){return{__await:e}},a(u.prototype),u.prototype[m]=function(){return this},x.AsyncIterator=u,x.async=function(e,t,n,i){var o=new u(r(e,t,n,i));return x.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},a(M),M[g]="Generator",M[_]=function(){return this},M.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},x.values=d,l.prototype={constructor:l,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=p)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=p),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=y.call(i,"catchLoc"),a=y.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;f(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=p),O}}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":65}],43:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":66}],44:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":67}],45:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":68}],46:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":69}],47:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":70}],48:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":71}],49:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/promise"));r.default=function(e){return function(){var t=e.apply(this,arguments);return new n.default(function(e,r){function i(o,s){try{var a=t[o](s),u=a.value}catch(e){return void r(e)}if(!a.done)return n.default.resolve(u).then(function(e){i("next",e)},function(e){i("throw",e)});e(u)}return i("next")})}}},{"../core-js/promise":46}],50:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],51:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/object/define-property"));r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(e,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":44}],52:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/object/define-property"));r.default=function(e,t,r){return t in e?(0,n.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{"../core-js/object/define-property":44}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=n(e("../core-js/object/set-prototype-of")),o=n(e("../core-js/object/create")),s=n(e("../helpers/typeof"));r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,s.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":43,"../core-js/object/set-prototype-of":45,"../helpers/typeof":56}],54:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../helpers/typeof"));r.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":56}],55:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/array/from"));r.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}},{"../core-js/array/from":42}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=n(e("../core-js/symbol/iterator")),o=n(e("../core-js/symbol")),s="function"==typeof o.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};r.default="function"==typeof o.default&&"symbol"===s(i.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":s(e)}},{"../core-js/symbol":47,"../core-js/symbol/iterator":48}],57:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":626}],58:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}r.byteLength=function(e){return 3*e.length/4-n(e)},r.toByteArray=function(e){var t,r,i,a,u,c=e.length;a=n(e),u=new s(3*c/4-a),r=a>0?c-4:c;var f=0;for(t=0;t<r;t+=4)i=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],u[f++]=i>>16&255,u[f++]=i>>8&255,u[f++]=255&i;return 2===a?(i=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,u[f++]=255&i):1===a&&(i=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,u[f++]=i>>8&255,u[f++]=255&i),u},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o="",s=[],a=0,u=r-n;a<u;a+=16383)s.push(function(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(function(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}(n));return o.join("")}(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],o+=i[t>>2],o+=i[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=i[t>>10],o+=i[t>>4&63],o+=i[t<<2&63],o+="="),s.push(o),s.join("")};for(var i=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=a.length;u<c;++u)i[u]=a[u],o[a.charCodeAt(u)]=u;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],59:[function(e,t,r){},{}],60:[function(e,t,r){(function(r){var n=e("is-array-buffer-x"),i="function"==typeof r.alloc&&"function"==typeof r.allocUnsafe&&"function"==typeof r.from;t.exports=function(e,t,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return n(e)?function(e,t,n){t>>>=0;var o=e.byteLength-t;if(o<0)throw new RangeError("'offset' is out of bounds");if(void 0===n)n=o;else if((n>>>=0)>o)throw new RangeError("'length' is out of bounds");return i?r.from(e.slice(t,t+n)):new r(new Uint8Array(e.slice(t,t+n)))}(e,t,o):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!r.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return i?r.from(e,t):new r(e,t)}(e,t):i?r.from(e):new r(e)}}).call(this,e("buffer").Buffer)},{buffer:61,"is-array-buffer-x":521}],61:[function(e,t,r){"use strict";function n(e){if(e>A)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(e)}return o(e,t,r)}function o(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return j(e)?function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=i.prototype,n}(e,t,r):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,t),o=n(r),s=o.write(e,t);s!==r&&(o=o.slice(0,s));return o}(e,t):function(e){if(i.isBuffer(e)){var t=0|c(e.length),r=n(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(S(e)||"length"in e)return"number"!=typeof e.length||E(e.length)?n(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function a(e){return s(e),n(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),r=n(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function c(e){if(e>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return 0|e}function f(e,t){if(i.isBuffer(e))return e.length;if(S(e)||j(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return w(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return x(e).length;default:if(n)return w(e).length;t=(""+t).toLowerCase(),n=!0}}function l(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,E(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:h(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):h(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function h(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(i){var f=-1;for(c=r;c<a;c++)if(o(e,c)===o(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*s}else-1!==f&&(c-=c-f),f=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var l=!0,d=0;d<u;d++)if(o(e,c+d)!==o(t,d)){l=!1;break}if(l)return c}return-1}function p(e,t,r,n){return k(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,f,l;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=e[i+1]))&&(l=(31&o)<<6|63&u)>127&&(s=l);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}(n)}function y(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function m(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,4),C.write(e,t,r,n,23,4),r+4}function g(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,8),C.write(e,t,r,n,52,8),r+8}function w(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function x(e){return O.toByteArray(function(e){if((e=e.trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function j(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function S(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function E(e){return e!=e}var O=e("base64-js"),C=e("ieee754");r.Buffer=i,r.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},r.INSPECT_MAX_BYTES=50;var A=2147483647;r.kMaxLength=A,(i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,r){return o(e,t,r)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,r){return function(e,t,r){return s(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}(e,t,r)},i.allocUnsafe=function(e){return a(e)},i.allocUnsafeSlow=function(e){return a(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)l(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)l(this,t,t+3),l(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)l(this,t,t+7),l(this,t+1,t+6),l(this,t+2,t+5),l(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return function(e,t,r){return 0===t&&r===e.length?O.fromByteArray(e):O.fromByteArray(e.slice(t,r))}(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,a=r-t,u=Math.min(s,a),c=this.slice(n,o),f=e.slice(t,r),l=0;l<u;++l)if(c[l]!==f[l]){s=c[l],a=f[l];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(E(a))return s;e[r+s]=a}return s}(this,e,t,r);case"utf8":case"utf-8":return function(e,t,r,n){return k(w(t,e.length-r),e,r,n)}(this,e,t,r);case"ascii":return p(this,e,t,r);case"latin1":case"binary":return function(e,t,r,n){return p(e,t,r,n)}(this,e,t,r);case"base64":return function(e,t,r,n){return k(x(t),e,r,n)}(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r,n){return k(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=i.prototype,n},i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},i.prototype.readUInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||y(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||y(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||y(e,4,this.length),C.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||y(e,4,this.length),C.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||y(e,8,this.length),C.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||y(e,8,this.length),C.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){v(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){v(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);v(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);v(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,r){return m(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return m(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return g(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return g(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=i.isBuffer(e)?e:new i(e,n),u=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var M=/[^+/0-9A-Za-z-_]/g},{"base64-js":58,ieee754:517}],62:[function(e,t,r){"use strict";t.exports={Array:[].constructor,Boolean:(!0).constructor,Number:(0).constructor,Object:{}.constructor,RegExp:/(?:)/.constructor,String:"".constructor}},{}],63:[function(e,t,r){(function(e){var r=function(){"use strict";function t(e,t){return null!=t&&e instanceof t}function r(n,u,c,f,l){function d(n,c){if(null===n)return null;if(0===c)return n;var y,v;if("object"!=typeof n)return n;if(t(n,o))y=new o;else if(t(n,s))y=new s;else if(t(n,a))y=new a(function(e,t){n.then(function(t){e(d(t,c-1))},function(e){t(d(e,c-1))})});else if(r.__isArray(n))y=[];else if(r.__isRegExp(n))y=new RegExp(n.source,i(n)),n.lastIndex&&(y.lastIndex=n.lastIndex);else if(r.__isDate(n))y=new Date(n.getTime());else{if(b&&e.isBuffer(n))return y=new e(n.length),n.copy(y),y;t(n,Error)?y=Object.create(n):void 0===f?(v=Object.getPrototypeOf(n),y=Object.create(v)):(y=Object.create(f),v=f)}if(u){var _=h.indexOf(n);if(-1!=_)return p[_];h.push(n),p.push(y)}t(n,o)&&n.forEach(function(e,t){var r=d(t,c-1),n=d(e,c-1);y.set(r,n)}),t(n,s)&&n.forEach(function(e){var t=d(e,c-1);y.add(t)});for(var m in n){var g;v&&(g=Object.getOwnPropertyDescriptor(v,m)),g&&null==g.set||(y[m]=d(n[m],c-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(n),m=0;m<w.length;m++){var x=w[m];(!(S=Object.getOwnPropertyDescriptor(n,x))||S.enumerable||l)&&(y[x]=d(n[x],c-1),S.enumerable||Object.defineProperty(y,x,{enumerable:!1}))}if(l)for(var k=Object.getOwnPropertyNames(n),m=0;m<k.length;m++){var j=k[m],S=Object.getOwnPropertyDescriptor(n,j);S&&S.enumerable||(y[j]=d(n[j],c-1),Object.defineProperty(y,j,{enumerable:!1}))}return y}"object"==typeof u&&(c=u.depth,f=u.prototype,l=u.includeNonEnumerable,u=u.circular);var h=[],p=[],b=void 0!==e;return void 0===u&&(u=!0),void 0===c&&(c=1/0),d(n,c)}function n(e){return Object.prototype.toString.call(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var o;try{o=Map}catch(e){o=function(){}}var s;try{s=Set}catch(e){s=function(){}}var a;try{a=Promise}catch(e){a=function(){}}return r.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},r.__objToStr=n,r.__isDate=function(e){return"object"==typeof e&&"[object Date]"===n(e)},r.__isArray=function(e){return"object"==typeof e&&"[object Array]"===n(e)},r.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===n(e)},r.__getRegExpFlags=i,r}();"object"==typeof t&&t.exports&&(t.exports=r)}).call(this,e("buffer").Buffer)},{buffer:61}],64:[function(e,t,r){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":179,"../../modules/core.regexp.escape":283}],65:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":79,"../../modules/es6.array.from":145,"../../modules/es6.string.iterator":152}],66:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":79,"../../modules/es6.object.create":147}],67:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":79,"../../modules/es6.object.define-property":148}],68:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":79,"../../modules/es6.object.set-prototype-of":149}],69:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":79,"../modules/es6.object.to-string":150,"../modules/es6.promise":151,"../modules/es6.string.iterator":152,"../modules/es7.promise.finally":154,"../modules/es7.promise.try":155,"../modules/web.dom.iterable":158}],70:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":79,"../../modules/es6.object.to-string":150,"../../modules/es6.symbol":153,"../../modules/es7.symbol.async-iterator":156,"../../modules/es7.symbol.observable":157}],71:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":142,"../../modules/es6.string.iterator":152,"../../modules/web.dom.iterable":158}],72:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],73:[function(e,t,r){t.exports=function(){}},{}],74:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],75:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":99}],76:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_to-length"),o=e("./_to-absolute-index");t.exports=function(e){return function(t,r,s){var a,u=n(t),c=i(u.length),f=o(s,c);if(e&&r!=r){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},{"./_to-absolute-index":134,"./_to-iobject":136,"./_to-length":137}],77:[function(e,t,r){var n=e("./_cof"),i=e("./_wks")("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":78,"./_wks":143}],78:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],79:[function(e,t,r){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},{}],80:[function(e,t,r){"use strict";var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},{"./_object-dp":111,"./_property-desc":123}],81:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":72}],82:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],83:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":88}],84:[function(e,t,r){var n=e("./_is-object"),i=e("./_global").document,o=n(i)&&n(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":90,"./_is-object":99}],85:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],86:[function(e,t,r){var n=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie");t.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,a=r(e),u=o.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":116,"./_object-keys":119,"./_object-pie":120}],87:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_ctx"),s=e("./_hide"),a=function(e,t,r){var u,c,f,l=e&a.F,d=e&a.G,h=e&a.S,p=e&a.P,b=e&a.B,y=e&a.W,v=d?i:i[t]||(i[t]={}),_=v.prototype,m=d?n:h?n[t]:(n[t]||{}).prototype;d&&(r=t);for(u in r)(c=!l&&m&&void 0!==m[u])&&u in v||(f=c?m[u]:r[u],v[u]=d&&"function"!=typeof m[u]?r[u]:b&&c?o(f,n):y&&m[u]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):p&&"function"==typeof f?o(Function.call,f):f,p&&((v.virtual||(v.virtual={}))[u]=f,e&a.R&&_&&!_[u]&&s(_,u,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},{"./_core":79,"./_ctx":81,"./_global":90,"./_hide":92}],88:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],89:[function(e,t,r){var n=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},f={};(r=t.exports=function(e,t,r,l,d){var h,p,b,y,v=d?function(){return e}:u(e),_=n(r,l,t?2:1),m=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(h=a(e.length);h>m;m++)if((y=t?_(s(p=e[m])[0],p[1]):_(e[m]))===c||y===f)return y}else for(b=v.call(e);!(p=b.next()).done;)if((y=i(b,_,p.value,t))===c||y===f)return y}).BREAK=c,r.RETURN=f},{"./_an-object":75,"./_ctx":81,"./_is-array-iter":97,"./_iter-call":100,"./_to-length":137,"./core.get-iterator-method":144}],90:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],91:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],92:[function(e,t,r){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":83,"./_object-dp":111,"./_property-desc":123}],93:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":90}],94:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":83,"./_dom-create":84,"./_fails":88}],95:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],96:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":78}],97:[function(e,t,r){var n=e("./_iterators"),i=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},{"./_iterators":105,"./_wks":143}],98:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":78}],99:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],100:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},{"./_an-object":75}],101:[function(e,t,r){"use strict";var n=e("./_object-create"),i=e("./_property-desc"),o=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),o(e,t+" Iterator")}},{"./_hide":92,"./_object-create":110,"./_property-desc":123,"./_set-to-string-tag":128,"./_wks":143}],102:[function(e,t,r){"use strict";var n=e("./_library"),i=e("./_export"),o=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),f=e("./_set-to-string-tag"),l=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(e,t,r,b,y,v,_){c(r,t,b);var m,g,w,x=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},k=t+" Iterator",j="values"==y,S=!1,E=e.prototype,O=E[d]||E["@@iterator"]||y&&E[y],C=O||x(y),A=y?j?x("entries"):C:void 0,P="Array"==t?E.entries||O:O;if(P&&(w=l(P.call(new e)))!==Object.prototype&&w.next&&(f(w,k,!0),n||a(w,d)||s(w,d,p)),j&&O&&"values"!==O.name&&(S=!0,C=function(){return O.call(this)}),n&&!_||!h&&!S&&E[d]||s(E,d,C),u[t]=C,u[k]=p,y)if(m={values:j?C:x("values"),keys:v?C:x("keys"),entries:A},_)for(g in m)g in E||o(E,g,m[g]);else i(i.P+i.F*(h||S),t,m);return m}},{"./_export":87,"./_has":91,"./_hide":92,"./_iter-create":101,"./_iterators":105,"./_library":106,"./_object-gpo":117,"./_redefine":125,"./_set-to-string-tag":128,"./_wks":143}],103:[function(e,t,r){var n=e("./_wks")("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},e(o)}catch(e){}return r}},{"./_wks":143}],104:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],105:[function(e,t,r){t.exports={}},{}],106:[function(e,t,r){t.exports=!0},{}],107:[function(e,t,r){var n=e("./_uid")("meta"),i=e("./_is-object"),o=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),f=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},onFreeze:function(e){return c&&l.NEED&&u(e)&&!o(e,n)&&f(e),e}}},{"./_fails":88,"./_has":91,"./_is-object":99,"./_object-dp":111,"./_uid":140}],108:[function(e,t,r){var n=e("./_global"),i=e("./_task").set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,u="process"==e("./_cof")(s);t.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=s.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(c)};else if(o){var f=!0,l=document.createTextNode("");new o(c).observe(l,{characterData:!0}),r=function(){l.data=f=!f}}else if(a&&a.resolve){var d=a.resolve();r=function(){d.then(c)}}else r=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},{"./_cof":78,"./_global":90,"./_task":133}],109:[function(e,t,r){"use strict";var n=e("./_a-function");t.exports.f=function(e){return new function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}(e)}},{"./_a-function":72}],110:[function(e,t,r){var n=e("./_an-object"),i=e("./_object-dps"),o=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u=function(){var t,r=e("./_dom-create")("iframe"),n=o.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",(t=r.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()};t.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=n(e),r=new a,a.prototype=null,r[s]=e):r=u(),void 0===t?r:i(r,t)}},{"./_an-object":75,"./_dom-create":84,"./_enum-bug-keys":85,"./_html":93,"./_object-dps":112,"./_shared-key":129}],111:[function(e,t,r){var n=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),s=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":75,"./_descriptors":83,"./_ie8-dom-define":94,"./_to-primitive":139}],112:[function(e,t,r){var n=e("./_object-dp"),i=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){i(e);for(var r,s=o(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},{"./_an-object":75,"./_descriptors":83,"./_object-dp":111,"./_object-keys":119}],113:[function(e,t,r){var n=e("./_object-pie"),i=e("./_property-desc"),o=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":83,"./_has":91,"./_ie8-dom-define":94,"./_object-pie":120,"./_property-desc":123,"./_to-iobject":136,"./_to-primitive":139}],114:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopn").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(n(e))}},{"./_object-gopn":115,"./_to-iobject":136}],115:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":85,"./_object-keys-internal":118}],116:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],117:[function(e,t,r){var n=e("./_has"),i=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":91,"./_shared-key":129,"./_to-object":138}],118:[function(e,t,r){var n=e("./_has"),i=e("./_to-iobject"),o=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,a=i(e),u=0,c=[];for(r in a)r!=s&&n(a,r)&&c.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~o(c,r)||c.push(r));return c}},{"./_array-includes":76,"./_has":91,"./_shared-key":129,"./_to-iobject":136}],119:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":85,"./_object-keys-internal":118}],120:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],121:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],122:[function(e,t,r){var n=e("./_an-object"),i=e("./_is-object"),o=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},{"./_an-object":75,"./_is-object":99,"./_new-promise-capability":109}],123:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],124:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},{"./_hide":92}],125:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":92}],126:[function(e,t,r){var n=e("./_is-object"),i=e("./_an-object"),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return o(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:o}},{"./_an-object":75,"./_ctx":81,"./_is-object":99,"./_object-gopd":113}],127:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_core"),o=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":79,"./_descriptors":83,"./_global":90,"./_object-dp":111,"./_wks":143}],128:[function(e,t,r){var n=e("./_object-dp").f,i=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},{"./_has":91,"./_object-dp":111,"./_wks":143}],129:[function(e,t,r){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":130,"./_uid":140}],130:[function(e,t,r){var n=e("./_global"),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":90}],131:[function(e,t,r){var n=e("./_an-object"),i=e("./_a-function"),o=e("./_wks")("species");t.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||void 0==(r=n(s)[o])?t:i(r)}},{"./_a-function":72,"./_an-object":75,"./_wks":143}],132:[function(e,t,r){var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,r){var o,s,a=String(i(t)),u=n(r),c=a.length;return u<0||u>=c?e?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},{"./_defined":82,"./_to-integer":135}],133:[function(e,t,r){var n,i,o,s=e("./_ctx"),a=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),f=e("./_global"),l=f.process,d=f.setImmediate,h=f.clearImmediate,p=f.MessageChannel,b=f.Dispatch,y=0,v={},_=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},m=function(e){_.call(e.data)};d&&h||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++y]=function(){a("function"==typeof e?e:Function(e),t)},n(y),y},h=function(e){delete v[e]},"process"==e("./_cof")(l)?n=function(e){l.nextTick(s(_,e,1))}:b&&b.now?n=function(e){b.now(s(_,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,n=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",m,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),t.exports={set:d,clear:h}},{"./_cof":78,"./_ctx":81,"./_dom-create":84,"./_global":90,"./_html":93,"./_invoke":95}],134:[function(e,t,r){var n=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},{"./_to-integer":135}],135:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],136:[function(e,t,r){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":82,"./_iobject":96}],137:[function(e,t,r){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./_to-integer":135}],138:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":82}],139:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":99}],140:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],141:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":79,"./_global":90,"./_library":106,"./_object-dp":111,"./_wks-ext":142}],142:[function(e,t,r){r.f=e("./_wks")},{"./_wks":143}],143:[function(e,t,r){var n=e("./_shared")("wks"),i=e("./_uid"),o=e("./_global").Symbol,s="function"==typeof o;(t.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},{"./_global":90,"./_shared":130,"./_uid":140}],144:[function(e,t,r){var n=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},{"./_classof":77,"./_core":79,"./_iterators":105,"./_wks":143}],145:[function(e,t,r){"use strict";var n=e("./_ctx"),i=e("./_export"),o=e("./_to-object"),s=e("./_iter-call"),a=e("./_is-array-iter"),u=e("./_to-length"),c=e("./_create-property"),f=e("./core.get-iterator-method");i(i.S+i.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,l,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,b=p>1?arguments[1]:void 0,y=void 0!==b,v=0,_=f(d);if(y&&(b=n(b,p>2?arguments[2]:void 0,2)),void 0==_||h==Array&&a(_))for(r=new h(t=u(d.length));t>v;v++)c(r,v,y?b(d[v],v):d[v]);else for(l=_.call(d),r=new h;!(i=l.next()).done;v++)c(r,v,y?s(l,b,[i.value,v],!0):i.value);return r.length=v,r}})},{"./_create-property":80,"./_ctx":81,"./_export":87,"./_is-array-iter":97,"./_iter-call":100,"./_iter-detect":103,"./_to-length":137,"./_to-object":138,"./core.get-iterator-method":144}],146:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),i=e("./_iter-step"),o=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":73,"./_iter-define":102,"./_iter-step":104,"./_iterators":105,"./_to-iobject":136}],147:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":87,"./_object-create":110}],148:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":83,"./_export":87,"./_object-dp":111}],149:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":87,"./_set-proto":126}],150:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{dup:59}],151:[function(e,t,r){"use strict";var n,i,o,s,a=e("./_library"),u=e("./_global"),c=e("./_ctx"),f=e("./_classof"),l=e("./_export"),d=e("./_is-object"),h=e("./_a-function"),p=e("./_an-instance"),b=e("./_for-of"),y=e("./_species-constructor"),v=e("./_task").set,_=e("./_microtask")(),m=e("./_new-promise-capability"),g=e("./_perform"),w=e("./_promise-resolve"),x=u.TypeError,k=u.process,j=u.Promise,S="process"==f(k),E=function(){},O=i=m.f,C=!!function(){try{var t=j.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(E,E)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof r}catch(e){}}(),A=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var r=e._c;_(function(){for(var n=e._v,i=1==e._s,o=0;r.length>o;)!function(t){var r,o,s=i?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&I(e),e._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&c.exit()),r===t.promise?u(x("Promise-chain cycle")):(o=A(r))?o.call(r,a,u):a(r)):u(n)}catch(e){u(e)}}(r[o++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){v.call(u,function(){var t,r,n,i=e._v,o=R(e);if(o&&(t=g(function(){S?k.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=S||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},R=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if((t=r[n++]).fail||!R(t.promise))return!1;return!0},I=function(e){v.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw x("Promise can't be resolved itself");(t=A(e))?_(function(){var n={_w:r,_d:!1};try{t.call(e,c(D,n,1),c(T,n,1))}catch(e){T.call(n,e)}}):(r._v=e,r._s=1,P(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};C||(j=function(e){p(this,j,"Promise","_h"),h(e),n.call(this);try{e(c(D,this,1),c(T,this,1))}catch(e){T.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e("./_redefine-all")(j.prototype,{then:function(e,t){var r=O(y(this,j));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?k.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&P(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=c(D,e,1),this.reject=c(T,e,1)},m.f=O=function(e){return e===j||e===s?new o(e):i(e)}),l(l.G+l.W+l.F*!C,{Promise:j}),e("./_set-to-string-tag")(j,"Promise"),e("./_set-species")("Promise"),s=e("./_core").Promise,l(l.S+l.F*!C,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!C),"Promise",{resolve:function(e){return w(a&&this===s?j:this,e)}}),l(l.S+l.F*!(C&&e("./_iter-detect")(function(e){j.all(e).catch(E)})),"Promise",{all:function(e){var t=this,r=O(t),n=r.resolve,i=r.reject,o=g(function(){var r=[],o=0,s=1;b(e,!1,function(e){var a=o++,u=!1;r.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,r[a]=e,--s||n(r))},i)}),--s||n(r)});return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=O(t),n=r.reject,i=g(function(){b(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},{"./_a-function":72,"./_an-instance":74,"./_classof":77,"./_core":79,"./_ctx":81,"./_export":87,"./_for-of":89,"./_global":90,"./_is-object":99,"./_iter-detect":103,"./_library":106,"./_microtask":108,"./_new-promise-capability":109,"./_perform":121,"./_promise-resolve":122,"./_redefine-all":124,"./_set-species":127,"./_set-to-string-tag":128,"./_species-constructor":131,"./_task":133,"./_wks":143}],152:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":102,"./_string-at":132}],153:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_has"),o=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),f=e("./_shared"),l=e("./_set-to-string-tag"),d=e("./_uid"),h=e("./_wks"),p=e("./_wks-ext"),b=e("./_wks-define"),y=e("./_enum-keys"),v=e("./_is-array"),_=e("./_an-object"),m=e("./_to-iobject"),g=e("./_to-primitive"),w=e("./_property-desc"),x=e("./_object-create"),k=e("./_object-gopn-ext"),j=e("./_object-gopd"),S=e("./_object-dp"),E=e("./_object-keys"),O=j.f,C=S.f,A=k.f,P=n.Symbol,M=n.JSON,R=M&&M.stringify,I=h("_hidden"),T=h("toPrimitive"),D={}.propertyIsEnumerable,L=f("symbol-registry"),B=f("symbols"),N=f("op-symbols"),F=Object.prototype,q="function"==typeof P,$=n.QObject,U=!$||!$.prototype||!$.prototype.findChild,z=o&&c(function(){return 7!=x(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=O(F,t);n&&delete F[t],C(e,t,r),n&&e!==F&&C(F,t,n)}:C,W=function(e){var t=B[e]=x(P.prototype);return t._k=e,t},V=q&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},K=function(e,t,r){return e===F&&K(N,t,r),_(e),t=g(t,!0),_(r),i(B,t)?(r.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),r=x(r,{enumerable:w(0,!1)})):(i(e,I)||C(e,I,w(1,{})),e[I][t]=!0),z(e,t,r)):C(e,t,r)},G=function(e,t){_(e);for(var r,n=y(t=m(t)),i=0,o=n.length;o>i;)K(e,r=n[i++],t[r]);return e},J=function(e){var t=D.call(this,e=g(e,!0));return!(this===F&&i(B,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,I)&&this[I][e])||t)},H=function(e,t){if(e=m(e),t=g(t,!0),e!==F||!i(B,t)||i(N,t)){var r=O(e,t);return!r||!i(B,t)||i(e,I)&&e[I][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=A(m(e)),n=[],o=0;r.length>o;)i(B,t=r[o++])||t==I||t==u||n.push(t);return n},Y=function(e){for(var t,r=e===F,n=A(r?N:m(e)),o=[],s=0;n.length>s;)!i(B,t=n[s++])||r&&!i(F,t)||o.push(B[t]);return o};q||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(N,r),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),z(this,e,w(1,r))};return o&&U&&z(F,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),j.f=H,S.f=K,e("./_object-gopn").f=k.f=Q,e("./_object-pie").f=J,e("./_object-gops").f=Y,o&&!e("./_library")&&a(F,"propertyIsEnumerable",J,!0),p.f=function(e){return W(h(e))}),s(s.G+s.W+s.F*!q,{Symbol:P});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),X=0;Z.length>X;)h(Z[X++]);for(var ee=E(h.store),te=0;ee.length>te;)b(ee[te++]);s(s.S+s.F*!q,"Symbol",{for:function(e){return i(L,e+="")?L[e]:L[e]=P(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in L)if(L[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),s(s.S+s.F*!q,"Object",{create:function(e,t){return void 0===t?x(e):G(x(e),t)},defineProperty:K,defineProperties:G,getOwnPropertyDescriptor:H,getOwnPropertyNames:Q,getOwnPropertySymbols:Y}),M&&s(s.S+s.F*(!q||c(function(){var e=P();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return"function"==typeof(t=n[1])&&(r=t),!r&&v(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!V(t))return t}),n[1]=t,R.apply(M,n)}}}),P.prototype[T]||e("./_hide")(P.prototype,T,P.prototype.valueOf),l(P,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},{"./_an-object":75,"./_descriptors":83,"./_enum-keys":86,"./_export":87,"./_fails":88,"./_global":90,"./_has":91,"./_hide":92,"./_is-array":98,"./_library":106,"./_meta":107,"./_object-create":110,"./_object-dp":111,"./_object-gopd":113,"./_object-gopn":115,"./_object-gopn-ext":114,"./_object-gops":116,"./_object-keys":119,"./_object-pie":120,"./_property-desc":123,"./_redefine":125,"./_set-to-string-tag":128,"./_shared":130,"./_to-iobject":136,"./_to-primitive":139,"./_uid":140,"./_wks":143,"./_wks-define":141,"./_wks-ext":142}],154:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_core"),o=e("./_global"),s=e("./_species-constructor"),a=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then(function(){return r})}:e,r?function(r){return a(t,e()).then(function(){throw r})}:e)}})},{"./_core":79,"./_export":87,"./_global":90,"./_promise-resolve":122,"./_species-constructor":131}],155:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_new-promise-capability"),o=e("./_perform");n(n.S,"Promise",{try:function(e){var t=i.f(this),r=o(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},{"./_export":87,"./_new-promise-capability":109,"./_perform":121}],156:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":141}],157:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":141}],158:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),i=e("./_hide"),o=e("./_iterators"),s=e("./_wks")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],f=n[c],l=f&&f.prototype;l&&!l[s]&&i(l,s,c),o[c]=o.Array}},{"./_global":90,"./_hide":92,"./_iterators":105,"./_wks":143,"./es6.array.iterator":146}],159:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{dup:72}],160:[function(e,t,r){var n=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},{"./_cof":174}],161:[function(e,t,r){var n=e("./_wks")("unscopables"),i=Array.prototype;void 0==i[n]&&e("./_hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}},{"./_hide":198,"./_wks":281}],162:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{dup:74}],163:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{"./_is-object":207,dup:75}],164:[function(e,t,r){"use strict";var n=e("./_to-object"),i=e("./_to-absolute-index"),o=e("./_to-length");t.exports=[].copyWithin||function(e,t){var r=n(this),s=o(r.length),a=i(e,s),u=i(t,s),c=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===c?s:i(c,s))-u,s-a),l=1;for(u<a&&a<u+f&&(l=-1,u+=f-1,a+=f-1);f-- >0;)u in r?r[a]=r[u]:delete r[a],a+=l,u+=l;return r}},{"./_to-absolute-index":267,"./_to-length":271,"./_to-object":272}],165:[function(e,t,r){"use strict";var n=e("./_to-object"),i=e("./_to-absolute-index"),o=e("./_to-length");t.exports=function(e){for(var t=n(this),r=o(t.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,r),u=s>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);c>a;)t[a++]=e;return t}},{"./_to-absolute-index":267,"./_to-length":271,"./_to-object":272}],166:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":195}],167:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"./_to-absolute-index":267,"./_to-iobject":270,"./_to-length":271,dup:76}],168:[function(e,t,r){var n=e("./_ctx"),i=e("./_iobject"),o=e("./_to-object"),s=e("./_to-length"),a=e("./_array-species-create");t.exports=function(e,t){var r=1==e,u=2==e,c=3==e,f=4==e,l=6==e,d=5==e||l,h=t||a;return function(t,a,p){for(var b,y,v=o(t),_=i(v),m=n(a,p,3),g=s(_.length),w=0,x=r?h(t,g):u?h(t,0):void 0;g>w;w++)if((d||w in _)&&(b=_[w],y=m(b,w,v),e))if(r)x[w]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return w;case 2:x.push(b)}else if(f)return!1;return l?-1:c||f?f:x}}},{"./_array-species-create":171,"./_ctx":181,"./_iobject":203,"./_to-length":271,"./_to-object":272}],169:[function(e,t,r){var n=e("./_a-function"),i=e("./_to-object"),o=e("./_iobject"),s=e("./_to-length");t.exports=function(e,t,r,a,u){n(t);var c=i(e),f=o(c),l=s(c.length),d=u?l-1:0,h=u?-1:1;if(r<2)for(;;){if(d in f){a=f[d],d+=h;break}if(d+=h,u?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:l>d;d+=h)d in f&&(a=t(a,f[d],d,c));return a}},{"./_a-function":159,"./_iobject":203,"./_to-length":271,"./_to-object":272}],170:[function(e,t,r){var n=e("./_is-object"),i=e("./_is-array"),o=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":205,"./_is-object":207,"./_wks":281}],171:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":170}],172:[function(e,t,r){"use strict";var n=e("./_a-function"),i=e("./_is-object"),o=e("./_invoke"),s=[].slice,a={};t.exports=Function.bind||function(e){var t=n(this),r=s.call(arguments,1),u=function(){var n=r.concat(s.call(arguments));return this instanceof u?function(e,t,r){if(!(t in a)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";a[t]=Function("F,a","return new F("+n.join(",")+")")}return a[t](e,r)}(t,n.length,n):o(t,n,e)};return i(t.prototype)&&(u.prototype=t.prototype),u}},{"./_a-function":159,"./_invoke":202,"./_is-object":207}],173:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{"./_cof":174,"./_wks":281,dup:77}],174:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{dup:78}],175:[function(e,t,r){"use strict";var n=e("./_object-dp").f,i=e("./_object-create"),o=e("./_redefine-all"),s=e("./_ctx"),a=e("./_an-instance"),u=e("./_for-of"),c=e("./_iter-define"),f=e("./_iter-step"),l=e("./_set-species"),d=e("./_descriptors"),h=e("./_meta").fastKey,p=e("./_validate-collection"),b=d?"_s":"size",y=function(e,t){var r,n=h(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,c){var f=e(function(e,n){a(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[b]=0,void 0!=n&&u(n,r,e[c],e)});return o(f.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[b]=0},delete:function(e){var r=p(this,t),n=y(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[b]--}return!!n},forEach:function(e){p(this,t);for(var r,n=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!y(p(this,t),e)}}),d&&n(f.prototype,"size",{get:function(){return p(this,t)[b]}}),f},def:function(e,t,r){var n,i,o=y(e,t);return o?o.v=r:(e._l=o={i:i=h(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[b]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?"keys"==e?f(0,t.k):"values"==e?f(0,t.v):f(0,[t.k,t.v]):(this._t=void 0,f(1))},r?"entries":"values",!r,!0),l(t)}}},{"./_an-instance":162,"./_ctx":181,"./_descriptors":185,"./_for-of":195,"./_iter-define":211,"./_iter-step":213,"./_meta":221,"./_object-create":226,"./_object-dp":227,"./_redefine-all":246,"./_set-species":253,"./_validate-collection":278}],176:[function(e,t,r){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":166,"./_classof":173}],177:[function(e,t,r){"use strict";var n=e("./_redefine-all"),i=e("./_meta").getWeak,o=e("./_an-object"),s=e("./_is-object"),a=e("./_an-instance"),u=e("./_for-of"),c=e("./_array-methods"),f=e("./_has"),l=e("./_validate-collection"),d=c(5),h=c(6),p=0,b=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},v=function(e,t){return d(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,o){var c=e(function(e,n){a(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&u(n,r,e[o],e)});return n(c.prototype,{delete:function(e){if(!s(e))return!1;var r=i(e);return!0===r?b(l(this,t)).delete(e):r&&f(r,this._i)&&delete r[this._i]},has:function(e){if(!s(e))return!1;var r=i(e);return!0===r?b(l(this,t)).has(e):r&&f(r,this._i)}}),c},def:function(e,t,r){var n=i(o(t),!0);return!0===n?b(e).set(t,r):n[e._i]=r,e},ufstore:b}},{"./_an-instance":162,"./_an-object":163,"./_array-methods":168,"./_for-of":195,"./_has":197,"./_is-object":207,"./_meta":221,"./_redefine-all":246,"./_validate-collection":278}],178:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_export"),o=e("./_redefine"),s=e("./_redefine-all"),a=e("./_meta"),u=e("./_for-of"),c=e("./_an-instance"),f=e("./_is-object"),l=e("./_fails"),d=e("./_iter-detect"),h=e("./_set-to-string-tag"),p=e("./_inherit-if-required");t.exports=function(e,t,r,b,y,v){var _=n[e],m=_,g=y?"set":"add",w=m&&m.prototype,x={},k=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(v&&!f(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!f(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof m&&(v||w.forEach&&!l(function(){(new m).entries().next()}))){var j=new m,S=j[g](v?{}:-0,1)!=j,E=l(function(){j.has(1)}),O=d(function(e){new m(e)}),C=!v&&l(function(){for(var e=new m,t=5;t--;)e[g](t,t);return!e.has(-0)});O||((m=t(function(t,r){c(t,m,e);var n=p(new _,t,m);return void 0!=r&&u(r,y,n[g],n),n})).prototype=w,w.constructor=m),(E||C)&&(k("delete"),k("has"),y&&k("get")),(C||S)&&k(g),v&&w.clear&&delete w.clear}else m=b.getConstructor(t,e,y,g),s(m.prototype,r),a.NEED=!0;return h(m,e),x[e]=m,i(i.G+i.W+i.F*(m!=_),x),v||b.setStrong(m,e,y),m}},{"./_an-instance":162,"./_export":189,"./_fails":191,"./_for-of":195,"./_global":196,"./_inherit-if-required":201,"./_is-object":207,"./_iter-detect":212,"./_meta":221,"./_redefine":247,"./_redefine-all":246,"./_set-to-string-tag":254}],179:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{dup:79}],180:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"./_object-dp":227,"./_property-desc":245,dup:80}],181:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"./_a-function":159,dup:81}],182:[function(e,t,r){"use strict";var n=e("./_fails"),i=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(e){return e>9?e:"0"+e};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!n(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(r>99?r:"0"+s(r))+"Z"}:o},{"./_fails":191}],183:[function(e,t,r){"use strict";var n=e("./_an-object"),i=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},{"./_an-object":163,"./_to-primitive":273}],184:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{dup:82}],185:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"./_fails":191,dup:83}],186:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"./_global":196,"./_is-object":207,dup:84}],187:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{dup:85}],188:[function(e,t,r){arguments[4][86][0].apply(r,arguments)},{"./_object-gops":233,"./_object-keys":236,"./_object-pie":237,dup:86}],189:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_hide"),s=e("./_redefine"),a=e("./_ctx"),u=function(e,t,r){var c,f,l,d,h=e&u.F,p=e&u.G,b=e&u.S,y=e&u.P,v=e&u.B,_=p?n:b?n[t]||(n[t]={}):(n[t]||{}).prototype,m=p?i:i[t]||(i[t]={}),g=m.prototype||(m.prototype={});p&&(r=t);for(c in r)l=((f=!h&&_&&void 0!==_[c])?_:r)[c],d=v&&f?a(l,n):y&&"function"==typeof l?a(Function.call,l):l,_&&s(_,c,l,e&u.U),m[c]!=l&&o(m,c,d),y&&g[c]!=l&&(g[c]=l)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":179,"./_ctx":181,"./_global":196,"./_hide":198,"./_redefine":247}],190:[function(e,t,r){var n=e("./_wks")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},{"./_wks":281}],191:[function(e,t,r){arguments[4][88][0].apply(r,arguments)},{dup:88}],192:[function(e,t,r){"use strict";var n=e("./_hide"),i=e("./_redefine"),o=e("./_fails"),s=e("./_defined"),a=e("./_wks");t.exports=function(e,t,r){var u=a(e),c=r(s,u,""[e]),f=c[0],l=c[1];o(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,f),n(RegExp.prototype,u,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}))}},{"./_defined":184,"./_fails":191,"./_hide":198,"./_redefine":247,"./_wks":281}],193:[function(e,t,r){"use strict";var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":163}],194:[function(e,t,r){"use strict";function n(e,t,r,c,f,l,d,h){for(var p,b,y=f,v=0,_=!!d&&a(d,h,3);v<c;){if(v in r){if(p=_?_(r[v],v,t):r[v],b=!1,o(p)&&(b=void 0!==(b=p[u])?!!b:i(p)),b&&l>0)y=n(e,t,p,s(p.length),y,l-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}v++}return y}var i=e("./_is-array"),o=e("./_is-object"),s=e("./_to-length"),a=e("./_ctx"),u=e("./_wks")("isConcatSpreadable");t.exports=n},{"./_ctx":181,"./_is-array":205,"./_is-object":207,"./_to-length":271,"./_wks":281}],195:[function(e,t,r){arguments[4][89][0].apply(r,arguments)},{"./_an-object":163,"./_ctx":181,"./_is-array-iter":204,"./_iter-call":209,"./_to-length":271,"./core.get-iterator-method":282,dup:89}],196:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],197:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],198:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{"./_descriptors":185,"./_object-dp":227,"./_property-desc":245,dup:92}],199:[function(e,t,r){arguments[4][93][0].apply(r,arguments)},{"./_global":196,dup:93}],200:[function(e,t,r){arguments[4][94][0].apply(r,arguments)},{"./_descriptors":185,"./_dom-create":186,"./_fails":191,dup:94}],201:[function(e,t,r){var n=e("./_is-object"),i=e("./_set-proto").set;t.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},{"./_is-object":207,"./_set-proto":252}],202:[function(e,t,r){arguments[4][95][0].apply(r,arguments)},{dup:95}],203:[function(e,t,r){arguments[4][96][0].apply(r,arguments)},{"./_cof":174,dup:96}],204:[function(e,t,r){arguments[4][97][0].apply(r,arguments)},{"./_iterators":214,"./_wks":281,dup:97}],205:[function(e,t,r){arguments[4][98][0].apply(r,arguments)},{"./_cof":174,dup:98}],206:[function(e,t,r){var n=e("./_is-object"),i=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":207}],207:[function(e,t,r){arguments[4][99][0].apply(r,arguments)},{dup:99}],208:[function(e,t,r){var n=e("./_is-object"),i=e("./_cof"),o=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"./_cof":174,"./_is-object":207,"./_wks":281}],209:[function(e,t,r){arguments[4][100][0].apply(r,arguments)},{"./_an-object":163,dup:100}],210:[function(e,t,r){arguments[4][101][0].apply(r,arguments)},{"./_hide":198,"./_object-create":226,"./_property-desc":245,"./_set-to-string-tag":254,"./_wks":281,dup:101}],211:[function(e,t,r){arguments[4][102][0].apply(r,arguments)},{"./_export":189,"./_has":197,"./_hide":198,"./_iter-create":210,"./_iterators":214,"./_library":215,"./_object-gpo":234,"./_redefine":247,"./_set-to-string-tag":254,"./_wks":281,dup:102}],212:[function(e,t,r){arguments[4][103][0].apply(r,arguments)},{"./_wks":281,dup:103}],213:[function(e,t,r){arguments[4][104][0].apply(r,arguments)},{dup:104}],214:[function(e,t,r){arguments[4][105][0].apply(r,arguments)},{dup:105}],215:[function(e,t,r){t.exports=!1},{}],216:[function(e,t,r){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},{}],217:[function(e,t,r){var n=e("./_math-sign"),i=Math.pow,o=i(2,-52),s=i(2,-23),a=i(2,127)*(2-s),u=i(2,-126);t.exports=Math.fround||function(e){var t,r,i=Math.abs(e),c=n(e);return i<u?c*function(e){return e+1/o-1/o}(i/u/s)*u*s:(t=(1+s/o)*i,(r=t-(t-i))>a||r!=r?c*(1/0):c*r)}},{"./_math-sign":220}],218:[function(e,t,r){t.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],219:[function(e,t,r){t.exports=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n}},{}],220:[function(e,t,r){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],221:[function(e,t,r){arguments[4][107][0].apply(r,arguments)},{"./_fails":191,"./_has":197,"./_is-object":207,"./_object-dp":227,"./_uid":277,dup:107}],222:[function(e,t,r){var n=e("./es6.map"),i=e("./_export"),o=e("./_shared")("metadata"),s=o.store||(o.store=new(e("./es6.weak-map"))),a=function(e,t,r){var i=s.get(e);if(!i){if(!r)return;s.set(e,i=new n)}var o=i.get(t);if(!o){if(!r)return;i.set(t,o=new n)}return o};t.exports={store:s,map:a,has:function(e,t,r){var n=a(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=a(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){a(r,n,!0).set(e,t)},keys:function(e,t){var r=a(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},{"./_export":189,"./_shared":256,"./es6.map":313,"./es6.weak-map":419}],223:[function(e,t,r){arguments[4][108][0].apply(r,arguments)},{"./_cof":174,"./_global":196,"./_task":266,dup:108}],224:[function(e,t,r){arguments[4][109][0].apply(r,arguments)},{"./_a-function":159,dup:109}],225:[function(e,t,r){"use strict";var n=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie"),s=e("./_to-object"),a=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=s(e),u=arguments.length,c=1,f=i.f,l=o.f;u>c;)for(var d,h=a(arguments[c++]),p=f?n(h).concat(f(h)):n(h),b=p.length,y=0;b>y;)l.call(h,d=p[y++])&&(r[d]=h[d]);return r}:u},{"./_fails":191,"./_iobject":203,"./_object-gops":233,"./_object-keys":236,"./_object-pie":237,"./_to-object":272}],226:[function(e,t,r){arguments[4][110][0].apply(r,arguments)},{"./_an-object":163,"./_dom-create":186,"./_enum-bug-keys":187,"./_html":199,"./_object-dps":228,"./_shared-key":255,dup:110}],227:[function(e,t,r){arguments[4][111][0].apply(r,arguments)},{"./_an-object":163,"./_descriptors":185,"./_ie8-dom-define":200,"./_to-primitive":273,dup:111}],228:[function(e,t,r){arguments[4][112][0].apply(r,arguments)},{"./_an-object":163,"./_descriptors":185,"./_object-dp":227,"./_object-keys":236,dup:112}],229:[function(e,t,r){"use strict";t.exports=e("./_library")||!e("./_fails")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e("./_global")[t]})},{"./_fails":191,"./_global":196,"./_library":215}],230:[function(e,t,r){arguments[4][113][0].apply(r,arguments)},{"./_descriptors":185,"./_has":197,"./_ie8-dom-define":200,"./_object-pie":237,"./_property-desc":245,"./_to-iobject":270,"./_to-primitive":273,dup:113}],231:[function(e,t,r){arguments[4][114][0].apply(r,arguments)},{"./_object-gopn":232,"./_to-iobject":270,dup:114}],232:[function(e,t,r){arguments[4][115][0].apply(r,arguments)},{"./_enum-bug-keys":187,"./_object-keys-internal":235,dup:115}],233:[function(e,t,r){arguments[4][116][0].apply(r,arguments)},{dup:116}],234:[function(e,t,r){arguments[4][117][0].apply(r,arguments)},{"./_has":197,"./_shared-key":255,"./_to-object":272,dup:117}],235:[function(e,t,r){arguments[4][118][0].apply(r,arguments)},{"./_array-includes":167,"./_has":197,"./_shared-key":255,"./_to-iobject":270,dup:118}],236:[function(e,t,r){arguments[4][119][0].apply(r,arguments)},{"./_enum-bug-keys":187,"./_object-keys-internal":235,dup:119}],237:[function(e,t,r){arguments[4][120][0].apply(r,arguments)},{dup:120}],238:[function(e,t,r){var n=e("./_export"),i=e("./_core"),o=e("./_fails");t.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",s)}},{"./_core":179,"./_export":189,"./_fails":191}],239:[function(e,t,r){var n=e("./_object-keys"),i=e("./_to-iobject"),o=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,s=i(t),a=n(s),u=a.length,c=0,f=[];u>c;)o.call(s,r=a[c++])&&f.push(e?[r,s[r]]:s[r]);return f}}},{"./_object-keys":236,"./_object-pie":237,"./_to-iobject":270}],240:[function(e,t,r){var n=e("./_object-gopn"),i=e("./_object-gops"),o=e("./_an-object"),s=e("./_global").Reflect;t.exports=s&&s.ownKeys||function(e){var t=n.f(o(e)),r=i.f;return r?t.concat(r(e)):t}},{"./_an-object":163,"./_global":196,"./_object-gopn":232,"./_object-gops":233}],241:[function(e,t,r){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},{"./_global":196,"./_string-trim":264,"./_string-ws":265}],242:[function(e,t,r){var n=e("./_global").parseInt,i=e("./_string-trim").trim,o=e("./_string-ws"),s=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(s.test(r)?16:10))}:n},{"./_global":196,"./_string-trim":264,"./_string-ws":265}],243:[function(e,t,r){arguments[4][121][0].apply(r,arguments)},{dup:121}],244:[function(e,t,r){arguments[4][122][0].apply(r,arguments)},{"./_an-object":163,"./_is-object":207,"./_new-promise-capability":224,dup:122}],245:[function(e,t,r){arguments[4][123][0].apply(r,arguments)},{dup:123}],246:[function(e,t,r){var n=e("./_redefine");t.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},{"./_redefine":247}],247:[function(e,t,r){var n=e("./_global"),i=e("./_hide"),o=e("./_has"),s=e("./_uid")("src"),a=Function.toString,u=(""+a).split("toString");e("./_core").inspectSource=function(e){return a.call(e)},(t.exports=function(e,t,r,a){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(c&&(o(r,s)||i(r,s,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},{"./_core":179,"./_global":196,"./_has":197,"./_hide":198,"./_uid":277}],248:[function(e,t,r){t.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},{}],249:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],250:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_a-function"),o=e("./_ctx"),s=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,a,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),void 0==e?new this:(r=[],t?(n=0,a=o(u,arguments[2],2),s(e,!1,function(e){r.push(a(e,n++))})):s(e,!1,r.push,r),new this(r))}})}},{"./_a-function":159,"./_ctx":181,"./_export":189,"./_for-of":195}],251:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":189}],252:[function(e,t,r){arguments[4][126][0].apply(r,arguments)},{"./_an-object":163,"./_ctx":181,"./_is-object":207,"./_object-gopd":230,dup:126}],253:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_object-dp"),o=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t=n[e];o&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_descriptors":185,"./_global":196,"./_object-dp":227,"./_wks":281}],254:[function(e,t,r){arguments[4][128][0].apply(r,arguments)},{"./_has":197,"./_object-dp":227,"./_wks":281,dup:128}],255:[function(e,t,r){arguments[4][129][0].apply(r,arguments)},{"./_shared":256,"./_uid":277,dup:129}],256:[function(e,t,r){arguments[4][130][0].apply(r,arguments)},{"./_global":196,dup:130}],257:[function(e,t,r){arguments[4][131][0].apply(r,arguments)},{"./_a-function":159,"./_an-object":163,"./_wks":281,dup:131}],258:[function(e,t,r){"use strict";var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":191}],259:[function(e,t,r){arguments[4][132][0].apply(r,arguments)},{"./_defined":184,"./_to-integer":269,dup:132}],260:[function(e,t,r){var n=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},{"./_defined":184,"./_is-regexp":208}],261:[function(e,t,r){var n=e("./_export"),i=e("./_fails"),o=e("./_defined"),s=/"/g;t.exports=function(e,t){var r={};r[e]=t(function(e,t,r,n){var i=String(o(e)),a="<"+t;return""!==r&&(a+=" "+r+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+i+"</"+t+">"}),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},{"./_defined":184,"./_export":189,"./_fails":191}],262:[function(e,t,r){var n=e("./_to-length"),i=e("./_string-repeat"),o=e("./_defined");t.exports=function(e,t,r,s){var a=String(o(e)),u=a.length,c=void 0===r?" ":String(r),f=n(t);if(f<=u||""==c)return a;var l=f-u,d=i.call(c,Math.ceil(l/c.length));return d.length>l&&(d=d.slice(0,l)),s?d+a:a+d}},{"./_defined":184,"./_string-repeat":263,"./_to-length":271}],263:[function(e,t,r){"use strict";var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},{"./_defined":184,"./_to-integer":269}],264:[function(e,t,r){var n=e("./_export"),i=e("./_defined"),o=e("./_fails"),s=e("./_string-ws"),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),f=function(e,t,r){var i={},a=o(function(){return!!s[e]()||"​"!="​"[e]()}),u=i[e]=a?t(l):s[e];r&&(i[r]=u),n(n.P+n.F*a,"String",i)},l=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};t.exports=f},{"./_defined":184,"./_export":189,"./_fails":191,"./_string-ws":265}],265:[function(e,t,r){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],266:[function(e,t,r){arguments[4][133][0].apply(r,arguments)},{"./_cof":174,"./_ctx":181,"./_dom-create":186,"./_global":196,"./_html":199,"./_invoke":202,dup:133}],267:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{"./_to-integer":269,dup:134}],268:[function(e,t,r){var n=e("./_to-integer"),i=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},{"./_to-integer":269,"./_to-length":271}],269:[function(e,t,r){arguments[4][135][0].apply(r,arguments)},{dup:135}],270:[function(e,t,r){arguments[4][136][0].apply(r,arguments)},{"./_defined":184,"./_iobject":203,dup:136}],271:[function(e,t,r){arguments[4][137][0].apply(r,arguments)},{"./_to-integer":269,dup:137}],272:[function(e,t,r){arguments[4][138][0].apply(r,arguments)},{"./_defined":184,dup:138}],273:[function(e,t,r){arguments[4][139][0].apply(r,arguments)},{"./_is-object":207,dup:139}],274:[function(e,t,r){"use strict";if(e("./_descriptors")){var n=e("./_library"),i=e("./_global"),o=e("./_fails"),s=e("./_export"),a=e("./_typed"),u=e("./_typed-buffer"),c=e("./_ctx"),f=e("./_an-instance"),l=e("./_property-desc"),d=e("./_hide"),h=e("./_redefine-all"),p=e("./_to-integer"),b=e("./_to-length"),y=e("./_to-index"),v=e("./_to-absolute-index"),_=e("./_to-primitive"),m=e("./_has"),g=e("./_classof"),w=e("./_is-object"),x=e("./_to-object"),k=e("./_is-array-iter"),j=e("./_object-create"),S=e("./_object-gpo"),E=e("./_object-gopn").f,O=e("./core.get-iterator-method"),C=e("./_uid"),A=e("./_wks"),P=e("./_array-methods"),M=e("./_array-includes"),R=e("./_species-constructor"),I=e("./es6.array.iterator"),T=e("./_iterators"),D=e("./_iter-detect"),L=e("./_set-species"),B=e("./_array-fill"),N=e("./_array-copy-within"),F=e("./_object-dp"),q=e("./_object-gopd"),$=F.f,U=q.f,z=i.RangeError,W=i.TypeError,V=i.Uint8Array,K=Array.prototype,G=u.ArrayBuffer,J=u.DataView,H=P(0),Q=P(2),Y=P(3),Z=P(4),X=P(5),ee=P(6),te=M(!0),re=M(!1),ne=I.values,ie=I.keys,oe=I.entries,se=K.lastIndexOf,ae=K.reduce,ue=K.reduceRight,ce=K.join,fe=K.sort,le=K.slice,de=K.toString,he=K.toLocaleString,pe=A("iterator"),be=A("toStringTag"),ye=C("typed_constructor"),ve=C("def_constructor"),_e=a.CONSTR,me=a.TYPED,ge=a.VIEW,we=P(1,function(e,t){return Ee(R(e,e[ve]),t)}),xe=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),ke=!!V&&!!V.prototype.set&&o(function(){new V(1).set({})}),je=function(e,t){var r=p(e);if(r<0||r%t)throw z("Wrong offset!");return r},Se=function(e){if(w(e)&&me in e)return e;throw W(e+" is not a typed array!")},Ee=function(e,t){if(!(w(e)&&ye in e))throw W("It is not a typed array constructor!");return new e(t)},Oe=function(e,t){return Ce(R(e,e[ve]),t)},Ce=function(e,t){for(var r=0,n=t.length,i=Ee(e,n);n>r;)i[r]=t[r++];return i},Ae=function(e,t,r){$(e,t,{get:function(){return this._d[r]}})},Pe=function(e){var t,r,n,i,o,s,a=x(e),u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,d=O(a);if(void 0!=d&&!k(d)){for(s=d.call(a),n=[],t=0;!(o=s.next()).done;t++)n.push(o.value);a=n}for(l&&u>2&&(f=c(f,arguments[2],2)),t=0,r=b(a.length),i=Ee(this,r);r>t;t++)i[t]=l?f(a[t],t):a[t];return i},Me=!!V&&o(function(){he.call(new V(1))}),Re=function(){return he.apply(Me?le.call(Se(this)):Se(this),arguments)},Ie={copyWithin:function(e,t){return N.call(Se(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Z(Se(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Se(this),arguments)},filter:function(e){return Oe(this,Q(Se(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return X(Se(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Se(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){H(Se(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Se(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Se(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Se(this),arguments)},lastIndexOf:function(e){return se.apply(Se(this),arguments)},map:function(e){return we(Se(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ae.apply(Se(this),arguments)},reduceRight:function(e){return ue.apply(Se(this),arguments)},reverse:function(){for(var e,t=Se(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return Y(Se(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return fe.call(Se(this),e)},subarray:function(e,t){var r=Se(this),n=r.length,i=v(e,n);return new(R(r,r[ve]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,b((void 0===t?n:v(t,n))-i))}},Te=function(e,t){return Oe(this,le.call(Se(this),e,t))},De=function(e){Se(this);var t=je(arguments[1],1),r=this.length,n=x(e),i=b(n.length),o=0;if(i+t>r)throw z("Wrong length!");for(;o<i;)this[t+o]=n[o++]},Le={entries:function(){return oe.call(Se(this))},keys:function(){return ie.call(Se(this))},values:function(){return ne.call(Se(this))}},Be=function(e,t){return w(e)&&e[me]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ne=function(e,t){return Be(e,t=_(t,!0))?l(2,e[t]):U(e,t)},Fe=function(e,t,r){return!(Be(e,t=_(t,!0))&&w(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?$(e,t,r):(e[t]=r.value,e)};_e||(q.f=Ne,F.f=Fe),s(s.S+s.F*!_e,"Object",{getOwnPropertyDescriptor:Ne,defineProperty:Fe}),o(function(){de.call({})})&&(de=he=function(){return ce.call(this)});var qe=h({},Ie);h(qe,Le),d(qe,pe,Le.values),h(qe,{slice:Te,set:De,constructor:function(){},toString:de,toLocaleString:Re}),Ae(qe,"buffer","b"),Ae(qe,"byteOffset","o"),Ae(qe,"byteLength","l"),Ae(qe,"length","e"),$(qe,be,{get:function(){return this[me]}}),t.exports=function(e,t,r,u){var c=e+((u=!!u)?"Clamped":"")+"Array",l="get"+e,h="set"+e,p=i[c],v=p||{},_=p&&S(p),m=!p||!a.ABV,x={},k=p&&p.prototype;m?(p=r(function(e,r,n,i){f(e,p,c,"_d");var o,s,a,v,_=0,m=0;if(w(r)){if(!(r instanceof G||"ArrayBuffer"==(v=g(r))||"SharedArrayBuffer"==v))return me in r?Ce(p,r):Pe.call(p,r);o=r,m=je(n,t);var x=r.byteLength;if(void 0===i){if(x%t)throw z("Wrong length!");if((s=x-m)<0)throw z("Wrong length!")}else if((s=b(i)*t)+m>x)throw z("Wrong length!");a=s/t}else a=y(r),o=new G(s=a*t);for(d(e,"_d",{b:o,o:m,l:s,e:a,v:new J(o)});_<a;)!function(e,r){$(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[l](r*t+n.o,xe)}(this,r)},set:function(e){return function(e,r,n){var i=e._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[h](r*t+i.o,n,xe)}(this,r,e)},enumerable:!0})}(e,_++)}),k=p.prototype=j(qe),d(k,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&D(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=r(function(e,r,n,i){f(e,p,c);var o;return w(r)?r instanceof G||"ArrayBuffer"==(o=g(r))||"SharedArrayBuffer"==o?void 0!==i?new v(r,je(n,t),i):void 0!==n?new v(r,je(n,t)):new v(r):me in r?Ce(p,r):Pe.call(p,r):new v(y(r))}),H(_!==Function.prototype?E(v).concat(E(_)):E(v),function(e){e in p||d(p,e,v[e])}),p.prototype=k,n||(k.constructor=p));var O=k[pe],C=!!O&&("values"==O.name||void 0==O.name),A=Le.values;d(p,ye,!0),d(k,me,c),d(k,ge,!0),d(k,ve,p),(u?new p(1)[be]==c:be in k)||$(k,be,{get:function(){return c}}),x[c]=p,s(s.G+s.W+s.F*(p!=v),x),s(s.S,c,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*o(function(){v.of.call(p,1)}),c,{from:Pe,of:function(){for(var e=0,t=arguments.length,r=Ee(this,t);t>e;)r[e]=arguments[e++];return r}}),"BYTES_PER_ELEMENT"in k||d(k,"BYTES_PER_ELEMENT",t),s(s.P,c,Ie),L(c),s(s.P+s.F*ke,c,{set:De}),s(s.P+s.F*!C,c,Le),n||k.toString==de||(k.toString=de),s(s.P+s.F*o(function(){new p(1).slice()}),c,{slice:Te}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){k.toLocaleString.call([1,2])})),c,{toLocaleString:Re}),T[c]=C?O:A,n||C||d(k,pe,A)}}else t.exports=function(){}},{"./_an-instance":162,"./_array-copy-within":164,"./_array-fill":165,"./_array-includes":167,"./_array-methods":168,"./_classof":173,"./_ctx":181,"./_descriptors":185,"./_export":189,"./_fails":191,"./_global":196,"./_has":197,"./_hide":198,"./_is-array-iter":204,"./_is-object":207,"./_iter-detect":212,"./_iterators":214,"./_library":215,"./_object-create":226,"./_object-dp":227,"./_object-gopd":230,"./_object-gopn":232,"./_object-gpo":234,"./_property-desc":245,"./_redefine-all":246,"./_set-species":253,"./_species-constructor":257,"./_to-absolute-index":267,"./_to-index":268,"./_to-integer":269,"./_to-length":271,"./_to-object":272,"./_to-primitive":273,"./_typed":276,"./_typed-buffer":275,"./_uid":277,"./_wks":281,"./core.get-iterator-method":282,"./es6.array.iterator":294}],275:[function(e,t,r){"use strict";function n(e,t,r){var n,i,o,s=Array(r),a=8*r-t-1,u=(1<<a)-1,c=u>>1,f=23===t?L(2,-24)-L(2,-77):0,l=0,d=e<0||0===e&&1/e<0?1:0;for((e=D(e))!=e||e===I?(i=e!=e?1:0,n=u):(n=B(N(e)/F),e*(o=L(2,-n))<1&&(n--,o*=2),(e+=n+c>=1?f/o:f*L(2,1-c))*o>=2&&(n++,o/=2),n+c>=u?(i=0,n=u):n+c>=1?(i=(e*o-1)*L(2,t),n+=c):(i=e*L(2,c-1)*L(2,t),n=0));t>=8;s[l++]=255&i,i/=256,t-=8);for(n=n<<t|i,a+=t;a>0;s[l++]=255&n,n/=256,a-=8);return s[--l]|=128*d,s}function i(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,s=o>>1,a=i-7,u=r-1,c=e[u--],f=127&c;for(c>>=7;a>0;f=256*f+e[u],u--,a-=8);for(n=f&(1<<-a)-1,f>>=-a,a+=t;a>0;n=256*n+e[u],u--,a-=8);if(0===f)f=1-s;else{if(f===o)return n?NaN:c?-I:I;n+=L(2,t),f-=s}return(c?-1:1)*n*L(2,f-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return[255&e]}function a(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e,t,r){j(e[O],t,{get:function(){return this[r]}})}function f(e,t,r,n){var i=x(+r);if(i+t>e[$])throw R(C);var o=e[q]._b,s=i+e[U],a=o.slice(s,s+t);return n?a:a.reverse()}function l(e,t,r,n,i,o){var s=x(+r);if(s+t>e[$])throw R(C);for(var a=e[q]._b,u=s+e[U],c=n(+i),f=0;f<t;f++)a[u+f]=c[o?f:t-f-1]}var d=e("./_global"),h=e("./_descriptors"),p=e("./_library"),b=e("./_typed"),y=e("./_hide"),v=e("./_redefine-all"),_=e("./_fails"),m=e("./_an-instance"),g=e("./_to-integer"),w=e("./_to-length"),x=e("./_to-index"),k=e("./_object-gopn").f,j=e("./_object-dp").f,S=e("./_array-fill"),E=e("./_set-to-string-tag"),O="prototype",C="Wrong index!",A=d.ArrayBuffer,P=d.DataView,M=d.Math,R=d.RangeError,I=d.Infinity,T=A,D=M.abs,L=M.pow,B=M.floor,N=M.log,F=M.LN2,q=h?"_b":"buffer",$=h?"_l":"byteLength",U=h?"_o":"byteOffset";if(b.ABV){if(!_(function(){A(1)})||!_(function(){new A(-1)})||_(function(){return new A,new A(1.5),new A(NaN),"ArrayBuffer"!=A.name})){for(var z,W=(A=function(e){return m(this,A),new T(x(e))})[O]=T[O],V=k(T),K=0;V.length>K;)(z=V[K++])in A||y(A,z,T[z]);p||(W.constructor=A)}var G=new P(new A(2)),J=P[O].setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||v(P[O],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else A=function(e){m(this,A,"ArrayBuffer");var t=x(e);this._b=S.call(Array(t),0),this[$]=t},P=function(e,t,r){m(this,P,"DataView"),m(e,A,"DataView");var n=e[$],i=g(t);if(i<0||i>n)throw R("Wrong offset!");if(r=void 0===r?n-i:w(r),i+r>n)throw R("Wrong length!");this[q]=e,this[U]=i,this[$]=r},h&&(c(A,"byteLength","_l"),c(P,"buffer","_b"),c(P,"byteLength","_l"),c(P,"byteOffset","_o")),v(P[O],{getInt8:function(e){return f(this,1,e)[0]<<24>>24},getUint8:function(e){return f(this,1,e)[0]},getInt16:function(e){var t=f(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=f(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(f(this,4,e,arguments[1]))},getUint32:function(e){return o(f(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(f(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(f(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){l(this,1,e,s,t)},setUint8:function(e,t){l(this,1,e,s,t)},setInt16:function(e,t){l(this,2,e,a,t,arguments[2])},setUint16:function(e,t){l(this,2,e,a,t,arguments[2])},setInt32:function(e,t){l(this,4,e,u,t,arguments[2])},setUint32:function(e,t){l(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){l(this,4,e,function(e){return n(e,23,4)},t,arguments[2])},setFloat64:function(e,t){l(this,8,e,function(e){return n(e,52,8)},t,arguments[2])}});E(A,"ArrayBuffer"),E(P,"DataView"),y(P[O],b.VIEW,!0),r.ArrayBuffer=A,r.DataView=P},{"./_an-instance":162,"./_array-fill":165,"./_descriptors":185,"./_fails":191,"./_global":196,"./_hide":198,"./_library":215,"./_object-dp":227,"./_object-gopn":232,"./_redefine-all":246,"./_set-to-string-tag":254,"./_to-index":268,"./_to-integer":269,"./_to-length":271,"./_typed":276}],276:[function(e,t,r){for(var n,i=e("./_global"),o=e("./_hide"),s=e("./_uid"),a=s("typed_array"),u=s("view"),c=!(!i.ArrayBuffer||!i.DataView),f=c,l=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(n=i[d[l++]])?(o(n.prototype,a,!0),o(n.prototype,u,!0)):f=!1;t.exports={ABV:c,CONSTR:f,TYPED:a,VIEW:u}},{"./_global":196,"./_hide":198,"./_uid":277}],277:[function(e,t,r){arguments[4][140][0].apply(r,arguments)},{dup:140}],278:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":207}],279:[function(e,t,r){arguments[4][141][0].apply(r,arguments)},{"./_core":179,"./_global":196,"./_library":215,"./_object-dp":227,"./_wks-ext":280,dup:141}],280:[function(e,t,r){arguments[4][142][0].apply(r,arguments)},{"./_wks":281,dup:142}],281:[function(e,t,r){arguments[4][143][0].apply(r,arguments)},{"./_global":196,"./_shared":256,"./_uid":277,dup:143}],282:[function(e,t,r){arguments[4][144][0].apply(r,arguments)},{"./_classof":173,"./_core":179,"./_iterators":214,"./_wks":281,dup:144}],283:[function(e,t,r){var n=e("./_export"),i=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},{"./_export":189,"./_replacer":248}],284:[function(e,t,r){var n=e("./_export");n(n.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":161,"./_array-copy-within":164,"./_export":189}],285:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(4);n(n.P+n.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":168,"./_export":189,"./_strict-method":258}],286:[function(e,t,r){var n=e("./_export");n(n.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":161,"./_array-fill":165,"./_export":189}],287:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(2);n(n.P+n.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":168,"./_export":189,"./_strict-method":258}],288:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(o)},{"./_add-to-unscopables":161,"./_array-methods":168,"./_export":189}],289:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":161,"./_array-methods":168,"./_export":189}],290:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(0),o=e("./_strict-method")([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":168,"./_export":189,"./_strict-method":258}],291:[function(e,t,r){arguments[4][145][0].apply(r,arguments)},{"./_create-property":180,"./_ctx":181,"./_export":189,"./_is-array-iter":204,"./_iter-call":209,"./_iter-detect":212,"./_to-length":271,"./_to-object":272,"./core.get-iterator-method":282,dup:145}],292:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-includes")(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!e("./_strict-method")(o)),"Array",{indexOf:function(e){return s?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},{"./_array-includes":167,"./_export":189,"./_strict-method":258}],293:[function(e,t,r){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":189,"./_is-array":205}],294:[function(e,t,r){arguments[4][146][0].apply(r,arguments)},{"./_add-to-unscopables":161,"./_iter-define":211,"./_iter-step":213,"./_iterators":214,"./_to-iobject":270,dup:146}],295:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-iobject"),o=[].join;n(n.P+n.F*(e("./_iobject")!=Object||!e("./_strict-method")(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},{"./_export":189,"./_iobject":203,"./_strict-method":258,"./_to-iobject":270}],296:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-iobject"),o=e("./_to-integer"),s=e("./_to-length"),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!e("./_strict-method")(a)),"Array",{lastIndexOf:function(e){if(u)return a.apply(this,arguments)||0;var t=i(this),r=s(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},{"./_export":189,"./_strict-method":258,"./_to-integer":269,"./_to-iobject":270,"./_to-length":271}],297:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(1);n(n.P+n.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":168,"./_export":189,"./_strict-method":258}],298:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_create-property");n(n.S+n.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},{"./_create-property":180,"./_export":189,"./_fails":191}],299:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":169,"./_export":189,"./_strict-method":258}],300:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":169,"./_export":189,"./_strict-method":258}],301:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_html"),o=e("./_cof"),s=e("./_to-absolute-index"),a=e("./_to-length"),u=[].slice;n(n.P+n.F*e("./_fails")(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var r=a(this.length),n=o(this);if(t=void 0===t?r:t,"Array"==n)return u.call(this,e,t);for(var i=s(e,r),c=s(t,r),f=a(c-i),l=Array(f),d=0;d<f;d++)l[d]="String"==n?this.charAt(i+d):this[i+d];return l}})},{"./_cof":174,"./_export":189,"./_fails":191,"./_html":199,"./_to-absolute-index":267,"./_to-length":271}],302:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(3);n(n.P+n.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":168,"./_export":189,"./_strict-method":258}],303:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_a-function"),o=e("./_to-object"),s=e("./_fails"),a=[].sort,u=[1,2,3];n(n.P+n.F*(s(function(){u.sort(void 0)})||!s(function(){u.sort(null)})||!e("./_strict-method")(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),i(e))}})},{"./_a-function":159,"./_export":189,"./_fails":191,"./_strict-method":258,"./_to-object":272}],304:[function(e,t,r){e("./_set-species")("Array")},{"./_set-species":253}],305:[function(e,t,r){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":189}],306:[function(e,t,r){var n=e("./_export"),i=e("./_date-to-iso-string");n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},{"./_date-to-iso-string":182,"./_export":189}],307:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive");n(n.P+n.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),r=o(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},{"./_export":189,"./_fails":191,"./_to-object":272,"./_to-primitive":273}],308:[function(e,t,r){var n=e("./_wks")("toPrimitive"),i=Date.prototype;n in i||e("./_hide")(i,n,e("./_date-to-primitive"))},{"./_date-to-primitive":183,"./_hide":198,"./_wks":281}],309:[function(e,t,r){var n=Date.prototype,i=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&e("./_redefine")(n,"toString",function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"})},{"./_redefine":247}],310:[function(e,t,r){var n=e("./_export");n(n.P,"Function",{bind:e("./_bind")})},{"./_bind":172,"./_export":189}],311:[function(e,t,r){"use strict";var n=e("./_is-object"),i=e("./_object-gpo"),o=e("./_wks")("hasInstance"),s=Function.prototype;o in s||e("./_object-dp").f(s,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":207,"./_object-dp":227,"./_object-gpo":234,"./_wks":281}],312:[function(e,t,r){var n=e("./_object-dp").f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||e("./_descriptors")&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},{"./_descriptors":185,"./_object-dp":227}],313:[function(e,t,r){"use strict";var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":178,"./_collection-strong":175,"./_validate-collection":278}],314:[function(e,t,r){var n=e("./_export"),i=e("./_math-log1p"),o=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},{"./_export":189,"./_math-log1p":218}],315:[function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=e("./_export"),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:n})},{"./_export":189}],316:[function(e,t,r){var n=e("./_export"),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":189}],317:[function(e,t,r){var n=e("./_export"),i=e("./_math-sign");n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":189,"./_math-sign":220}],318:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":189}],319:[function(e,t,r){var n=e("./_export"),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},{"./_export":189}],320:[function(e,t,r){var n=e("./_export"),i=e("./_math-expm1");n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":189,"./_math-expm1":216}],321:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{fround:e("./_math-fround")})},{"./_export":189,"./_math-fround":217}],322:[function(e,t,r){var n=e("./_export"),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,o=0,s=0,a=arguments.length,u=0;s<a;)u<(r=i(arguments[s++]))?(o=o*(n=u/r)*n+1,u=r):o+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(o)}})},{"./_export":189}],323:[function(e,t,r){var n=e("./_export"),i=Math.imul;n(n.S+n.F*e("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},{"./_export":189,"./_fails":191}],324:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":189}],325:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":189,"./_math-log1p":218}],326:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":189}],327:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{sign:e("./_math-sign")})},{"./_export":189,"./_math-sign":220}],328:[function(e,t,r){var n=e("./_export"),i=e("./_math-expm1"),o=Math.exp;n(n.S+n.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},{"./_export":189,"./_fails":191,"./_math-expm1":216}],329:[function(e,t,r){var n=e("./_export"),i=e("./_math-expm1"),o=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},{"./_export":189,"./_math-expm1":216}],330:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},{"./_export":189}],331:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_has"),o=e("./_cof"),s=e("./_inherit-if-required"),a=e("./_to-primitive"),u=e("./_fails"),c=e("./_object-gopn").f,f=e("./_object-gopd").f,l=e("./_object-dp").f,d=e("./_string-trim").trim,h=n.Number,p=h,b=h.prototype,y="Number"==o(e("./_object-create")(b)),v="trim"in String.prototype,_=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,o=(t=v?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var s,u=t.slice(2),c=0,f=u.length;c<f;c++)if((s=u.charCodeAt(c))<48||s>i)return NaN;return parseInt(u,n)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof h&&(y?u(function(){b.valueOf.call(r)}):"Number"!=o(r))?s(new p(_(t)),r,h):_(t)};for(var m,g=e("./_descriptors")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;g.length>w;w++)i(p,m=g[w])&&!i(h,m)&&l(h,m,f(p,m));h.prototype=b,b.constructor=h,e("./_redefine")(n,"Number",h)}},{"./_cof":174,"./_descriptors":185,"./_fails":191,"./_global":196,"./_has":197,"./_inherit-if-required":201,"./_object-create":226,"./_object-dp":227,"./_object-gopd":230,"./_object-gopn":232,"./_redefine":247,"./_string-trim":264,"./_to-primitive":273}],332:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":189}],333:[function(e,t,r){var n=e("./_export"),i=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},{"./_export":189,"./_global":196}],334:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":189,"./_is-integer":206}],335:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":189}],336:[function(e,t,r){var n=e("./_export"),i=e("./_is-integer"),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},{"./_export":189,"./_is-integer":206}],337:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":189}],338:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":189}],339:[function(e,t,r){var n=e("./_export"),i=e("./_parse-float");n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":189,"./_parse-float":241}],340:[function(e,t,r){var n=e("./_export"),i=e("./_parse-int");n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":189,"./_parse-int":242}],341:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-integer"),o=e("./_a-number-value"),s=e("./_string-repeat"),a=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",l=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*c[r],c[r]=n%1e7,n=u(n/1e7)},d=function(e){for(var t=6,r=0;--t>=0;)r+=c[t],c[t]=u(r/e),r=r%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var r=String(c[e]);t=""===t?r:t+s.call("0",7-r.length)+r}return t},p=function(e,t,r){return 0===t?r:t%2==1?p(e,t-1,r*e):p(e*e,t/2,r)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e("./_fails")(function(){a.call({})})),"Number",{toFixed:function(e){var t,r,n,a,u=o(this,f),c=i(e),b="",y="0";if(c<0||c>20)throw RangeError(f);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(b="-",u=-u),u>1e-21)if(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(u*p(2,69,1))-69,r=t<0?u*p(2,-t,1):u/p(2,t,1),r*=4503599627370496,(t=52-t)>0){for(l(0,r),n=c;n>=7;)l(1e7,0),n-=7;for(l(p(10,n,1),0),n=t-1;n>=23;)d(1<<23),n-=23;d(1<<n),l(1,1),d(2),y=h()}else l(0,r),l(1<<-t,0),y=h()+s.call("0",c);return y=c>0?b+((a=y.length)<=c?"0."+s.call("0",c-a)+y:y.slice(0,a-c)+"."+y.slice(a-c)):b+y}})},{"./_a-number-value":160,"./_export":189,"./_fails":191,"./_string-repeat":263,"./_to-integer":269}],342:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_fails"),o=e("./_a-number-value"),s=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==s.call(1,void 0)})||!i(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},{"./_a-number-value":160,"./_export":189,"./_fails":191}],343:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":189,"./_object-assign":225}],344:[function(e,t,r){arguments[4][147][0].apply(r,arguments)},{"./_export":189,"./_object-create":226,dup:147}],345:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":185,"./_export":189,"./_object-dps":228}],346:[function(e,t,r){arguments[4][148][0].apply(r,arguments)},{"./_descriptors":185,"./_export":189,"./_object-dp":227,dup:148}],347:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":207,"./_meta":221,"./_object-sap":238}],348:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},{"./_object-gopd":230,"./_object-sap":238,"./_to-iobject":270}],349:[function(e,t,r){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":231,"./_object-sap":238}],350:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(n(e))}})},{"./_object-gpo":234,"./_object-sap":238,"./_to-object":272}],351:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},{"./_is-object":207,"./_object-sap":238}],352:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},{"./_is-object":207,"./_object-sap":238}],353:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},{"./_is-object":207,"./_object-sap":238}],354:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{is:e("./_same-value")})},{"./_export":189,"./_same-value":249}],355:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(n(e))}})},{"./_object-keys":236,"./_object-sap":238,"./_to-object":272}],356:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":207,"./_meta":221,"./_object-sap":238}],357:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("seal",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":207,"./_meta":221,"./_object-sap":238}],358:[function(e,t,r){arguments[4][149][0].apply(r,arguments)},{"./_export":189,"./_set-proto":252,dup:149}],359:[function(e,t,r){"use strict";var n=e("./_classof"),i={};i[e("./_wks")("toStringTag")]="z",i+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":173,"./_redefine":247,"./_wks":281}],360:[function(e,t,r){var n=e("./_export"),i=e("./_parse-float");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},{"./_export":189,"./_parse-float":241}],361:[function(e,t,r){var n=e("./_export"),i=e("./_parse-int");n(n.G+n.F*(parseInt!=i),{parseInt:i})},{"./_export":189,"./_parse-int":242}],362:[function(e,t,r){arguments[4][151][0].apply(r,arguments)},{"./_a-function":159,"./_an-instance":162,"./_classof":173,"./_core":179,"./_ctx":181,"./_export":189,"./_for-of":195,"./_global":196,"./_is-object":207,"./_iter-detect":212,"./_library":215,"./_microtask":223,"./_new-promise-capability":224,"./_perform":243,"./_promise-resolve":244,"./_redefine-all":246,"./_set-species":253,"./_set-to-string-tag":254,"./_species-constructor":257,"./_task":266,"./_wks":281,dup:151}],363:[function(e,t,r){var n=e("./_export"),i=e("./_a-function"),o=e("./_an-object"),s=(e("./_global").Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!e("./_fails")(function(){s(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),u=o(r);return s?s(n,t,u):a.call(n,t,u)}})},{"./_a-function":159,"./_an-object":163,"./_export":189,"./_fails":191,"./_global":196}],364:[function(e,t,r){var n=e("./_export"),i=e("./_object-create"),o=e("./_a-function"),s=e("./_an-object"),a=e("./_is-object"),u=e("./_fails"),c=e("./_bind"),f=(e("./_global").Reflect||{}).construct,l=u(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),d=!u(function(){f(function(){})});n(n.S+n.F*(l||d),"Reflect",{construct:function(e,t){o(e),s(t);var r=arguments.length<3?e:o(arguments[2]);if(d&&!l)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var u=r.prototype,h=i(a(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return a(p)?p:h}})},{"./_a-function":159,"./_an-object":163,"./_bind":172,"./_export":189,"./_fails":191,"./_global":196,"./_is-object":207,"./_object-create":226}],365:[function(e,t,r){var n=e("./_object-dp"),i=e("./_export"),o=e("./_an-object"),s=e("./_to-primitive");i(i.S+i.F*e("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){o(e),t=s(t,!0),o(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},{"./_an-object":163,"./_export":189,"./_fails":191,"./_object-dp":227,"./_to-primitive":273}],366:[function(e,t,r){var n=e("./_export"),i=e("./_object-gopd").f,o=e("./_an-object");n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(o(e),t);return!(r&&!r.configurable)&&delete e[t]}})},{"./_an-object":163,"./_export":189,"./_object-gopd":230}],367:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_an-object"),o=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};e("./_iter-create")(o,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new o(e)}})},{"./_an-object":163,"./_export":189,"./_iter-create":210}],368:[function(e,t,r){var n=e("./_object-gopd"),i=e("./_export"),o=e("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(o(e),t)}})},{"./_an-object":163,"./_export":189,"./_object-gopd":230}],369:[function(e,t,r){var n=e("./_export"),i=e("./_object-gpo"),o=e("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},{"./_an-object":163,"./_export":189,"./_object-gpo":234}],370:[function(e,t,r){function n(e,t){var r,a,f=arguments.length<3?e:arguments[2];return c(e)===f?e[t]:(r=i.f(e,t))?s(r,"value")?r.value:void 0!==r.get?r.get.call(f):void 0:u(a=o(e))?n(a,t,f):void 0}var i=e("./_object-gopd"),o=e("./_object-gpo"),s=e("./_has"),a=e("./_export"),u=e("./_is-object"),c=e("./_an-object");a(a.S,"Reflect",{get:n})},{"./_an-object":163,"./_export":189,"./_has":197,"./_is-object":207,"./_object-gopd":230,"./_object-gpo":234}],371:[function(e,t,r){var n=e("./_export");n(n.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":189}],372:[function(e,t,r){var n=e("./_export"),i=e("./_an-object"),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},{"./_an-object":163,"./_export":189}],373:[function(e,t,r){var n=e("./_export");n(n.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":189,"./_own-keys":240}],374:[function(e,t,r){var n=e("./_export"),i=e("./_an-object"),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},{"./_an-object":163,"./_export":189}],375:[function(e,t,r){var n=e("./_export"),i=e("./_set-proto");i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},{"./_export":189,"./_set-proto":252}],376:[function(e,t,r){function n(e,t,r){var u,d,h=arguments.length<4?e:arguments[3],p=o.f(f(e),t);if(!p){if(l(d=s(e)))return n(d,t,r,h);p=c(0)}return a(p,"value")?!(!1===p.writable||!l(h))&&(u=o.f(h,t)||c(0),u.value=r,i.f(h,t,u),!0):void 0!==p.set&&(p.set.call(h,r),!0)}var i=e("./_object-dp"),o=e("./_object-gopd"),s=e("./_object-gpo"),a=e("./_has"),u=e("./_export"),c=e("./_property-desc"),f=e("./_an-object"),l=e("./_is-object");u(u.S,"Reflect",{set:n})},{"./_an-object":163,"./_export":189,"./_has":197,"./_is-object":207,"./_object-dp":227,"./_object-gopd":230,"./_object-gpo":234,"./_property-desc":245}],377:[function(e,t,r){var n=e("./_global"),i=e("./_inherit-if-required"),o=e("./_object-dp").f,s=e("./_object-gopn").f,a=e("./_is-regexp"),u=e("./_flags"),c=n.RegExp,f=c,l=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(e("./_descriptors")&&(!p||e("./_fails")(function(){return h[e("./_wks")("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")}))){c=function(e,t){var r=this instanceof c,n=a(e),o=void 0===t;return!r&&n&&e.constructor===c&&o?e:i(p?new f(n&&!o?e.source:e,t):f((n=e instanceof c)?e.source:e,n&&o?u.call(e):t),r?this:l,c)};for(var b=s(f),y=0;b.length>y;)!function(e){e in c||o(c,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})}(b[y++]);l.constructor=c,c.prototype=l,e("./_redefine")(n,"RegExp",c)}e("./_set-species")("RegExp")},{"./_descriptors":185,"./_fails":191,"./_flags":193,"./_global":196,"./_inherit-if-required":201,"./_is-regexp":208,"./_object-dp":227,"./_object-gopn":232,"./_redefine":247,"./_set-species":253,"./_wks":281}],378:[function(e,t,r){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":185,"./_flags":193,"./_object-dp":227}],379:[function(e,t,r){e("./_fix-re-wks")("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},{"./_fix-re-wks":192}],380:[function(e,t,r){e("./_fix-re-wks")("replace",2,function(e,t,r){return[function(n,i){"use strict";var o=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,o,i):r.call(String(o),n,i)},r]})},{"./_fix-re-wks":192}],381:[function(e,t,r){e("./_fix-re-wks")("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},{"./_fix-re-wks":192}],382:[function(e,t,r){e("./_fix-re-wks")("split",2,function(t,r,n){"use strict";var i=e("./_is-regexp"),o=n,s=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(r,e,t);var n,u,c,f,l,d=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,b=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,h+"g");for(a||(n=new RegExp("^"+y.source+"$(?!\\s)",h));(u=y.exec(r))&&!((c=u.index+u[0].length)>p&&(d.push(r.slice(p,u.index)),!a&&u.length>1&&u[0].replace(n,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(u[l]=void 0)}),u.length>1&&u.index<r.length&&s.apply(d,u.slice(1)),f=u[0].length,p=c,d.length>=b));)y.lastIndex===u.index&&y.lastIndex++;return p===r.length?!f&&y.test("")||d.push(""):d.push(r.slice(p)),d.length>b?d.slice(0,b):d}}else"0".split(void 0,0).length&&(n=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(e,i){var o=t(this),s=void 0==e?void 0:e[r];return void 0!==s?s.call(e,o,i):n.call(String(o),e,i)},n]})},{"./_fix-re-wks":192,"./_is-regexp":208}],383:[function(e,t,r){"use strict";e("./es6.regexp.flags");var n=e("./_an-object"),i=e("./_flags"),o=e("./_descriptors"),s=/./.toString,a=function(t){e("./_redefine")(RegExp.prototype,"toString",t,!0)};e("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},{"./_an-object":163,"./_descriptors":185,"./_fails":191,"./_flags":193,"./_redefine":247,"./es6.regexp.flags":378}],384:[function(e,t,r){"use strict";var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":178,"./_collection-strong":175,"./_validate-collection":278}],385:[function(e,t,r){"use strict";e("./_string-html")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},{"./_string-html":261}],386:[function(e,t,r){"use strict";e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":261}],387:[function(e,t,r){"use strict";e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":261}],388:[function(e,t,r){"use strict";e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":261}],389:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-at")(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},{"./_export":189,"./_string-at":259}],390:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-length"),o=e("./_string-context"),s="".endsWith;n(n.P+n.F*e("./_fails-is-regexp")("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),a=void 0===r?n:Math.min(i(r),n),u=String(e);return s?s.call(t,u,a):t.slice(a-u.length,a)===u}})},{"./_export":189,"./_fails-is-regexp":190,"./_string-context":260,"./_to-length":271}],391:[function(e,t,r){"use strict";e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":261}],392:[function(e,t,r){"use strict";e("./_string-html")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},{"./_string-html":261}],393:[function(e,t,r){"use strict";e("./_string-html")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},{"./_string-html":261}],394:[function(e,t,r){var n=e("./_export"),i=e("./_to-absolute-index"),o=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,s=0;n>s;){if(t=+arguments[s++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},{"./_export":189,"./_to-absolute-index":267}],395:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-context");n(n.P+n.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{"./_export":189,"./_fails-is-regexp":190,"./_string-context":260}],396:[function(e,t,r){"use strict";e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":261}],397:[function(e,t,r){arguments[4][152][0].apply(r,arguments)},{"./_iter-define":211,"./_string-at":259,dup:152}],398:[function(e,t,r){"use strict";e("./_string-html")("link",function(e){return function(t){return e(this,"a","href",t)}})},{"./_string-html":261}],399:[function(e,t,r){var n=e("./_export"),i=e("./_to-iobject"),o=e("./_to-length");n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=o(t.length),n=arguments.length,s=[],a=0;r>a;)s.push(String(t[a++])),a<n&&s.push(String(arguments[a]));return s.join("")}})},{"./_export":189,"./_to-iobject":270,"./_to-length":271}],400:[function(e,t,r){var n=e("./_export");n(n.P,"String",{repeat:e("./_string-repeat")})},{"./_export":189,"./_string-repeat":263}],401:[function(e,t,r){"use strict";e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":261}],402:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-length"),o=e("./_string-context"),s="".startsWith;n(n.P+n.F*e("./_fails-is-regexp")("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,r):t.slice(r,r+n.length)===n}})},{"./_export":189,"./_fails-is-regexp":190,"./_string-context":260,"./_to-length":271}],403:[function(e,t,r){"use strict";e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":261}],404:[function(e,t,r){"use strict";e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":261}],405:[function(e,t,r){"use strict";e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":261}],406:[function(e,t,r){"use strict";e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":264}],407:[function(e,t,r){arguments[4][153][0].apply(r,arguments)},{"./_an-object":163,"./_descriptors":185,"./_enum-keys":188,"./_export":189,"./_fails":191,"./_global":196,"./_has":197,"./_hide":198,"./_is-array":205,"./_library":215,"./_meta":221,"./_object-create":226,"./_object-dp":227,"./_object-gopd":230,"./_object-gopn":232,"./_object-gopn-ext":231,"./_object-gops":233,"./_object-keys":236,"./_object-pie":237,"./_property-desc":245,"./_redefine":247,"./_set-to-string-tag":254,"./_shared":256,"./_to-iobject":270,"./_to-primitive":273,"./_uid":277,"./_wks":281,"./_wks-define":279,"./_wks-ext":280,dup:153}],408:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_typed"),o=e("./_typed-buffer"),s=e("./_an-object"),a=e("./_to-absolute-index"),u=e("./_to-length"),c=e("./_is-object"),f=e("./_global").ArrayBuffer,l=e("./_species-constructor"),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&f.isView,b=d.prototype.slice,y=i.VIEW;n(n.G+n.W+n.F*(f!==d),{ArrayBuffer:d}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&y in e}}),n(n.P+n.U+n.F*e("./_fails")(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==b&&void 0===t)return b.call(s(this),e);for(var r=s(this).byteLength,n=a(e,r),i=a(void 0===t?r:t,r),o=new(l(this,d))(u(i-n)),c=new h(this),f=new h(o),p=0;n<i;)f.setUint8(p++,c.getUint8(n++));return o}}),e("./_set-species")("ArrayBuffer")},{"./_an-object":163,"./_export":189,"./_fails":191,"./_global":196,"./_is-object":207,"./_set-species":253,"./_species-constructor":257,"./_to-absolute-index":267,"./_to-length":271,"./_typed":276,"./_typed-buffer":275}],409:[function(e,t,r){var n=e("./_export");n(n.G+n.W+n.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":189,"./_typed":276,"./_typed-buffer":275}],410:[function(e,t,r){e("./_typed-array")("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],411:[function(e,t,r){e("./_typed-array")("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],412:[function(e,t,r){e("./_typed-array")("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],413:[function(e,t,r){e("./_typed-array")("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],414:[function(e,t,r){e("./_typed-array")("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],415:[function(e,t,r){e("./_typed-array")("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],416:[function(e,t,r){e("./_typed-array")("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],417:[function(e,t,r){e("./_typed-array")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":274}],418:[function(e,t,r){e("./_typed-array")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},{"./_typed-array":274}],419:[function(e,t,r){"use strict";var n,i=e("./_array-methods")(0),o=e("./_redefine"),s=e("./_meta"),a=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),f=e("./_fails"),l=e("./_validate-collection"),d=s.getWeak,h=Object.isExtensible,p=u.ufstore,b={},y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=d(e);return!0===t?p(l(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(l(this,"WeakMap"),e,t)}},_=t.exports=e("./_collection")("WeakMap",y,v,u,!0,!0);f(function(){return 7!=(new _).set((Object.freeze||Object)(b),7).get(b)})&&(a((n=u.getConstructor(y,"WeakMap")).prototype,v),s.NEED=!0,i(["delete","has","get","set"],function(e){var t=_.prototype,r=t[e];o(t,e,function(t,i){if(c(t)&&!h(t)){this._f||(this._f=new n);var o=this._f[e](t,i);return"set"==e?this:o}return r.call(this,t,i)})}))},{"./_array-methods":168,"./_collection":178,"./_collection-weak":177,"./_fails":191,"./_is-object":207,"./_meta":221,"./_object-assign":225,"./_redefine":247,"./_validate-collection":278}],420:[function(e,t,r){"use strict";var n=e("./_collection-weak"),i=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":178,"./_collection-weak":177,"./_validate-collection":278}],421:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_flatten-into-array"),o=e("./_to-object"),s=e("./_to-length"),a=e("./_a-function"),u=e("./_array-species-create");n(n.P,"Array",{flatMap:function(e){var t,r,n=o(this);return a(e),t=s(n.length),r=u(n,0),i(r,n,n,t,0,1,e,arguments[1]),r}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":159,"./_add-to-unscopables":161,"./_array-species-create":171,"./_export":189,"./_flatten-into-array":194,"./_to-length":271,"./_to-object":272}],422:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_flatten-into-array"),o=e("./_to-object"),s=e("./_to-length"),a=e("./_to-integer"),u=e("./_array-species-create");n(n.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),r=s(t.length),n=u(t,0);return i(n,t,t,r,0,void 0===e?1:a(e)),n}}),e("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":161,"./_array-species-create":171,"./_export":189,"./_flatten-into-array":194,"./_to-integer":269,"./_to-length":271,"./_to-object":272}],423:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":161,"./_array-includes":167,"./_export":189}],424:[function(e,t,r){var n=e("./_export"),i=e("./_microtask")(),o=e("./_global").process,s="process"==e("./_cof")(o);n(n.G,{asap:function(e){var t=s&&o.domain;i(t?t.bind(e):e)}})},{"./_cof":174,"./_export":189,"./_global":196,"./_microtask":223}],425:[function(e,t,r){var n=e("./_export"),i=e("./_cof");n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},{"./_cof":174,"./_export":189}],426:[function(e,t,r){var n=e("./_export");n(n.G,{global:e("./_global")})},{"./_export":189,"./_global":196}],427:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":250}],428:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":251}],429:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":176,"./_export":189}],430:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},{"./_export":189}],431:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":189}],432:[function(e,t,r){var n=e("./_export"),i=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*i}})},{"./_export":189}],433:[function(e,t,r){var n=e("./_export"),i=e("./_math-scale"),o=e("./_math-fround");n(n.S,"Math",{fscale:function(e,t,r,n,s){return o(i(e,t,r,n,s))}})},{"./_export":189,"./_math-fround":217,"./_math-scale":219}],434:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},{"./_export":189}],435:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{imulh:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n,s=r>>16,a=n>>16,u=(s*o>>>0)+(i*o>>>16);return s*a+(u>>16)+((i*a>>>0)+(65535&u)>>16)}})},{"./_export":189}],436:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},{"./_export":189}],437:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":189}],438:[function(e,t,r){var n=e("./_export"),i=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*i}})},{"./_export":189}],439:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{scale:e("./_math-scale")})},{"./_export":189,"./_math-scale":219}],440:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},{"./_export":189}],441:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{umulh:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n,s=r>>>16,a=n>>>16,u=(s*o>>>0)+(i*o>>>16);return s*a+(u>>>16)+((i*a>>>0)+(65535&u)>>>16)}})},{"./_export":189}],442:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_a-function"),s=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){s.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},{"./_a-function":159,"./_descriptors":185,"./_export":189,"./_object-dp":227,"./_object-forced-pam":229,"./_to-object":272}],443:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_a-function"),s=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){s.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},{"./_a-function":159,"./_descriptors":185,"./_export":189,"./_object-dp":227,"./_object-forced-pam":229,"./_to-object":272}],444:[function(e,t,r){var n=e("./_export"),i=e("./_object-to-array")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},{"./_export":189,"./_object-to-array":239}],445:[function(e,t,r){var n=e("./_export"),i=e("./_own-keys"),o=e("./_to-iobject"),s=e("./_object-gopd"),a=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=o(e),u=s.f,c=i(n),f={},l=0;c.length>l;)void 0!==(r=u(n,t=c[l++]))&&a(f,t,r);return f}})},{"./_create-property":180,"./_export":189,"./_object-gopd":230,"./_own-keys":240,"./_to-iobject":270}],446:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive"),s=e("./_object-gpo"),a=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,r=i(this),n=o(e,!0);do{if(t=a(r,n))return t.get}while(r=s(r))}})},{"./_descriptors":185,"./_export":189,"./_object-forced-pam":229,"./_object-gopd":230,"./_object-gpo":234,"./_to-object":272,"./_to-primitive":273}],447:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive"),s=e("./_object-gpo"),a=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,r=i(this),n=o(e,!0);do{if(t=a(r,n))return t.set}while(r=s(r))}})},{"./_descriptors":185,"./_export":189,"./_object-forced-pam":229,"./_object-gopd":230,"./_object-gpo":234,"./_to-object":272,"./_to-primitive":273}],448:[function(e,t,r){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},{"./_export":189,"./_object-to-array":239}],449:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_global"),o=e("./_core"),s=e("./_microtask")(),a=e("./_wks")("observable"),u=e("./_a-function"),c=e("./_an-object"),f=e("./_an-instance"),l=e("./_redefine-all"),d=e("./_hide"),h=e("./_for-of"),p=h.RETURN,b=function(e){return null==e?void 0:u(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return void 0===e._o},_=function(e){v(e)||(e._o=void 0,y(e))},m=function(e,t){c(e),this._c=void 0,this._o=e,e=new g(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(t){return void e.error(t)}v(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){_(this)}});var g=function(e){this._s=e};g.prototype=l({},{next:function(e){var t=this._s;if(!v(t)){var r=t._o;try{var n=b(r.next);if(n)return n.call(r,e)}catch(e){try{_(t)}finally{throw e}}}},error:function(e){var t=this._s;if(v(t))throw e;var r=t._o;t._o=void 0;try{var n=b(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!v(t)){var r=t._o;t._o=void 0;try{var n=b(r.complete);e=n?n.call(r,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var w=function(e){f(this,w,"Observable","_f")._f=u(e)};l(w.prototype,{subscribe:function(e){return new m(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(r,n){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),l(w,{from:function(e){var t="function"==typeof this?this:w,r=b(c(e)[a]);if(r){var n=c(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return s(function(){if(!r){try{if(h(e,!1,function(e){if(t.next(e),r)return p})===p)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return s(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),d(w.prototype,a,function(){return this}),n(n.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":159,"./_an-instance":162,"./_an-object":163,"./_core":179,"./_export":189,"./_for-of":195,"./_global":196,"./_hide":198,"./_microtask":223,"./_redefine-all":246,"./_set-species":253,"./_wks":281}],450:[function(e,t,r){arguments[4][154][0].apply(r,arguments)},{"./_core":179,"./_export":189,"./_global":196,"./_promise-resolve":244,"./_species-constructor":257,dup:154}],451:[function(e,t,r){arguments[4][155][0].apply(r,arguments)},{"./_export":189,"./_new-promise-capability":224,"./_perform":243,dup:155}],452:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.key,s=n.set;n.exp({defineMetadata:function(e,t,r,n){s(e,t,i(r),o(n))}})},{"./_an-object":163,"./_metadata":222}],453:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.key,s=n.map,a=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:o(arguments[2]),n=s(i(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var u=a.get(t);return u.delete(r),!!u.size||a.delete(t)}})},{"./_an-object":163,"./_metadata":222}],454:[function(e,t,r){var n=e("./es6.set"),i=e("./_array-from-iterable"),o=e("./_metadata"),s=e("./_an-object"),a=e("./_object-gpo"),u=o.keys,c=o.key,f=function(e,t){var r=u(e,t),o=a(e);if(null===o)return r;var s=f(o,t);return s.length?r.length?i(new n(r.concat(s))):s:r};o.exp({getMetadataKeys:function(e){return f(s(e),arguments.length<2?void 0:c(arguments[1]))}})},{"./_an-object":163,"./_array-from-iterable":166,"./_metadata":222,"./_object-gpo":234,"./es6.set":384}],455:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=e("./_object-gpo"),s=n.has,a=n.get,u=n.key,c=function(e,t,r){if(s(e,t,r))return a(e,t,r);var n=o(t);return null!==n?c(e,n,r):void 0};n.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},{"./_an-object":163,"./_metadata":222,"./_object-gpo":234}],456:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.keys,s=n.key;n.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:s(arguments[1]))}})},{"./_an-object":163,"./_metadata":222}],457:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.get,s=n.key;n.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":163,"./_metadata":222}],458:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=e("./_object-gpo"),s=n.has,a=n.key,u=function(e,t,r){if(s(e,t,r))return!0;var n=o(t);return null!==n&&u(e,n,r)};n.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":163,"./_metadata":222,"./_object-gpo":234}],459:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.has,s=n.key;n.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":163,"./_metadata":222}],460:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=e("./_a-function"),s=n.key,a=n.set;n.exp({metadata:function(e,t){return function(r,n){a(e,t,(void 0!==n?i:o)(r),s(n))}}})},{"./_a-function":159,"./_an-object":163,"./_metadata":222}],461:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":250}],462:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":251}],463:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":176,"./_export":189}],464:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-at")(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},{"./_export":189,"./_string-at":259}],465:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_defined"),o=e("./_to-length"),s=e("./_is-regexp"),a=e("./_flags"),u=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};e("./_iter-create")(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in u?String(e.flags):a.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=o(e.lastIndex),new c(n,t)}})},{"./_defined":184,"./_export":189,"./_flags":193,"./_is-regexp":208,"./_iter-create":210,"./_to-length":271}],466:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-pad");n(n.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":189,"./_string-pad":262}],467:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-pad");n(n.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":189,"./_string-pad":262}],468:[function(e,t,r){"use strict";e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":264}],469:[function(e,t,r){"use strict";e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":264}],470:[function(e,t,r){arguments[4][156][0].apply(r,arguments)},{"./_wks-define":279,dup:156}],471:[function(e,t,r){arguments[4][157][0].apply(r,arguments)},{"./_wks-define":279,dup:157}],472:[function(e,t,r){var n=e("./_export");n(n.S,"System",{global:e("./_global")})},{"./_export":189,"./_global":196}],473:[function(e,t,r){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":250}],474:[function(e,t,r){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":251}],475:[function(e,t,r){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":250}],476:[function(e,t,r){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":251}],477:[function(e,t,r){for(var n=e("./es6.array.iterator"),i=e("./_object-keys"),o=e("./_redefine"),s=e("./_global"),a=e("./_hide"),u=e("./_iterators"),c=e("./_wks"),f=c("iterator"),l=c("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),b=0;b<p.length;b++){var y,v=p[b],_=h[v],m=s[v],g=m&&m.prototype;if(g&&(g[f]||a(g,f,d),g[l]||a(g,l,v),u[v]=d,_))for(y in n)g[y]||o(g,y,n[y],!0)}},{"./_global":196,"./_hide":198,"./_iterators":214,"./_object-keys":236,"./_redefine":247,"./_wks":281,"./es6.array.iterator":294}],478:[function(e,t,r){var n=e("./_export"),i=e("./_task");n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":189,"./_task":266}],479:[function(e,t,r){var n=e("./_global"),i=e("./_export"),o=n.navigator,s=[].slice,a=!!o&&/MSIE .\./.test(o.userAgent),u=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&s.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*a,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},{"./_export":189,"./_global":196}],480:[function(e,t,r){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.array.flat-map"),e("./modules/es7.array.flatten"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.map.of"),e("./modules/es7.set.of"),e("./modules/es7.weak-map.of"),e("./modules/es7.weak-set.of"),e("./modules/es7.map.from"),e("./modules/es7.set.from"),e("./modules/es7.weak-map.from"),e("./modules/es7.weak-set.from"),e("./modules/es7.global"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.clamp"),e("./modules/es7.math.deg-per-rad"),e("./modules/es7.math.degrees"),e("./modules/es7.math.fscale"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.rad-per-deg"),e("./modules/es7.math.radians"),e("./modules/es7.math.scale"),e("./modules/es7.math.umulh"),e("./modules/es7.math.signbit"),e("./modules/es7.promise.finally"),e("./modules/es7.promise.try"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":179,"./modules/es6.array.copy-within":284,"./modules/es6.array.every":285,"./modules/es6.array.fill":286,"./modules/es6.array.filter":287,"./modules/es6.array.find":289,"./modules/es6.array.find-index":288,"./modules/es6.array.for-each":290,"./modules/es6.array.from":291,"./modules/es6.array.index-of":292,"./modules/es6.array.is-array":293,"./modules/es6.array.iterator":294,"./modules/es6.array.join":295,"./modules/es6.array.last-index-of":296,"./modules/es6.array.map":297,"./modules/es6.array.of":298,"./modules/es6.array.reduce":300,"./modules/es6.array.reduce-right":299,"./modules/es6.array.slice":301,"./modules/es6.array.some":302,"./modules/es6.array.sort":303,"./modules/es6.array.species":304,"./modules/es6.date.now":305,"./modules/es6.date.to-iso-string":306,"./modules/es6.date.to-json":307,"./modules/es6.date.to-primitive":308,"./modules/es6.date.to-string":309,"./modules/es6.function.bind":310,"./modules/es6.function.has-instance":311,"./modules/es6.function.name":312,"./modules/es6.map":313,"./modules/es6.math.acosh":314,"./modules/es6.math.asinh":315,"./modules/es6.math.atanh":316,"./modules/es6.math.cbrt":317,"./modules/es6.math.clz32":318,"./modules/es6.math.cosh":319,"./modules/es6.math.expm1":320,"./modules/es6.math.fround":321,"./modules/es6.math.hypot":322,"./modules/es6.math.imul":323,"./modules/es6.math.log10":324,"./modules/es6.math.log1p":325,"./modules/es6.math.log2":326,"./modules/es6.math.sign":327,"./modules/es6.math.sinh":328,"./modules/es6.math.tanh":329,"./modules/es6.math.trunc":330,"./modules/es6.number.constructor":331,"./modules/es6.number.epsilon":332,"./modules/es6.number.is-finite":333,"./modules/es6.number.is-integer":334,"./modules/es6.number.is-nan":335,"./modules/es6.number.is-safe-integer":336,"./modules/es6.number.max-safe-integer":337,"./modules/es6.number.min-safe-integer":338,"./modules/es6.number.parse-float":339,"./modules/es6.number.parse-int":340,"./modules/es6.number.to-fixed":341,"./modules/es6.number.to-precision":342,"./modules/es6.object.assign":343,"./modules/es6.object.create":344,"./modules/es6.object.define-properties":345,"./modules/es6.object.define-property":346,"./modules/es6.object.freeze":347,"./modules/es6.object.get-own-property-descriptor":348,"./modules/es6.object.get-own-property-names":349,"./modules/es6.object.get-prototype-of":350,"./modules/es6.object.is":354,"./modules/es6.object.is-extensible":351,"./modules/es6.object.is-frozen":352,"./modules/es6.object.is-sealed":353,"./modules/es6.object.keys":355,"./modules/es6.object.prevent-extensions":356,"./modules/es6.object.seal":357,"./modules/es6.object.set-prototype-of":358,"./modules/es6.object.to-string":359,"./modules/es6.parse-float":360,"./modules/es6.parse-int":361,"./modules/es6.promise":362,"./modules/es6.reflect.apply":363,"./modules/es6.reflect.construct":364,"./modules/es6.reflect.define-property":365,"./modules/es6.reflect.delete-property":366,"./modules/es6.reflect.enumerate":367,"./modules/es6.reflect.get":370,"./modules/es6.reflect.get-own-property-descriptor":368,"./modules/es6.reflect.get-prototype-of":369,"./modules/es6.reflect.has":371,"./modules/es6.reflect.is-extensible":372,"./modules/es6.reflect.own-keys":373,"./modules/es6.reflect.prevent-extensions":374,"./modules/es6.reflect.set":376,"./modules/es6.reflect.set-prototype-of":375,"./modules/es6.regexp.constructor":377,"./modules/es6.regexp.flags":378,"./modules/es6.regexp.match":379,"./modules/es6.regexp.replace":380,"./modules/es6.regexp.search":381,"./modules/es6.regexp.split":382,"./modules/es6.regexp.to-string":383,"./modules/es6.set":384,"./modules/es6.string.anchor":385,"./modules/es6.string.big":386,"./modules/es6.string.blink":387,"./modules/es6.string.bold":388,"./modules/es6.string.code-point-at":389,"./modules/es6.string.ends-with":390,"./modules/es6.string.fixed":391,"./modules/es6.string.fontcolor":392,"./modules/es6.string.fontsize":393,"./modules/es6.string.from-code-point":394,"./modules/es6.string.includes":395,"./modules/es6.string.italics":396,"./modules/es6.string.iterator":397,"./modules/es6.string.link":398,"./modules/es6.string.raw":399,"./modules/es6.string.repeat":400,"./modules/es6.string.small":401,"./modules/es6.string.starts-with":402,"./modules/es6.string.strike":403,"./modules/es6.string.sub":404,"./modules/es6.string.sup":405,"./modules/es6.string.trim":406,"./modules/es6.symbol":407,"./modules/es6.typed.array-buffer":408,"./modules/es6.typed.data-view":409,"./modules/es6.typed.float32-array":410,"./modules/es6.typed.float64-array":411,"./modules/es6.typed.int16-array":412,"./modules/es6.typed.int32-array":413,"./modules/es6.typed.int8-array":414,"./modules/es6.typed.uint16-array":415,"./modules/es6.typed.uint32-array":416,"./modules/es6.typed.uint8-array":417,"./modules/es6.typed.uint8-clamped-array":418,"./modules/es6.weak-map":419,"./modules/es6.weak-set":420,"./modules/es7.array.flat-map":421,"./modules/es7.array.flatten":422,"./modules/es7.array.includes":423,"./modules/es7.asap":424,"./modules/es7.error.is-error":425,"./modules/es7.global":426,"./modules/es7.map.from":427,"./modules/es7.map.of":428,"./modules/es7.map.to-json":429,"./modules/es7.math.clamp":430,"./modules/es7.math.deg-per-rad":431,"./modules/es7.math.degrees":432,"./modules/es7.math.fscale":433,"./modules/es7.math.iaddh":434,"./modules/es7.math.imulh":435,"./modules/es7.math.isubh":436,"./modules/es7.math.rad-per-deg":437,"./modules/es7.math.radians":438,"./modules/es7.math.scale":439,"./modules/es7.math.signbit":440,"./modules/es7.math.umulh":441,"./modules/es7.object.define-getter":442,"./modules/es7.object.define-setter":443,"./modules/es7.object.entries":444,"./modules/es7.object.get-own-property-descriptors":445,"./modules/es7.object.lookup-getter":446,"./modules/es7.object.lookup-setter":447,"./modules/es7.object.values":448,"./modules/es7.observable":449,"./modules/es7.promise.finally":450,"./modules/es7.promise.try":451,"./modules/es7.reflect.define-metadata":452,"./modules/es7.reflect.delete-metadata":453,"./modules/es7.reflect.get-metadata":455,"./modules/es7.reflect.get-metadata-keys":454,"./modules/es7.reflect.get-own-metadata":457,"./modules/es7.reflect.get-own-metadata-keys":456,"./modules/es7.reflect.has-metadata":458,"./modules/es7.reflect.has-own-metadata":459,"./modules/es7.reflect.metadata":460,"./modules/es7.set.from":461,"./modules/es7.set.of":462,"./modules/es7.set.to-json":463,"./modules/es7.string.at":464,"./modules/es7.string.match-all":465,"./modules/es7.string.pad-end":466,"./modules/es7.string.pad-start":467,"./modules/es7.string.trim-left":468,"./modules/es7.string.trim-right":469,"./modules/es7.symbol.async-iterator":470,"./modules/es7.symbol.observable":471,"./modules/es7.system.global":472,"./modules/es7.weak-map.from":473,"./modules/es7.weak-map.of":474,"./modules/es7.weak-set.from":475,"./modules/es7.weak-set.of":476,"./modules/web.dom.iterable":477,"./modules/web.immediate":478,"./modules/web.timers":479}],481:[function(e,t,r){(function(e){function t(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===t(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===t(e)},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":522}],482:[function(e,t,r){!function(n,i,o){"object"==typeof r?t.exports=r=i(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib.BlockCipher,n=t.algo,i=[],o=[],s=[],a=[],u=[],c=[],f=[],l=[],d=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=0,n=0,t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,i[r]=p,o[p]=r;var b=e[r],y=e[b],v=e[y],_=257*e[p]^16843008*p;s[r]=_<<24|_>>>8,a[r]=_<<16|_>>>16,u[r]=_<<8|_>>>24,c[r]=_;_=16843009*v^65537*y^257*b^16843008*r;f[p]=_<<24|_>>>8,l[p]=_<<16|_>>>16,d[p]=_<<8|_>>>24,h[p]=_,r?(r=b^e[e[e[v^b]]],n^=e[e[n]]):r=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],b=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)if(s<r)o[s]=t[s];else{c=o[s-1];s%r?r>6&&s%r==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=p[s/r|0]<<24),o[s]=o[s-r]^c}for(var a=this._invKeySchedule=[],u=0;u<n;u++){s=n-u;if(u%4)c=o[s];else var c=o[s-4];a[u]=u<4||s<=4?c:f[i[c>>>24]]^l[i[c>>>16&255]]^d[i[c>>>8&255]]^h[i[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,f,l,d,h,o);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,s,a){for(var u=this._nRounds,c=e[t]^r[0],f=e[t+1]^r[1],l=e[t+2]^r[2],d=e[t+3]^r[3],h=4,p=1;p<u;p++){var b=n[c>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&d]^r[h++],y=n[f>>>24]^i[l>>>16&255]^o[d>>>8&255]^s[255&c]^r[h++],v=n[l>>>24]^i[d>>>16&255]^o[c>>>8&255]^s[255&f]^r[h++],_=n[d>>>24]^i[c>>>16&255]^o[f>>>8&255]^s[255&l]^r[h++];c=b,f=y,l=v,d=_}var b=(a[c>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^r[h++],y=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^r[h++],v=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&f])^r[h++],_=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^r[h++];e[t]=b,e[t+1]=y,e[t+2]=v,e[t+3]=_},keySize:8});t.AES=r._createHelper(b)}(),e.AES})},{"./cipher-core":483,"./core":484,"./enc-base64":485,"./evpkdf":487,"./md5":489}],483:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,a=r.enc,u=(a.Utf8,a.Base64),c=r.algo.EvpKDF,f=n.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?m:v}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),l=(n.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),d=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=l.CBC=function(){function e(e,r,n){var i=this._iv;if(i){o=i;this._iv=t}else var o=this._prevBlock;for(var s=0;s<n;s++)e[r+s]^=o[s]}var r=d.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i),n.encryptBlock(t,r),this._prevBlock=t.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);n.decryptBlock(t,r),e.call(this,t,r,i),this._prevBlock=o}}),r}(),p=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var u=o.create(s,n);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},b=(n.BlockCipher=f.extend({cfg:f.cfg.extend({mode:h,padding:p}),reset:function(){f.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)n=r.createEncryptor;else{var n=r.createDecryptor;this._minBufferSize=1}this._mode=n.call(r,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)n=o.create([1398893684,1701076831]).concat(r).concat(t);else var n=t;return n.toString(u)},parse:function(e){var t=u.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=o.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return b.create({ciphertext:t,salt:n})}},v=n.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),s=i.cfg;return b.create({ciphertext:o,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);return e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(r.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=o.random(8));var i=c.create({keySize:t+r}).compute(e,n),s=o.create(i.words.slice(t),4*r);return i.sigBytes=4*t,b.create({key:i,iv:s,salt:n})}},m=n.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:_}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=v.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);n.iv=i.iv;return v.decrypt.call(this,e,t,i.key,n)}})}()})},{"./core":484}],484:[function(e,t,r){!function(e,n){"object"==typeof r?t.exports=r=n():"function"==typeof define&&define.amd?define([],n):e.CryptoJS=n()}(this,function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},o=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=0;i<t;i+=4){var o=function(t){var t=t,r=987654321,n=4294967295;return function(){var i=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}}(4294967296*(r||e.random()));r=987654071*o(),n.push(4294967296*o()|0)}return new s.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},f=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*u,i);if(u){for(var f=0;f<u;f+=o)this._doProcessBlock(n,f);var l=n.splice(0,u);r.sigBytes-=c}return new s.init(l,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);return this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new d.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math);return e})},{}],485:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var i=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,u=n[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return r.create(i,o)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},{"./core":484}],486:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return e.enc.Utf8})},{"./core":484}],487:[function(e,t,r){!function(n,i,o){"object"==typeof r?t.exports=r=i(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,s=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),s=o.words,a=r.keySize,u=r.iterations;s.length<a;){c&&n.update(c);var c=n.update(e).finalize(t);n.reset();for(var f=1;f<u;f++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*a,o}});t.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)}}(),e.EvpKDF})},{"./core":484,"./hmac":488,"./sha1":490}],488:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){!function(){var t=e,r=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}})}()})},{"./core":484}],489:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return function(t){function r(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t}function n(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t}function i(e,t,r,n,i,o,s){var a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t}function o(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t}var s=e,a=s.lib,u=a.WordArray,c=a.Hasher,f=s.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var d=f.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var a=t+s,u=e[a];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,f=e[t+0],d=e[t+1],h=e[t+2],p=e[t+3],b=e[t+4],y=e[t+5],v=e[t+6],_=e[t+7],m=e[t+8],g=e[t+9],w=e[t+10],x=e[t+11],k=e[t+12],j=e[t+13],S=e[t+14],E=e[t+15],O=c[0],C=c[1],A=c[2],P=c[3];C=o(C=o(C=o(C=o(C=i(C=i(C=i(C=i(C=n(C=n(C=n(C=n(C=r(C=r(C=r(C=r(C,A=r(A,P=r(P,O=r(O,C,A,P,f,7,l[0]),C,A,d,12,l[1]),O,C,h,17,l[2]),P,O,p,22,l[3]),A=r(A,P=r(P,O=r(O,C,A,P,b,7,l[4]),C,A,y,12,l[5]),O,C,v,17,l[6]),P,O,_,22,l[7]),A=r(A,P=r(P,O=r(O,C,A,P,m,7,l[8]),C,A,g,12,l[9]),O,C,w,17,l[10]),P,O,x,22,l[11]),A=r(A,P=r(P,O=r(O,C,A,P,k,7,l[12]),C,A,j,12,l[13]),O,C,S,17,l[14]),P,O,E,22,l[15]),A=n(A,P=n(P,O=n(O,C,A,P,d,5,l[16]),C,A,v,9,l[17]),O,C,x,14,l[18]),P,O,f,20,l[19]),A=n(A,P=n(P,O=n(O,C,A,P,y,5,l[20]),C,A,w,9,l[21]),O,C,E,14,l[22]),P,O,b,20,l[23]),A=n(A,P=n(P,O=n(O,C,A,P,g,5,l[24]),C,A,S,9,l[25]),O,C,p,14,l[26]),P,O,m,20,l[27]),A=n(A,P=n(P,O=n(O,C,A,P,j,5,l[28]),C,A,h,9,l[29]),O,C,_,14,l[30]),P,O,k,20,l[31]),A=i(A,P=i(P,O=i(O,C,A,P,y,4,l[32]),C,A,m,11,l[33]),O,C,x,16,l[34]),P,O,S,23,l[35]),A=i(A,P=i(P,O=i(O,C,A,P,d,4,l[36]),C,A,b,11,l[37]),O,C,_,16,l[38]),P,O,w,23,l[39]),A=i(A,P=i(P,O=i(O,C,A,P,j,4,l[40]),C,A,f,11,l[41]),O,C,p,16,l[42]),P,O,v,23,l[43]),A=i(A,P=i(P,O=i(O,C,A,P,g,4,l[44]),C,A,k,11,l[45]),O,C,E,16,l[46]),P,O,h,23,l[47]),A=o(A,P=o(P,O=o(O,C,A,P,f,6,l[48]),C,A,_,10,l[49]),O,C,S,15,l[50]),P,O,y,21,l[51]),A=o(A,P=o(P,O=o(O,C,A,P,k,6,l[52]),C,A,p,10,l[53]),O,C,w,15,l[54]),P,O,d,21,l[55]),A=o(A,P=o(P,O=o(O,C,A,P,m,6,l[56]),C,A,E,10,l[57]),O,C,v,15,l[58]),P,O,j,21,l[59]),A=o(A,P=o(P,O=o(O,C,A,P,b,6,l[60]),C,A,x,10,l[61]),O,C,h,15,l[62]),P,O,g,21,l[63]),c[0]=c[0]+O|0,c[1]=c[1]+C|0,c[2]=c[2]+A|0,c[3]=c[3]+P|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});s.MD5=c._createHelper(d),s.HmacMD5=c._createHmacHelper(d)}(Math),e.MD5})},{"./core":484}],490:[function(e,t,r){!function(n,i){"object"==typeof r?t.exports=r=i(e("./core")):"function"==typeof define&&define.amd?define(["./core"],i):i(n.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.Hasher,o=[],s=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],u=r[4],c=0;c<80;c++){if(c<16)o[c]=0|e[t+c];else{var f=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=f<<1|f>>>31}var l=(n<<5|n>>>27)+u+o[c];l+=c<20?1518500249+(i&s|~i&a):c<40?1859775393+(i^s^a):c<60?(i&s|i&a|s&a)-1894007588:(i^s^a)-899497514,u=a,a=s,s=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1})},{"./core":484}],491:[function(e,t,r){"use strict";var n=e("./util"),i=new Map,o=new Map,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=e||1,this._queueCounter=0,this._idleCalls=[],this._lastHandleNumber=0,this._handlePromiseMap=new Map,this._promiseHandleMap=new Map};s.prototype={isIdle:function(){return this._queueCounter<this._parallels},_newHandleNumber:function(){return this._lastHandleNumber++,this._lastHandleNumber},lock:function(){var e=this;this._queueCounter++;return function(){return e._unLock()}.bind(this)},_unLock:function(){this._queueCounter--,this._tryIdleCall()},wrapCall:function(e){var t=this.lock(),r=void 0;try{r=e()}catch(e){throw t(),e}return Promise.resolve(r).then(function(e){return t(),e}).catch(function(e){throw t(),e})},requestIdlePromise:function(e){var t=this;e=e||{};var r=void 0,n=new Promise(function(e){return r=e});if(i.set(n,function(){t._removeIdlePromise(n),r()}),e.timeout){var s=setTimeout(function(){i.get(n)()},e.timeout);o.set(n,s)}return this._idleCalls.unshift(n),this._tryIdleCall(),n},cancelIdlePromise:function(e){this._removeIdlePromise(e),this._removeIdlePromise(e)},_removeIdlePromise:function(e){i.delete(e);var t=o.get(e);t&&(clearTimeout(t),o.delete(e));var r=this._promiseHandleMap.get(e);this._handlePromiseMap.delete(r),this._promiseHandleMap.delete(e);var n=this._idleCalls.indexOf(e);this._idleCalls.splice(n,1)},requestIdleCallback:function(e,t){var r=this._newHandleNumber(),n=this.requestIdlePromise(t);return this._handlePromiseMap.set(r,n),this._promiseHandleMap.set(n,r),n.then(function(){return e()}),r},cancelIdleCallback:function(e){var t=this._handlePromiseMap.get(e);this.cancelIdlePromise(t)},_tryIdleCall:function(){var e=this;if(!this._tryIdleCallRunning&&0!==this._idleCalls.length)return this._tryIdleCallRunning=!0,n.nextTick().then(function(){if(e.isIdle())return n.nextTick().then(function(){e.isIdle()?(e._resolveOneIdleCall(),e._tryIdleCallRunning=!1):e._tryIdleCallRunning=!1});e._tryIdleCallRunning=!1})},_resolveOneIdleCall:function(){var e=this;if(0!==this._idleCalls.length){var t=this._idleCalls[this._idleCalls.length-1];return i.get(t)(),n.nextTick().then(function(){return e._tryIdleCall()})}},clear:function(){var e=this;this._idleCalls.forEach(function(t){return e._removeIdlePromise(t)}),this._queueCounter=0,this._idleCalls=[],this._handlePromiseMap=new Map,this._promiseHandleMap=new Map}},t.exports=s},{"./util":493}],492:[function(e,t,r){"use strict";var n=e("./idle-queue");t.exports=n},{"./idle-queue":491}],493:[function(e,t,r){"use strict";t.exports=function(){var e={};return e.nextTick=function(){return new Promise(function(e){return setTimeout(e,0)})},e}()},{}],494:[function(e,t,r){(function(n){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)}},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this,e("_process"))},{"./debug":495,_process:609}],495:[function(e,t,r){function n(e){function t(){if(t.enabled){var e=t,n=+new Date,o=n-(i||n);e.diff=o,e.prev=i,e.curr=n,i=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var o=s[u];t=i.call(e,o),s.splice(u,1),u--}return t}),r.formatArgs.call(e,s);(t.log||r.log||console.log.bind(console)).apply(e,s)}}return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),"function"==typeof r.init&&r.init(t),t}(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var i},{ms:563}],496:[function(e,t,r){function n(e){return null===e||void 0===e}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}var o=Array.prototype.slice,s=e("./lib/keys.js"),a=e("./lib/is_arguments.js"),u=t.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,f;if(n(e)||n(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=o.call(e),t=o.call(t),u(e,t,r));if(i(e)){if(!i(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var l=s(e),d=s(t)}catch(e){return!1}if(l.length!=d.length)return!1;for(l.sort(),d.sort(),c=l.length-1;c>=0;c--)if(l[c]!=d[c])return!1;for(c=l.length-1;c>=0;c--)if(f=l[c],!u(e[f],t[f],r))return!1;return typeof e==typeof t}(e,t,r))}},{"./lib/is_arguments.js":497,"./lib/keys.js":498}],497:[function(e,t,r){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(r=t.exports=o?n:i).supported=n,r.unsupported=i},{}],498:[function(e,t,r){function n(e){var t=[];for(var r in e)t.push(r);return t}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},{}],499:[function(e,t,r){function n(e){o.call(this,e),this._options=e,this._iterator=null,this._operations=[]}var i=e("util"),o=e("abstract-leveldown").AbstractIterator;i.inherits(n,o),n.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach(function(e){t[e.method].apply(t,e.args)})},n.prototype._operation=function(e,t){if(this._iterator)return this._iterator[e].apply(this._iterator,t);this._operations.push({method:e,args:t})},"next end".split(" ").forEach(function(e){n.prototype["_"+e]=function(){this._operation(e,arguments)}}),t.exports=n},{"abstract-leveldown":504,util:774}],500:[function(e,t,r){(function(r,n){function i(e){s.call(this,"string"==typeof e?e:""),this._db=void 0,this._operations=[],this._iterators=[]}var o=e("util"),s=e("abstract-leveldown").AbstractLevelDOWN,a=e("./deferred-iterator");o.inherits(i,s),i.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(t){e[t.method].apply(e,t.args)}),this._iterators.forEach(function(t){t.setDb(e)})},i.prototype._open=function(e,t){return n.nextTick(t)},i.prototype._operation=function(e,t){if(this._db)return this._db[e].apply(this._db,t);this._operations.push({method:e,args:t})},"put get del batch approximateSize".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._iterator=function(e){if(this._db)return this._db.iterator.apply(this._db,arguments);var t=new a(e);return this._iterators.push(t),t},t.exports=i,t.exports.DeferredIterator=a}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":522,"./deferred-iterator":499,_process:609,"abstract-leveldown":504,util:774}],501:[function(e,t,r){(function(e){function r(e){this._db=e,this._operations=[],this._written=!1}r.prototype._serializeKey=function(e){return this._db._serializeKey(e)},r.prototype._serializeValue=function(e){return this._db._serializeValue(e)},r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKey(e,"key",this._db._isBuffer);if(r)throw r;return e=this._serializeKey(e),t=this._serializeValue(t),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},r.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return e=this._serializeKey(e),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this,e("_process"))},{_process:609}],502:[function(e,t,r){(function(e){function r(e){this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){var r=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return r._ended?t(new Error("cannot call next() after end()")):r._nexting?t(new Error("cannot call next() before previous next() has completed")):(r._nexting=!0,"function"==typeof r._next?r._next(function(){r._nexting=!1,t.apply(null,arguments)}):void e.nextTick(function(){r._nexting=!1,t()}))},r.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=r}).call(this,e("_process"))},{_process:609}],503:[function(e,t,r){(function(r,n){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}var o=e("xtend"),s=e("./abstract-iterator"),a=e("./abstract-chained-batch");i.prototype.open=function(e,t){var r=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){if(e)return r.status=i,t(e);r.status="open",t()})):(this.status="open",n.nextTick(t))},i.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(n){if(n)return t.status=r,e(n);t.status="closed",e()})):(this.status="closed",n.nextTick(e))},i.prototype.get=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key"))?r(i):(e=this._serializeKey(e),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,r):void n.nextTick(function(){r(new Error("NotFound"))}))},i.prototype.put=function(e,t,r,i){var o;if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key"))?i(o):(e=this._serializeKey(e),t=this._serializeValue(t),"object"!=typeof r&&(r={}),"function"==typeof this._put?this._put(e,t,r,i):void n.nextTick(i))},i.prototype.del=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key"))?r(i):(e=this._serializeKey(e),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,r):void n.nextTick(r))},i.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,o,s=0,a=e.length;s<a;s++)if("object"==typeof(i=e[s])){if(o=this._checkKey(i.type,"type"))return r(o);if(o=this._checkKey(i.key,"key"))return r(o)}if("function"==typeof this._batch)return this._batch(e,t,r);n.nextTick(r)},i.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");if(e=this._serializeKey(e),t=this._serializeKey(t),"function"==typeof this._approximateSize)return this._approximateSize(e,t,r);n.nextTick(function(){r(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(r){e[r]&&t._isBuffer(e[r])&&0===e[r].length&&delete e[r]}),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new a(this)},i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._serializeKey=function(e){return this._isBuffer(e)?e:String(e)},i.prototype._serializeValue=function(e){return null==e?"":this._isBuffer(e)||n.browser?e:String(e)},i.prototype._checkKey=function(e,t){return null===e||void 0===e?new Error(t+" cannot be `null` or `undefined`"):this._isBuffer(e)&&0===e.length?new Error(t+" cannot be an empty Buffer"):""===String(e)?new Error(t+" cannot be an empty String"):void 0},t.exports=i}).call(this,{isBuffer:e("../../../is-buffer/index.js")},e("_process"))},{"../../../is-buffer/index.js":522,"./abstract-chained-batch":501,"./abstract-iterator":502,_process:609,xtend:783}],504:[function(e,t,r){r.AbstractLevelDOWN=e("./abstract-leveldown"),r.AbstractIterator=e("./abstract-iterator"),r.AbstractChainedBatch=e("./abstract-chained-batch"),r.isLevelDOWN=e("./is-leveldown")},{"./abstract-chained-batch":501,"./abstract-iterator":502,"./abstract-leveldown":503,"./is-leveldown":505}],505:[function(e,t,r){var n=e("./abstract-leveldown");t.exports=function(e){return!(!e||"object"!=typeof e)&&Object.keys(n.prototype).filter(function(e){return"_"!=e[0]&&"approximateSize"!=e}).every(function(t){return"function"==typeof e[t]})}},{"./abstract-leveldown":503}],506:[function(e,t,r){"use strict";function n(e){if(this._capacity=i(e),this._length=0,this._front=0,o(e)){for(var t=e.length,r=0;r<t;++r)this[r]=e[r];this._length=t}}function i(e){if("number"!=typeof e){if(!o(e))return 16;e=e.length}return function(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,1+(e|=e>>16)}(Math.min(Math.max(16,e),1073741824))}n.prototype.toArray=function(){for(var e=this._length,t=new Array(e),r=this._front,n=this._capacity,i=0;i<e;++i)t[i]=this[r+i&n-1];return t},n.prototype.push=function(e){var t=arguments.length,r=this._length;if(t>1){var n=this._capacity;if(r+t>n){for(o=0;o<t;++o){this._checkCapacity(r+1);this[i=this._front+r&this._capacity-1]=arguments[o],r++,this._length=r}return r}for(var i=this._front,o=0;o<t;++o)this[i+r&n-1]=arguments[o],i++;return this._length=r+t,r+t}if(0===t)return r;this._checkCapacity(r+1);return this[o=this._front+r&this._capacity-1]=e,this._length=r+1,r+1},n.prototype.pop=function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1,r=this[t];return this[t]=void 0,this._length=e-1,r}},n.prototype.shift=function(){var e=this._length;if(0!==e){var t=this._front,r=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length=e-1,r}},n.prototype.unshift=function(e){var t=this._length,r=arguments.length;if(r>1){if(t+r>(s=this._capacity)){for(i=r-1;i>=0;i--){this._checkCapacity(t+1);s=this._capacity;this[o=(this._front-1&s-1^s)-s]=arguments[i],t++,this._length=t,this._front=o}return t}for(var n=this._front,i=r-1;i>=0;i--){var o=(n-1&s-1^s)-s;this[o]=arguments[i],n=o}return this._front=n,this._length=t+r,t+r}if(0===r)return t;this._checkCapacity(t+1);var s=this._capacity;return this[i=(this._front-1&s-1^s)-s]=e,this._length=t+1,this._front=i,t+1},n.prototype.peekBack=function(){var e=this._length;if(0!==e){return this[this._front+e-1&this._capacity-1]}},n.prototype.peekFront=function(){if(0!==this._length)return this[this._front]},n.prototype.get=function(e){var t=e;if(t===(0|t)){var r=this._length;if(t<0&&(t+=r),!(t<0||t>=r))return this[this._front+t&this._capacity-1]}},n.prototype.isEmpty=function(){return 0===this._length},n.prototype.clear=function(){for(var e=this._length,t=this._front,r=this._capacity,n=0;n<e;++n)this[t+n&r-1]=void 0;this._length=0,this._front=0},n.prototype.toString=function(){return this.toArray().toString()},n.prototype.valueOf=n.prototype.toString,n.prototype.removeFront=n.prototype.shift,n.prototype.removeBack=n.prototype.pop,n.prototype.insertFront=n.prototype.unshift,n.prototype.insertBack=n.prototype.push,n.prototype.enqueue=n.prototype.push,n.prototype.dequeue=n.prototype.shift,n.prototype.toJSON=n.prototype.toArray,Object.defineProperty(n.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}}),n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(i(1.5*this._capacity+16))},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var r=this._front,n=this._length;if(r+n>t){!function(e,t,r,n,i){for(var o=0;o<i;++o)r[o+n]=e[o+t],e[o+t]=void 0}(this,0,this,t,r+n&t-1)}};var o=Array.isArray;t.exports=n},{}],507:[function(e,t,r){function n(e,t,r){o(this,{type:e,name:e,cause:"string"!=typeof t?t:r,message:t&&"string"!=typeof t?t.message:t},"ewr")}function i(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),n.call(this,"CustomError",e,t)}var o=e("prr");i.prototype=new Error,t.exports=function(e){var t=function(t,r){return function(e,t,r){var o=function(r,i){n.call(this,t,r,i),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee)};return o.prototype=r?new r:new i,o}(e,t,r)};return{CustomError:i,FilesystemError:t("FilesystemError"),createError:t}}},{prr:509}],508:[function(e,t,r){var n=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},n.forEach(function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e}),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError},{"./custom":507}],509:[function(e,t,r){!function(e,r,n){void 0!==t&&t.exports?t.exports=n():r.prr=n()}(0,this,function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e};return function(t,r,n,i){var o;if(i=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}}(n,i),"object"==typeof r){for(o in r)Object.hasOwnProperty.call(r,o)&&(i.value=r[o],e(t,o,i));return t}return e(t,r,i)}})},{}],510:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),n=(c=r.slice()).length,u=0;u<n;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=s;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],511:[function(e,t,r){"use strict";function n(e,t,r,n,i,o){this._color=e,this.key=t,this.value=r,this.left=n,this.right=i,this._count=o}function i(e){return new n(e._color,e.key,e.value,e.left,e.right,e._count)}function o(e,t){return new n(e,t.key,t.value,t.left,t.right,t._count)}function s(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function a(e,t){this._compare=e,this.root=t}function u(e,t){if(t.left){if(r=u(e,t.left))return r}var r=e(t.key,t.value);return r||(t.right?u(e,t.right):void 0)}function c(e,t,r,n){if(t(e,n.key)<=0){if(n.left){if(i=c(e,t,r,n.left))return i}var i=r(n.key,n.value);if(i)return i}if(n.right)return c(e,t,r,n.right)}function f(e,t,r,n,i){var o,s=r(e,i.key),a=r(t,i.key);if(s<=0){if(i.left&&(o=f(e,t,r,n,i.left)))return o;if(a>0&&(o=n(i.key,i.value)))return o}if(a>0&&i.right)return f(e,t,r,n,i.right)}function l(e,t){this.tree=e,this._stack=t}function d(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}t.exports=function(e){return new a(e||function(e,t){return e<t?-1:e>t?1:0},null)};var h=0,p=1,b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var e=[];return this.forEach(function(t,r){e.push(t)}),e}}),Object.defineProperty(b,"values",{get:function(){var e=[];return this.forEach(function(t,r){e.push(r)}),e}}),Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}}),b.insert=function(e,t){for(var r=this._compare,i=this.root,u=[],c=[];i;){var f=r(e,i.key);u.push(i),c.push(f),i=f<=0?i.left:i.right}u.push(new n(h,e,t,null,null,1));for(l=u.length-2;l>=0;--l){i=u[l];c[l]<=0?u[l]=new n(i._color,i.key,i.value,u[l+1],i.right,i._count+1):u[l]=new n(i._color,i.key,i.value,i.left,u[l+1],i._count+1)}for(var l=u.length-1;l>1;--l){var d=u[l-1],i=u[l];if(d._color===p||i._color===p)break;var b=u[l-2];if(b.left===d)if(d.left===i){if(!(y=b.right)||y._color!==h){if(b._color=h,b.left=d.right,d._color=p,d.right=b,u[l-2]=d,u[l-1]=i,s(b),s(d),l>=3){(v=u[l-3]).left===b?v.left=d:v.right=d}break}d._color=p,b.right=o(p,y),b._color=h,l-=1}else{if(!(y=b.right)||y._color!==h){if(d.right=i.left,b._color=h,b.left=i.right,i._color=p,i.left=d,i.right=b,u[l-2]=i,u[l-1]=d,s(b),s(d),s(i),l>=3){(v=u[l-3]).left===b?v.left=i:v.right=i}break}d._color=p,b.right=o(p,y),b._color=h,l-=1}else if(d.right===i){if(!(y=b.left)||y._color!==h){if(b._color=h,b.right=d.left,d._color=p,d.left=b,u[l-2]=d,u[l-1]=i,s(b),s(d),l>=3){(v=u[l-3]).right===b?v.right=d:v.left=d}break}d._color=p,b.left=o(p,y),b._color=h,l-=1}else{var y=b.left;if(!y||y._color!==h){if(d.left=i.right,b._color=h,b.right=i.left,i._color=p,i.right=d,i.left=b,u[l-2]=i,u[l-1]=d,s(b),s(d),s(i),l>=3){var v=u[l-3];v.right===b?v.right=i:v.left=i}break}d._color=p,b.left=o(p,y),b._color=h,l-=1}}return u[0]._color=p,new a(r,u[0])},b.forEach=function(e,t,r){if(this.root)switch(arguments.length){case 1:return u(e,this.root);case 2:return c(t,this._compare,e,this.root);case 3:if(this._compare(t,r)>=0)return;return f(t,r,this._compare,e,this.root)}},Object.defineProperty(b,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new l(this,e)}}),Object.defineProperty(b,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new l(this,e)}}),b.at=function(e){if(e<0)return new l(this,[]);for(var t=this.root,r=[];;){if(r.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new l(this,r);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new l(this,[])},b.ge=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o<=0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new l(this,n)},b.gt=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o<0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new l(this,n)},b.lt=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o>0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new l(this,n)},b.le=function(e){for(var t=this._compare,r=this.root,n=[],i=0;r;){var o=t(e,r.key);n.push(r),o>=0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new l(this,n)},b.find=function(e){for(var t=this._compare,r=this.root,n=[];r;){var i=t(e,r.key);if(n.push(r),0===i)return new l(this,n);r=i<=0?r.left:r.right}return new l(this,[])},b.remove=function(e){var t=this.find(e);return t?t.remove():this},b.get=function(e){for(var t=this._compare,r=this.root;r;){var n=t(e,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var y=l.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new l(this.tree,this._stack.slice())},y.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),r=e[e.length-1];t[t.length-1]=new n(r._color,r.key,r.value,r.left,r.right,r._count);for(l=e.length-2;l>=0;--l){(r=e[l]).left===e[l+1]?t[l]=new n(r._color,r.key,r.value,t[l+1],r.right,r._count):t[l]=new n(r._color,r.key,r.value,r.left,t[l+1],r._count)}if((r=t[t.length-1]).left&&r.right){var u=t.length;for(r=r.left;r.right;)t.push(r),r=r.right;var c=t[u-1];t.push(new n(r._color,c.key,c.value,r.left,r.right,r._count)),t[u-1].key=r.key,t[u-1].value=r.value;for(l=t.length-2;l>=u;--l)r=t[l],t[l]=new n(r._color,r.key,r.value,r.left,t[l+1],r._count);t[u-1].left=t[u]}if((r=t[t.length-1])._color===h){var f=t[t.length-2];f.left===r?f.left=null:f.right===r&&(f.right=null),t.pop();for(l=0;l<t.length;++l)t[l]._count--;return new a(this.tree._compare,t[0])}if(r.left||r.right){r.left?d(r,r.left):r.right&&d(r,r.right),r._color=p;for(l=0;l<t.length-1;++l)t[l]._count--;return new a(this.tree._compare,t[0])}if(1===t.length)return new a(this.tree._compare,null);for(var l=0;l<t.length;++l)t[l]._count--;var b=t[t.length-2];return function(e){for(var t,r,n,a,u=e.length-1;u>=0;--u){if(t=e[u],0===u)return void(t._color=p);if((r=e[u-1]).left===t){if((n=r.right).right&&n.right._color===h)return n=r.right=i(n),a=n.right=i(n.right),r.right=n.left,n.left=r,n.right=a,n._color=r._color,t._color=p,r._color=p,a._color=p,s(r),s(n),u>1&&((c=e[u-2]).left===r?c.left=n:c.right=n),void(e[u-1]=n);if(n.left&&n.left._color===h)return n=r.right=i(n),a=n.left=i(n.left),r.right=a.left,n.left=a.right,a.left=r,a.right=n,a._color=r._color,r._color=p,n._color=p,t._color=p,s(r),s(n),s(a),u>1&&((c=e[u-2]).left===r?c.left=a:c.right=a),void(e[u-1]=a);if(n._color===p){if(r._color===h)return r._color=p,void(r.right=o(h,n));r.right=o(h,n);continue}n=i(n),r.right=n.left,n.left=r,n._color=r._color,r._color=h,s(r),s(n),u>1&&((c=e[u-2]).left===r?c.left=n:c.right=n),e[u-1]=n,e[u]=r,u+1<e.length?e[u+1]=t:e.push(t),u+=2}else{if((n=r.left).left&&n.left._color===h)return n=r.left=i(n),a=n.left=i(n.left),r.left=n.right,n.right=r,n.left=a,n._color=r._color,t._color=p,r._color=p,a._color=p,s(r),s(n),u>1&&((c=e[u-2]).right===r?c.right=n:c.left=n),void(e[u-1]=n);if(n.right&&n.right._color===h)return n=r.left=i(n),a=n.right=i(n.right),r.left=a.right,n.right=a.left,a.right=r,a.left=n,a._color=r._color,r._color=p,n._color=p,t._color=p,s(r),s(n),s(a),u>1&&((c=e[u-2]).right===r?c.right=a:c.left=a),void(e[u-1]=a);if(n._color===p){if(r._color===h)return r._color=p,void(r.left=o(h,n));r.left=o(h,n);continue}if(n=i(n),r.left=n.right,n.right=r,n._color=r._color,r._color=h,s(r),s(n),u>1){var c=e[u-2];c.right===r?c.right=n:c.left=n}e[u-1]=n,e[u]=r,u+1<e.length?e[u+1]=t:e.push(t),u+=2}}}(t),b.left===r?b.left=null:b.right=null,new a(this.tree._compare,t[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var r=this.tree.root;return r?r._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var n=t.length-2;n>=0;--n)t[n+1]===t[n].right&&(++e,t[n].left&&(e+=t[n].left._count));return e},enumerable:!0}),y.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),y.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var r=new Array(t.length),i=t[t.length-1];r[r.length-1]=new n(i._color,i.key,e,i.left,i.right,i._count);for(var o=t.length-2;o>=0;--o)(i=t[o]).left===t[o+1]?r[o]=new n(i._color,i.key,i.value,r[o+1],i.right,i._count):r[o]=new n(i._color,i.key,i.value,i.left,r[o+1],i._count);return new a(this.tree._compare,r[0])},y.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],512:[function(e,t,r){var n=e("util"),i=/[\{\[]/,o=/[\}\]]/;t.exports=function(){var e=[],t=0,r=function(r){for(var n="";n.length<2*t;)n+="  ";e.push(n+r)},s=function(e){return e?o.test(e.trim()[0])&&i.test(e[e.length-1])?(t--,r(n.format.apply(n,arguments)),t++,s):i.test(e[e.length-1])?(r(n.format.apply(n,arguments)),t++,s):o.test(e.trim()[0])?(t--,r(n.format.apply(n,arguments)),s):(r(n.format.apply(n,arguments)),s):s};return s.toString=function(){return e.join("\n")},s.toFunction=function(e){var t="return ("+s.toString()+")",r=Object.keys(e||{}).map(function(e){return e}),n=r.map(function(t){return e[t]});return Function.apply(null,r.concat(t)).apply(null,n)},arguments.length&&s.apply(null,arguments),s}},{util:774}],513:[function(e,t,r){var n=e("is-property"),i=function(e,t){return n(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};i.valid=n,i.property=function(e){return n(e)?e:JSON.stringify(e)},t.exports=i},{"is-property":534}],514:[function(e,t,r){"use strict";var n=e("to-object-x"),i=e("to-property-key-x"),o=Object.prototype.hasOwnProperty;t.exports=function(e,t){return o.call(n(e),i(t))}},{"to-object-x":759,"to-property-key-x":761}],515:[function(e,t,r){"use strict";t.exports="function"==typeof Symbol&&"symbol"==typeof Symbol("")},{}],516:[function(e,t,r){"use strict";t.exports=e("has-symbol-support-x")&&"symbol"==typeof Symbol.toStringTag},{"has-symbol-support-x":515}],517:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,l=r?i-1:0,d=r?-1:1,h=e[t+l];for(l+=d,o=h&(1<<-f)-1,h>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+e[t+l],l+=d,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=c}return(h?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+h]=255&s,h+=p,s/=256,c-=8);e[r+h-p]|=128*b}},{}],518:[function(e,t,r){(function(e){"use strict";function r(){c=!0;for(var e,t,r=f.length;r;){for(t=f,f=[],e=-1;++e<r;)t[e]();r=f.length}c=!1}var n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(r),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var u=new e.MessageChannel;u.port1.onmessage=r,n=function(){u.port2.postMessage(0)}}var c,f=[];t.exports=function(e){1!==f.push(e)||c||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],519:[function(e,t,r){"use strict";t.exports=1/0},{}],520:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],521:[function(e,t,r){"use strict";var n,i,o=e("attempt-x"),s=e("is-object-like-x"),a="function"==typeof ArrayBuffer,u=!1;if(a){if(e("has-to-string-tag-x")){var c=e("object-get-own-property-descriptor-x")(ArrayBuffer.prototype,"byteLength");if(c&&"function"==typeof c.get){var f=o(function(){return new ArrayBuffer(4)});!1===f.threw&&s(f.value)&&(f=o.call(f.value,c.get),u=!1===f.threw&&"number"==typeof f.value&&c.get)}}!1===u&&(n=e("to-string-tag-x"),i="[object ArrayBuffer]")}t.exports=function(e){if(!1===a||!1===s(e))return!1;if(!1===u)return n(e)===i;var t=o.call(e,u);return!1===t.threw&&"number"==typeof t.value}},{"attempt-x":39,"has-to-string-tag-x":516,"is-object-like-x":532,"object-get-own-property-descriptor-x":566,"to-string-tag-x":763}],522:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],523:[function(e,t,r){"use strict";var n=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(e){return"object"==typeof e&&null!==e&&(o?function(e){try{return n.call(e),!0}catch(e){return!1}}(e):"[object Date]"===i.call(e))}},{}],524:[function(e,t,r){"use strict";var n=e("to-boolean-x");t.exports=function(e){return!1===n(e)}},{"to-boolean-x":756}],525:[function(e,t,r){"use strict";var n=e("is-nan-x"),i=e("infinity-x");t.exports=function(e){return"number"==typeof e&&!1===n(e)&&e!==i&&e!==-i}},{"infinity-x":519,"is-nan-x":530}],526:[function(e,t,r){"use strict";var n=e("attempt-x"),i=Function.prototype.toString,o=e("to-boolean-x"),s=e("is-falsey-x"),a=e("to-string-tag-x"),u=e("has-to-string-tag-x"),c=e("is-primitive"),f=e("normalize-space-x"),l=e("replace-comments-x"),d=/^class /,h=d.test,p=!1===n(function(){return Function('"use strict"; return class My {};')()}).threw,b=function(e){var t=n(function(e){return h.call(d,f(l(i.call(e)," ")))},e);return!1===t.threw&&t.value};t.exports=function(e){if(c(e))return!1;if(u)return function(e,t){return!(p&&!1===t&&b(e)||!1!==n.call(e,i).threw)}(e,o(arguments[1]));if(p&&s(arguments[1])&&b(e))return!1;var t=a(e);return"[object Function]"===t||"[object GeneratorFunction]"===t||"[object AsyncFunction]"===t}},{"attempt-x":39,"has-to-string-tag-x":516,"is-falsey-x":524,"is-primitive":533,"normalize-space-x":565,"replace-comments-x":628,"to-boolean-x":756,"to-string-tag-x":763}],527:[function(e,t,r){"use strict";var n=e("safe-to-string-x"),i=e("to-integer-x"),o=e("to-number-x"),s=e("math-clamp-x"),a=e("max-safe-integer"),u=/^(?:0|[1-9]\d*)$/,c=u.test;t.exports=function(e){var t=n(e);if(!1===c.call(u,t))return!1;var r=o(t);return arguments.length>1?r<s(i(arguments[1]),a):r<a}},{"math-clamp-x":559,"max-safe-integer":561,"safe-to-string-x":742,"to-integer-x":757,"to-number-x":758}],528:[function(e,t,r){r["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,r.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,r.time=/^\d{2}:\d{2}:\d{2}$/,r.email=/^\S+@\S+$/,r["ip-address"]=r.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,r.ipv6=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.uri=/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,r.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,r.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,r.alpha=/^[a-zA-Z]+$/,r.alphanumeric=/^[a-zA-Z0-9]+$/,r.style=/\s*(.+?):\s*([^;]+);?/g,r.phone=/^\+(?:[0-9] ?){6,14}[0-9]$/,r["utc-millisec"]=/^[0-9]{1,15}\.?[0-9]{0,15}$/},{}],529:[function(e,t,r){var n=e("generate-object-property"),i=e("generate-function"),o=e("jsonpointer"),s=e("xtend"),a=e("./formats"),u=function(e){e=JSON.stringify(e);for(var t=/\[([^\[\]"]+)\]/;t.test(e);)e=e.replace(t,'."+$1+"');return e},c={};c.any=function(){return"true"},c.null=function(e){return e+" === null"},c.boolean=function(e){return"typeof "+e+' === "boolean"'},c.array=function(e){return"Array.isArray("+e+")"},c.object=function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},c.number=function(e){return"typeof "+e+' === "number" && isFinite('+e+")"},c.integer=function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},c.string=function(e){return"typeof "+e+' === "string"'};var f=function(e,t,r,l,d){var h=d?s(a,d.formats):a,p={unique:function(e){for(var t=[],r=0;r<e.length;r++)t.push("object"==typeof e[r]?JSON.stringify(e[r]):e[r]);for(r=1;r<t.length;r++)if(t.indexOf(t[r])!==r)return!1;return!0},formats:h,isMultipleOf:function(e,t){var r,n=(0|t)!==t?Math.pow(10,t.toString().split(".").pop().length):1;r=n>1?((0|e)!==e?Math.pow(10,e.toString().split(".").pop().length):1)>n||Math.round(n*e)%(n*t):e%t;return!r}},b=!!d&&!!d.verbose,y=!(!d||void 0===d.greedy)&&d.greedy,v={},_=function(e){return e+(v[e]=(v[e]||0)+1)},m={},g=function(e){if(m[e])return m[e];var t=_("pattern");return p[t]=new RegExp(e),m[e]=t,t},w=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],x=function(){var e=w.shift();return w.push(e+e[0]),e},k=function(e,i,s,l){var v=i.properties,m=i.type,w=!1;Array.isArray(i.items)&&(v={},i.items.forEach(function(e,t){v[t]=e}),m="array",w=!0);var S=0,E=function(t,r,n){j("errors++"),!0===s&&(j("if (validate.errors === null) validate.errors = []"),b?j("validate.errors.push({field:%s,message:%s,value:%s,type:%s})",u(r||e),JSON.stringify(t),n||e,JSON.stringify(m)):j("validate.errors.push({field:%s,message:%s})",u(r||e),JSON.stringify(t)))};!0===i.required?(S++,j("if (%s === undefined) {",e),E("is required"),j("} else {")):(S++,j("if (%s !== undefined) {",e));var O=[].concat(m).map(function(t){if(t&&!c.hasOwnProperty(t))throw new Error("Unknown type: "+t);return c[t||"any"](e)}).join(" || ")||"true";if("true"!==O&&(S++,j("if (!(%s)) {",O),E("is the wrong type"),j("} else {")),w)if(!1===i.additionalItems)j("if (%s.length > %d) {",e,i.items.length),E("has additional items"),j("}");else if(i.additionalItems){A=x();j("for (var %s = %d; %s < %s.length; %s++) {",A,i.items.length,A,e,A),k(e+"["+A+"]",i.additionalItems,s,l),j("}")}if(i.format&&h[i.format]){"string"!==m&&a[i.format]&&j("if (%s) {",c.string(e));T=_("format");p[T]=h[i.format],"function"==typeof p[T]?j("if (!%s(%s)) {",T,e):j("if (!%s.test(%s)) {",T,e),E("must be "+i.format+" format"),j("}"),"string"!==m&&a[i.format]&&j("}")}if(Array.isArray(i.required)){j("if ((%s)) {","object"!==m?c.object(e):"true"),j("var missing = 0"),i.required.map(function(t){var r=n(e,t);j("if (%s === undefined) {",r),E("is required",r),j("missing++"),j("}")}),j("}"),y||(j("if (missing === 0) {"),S++)}if(i.uniqueItems&&("array"!==m&&j("if (%s) {",c.array(e)),j("if (!(unique(%s))) {",e),E("must be unique"),j("}"),"array"!==m&&j("}")),i.enum){var C=i.enum.some(function(e){return"object"==typeof e})?function(t){return"JSON.stringify("+e+") !== JSON.stringify("+JSON.stringify(t)+")"}:function(t){return e+" !== "+JSON.stringify(t)};j("if (%s) {",i.enum.map(C).join(" && ")||"false"),E("must be an enum value"),j("}")}if(i.dependencies&&("object"!==m&&j("if (%s) {",c.object(e)),Object.keys(i.dependencies).forEach(function(t){var r=i.dependencies[t];"string"==typeof r&&(r=[r]);Array.isArray(r)&&(j("if (%s !== undefined && !(%s)) {",n(e,t),r.map(function(t){return n(e,t)+" !== undefined"}).join(" && ")||"true"),E("dependencies not set"),j("}")),"object"==typeof r&&(j("if (%s !== undefined) {",n(e,t)),k(e,r,s,l),j("}"))}),"object"!==m&&j("}")),i.additionalProperties||!1===i.additionalProperties){"object"!==m&&j("if (%s) {",c.object(e));var A=x(),P=_("keys"),M=Object.keys(v||{}).map(function(e){return P+"["+A+"] !== "+JSON.stringify(e)}).concat(Object.keys(i.patternProperties||{}).map(function(e){return"!"+g(e)+".test("+P+"["+A+"])"})).join(" && ")||"true";j("var %s = Object.keys(%s)",P,e)("for (var %s = 0; %s < %s.length; %s++) {",A,A,P,A)("if (%s) {",M),!1===i.additionalProperties?(l&&j("delete %s",e+"["+P+"["+A+"]]"),E("has additional properties",null,JSON.stringify(e+".")+" + "+P+"["+A+"]")):k(e+"["+P+"["+A+"]]",i.additionalProperties,s,l),j("}")("}"),"object"!==m&&j("}")}if(i.$ref){var R=function(e,t,r){var n=function(e){return e&&e.id===r?e:"object"==typeof e&&e?Object.keys(e).reduce(function(t,r){return t||n(e[r])},null):null},i=n(e);if(i)return i;r=r.replace(/^#/,""),r=r.replace(/\/$/,"");try{return o.get(e,decodeURI(r))}catch(e){var s,a=r.indexOf("#");if(0!==a)if(-1===a)s=t[r];else{var u=r.slice(0,a);s=t[u];var c=r.slice(a).replace(/^#/,"");try{return o.get(s,c)}catch(e){}}else s=t[r];return s||null}}(r,d&&d.schemas||{},i.$ref);if(R){var I=t[i.$ref];I||(t[i.$ref]=function(e){return I(e)},I=f(R,t,r,!1,d));var T=_("ref");p[T]=I,j("if (!(%s(%s))) {",T,e),E("referenced schema does not match"),j("}")}}if(i.not){L=_("prev");j("var %s = errors",L),k(e,i.not,!1,l),j("if (%s === errors) {",L),E("negative schema matches"),j("} else {")("errors = %s",L)("}")}if(i.items&&!w){"array"!==m&&j("if (%s) {",c.array(e));A=x();j("for (var %s = 0; %s < %s.length; %s++) {",A,A,e,A),k(e+"["+A+"]",i.items,s,l),j("}"),"array"!==m&&j("}")}if(i.patternProperties){"object"!==m&&j("if (%s) {",c.object(e));var P=_("keys"),A=x();j("var %s = Object.keys(%s)",P,e)("for (var %s = 0; %s < %s.length; %s++) {",A,A,P,A),Object.keys(i.patternProperties).forEach(function(t){var r=g(t);j("if (%s.test(%s)) {",r,P+"["+A+"]"),k(e+"["+P+"["+A+"]]",i.patternProperties[t],s,l),j("}")}),j("}"),"object"!==m&&j("}")}if(i.pattern){var D=g(i.pattern);"string"!==m&&j("if (%s) {",c.string(e)),j("if (!(%s.test(%s))) {",D,e),E("pattern mismatch"),j("}"),"string"!==m&&j("}")}if(i.allOf&&i.allOf.forEach(function(t){k(e,t,s,l)}),i.anyOf&&i.anyOf.length){L=_("prev");i.anyOf.forEach(function(t,r){0===r?j("var %s = errors",L):j("if (errors !== %s) {",L)("errors = %s",L),k(e,t,!1,!1)}),i.anyOf.forEach(function(e,t){t&&j("}")}),j("if (%s !== errors) {",L),E("no schemas match"),j("}")}if(i.oneOf&&i.oneOf.length){var L=_("prev"),B=_("passes");j("var %s = errors",L)("var %s = 0",B),i.oneOf.forEach(function(t,r){k(e,t,!1,!1),j("if (%s === errors) {",L)("%s++",B)("} else {")("errors = %s",L)("}")}),j("if (%s !== 1) {",B),E("no (or more than one) schemas match"),j("}")}for(void 0!==i.multipleOf&&("number"!==m&&"integer"!==m&&j("if (%s) {",c.number(e)),j("if (!isMultipleOf(%s, %d)) {",e,i.multipleOf),E("has a remainder"),j("}"),"number"!==m&&"integer"!==m&&j("}")),void 0!==i.maxProperties&&("object"!==m&&j("if (%s) {",c.object(e)),j("if (Object.keys(%s).length > %d) {",e,i.maxProperties),E("has more properties than allowed"),j("}"),"object"!==m&&j("}")),void 0!==i.minProperties&&("object"!==m&&j("if (%s) {",c.object(e)),j("if (Object.keys(%s).length < %d) {",e,i.minProperties),E("has less properties than allowed"),j("}"),"object"!==m&&j("}")),void 0!==i.maxItems&&("array"!==m&&j("if (%s) {",c.array(e)),j("if (%s.length > %d) {",e,i.maxItems),E("has more items than allowed"),j("}"),"array"!==m&&j("}")),void 0!==i.minItems&&("array"!==m&&j("if (%s) {",c.array(e)),j("if (%s.length < %d) {",e,i.minItems),E("has less items than allowed"),j("}"),"array"!==m&&j("}")),void 0!==i.maxLength&&("string"!==m&&j("if (%s) {",c.string(e)),j("if (%s.length > %d) {",e,i.maxLength),E("has longer length than allowed"),j("}"),"string"!==m&&j("}")),void 0!==i.minLength&&("string"!==m&&j("if (%s) {",c.string(e)),j("if (%s.length < %d) {",e,i.minLength),E("has less length than allowed"),j("}"),"string"!==m&&j("}")),void 0!==i.minimum&&("number"!==m&&"integer"!==m&&j("if (%s) {",c.number(e)),j("if (%s %s %d) {",e,i.exclusiveMinimum?"<=":"<",i.minimum),E("is less than minimum"),j("}"),"number"!==m&&"integer"!==m&&j("}")),void 0!==i.maximum&&("number"!==m&&"integer"!==m&&j("if (%s) {",c.number(e)),j("if (%s %s %d) {",e,i.exclusiveMaximum?">=":">",i.maximum),E("is more than maximum"),j("}"),"number"!==m&&"integer"!==m&&j("}")),v&&Object.keys(v).forEach(function(t){Array.isArray(m)&&-1!==m.indexOf("null")&&j("if (%s !== null) {",e),k(n(e,t),v[t],s,l),Array.isArray(m)&&-1!==m.indexOf("null")&&j("}")});S--;)j("}")},j=i("function validate(data) {")("if (data === undefined) data = null")("validate.errors = null")("var errors = 0");return k("data",e,l,d&&d.filter),j("return errors === 0")("}"),j=j.toFunction(p),j.errors=null,Object.defineProperty&&Object.defineProperty(j,"error",{get:function(){return j.errors?j.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""}}),j.toJSON=function(){return e},j};t.exports=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),f(e,{},e,!0,t)},t.exports.filter=function(e,r){var n=t.exports(e,s(r,{filter:!0}));return function(e){return n(e),e}}},{"./formats":528,"generate-function":512,"generate-object-property":513,jsonpointer:538,xtend:783}],530:[function(e,t,r){"use strict";t.exports=function(e){return e!=e}},{}],531:[function(e,t,r){"use strict";var n=e("validate.io-undefined"),i=e("lodash.isnull");t.exports=function(e){return i(e)||n(e)}},{"lodash.isnull":557,"validate.io-undefined":780}],532:[function(e,t,r){"use strict";var n=e("is-function-x"),i=e("is-primitive");t.exports=function(e){return!1===i(e)&&!1===n(e,!0)}},{"is-function-x":526,"is-primitive":533}],533:[function(e,t,r){"use strict";t.exports=function(e){return null==e||"function"!=typeof e&&"object"!=typeof e}},{}],534:[function(e,t,r){"use strict";t.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},{}],535:[function(e,t,r){"use strict";var n=String.prototype.valueOf,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(e){return"string"==typeof e||"object"==typeof e&&(o?function(e){try{return n.call(e),!0}catch(e){return!1}}(e):"[object String]"===i.call(e))}},{}],536:[function(e,t,r){"use strict";var n=Object.prototype.toString;if("function"==typeof Symbol&&"symbol"==typeof Symbol()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;t.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==n.call(e))return!1;try{return function(e){return"symbol"==typeof e.valueOf()&&o.test(i.call(e))}(e)}catch(e){return!1}}}else t.exports=function(e){return!1}},{}],537:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],538:[function(e,t,r){function n(e){return a.test(e)?e.replace(u,function(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}):e}function i(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e))return e;throw new Error("Invalid JSON pointer.")}function o(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var r=(t=i(t)).length;if(1===r)return e;for(var o=1;o<r;){if(e=e[n(t[o++])],r===o)return e;if("object"!=typeof e)return}}function s(e,t,r){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=i(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,r){for(var i,o,s=1,a=t.length;s<a&&(i=n(t[s++]),o=a>s,void 0===e[i]&&(Array.isArray(e)&&"-"===i&&(i=e.length),o&&(""!==t[s]&&t[s]<1/0||"-"===t[s]?e[i]=[]:e[i]={})),o);)e=e[i];var u=e[i];return void 0===r?delete e[i]:e[i]=r,u}(e,t,r)}var a=/~/,u=/~[01]/g;r.get=o,r.set=s,r.compile=function(e){var t=i(e);return{get:function(e){return o(e,t)},set:function(e,r){return s(e,t,r)}}}},{}],539:[function(e,t,r){function n(e){this.opts=e||{},this.encodings=i}var i=e("./lib/encodings");t.exports=n,n.prototype._encoding=function(e){return"string"==typeof e&&(e=i[e]),e||(e=i.id),e},n.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},n.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},n.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},n.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},n.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},n.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},n.prototype.encodeBatch=function(e,t){var r=this;return e.map(function(e){var n={type:e.type,key:r.encodeKey(e.key,t,e)};return r.keyAsBuffer(t,e)&&(n.keyEncoding="binary"),e.prefix&&(n.prefix=e.prefix),"value"in e&&(n.value=r.encodeValue(e.value,t,e),r.valueAsBuffer(t,e)&&(n.valueEncoding="binary")),n})};var o=["lt","gt","lte","gte","start","end"];n.prototype.encodeLtgt=function(e){var t=this,r={};return Object.keys(e).forEach(function(n){r[n]=o.indexOf(n)>-1?t.encodeKey(e[n],e):e[n]}),r},n.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(r,n){return{key:t.decodeKey(r,e),value:t.decodeValue(n,e)}}:e.keys?function(r){return t.decodeKey(r,e)}:e.values?function(r,n){return t.decodeValue(n,e)}:function(){}},n.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},n.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},{"./lib/encodings":540}],540:[function(e,t,r){(function(e){function t(t){return void 0===t||null===t||e.isBuffer(t)}r.utf8=r["utf-8"]={encode:function(e){return t(e)?e:String(e)},decode:function(e){return"string"==typeof e?e:String(e)},buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},r.binary={encode:function(r){return t(r)?r:new e(r)},decode:function(e){return e},buffer:!0,type:"binary"},r.none={encode:function(e){return e},decode:function(e){return e},buffer:!1,type:"id"},r.id=r.none;["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach(function(n){r[n]={encode:function(r){return t(r)?r:new e(r,n)},decode:function(e){return e.toString(n)},buffer:!0,type:n}})}).call(this,e("buffer").Buffer)},{buffer:61}],541:[function(e,t,r){var n=e("errno").create,i=n("LevelUPError"),o=n("NotFoundError",i);o.prototype.notFound=!0,o.prototype.status=404,t.exports={LevelUPError:i,InitializationError:n("InitializationError",i),OpenError:n("OpenError",i),ReadError:n("ReadError",i),WriteError:n("WriteError",i),NotFoundError:o,EncodingError:n("EncodingError",i)}},{errno:508}],542:[function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t);o.call(this,s(t,{objectMode:!0})),this._iterator=e,this._destroyed=!1,this._decoder=null,t&&t.decoder&&(this._decoder=t.decoder),this.on("end",this._cleanup.bind(this))}var i=e("inherits"),o=e("readable-stream").Readable,s=e("xtend"),a=e("level-errors").EncodingError;t.exports=n,i(n,o),n.prototype._read=function(){var e=this;this._destroyed||this._iterator.next(function(t,r,n){if(!e._destroyed){if(t)return e.emit("error",t);if(void 0===r&&void 0===n)e.push(null);else{if(!e._decoder)return e.push({key:r,value:n});try{n=e._decoder(r,n)}catch(t){return e.emit("error",new a(t)),void e.push(null)}e.push(n)}}})},n.prototype.destroy=n.prototype._cleanup=function(){var e=this;this._destroyed||(this._destroyed=!0,this._iterator.end(function(t){if(t)return e.emit("error",t);e.emit("close")}))}},{inherits:520,"level-errors":541,"readable-stream":549,xtend:783}],543:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],544:[function(e,t,r){(function(r){function n(e){if(!(this instanceof n))return new n(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",function(){if(this.allowHalfOpen||this._writableState.ended)return;r.nextTick(this.end.bind(this))})}t.exports=n;var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},o=e("core-util-is");o.inherits=e("inherits");var s=e("./_stream_readable"),a=e("./_stream_writable");o.inherits(n,s),function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(i(a.prototype),function(e){n.prototype[e]||(n.prototype[e]=a.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":546,"./_stream_writable":548,_process:609,"core-util-is":481,inherits:520}],545:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":547,"core-util-is":481,inherits:520}],546:[function(e,t,r){(function(r){function n(t,r){var n=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(v||(v=e("string_decoder/").StringDecoder),this.decoder=new v(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");if(!(this instanceof i))return new i(t);this._readableState=new n(t,this),this.readable=!0,b.call(this)}function o(e,t,n,i,o){var s=function(e,t){var r=null;y.isBuffer(t)||y.isString(t)||y.isNullOrUndefined(t)||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,n);if(s)e.emit("error",s);else if(y.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,a(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&o){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||o||i||(n=t.decoder.write(n)),o||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&a(e)),function(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){!function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}(e,t)}))}(e,t);else o||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function s(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||y.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=m)e=m;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function a(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(function(){u(e)}):u(e))}function u(e){_("emit readable"),e.emit("readable"),c(e)}function c(e){var t=e._readableState;if(_("flow",t.flowing),t.flowing)do{var r=e.read()}while(null!==r&&t.flowing)}function f(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):h.concat(n,i),n.length=0;else if(e<n[0].length){r=(f=n[0]).slice(0,e),n[0]=f.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new h(e);for(var a=0,u=0,c=n.length;u<c&&a<e;u++){var f=n[0],l=Math.min(e-a,f.length);o?r+=f.slice(0,l):f.copy(r,a,0,l),l<f.length?n[0]=f.slice(l):n.shift(),a+=l}}return r}function l(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}t.exports=i;var d=e("isarray"),h=e("buffer").Buffer;i.ReadableState=n;var p=e("events").EventEmitter;p.listenerCount||(p.listenerCount=function(e,t){return e.listeners(t).length});var b=e("stream"),y=e("core-util-is");y.inherits=e("inherits");var v,_=e("util");_=_&&_.debuglog?_.debuglog("stream"):function(){},y.inherits(i,b),i.prototype.push=function(e,t){var r=this._readableState;return y.isString(e)&&!r.objectMode&&(t=t||r.defaultEncoding)!==r.encoding&&(e=new h(e,t),t=""),o(this,r,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.setEncoding=function(t){return v||(v=e("string_decoder/").StringDecoder),this._readableState.decoder=new v(t),this._readableState.encoding=t,this};var m=8388608;i.prototype.read=function(e){_("read",e);var t=this._readableState,r=e;if((!y.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?l(this):a(this),null;if(0===(e=s(e,t))&&t.ended)return 0===t.length&&l(this),null;var n=t.needReadable;_("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&_("length less than watermark",n=!0),(t.ended||t.reading)&&_("reading or ended",n=!1),n&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=s(r,t));var i;return i=e>0?f(e,t):null,y.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&l(this),y.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){_("onunpipe"),e===h&&o()}function i(){_("onend"),e.end()}function o(){_("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",v),e.removeListener("error",a),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",o),h.removeListener("data",s),!b.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){_("ondata");!1===e.write(t)&&(_("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function a(t){_("onerror",t),l(),e.removeListener("error",a),0===p.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),l()}function f(){_("onfinish"),e.removeListener("close",u),l()}function l(){_("unpipe"),h.unpipe(e)}var h=this,b=this._readableState;switch(b.pipesCount){case 0:b.pipes=e;break;case 1:b.pipes=[b.pipes,e];break;default:b.pipes.push(e)}b.pipesCount+=1,_("pipe count=%d opts=%j",b.pipesCount,t);var y=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:o;b.endEmitted?r.nextTick(y):h.once("end",y),e.on("unpipe",n);var v=function(e){return function(){var t=e._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&p.listenerCount(e,"data")&&(t.flowing=!0,c(e))}}(h);return e.on("drain",v),h.on("data",s),e._events&&e._events.error?d(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",f),e.emit("pipe",h),b.flowing||(_("pipe resume"),h.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i;return-1===(i=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=b.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&a(this);else{var o=this;r.nextTick(function(){_("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(_("resume"),e.flowing=!0,e.reading||(_("resume read 0"),this.read(0)),function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(function(){!function(e,t){t.resumeScheduled=!1,e.emit("resume"),c(e),t.flowing&&!t.reading&&e.read(0)}(e,t)}))}(this,e)),this},i.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(_("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(_("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)y.isFunction(e[i])&&y.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){_("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=f}).call(this,e("_process"))},{"./_stream_duplex":544,_process:609,buffer:61,"core-util-is":481,events:510,inherits:520,isarray:543,stream:744,"string_decoder/":550,util:59}],547:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);o.call(this,e),this._transformState=new function(e,t){this.afterTransform=function(e,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,s.isNullOrUndefined(r)||e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){s.isFunction(this._flush)?this._flush(function(e){i(t,e)}):i(t)})}function i(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=n;var o=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(n,o),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,r){throw new Error("not implemented")},n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(e){var t=this._transformState;s.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":544,"core-util-is":481,inherits:520}],548:[function(e,t,r){(function(r){function n(t,n){var i=e("./_stream_duplex"),o=(t=t||{}).highWaterMark,c=t.objectMode?16:16384;this.highWaterMark=o||0===o?o:c,this.objectMode=!!t.objectMode,n instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){n?r.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i));e._writableState.errorEmitted=!0,e.emit("error",i)}(e,n,i,t,o);else{var c=u(e,n);c||n.corked||n.bufferProcessing||!n.buffer.length||a(e,n),i?r.nextTick(function(){s(e,n,c,o)}):s(e,n,c,o)}}(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function i(t){var r=e("./_stream_duplex");if(!(this instanceof i||this instanceof r))return new i(t);this._writableState=new n(t,this),this.writable=!0,h.call(this)}function o(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function s(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),f(e,t)}function a(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var r=[],n=0;n<t.buffer.length;n++)r.push(t.buffer[n].callback);t.pendingcb++,o(e,t,!0,t.length,t.buffer,"",function(e){for(var n=0;n<r.length;n++)t.pendingcb--,r[n](e)}),t.buffer=[]}else{for(n=0;n<t.buffer.length;n++){var i=t.buffer[n],s=i.chunk,a=i.encoding,u=i.callback,c=t.objectMode?1:s.length;if(o(e,t,!1,c,s,a,u),t.writing){n++;break}}n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}t.bufferProcessing=!1}function u(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function c(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function f(e,t){var r=u(0,t);return r&&(0===t.pendingcb?(c(e,t),t.finished=!0,e.emit("finish")):c(e,t)),r}t.exports=i;var l=e("buffer").Buffer;i.WritableState=n;var d=e("core-util-is");d.inherits=e("inherits");var h=e("stream");d.inherits(i,h),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,n){var i=this._writableState,s=!1;return d.isFunction(t)&&(n=t,t=null),d.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),d.isFunction(n)||(n=function(){}),i.ended?function(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}(this,0,n):function(e,t,n,i){var o=!0;if(!(d.isBuffer(n)||d.isString(n)||d.isNullOrUndefined(n)||t.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}(this,i,e,n)&&(i.pendingcb++,s=function(e,t,r,n,i){r=function(e,t,r){return!e.objectMode&&!1!==e.decodeStrings&&d.isString(t)&&(t=new l(t,r)),t}(t,r,n),d.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new function(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}(r,n,i)):o(e,t,!1,s,r,n,i),a}(this,i,e,t,n)),s},i.prototype.cork=function(){this._writableState.corked++},i.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||a(this,e))},i.prototype._write=function(e,t,r){r(new Error("not implemented"))},i.prototype._writev=null,i.prototype.end=function(e,t,n){var i=this._writableState;d.isFunction(e)?(n=e,e=null,t=null):d.isFunction(t)&&(n=t,t=null),d.isNullOrUndefined(e)||this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,f(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}(this,i,n)}}).call(this,e("_process"))},{"./_stream_duplex":544,_process:609,buffer:61,"core-util-is":481,inherits:520,stream:744}],549:[function(e,t,r){(function(n){(r=t.exports=e("./lib/_stream_readable.js")).Stream=e("stream"),r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":544,"./lib/_stream_passthrough.js":545,"./lib/_stream_readable.js":546,"./lib/_stream_transform.js":547,"./lib/_stream_writable.js":548,_process:609,stream:744}],550:[function(e,t,r){var n=e("buffer").Buffer,i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=function(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0};break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=function(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0};break;default:return void(this.write=function(e){return e.toString(this.encoding)})}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};o.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length);if(!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var n=(t+=e.toString(this.encoding,0,n)).length-1,i=t.charCodeAt(n);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:61}],551:[function(e,t,r){function n(e,t){this._levelup=e,this._codec=t,this.batch=e.db.batch(),this.ops=[],this.length=0}var i=e("./util"),o=e("level-errors").WriteError,s=i.getOptions,a=i.dispatchError;n.prototype.put=function(e,t,r){r=s(r);var n=this._codec.encodeKey(e,r),i=this._codec.encodeValue(t,r);try{this.batch.put(n,i)}catch(e){throw new o(e)}return this.ops.push({type:"put",key:n,value:i}),this.length++,this},n.prototype.del=function(e,t){t=s(t);var r=this._codec.encodeKey(e,t);try{this.batch.del(r)}catch(e){throw new o(e)}return this.ops.push({type:"del",key:r}),this.length++,this},n.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new o(e)}return this.ops=[],this.length=0,this},n.prototype.write=function(e){var t=this._levelup,r=this.ops;try{this.batch.write(function(n){if(n)return a(t,new o(n),e);t.emit("batch",r),e&&e()})}catch(e){throw new o(e)}},t.exports=n},{"./util":553,"level-errors":541}],552:[function(e,t,r){(function(r){function n(e,t){return"function"==typeof e?e:t}function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var o;if(c.call(this),this.setMaxListeners(1/0),"function"==typeof e?((t="object"==typeof t?t:{}).db=e,e=null):"object"==typeof e&&"function"==typeof e.db&&(t=e,e=null),"function"==typeof t&&(n=t,t={}),(!t||"function"!=typeof t.db)&&"string"!=typeof e){if(o=new x("Must provide a location for the database"),n)return r.nextTick(function(){n(o)});throw o}t=O(t),this.options=d(C,t),this._codec=new E(this.options),this._status="new",h(this,"location",e,"e"),this.open(n)}function o(e,t,r){if(!e._isOpening()&&!e.isOpen())return P(e,new _("Database is not open"),r),!0}function s(e,t,r){P(e,new v(t),r)}function a(e,t,r){P(e,new _(t),r)}function u(e){return function(t,r){A()[e](t,r||function(){})}}var c=e("events").EventEmitter,f=e("util").inherits,l=e("util").deprecate,d=e("xtend"),h=e("prr"),p=e("deferred-leveldown"),b=e("level-iterator-stream"),y=e("level-errors"),v=y.WriteError,_=y.ReadError,m=y.NotFoundError,g=y.OpenError,w=y.EncodingError,x=y.InitializationError,k=y.LevelUPError,j=e("./util"),S=e("./batch"),E=e("level-codec"),O=j.getOptions,C=j.defaultOptions,A=e("./leveldown"),P=j.dispatchError;j.isDefined;f(i,c),i.prototype.open=function(e){var t,n,i=this;if(this.isOpen())return e&&r.nextTick(function(){e(null,i)}),this;if(this._isOpening())return e&&this.once("open",function(){e(null,i)});if(this.emit("opening"),this._status="opening",this.db=new p(this.location),"function"!=typeof this.options.db&&"function"!=typeof A)throw new k("missing db factory, you need to set options.db");t=this.options.db||A(),(n=t(this.location)).open(this.options,function(t){if(t)return P(i,new g(t),e);i.db.setDb(n),i.db=n,i._status="open",e&&e(null,i),i.emit("open"),i.emit("ready")})},i.prototype.close=function(e){var t=this;if(this.isOpen())this._status="closing",this.db.close(function(){t._status="closed",t.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=new p(this.location);else{if("closed"==this._status&&e)return r.nextTick(e);"closing"==this._status&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){t.close(e)})}},i.prototype.isOpen=function(){return"open"==this._status},i.prototype._isOpening=function(){return"opening"==this._status},i.prototype.isClosed=function(){return/^clos/.test(this._status)},i.prototype.get=function(e,t,r){var i,s=this;if(r=n(t,r),!o(this,0,r)){if(null===e||void 0===e||"function"!=typeof r)return a(this,"get() requires key and callback arguments",r);t=j.getOptions(t),i=this._codec.encodeKey(e,t),t.asBuffer=this._codec.valueAsBuffer(t),this.db.get(i,t,function(n,i){if(n)return n=/notfound/i.test(n)||n.notFound?new m("Key not found in database ["+e+"]",n):new _(n),P(s,n,r);if(r){try{i=s._codec.decodeValue(i,t)}catch(e){return r(new w(e))}r(null,i)}})}},i.prototype.put=function(e,t,r,i){var a,u,c=this;if(i=n(r,i),null===e||void 0===e)return s(this,"put() requires a key argument",i);o(this,0,i)||(r=O(r),a=this._codec.encodeKey(e,r),u=this._codec.encodeValue(t,r),this.db.put(a,u,r,function(r){if(r)return P(c,new v(r),i);c.emit("put",e,t),i&&i()}))},i.prototype.del=function(e,t,r){var i,a=this;if(r=n(t,r),null===e||void 0===e)return s(this,"del() requires a key argument",r);o(this,0,r)||(t=O(t),i=this._codec.encodeKey(e,t),this.db.del(i,t,function(t){if(t)return P(a,new v(t),r);a.emit("del",e),r&&r()}))},i.prototype.batch=function(e,t,r){var i,a=this;return arguments.length?(r=n(t,r),Array.isArray(e)?void(o(this,0,r)||(t=O(t),i=(i=a._codec.encodeBatch(e,t)).map(function(e){return e.type||void 0===e.key||void 0===e.value||(e.type="put"),e}),this.db.batch(i,t,function(t){if(t)return P(a,new v(t),r);a.emit("batch",e),r&&r()}))):s(this,"batch() requires an array argument",r)):new S(this,this._codec)},i.prototype.approximateSize=l(function(e,t,r,i){var o,s,u=this;if(i=n(r,i),r=O(r),null===e||void 0===e||null===t||void 0===t||"function"!=typeof i)return a(this,"approximateSize() requires start, end and callback arguments",i);o=this._codec.encodeKey(e,r),s=this._codec.encodeKey(t,r),this.db.approximateSize(o,s,function(e,t){if(e)return P(u,new g(e),i);i&&i(null,t)})},"db.approximateSize() is deprecated. Use db.db.approximateSize() instead"),i.prototype.readStream=i.prototype.createReadStream=function(e){return e=d({keys:!0,values:!0},this.options,e),e.keyEncoding=e.keyEncoding,e.valueEncoding=e.valueEncoding,e=this._codec.encodeLtgt(e),e.keyAsBuffer=this._codec.keyAsBuffer(e),e.valueAsBuffer=this._codec.valueAsBuffer(e),"number"!=typeof e.limit&&(e.limit=-1),new b(this.db.iterator(e),d(e,{decoder:this._codec.createStreamDecoder(e)}))},i.prototype.keyStream=i.prototype.createKeyStream=function(e){return this.createReadStream(d(e,{keys:!0,values:!1}))},i.prototype.valueStream=i.prototype.createValueStream=function(e){return this.createReadStream(d(e,{keys:!1,values:!0}))},i.prototype.toString=function(){return"LevelUP"},t.exports=i,t.exports.errors=e("level-errors"),t.exports.destroy=l(u("destroy"),"levelup.destroy() is deprecated. Use leveldown.destroy() instead"),t.exports.repair=l(u("repair"),"levelup.repair() is deprecated. Use leveldown.repair() instead")}).call(this,e("_process"))},{"./batch":551,"./leveldown":59,"./util":553,_process:609,"deferred-leveldown":500,events:510,"level-codec":554,"level-errors":541,"level-iterator-stream":542,prr:611,util:774,xtend:783}],553:[function(e,t,r){e("xtend");t.exports={defaultOptions:{createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0},getOptions:function(e){return"string"==typeof e&&(e={valueEncoding:e}),"object"!=typeof e&&(e={}),e},dispatchError:function(e,t,r){"function"==typeof r?r(t):e.emit("error",t)},isDefined:function(e){return void 0!==e}}},{xtend:783}],554:[function(e,t,r){arguments[4][539][0].apply(r,arguments)},{"./lib/encodings":555,dup:539}],555:[function(e,t,r){(function(e){function t(e){return e}function n(t){return void 0===t||null===t||e.isBuffer(t)}r.utf8=r["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:t,buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},r.binary={encode:function(t){return n(t)?t:new e(t)},decode:t,buffer:!0,type:"binary"},r.id={encode:function(e){return e},decode:function(e){return e},buffer:!1,type:"id"};["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach(function(t){r[t]={encode:function(r){return n(r)?r:new e(r,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}})}).call(this,e("buffer").Buffer)},{buffer:61}],556:[function(e,t,r){"use strict";function n(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,e!==n&&a(this,e)}function o(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function s(e,t,r){c(function(){var n;try{n=t(r)}catch(t){return f.reject(e,t)}n===e?f.reject(e,new TypeError("Cannot resolve promise with itself")):f.resolve(e,n)})}function a(e,t){function r(t){n||(n=!0,f.reject(e,t))}var n=!1,i=u(function(){t(function(t){n||(n=!0,f.resolve(e,t))},r)});"error"===i.status&&r(i.value)}function u(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}var c=e("immediate"),f={},l=["REJECTED"],d=["FULFILLED"],h=["PENDING"];t.exports=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===d||"function"!=typeof t&&this.state===l)return this;var r=new this.constructor(n);if(this.state!==h){s(r,this.state===d?e:t,this.outcome)}else this.queue.push(new o(r,e,t));return r},o.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){f.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},f.resolve=function(e,t){var r=u(function(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}},t);if("error"===r.status)return f.reject(e,r.value);var n=r.value;if(n)a(e,n);else{e.state=d,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},f.reject=function(e,t){e.state=l,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},i.resolve=function(e){return e instanceof this?e:f.resolve(new this(n),e)},i.reject=function(e){var t=new this(n);return f.reject(t,e)},i.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var o=new Array(r),s=0,a=-1,u=new this(n);++a<r;)!function(e,n){t.resolve(e).then(function(e){o[n]=e,++s!==r||i||(i=!0,f.resolve(u,o))},function(e){i||(i=!0,f.reject(u,e))})}(e[a],a);return u},i.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var o=-1,s=new this(n);++o<r;)!function(e){t.resolve(e).then(function(e){i||(i=!0,f.resolve(s,e))},function(e){i||(i=!0,f.reject(s,e))})}(e[o]);return s}},{immediate:518}],557:[function(e,t,r){t.exports=function(e){return null===e}},{}],558:[function(e,t,r){(function(e){function t(e,t){return Object.hasOwnProperty.call(e,t)}function n(e){return void 0!==e&&""!==e}function t(e,t){return Object.hasOwnProperty.call(e,t)}function i(e,t){return Object.hasOwnProperty.call(e,t)&&t}r.compare=function(t,r){if(e.isBuffer(t)){for(var n=Math.min(t.length,r.length),i=0;i<n;i++){var o=t[i]-r[i];if(o)return o}return t.length-r.length}return t<r?-1:t>r?1:0};var o=r.lowerBoundKey=function(e){return i(e,"gt")||i(e,"gte")||i(e,"min")||(e.reverse?i(e,"end"):i(e,"start"))||void 0},s=r.lowerBound=function(e,t){var r=o(e);return r?e[r]:t},a=r.lowerBoundInclusive=function(e){return!t(e,"gt")},u=r.upperBoundInclusive=function(e){return!t(e,"lt")},c=r.lowerBoundExclusive=function(e){return!a(e)},f=r.upperBoundExclusive=function(e){return!u(e)},l=r.upperBoundKey=function(e){return i(e,"lt")||i(e,"lte")||i(e,"max")||(e.reverse?i(e,"start"):i(e,"end"))||void 0},d=r.upperBound=function(e,t){var r=l(e);return r?e[r]:t};r.start=function(e,t){return e.reverse?d(e,t):s(e,t)},r.end=function(e,t){return e.reverse?s(e,t):d(e,t)},r.startInclusive=function(e){return e.reverse?u(e):a(e)},r.endInclusive=function(e){return e.reverse?a(e):u(e)},r.toLtgt=function(e,n,i,o,s){n=n||{},i=i||function(e){return e};var a=arguments.length>3,u=r.lowerBoundKey(e),c=r.upperBoundKey(e);return u?"gt"===u?n.gt=i(e.gt,!1):n.gte=i(e[u],!1):a&&(n.gte=i(o,!1)),c?"lt"===c?n.lt=i(e.lt,!0):n.lte=i(e[c],!0):a&&(n.lte=i(s,!0)),null!=e.reverse&&(n.reverse=!!e.reverse),t(n,"max")&&delete n.max,t(n,"min")&&delete n.min,t(n,"start")&&delete n.start,t(n,"end")&&delete n.end,n},r.contains=function(e,t,i){i=i||r.compare;var o=s(e);if(n(o)){if((u=i(t,o))<0||0===u&&c(e))return!1}var a=d(e);if(n(a)){var u=i(t,a);if(u>0||0===u&&f(e))return!1}return!0},r.filter=function(e,t){return function(n){return r.contains(e,n,t)}}}).call(this,{isBuffer:e("../is-buffer/index.js")})},{"../is-buffer/index.js":522}],559:[function(e,t,r){"use strict";var n=e("to-number-x");t.exports=function(e){var t=n(e),r=arguments.length;if(r<2)return t;var i,o=n(arguments[1]);if(r<3?(i=o,o=0):i=n(arguments[2]),o>i)throw new RangeError('"min" must be less than "max"');return t<o?o:t>i?i:t}},{"to-number-x":758}],560:[function(e,t,r){"use strict";var n=e("to-number-x"),i=e("is-nan-x");t.exports=function(e){var t=n(e);return 0===t||i(t)?t:t>0?1:-1}},{"is-nan-x":530,"to-number-x":758}],561:[function(e,t,r){"use strict";t.exports=9007199254740991},{}],562:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(e("clone")),o=n(e("deep-equal")),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(e,t){Object.keys(e).forEach(function(r){t(e[r],r)})},c=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},f={isArray:function(e){return Array.isArray(e)},each:u},l=function(e){return f.isArray(e)&&!c(e)},d=function(e){return!!e&&("number"!=typeof e&&("string"!=typeof e&&("boolean"!=typeof e&&(!l(e)&&(null!==e&&(!(e instanceof RegExp)&&("function"!=typeof e&&(!(e instanceof Date)&&!c(e)))))))))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&t.field&&(e+=" for field '"+t.field+"'");var r=new Error(e);return r.name="ModifyJsError",r},p={all:function(e,t){return e.every(function(e){return t&&t(e)||e})},each:u,keys:function(e){return Object.keys(e)},has:function(e,t){return e.hasOwnProperty(t)},isObject:function(e){return"object"===(void 0===e?"undefined":s(e))&&null!==e}},b=function(e,t,r){if(r=r||{},!d(t))throw h("Modifier must be an object");var n;if(function(e,t){if(!d(e))return!1;var r=void 0;return f.each(e,function(n,i){var o="$"===i.substr(0,1);if(void 0===r)r=o;else if(r!==o){if(!t)throw new Error("Inconsistent operator: "+JSON.stringify(e));r=!1}}),!!r}(t=i(t))?(n=i(e),p.each(t,function(e,t){var i=_[t];if(!i)throw h("Invalid modifier specified "+t);p.each(e,function(e,o){if(""===o)throw h("An empty update path is not valid.");var s=o.split(".");if(!p.all(s))throw h("The update path '"+o+"' contains an empty field name, which is not allowed.");var a=y(n,s,{noCreate:v[t],forbidArray:"$rename"===t,arrayIndices:r.arrayIndices}),u=s.pop();i(a,u,e,o,n)})})):n=t,r.returnInsteadOfReplacing)return n;p.each(p.keys(e),function(t){"_id"!==t&&delete e[t]}),p.each(n,function(t,r){e[r]=t})},y=function(e,t,r){r=r||{};for(var n=!1,i=0;i<t.length;i++){var o=i===t.length-1,a=t[i];if(!function(e){return l(e)||d(e)}(e)){if(r.noCreate)return;var u=h("cannot use the part '"+a+"' to traverse "+e);throw u.setPropertyError=!0,u}if(e instanceof Array){if(r.forbidArray)return null;if("$"===a){if(n)throw h("Too many positional (i.e. '$') elements");if(!r.arrayIndices||!r.arrayIndices.length)throw h("The positional operator did not find the match needed from the query");a=r.arrayIndices[0],n=!0}else{if(!function(e){return/^[0-9]+$/.test(e)}(a)){if(r.noCreate)return;throw h("can't append to array using string field name ["+a+"]")}a=parseInt(a)}if(o&&(t[i]=a),r.noCreate&&a>=e.length)return;for(;e.length<a;)e.push(null);if(!o)if(e.length===a)e.push({});else if("object"!==s(e[a]))throw h("can't modify field '"+t[i+1]+"' of list value "+JSON.stringify(e[a]))}else if(!(a in e)){if(r.noCreate)return;o||(e[a]={})}if(o)return e;e=e[a]}},v={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},_={$currentDate:function(e,t,r){if("object"===(void 0===r?"undefined":s(r))&&r.hasOwnProperty("$type")){if("date"!==r.$type)throw h("Minimongo does currently only support the date type in $currentDate modifiers",{field:t})}else if(!0!==r)throw h("Invalid $currentDate modifier",{field:t});e[t]=new Date},$min:function(e,t,r){if("number"!=typeof r)throw h("Modifier $min allowed for numbers only",{field:t});if(t in e){if("number"!=typeof e[t])throw h("Cannot apply $min modifier to non-number",{field:t});e[t]>r&&(e[t]=r)}else e[t]=r},$max:function(e,t,r){if("number"!=typeof r)throw h("Modifier $max allowed for numbers only",{field:t});if(t in e){if("number"!=typeof e[t])throw h("Cannot apply $max modifier to non-number",{field:t});e[t]<r&&(e[t]=r)}else e[t]=r},$inc:function(e,t,r){if("number"!=typeof r)throw h("Modifier $inc allowed for numbers only",{field:t});if(t in e){if("number"!=typeof e[t])throw h("Cannot apply $inc modifier to non-number",{field:t});e[t]+=r}else e[t]=r},$set:function(e,t,r){if(!p.isObject(e)){throw(n=h("Cannot set property on non-object field",{field:t})).setPropertyError=!0,n}if(null===e){var n=h("Cannot set property on null",{field:t});throw n.setPropertyError=!0,n}e[t]=r},$setOnInsert:function(e,t,r){},$unset:function(e,t,r){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(e,t,r){if(void 0===e[t]&&(e[t]=[]),!(e[t]instanceof Array))throw h("Cannot apply $push modifier to non-array",{field:t});if(r&&r.$each){var n=r.$each;if(!(n instanceof Array))throw h("$each must be an array",{field:t});var i=void 0;if("$position"in r){if("number"!=typeof r.$position)throw h("$position must be a numeric value",{field:t});if(r.$position<0)throw h("$position in $push must be zero or positive",{field:t});i=r.$position}var o=void 0;if("$slice"in r){if("number"!=typeof r.$slice)throw h("$slice must be a numeric value",{field:t});if(r.$slice>0)throw h("$slice in $push must be zero or negative",{field:t});o=r.$slice}if(r.$sort)throw h("$sort in $push not implemented yet");if(void 0===i)for(a=0;a<n.length;a++)e[t].push(n[a]);else{for(var s=[i,0],a=0;a<n.length;a++)s.push(n[a]);Array.prototype.splice.apply(e[t],s)}void 0!==o&&(e[t]=0===o?[]:e[t].slice(o))}else e[t].push(r)},$pushAll:function(e,t,r){if(!("object"===(void 0===r?"undefined":s(r))&&r instanceof Array))throw h("Modifier $pushAll/pullAll allowed for arrays only");var n=e[t];if(void 0===n)e[t]=r;else{if(!(n instanceof Array))throw h("Cannot apply $pushAll modifier to non-array",{field:t});for(var i=0;i<r.length;i++)n.push(r[i])}},$addToSet:function(e,t,r){var n=!1;if("object"===(void 0===r?"undefined":s(r))){"$each"===Object.keys(r)[0]&&(n=!0)}var i=n?r.$each:[r],a=e[t];if(void 0===a)e[t]=i;else{if(!(a instanceof Array))throw h("Cannot apply $addToSet modifier to non-array",{field:t});p.each(i,function(e){for(var t=0;t<a.length;t++)if(o(e,a[t]))return;a.push(e)})}},$pop:function(e,t,r){if(void 0!==e){var n=e[t];if(void 0!==n){if(!(n instanceof Array))throw h("Cannot apply $pop modifier to non-array",{field:t});"number"==typeof r&&r<0?n.splice(0,1):n.pop()}}},$pull:function(e,t,r){if(void 0!==e){var n=e[t];if(void 0!==n)throw n instanceof Array?h("$pull not implemented yet"):h("Cannot apply $pull/pullAll modifier to non-array",{field:t})}},$pullAll:function(e,t,r){if(!("object"===(void 0===r?"undefined":s(r))&&r instanceof Array))throw h("Modifier $pushAll/pullAll allowed for arrays only",{field:t});if(void 0!==e){var n=e[t];if(void 0!==n){if(!(n instanceof Array))throw h("Cannot apply $pull/pullAll modifier to non-array",{field:t});for(var i=[],a=0;a<n.length;a++){for(var u=!1,c=0;c<r.length;c++)if(o(n[a],r[c])){u=!0;break}u||i.push(n[a])}e[t]=i}}},$rename:function(e,t,r,n,i){if(n===r)throw h("$rename source must differ from target",{field:t});if(null===e)throw h("$rename source field invalid",{field:t});if("string"!=typeof r)throw h("$rename target must be a string",{field:t});if(r.indexOf("\0")>-1)throw h("The 'to' field for $rename cannot contain an embedded null byte",{field:t});if(void 0!==e){var o=e[t];delete e[t];var s=r.split("."),a=y(i,s,{forbidArray:!0});if(null===a)throw h("$rename target field invalid",{field:t});a[s.pop()]=o}},$bit:function(e,t,r){throw h("$bit is not supported",{field:t})}};t.exports=function(e,t,r){if(!r||!r.each)return b(e,t,a({},r,{returnInsteadOfReplacing:!0}))}},{clone:63,"deep-equal":496}],563:[function(e,t,r){function n(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var i=1e3,o=60*i,s=60*o,a=24*s,u=365.25*a;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*o;case"seconds":case"second":case"secs":case"sec":case"s":return r*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t.long?function(e){return n(e,a,"day")||n(e,s,"hour")||n(e,o,"minute")||n(e,i,"second")||e+" ms"}(e):function(e){return e>=a?Math.round(e/a)+"d":e>=s?Math.round(e/s)+"h":e>=o?Math.round(e/o)+"m":e>=i?Math.round(e/i)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],564:[function(e,t,r){"use strict";t.exports=NaN},{}],565:[function(e,t,r){"use strict";var n=e("trim-x"),i=new(0,e("cached-constructors-x").RegExp)("["+e("white-space-x").string+"]+","g"),o="".replace;t.exports=function(e){return o.call(n(e),i," ")}},{"cached-constructors-x":62,"trim-x":767,"white-space-x":782}],566:[function(e,t,r){"use strict";var n,i,o,s=e("to-object-x"),a=e("to-property-key-x"),u=e("is-falsey-x"),c=e("attempt-x"),f="function"==typeof Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor,l=function(e,t){e[a(t)]=0;var r=c(f,e,t);return!1===r.threw&&0===r.value.value};if(f){var d="undefined"!=typeof document&&document;if(!d||l(d.createElement("div"),"sentinel")){var h=c(f,Object("abc"),1);if(!1===h.threw&&h.value&&"b"===h.value.value){if(l({},"sentinel")){var p=!1===c(f,42,"name").threw;o=e("has-symbol-support-x")&&l({},Object(Symbol("")))?p?f:function(e,t){return f(s(e),t)}:p?function(e,t){return f(e,a(t))}:function(e,t){return f(s(e),a(t))}}else n=f}else i=f}}if(u(o)||n||i){var b,y,v=e("has-own-property-x"),_=e("is-primitive"),m=e("is-string"),g=e("is-index-x"),w=e("property-is-enumerable-x"),x=Object.prototype,k=v(x,"__defineGetter__");if(k){var j=x.__lookupGetter__,S=x.__lookupSetter__;b=function(e,t){return j.call(e,t)},y=function(e,t){return S.call(e,t)}}o=function(e,t){var r,o=s(e),u=a(t);if(n&&!1===(r=c.call(Object,n,o,u)).threw)return r.value;var f=m(o)&&g(u,o.length);if(i&&!1===f&&!1===(r=c.call(Object,i,o,u)).threw)return r.value;var l;if(!1===f&&!1===v(o,u))return l;if(l={configurable:!1===_(e)&&!1===f,enumerable:w(o,u)},k){var d=o.__proto__,h=o!==x;h&&(o.__proto__=x);var p=b(o,u),j=y(o,u);if(h&&(o.__proto__=d),p||j)return p&&(l.get=p),j&&(l.set=j),l}return f?(l.value=o.charAt(u),l.writable=!1):(l.value=o[u],l.writable=!0),l}}t.exports=o},{"attempt-x":39,"has-own-property-x":514,"has-symbol-support-x":515,"is-falsey-x":524,"is-index-x":527,"is-primitive":533,"is-string":535,"property-is-enumerable-x":610,"to-object-x":759,"to-property-key-x":761}],567:[function(e,t,r){!function(e,r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r():"function"==typeof define&&define.amd?define([],r):e.objectPath=r()}(this,function(){"use strict";function e(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function t(t){if(!t)return!0;if(s(t)&&0===t.length)return!0;if("string"!=typeof t){for(var r in t)if(e(t,r))return!1;return!0}return!1}function r(e){return o.call(e)}function n(e){var t=parseInt(e);return t.toString()===e?t:e}function i(i){function o(t,r){return i.includeInheritedProps||"number"==typeof r&&Array.isArray(t)||e(t,r)}function a(e,t){if(o(e,t))return e[t]}function u(e,t,r,i){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return u(e,t.split(".").map(n),r,i);var o=t[0],s=a(e,o);return 1===t.length?(void 0!==s&&i||(e[o]=r),s):(void 0===s&&("number"==typeof t[1]?e[o]=[]:e[o]={}),u(e[o],t.slice(1),r,i))}i=i||{};var c=function(e){return Object.keys(c).reduce(function(t,r){return"create"===r?t:("function"==typeof c[r]&&(t[r]=c[r].bind(c,e)),t)},{})};return c.has=function(t,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!t;for(var o=0;o<r.length;o++){var a=n(r[o]);if(!("number"==typeof a&&s(t)&&a<t.length||(i.includeInheritedProps?a in Object(t):e(t,a))))return!1;t=t[a]}return!0},c.ensureExists=function(e,t,r){return u(e,t,r,!0)},c.set=function(e,t,r,n){return u(e,t,r,n)},c.insert=function(e,t,r,n){var i=c.get(e,t);n=~~n,s(i)||(i=[],c.set(e,t,i)),i.splice(n,0,r)},c.empty=function(e,n){if(!t(n)&&null!=e){var i,a;if(i=c.get(e,n)){if("string"==typeof i)return c.set(e,n,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}(i))return c.set(e,n,!1);if("number"==typeof i)return c.set(e,n,0);if(s(i))i.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===r(e)}(i))return c.set(e,n,null);for(a in i)o(i,a)&&delete i[a]}}}},c.push=function(e,t){var r=c.get(e,t);s(r)||(r=[],c.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},c.coalesce=function(e,t,r){for(var n,i=0,o=t.length;i<o;i++)if(void 0!==(n=c.get(e,t[i])))return n;return r},c.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return c.get(e,t.split("."),r);var i=n(t[0]),o=a(e,i);return void 0===o?r:1===t.length?o:c.get(e[i],t.slice(1),r)},c.del=function(e,r){if("number"==typeof r&&(r=[r]),null==e)return e;if(t(r))return e;if("string"==typeof r)return c.del(e,r.split("."));var i=n(r[0]);return o(e,i)?1!==r.length?c.del(e[i],r.slice(1)):(s(e)?e.splice(i,1):delete e[i],e):e},c}var o=Object.prototype.toString,s=Array.isArray||function(e){return"[object Array]"===o.call(e)},a=i();return a.create=i,a.withInheritedProps=i({includeInheritedProps:!0}),a})},{}],568:[function(e,t,r){"use strict";var n,i=parseInt,o=e("white-space-x").string,s=e("to-string-x");if(8===i(o+"08")&&22===i(o+"0x16"))n=function(e,t){return i(s(e),t)};else{var a=e("trim-x"),u=e("cached-constructors-x").Number,c=/^[-+]?0[xX]/,f=c.test;n=function(e,t){var r=a(s(e));return i(r,u(t)||(f.call(c,r)?16:10))}}t.exports=n},{"cached-constructors-x":62,"to-string-x":764,"trim-x":767,"white-space-x":782}],569:[function(e,t,r){"use strict";function n(){this.promise=new u(function(e){e()})}function i(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function o(e,t,r,n,o,s){var a,u=function(e,t){return i(e)+i(t)+"undefined"}(r,n);if(!o&&(a=e._cachedViews=e._cachedViews||{})[u])return a[u];var c=e.info().then(function(i){var c=i.db_name+"-mrview-"+(o?"temp":h.stringMd5(u));return f.upsert(e,"_local/"+s,function(e){e.views=e.views||{};var r=t;-1===r.indexOf("/")&&(r=t+"/"+t);var n=e.views[r]=e.views[r]||{};if(!n[c])return n[c]=!0,e}).then(function(){return e.registerDependentDatabase(c).then(function(t){var i=t.db;i.auto_compaction=!0;var o={name:c,db:i,sourceDB:e,adapter:e.adapter,mapFun:r,reduceFun:n};return o.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return o.seq=e?e.seq:0,a&&o.db.once("destroyed",function(){delete a[u]}),o})})})});return a&&(a[u]=c),c}function s(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function a(e,t){try{e.emit("error",t)}catch(e){f.guardedConsole("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),f.guardedConsole("error",t)}}var u=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("pouchdb-promise")),c=e("pouchdb-collections"),f=e("pouchdb-utils"),l=e("pouchdb-binary-utils"),d=e("pouchdb-collate"),h=e("pouchdb-md5"),p=e("pouchdb-mapreduce-utils");n.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},n.prototype.finish=function(){return this.promise};var b={},y=new n,v=50;t.exports=function(e,t,r,i){function h(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function _(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];t[e].data=l.base64StringToBlobOrBuffer(r.data,r.content_type)})})}(t),t}}function m(e,t,r,n){var i=t[e];void 0!==i&&(n&&(i=encodeURIComponent(JSON.stringify(i))),r.push(e+"="+i))}function g(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function w(e,t){var r=e.descending?"endkey":"startkey",n=e.descending?"startkey":"endkey";if(void 0!==e[r]&&void 0!==e[n]&&d.collate(e[r],e[n])>0)throw new p.QueryParseError("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new p.QueryParseError("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new p.QueryParseError("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var r=function(e){if(e){if("number"!=typeof e)return new p.QueryParseError('Invalid value for integer: "'+e+'"');if(e<0)return new p.QueryParseError('Invalid value for positive integer: "'+e+'"')}}(e[t]);if(r)throw r})}function x(e){return function(t){if(404===t.status)return e;throw t}}function k(e){var t="string"==typeof e?e:e.name,r=b[t];return r||(r=b[t]=new n),r}function j(e){return p.sequentialize(k(e),function(){return function(e){function r(){return e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:l,limit:v}).then(function(t){var n=t.results;if(n.length){var b=function(t){for(var r=new c.Map,n=0,u=t.length;n<u;n++){var f=t[n];if("_"!==f.doc._id[0]){i=[],(o=f.doc)._deleted||function(e,t,r){try{t(r)}catch(t){a(e,t)}}(e.sourceDB,s,o),i.sort(function(e,t){var r=d.collate(e.key,t.key);return 0!==r?r:d.collate(e.value,t.value)});var h=function(e){for(var t,r=new c.Map,n=0,i=e.length;n<i;n++){var o=e[n],s=[o.key,o.id];n>0&&0===d.collate(o.key,t)&&s.push(n),r.set(d.toIndexableString(s),o),t=o.key}return r}(i);r.set(f.doc._id,[h,f.changes])}l=f.seq}return r}(n);if(h.add(function(t,r){return function(){return function(e,t,r){return e.db.get("_local/lastSeq").catch(x({_id:"_local/lastSeq",seq:0})).then(function(n){var i=p.mapToKeysArray(t);return u.all(i.map(function(r){return function(e,t,r){var n="_local/doc_"+e,i={_id:n,keys:[]},o=r.get(e),s=o[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(o[1])?u.resolve(i):t.db.get(n).catch(x(i))).then(function(e){return function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):u.resolve({rows:[]})}(e).then(function(t){return function(e,t){for(var r=[],n=new c.Set,i=0,o=t.rows.length;i<o;i++){var a=t.rows[i].doc;if(a&&(r.push(a),n.add(a._id),a._deleted=!s.has(a._id),!a._deleted)){var u=s.get(a._id);"value"in u&&(a.value=u.value)}}var f=p.mapToKeysArray(s);return f.forEach(function(e){if(!n.has(e)){var t={_id:e},i=s.get(e);"value"in i&&(t.value=i.value),r.push(t)}}),e.keys=p.uniq(f.concat(e.keys)),r.push(e),r}(e,t)})})}(r,e,t)})).then(function(t){var i=f.flatten(t);return n.seq=r,i.push(n),e.db.bulkDocs({docs:i})})})}(e,t,r)}}(b,l)),!(n.length<v))return r()}})}var i,o,s=t(e.mapFun,function(e,t){var r={id:o._id,key:d.normalizeKey(e)};void 0!==t&&null!==t&&(r.value=d.normalizeKey(t)),i.push(r)}),l=e.seq||0,h=new n;return r().then(function(){return h.finish()}).then(function(){e.seq=l})}(e)})()}function S(e,t){return p.sequentialize(k(e),function(){return function(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(t<r||t>r))return e.doc.value}var n=d.parseIndexableString(e.doc._id);return{key:n[0],id:n[1],value:"value"in e.doc?e.doc.value:null}})})}function i(n){var i;if(i=s?function(e,t,n){0===n.group_level&&delete n.group_level;var i=n.group||n.group_level,o=r(e.reduceFun),s=[],u=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;t.forEach(function(e){var t=s[s.length-1],r=i?e.key:null;if(i&&Array.isArray(r)&&(r=r.slice(0,u)),t&&0===d.collate(t.groupKey,r))return t.keys.push([e.key,e.id]),void t.values.push(e.value);s.push({keys:[[e.key,e.id]],values:[e.value],groupKey:r})}),t=[];for(var c=0,f=s.length;c<f;c++){var l=s[c],h=function(e,t,r,n,i){try{return{output:t(r,n,i)}}catch(t){return a(e,t),{error:t}}}(e.sourceDB,o,l.keys,l.values,!1);if(h.error&&h.error instanceof p.BuiltInError)throw h.error;t.push({value:h.error?null:h.output,key:l.groupKey})}return{rows:function(e,t,r){return r=r||0,"number"==typeof t?e.slice(r,t+r):r>0?e.slice(r):e}(t,n.limit,n.skip)}}(e,n,t):{total_rows:o,offset:l,rows:n},t.include_docs){var u=p.uniq(n.map(h));return e.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t=new c.Map;return e.rows.forEach(function(e){t.set(e.id,e.doc)}),n.forEach(function(e){var r=h(e),n=t.get(r);n&&(e.doc=n)}),i})}return i}var o,s=e.reduceFun&&!1!==t.reduce,l=t.skip||0;if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){var b=t.keys.map(function(e){return n({startkey:d.toIndexableString([e]),endkey:d.toIndexableString([e,{}])})});return u.all(b).then(f.flatten).then(i)}var y,v,_={descending:t.descending};if("start_key"in t&&(y=t.start_key),"startkey"in t&&(y=t.startkey),"end_key"in t&&(v=t.end_key),"endkey"in t&&(v=t.endkey),void 0!==y&&(_.startkey=t.descending?d.toIndexableString([y,{}]):d.toIndexableString([y])),void 0!==v){var m=!1!==t.inclusive_end;t.descending&&(m=!m),_.endkey=d.toIndexableString(m?[v,{}]:[v])}if(void 0!==t.key){var g=d.toIndexableString([t.key]),w=d.toIndexableString([t.key,{}]);_.descending?(_.endkey=g,_.startkey=w):(_.startkey=g,_.endkey=w)}return s||("number"==typeof t.limit&&(_.limit=t.limit),_.skip=l),n(_).then(i)}(e,t)})()}return{query:function(t,r,n){var a=this;"function"==typeof r&&(n=r,r={}),r=r?function(e){return e.group_level=g(e.group_level),e.limit=g(e.limit),e.skip=g(e.skip),e}(r):{},"function"==typeof t&&(t={map:t});var c=u.resolve().then(function(){return function(t,r,n){if("function"==typeof t._query)return function(e,t,r){return new u(function(n,i){e._query(t,r,function(e,t){if(e)return i(e);n(t)})})}(t,r,n);if(f.isRemote(t))return function(e,t,r){var n,i=[],o="GET";if(m("reduce",r,i),m("include_docs",r,i),m("attachments",r,i),m("limit",r,i),m("descending",r,i),m("group",r,i),m("group_level",r,i),m("skip",r,i),m("stale",r,i),m("conflicts",r,i),m("startkey",r,i,!0),m("start_key",r,i,!0),m("endkey",r,i,!0),m("end_key",r,i,!0),m("inclusive_end",r,i),m("key",r,i,!0),i=i.join("&"),i=""===i?"":"?"+i,void 0!==r.keys){var a="keys="+encodeURIComponent(JSON.stringify(r.keys));a.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+a:(o="POST","string"==typeof t?n={keys:r.keys}:t.keys=r.keys)}if("string"==typeof t){var u=s(t);return e.request({method:o,url:"_design/"+u[0]+"/_view/"+u[1]+i,body:n}).then(function(e){return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(_(r))}return n=n||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?n[e]=t[e]:n[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+i,body:n}).then(_(r))}(t,r,n);if("string"!=typeof r)return w(n,r),y.add(function(){return o(t,"temp_view/temp_view",r.map,r.reduce,!0,e).then(function(e){return p.fin(j(e).then(function(){return S(e,n)}),function(){return e.db.destroy()})})}),y.finish();var a=r,c=s(a),l=c[0],d=c[1];return t.get("_design/"+l).then(function(r){var s=r.views&&r.views[d];if(!s)throw new p.NotFoundError("ddoc "+r._id+" has no view named "+d);return i(r,d),w(n,s),o(t,a,s.map,s.reduce,!1,e).then(function(e){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&f.nextTick(function(){j(e)}),S(e,n)):j(e).then(function(){return S(e,n)})})})}(a,t,r)});return p.promisedCallback(c,n),c},viewCleanup:p.callbackify(function(){var t=this;return"function"==typeof t._viewCleanup?function(e){return new u(function(t,r){e._viewCleanup(function(e,n){if(e)return r(e);t(n)})})}(t):f.isRemote(t)?function(e){return e.request({method:"POST",url:"_view_cleanup"})}(t):function(t){return t.get("_local/"+e).then(function(e){var r=new c.Map;Object.keys(e.views).forEach(function(e){var t=s(e),n="_design/"+t[0],i=t[1],o=r.get(n);o||(o=new c.Set,r.set(n,o)),o.add(i)});var n={keys:p.mapToKeysArray(r),include_docs:!0};return t.allDocs(n).then(function(n){var i={};n.rows.forEach(function(t){var n=t.key.substring(8);r.get(t.key).forEach(function(r){var o=n+"/"+r;e.views[o]||(o=r);var s=Object.keys(e.views[o]),a=t.doc&&t.doc.views&&t.doc.views[r];s.forEach(function(e){i[e]=i[e]||a})})});var o=Object.keys(i).filter(function(e){return!i[e]}).map(function(e){return p.sequentialize(k(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return u.all(o).then(function(){return{ok:!0}})})},x({ok:!0}))}(t)})}}},{"pouchdb-binary-utils":590,"pouchdb-collate":593,"pouchdb-collections":594,"pouchdb-mapreduce-utils":601,"pouchdb-md5":602,"pouchdb-promise":604,"pouchdb-utils":607}],570:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=b.base64StringToBlobOrBuffer(r.data,r.content_type)})}function o(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function s(e){return e._attachments&&Object.keys(e._attachments)?l.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];if(r.data&&"string"!=typeof r.data)return new l(function(e){b.blobOrBufferToBase64(r.data,e)}).then(function(e){r.data=e})})):l.resolve()}function a(e,t){return u(e,e.db+"/"+t)}function u(e,t){var r=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+r+t}function c(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function f(e,t){function r(e,t,r){var n=e.ajax||{},i=d.assign(d.clone(O),n,t),o=d.clone(O.headers||{});return i.headers=d.assign(o,n.headers,t.headers||{}),j.constructor.listeners("debug").length&&j.constructor.emit("debug",["http",i.method,i.url]),j._ajax(i,r)}function n(e,t){return new l(function(n,i){r(e,t,function(e,t){if(e)return i(e);n(t)})})}function f(e,t){return d.adapterFun(e,p(function(e){x().then(function(){return t.apply(this,e)}).catch(function(t){e.pop()(t)})}))}function x(){if(e.skipSetup||e.skip_setup)return l.resolve();if(M)return M;return(M=n({},{method:"GET",url:E}).catch(function(e){return e&&e.status&&404===e.status?(d.explainError(404,"PouchDB is just detecting if the remote exists."),n({},{method:"PUT",url:E})):l.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||l.reject(e)})).catch(function(){M=null}),M}function k(e){return e.split("/").map(encodeURIComponent).join("/")}var j=this,S=function(e,t){if(function(e){if(!e.prefix)return!1;var t=d.parseUri(e.prefix).protocol;return"http"===t||"https"===t}(t)){var r=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(r)}var n=d.parseUri(e);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var i=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=i.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=i.join("/"),n}(e.name,e),E=a(S,""),O=(e=d.clone(e)).ajax||{};if(e.auth||S.auth){var C=e.auth||S.auth,A=C.username+":"+C.password,P=b.btoa(unescape(encodeURIComponent(A)));O.headers=O.headers||{},O.headers.Authorization="Basic "+P}j._ajax=h;var M;d.nextTick(function(){t(null,j)}),j._remote=!0,j.type=function(){return"http"},j.id=f("id",function(e){r({},{method:"GET",url:u(S,"")},function(t,r){var n=r&&r.uuid?r.uuid+S.db:a(S,"");e(null,n)})}),j.request=f("request",function(e,t){e.url=a(S,e.url),r({},e,t)}),j.compact=f("compact",function(e,t){"function"==typeof e&&(t=e,e={}),r(e=d.clone(e),{url:a(S,"_compact"),method:"POST"},function(){function r(){j.info(function(n,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)})}r()})}),j.bulkGet=d.adapterFun("bulkGet",function(e,t){function n(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),e.latest&&(n.latest=!0),r(e,{url:a(S,"_bulk_get"+c(n)),method:"POST",body:{docs:e.docs}},t)}function i(){for(var r=_,n=Math.ceil(e.docs.length/r),i=0,s=new Array(n),a=0;a<n;a++){var u=d.pick(e,["revs","attachments","latest"]);u.ajax=O,u.docs=e.docs.slice(a*r,Math.min(e.docs.length,(a+1)*r)),d.bulkGetShim(o,u,function(e){return function(r,o){s[e]=o.results,++i===n&&t(null,{results:d.flatten(s)})}}(a))}}var o=this,s=u(S,""),f=w[s];"boolean"!=typeof f?n(function(e,r){e?(w[s]=!1,d.explainError(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),i()):(w[s]=!0,t(null,r))}):f?n(t):i()}),j._info=function(e){x().then(function(){r({},{method:"GET",url:a(S,"")},function(t,r){if(t)return e(t);r.host=a(S,""),e(null,r)})}).catch(e)},j.get=f("get",function(e,t,r){function i(e){var r=e._attachments,i=r&&Object.keys(r);if(r&&i.length){return function(e,t){return new l(function(r,n){function i(){++c===f?s?n(s):r():o()}function o(){for(;a<t&&u<f;)a++,e[u++]().then(function(){a--,i()},function(e){a--,s=s||e,i()})}var s,a=0,u=0,c=0,f=e.length;o()})}(i.map(function(i){return function(){return function(i){var s=r[i],u=o(e._id)+"/"+k(i)+"?rev="+e._rev;return n(t,{method:"GET",url:a(S,u),binary:!0}).then(function(e){return t.binary?e:new l(function(t){b.blobOrBufferToBase64(e,t)})}).then(function(e){delete s.stub,delete s.length,s.data=e})}(i)}}),5)}}"function"==typeof t&&(r=t,t={});var s={};(t=d.clone(t)).revs&&(s.revs=!0),t.revs_info&&(s.revs_info=!0),t.latest&&(s.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),s.open_revs=t.open_revs),t.rev&&(s.rev=t.rev),t.conflicts&&(s.conflicts=t.conflicts),e=o(e);var u={method:"GET",url:a(S,e+c(s))};n(t,u).then(function(e){return l.resolve().then(function(){if(t.attachments)return function(e){return Array.isArray(e)?l.all(e.map(function(e){if(e.ok)return i(e.ok)})):i(e)}(e)}).then(function(){r(null,e)})}).catch(function(t){t.docId=e,r(t)})}),j.remove=f("remove",function(e,t,n,i){var s;"string"==typeof t?(s={_id:e,_rev:t},"function"==typeof n&&(i=n,n={})):(s=e,"function"==typeof t?(i=t,n={}):(i=n,n=t));var u=s._rev||n.rev;r(n,{method:"DELETE",url:a(S,o(s._id))+"?rev="+u},i)}),j.getAttachment=f("getAttachment",function(e,t,n,i){"function"==typeof n&&(i=n,n={});var s=n.rev?"?rev="+n.rev:"";r(n,{method:"GET",url:a(S,o(e))+"/"+k(t)+s,binary:!0},i)}),j.removeAttachment=f("removeAttachment",function(e,t,n,i){r({},{method:"DELETE",url:a(S,o(e)+"/"+k(t))+"?rev="+n},i)}),j.putAttachment=f("putAttachment",function(e,t,n,i,s,u){"function"==typeof s&&(u=s,s=i,i=n,n=null);var c=o(e)+"/"+k(t),f=a(S,c);if(n&&(f+="?rev="+n),"string"==typeof i){var l;try{l=b.atob(i)}catch(e){return u(y.createError(y.BAD_ARG,"Attachment is not a valid base64 string"))}i=l?b.binaryStringToBlobOrBuffer(l,s):""}r({},{headers:{"Content-Type":s},method:"PUT",url:f,processData:!1,body:i,timeout:O.timeout||6e4},u)}),j._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,x().then(function(){return l.all(e.docs.map(s))}).then(function(){r(t,{method:"POST",url:a(S,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){if(e)return n(e);t.forEach(function(e){e.ok=!0}),n(null,t)})}).catch(n)},j._put=function(e,t,n){x().then(function(){return s(e)}).then(function(){r(t,{method:"PUT",url:a(S,o(e._id)),body:e},function(t,r){if(t)return t.docId=e&&e._id,n(t);n(null,r)})}).catch(n)},j.allDocs=f("allDocs",function(e,t){"function"==typeof e&&(t=e,e={});var r,o={},s="GET";(e=d.clone(e)).conflicts&&(o.conflicts=!0),e.descending&&(o.descending=!0),e.include_docs&&(o.include_docs=!0),e.attachments&&(o.attachments=!0),e.key&&(o.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(o.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(o.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(o.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(o.limit=e.limit),void 0!==e.skip&&(o.skip=e.skip);var u=c(o);void 0!==e.keys&&(s="POST",r={keys:e.keys}),n(e,{method:s,url:a(S,"_all_docs"+u),body:r}).then(function(r){e.include_docs&&e.attachments&&e.binary&&r.rows.forEach(i),t(null,r)}).catch(t)}),j._changes=function(e){var t="batch_size"in e?e.batch_size:v;!(e=d.clone(e)).continuous||"heartbeat"in e||(e.heartbeat=g);var n="timeout"in e?e.timeout:"timeout"in O?O.timeout:3e4;"timeout"in e&&e.timeout&&n-e.timeout<m&&(n=e.timeout+m),"heartbeat"in e&&e.heartbeat&&n-e.heartbeat<m&&(n=e.heartbeat+m);var o={};"timeout"in e&&e.timeout&&(o.timeout=e.timeout);var s,u=void 0!==e.limit&&e.limit;s="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var f=u;if(e.style&&(o.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(o.include_docs=!0),e.attachments&&(o.attachments=!0),e.continuous&&(o.feed="longpoll"),e.conflicts&&(o.conflicts=!0),e.descending&&(o.descending=!0),"heartbeat"in e&&e.heartbeat&&(o.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(o.filter=e.filter),e.view&&"string"==typeof e.view&&(o.filter="_view",o.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var l in e.query_params)e.query_params.hasOwnProperty(l)&&(o[l]=e.query_params[l]);var h,p="GET";e.doc_ids?(o.filter="_doc_ids",p="POST",h={doc_ids:e.doc_ids}):e.selector&&(o.filter="_selector",p="POST",h={selector:e.selector});var b,y,_=function(i,s){if(!e.aborted){o.since=i,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),e.descending?u&&(o.limit=f):o.limit=!u||f>t?t:f;var l={method:p,url:a(S,"_changes"+c(o)),timeout:n,body:h};y=i,e.aborted||x().then(function(){b=r(e,l,s)}).catch(s)}},w={results:[]},k=function(r,n){if(!e.aborted){var o=0;if(n&&n.results){o=n.results.length,w.last_seq=n.last_seq;({}).query=e.query_params,n.results=n.results.filter(function(t){f--;var r=d.filterChange(e)(t);return r&&(e.include_docs&&e.attachments&&e.binary&&i(t),s&&w.results.push(t),e.onChange(t)),r})}else if(r)return e.aborted=!0,void e.complete(r);n&&n.last_seq&&(y=n.last_seq);var a=u&&f<=0||n&&o<t||e.descending;(!e.continuous||u&&f<=0)&&a?e.complete(null,w):d.nextTick(function(){_(y,k)})}};return _(e.since||0,k),{cancel:function(){e.aborted=!0,b&&b.abort()}}},j.revsDiff=f("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,{method:"POST",url:a(S,"_revs_diff"),body:e},n)}),j._close=function(e){e()},j._destroy=function(e,t){r(e,{url:a(S,""),method:"DELETE"},function(e,r){if(e&&e.status&&404!==e.status)return t(e);t(null,r)})}}var l=n(e("pouchdb-promise")),d=e("pouchdb-utils"),h=n(e("pouchdb-ajax")),p=n(e("argsarray")),b=e("pouchdb-binary-utils"),y=e("pouchdb-errors"),v=25,_=50,m=5e3,g=1e4,w={};f.valid=function(){return!0};t.exports=function(e){e.adapter("http",f,!1),e.adapter("https",f,!1)}},{argsarray:38,"pouchdb-ajax":589,"pouchdb-binary-utils":590,"pouchdb-errors":597,"pouchdb-promise":604,"pouchdb-utils":607}],571:[function(e,t,r){"use strict";function n(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(m.createError(m.IDB_ERROR,r,t.type))}}function i(e,t,r){return{data:x.safeJsonStringify(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function o(e){if(!e)return null;var t=x.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function s(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function a(e,t,r,n){r?n(e?"string"!=typeof e?e:k.base64StringToBlobOrBuffer(e,t):k.blob([""],{type:t})):e?"string"!=typeof e?k.readAsBinaryString(e,function(e){n(k.btoa(e))}):n(e):n("")}function u(e,t,r,n){function i(){++s===o.length&&n&&n()}var o=Object.keys(e._attachments||{});if(!o.length)return n&&n();var s=0;o.forEach(function(n){t.attachments&&t.include_docs?function(e,t){var n=e._attachments[t],o=n.digest;r.objectStore(O).get(o).onsuccess=function(e){n.body=e.target.result.body,i()}}(e,n):(e._attachments[n].stub=!0,i())})}function c(e,t){return w.all(e.map(function(e){if(e.doc&&e.doc._attachments){var r=Object.keys(e.doc._attachments);return w.all(r.map(function(r){var n=e.doc._attachments[r];if("body"in n){var i=n.body,o=n.content_type;return new w(function(s){a(i,o,t,function(t){e.doc._attachments[r]=v.assign(v.pick(n,["digest","content_type"]),{data:t}),s()})})}}))}}))}function f(e,t,r){function n(){--u||function(){if(!i.length)return;i.forEach(function(e){a.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1)).onsuccess=function(t){t.target.result||s.delete(e)}})}()}var i=[],o=r.objectStore(E),s=r.objectStore(O),a=r.objectStore(C),u=e.length;e.forEach(function(e){var r=o.index("_doc_id_rev"),s=t+"::"+e;r.getKey(s).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return n();o.delete(t);a.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var r=t.value.digestSeq.split("::")[0];i.push(r),a.delete(t.primaryKey),t.continue()}else n()}}})}function l(e,t,r){try{return{txn:e.transaction(t,r)}}catch(e){return{error:e}}}function d(e,t,r,n,i){function o(e){c=e.target.result,u&&i(u,c,f)}function s(e){u=e.target.result,c&&i(u,c,f)}function a(e){var t=e.target.result;if(!t)return i();i([t.key],[t.value],t)}var u,c,f;"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&n>1&&!r?(f={continue:function(){if(!u.length)return i();var r,a=u[u.length-1];if(t&&t.upper)try{r=IDBKeyRange.bound(a,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else r=IDBKeyRange.lowerBound(a,!0);t=r,u=null,c=null,e.getAll(t,n).onsuccess=o,e.getAllKeys(t,n).onsuccess=s}},e.getAll(t,n).onsuccess=o,e.getAllKeys(t,n).onsuccess=s):r?e.openCursor(t,"prev").onsuccess=a:e.openCursor(t).onsuccess=a}function h(){!I&&T.length&&(I=!0,T.shift()())}function p(e,t){var r=this;!function(e,t,r){T.push(function(){e(function(e,n){!function(e,t,r,n){try{e(t,r)}catch(t){n.emit("error",t)}}(t,e,n,r),I=!1,v.nextTick(function(){h()})})}),h()}(function(t){!function(e,t,r){var h=t.name,p=null;e._meta=null;e._remote=!1,e.type=function(){return"idb"},e._id=v.toPromise(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(r,s,a){!function(e,t,r,s,a,u){function c(){j&&L&&(j.docCount+=B,x.put(j))}function d(e,t,r,n,o,a){function u(u){var c=e.stemmedRevs||[];n&&s.auto_compaction&&(c=c.concat(_.compactTree(e.metadata))),c&&c.length&&f(c,e.metadata.id,h),l.seq=u.target.result;var d=i(l,t,r);p.put(d).onsuccess=function(){N[o]={ok:!0,id:l.id,rev:l.rev},F.set(e.metadata.id,e.metadata),function(e,t,r){function n(){++i===o.length&&r()}var i=0,o=Object.keys(e.data._attachments||{});if(!o.length)return r();for(var s=0;s<o.length;s++)!function(r){var i=e.data._attachments[r].digest,o=w.put({seq:t,digestSeq:i+"::"+t});o.onsuccess=n,o.onerror=function(e){e.preventDefault(),e.stopPropagation(),n()}}(o[s])}(e,l.seq,a)}}var c=e.data,l=e.metadata;c._doc_id_rev=l.id+"::"+l.rev,delete c._id,delete c._rev;var d=b.put(c);d.onsuccess=u,d.onerror=function(e){e.preventDefault(),e.stopPropagation(),b.index("_doc_id_rev").getKey(c._doc_id_rev).onsuccess=function(e){b.put(c,e.target.result).onsuccess=u}}}for(var h,p,b,v,w,x,k,j,M=t.docs,I=0,T=M.length;I<T;I++){var D=M[I];D._id&&g.isLocalId(D._id)||(D=M[I]=g.parseDoc(D,r.new_edits)).error&&!k&&(k=D)}if(k)return u(k);var L=!1,B=0,N=new Array(M.length),F=new y.Map,q=!1,$=s._meta.blobSupport?"blob":"base64";g.preprocessAttachments(M,$,function(t){if(t)return u(t);!function(){var t=l(a,[S,E,O,P,C,A],"readwrite");if(t.error)return u(t.error);(h=t.txn).onabort=n(u),h.ontimeout=n(u),h.oncomplete=function(){q||(R.notify(s._meta.name),u(null,N))},p=h.objectStore(S),b=h.objectStore(E),v=h.objectStore(O),w=h.objectStore(C),(x=h.objectStore(A)).get(A).onsuccess=function(e){j=e.target.result,c()},function(e){var t=[];if(M.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(r){var n=e.data._attachments[r];n.stub&&t.push(n.digest)})}),!t.length)return e();var r,n=0;t.forEach(function(i){!function(e,t){v.get(e).onsuccess=function(r){if(r.target.result)t();else{var n=m.createError(m.MISSING_STUB,"unknown stub attachment with digest "+e);n.status=412,t(n)}}}(i,function(i){i&&!r&&(r=i),++n===t.length&&e(r)})})}(function(t){if(t)return q=!0,u(t);!function(){function t(){++n===M.length&&g.processDocs(e.revs_limit,M,s,F,h,N,function(e,t,r,n,i,o,s,a){e.metadata.winningRev=t,e.metadata.deleted=r;var u=e.data;if(u._id=e.metadata.id,u._rev=e.metadata.rev,n&&(u._deleted=!0),u._attachments&&Object.keys(u._attachments).length)return function(e,t,r,n,i,o){function s(){u===c.length&&d(e,t,r,n,i,o)}var a=e.data,u=0,c=Object.keys(a._attachments);c.forEach(function(r){var n=e.data._attachments[r];if(n.stub)u++,s();else{var i=n.data;delete n.data,n.revpos=parseInt(t,10),function(e,t,r){v.count(e).onsuccess=function(n){if(n.target.result)return r();var i={digest:e,body:t};v.put(i).onsuccess=r}}(n.digest,i,function(){u++,s()})}})}(e,t,r,i,s,a);B+=o,c(),d(e,t,r,i,s,a)},r,function(){L=!0,c()})}if(M.length)for(var n=0,i=0,a=M.length;i<a;i++){var u=M[i];u._id&&g.isLocalId(u._id)?t():p.get(u.metadata.id).onsuccess=function(e){var r=o(e.target.result);r&&F.set(r.id,r),t()}}}()})}()})}(t,r,s,e,p,a)},e._get=function(e,t,r){function n(){r(u,{doc:i,metadata:a,ctx:c})}var i,a,u,c=t.ctx;if(!c){var f=l(p,[S,E,O],"readonly");if(f.error)return r(f.error);c=f.txn}c.objectStore(S).get(e).onsuccess=function(e){if(!(a=o(e.target.result)))return u=m.createError(m.MISSING_DOC,"missing"),n();var r;if(t.rev)r=t.latest?_.latest(t.rev,a):t.rev;else{r=a.winningRev;if(_.isDeleted(a))return u=m.createError(m.MISSING_DOC,"deleted"),n()}var f=c.objectStore(E),l=a.id+"::"+r;f.index("_doc_id_rev").get(l).onsuccess=function(e){if((i=e.target.result)&&(i=s(i)),!i)return u=m.createError(m.MISSING_DOC,"missing"),n();n()}}},e._getAttachment=function(e,t,r,n,i){var o;if(n.ctx)o=n.ctx;else{var s=l(p,[S,E,O],"readonly");if(s.error)return i(s.error);o=s.txn}var u=r.digest,c=r.content_type;o.objectStore(O).get(u).onsuccess=function(e){a(e.target.result.body,c,n.binary,function(e){i(null,e)})}},e._info=function(t){var r,n,i=l(p,[A,E],"readonly");if(i.error)return t(i.error);var o=i.txn;o.objectStore(A).get(A).onsuccess=function(e){n=e.target.result.docCount},o.objectStore(E).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;r=t?t.key:0},o.oncomplete=function(){t(null,{doc_count:n,update_seq:r,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){!function(e,t,r){function i(t,r,n){var i=t.id+"::"+n;I.get(i).onsuccess=function(n){if(r.doc=s(n.target.result),e.conflicts){var i=_.collectConflicts(t);i.length&&(r.doc._conflicts=i)}u(r.doc,e,j)}}function a(t){for(var r=0,n=t.length;r<n&&T.length!==v;r++){var s=o(t[r]);!function(t,r){var n={id:r.id,key:r.id,value:{rev:t}},o=r.deleted;"ok"===e.deleted?(T.push(n),o?(n.value.deleted=!0,n.doc=null):e.include_docs&&i(r,n,t)):!o&&y--<=0&&(T.push(n),e.include_docs&&i(r,n,t))}(s.winningRev,s)}}function f(){r(null,{total_rows:C,offset:e.skip,rows:T})}var h="startkey"in e&&e.startkey,p="endkey"in e&&e.endkey,b="key"in e&&e.key,y=e.skip||0,v="number"==typeof e.limit?e.limit:-1,g=function(e,t,r,n,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(e){return{error:e}}return null}(h,p,!1!==e.inclusive_end,b,e.descending),w=g&&g.error;if(w&&("DataError"!==w.name||0!==w.code))return r(m.createError(m.IDB_ERROR,w.name,w.message));var x=[S,E,A];e.attachments&&x.push(O);var k=l(t,x,"readonly");if(k.error)return r(k.error);var j=k.txn;j.oncomplete=function(){e.attachments?c(T,e.binary).then(f):f()},j.onabort=n(r);var C,P=j.objectStore(S),M=j.objectStore(E),R=j.objectStore(A),I=M.index("_doc_id_rev"),T=[];R.get(A).onsuccess=function(e){C=e.target.result.docCount},w||0===v||(-1===v?function(e,t,r){if("function"!=typeof e.getAll){var n=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(n.push(t.value),t.continue()):r({target:{result:n}})}}else e.getAll(t).onsuccess=r}(P,g,function(t){var r=t.target.result;e.descending&&(r=r.reverse()),a(r)}):d(P,g,e.descending,v+y,function(e,t,r){r&&(a(t),T.length<v&&r.continue())}))}(e,p,t)},e._changes=function(t){return function(e,t,r,i){function a(e,t,r,n){if(r.seq!==t)return n();if(r.winningRev===e._rev)return n(r,e);var i=e._id+"::"+r.winningRev;k.get(i).onsuccess=function(e){n(r,s(e.target.result))}}function f(){e.complete(null,{results:j,last_seq:b})}if((e=v.clone(e)).continuous){var h=r+":"+v.uuid();return R.addListener(r,h,t,e),R.notify(r),{cancel:function(){R.removeListener(r,h)}}}var p=e.doc_ids&&new y.Set(e.doc_ids);e.since=e.since||0;var b=e.since,_="limit"in e?e.limit:-1;0===_&&(_=1);var m;m="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var g,w,x,k,j=[],C=0,A=v.filterChange(e),P=new y.Map,M=[S,E];e.attachments&&M.push(O);var I=l(i,M,"readonly");if(I.error)return e.complete(I.error);(g=I.txn).onabort=n(e.complete),g.oncomplete=function(){!e.continuous&&e.attachments?c(j).then(f):f()},w=g.objectStore(E),x=g.objectStore(S),k=w.index("_doc_id_rev"),d(w,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,_,function(t,r,n){if(n&&t.length){var i=new Array(t.length),f=new Array(t.length),l=0;r.forEach(function(r,d){!function(e,t,r){if(p&&!p.has(e._id))return r();var n=P.get(e._id);if(n)return a(e,t,n,r);x.get(e._id).onsuccess=function(i){n=o(i.target.result),P.set(e._id,n),a(e,t,n,r)}}(s(r),t[d],function(r,o){f[d]=r,i[d]=o,++l===t.length&&function(){for(var t=0,r=i.length;t<r&&C!==_;t++){var o=i[t];o&&function(t,r){var n=e.processChange(r,t,e);b=n.seq=t.seq;var i=A(n);if("object"==typeof i)return e.complete(i);i&&(C++,m&&j.push(n),e.attachments&&e.include_docs?u(r,e,g,function(){c([n],e.binary).then(function(){e.onChange(n)})}):e.onChange(n))}(f[t],o)}C!==_&&n.continue()}()})})}})}(t,e,h,p)},e._close=function(e){p.close(),D.delete(h),e()},e._getRevisionTree=function(e,t){var r=l(p,[S],"readonly");if(r.error)return t(r.error);r.txn.objectStore(S).get(e).onsuccess=function(e){var r=o(e.target.result);r?t(null,r.rev_tree):t(m.createError(m.MISSING_DOC))}},e._doCompaction=function(e,t,r){var s=l(p,[S,E,O,C],"readwrite");if(s.error)return r(s.error);var a=s.txn;a.objectStore(S).get(e).onsuccess=function(r){var n=o(r.target.result);_.traverseRevTree(n.rev_tree,function(e,r,n,i,o){var s=r+"-"+n;-1!==t.indexOf(s)&&(o.status="missing")}),f(t,e,a);var s=n.winningRev,u=n.deleted;a.objectStore(S).put(i(n,s,u))},a.onabort=n(r),a.oncomplete=function(){r()}},e._getLocal=function(e,t){var r=l(p,[P],"readonly");if(r.error)return t(r.error);var i=r.txn.objectStore(P).get(e);i.onerror=n(t),i.onsuccess=function(e){var r=e.target.result;r?(delete r._doc_id_rev,t(null,r)):t(m.createError(m.MISSING_DOC))}},e._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),delete e._revisions;var i=e._rev,o=e._id;e._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var s,a=t.ctx;if(!a){var u=l(p,[P],"readwrite");if(u.error)return r(u.error);(a=u.txn).onerror=n(r),a.oncomplete=function(){s&&r(null,s)}}var c,f=a.objectStore(P);i?(c=f.get(o)).onsuccess=function(n){var o=n.target.result;if(o&&o._rev===i){f.put(e).onsuccess=function(){s={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,s)}}else r(m.createError(m.REV_CONFLICT))}:((c=f.add(e)).onerror=function(e){r(m.createError(m.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},c.onsuccess=function(){s={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,s)})},e._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={});var i=t.ctx;if(!i){var o=l(p,[P],"readwrite");if(o.error)return r(o.error);(i=o.txn).oncomplete=function(){s&&r(null,s)}}var s,a=e._id,u=i.objectStore(P),c=u.get(a);c.onerror=n(r),c.onsuccess=function(n){var i=n.target.result;i&&i._rev===e._rev?(u.delete(a),s={ok:!0,id:a,rev:"0-0"},t.ctx&&r(null,s)):r(m.createError(m.MISSING_DOC))}},e._destroy=function(e,t){R.removeAllListeners(h);var r=L.get(h);r&&r.result&&(r.result.close(),D.delete(h));var i=indexedDB.deleteDatabase(h);i.onsuccess=function(){L.delete(h),v.hasLocalStorage()&&h in localStorage&&delete localStorage[h],t(null,{ok:!0})},i.onerror=n(t)};var x=D.get(h);if(x)return p=x.idb,e._meta=x.global,v.nextTick(function(){r(null,e)});var I;I=t.storage?function(e,t){try{return indexedDB.open(e,{version:j,storage:t})}catch(t){return indexedDB.open(e,j)}}(h,t.storage):indexedDB.open(h,j);L.set(h,I),I.onupgradeneeded=function(e){function t(){var e=s[a-1];a++,e&&e(n,t)}var r=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(S,{keyPath:"id"});e.createObjectStore(E,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(O,{keyPath:"digest"}),e.createObjectStore(A,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(M),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(P,{keyPath:"_id"});var r=e.createObjectStore(C,{autoIncrement:!0});r.createIndex("seq","seq"),r.createIndex("digestSeq","digestSeq",{unique:!0})}(r);var n=e.currentTarget.transaction;e.oldVersion<3&&function(e){e.createObjectStore(P,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(r),e.oldVersion<4&&function(e){var t=e.createObjectStore(C,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}(r);var s=[function(e,t){var r=e.objectStore(S);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var i=n.value,o=_.isDeleted(i);i.deletedOrLocal=o?"1":"0",r.put(i),n.continue()}else t()}},function(e,t){var r=e.objectStore(P),n=e.objectStore(S),i=e.objectStore(E);n.openCursor().onsuccess=function(e){var o=e.target.result;if(o){var s=o.value,a=s.id,u=_.isLocalId(a),c=_.winningRev(s);if(u){var f=a+"::"+c,l=a+"::",d=a+"::~",h=i.index("_doc_id_rev"),p=IDBKeyRange.bound(l,d,!1,!1),b=h.openCursor(p);b.onsuccess=function(e){if(b=e.target.result){var t=b.value;t._doc_id_rev===f&&r.put(t),i.delete(b.primaryKey),b.continue()}else n.delete(o.primaryKey),o.continue()}}else o.continue()}else t&&t()}},function(e,t){var r=e.objectStore(E),n=e.objectStore(O),i=e.objectStore(C);n.count().onsuccess=function(e){if(!e.target.result)return t();r.openCursor().onsuccess=function(e){var r=e.target.result;if(!r)return t();for(var n=r.value,o=r.primaryKey,s=Object.keys(n._attachments||{}),a={},u=0;u<s.length;u++){var c=n._attachments[s[u]];a[c.digest]=!0}var f=Object.keys(a);for(u=0;u<f.length;u++){var l=f[u];i.put({seq:o,digestSeq:l+"::"+o})}r.continue()}}},function(e){var t=e.objectStore(E),r=e.objectStore(S);r.openCursor().onsuccess=function(e){function n(){var e=i(a,a.winningRev,a.deleted);r.put(e).onsuccess=function(){s.continue()}}var s=e.target.result;if(s){var a=function(e){if(!e.data)return e.deleted="1"===e.deletedOrLocal,e;return o(e)}(s.value);if(a.winningRev=a.winningRev||_.winningRev(a),a.seq)return n();!function(){var e=a.id+"::",r=a.id+"::￿",i=0;t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,r)).onsuccess=function(e){var t=e.target.result;if(!t)return a.seq=i,n();var r=t.primaryKey;r>i&&(i=r),t.continue()}}()}}}],a=e.oldVersion;t()},I.onsuccess=function(t){function n(){void 0!==a&&f&&(e._meta={name:h,instanceId:u,blobSupport:a},D.set(h,{idb:p,global:e._meta}),r(null,e))}function i(){if(void 0!==s&&void 0!==o){var e=h+"_id";e in o?u=o[e]:o[e]=u=v.uuid(),o.docCount=s,c.objectStore(A).put(o)}}(p=t.target.result).onversionchange=function(){p.close(),D.delete(h)},p.onabort=function(e){v.guardedConsole("error","Database has a global failure",e.target.error),p.close(),D.delete(h)};var o,s,a,u,c=p.transaction([A,M,S],"readwrite"),f=!1;c.objectStore(A).get(A).onsuccess=function(e){o=e.target.result||{id:A},i()},function(e,t){e.objectStore(S).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){t(e.target.result)}}(c,function(e){s=e,i()}),b||(b=function(e){return new w(function(t){var r=k.blob([""]);e.objectStore(M).put(r,"key").onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)},e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)}}).catch(function(){return!1})}(c)),b.then(function(e){a=e,n()}),c.oncomplete=function(){f=!0,n()}},I.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";v.guardedConsole("error",e),r(m.createError(m.IDB_ERROR,e))}}(r,e,t)},t,r.constructor)}var b,y=e("pouchdb-collections"),v=e("pouchdb-utils"),_=e("pouchdb-merge"),m=e("pouchdb-errors"),g=e("pouchdb-adapter-utils"),w=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("pouchdb-promise")),x=e("pouchdb-json"),k=e("pouchdb-binary-utils"),j=5,S="document-store",E="by-sequence",O="attach-store",C="attach-seq-store",A="meta-store",P="local-store",M="detect-blob-support",R=new v.changesHandler,I=!1,T=[],D=new y.Map,L=new y.Map;p.valid=function(){return!("undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform))&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};t.exports=function(e){e.adapter("idb",p,!0)}},{"pouchdb-adapter-utils":588,"pouchdb-binary-utils":590,"pouchdb-collections":594,"pouchdb-errors":597,"pouchdb-json":600,"pouchdb-merge":603,"pouchdb-promise":604,"pouchdb-utils":607}],572:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t){var r=new Uint8Array(e);return k.blob([r],{type:t})}function o(e,t){var r=t.prefix()[0],n=e._cache,i=n.get(r);return i||(i=new f.Map,n.set(r,i)),i}function s(){this._batch=[],this._cache=new f.Map}function a(e){return"winningRev"in e?e.winningRev:g.winningRev(e)}function u(e,t){return"deleted"in e?e.deleted:m.isDeleted(e,t)}function c(e,t,r){var n=[];return e.forEach(function(e){if(e.doc&&e.doc._attachments){Object.keys(e.doc._attachments).forEach(function(t){var r=e.doc._attachments[t];"data"in r||n.push(r)})}}),l.all(n.map(function(e){return function(e,t,r){var n=e.content_type;return new l(function(o,s){t.binaryStore.get(e.digest,function(t,a){var u;if(t){if("NotFoundError"!==t.name)return s(t);u=r.binary?k.binaryStringToBlobOrBuffer("",n):""}else u=r.binary?i(a,n):a.toString("base64");delete e.stub,delete e.length,e.data=u,o()})})}(e,t,r)}))}var f=e("pouchdb-collections"),l=n(e("pouchdb-promise")),d=n(e("levelup")),h=n(e("sublevel-pouchdb")),p=e("through2"),b=n(e("argsarray")),y=n(e("double-ended-queue")),v=n(e("buffer-from")),_=e("pouchdb-utils"),m=e("pouchdb-adapter-utils"),g=e("pouchdb-merge"),w=e("pouchdb-json"),x=e("pouchdb-md5"),k=e("pouchdb-binary-utils"),j=e("pouchdb-errors");s.prototype.get=function(e,t,r){var n=o(this,e),i=n.get(t);return i?_.nextTick(function(){r(null,i)}):null===i?_.nextTick(function(){r({name:"NotFoundError"})}):void e.get(t,function(e,i){if(e)return"NotFoundError"===e.name&&n.set(t,null),r(e);n.set(t,i),r(null,i)})},s.prototype.batch=function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],i=o(this,n.prefix);"put"===n.type?i.set(n.key,n.value):i.set(n.key,null)}this._batch=this._batch.concat(e)},s.prototype.execute=function(e,t){for(var r=new f.Set,n=[],i=this._batch.length-1;i>=0;i--){var o=this._batch[i],s=o.prefix.prefix()[0]+"ÿ"+o.key;r.has(s)||(r.add(s),n.push(o))}e.batch(n,t)};var S="document-store",E="by-sequence",O="attach-store",C="attach-binary-store",A="local-store",P="meta-store",M=new f.Map,R="_local_last_update_seq",I="_local_doc_count",T="_local_uuid",D="md5-",L={encode:w.safeJsonStringify,decode:w.safeJsonParse,buffer:!1,type:"cheap-json"},B=new _.changesHandler;t.exports=function(e,t){function r(){V.docStore=z.sublevel(S,{valueEncoding:L}),V.bySeqStore=z.sublevel(E,{valueEncoding:"json"}),V.attachmentStore=z.sublevel(O,{valueEncoding:"json"}),V.binaryStore=z.sublevel(C,{valueEncoding:"binary"}),V.localStore=z.sublevel(A,{valueEncoding:"json"}),V.metaStore=z.sublevel(P,{valueEncoding:"json"}),"object"==typeof e.migrate?e.migrate.doMigrationTwo(z,V,n):n()}function n(){V.metaStore.get(R,function(e,r){void 0===z._updateSeq&&(z._updateSeq=r||0),V.metaStore.get(I,function(e,r){z._docCount=e?0:r,V.metaStore.get(T,function(e,r){U=e?_.uuid():r,V.metaStore.put(T,U,function(){_.nextTick(function(){t(null,W)})})})})})}function o(e,t){try{e.apply(null,t)}catch(e){t[t.length-1](e)}}function w(){var e=z._queue.peekFront();"read"===e.type?function(e){for(var t=[e],r=1,n=z._queue.get(r);void 0!==n&&"read"===n.type;)t.push(n),r++,n=z._queue.get(r);var i=0;t.forEach(function(e){var r=e.args,n=r[r.length-1];r[r.length-1]=b(function(e){n.apply(null,e),++i===t.length&&_.nextTick(function(){t.forEach(function(){z._queue.shift()}),z._queue.length&&w()})}),o(e.fun,r)})}(e):function(e){var t=e.args,r=t[t.length-1];t[t.length-1]=b(function(e){r.apply(null,e),_.nextTick(function(){z._queue.shift(),z._queue.length&&w()})}),o(e.fun,t)}(e)}function N(e){return b(function(t){z._queue.push({fun:e,args:t,type:"write"}),1===z._queue.length&&_.nextTick(w)})}function F(e){return b(function(t){z._queue.push({fun:e,args:t,type:"read"}),1===z._queue.length&&_.nextTick(w)})}function q(e){return("0000000000000000"+e).slice(-16)}function $(e,t){H.destroy(e,t)}var U,z,W=this,V={},K=(e=_.clone(e)).revs_limit,G=e.name;void 0===e.createIfMissing&&(e.createIfMissing=!0);var J,H=e.db,Q=_.functionName(H);M.has(Q)?J=M.get(Q):(J=new f.Map,M.set(Q,J)),J.has(G)?(z=J.get(G),r()):J.set(G,h(d(G,e,function(n){if(n)return J.delete(G),t(n);(z=J.get(G))._docCount=-1,z._queue=new y,"object"==typeof e.migrate?e.migrate.doMigrationOne(G,z,r):r()}))),W._remote=!1,W.type=function(){return"leveldb"},W._id=function(e){e(null,U)},W._info=function(e){var t={doc_count:z._docCount,update_seq:z._updateSeq,backend_adapter:_.functionName(H)};return _.nextTick(function(){e(null,t)})},W._get=F(function(e,t,r){t=_.clone(t),V.docStore.get(e,function(e,n){if(e||!n)return r(j.createError(j.MISSING_DOC,"missing"));var i;if(t.rev)i=t.latest?g.latest(t.rev,n):t.rev;else if(i=a(n),u(n,i))return r(j.createError(j.MISSING_DOC,"deleted"));var o=n.rev_map[i];V.bySeqStore.get(q(o),function(e,t){if(!t)return r(j.createError(j.MISSING_DOC));if("_id"in t&&t._id!==n.id)return r(new Error("wrong doc returned"));if(t._id=n.id,"_rev"in t){if(t._rev!==i)return r(new Error("wrong doc returned"))}else t._rev=i;return r(null,{doc:t,metadata:n})})})}),W._getAttachment=function(e,t,r,n,o){var s=r.digest,a=r.content_type;V.binaryStore.get(s,function(e,t){if(e)return"NotFoundError"!==e.name?o(e):o(null,n.binary?function(e){return k.blob([""],{type:e})}(a):"");n.binary?o(null,i(t,a)):o(null,t.toString("base64"))})},W._bulkDocs=N(function(e,t,r){function n(e,t){var r=l.resolve();e.forEach(function(e,t){r=r.then(function(){return new l(function(r,n){W._doCompactionNoLock(t,e,{ctx:h},function(e){if(e)return n(e);r()})})})}),r.then(function(){t()},t)}function i(e,t,r,n){var i=E[r]||l.resolve();E[r]=i.then(function(){return new l(function(e,t){h.get(V.attachmentStore,r,function(r,n){if(r&&"NotFoundError"!==r.name)return t(r);e(n)})}).then(function(n){var i=[e,t].join("@"),o={};return n?n.refs&&(o.refs=n.refs,o.refs[i]=!0):(o.refs={},o.refs[i]=!0),new l(function(e){h.batch([{type:"put",prefix:V.attachmentStore,key:r,value:o}]),e(!n)})}).then(function(e){n(null,e)},n)})}function o(e){if(e)return _.nextTick(function(){r(e)});h.batch([{prefix:V.metaStore,type:"put",key:R,value:b},{prefix:V.metaStore,type:"put",key:I,value:z._docCount+p}]),h.execute(z,function(e){if(e)return r(e);z._docCount+=p,z._updateSeq=b,B.notify(G),_.nextTick(function(){r(null,u)})})}var a=t.new_edits,u=new Array(e.docs.length),c=new f.Map,d=new f.Map,h=new s,p=0,b=z._updateSeq,y=e.docs,w=y.map(function(e){if(e._id&&m.isLocalId(e._id))return e;var t=m.parseDoc(e,a);return t.metadata&&!t.metadata.rev_map&&(t.metadata.rev_map={}),t}),S=w.filter(function(e){return e.error});if(S.length)return r(S[0]);var E={};if(!w.length)return r(null,[]);!function(e){var t=[];if(y.forEach(function(e){e&&e._attachments&&Object.keys(e._attachments).forEach(function(r){var n=e._attachments[r];n.stub&&t.push(n.digest)})}),!t.length)return e();var r,n=0;t.forEach(function(i){!function(e,t){h.get(V.attachmentStore,e,function(r){if(r){var n=j.createError(j.MISSING_STUB,"unknown stub attachment with digest "+e);t(n)}else t()})}(i,function(i){i&&!r&&(r=i),++n===t.length&&e(r)})})}(function(e){if(e)return r(e);!function(e){function t(){if(++n===y.length)return e(r)}var r,n=0;y.forEach(function(e){if(e._id&&m.isLocalId(e._id))return t();h.get(V.docStore,e._id,function(n,i){n?"NotFoundError"!==n.name&&(r=n):c.set(e._id,i),t()})})}(function(e){if(e)return r(e);m.processDocs(K,w,W,c,h,u,function(e,t,n,o,s,a,f,l){function y(e){w++,g||(e?l(g=e):w===S.length&&m())}function _(e,t,r){return function(n){x.binaryMd5(n,function(e,t,r,n){return function(o){!function(e,t,r,n,o){var s=e.data._attachments[r];delete s.data,s.digest=t,s.length=n.length;var a=e.metadata.id,u=e.metadata.rev;s.revpos=parseInt(u,10),i(a,u,t,function(e,r){return e?o(e):0===n.length?o(e):r?(h.batch([{type:"put",prefix:V.binaryStore,key:t,value:v(n,"binary")}]),void o()):o(e)})}(e,D+o,t,r,n)}}(e,t,n,r))}}function m(){var t=e.metadata.rev_map[e.metadata.rev];if(t)return l();t=++b,e.metadata.rev_map[e.metadata.rev]=e.metadata.seq=t;var r=[{key:q(t),value:e.data,prefix:V.bySeqStore,type:"put"},{key:e.metadata.id,value:e.metadata,prefix:V.docStore,type:"put"}];h.batch(r),u[f]={ok:!0,id:e.metadata.id,rev:e.metadata.rev},c.set(e.metadata.id,e.metadata),l()}p+=a;var g=null,w=0;e.metadata.winningRev=t,e.metadata.deleted=n,e.data._id=e.metadata.id,e.data._rev=e.metadata.rev,o&&(e.data._deleted=!0),e.stemmedRevs.length&&d.set(e.metadata.id,e.stemmedRevs);for(var S=e.data._attachments?Object.keys(e.data._attachments):[],E=0;E<S.length;E++){var O=S[E],C=e.data._attachments[O];if(C.stub)i(e.data._id,e.data._rev,C.digest,y);else{var A;if("string"==typeof C.data){try{A=k.atob(C.data)}catch(e){return void r(j.createError(j.BAD_ARG,"Attachment is not a valid base64 string"))}_(e,O,y)(A)}else!function(e,t){k.readAsBinaryString(e,t)}(C.data,_(e,O,y))}}S.length||m()},t,function(){n(d,function(e){if(e&&o(e),W.auto_compaction)return function(e){var t=new f.Map;c.forEach(function(e,r){t.set(r,g.compactTree(e))}),n(t,e)}(o);o()})})})})}),W._allDocs=F(function(e,t){e=_.clone(e),function(e){z.isClosed()?e(new Error("database is closed")):e(null,z._docCount)}(function(r,n){if(r)return t(r);var i={},o=e.skip||0;if(e.startkey&&(i.gte=e.startkey),e.endkey&&(i.lte=e.endkey),e.key&&(i.gte=i.lte=e.key),e.descending){i.reverse=!0;var s=i.lte;i.lte=i.gte,i.gte=s}var f;if("number"==typeof e.limit&&(f=e.limit),0===f||"start"in i&&"end"in i&&i.start>i.end)return t(null,{total_rows:n,offset:e.skip,rows:[]});var d=[],h=V.docStore.readStream(i),b=p.obj(function(t,r,n){function i(t){var r={id:s.id,key:s.id,value:{rev:c}};if(e.include_docs){if(r.doc=t,r.doc._rev=r.value.rev,e.conflicts){var i=g.collectConflicts(s);i.length&&(r.doc._conflicts=i)}for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}if(!1===e.inclusive_end&&s.id===e.endkey)return n();if(l){if("ok"!==e.deleted)return n();r.value.deleted=!0,r.doc=null}d.push(r),n()}var s=t.value,c=a(s),l=u(s,c);if(l){if("ok"!==e.deleted)return void n()}else{if(o-- >0)return void n();if("number"==typeof f&&f--<=0)return h.unpipe(),h.destroy(),void n()}if(e.include_docs){var p=s.rev_map[c];V.bySeqStore.get(q(p),function(e,t){i(t)})}else i()},function(r){l.resolve().then(function(){if(e.include_docs&&e.attachments)return c(d,V,e)}).then(function(){t(null,{total_rows:n,offset:e.skip,rows:d})},t),r()}).on("unpipe",function(){b.end()});h.on("error",t),h.pipe(b)})}),W._changes=function(e){function t(){e.done=!0,d&&e.limit&&e.limit<o.length&&(o.length=e.limit),v.unpipe(g),v.destroy(),e.continuous||e.cancelled||(e.include_docs&&e.attachments?c(o,V,e).then(function(){e.complete(null,{results:o,last_seq:s})}):e.complete(null,{results:o,last_seq:s}))}if((e=_.clone(e)).continuous){var r=G+":"+_.uuid();return B.addListener(G,r,W,e),B.notify(G),{cancel:function(){B.removeListener(G,r)}}}var n,i=e.descending,o=[],s=e.since||0,u=0,l={reverse:i};"limit"in e&&e.limit>0&&(n=e.limit),l.reverse||(l.start=q(e.since||0));var d,h=e.doc_ids&&new f.Set(e.doc_ids),b=_.filterChange(e),y=new f.Map;d="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var v=V.bySeqStore.readStream(l),g=p.obj(function(r,f,l){function p(t){function r(r){var n=e.processChange(r,t,e);n.seq=t.seq;var i=b(n);if("object"==typeof i)return e.complete(i);i&&(u++,e.attachments&&e.include_docs?c([n],V,e).then(function(){e.onChange(n)}):e.onChange(n),d&&o.push(n)),l()}var n=a(t);if(t.seq!==v)return l();if(s=v,n===_._rev)return r(_);var i=t.rev_map[n];V.bySeqStore.get(q(i),function(e,t){r(t)})}if(n&&u>=n)return t(),l();if(e.cancelled||e.done)return l();var v=function(e){return parseInt(e,10)}(r.key),_=r.value;if(v===e.since&&!i)return l();if(h&&!h.has(_._id))return l();var g;if(g=y.get(_._id))return p(g);V.docStore.get(_._id,function(t,r){if(e.cancelled||e.done||z.isClosed()||m.isLocalId(r.id))return l();y.set(_._id,r),p(r)})},function(t){if(e.cancelled)return t();d&&e.limit&&e.limit<o.length&&(o.length=e.limit),t()}).on("unpipe",function(){g.end(),t()});return v.pipe(g),{cancel:function(){e.cancelled=!0,t()}}},W._close=function(e){if(z.isClosed())return e(j.createError(j.NOT_OPEN));z.close(function(t){t?e(t):(J.delete(G),e())})},W._getRevisionTree=function(e,t){V.docStore.get(e,function(e,r){e?t(j.createError(j.MISSING_DOC)):t(null,r.rev_tree)})},W._doCompaction=N(function(e,t,r,n){W._doCompactionNoLock(e,t,r,n)}),W._doCompactionNoLock=function(e,t,r,n){if("function"==typeof r&&(n=r,r={}),!t.length)return n();var i=r.ctx||new s;i.get(V.docStore,e,function(o,s){function a(r){if(r&&(d=r),++p===t.length){if(d)return n(d);!function(){function r(e){e&&(o=e),++s===n.length&&u(o)}var n=Object.keys(h);if(!n.length)return u();var o,s=0,a=new f.Map;t.forEach(function(t){a.set(e+"@"+t,!0)}),n.forEach(function(e){i.get(V.attachmentStore,e,function(t,n){if(t)return"NotFoundError"===t.name?r():r(t);var i=Object.keys(n.refs||{}).filter(function(e){return!a.has(e)}),o={};i.forEach(function(e){o[e]=!0}),i.length?l.push({key:e,type:"put",value:{refs:o},prefix:V.attachmentStore}):l=l.concat([{key:e,type:"del",prefix:V.attachmentStore},{key:e,type:"del",prefix:V.binaryStore}]),r()})})}()}}function u(e){return e?n(e):(i.batch(l),r.ctx?n():void i.execute(z,n))}if(o)return n(o);var c=t.map(function(e){var t=s.rev_map[e];return delete s.rev_map[e],t});g.traverseRevTree(s.rev_tree,function(e,r,n,i,o){var s=r+"-"+n;-1!==t.indexOf(s)&&(o.status="missing")});var l=[];l.push({key:s.id,value:s,type:"put",prefix:V.docStore});var d,h={},p=0;c.forEach(function(e){l.push({key:q(e),type:"del",prefix:V.bySeqStore}),i.get(V.bySeqStore,q(e),function(e,t){if(e)return"NotFoundError"===e.name?a():a(e);Object.keys(t._attachments||{}).forEach(function(e){var r=t._attachments[e].digest;h[r]=!0}),a()})})})},W._getLocal=function(e,t){V.localStore.get(e,function(e,r){e?t(j.createError(j.MISSING_DOC)):t(null,r)})},W._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),t.ctx?W._putLocalNoLock(e,t,r):W._putLocalWithLock(e,t,r)},W._putLocalWithLock=N(function(e,t,r){W._putLocalNoLock(e,t,r)}),W._putLocalNoLock=function(e,t,r){delete e._revisions;var n=e._rev,i=e._id,o=t.ctx||new s;o.get(V.localStore,i,function(s,a){if(s&&n)return r(j.createError(j.REV_CONFLICT));if(a&&a._rev!==n)return r(j.createError(j.REV_CONFLICT));e._rev=n?"0-"+(parseInt(n.split("-")[1],10)+1):"0-1";var u=[{type:"put",prefix:V.localStore,key:i,value:e}];o.batch(u);var c={ok:!0,id:e._id,rev:e._rev};if(t.ctx)return r(null,c);o.execute(z,function(e){if(e)return r(e);r(null,c)})})},W._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),t.ctx?W._removeLocalNoLock(e,t,r):W._removeLocalWithLock(e,t,r)},W._removeLocalWithLock=N(function(e,t,r){W._removeLocalNoLock(e,t,r)}),W._removeLocalNoLock=function(e,t,r){var n=t.ctx||new s;n.get(V.localStore,e._id,function(i,o){if(i)return r("NotFoundError"!==i.name?i:j.createError(j.MISSING_DOC));if(o._rev!==e._rev)return r(j.createError(j.REV_CONFLICT));n.batch([{prefix:V.localStore,type:"del",key:e._id}]);var s={ok:!0,id:e._id,rev:"0-0"};if(t.ctx)return r(null,s);n.execute(z,function(e){if(e)return r(e);r(null,s)})})},W._destroy=function(e,t){var r,n=_.functionName(H);if(!M.has(n))return $(G,t);(r=M.get(n)).has(G)?(B.removeAllListeners(G),r.get(G).close(function(){r.delete(G),$(G,t)})):$(G,t)}}},{argsarray:38,"buffer-from":60,"double-ended-queue":506,levelup:552,"pouchdb-adapter-utils":588,"pouchdb-binary-utils":590,"pouchdb-collections":594,"pouchdb-errors":597,"pouchdb-json":600,"pouchdb-md5":602,"pouchdb-merge":603,"pouchdb-promise":604,"pouchdb-utils":607,"sublevel-pouchdb":746,through2:755}],573:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t){var r=o.assign({db:a},e);s.call(this,r,t)}var o=e("pouchdb-utils"),s=n(e("pouchdb-adapter-leveldb-core")),a=n(e("memdown"));i.valid=function(){return!0},i.use_prefix=!1;t.exports=function(e){e.adapter("memory",i,!0)}},{memdown:587,"pouchdb-adapter-leveldb-core":572,"pouchdb-utils":607}],574:[function(e,t,r){(function(e){function r(e){this._db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKey(e,"key",this._db._isBuffer);if(r)throw r;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},r.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this,e("_process"))},{_process:609}],575:[function(e,t,r){(function(e){function r(e){this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){var r=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return r._ended?t(new Error("cannot call next() after end()")):r._nexting?t(new Error("cannot call next() before previous next() has completed")):(r._nexting=!0,"function"==typeof r._next?r._next(function(){r._nexting=!1,t.apply(null,arguments)}):void e.nextTick(function(){r._nexting=!1,t()}))},r.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=r}).call(this,e("_process"))},{_process:609}],576:[function(e,t,r){(function(r,n){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}var o=e("xtend"),s=e("./abstract-iterator"),a=e("./abstract-chained-batch");i.prototype.open=function(e,t){var r=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){if(e)return r.status=i,t(e);r.status="open",t()})):(this.status="open",n.nextTick(t))},i.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(n){if(n)return t.status=r,e(n);t.status="closed",e()})):(this.status="closed",n.nextTick(e))},i.prototype.get=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,r):void n.nextTick(function(){r(new Error("NotFound"))}))},i.prototype.put=function(e,t,r,i){var o;if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||n.browser||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._put?this._put(e,t,r,i):void n.nextTick(i))},i.prototype.del=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,r):void n.nextTick(r))},i.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,o,s=0,a=e.length;s<a;s++)if("object"==typeof(i=e[s])){if(o=this._checkKey(i.type,"type",this._isBuffer))return r(o);if(o=this._checkKey(i.key,"key",this._isBuffer))return r(o)}if("function"==typeof this._batch)return this._batch(e,t,r);n.nextTick(r)},i.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize)return this._approximateSize(e,t,r);n.nextTick(function(){r(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(r){e[r]&&t._isBuffer(e[r])&&0===e[r].length&&delete e[r]}),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new a(this)},i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._checkKey=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports=i}).call(this,{isBuffer:e("../../../is-buffer/index.js")},e("_process"))},{"../../../is-buffer/index.js":522,"./abstract-chained-batch":574,"./abstract-iterator":575,_process:609,xtend:783}],577:[function(e,t,r){arguments[4][504][0].apply(r,arguments)},{"./abstract-chained-batch":574,"./abstract-iterator":575,"./abstract-leveldown":576,"./is-leveldown":578,dup:504}],578:[function(e,t,r){arguments[4][505][0].apply(r,arguments)},{"./abstract-leveldown":576,dup:505}],579:[function(e,t,r){"use strict";function n(){if(!o){l=!1,o=!0;for(var e=f.length,t=setTimeout(function(){o&&s&&(o=!1,s.length?f=s.concat(f):c=-1,f.length&&n())});e;){for(s=f,f=[];s&&++c<e;)s[c].run();c=-1,e=f.length}s=null,c=-1,o=!1,clearTimeout(t)}}function i(e,t){this.fun=e,this.array=t}for(var o,s,a,u=[e("./nextTick"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],c=-1,f=[],l=!1,d=-1,h=u.length;++d<h;)if(u[d]&&u[d].test&&u[d].test()){a=u[d].install(n);break}i.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},t.exports=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new i(e,t)),l||o||(l=!0,a())}},{"./messageChannel":580,"./mutation.js":581,"./nextTick":582,"./stateChange":583,"./timeout":584}],580:[function(e,t,r){(function(e){"use strict";r.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},r.install=function(t){var r=new e.MessageChannel;return r.port1.onmessage=t,function(){r.port2.postMessage(0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],581:[function(e,t,r){(function(e){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;r.test=function(){return t},r.install=function(r){var n=0,i=new t(r),o=e.document.createTextNode("");return i.observe(o,{characterData:!0}),function(){o.data=n=++n%2}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],582:[function(e,t,r){(function(e){"use strict";r.test=function(){return void 0!==e&&!e.browser},r.install=function(t){return function(){e.nextTick(t)}}}).call(this,e("_process"))},{_process:609}],583:[function(e,t,r){(function(e){"use strict";r.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},r.install=function(t){return function(){var r=e.document.createElement("script");return r.onreadystatechange=function(){t(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},e.document.documentElement.appendChild(r),t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],584:[function(e,t,r){"use strict";r.test=function(){return!0},r.install=function(e){return function(){setTimeout(e,0)}}},{}],585:[function(e,t,r){(function(e){function t(e,t){return Object.hasOwnProperty.call(e,t)}function n(e){return void 0!==e&&""!==e}function t(e,t){return Object.hasOwnProperty.call(e,t)}function i(e,t){return Object.hasOwnProperty.call(e,t)&&t}r.compare=function(t,r){if(e.isBuffer(t)){for(var n=Math.min(t.length,r.length),i=0;i<n;i++){var o=t[i]-r[i];if(o)return o}return t.length-r.length}return t<r?-1:t>r?1:0};var o=r.lowerBoundKey=function(e){return i(e,"gt")||i(e,"gte")||i(e,"min")||(e.reverse?i(e,"end"):i(e,"start"))||void 0},s=r.lowerBound=function(e){var t=o(e);return t&&e[t]},a=r.lowerBoundInclusive=function(e){return!t(e,"gt")},u=r.upperBoundInclusive=function(e){return!t(e,"lt")},c=r.lowerBoundExclusive=function(e){return!a(e)},f=r.upperBoundExclusive=function(e){return!u(e)},l=r.upperBoundKey=function(e){return i(e,"lt")||i(e,"lte")||i(e,"max")||(e.reverse?i(e,"start"):i(e,"end"))||void 0},d=r.upperBound=function(e){var t=l(e);return t&&e[t]};r.toLtgt=function(e,n,i,o,s){n=n||{},i=i||function(e){return e};var a=arguments.length>3,u=r.lowerBoundKey(e),c=r.upperBoundKey(e);return u?"gt"===u?n.gt=i(e.gt,!1):n.gte=i(e[u],!1):a&&(n.gte=i(o,!1)),c?"lt"===c?n.lt=i(e.lt,!0):n.lte=i(e[c],!0):a&&(n.lte=i(s,!0)),null!=e.reverse&&(n.reverse=!!e.reverse),t(n,"max")&&delete n.max,t(n,"min")&&delete n.min,t(n,"start")&&delete n.start,t(n,"end")&&delete n.end,n},r.contains=function(e,t,i){i=i||r.compare;var o=s(e);if(n(o)){if((u=i(t,o))<0||0===u&&c(e))return!1}var a=d(e);if(n(a)){var u=i(t,a);if(u>0||0===u&&f(e))return!1}return!0},r.filter=function(e,t){return function(n){return r.contains(e,n,t)}}}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":522}],586:[function(e,t,r){t.exports=e("immediate")},{immediate:579}],587:[function(e,t,r){(function(r){function n(e,t){a.call(this,e),this._limit=t.limit,-1===this._limit&&(this._limit=1/0);var r=e._store[e._location];this.keyAsBuffer=!1!==t.keyAsBuffer,this.valueAsBuffer=!1!==t.valueAsBuffer,this._reverse=t.reverse,this._options=t,this._done=0,this._reverse?(this._incr="prev",this._start=u.upperBound(t),this._end=u.lowerBound(t),void 0===this._start?this._tree=r.end:u.upperBoundInclusive(t)?this._tree=r.le(this._start):this._tree=r.lt(this._start),this._end&&(u.lowerBoundInclusive(t)?this._test=function(e){return u.compare(e,this._end)>=0}:this._test=function(e){return u.compare(e,this._end)>0})):(this._incr="next",this._start=u.lowerBound(t),this._end=u.upperBound(t),void 0===this._start?this._tree=r.begin:u.lowerBoundInclusive(t)?this._tree=r.ge(this._start):this._tree=r.gt(this._start),this._end&&(u.upperBoundInclusive(t)?this._test=function(e){return u.compare(e,this._end)<=0}:this._test=function(e){return u.compare(e,this._end)<0}))}function i(e){if(!(this instanceof i))return new i(e);s.call(this,"string"==typeof e?e:""),this._location=this.location?"$"+this.location:"_tree",this._store=this.location?f:this,this._store[this._location]=this._store[this._location]||c(u.compare)}var o=e("inherits"),s=e("abstract-leveldown").AbstractLevelDOWN,a=e("abstract-leveldown").AbstractIterator,u=e("ltgt"),c=e("functional-red-black-tree"),f={},l=e("./immediate");o(n,a),n.prototype._next=function(e){var t,n;return this._done++>=this._limit?l(e):this._tree.valid?(t=this._tree.key,n=this._tree.value,this._test(t)?(this.keyAsBuffer&&(t=new r(t)),this.valueAsBuffer&&(n=new r(n)),this._tree[this._incr](),void l(function(){e(null,t,n)})):l(e)):l(e)},n.prototype._test=function(){return!0},i.clearGlobalStore=function(e){e?Object.keys(f).forEach(function(e){delete f[e]}):f={}},o(i,s),i.prototype._open=function(e,t){var r=this;l(function(){t(null,r)})},i.prototype._put=function(e,t,r,n){void 0!==t&&null!==t||(t="");var i=this._store[this._location].find(e);i.valid?this._store[this._location]=i.update(t):this._store[this._location]=this._store[this._location].insert(e,t),l(n)},i.prototype._get=function(e,t,n){var i=this._store[this._location].get(e);if(void 0===i)return l(function(){n(new Error("NotFound"))});!1===t.asBuffer||this._isBuffer(i)||(i=new r(String(i))),l(function(){n(null,i)})},i.prototype._del=function(e,t,r){this._store[this._location]=this._store[this._location].remove(e),l(r)},i.prototype._batch=function(e,t,r){for(var n,i,o,s=-1,a=e.length,u=this._store[this._location];++s<a;)e[s]&&(n=this._isBuffer(e[s].key)?e[s].key:String(e[s].key),o=u.find(n),"put"===e[s].type?(i=this._isBuffer(e[s].value)?e[s].value:String(e[s].value),u=o.valid?o.update(i):u.insert(n,i)):u=o.remove());this._store[this._location]=u,l(r)},i.prototype._iterator=function(e){return new n(this,e)},i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.destroy=function(e,t){var r="$"+e;r in f&&delete f[r],l(t)},t.exports=i}).call(this,e("buffer").Buffer)},{"./immediate":586,"abstract-leveldown":577,buffer:61,"functional-red-black-tree":511,inherits:520,ltgt:585}],588:[function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function i(e){if(!/^\d+-./.test(e))return u.createError(u.INVALID_REV);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function o(e,t){var r,n,o,s={status:"available"};if(e._deleted&&(s.deleted=!0),t)if(e._id||(e._id=a.uuid()),n=a.rev(),e._rev){if((o=i(e._rev)).error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[n,s,[]]]]}],r=o.prefix+1}else e._rev_tree=[{pos:1,ids:[n,s,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,i=[n[0],t,[]],o=1,s=n.length;o<s;o++)i=[n[o],{status:"missing"},[i]];return[{pos:r,ids:i}]}(e._revisions,s),r=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if((o=i(e._rev)).error)return o;r=o.prefix,n=o.id,e._rev_tree=[{pos:r,ids:[n,s,[]]}]}a.invalidIdError(e._id),e._rev=r+"-"+n;var c={metadata:{},data:{}};for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var l="_"===f[0];if(l&&!h[f]){var d=u.createError(u.DOC_VALIDATION,f);throw d.message=u.DOC_VALIDATION.message+": "+f,d}l&&!p[f]?c.metadata[f.slice(1)]=e[f]:c.data[f]=e[f]}return c}function s(e,t,r,n,i,s,a,f){if(c.revExists(t.rev_tree,r.metadata.rev))return n[i]=r,s();var l=t.winningRev||c.winningRev(t),d="deleted"in t?t.deleted:c.isDeleted(t,l),h="deleted"in r.metadata?r.metadata.deleted:c.isDeleted(r.metadata),p=/^1-/.test(r.metadata.rev);if(d&&!h&&f&&p){var b=r.data;b._rev=l,b._id=r.metadata.id,r=o(b,f)}var y=c.merge(t.rev_tree,r.metadata.rev_tree[0],e);if(f&&(d&&h&&"new_leaf"!==y.conflicts||!d&&"new_leaf"!==y.conflicts||d&&!h&&"new_branch"===y.conflicts)){var v=u.createError(u.REV_CONFLICT);return n[i]=v,s()}var _=r.metadata.rev;r.metadata.rev_tree=y.tree,r.stemmedRevs=y.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var m=c.winningRev(r.metadata),g=c.isDeleted(r.metadata,m),w=d===g?0:d<g?-1:1;a(r,m,g,_===m?g:c.isDeleted(r.metadata,_),!0,w,i,s)}Object.defineProperty(r,"__esModule",{value:!0});var a=e("pouchdb-utils"),u=e("pouchdb-errors"),c=e("pouchdb-merge"),f=e("pouchdb-binary-utils"),l=e("pouchdb-md5"),d=e("pouchdb-collections"),h=n(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),p=n(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);r.invalidIdError=a.invalidIdError,r.isDeleted=c.isDeleted,r.isLocalId=c.isLocalId,r.normalizeDdocFunctionName=a.normalizeDdocFunctionName,r.parseDdocFunctionName=a.parseDdocFunctionName,r.parseDoc=o,r.preprocessAttachments=function(e,t,r){function n(){o++,e.length===o&&(i?r(i):r())}if(!e.length)return r();var i,o=0;e.forEach(function(e){var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],o=0;if(!r.length)return n();for(var s in e.data._attachments)e.data._attachments.hasOwnProperty(s)&&function(e,t,r){if(e.stub)return r();"string"==typeof e.data?function(e,t,r){var n=function(e){try{return f.atob(e)}catch(e){return{error:u.createError(u.BAD_ARG,"Attachment is not a valid base64 string")}}}(e.data);if(n.error)return r(n.error);e.length=n.length,e.data="blob"===t?f.binaryStringToBlobOrBuffer(n,e.content_type):"base64"===t?f.btoa(n):n,l.binaryMd5(n,function(t){e.digest="md5-"+t,r()})}(e,t,r):function(e,t,r){l.binaryMd5(e.data,function(n){e.digest="md5-"+n,e.length=e.data.size||e.data.length||0,"binary"===t?f.blobOrBufferToBinaryString(e.data,function(t){e.data=t,r()}):"base64"===t?f.blobOrBufferToBase64(e.data,function(t){e.data=t,r()}):r()})}(e,t,r)}(e.data._attachments[s],t,function(e){i=e,++o===r.length&&n()})})},r.processDocs=function(e,t,r,n,i,o,a,f,l){function h(){++y===v&&l&&l()}e=e||1e3;var p=f.new_edits,b=new d.Map,y=0,v=t.length;t.forEach(function(e,t){if(e._id&&c.isLocalId(e._id)){var n=e._deleted?"_removeLocal":"_putLocal";r[n](e,{ctx:i},function(e,r){o[t]=e||r,h()})}else{var s=e.metadata.id;b.has(s)?(v--,b.get(s).push([e,t])):b.set(s,[[e,t]])}}),b.forEach(function(t,r){function i(){++d<t.length?l():h()}function l(){var l=t[d],h=l[0],b=l[1];if(n.has(r))s(e,n.get(r),h,o,b,i,a,p);else{var y=c.merge([],h.metadata.rev_tree[0],e);h.metadata.rev_tree=y.tree,h.stemmedRevs=y.stemmedRevs||[],function(e,t,r){var n=c.winningRev(e.metadata),i=c.isDeleted(e.metadata,n);if("was_delete"in f&&i)return o[t]=u.createError(u.MISSING_DOC,"deleted"),r();if(p&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(e)){var s=u.createError(u.REV_CONFLICT);return o[t]=s,r()}a(e,n,i,i,!1,i?0:1,t,r)}(h,b,i)}}var d=0;l()})},r.updateDoc=s},{"pouchdb-binary-utils":590,"pouchdb-collections":594,"pouchdb-errors":597,"pouchdb-md5":602,"pouchdb-merge":603,"pouchdb-utils":607}],589:[function(e,t,r){"use strict";var n=e("pouchdb-utils"),i=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("pouchdb-promise")),o=e("pouchdb-binary-utils"),s=e("pouchdb-errors"),a=function(){try{return new XMLHttpRequest,!0}catch(e){return!1}}(),u=function(){};t.exports=function(e,t){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",c=-1!==r.indexOf("safari")&&-1===r.indexOf("chrome"),f=-1!==r.indexOf("msie"),l=-1!==r.indexOf("edge"),d=c||(f||l)&&"GET"===e.method,h=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(d||!h)){var p=-1!==e.url.indexOf("?");e.url+=(p?"&":"?")+"_nonce="+Date.now()}return function(e,t){return e=n.clone(e),(e=n.assign({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},e)).json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),function(e,t){return a||e.xhr?function(e,t){var r,n,i=!1,s=function(){i=!0,r.abort(),u()},a={abort:function(){r.abort(),u()}},u=function(){clearTimeout(n),a.abort=function(){},r&&(r.onprogress=void 0,r.upload&&(r.upload.onprogress=void 0),r.onreadystatechange=void 0,r=void 0)};r=e.xhr?new e.xhr:new XMLHttpRequest;try{r.open(e.method,e.url)}catch(e){return t(new Error(e.name||"Url is invalid"))}r.withCredentials=!("withCredentials"in e)||e.withCredentials,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(r.responseType="arraybuffer"),"body"in e||(e.body=null);for(var c in e.headers)e.headers.hasOwnProperty(c)&&r.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(n=setTimeout(s,e.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(s,e.timeout))},void 0!==r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var s;s=e.binary?o.blob([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,t(null,n,s)}else{var a={};if(i)(a=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof r.response)try{a=JSON.parse(r.response)}catch(e){}a.status=r.status,t(a)}u()}},e.body&&e.body instanceof Blob?o.readAsArrayBuffer(e.body,function(e){r.send(e)}):r.send(e.body),a}(e,t):function(e,t){var r,n,o,s=new Headers,a={method:e.method,credentials:"include",headers:s};return e.json&&(s.set("Accept","application/json"),s.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.processData&&"string"!=typeof e.body?a.body=JSON.stringify(e.body):a.body="body"in e?e.body:null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&s.set(t,e.headers[t])}),r=function(){for(var e={},t=new i(function(t,r){e.resolve=t,e.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.promise=t,i.resolve().then(function(){return fetch.apply(null,r)}).then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e}(e.url,a),e.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),r.promise.then(function(t){return o={statusCode:t.status},e.timeout>0&&clearTimeout(n),o.statusCode>=200&&o.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){o.statusCode>=200&&o.statusCode<300?t(null,o,e):(e.status=o.statusCode,t(e))}).catch(function(e){e||(e=new Error("canceled")),t(e)}),{abort:r.reject}}(e,t)}(e,function(r,n,i){if(r)return t(s.generateErrorFromResponse(r));var o,a=n.headers&&n.headers["content-type"],c=i||"";if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof c&&(/json/.test(a)||/^[\s]*\{/.test(c)&&/\}[\s]*$/.test(c)))try{c=JSON.parse(c.toString())}catch(e){}n.statusCode>=200&&n.statusCode<300?function(t,r,n){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){return n(e)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?s.generateErrorFromResponse(e):e})),e.binary&&u(t,r),n(null,t,r)}(c,n,t):((o=s.generateErrorFromResponse(c)).status=n.statusCode,t(o))})}(e,t)}},{"pouchdb-binary-utils":590,"pouchdb-errors":597,"pouchdb-promise":604,"pouchdb-utils":607}],590:[function(e,t,r){"use strict";function n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function i(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function o(e,t){return n([i(e)],{type:t})}function s(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return t}function a(e,t){if("undefined"==typeof FileReader)return t(s((new FileReaderSync).readAsArrayBuffer(e)));var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";if(n)return t(r);t(s(r))},n?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function u(e,t){a(e,function(e){t(e)})}Object.defineProperty(r,"__esModule",{value:!0});var c=function(e){return atob(e)},f=function(e){return btoa(e)};r.atob=c,r.btoa=f,r.base64StringToBlobOrBuffer=function(e,t){return o(c(e),t)},r.binaryStringToArrayBuffer=i,r.binaryStringToBlobOrBuffer=o,r.blob=n,r.blobOrBufferToBase64=function(e,t){u(e,function(e){t(f(e))})},r.blobOrBufferToBinaryString=u,r.readAsArrayBuffer=function(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},r.readAsArrayBuffer(e)},r.readAsBinaryString=a,r.typedBuffer=function(){}},{}],591:[function(e,t,r){"use strict";var n=e("pouchdb-errors"),i=e("pouchdb-utils"),o=e("pouchdb-selector-core");t.exports=function(e){e._changesFilterPlugin={validate:function(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var r="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+r+'"'))}t()},normalize:function(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=i.normalizeDdocFunctionName(e.view):e.filter=i.normalizeDdocFunctionName(e.filter))},shouldFilter:function(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!i.isRemote(e.db)},filter:function(e,t){var r=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var s=n.createError(n.BAD_REQUEST,"`view` filter parameter not found or invalid.");return r(s)}var a=i.parseDdocFunctionName(t.view);e.db.get("_design/"+a[0],function(o,s){if(e.isCancelled)return r(null,{status:"cancelled"});if(o)return r(n.generateErrorFromResponse(o));var u=s&&s.views&&s.views[a[1]]&&s.views[a[1]].map;if(!u)return r(n.createError(n.MISSING_DOC,s.views?"missing json key: "+a[1]:"missing json key: views"));t.filter=function(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+u+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n");return i.scopeEval(t,{})}(),e.doChanges(t)})}else if(t.selector)t.filter=function(e){return o.matchesSelector(e,t.selector)},e.doChanges(t);else{var u=i.parseDdocFunctionName(t.filter);e.db.get("_design/"+u[0],function(o,s){if(e.isCancelled)return r(null,{status:"cancelled"});if(o)return r(n.generateErrorFromResponse(o));var a=s&&s.filters&&s.filters[u[1]];if(!a)return r(n.createError(n.MISSING_DOC,s&&s.filters?"missing json key: "+u[1]:"missing json key: filters"));t.filter=function(e){return i.scopeEval('"use strict";\nreturn '+e+";",{})}(a),e.doChanges(t)})}}}}},{"pouchdb-errors":597,"pouchdb-selector-core":606,"pouchdb-utils":607}],592:[function(e,t,r){"use strict";function n(e,t,r,i,o){return e.get(t).catch(function(r){if(404===r.status)return"http"!==e.adapter&&"https"!==e.adapter||c.explainError(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:t,history:[],replicator:d,version:l};throw r}).then(function(s){if(!o.cancelled&&s.last_seq!==r)return s.history=(s.history||[]).filter(function(e){return e.session_id!==i}),s.history.unshift({last_seq:r,session_id:i}),s.history=s.history.slice(0,h),s.version=l,s.replicator=d,s.session_id=i,s.last_seq=r,e.put(s).catch(function(s){if(409===s.status)return n(e,t,r,i,o);throw s})})}function i(e,t,r,n,i){this.src=e,this.target=t,this.id=r,this.returnValue=n,this.opts=i}function o(e,t){var r=e[0],n=e.slice(1),i=t[0],a=t.slice(1);if(!r||0===t.length)return{last_seq:p,history:[]};if(s(r.session_id,t))return{last_seq:r.last_seq,history:e};return s(i.session_id,n)?{last_seq:i.last_seq,history:a}:o(n,a)}function s(e,t){var r=t[0],n=t.slice(1);return!(!e||0===t.length)&&(e===r.session_id||s(e,n))}function a(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}var u=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("pouchdb-promise")),c=e("pouchdb-utils"),f=e("pouchdb-collate"),l=1,d="pouchdb",h=5,p=0;i.prototype.writeCheckpoint=function(e,t){var r=this;return this.updateTarget(e,t).then(function(){return r.updateSource(e,t)})},i.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?n(this.target,this.id,e,t,this.returnValue):u.resolve(!0)},i.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var r=this;return this.readOnlySource?u.resolve(!0):n(this.src,this.id,e,t,this.returnValue).catch(function(e){if(a(e))return r.readOnlySource=!0,!0;throw e})}return u.resolve(!0)};var b={undefined:function(e,t){return 0===f.collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return function(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:o(e.history,t.history)}(t,e).last_seq}};i.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?u.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return p;var r;return(r=t.version?t.version.toString():"undefined")in b?b[r](t,e):p},function(r){if(404===r.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:p}).then(function(){return p},function(r){return a(r)?(e.readOnlySource=!0,t.last_seq):p});throw r})}).catch(function(e){if(404!==e.status)throw e;return p})},t.exports=i},{"pouchdb-collate":593,"pouchdb-promise":604,"pouchdb-utils":607}],593:[function(e,t,r){"use strict";function n(e,t){if(e===t)return 0;e=i(e),t=i(t);var r=s(e),o=s(t);if(r-o!=0)return r-o;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var o=n(e[i],t[i]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var r=Object.keys(e),i=Object.keys(t),o=Math.min(r.length,i.length),s=0;s<o;s++){var a=n(r[s],i[s]);if(0!==a)return a;if(0!==(a=n(e[r[s]],t[i[s]])))return a}return r.length===i.length?0:r.length>i.length?1:-1}(e,t)}function i(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var n=0;n<r;n++)e[n]=i(t[n])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];void 0!==s&&(e[o]=i(s))}}}}return e}function o(e){return e=i(e),s(e)+c+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=e<0,i=n?"0":"2",o=function(e,t,r){return function(e,t,r){for(var n="",i=r-e.length;n.length<i;)n+=t;return n}(e,"0",u)+e}(((n?-r:r)-a).toString());i+=c+o;var s=Math.abs(parseFloat(t[0]));n&&(s=10-s);var f=s.toFixed(20);return f=f.replace(/\.?0+$/,""),i+=c+f}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),n=-1,i=r.length,s="";if(t)for(;++n<i;)s+=o(r[n]);else for(;++n<i;){var f=r[n];s+=o(f)+o(e[f])}return s}return""}(e)+"\0"}function s(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}Object.defineProperty(r,"__esModule",{value:!0});var a=-324,u=3,c="";r.collate=n,r.normalizeKey=i,r.toIndexableString=o,r.parseIndexableString=function(e){for(var t=[],r=[],n=0;;){var i=e[n++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var o=function(e,t){var r,n=t;if("1"===e[t])r=0,t++;else{var i="0"===e[t];t++;var o="",s=e.substring(t,t+u),c=parseInt(s,10)+a;for(i&&(c=-c),t+=u;;){var f=e[t];if("\0"===f)break;o+=f,t++}r=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(r-=10),0!==c&&(r=parseFloat(r+"e"+c))}return{num:r,length:t-n}}(e,n);t.push(o.num),n+=o.length;break;case"4":for(var s="";;){var c=e[n];if("\0"===c)break;s+=c,n++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var f={element:[],index:t.length};t.push(f.element),r.push(f);break;case"6":var l={element:{},index:t.length};t.push(l.element),r.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();!function(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var i=n.element,o=n.index;Array.isArray(i)?i.push(r):o===e.length-2?i[e.pop()]=r:e.push(r)}}(t,r)}}}},{}],594:[function(e,t,r){"use strict";function n(e){return"$"+e}function i(){this._store={}}function o(e){if(this._store=new i,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}Object.defineProperty(r,"__esModule",{value:!0}),i.prototype.get=function(e){var t=n(e);return this._store[t]},i.prototype.set=function(e,t){var r=n(e);return this._store[r]=t,!0},i.prototype.has=function(e){return n(e)in this._store},i.prototype.delete=function(e){var t=n(e),r=t in this._store;return delete this._store[t],r},i.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var i=t[r];e(this._store[i],i=function(e){return e.substring(1)}(i))}},Object.defineProperty(i.prototype,"size",{get:function(){return Object.keys(this._store).length}}),o.prototype.add=function(e){return this._store.set(e,!0)},o.prototype.has=function(e){return this._store.has(e)},o.prototype.forEach=function(e){this._store.forEach(function(t,r){e(r)})},Object.defineProperty(o.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(r.Set=o,r.Map=i):(r.Set=Set,r.Map=Map)},{}],595:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t,r){function n(){i.cancel()}b.EventEmitter.call(this);var i=this;this.db=e;var o=(t=t?l.clone(t):{}).complete=l.once(function(t,r){t?l.listenerCount(i,"error")>0&&i.emit("error",t):i.emit("complete",r),i.removeAllListeners(),e.removeListener("destroyed",n)});r&&(i.on("complete",function(e){r(null,e)}),i.on("error",r)),e.once("destroyed",n),t.onChange=function(e){i.isCancelled||function(e,t){try{e.emit("change",t)}catch(e){l.guardedConsole("error",'Error in .on("change", function):',e)}}(i,e)};var s=new p(function(e,r){t.complete=function(t,n){t?r(t):e(n)}});i.once("cancel",function(){e.removeListener("destroyed",n),t.complete(null,{status:"cancelled"})}),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then(function(e){o(null,e)},o),e.taskqueue.isReady?i.validateChanges(t):e.taskqueue.addTask(function(e){e?t.complete(e):i.isCancelled?i.emit("cancel"):i.validateChanges(t)})}function o(e,t){return e<t?-1:e>t?1:0}function s(e,t){return function(r,n){r||n[0]&&n[0].error?((r=r||n[0]).docId=t,e(r)):e(null,n.length?n[0]:n)}}function a(e){var t=e._compactionQueue[0],r=t.opts,n=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(t){t&&t.last_seq&&(r.last_seq=t.last_seq),e._compact(r,function(t,r){t?n(t):n(null,r),l.nextTick(function(){e._compactionQueue.shift(),e._compactionQueue.length&&a(e)})})})}function u(){b.EventEmitter.call(this)}function c(){this.isReady=!1,this.failed=!1,this.queue=[]}function f(e,t){if(!(this instanceof f))return new f(e,t);var r=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),this.__opts=t=l.clone(t),r.auto_compaction=t.auto_compaction,r.prefix=f.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var n=function(e,t){var r=e.match(/([a-z-]*):\/\/(.*)/);if(r)return{name:/https?/.test(r[1])?r[1]+"://"+r[2]:r[2],adapter:r[1]};var n=f.adapters,i=f.preferredAdapters,o=f.prefix,s=t.adapter;if(!s)for(var a=0;a<i.length&&"idb"===(s=i[a])&&"websql"in n&&l.hasLocalStorage()&&localStorage["_pouch__websqldb_"+o+e];++a)l.guardedConsole("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var u=n[s];return{name:u&&"use_prefix"in u&&!u.use_prefix?e:o+e,adapter:s}}((t.prefix||"")+e,t);if(t.name=n.name,t.adapter=t.adapter||n.adapter,r.name=e,r._adapter=t.adapter,f.emit("debug",["adapter","Picked adapter: ",t.adapter]),!f.adapters[t.adapter]||!f.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);u.call(r),r.taskqueue=new c,r.adapter=t.adapter,f.adapters[t.adapter].call(r,t,function(e){if(e)return r.taskqueue.fail(e);!function(e){function t(t){e.removeListener("closed",r),t||e.constructor.emit("destroyed",e.name)}function r(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",r),e.constructor.emit("ref",e)}(r),r.emit("created",r),f.emit("created",r.name),r.taskqueue.ready(r)})}var l=e("pouchdb-utils"),d=e("pouchdb-collections"),h=n(e("inherits")),p=n(e("pouchdb-promise")),b=e("events"),y=n(e("argsarray")),v=e("pouchdb-merge"),_=e("pouchdb-errors"),m=n(e("pouchdb-debug")),g=n(e("pouchdb-changes-filter"));h(i,b.EventEmitter),i.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},i.prototype.validateChanges=function(e){var t=e.complete,r=this;f._changesFilterPlugin?f._changesFilterPlugin.validate(e,function(n){if(n)return t(n);r.doChanges(e)}):r.doChanges(e)},i.prototype.doChanges=function(e){var t=this,r=e.complete;if("live"in(e=l.clone(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=function(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=v.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:n,doc:e};return v.isDeleted(t,e._rev)&&(i.deleted=!0),r.conflicts&&(i.doc._conflicts=v.collectConflicts(t),i.doc._conflicts.length||delete i.doc._conflicts),i},"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(f._changesFilterPlugin){if(f._changesFilterPlugin.normalize(e),f._changesFilterPlugin.shouldFilter(this,e))return f._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(t){t in e&&l.guardedConsole("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var i=t.cancel;t.cancel=y(function(e){n.cancel(),i.apply(this,e)})}}else this.db.info().then(function(n){t.isCancelled?r(null,{status:"cancelled"}):(e.since=n.update_seq,t.doChanges(e))},r)},h(u,b.EventEmitter),u.prototype.post=l.adapterFun("post",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(_.createError(_.NOT_AN_OBJECT));this.bulkDocs({docs:[e]},t,s(r,e._id))}),u.prototype.put=l.adapterFun("put",function(e,t,r){function n(r){"function"==typeof i._put&&!1!==t.new_edits?i._put(e,t,r):i.bulkDocs({docs:[e]},t,s(r,e._id))}if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(_.createError(_.NOT_AN_OBJECT));if(l.invalidIdError(e._id),v.isLocalId(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);var i=this;t.force&&e._rev?(!function(){var r=e._rev.split("-"),n=r[1],i=parseInt(r[0],10)+1,o=l.rev();e._revisions={start:i,ids:[o,n]},e._rev=i+"-"+o,t.new_edits=!1}(),n(function(t){var n=t?null:{ok:!0,id:e._id,rev:e._rev};r(t,n)})):n(r)}),u.prototype.putAttachment=l.adapterFun("putAttachment",function(e,t,r,n,i){function o(e){var r="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:n,revpos:++r},s.put(e)}var s=this;return"function"==typeof i&&(i=n,n=r,r=null),void 0===i&&(i=n,n=r,r=null),i||l.guardedConsole("warn","Attachment",t,"on document",e,"is missing content_type"),s.get(e).then(function(e){if(e._rev!==r)throw _.createError(_.REV_CONFLICT);return o(e)},function(t){if(t.reason===_.MISSING_DOC.message)return o({_id:e});throw t})}),u.prototype.removeAttachment=l.adapterFun("removeAttachment",function(e,t,r,n){var i=this;i.get(e,function(e,o){if(e)n(e);else if(o._rev===r){if(!o._attachments)return n();delete o._attachments[t],0===Object.keys(o._attachments).length&&delete o._attachments,i.put(o,n)}else n(_.createError(_.REV_CONFLICT))})}),u.prototype.remove=l.adapterFun("remove",function(e,t,r,n){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(i=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),(r=r||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||r.rev};if(o._deleted=!0,v.isLocalId(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,n);this.bulkDocs({docs:[o]},r,s(n,o._id))}),u.prototype.revsDiff=l.adapterFun("revsDiff",function(e,t,r){function n(e,t){s.has(e)||s.set(e,{missing:[]}),s.get(e).missing.push(t)}"function"==typeof t&&(r=t,t={});var i=Object.keys(e);if(!i.length)return r(null,{});var o=0,s=new d.Map;i.map(function(t){this._getRevisionTree(t,function(a,u){if(a&&404===a.status&&"missing"===a.message)s.set(t,{missing:e[t]});else{if(a)return r(a);!function(t,r){var i=e[t].slice(0);v.traverseRevTree(r,function(e,r,o,s,a){var u=r+"-"+o,c=i.indexOf(u);-1!==c&&(i.splice(c,1),"available"!==a.status&&n(t,u))}),i.forEach(function(e){n(t,e)})}(t,u)}if(++o===i.length){var c={};return s.forEach(function(e,t){c[t]=e}),r(null,c)}})},this)}),u.prototype.bulkGet=l.adapterFun("bulkGet",function(e,t){l.bulkGetShim(this,e,t)}),u.prototype.compactDocument=l.adapterFun("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(i,o){if(i)return r(i);var s=function(e){var t={},r=[];return v.traverseRevTree(e,function(e,n,i,o){var s=n+"-"+i;return e&&(t[s]=0),void 0!==o&&r.push({from:o,to:s}),s}),r.reverse(),r.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}(o),a=[],u=[];Object.keys(s).forEach(function(e){s[e]>t&&a.push(e)}),v.traverseRevTree(o,function(e,t,r,n,i){var o=t+"-"+r;"available"===i.status&&-1!==a.indexOf(o)&&u.push(o)}),n._doCompaction(e,u,r)})}),u.prototype.compact=l.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&a(this)}),u.prototype._compact=function(e,t){var r=this,n={return_docs:!1,last_seq:e.last_seq||0},i=[];r.changes(n).on("change",function(e){i.push(r.compactDocument(e.id,0))}).on("complete",function(e){var n=e.last_seq;p.all(i).then(function(){return l.upsert(r,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<n)&&(e.last_seq=n,e)})}).then(function(){t(null,{ok:!0})}).catch(t)}).on("error",t)},u.prototype.get=l.adapterFun("get",function(e,t,r){function n(){var n=[],s=i.length;if(!s)return r(null,n);i.forEach(function(i){o.get(e,{rev:i,revs:t.revs,latest:t.latest,attachments:t.attachments},function(e,t){if(e)n.push({missing:i});else{for(var o,a=0,u=n.length;a<u;a++)if(n[a].ok&&n[a].ok._rev===t._rev){o=!0;break}o||n.push({ok:t})}--s||r(null,n)})})}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(_.createError(_.INVALID_ID));if(v.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var i=[],o=this;if(!t.open_revs)return this._get(e,t,function(n,i){if(n)return n.docId=e,r(n);var s=i.doc,a=i.metadata,u=i.ctx;if(t.conflicts){var c=v.collectConflicts(a);c.length&&(s._conflicts=c)}if(v.isDeleted(a,s._rev)&&(s._deleted=!0),t.revs||t.revs_info){for(var f=s._rev.split("-"),l=parseInt(f[0],10),d=f[1],h=v.rootToLeaf(a.rev_tree),p=null,b=0;b<h.length;b++){var y=h[b],_=y.ids.map(function(e){return e.id}).indexOf(d);(_===l-1||!p&&-1!==_)&&(p=y)}var m=p.ids.map(function(e){return e.id}).indexOf(s._rev.split("-")[1])+1,g=p.ids.length-m;if(p.ids.splice(m,g),p.ids.reverse(),t.revs&&(s._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map(function(e){return e.id})}),t.revs_info){var w=p.pos+p.ids.length;s._revs_info=p.ids.map(function(e){return w--,{rev:w+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&s._attachments){var x=s._attachments,k=Object.keys(x).length;if(0===k)return r(null,s);Object.keys(x).forEach(function(e){this._getAttachment(s._id,e,x[e],{rev:s._rev,binary:t.binary,ctx:u},function(t,n){var i=s._attachments[e];i.data=n,delete i.stub,delete i.length,--k||r(null,s)})},o)}else{if(s._attachments)for(var j in s._attachments)s._attachments.hasOwnProperty(j)&&(s._attachments[j].stub=!0);r(null,s)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){if(e)return r(e);i=v.collectLeaves(t).map(function(e){return e.rev}),n()});else{if(!Array.isArray(t.open_revs))return r(_.createError(_.UNKNOWN_ERROR,"function_clause"));i=t.open_revs;for(var s=0;s<i.length;s++){var a=i[s];if("string"!=typeof a||!/^\d+-/.test(a))return r(_.createError(_.INVALID_REV))}n()}}),u.prototype.getAttachment=l.adapterFun("getAttachment",function(e,t,r,n){var i=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(o,s){return o?n(o):s.doc._attachments&&s.doc._attachments[t]?(r.ctx=s.ctx,r.binary=!0,void i._getAttachment(e,t,s.doc._attachments[t],r,n)):n(_.createError(_.MISSING_DOC))})}),u.prototype.allDocs=l.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(r)return void t(_.createError(_.QUERY_PARSE_ERROR,"Query parameter `"+r+"` is not compatible with multi-get"));if(!l.isRemote(this))return function(e,t,r){var n="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&n.reverse(),!n.length)return e._allDocs({limit:0},r);var i={offset:t.skip};return p.all(n.map(function(r){var n=l.assign({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete n[e]}),new p(function(t,o){e._allDocs(n,function(e,n){if(e)return o(e);i.total_rows=n.total_rows,t(n.rows[0]||{key:r,error:"not_found"})})})})).then(function(e){return i.rows=e,i})}(this,e,t)}return this._allDocs(e,t)}),u.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new i(this,e,t)},u.prototype.close=l.adapterFun("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),u.prototype.info=l.adapterFun("info",function(e){var t=this;this._info(function(r,n){if(r)return e(r);n.db_name=n.db_name||t.name,n.auto_compaction=!(!t.auto_compaction||l.isRemote(t)),n.adapter=t.adapter,e(null,n)})}),u.prototype.id=l.adapterFun("id",function(e){return this._id(e)}),u.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},u.prototype.bulkDocs=l.adapterFun("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(_.createError(_.MISSING_BULK_DOCS));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(_.createError(_.NOT_AN_OBJECT));var i;if(e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(t){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(t),e._attachments[t].content_type||l.guardedConsole("warn","Attachment",t,"on document",e._id,"is missing content_type")})}),i)return r(_.createError(_.BAD_REQUEST,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var s=this;t.new_edits||l.isRemote(s)||e.docs.sort(function(e,t){var r=o(e._id,t._id);return 0!==r?r:o(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}),function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),i=0;i<n.length;i++){var o=n[i];r._attachments[o]=l.pick(r._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var a=e.docs.map(function(e){return e._id});return this._bulkDocs(e,t,function(e,n){if(e)return r(e);if(t.new_edits||(n=n.filter(function(e){return e.error})),!l.isRemote(s))for(var i=0,o=n.length;i<o;i++)n[i].id=n[i].id||a[i];r(null,n)})}),u.prototype.registerDependentDatabase=l.adapterFun("registerDependentDatabase",function(e,t){var r=new this.constructor(e,this.__opts);l.upsert(this,"_local/_pouch_dependentDbs",function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)}).then(function(){t(null,{db:r})}).catch(t)}),u.prototype.destroy=l.adapterFun("destroy",function(e,t){function r(){n._destroy(e,function(e,r){if(e)return t(e);n._destroyed=!0,n.emit("destroyed"),t(null,r||{ok:!0})})}"function"==typeof e&&(t=e,e={});var n=this,i=!("use_prefix"in n)||n.use_prefix;if(l.isRemote(n))return r();n.get("_local/_pouch_dependentDbs",function(e,o){if(e)return 404!==e.status?t(e):r();var s=o.dependentDbs,a=n.constructor,u=Object.keys(s).map(function(e){var t=i?e.replace(new RegExp("^"+a.prefix),""):e;return new a(t,n.__opts).destroy()});p.all(u).then(r,t)})}),c.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},c.prototype.fail=function(e){this.failed=e,this.execute()},c.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},c.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},h(f,u),f.adapters={},f.preferredAdapters=[],f.prefix="_pouch_";var w=new b.EventEmitter;!function(e){Object.keys(b.EventEmitter.prototype).forEach(function(t){"function"==typeof b.EventEmitter.prototype[t]&&(e[t]=w[t].bind(w))});var t=e._destructionListeners=new d.Map;e.on("ref",function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)}),e.on("unref",function(e){if(t.has(e.name)){var r=t.get(e.name),n=r.indexOf(e);n<0||(r.splice(n,1),r.length>1?t.set(e.name,r):t.delete(e.name))}}),e.on("destroyed",function(e){if(t.has(e)){var r=t.get(e);t.delete(e),r.forEach(function(e){e.emit("destroyed",!0)})}})}(f),f.adapter=function(e,t,r){t.valid()&&(f.adapters[e]=t,r&&f.preferredAdapters.push(e))},f.plugin=function(e){if("function"==typeof e)e(f);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){f.prototype[t]=e[t]})}return this.__defaults&&(f.__defaults=l.assign({},this.__defaults)),f},f.defaults=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);r=r||{},e&&"object"==typeof e&&(e=(r=e).name,delete r.name),r=l.assign({},t.__defaults,r),f.call(this,e,r)}return h(t,f),t.preferredAdapters=f.preferredAdapters.slice(),Object.keys(f).forEach(function(e){e in t||(t[e]=f[e])}),t.__defaults=l.assign({},this.__defaults,e),t};f.plugin(m),f.plugin(g),f.version="6.3.4",t.exports=f},{argsarray:38,events:510,inherits:520,"pouchdb-changes-filter":591,"pouchdb-collections":594,"pouchdb-debug":596,"pouchdb-errors":597,"pouchdb-merge":603,"pouchdb-promise":604,"pouchdb-utils":607}],596:[function(e,t,r){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("debug"));t.exports=function(e){e.debug=n;var t={};e.on("debug",function(e){var r=e[0],i=e.slice(1);t[r]||(t[r]=n("pouchdb:"+r)),t[r].apply(null,i)})}},{debug:494}],597:[function(e,t,r){"use strict";function n(e,t,r){Error.call(this,r),this.status=e,this.name=t,this.message=r,this.error=!0}Object.defineProperty(r,"__esModule",{value:!0});(function(e){return e&&"object"==typeof e&&"default"in e?e.default:e})(e("inherits"))(n,Error),n.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var i=new n(401,"unauthorized","Name or password is incorrect."),o=new n(400,"bad_request","Missing JSON list of 'docs'"),s=new n(404,"not_found","missing"),a=new n(409,"conflict","Document update conflict"),u=new n(400,"bad_request","_id field must contain a string"),c=new n(412,"missing_id","_id is required for puts"),f=new n(400,"bad_request","Only reserved document ids may start with underscore."),l=new n(412,"precondition_failed","Database not open"),d=new n(500,"unknown_error","Database encountered an unknown error"),h=new n(500,"badarg","Some query argument is invalid"),p=new n(400,"invalid_request","Request was invalid"),b=new n(400,"query_parse_error","Some query parameter is invalid"),y=new n(500,"doc_validation","Bad special document member"),v=new n(400,"bad_request","Something wrong with the request"),_=new n(400,"bad_request","Document must be a JSON object"),m=new n(404,"not_found","Database not found"),g=new n(500,"indexed_db_went_bad","unknown"),w=new n(500,"web_sql_went_bad","unknown"),x=new n(500,"levelDB_went_went_bad","unknown"),k=new n(403,"forbidden","Forbidden by design doc validate_doc_update function"),j=new n(400,"bad_request","Invalid rev format"),S=new n(412,"file_exists","The database could not be created, the file already exists."),E=new n(412,"missing_stub","A pre-existing attachment stub wasn't found"),O=new n(413,"invalid_url","Provided URL is invalid");r.UNAUTHORIZED=i,r.MISSING_BULK_DOCS=o,r.MISSING_DOC=s,r.REV_CONFLICT=a,r.INVALID_ID=u,r.MISSING_ID=c,r.RESERVED_ID=f,r.NOT_OPEN=l,r.UNKNOWN_ERROR=d,r.BAD_ARG=h,r.INVALID_REQUEST=p,r.QUERY_PARSE_ERROR=b,r.DOC_VALIDATION=y,r.BAD_REQUEST=v,r.NOT_AN_OBJECT=_,r.DB_MISSING=m,r.WSQ_ERROR=w,r.LDB_ERROR=x,r.FORBIDDEN=k,r.INVALID_REV=j,r.FILE_EXISTS=S,r.MISSING_STUB=E,r.IDB_ERROR=g,r.INVALID_URL=O,r.createError=function(e,t){function r(t){for(var r in e)"function"!=typeof e[r]&&(this[r]=e[r]);void 0!==t&&(this.reason=t)}return r.prototype=n.prototype,new r(t)},r.generateErrorFromResponse=function(e){if("object"!=typeof e){var t=e;(e=d).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}},{inherits:520}],598:[function(e,t,r){(function(r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return(e=b.clone(e)).index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function o(e){return function(){for(var t=arguments.length,r=new Array(t),n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}}function s(e){return o(function(t){var n=t.pop(),i=e.apply(this,t);return function(e,t){e.then(function(e){r.nextTick(function(){t(null,e)})},function(e){r.nextTick(function(){t(e)})})}(i,n),i})}function a(e){for(var t={},r=0,n=e.length;r<n;r++)t=b.assign(t,e[r]);return t}function u(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++)if(e[r]!==t[r])return!1;return!0}function c(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function f(e){return e.fields=e.fields.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e}),e}function l(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=w(t.indexes,e.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){return(void 0!==e.doc.views?Object.keys(e.doc.views):[]).map(function(t){var r=e.doc.views[t];return{ddoc:e.id,name:t,type:"json",def:f(r.options.def)}})})),t.indexes.sort(function(e,t){return v.compare(e.name,t.name)}),t.total_rows=t.indexes.length,t})}function d(e,t){var r=t.def.fields.map(v.getKey);return e.slice().sort(function(e,t){var n=r.indexOf(e),i=r.indexOf(t);return-1===n&&(n=Number.MAX_VALUE),-1===i&&(i=Number.MAX_VALUE),v.compare(n,i)})}function h(e){return-1===S.indexOf(e)}function p(e,t,r){return t.selector&&(t.selector=v.massageSelector(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e})}(t.sort)),t.use_index&&(t.use_index=function(e){var t=[];return"string"==typeof e?t.push(e):t=e,t.map(function(e){return e.replace("_design/","")})}(t.use_index)),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t),l(e).then(function(n){e.constructor.emit("debug",["find","planning query",t]);var i=function(e,t){var r=e.selector,n=function(e,t){var r,n=Object.keys(e),i=t?t.map(v.getKey):[];return r=n.length>=i.length?n:i,0===i.length?{fields:r}:(r=r.sort(function(e,t){var r=i.indexOf(e);-1===r&&(r=Number.MAX_VALUE);var n=i.indexOf(t);return-1===n&&(n=Number.MAX_VALUE),r<n?-1:r>n?1:0}),{fields:r,sortOrder:t.map(v.getKey)})}(r,e.sort),i=n.fields,o=function(e,t,r,n,i){var o=function(e,t,r,n){return n.reduce(function(n,i){return function(e,t,r,n){var i=e.def.fields.map(v.getKey);return!!function(e,t,r){if(t){var n=function(e,t){return!(e.length>t.length)&&u(e,t)}(t,e),i=u(r,e);return n&&i}return function(e,t){e=e.slice();for(var r=0,n=t.length;r<n;r++){var i=t[r];if(!e.length)break;var o=e.indexOf(i);if(-1===o)return!1;e.splice(o,1)}return!0}(r,e)}(i,t,r)&&function(e,t){var r=t[e[0]];return void 0===r||!!Object.keys(r).some(function(e){return!h(e)})&&!(1===Object.keys(r).length&&"$ne"===v.getKey(r))}(i,n)}(i,r,t,e)&&n.push(i),n},[])}(e,t,r,n);if(0===o.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var s=n[0];return s.defaultUsed=!0,s}if(1===o.length&&!i)return o[0];var a=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=!0;return t}(t);if(i){var c="_design/"+i[0],f=2===i.length&&i[1],l=o.find(function(e){return!(!f||e.ddoc!==c||f!==e.name)||e.ddoc===c});if(!l)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return l}return function(e,t){for(var r=null,n=-1,i=0,o=e.length;i<o;i++){var s=e[i],a=t(s);a>n&&(n=a,r=s)}return r}(o,function(e){for(var t=e.def.fields.map(v.getKey),r=0,n=0,i=t.length;n<i;n++){var o=t[n];a[o]&&r++}return r})}(r,i,n.sortOrder,t,e.use_index),s=function(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){var r,n=v.getKey(t.def.fields[0]),i=e[n]||{},o=[];return Object.keys(i).forEach(function(e){if(h(e))o.push(n);else{var t=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}(e,i[e]);r=r?a([r,t]):t}}),{queryOpts:r,inMemoryFields:o}}(e,t):function(e,t){function r(e){!1!==n&&u.push(k),!1!==i&&f.push(j),s=o.slice(e)}for(var n,i,o=t.def.fields.map(v.getKey),s=[],u=[],f=[],l=0,d=o.length;l<d;l++){var p=e[o[l]];if(!p||!Object.keys(p).length){r(l);break}if(l>0){if(Object.keys(p).some(h)){r(l);break}var b="$gt"in p||"$gte"in p||"$lt"in p||"$lte"in p,y=Object.keys(e[o[l-1]]),_=c(y,["$eq"]),m=c(y,Object.keys(p));if(b&&!_&&!m){r(l);break}}for(var g=Object.keys(p),w=null,x=0;x<g.length;x++){var S=g[x],E=function(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}(S,p[S]);w=w?a([w,E]):E}u.push("startkey"in w?w.startkey:k),f.push("endkey"in w?w.endkey:j),"inclusive_start"in w&&(n=w.inclusive_start),"inclusive_end"in w&&(i=w.inclusive_end)}var O={startkey:u,endkey:f};return void 0!==n&&(O.inclusive_start=n),void 0!==i&&(O.inclusive_end=i),{queryOpts:O,inMemoryFields:s}}(e,t)}(r,o);return{queryOpts:s.queryOpts,index:o,inMemoryFields:function(e,t,r,n){return d(function(e){for(var t={},r=0;r<e.length;r++)t["$"+e[r]]=!0;return Object.keys(t).map(function(e){return e.substring(1)})}(w(e,function(e,t,r){for(var n=!1,i=0,o=(r=d(r,e)).length;i<o;i++){var s=r[i];if(n||!function(e,t){for(var r=e.def.fields.map(v.getKey),n=0,i=r.length;n<i;n++)if(t===r[n])return!0;return!1}(e,s))return r.slice(i);i<o-1&&function(e,t){var r=e[t];return"$eq"!==v.getKey(r)}(t,s)&&(n=!0)}return[]}(t,r,n),function(e){var t=[];return Object.keys(e).forEach(function(r){var n=e[r];Object.keys(n).forEach(function(e){"$ne"===e&&t.push(r)})}),t}(r))),t)}(s.inMemoryFields,o,r,i)}}(t,n.indexes);e.constructor.emit("debug",["find","query plan",i]);var o=i.index;!function(e,t){if(t.defaultUsed&&e.sort){var r=e.sort.filter(function(e){return"_id"!==Object.keys(e)[0]}).map(function(e){return Object.keys(e)[0]});if(r.length>0)throw new Error('Cannot sort on field(s) "'+r.join(",")+'" when using the default index')}t.defaultUsed}(t,o);var s=b.assign({include_docs:!0,reduce:!1},i.queryOpts);if("startkey"in s&&"endkey"in s&&m.collate(s.startkey,s.endkey)>0)return{docs:[]};return t.sort&&"string"!=typeof t.sort[0]&&"desc"===v.getValue(t.sort[0])&&(s.descending=!0,s=function(e){var t=b.clone(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(s)),i.inMemoryFields.length||("limit"in t&&(s.limit=t.limit),"skip"in t&&(s.skip=t.skip)),r?y.resolve(i,s):y.resolve().then(function(){if("_all_docs"===o.name)return function(e,t){var r=b.clone(t);return r.descending?("endkey"in r&&"string"!=typeof r.endkey&&(r.endkey=""),"startkey"in r&&"string"!=typeof r.startkey&&(r.limit=0)):("startkey"in r&&"string"!=typeof r.startkey&&(r.startkey=""),"endkey"in r&&"string"!=typeof r.endkey&&(r.limit=0)),"key"in r&&"string"!=typeof r.key&&(r.limit=0),e.allDocs(r).then(function(e){return e.rows=e.rows.filter(function(e){return!/^_design\//.test(e.id)}),e})}(e,s);var t=function(e){return e.ddoc.substring(8)+"/"+e.name}(o);return x.query.call(e,t,s)}).then(function(e){!1===s.inclusive_start&&(e.rows=function(e,t,r){for(var n=r.def.fields,i=0,o=e.length;i<o;i++){var s=function(e,t){for(var r=[],n=0;n<t.def.fields.length;n++){var i=v.getKey(t.def.fields[n]);r.push(e[i])}return r}(e[i].doc,r);if(1===n.length)s=s[0];else for(;s.length>t.length;)s.pop();if(Math.abs(m.collate(s,t))>0)break}return i>0?e.slice(i):e}(e.rows,s.startkey,o)),i.inMemoryFields.length&&(e.rows=v.filterInMemoryFields(e.rows,t,i.inMemoryFields));var r={docs:e.rows.map(function(e){var r=e.doc;return t.fields?function(e,t){for(var r={},n=0,i=t.length;n<i;n++){var o=v.parseField(t[n]),s=v.getFieldFromDoc(e,o);void 0!==s&&v.setFieldInDoc(r,o,s)}return r}(r,t.fields):r})};return o.defaultUsed&&(r.warning="no matching index found, create an index to optimize query time"),r})})}var b=e("pouchdb-utils"),y=n(e("pouchdb-promise")),v=e("pouchdb-selector-core"),_=n(e("pouchdb-abstract-mapreduce")),m=e("pouchdb-collate"),g=e("pouchdb-md5"),w=o(function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?t=t.concat(w.apply(null,i)):t.push(i)}return t}),x=_("indexes",function(e,t){return function(e,t){var r=function(e){for(var t=0,r=e.length;t<r;t++)if(-1!==e[t].indexOf("."))return!1;return!0}(e),n=1===e.length;return r?n?function(e,t){return function(r){t(r[e])}}(e[0],t):function(e,t){return function(r){for(var n=[],i=0,o=e.length;i<o;i++)n.push(r[e[i]]);t(n)}}(e,t):n?function(e,t){var r=v.parseField(e);return function(e){for(var n=e,i=0,o=r.length;i<o;i++)if(!(n=n[r[i]]))return;t(n)}}(e[0],t):function(e,t){return function(r){for(var n=[],i=0,o=e.length;i<o;i++){for(var s=v.parseField(e[i]),a=r,u=0,c=s.length;u<c;u++)if(!(a=a[s[u]]))return;n.push(a)}t(n)}}(e,t)}(Object.keys(e.fields),t)},function(){throw new Error("reduce not supported")},function(e,t){var r=e.views[t];if(!r.map||!r.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}),k=null,j={"￿":{}},S=["$eq","$gt","$gte","$lt","$lte"],E=s(function(e,t){function r(){return o||(o=g.stringMd5(JSON.stringify(t)))}t=i(t);var n=b.clone(t.index);t.index=f(t.index),function(e){var t=e.fields.filter(function(e){return"asc"===v.getValue(e)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);var o,s=t.name||"idx-"+r(),u=t.ddoc||"idx-"+r(),c="_design/"+u,l=!1,d=!1;return e.constructor.emit("debug",["find","creating index",c]),b.upsert(e,c,function(e){return e._rev&&"query"!==e.language&&(l=!0),e.language="query",e.views=e.views||{},!(d=!!e.views[s])&&(e.views[s]={map:{fields:a(t.index.fields)},reduce:"_count",options:{def:n}},e)}).then(function(){if(l)throw new Error('invalid language for ddoc with id "'+c+'" (should be "query")')}).then(function(){var t=u+"/"+s;return x.query.call(e,t,{limit:0,reduce:!1}).then(function(){return{id:c,name:s,result:d?"exists":"created"}})})}),O=s(p),C=s(function(e,t){return p(e,t,!0).then(function(r){return{dbname:e.name,index:r.index,selector:t.selector,range:{start_key:r.queryOpts.startkey,end_key:r.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}),A=s(l),P=s(function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var r=t.ddoc,n=t.name;return b.upsert(e,r,function(e){return 1===Object.keys(e.views).length&&e.views[n]?{_id:r,_deleted:!0}:(delete e.views[n],e)}).then(function(){return x.viewCleanup.apply(e)}).then(function(){return{ok:!0}})}),M={};M.createIndex=b.toPromise(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));(b.isRemote(this)?function(e,t,r){t=i(t),e.request({method:"POST",url:"_index",body:t},r)}:E)(this,e,t)}),M.find=b.toPromise(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));(b.isRemote(this)?function(e,t,r){e.request({method:"POST",url:"_find",body:t},r)}:O)(this,e,t)}),M.explain=b.toPromise(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));(b.isRemote(this)?function(e,t,r){e.request({method:"POST",url:"_explain",body:t},r)}:C)(this,e,t)}),M.getIndexes=b.toPromise(function(e){(b.isRemote(this)?function(e,t){e.request({method:"GET",url:"_index"},t)}:A)(this,e)}),M.deleteIndex=b.toPromise(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));(b.isRemote(this)?function(e,t,r){var n=t.ddoc,i=t.type||"json",o=t.name;if(!n)return r(new Error("you must provide an index's ddoc"));if(!o)return r(new Error("you must provide an index's name"));var s="_index/"+[n,i,o].map(encodeURIComponent).join("/");e.request({method:"DELETE",url:s},r)}:P)(this,e,t)}),t.exports=M}).call(this,e("_process"))},{_process:609,"pouchdb-abstract-mapreduce":569,"pouchdb-collate":593,"pouchdb-md5":602,"pouchdb-promise":604,"pouchdb-selector-core":606,"pouchdb-utils":607}],599:[function(e,t,r){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("pouchdb-promise")),i=e("pouchdb-md5"),o=e("pouchdb-collate");t.exports=function(e,t,r){var s=r.doc_ids?r.doc_ids.sort(o.collate):"",a=r.filter?r.filter.toString():"",u="",c="",f="";return r.selector&&(f=JSON.stringify(r.selector)),r.filter&&r.query_params&&(u=JSON.stringify(function(e){return Object.keys(e).sort(o.collate).reduce(function(t,r){return t[r]=e[r],t},{})}(r.query_params))),r.filter&&"_view"===r.filter&&(c=r.view.toString()),n.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+a+c+u+s+f;return new n(function(e){i.binaryMd5(t,e)})}).then(function(e){return"_local/"+(e=e.replace(/\//g,".").replace(/\+/g,"_"))})}},{"pouchdb-collate":593,"pouchdb-md5":602,"pouchdb-promise":604}],600:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("vuvuzela"));r.safeJsonParse=function(e){try{return JSON.parse(e)}catch(t){return n.parse(e)}},r.safeJsonStringify=function(e){try{return JSON.stringify(e)}catch(t){return n.stringify(e)}}},{vuvuzela:781}],601:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,i)}catch(e){}}function o(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,o)}catch(e){}}function s(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,s)}catch(e){}}function a(e,t){return t&&e.then(function(e){f.nextTick(function(){t(null,e)})},function(e){f.nextTick(function(){t(e)})}),e}Object.defineProperty(r,"__esModule",{value:!0});var u=e("pouchdb-collections"),c=n(e("argsarray")),f=e("pouchdb-utils"),l=n(e("inherits"));l(i,Error),l(o,Error),l(s,Error),r.uniq=function(e){var t=new u.Set(e),r=new Array(t.size),n=-1;return t.forEach(function(e){r[++n]=e}),r},r.sequentialize=function(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}},r.fin=function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})},r.callbackify=function(e){return c(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&a(n,r),n})},r.promisedCallback=a,r.mapToKeysArray=function(e){var t=new Array(e.size),r=-1;return e.forEach(function(e,n){t[++r]=n}),t},r.QueryParseError=i,r.NotFoundError=o,r.BuiltInError=s},{argsarray:38,inherits:520,"pouchdb-collections":594,"pouchdb-utils":607}],602:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("pouchdb-binary-utils"),i=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("spark-md5")),o=t.setImmediate||t.setTimeout,s=32768;r.binaryMd5=function(e,t){function r(){var i=l*c,s=i+c;++l<f?h(d,e,i,s,function(){o(r)}):h(d,e,i,s,function(){var e=function(e){return n.btoa(e)}(d.end(!0));t(e),d.destroy()})}var a="string"==typeof e,u=a?e.length:e.size,c=Math.min(s,u),f=Math.ceil(u/c),l=0,d=a?new i:new i.ArrayBuffer,h=a?function(e,t,r,n,i){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),i()}:function(e,t,r,i,o){(r>0||i<t.size)&&(t=function(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.slice(t,r)}(t,r,i)),n.readAsArrayBuffer(t,function(t){e.append(t),o()})};r()},r.stringMd5=function(e){return i.hash(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pouchdb-binary-utils":590,"spark-md5":743}],603:[function(e,t,r){"use strict";function n(e){for(var t,r,n,i,o=e.rev_tree.slice();i=o.pop();){var s=i.ids,a=s[2],u=i.pos;if(a.length)for(var c=0,f=a.length;c<f;c++)o.push({pos:u+1,ids:a[c]});else{var l=!!s[1].deleted,d=s[0];t&&!(n!==l?n:r!==u?r<u:t<d)||(t=d,r=u,n=l)}}return r+"-"+t}function i(e,t){for(var r,n=e.slice();r=n.pop();)for(var i=r.pos,o=r.ids,s=o[2],a=t(0===s.length,i,o[0],r.ctx,o[1]),u=0,c=s.length;u<c;u++)n.push({pos:i+1,ids:s[u],ctx:a})}function o(e){var t=[];i(e,function(e,r,n,i,o){e&&t.push({rev:r+"-"+n,pos:r,opts:o})}),t.sort(function(e,t){return e.pos-t.pos}).reverse();for(var r=0,n=t.length;r<n;r++)delete t[r].pos;return t}function s(e){for(var t,r=[],n=e.slice();t=n.pop();){var i=t.pos,o=t.ids,s=o[0],a=o[1],u=o[2],c=0===u.length,f=t.history?t.history.slice():[];f.push({id:s,opts:a}),c&&r.push({pos:i+1-f.length,ids:f});for(var l=0,d=u.length;l<d;l++)n.push({pos:i+1,ids:u[l],history:f})}return r.reverse()}function a(e,t){for(var r,n,i=t,o=e.length;i<o;i++){var s=e[i],a=[s.id,s.opts,[]];n?(n[2].push(a),n=a):r=n=a}return r}function u(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var i=r.pop(),o=i.tree1,s=i.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var u=!1,c=0;c<o[2].length;c++)o[2][c][0]===s[2][a][0]&&(r.push({tree1:o[2][c],tree2:s[2][a]}),u=!0);u||(n="new_branch",function(e,t,r){var n=function(e,t,r){for(var n,i=0,o=e.length;i<o;)r(e[n=i+o>>>1],t)<0?i=n+1:o=n;return i}(e,t,function(e,t){return e[0]<t[0]?-1:1});e.splice(n,0,t)}(o[2],s[2][a]))}else n="new_leaf",o[2][0]=s[2][a]}return{conflicts:n,tree:e}}function c(e,t,r){var n,i=[],o=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,c=e.length;a<c;a++){var f=e[a];if(f.pos===t.pos&&f.ids[0]===t.ids[0])n=u(f.ids,t.ids),i.push({pos:f.pos,ids:n.tree}),o=o||n.conflicts,s=!0;else if(!0!==r){var l=f.pos<t.pos?f:t,d=f.pos<t.pos?t:f,h=d.pos-l.pos,p=[],b=[];for(b.push({ids:l.ids,diff:h,parent:null,parentIdx:null});b.length>0;){var y=b.pop();if(0!==y.diff)for(var v=y.ids[2],_=0,m=v.length;_<m;_++)b.push({ids:v[_],diff:y.diff-1,parent:y.ids,parentIdx:_});else y.ids[0]===d.ids[0]&&p.push(y)}var g=p[0];g?(n=u(g.ids,d.ids),g.parent[2][g.parentIdx]=n.tree,i.push({pos:l.pos,ids:l.ids}),o=o||n.conflicts,s=!0):i.push(f)}else i.push(f)}return s||i.push(t),i.sort(function(e,t){return e.pos-t.pos}),{tree:i,conflicts:o||"internal_node"}}Object.defineProperty(r,"__esModule",{value:!0}),r.collectConflicts=function(e){for(var t=n(e),r=o(e.rev_tree),i=[],s=0,a=r.length;s<a;s++){var u=r[s];u.rev===t||u.opts.deleted||i.push(u.rev)}return i},r.collectLeaves=o,r.compactTree=function(e){var t=[];return i(e.rev_tree,function(e,r,n,i,o){"available"!==o.status||e||(t.push(r+"-"+n),o.status="missing")}),t},r.isDeleted=function(e,t){t||(t=n(e));for(var r,i=t.substring(t.indexOf("-")+1),o=e.rev_tree.map(function(e){return e.ids});r=o.pop();){if(r[0]===i)return!!r[1].deleted;o=o.concat(r[2])}},r.isLocalId=function(e){return/^_local/.test(e)},r.merge=function(e,t,r){var n=c(e,t),o=function(e,t){for(var r,n,o=s(e),u=0,f=o.length;u<f;u++){var l,d=o[u],h=d.ids;if(h.length>t){r||(r={});var p=h.length-t;l={pos:d.pos+p,ids:a(h,p)};for(var b=0;b<p;b++){var y=d.pos+b+"-"+h[b].id;r[y]=!0}}else l={pos:d.pos,ids:a(h,0)};n=n?c(n,l,!0).tree:[l]}return r&&i(n,function(e,t,n){delete r[t+"-"+n]}),{tree:n,revs:r?Object.keys(r):[]}}(n.tree,r);return{tree:o.tree,stemmedRevs:o.revs,conflicts:n.conflicts}},r.revExists=function(e,t){for(var r,n=e.slice(),i=t.split("-"),o=parseInt(i[0],10),s=i[1];r=n.pop();){if(r.pos===o&&r.ids[0]===s)return!0;for(var a=r.ids[2],u=0,c=a.length;u<c;u++)n.push({pos:r.pos+1,ids:a[u]})}return!1},r.rootToLeaf=s,r.traverseRevTree=i,r.winningRev=n,r.latest=function(e,t){for(var r,n=t.rev_tree.slice();r=n.pop();){var i=r.pos,o=r.ids,s=o[0],a=o[1],u=o[2],c=0===u.length,f=r.history?r.history.slice():[];if(f.push({id:s,pos:i,opts:a}),c)for(var l=0,d=f.length;l<d;l++){var h=f[l];if(h.pos+"-"+h.id===e)return i+"-"+s}for(var p=0,b=u.length;p<b;p++)n.push({pos:i+1,ids:u[p],history:f})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}},{}],604:[function(e,t,r){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(e("lie")),i="function"==typeof Promise?Promise:n;t.exports=i},{lie:556}],605:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return/^1-/.test(e)}function o(e,t){var r=Object.keys(t._attachments);return l.all(r.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function s(e,t,r,n,a){function u(){return j?l.resolve():p(e,t,r).then(function(i){k=i;var o={};o=!1===r.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===r.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===r.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},j=new h(e,t,k,n,o)})}function c(){n.cancelled||x||(0!==S.length?(x=S.shift(),function(){var e={};return x.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(n.cancelled)throw v(),new Error("cancelled");x.diffs=e})}().then(function(){return function(e,t,r,n){r=d.clone(r);var s=[],a=!0;return l.resolve().then(function(){var t=Object.keys(r).filter(function(e){var t=r[e].missing;return 1===t.length&&i(t[0])});if(t.length>0)return function(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then(function(e){if(n.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){e.deleted||!e.doc||!i(e.value.rev)||function(e){return e._attachments&&Object.keys(e._attachments).length>0}(e.doc)||function(e){return e._conflicts&&e._conflicts.length>0}(e.doc)||(e.doc._conflicts&&delete e.doc._conflicts,s.push(e.doc),delete r[e.id])})})}(t)}).then(function(){var i=function(e){var t=[];return Object.keys(e).forEach(function(r){e[r].missing.forEach(function(e){t.push({id:r,rev:e})})}),{docs:t,revs:!0,latest:!0}}(r);if(i.docs.length)return e.bulkGet(i).then(function(r){if(n.cancelled)throw new Error("cancelled");return l.all(r.results.map(function(r){return l.all(r.docs.map(function(r){var n=r.ok;return r.error&&(a=!1),n&&n._attachments?function(e,t,r){var n=d.isRemote(t)&&!d.isRemote(e),i=Object.keys(r._attachments);return n?e.get(r._id).then(function(n){return l.all(i.map(function(i){return function(e,t,r){return!e._attachments||!e._attachments[r]||e._attachments[r].digest!==t._attachments[r].digest}(n,r,i)?t.getAttachment(r._id,i):e.getAttachment(n._id,i)}))}).catch(function(e){if(404!==e.status)throw e;return o(t,r)}):o(t,r)}(t,e,n).then(function(e){var t=Object.keys(n._attachments);return e.forEach(function(e,r){var i=n._attachments[t[r]];delete i.stub,delete i.length,i.data=e}),n}):n}))})).then(function(e){s=s.concat(d.flatten(e).filter(Boolean))})})}).then(function(){return{ok:a,docs:s}})}(e,t,x.diffs,n).then(function(e){x.error=!e.ok,e.docs.forEach(function(e){delete x.diffs[e._id],a.docs_read++,x.docs.push(e)})})}).then(function(){if(B=[],0!==x.docs.length){var e=x.docs,i={timeout:r.timeout};return t.bulkDocs({docs:e,new_edits:!1},i).then(function(t){if(n.cancelled)throw v(),new Error("cancelled");var r=Object.create(null);t.forEach(function(e){e.error&&(r[e.id]=e)});var i=Object.keys(r).length;a.doc_write_failures+=i,a.docs_written+=e.length-i,e.forEach(function(e){var t=r[e._id];if(t){if(a.errors.push(t),"unauthorized"!==t.name&&"forbidden"!==t.name)throw t;n.emit("denied",d.clone(t))}else B.push(e)})},function(t){throw a.doc_write_failures+=e.length,t})}}).then(function(){if(x.error)throw new Error("There was a problem getting docs.");a.last_seq=P=x.seq;var e=d.clone(a);return B.length&&(e.docs=B,n.emit("change",e)),O=!0,j.writeCheckpoint(x.seq,N).then(function(){if(O=!1,n.cancelled)throw v(),new Error("cancelled");x=void 0,m()}).catch(function(e){throw w(e),e})}).then(c).catch(function(e){y("batch processing terminated with error",e)})):f(!0))}function f(e){0!==E.changes.length?(e||C||E.changes.length>=R)&&(S.push(E),E={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),c()):0!==S.length||x||((M&&F.live||C)&&(n.state="pending",n.emit("paused")),C&&v())}function y(e,t){A||(t.message||(t.message=e),a.ok=!1,a.status="aborting",S=[],E={seq:0,changes:[],docs:[]},v(t))}function v(i){A||n.cancelled&&(a.status="cancelled",O)||(a.status=a.status||"complete",a.end_time=new Date,a.last_seq=P,A=!0,i?((i=b.createError(i)).result=a,"unauthorized"===i.name||"forbidden"===i.name?(n.emit("error",i),n.removeAllListeners()):function(e,t,r,n){if(!1===e.retry)return t.emit("error",r),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=d.defaultBackOff),t.emit("requestError",r),"active"===t.state||"pending"===t.state){t.emit("paused",r),t.state="stopped";var i=function(){e.current_back_off=_};t.once("paused",function(){t.removeListener("active",i)}),t.once("active",i)}e.current_back_off=e.current_back_off||_,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(n,e.current_back_off)}(r,n,i,function(){s(e,t,r,n)})):(n.emit("complete",a),n.removeAllListeners()))}function m(){function t(){o.cancel()}function i(){n.removeListener("cancel",t)}if(!T&&!C&&S.length<I){T=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",t);var o=e.changes(F).on("change",function(e){if(n.cancelled)return v();d.filterChange(r)(e)&&(E.seq=e.seq,E.changes.push(e),f(0===S.length&&F.live))});o.then(i,i),o.then(function(e){if(T=!1,n.cancelled)return v();if(e.results.length>0)F.since=e.last_seq,m(),f(!0);else{var t=function(){M?(F.live=!0,m()):C=!0,f(!0)};x||0!==e.results.length?t():(O=!0,j.writeCheckpoint(e.last_seq,N).then(function(){O=!1,a.last_seq=P=e.last_seq,t()}).catch(w))}}).catch(function(e){if(T=!1,n.cancelled)return v();y("changes rejected",e)}),r.retry&&(n._changes=o,n._abortChanges=t)}}function g(){u().then(function(){if(!n.cancelled)return j.getCheckpoint().then(function(e){F={since:P=e,limit:R,batch_size:R,style:"all_docs",doc_ids:D,selector:L,return_docs:!0},r.filter&&("string"!=typeof r.filter?F.include_docs=!0:F.filter=r.filter),"heartbeat"in r&&(F.heartbeat=r.heartbeat),"timeout"in r&&(F.timeout=r.timeout),r.query_params&&(F.query_params=r.query_params),r.view&&(F.view=r.view),m()});v()}).catch(function(e){y("getCheckpoint rejected with ",e)})}function w(e){O=!1,y("writeCheckpoint completed with error",e)}var x,k,j,S=[],E={seq:0,changes:[],docs:[]},O=!1,C=!1,A=!1,P=0,M=r.continuous||r.live||!1,R=r.batch_size||100,I=r.batches_limit||10,T=!1,D=r.doc_ids,L=r.selector,B=[],N=d.uuid();a=a||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var F={};n.ready(e,t),n.cancelled?v():(n._addedListeners||(n.once("cancel",v),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(e){r.complete(null,e)})),n._addedListeners=!0),void 0===r.since?g():u().then(function(){return O=!0,j.writeCheckpoint(r.since,N)}).then(function(){O=!1,n.cancelled?v():(P=r.since,g())}).catch(w))}function a(){y.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new l(function(t,r){e.once("complete",t),e.once("error",r)});e.then=function(e,r){return t.then(e,r)},e.catch=function(e){return t.catch(e)},e.catch(function(){})}function u(e,t){var r=t.PouchConstructor;return"string"==typeof e?new r(e,t):e}function c(e,t,r,n){if("function"==typeof r&&(n=r,r={}),void 0===r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw b.createError(b.BAD_REQUEST,"`doc_ids` filter parameter is not a list.");r.complete=n,(r=d.clone(r)).continuous=r.continuous||r.live,r.retry="retry"in r&&r.retry,r.PouchConstructor=r.PouchConstructor||this;var i=new a(r);return s(u(e,r),u(t,r),r,i),i}function f(e,t,r,n){function i(e){v.emit("change",{direction:"pull",change:e})}function o(e){v.emit("change",{direction:"push",change:e})}function s(e){v.emit("denied",{direction:"push",doc:e})}function a(e){v.emit("denied",{direction:"pull",doc:e})}function u(){v.pushPaused=!0,v.pullPaused&&v.emit("paused")}function f(){v.pullPaused=!0,v.pushPaused&&v.emit("paused")}function h(){v.pushPaused=!1,v.pullPaused&&v.emit("active",{direction:"push"})}function p(){v.pullPaused=!1,v.pushPaused&&v.emit("active",{direction:"pull"})}function b(e){return function(t,r){("change"===t&&(r===i||r===o)||"denied"===t&&(r===a||r===s)||"paused"===t&&(r===f||r===u)||"active"===t&&(r===p||r===h))&&(t in g||(g[t]={}),g[t][e]=!0,2===Object.keys(g[t]).length&&v.removeAllListeners(t))}}function y(e,t,r){-1==e.listeners(t).indexOf(r)&&e.on(t,r)}var v=this;this.canceled=!1;var _=r.push?d.assign({},r,r.push):r,m=r.pull?d.assign({},r,r.pull):r;this.push=c(e,t,_),this.pull=c(t,e,m),this.pushPaused=!0,this.pullPaused=!0;var g={};r.live&&(this.push.on("complete",v.pull.cancel.bind(v.pull)),this.pull.on("complete",v.push.cancel.bind(v.push))),this.on("newListener",function(e){"change"===e?(y(v.pull,"change",i),y(v.push,"change",o)):"denied"===e?(y(v.pull,"denied",a),y(v.push,"denied",s)):"active"===e?(y(v.pull,"active",p),y(v.push,"active",h)):"paused"===e&&(y(v.pull,"paused",f),y(v.push,"paused",u))}),this.on("removeListener",function(e){"change"===e?(v.pull.removeListener("change",i),v.push.removeListener("change",o)):"denied"===e?(v.pull.removeListener("denied",a),v.push.removeListener("denied",s)):"active"===e?(v.pull.removeListener("active",p),v.push.removeListener("active",h)):"paused"===e&&(v.pull.removeListener("paused",f),v.push.removeListener("paused",u))}),this.pull.on("removeListener",b("pull")),this.push.on("removeListener",b("push"));var w=l.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return v.emit("complete",t),n&&n(null,t),v.removeAllListeners(),t},function(e){if(v.cancel(),n?n(e):v.emit("error",e),v.removeAllListeners(),n)throw e});this.then=function(e,t){return w.then(e,t)},this.catch=function(e){return w.catch(e)}}var l=n(e("pouchdb-promise")),d=e("pouchdb-utils"),h=n(e("pouchdb-checkpointer")),p=n(e("pouchdb-generate-replication-id")),b=e("pouchdb-errors"),y=e("events"),v=n(e("inherits")),_=0;v(a,y.EventEmitter),a.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},a.prototype.ready=function(e,t){function r(){n.cancel()}var n=this;n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",function(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}))},v(f,y.EventEmitter),f.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},t.exports=function(e){e.replicate=c,e.sync=function(e,t,r,n){return"function"==typeof r&&(n=r,r={}),void 0===r&&(r={}),r=d.clone(r),r.PouchConstructor=r.PouchConstructor||this,e=u(e,r),t=u(t,r),new f(e,t,r,n)},Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return{from:function(t,r,n){return e.constructor.replicate(t,e,r,n)},to:function(t,r,n){return e.constructor.replicate(e,t,r,n)}}}}),e.prototype.sync=function(e,t,r){return this.constructor.sync(this,e,t,r)}}},{events:510,inherits:520,"pouchdb-checkpointer":592,"pouchdb-errors":597,"pouchdb-generate-replication-id":599,"pouchdb-promise":604,"pouchdb-utils":607}],606:[function(e,t,r){"use strict";function n(e,t){for(var r=e,n=0,i=t.length;n<i;n++){if(!(r=r[t[n]]))break}return r}function i(e,t){return e<t?-1:e>t?1:0}function o(e){for(var t=[],r="",n=0,i=e.length;n<i;n++){var o=e[n];"."===o?n>0&&"\\"===e[n-1]?r=r.substring(0,r.length-1)+".":(t.push(r),r=""):r+=o}return t.push(r),t}function s(e){return g.indexOf(e)>-1}function a(e){return Object.keys(e)[0]}function u(e){return e[a(e)]}function c(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(r){var n=e[r];if("object"!=typeof n&&(n={$eq:n}),s(r))n instanceof Array?t[r]=n.map(function(e){return c([e])}):t[r]=c([n]);else{var i=t[r]=t[r]||{};Object.keys(n).forEach(function(e){var t=n[e];return"$gt"===e||"$gte"===e?function(e,t,r){if(void 0!==r.$eq)return;void 0!==r.$gte?"$gte"===e?t>r.$gte&&(r.$gte=t):t>=r.$gte&&(delete r.$gte,r.$gt=t):void 0!==r.$gt?"$gte"===e?t>r.$gt&&(delete r.$gt,r.$gte=t):t>r.$gt&&(r.$gt=t):r[e]=t}(e,t,i):"$lt"===e||"$lte"===e?function(e,t,r){if(void 0!==r.$eq)return;void 0!==r.$lte?"$lte"===e?t<r.$lte&&(r.$lte=t):t<=r.$lte&&(delete r.$lte,r.$lt=t):void 0!==r.$lt?"$lte"===e?t<r.$lt&&(delete r.$lt,r.$lte=t):t<r.$lt&&(r.$lt=t):r[e]=t}(e,t,i):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,i):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,i):void(i[e]=t)})}})}),t}function f(e){var t=_.clone(e),r=!1;"$and"in t&&(t=c(t.$and),r=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r],i=e[n];"object"==typeof i&&null!==i||(e[n]={$eq:i})}})}),"$not"in t&&(t.$not=c([t.$not]));for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],s=t[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!r&&(s.$ne=[s.$ne]),t[o]=s}return t}function l(e){function t(t){return e.map(function(e){var r=o(a(e));return n(t,r)})}return function(e,r){var n=t(e.doc),o=t(r.doc),s=m.collate(n,o);return 0!==s?s:i(e.doc._id,r.doc._id)}}function d(e,t,r){if(e=e.filter(function(e){return h(e.doc,t.selector,r)}),t.sort){var n=l(t.sort);e=e.sort(n),"string"!=typeof t.sort[0]&&"desc"===u(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function h(e,t,r){return r.every(function(r){var i=t[r],a=o(r),u=n(e,a);return s(r)?function(e,t,r){if("$or"===e)return t.some(function(e){return h(r,e,Object.keys(e))});if("$not"===e)return!h(r,t,Object.keys(t));return!t.find(function(e){return h(r,e,Object.keys(e))})}(r,i,e):p(i,e,a,u)})}function p(e,t,r,n){return!e||Object.keys(e).every(function(i){var o=e[i];return function(e,t,r,n,i){if(!w[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return w[e](t,r,n,i)}(i,t,o,r,n)})}function b(e){return void 0!==e&&null!==e}function y(e){return void 0!==e}function v(e,t){return t.some(function(t){return e instanceof Array?e.indexOf(t)>-1:e===t})}Object.defineProperty(r,"__esModule",{value:!0});var _=e("pouchdb-utils"),m=e("pouchdb-collate"),g=["$or","$nor","$not"],w={$elemMatch:function(e,t,r,n){return!!Array.isArray(n)&&(0!==n.length&&("object"==typeof n[0]?n.some(function(e){return h(e,t,Object.keys(t))}):n.some(function(n){return p(t,e,r,n)})))},$allMatch:function(e,t,r,n){return!!Array.isArray(n)&&(0!==n.length&&("object"==typeof n[0]?n.every(function(e){return h(e,t,Object.keys(t))}):n.every(function(n){return p(t,e,r,n)})))},$eq:function(e,t,r,n){return y(n)&&0===m.collate(n,t)},$gte:function(e,t,r,n){return y(n)&&m.collate(n,t)>=0},$gt:function(e,t,r,n){return y(n)&&m.collate(n,t)>0},$lte:function(e,t,r,n){return y(n)&&m.collate(n,t)<=0},$lt:function(e,t,r,n){return y(n)&&m.collate(n,t)<0},$exists:function(e,t,r,n){return t?y(n):!y(n)},$mod:function(e,t,r,n){return b(n)&&function(e,t){var r=t[0],n=t[1];if(0===r)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(r,10)!==r)throw new Error("Divisor is not an integer");if(parseInt(n,10)!==n)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%r===n}(n,t)},$ne:function(e,t,r,n){return t.every(function(e){return 0!==m.collate(n,e)})},$in:function(e,t,r,n){return b(n)&&v(n,t)},$nin:function(e,t,r,n){return b(n)&&!v(n,t)},$size:function(e,t,r,n){return b(n)&&function(e,t){return e.length===t}(n,t)},$all:function(e,t,r,n){return Array.isArray(n)&&function(e,t){return t.every(function(t){return e.indexOf(t)>-1})}(n,t)},$regex:function(e,t,r,n){return b(n)&&function(e,t){return new RegExp(t).test(e)}(n,t)},$type:function(e,t,r,n){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(n,t)}};r.massageSelector=f,r.matchesSelector=function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var r=d([{doc:e}],{selector:t=f(t)},Object.keys(t));return r&&1===r.length},r.filterInMemoryFields=d,r.createFieldSorter=l,r.rowFilter=h,r.isCombinationalField=s,r.getKey=a,r.getValue=u,r.getFieldFromDoc=n,r.setFieldInDoc=function(e,t,r){for(var n=0,i=t.length;n<i-1;n++)e=e[t[n]]={};e[t[i-1]]=r},r.compare=i,r.parseField=o},{"pouchdb-collate":593,"pouchdb-utils":607}],607:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;r<n;r++)t[r]=i(e[r]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return function(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&j.call(r)==S}(e))return e;t={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i(e[r]);void 0!==o&&(t[r]=o)}return t}function o(e){var t=!1;return _(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function s(e){return _(function(t){var r=this,n="function"==typeof(t=i(t))[t.length-1]&&t.pop(),s=new v(function(n,i){var s;try{var a=o(function(e,t){e?i(e):n(t)});t.push(a),(s=e.apply(r,t))&&"function"==typeof s.then&&n(s)}catch(e){i(e)}});return n&&s.then(function(e){n(null,e)},n),s})}function a(e,t){for(var r={},n=0,i=t.length;n<i;n++){var o=t[n];o in e&&(r[o]=e[o])}return r}function u(e){return e}function c(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}function f(){return b}function l(){g.EventEmitter.call(this),this._listeners={},function(e){c()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):f()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}(this)}function d(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function h(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function p(e,t,r){return new v(function(n,i){e.get(t,function(o,s){if(o){if(404!==o.status)return i(o);s={}}var a=s._rev,u=r(s);if(!u)return n({updated:!1,rev:a});u._id=t,u._rev=a,n(function(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(n){if(409!==n.status)throw n;return p(e,t._id,r)})}(e,u,r))})})}Object.defineProperty(r,"__esModule",{value:!0});var b,y=n(e("uuid")),v=n(e("pouchdb-promise")),_=n(e("argsarray")),m=e("pouchdb-collections"),g=e("events"),w=n(e("inherits")),x=n(e("immediate")),k=e("pouchdb-errors"),j=Function.prototype.toString,S=j.call(Object),E=6;if(c())b=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),b=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){b=!1}w(l,g.EventEmitter),l.prototype.addListener=function(e,t,r,n){function i(){if(o._listeners[t])if(s)s="waiting";else{s=!0;var e=a(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(e).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===s&&x(i),s=!1}).on("error",function(){s=!1})}}if(!this._listeners[t]){var o=this,s=!1;this._listeners[t]=i,this.on(e,i)}},l.prototype.removeListener=function(e,t){t in this._listeners&&(g.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},l.prototype.notifyLocalWindows=function(e){c()?chrome.storage.local.set({dbName:e}):f()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},l.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var O,C,A=O="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},P=C=function(){}.name?function(e){return e.name}:function(e){return e.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]},M=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],R="queryKey",I=/(?:^|&)([^&=]*)=?([^&]*)/g,T=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,D=y.v4;r.adapterFun=function(e,t){return s(_(function(r){if(this._closed)return v.reject(new Error("database is closed"));if(this._destroyed)return v.reject(new Error("database is destroyed"));var n=this;return function(e,t,r){if(e.constructor.listeners("debug").length){for(var n=["api",e.name,t],i=0;i<r.length-1;i++)n.push(r[i]);e.constructor.emit("debug",n);var o=r[r.length-1];r[r.length-1]=function(r,n){var i=["api",e.name,t];i=i.concat(r?["error",r]:["success",n]),e.constructor.emit("debug",i),o(r,n)}}}(n,e,r),this.taskqueue.isReady?t.apply(this,r):new v(function(t,i){n.taskqueue.addTask(function(o){o?i(o):t(n[e].apply(n,r))})})}))},r.assign=A,r.bulkGetShim=function(e,t,r){function n(){if(!(d>=l.length)){var i=Math.min(d+E,l.length),h=l.slice(d,i);!function(i,l){i.forEach(function(i,d){var h=l+d,p=o.get(i),b=a(p[0],["atts_since","attachments"]);b.open_revs=p.map(function(e){return e.rev}),b.open_revs=b.open_revs.filter(u);var y=u;0===b.open_revs.length&&(delete b.open_revs,y=function(e){return[{ok:e}]}),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in t&&(b[e]=t[e])}),e.get(i,b,function(e,t){var o;o=e?[{error:e}]:y(t),function(e,t,n){f[h]={id:t,docs:n},++c===s&&function(){var e=[];f.forEach(function(t){t.docs.forEach(function(r){e.push({id:t.id,docs:[r]})})}),r(null,{results:e})}()}(0,i,o),n()})})}(h,d),d+=h.length}}var i=t.docs,o=new m.Map;i.forEach(function(e){o.has(e.id)?o.get(e.id).push(e):o.set(e.id,[e])});var s=o.size,c=0,f=new Array(s),l=[];o.forEach(function(e,t){l.push(t)});var d=0;n()},r.changesHandler=l,r.clone=i,r.defaultBackOff=function(e){var t=0;return e||(t=2e3),function(e,t){return e=parseInt(e,10)||0,(t=parseInt(t,10))!=t||t<=e?t=(e||1)<<1:t+=1,t>6e5&&(e=3e5,t=6e5),~~((t-e)*Math.random()+e)}(e,t)},r.explainError=function(e,t){d("info","The above "+e+" is totally normal. "+t)},r.filterChange=function(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(n){n.doc||(n.doc={});var i=r&&function(e,t,r){try{return!e(t,r)}catch(e){var n="Filter function threw: "+e.toString();return k.createError(k.BAD_REQUEST,n)}}(e.filter,n.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var o in n.doc._attachments)n.doc._attachments.hasOwnProperty(o)&&(n.doc._attachments[o].stub=!0)}else delete n.doc;return!0}},r.flatten=function(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t},r.functionName=P,r.guardedConsole=d,r.hasLocalStorage=f,r.invalidIdError=function(e){var t;if(e?"string"!=typeof e?t=k.createError(k.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=k.createError(k.RESERVED_ID)):t=k.createError(k.MISSING_ID),t)throw t},r.isChromeApp=c,r.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},r.isRemote=function(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(d("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())},r.listenerCount=function(e,t){return"listenerCount"in e?e.listenerCount(t):g.EventEmitter.listenerCount(e,t)},r.nextTick=x,r.normalizeDdocFunctionName=function(e){var t=h(e);return t?t.join("/"):null},r.once=o,r.parseDdocFunctionName=h,r.parseUri=function(e){for(var t=T.exec(e),r={},n=14;n--;){var i=M[n],o=t[n]||"",s=-1!==["user","password"].indexOf(i);r[i]=s?decodeURIComponent(o):o}return r[R]={},r[M[12]].replace(I,function(e,t,n){t&&(r[R][t]=n)}),r},r.pick=a,r.rev=function(){return y.v4().replace(/-/g,"").toLowerCase()},r.scopeEval=function(e,t){var r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(r.push(i),n.push(t[i]));return r.push(e),Function.apply(null,r).apply(null,n)},r.toPromise=s,r.upsert=p,r.uuid=D},{argsarray:38,events:510,immediate:518,inherits:520,"pouchdb-collections":594,"pouchdb-errors":597,"pouchdb-promise":604,uuid:775}],608:[function(e,t,r){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(this,e("_process"))},{_process:609}],609:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(){if(!p){var e=o(function(){p&&d&&(p=!1,d.length?h=d.concat(h):b=-1,h.length&&s())});p=!0;for(var t=h.length;t;){for(d=h,h=[];++b<t;)d&&d[b].run();b=-1,t=h.length}d=null,p=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function u(){}var c,f,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,h=[],p=!1,b=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new a(e,t)),1!==h.length||p||o(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(e){return[]},l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],610:[function(e,t,r){"use strict";var n=e("to-property-key-x"),i=e("to-object-x"),o=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return o.call(i(e),n(t))}},{"to-object-x":759,"to-property-key-x":761}],611:[function(e,t,r){arguments[4][509][0].apply(r,arguments)},{dup:509}],612:[function(e,t,r){!function(e){function r(e){e="string"==typeof e&&e.length>0?e:"abcdefghijklmnopqrstuvwxzy0123456789";var t=n.bind(n,e);return t.salt=function(){return e},t.create=r,t.gen=r,t}var n=function(e,t){return isNaN(t)?void 0:t<1?void 0:function(e,t){for(var r="",n=e.length;t--;)r+=e[function(e){return Math.floor(Math.random()*e)}(n)];return r}(e,t)};n.gen=r,t.exports=r()}()},{}],613:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":614}],614:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);a.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",function(){if(this.allowHalfOpen||this._writableState.ended)return;i(function(e){e.end()},this)})}var i=e("process-nextick-args"),o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var s=e("core-util-is");s.inherits=e("inherits");var a=e("./_stream_readable"),u=e("./_stream_writable");s.inherits(n,a);for(var c=o(u.prototype),f=0;f<c.length;f++){var l=c[f];n.prototype[l]||(n.prototype[l]=u.prototype[l])}Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),i(t,e)}},{"./_stream_readable":616,"./_stream_writable":618,"core-util-is":481,inherits:520,"process-nextick-args":608}],615:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":617,"core-util-is":481,inherits:520}],616:[function(e,t,r){(function(r,n){"use strict";function i(t,r){v=v||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof v&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(E||(E=e("string_decoder/").StringDecoder),this.decoder=new E(t.encoding),this.encoding=t.encoding)}function o(t){if(v=v||e("./_stream_duplex"),!(this instanceof o))return new o(t);this._readableState=new i(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),g.call(this)}function s(e,t,r,n,i){var o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,c(e)}(e,o);else{var s;i||(s=function(e,t){var r;(function(e){return w.isBuffer(e)||e instanceof x})(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===w.prototype||(t=function(e){return w.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):a(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?a(e,o,t,!1):l(e,o)):a(e,o,t,!1))):n||(o.reading=!1)}return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function a(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&c(e)),l(e,t)}function u(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?y(f,e):f(e))}function f(e){S("emit readable"),e.emit("readable"),d(e)}function l(e,t){t.readingMore||(t.readingMore=!0,y(function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(S("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1},e,t))}function d(e){var t=e._readableState;for(S("flow",t.flowing);t.flowing&&null!==e.read(););}function h(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=w.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r}function p(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,y(function(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))},t,e))}function b(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var y=e("process-nextick-args");t.exports=o;var v,_=e("isarray");o.ReadableState=i;e("events").EventEmitter;var m=function(e,t){return e.listeners(t).length},g=e("./internal/streams/stream"),w=e("safe-buffer").Buffer,x=n.Uint8Array||function(){},k=e("core-util-is");k.inherits=e("inherits");var j=e("util"),S=void 0;S=j&&j.debuglog?j.debuglog("stream"):function(){};var E,O=e("./internal/streams/BufferList"),C=e("./internal/streams/destroy");k.inherits(o,g);var A=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=C.destroy,o.prototype._undestroy=C.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=w.from(e,t),t=""),r=!0),s(this,e,t,!1,r)},o.prototype.unshift=function(e){return s(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return E||(E=e("string_decoder/").StringDecoder),this._readableState.decoder=new E(t),this._readableState.encoding=t,this};var P=8388608;o.prototype.read=function(e){S("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return S("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?p(this):c(this),null;if(0===(e=u(e,t))&&t.ended)return 0===t.length&&p(this),null;var n=t.needReadable;S("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&S("length less than watermark",n=!0),t.ended||t.reading?S("reading or ended",n=!1):n&&(S("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=u(r,t)));var i;return null===(i=e>0?h(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&p(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function n(t,r){S("onunpipe"),t===f&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,S("cleanup"),e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",c),f.removeListener("data",o),v=!0,!l.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function i(){S("onend"),e.end()}function o(t){S("ondata"),g=!1;!1!==e.write(t)||g||((1===l.pipesCount&&l.pipes===e||l.pipesCount>1&&-1!==b(l.pipes,e))&&!v&&(S("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,g=!0),f.pause())}function s(t){S("onerror",t),c(),e.removeListener("error",s),0===m(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),c()}function u(){S("onfinish"),e.removeListener("close",a),c()}function c(){S("unpipe"),f.unpipe(e)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1,S("pipe count=%d opts=%j",l.pipesCount,t);var h=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:c;l.endEmitted?y(h):f.once("end",h),e.on("unpipe",n);var p=function(e){return function(){var t=e._readableState;S("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&m(e,"data")&&(t.flowing=!0,d(e))}}(f);e.on("drain",p);var v=!1,g=!1;return f.on("data",o),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?_(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",s),e.once("close",a),e.once("finish",u),e.emit("pipe",f),l.flowing||(S("pipe resume"),f.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=b(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},o.prototype.on=function(e,t){var r=g.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&c(this):y(function(e){S("readable nexttick read 0"),e.read(0)},this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(S("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,y(function(e,t){t.reading||(S("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),d(e),t.flowing&&!t.reading&&e.read(0)},e,t))}(this,e)),this},o.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(S("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(S("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<A.length;o++)e.on(A[o],n.emit.bind(n,A[o]));return n._read=function(t){S("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":614,"./internal/streams/BufferList":619,"./internal/streams/destroy":620,"./internal/streams/stream":621,_process:609,"core-util-is":481,events:510,inherits:520,isarray:537,"process-nextick-args":608,"safe-buffer":741,"string_decoder/":745,util:59}],617:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);o.call(this,e),this._transformState=new function(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){i(t,e,r)}):i(t)})}function i(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=n;var o=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(n,o),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},n.prototype._destroy=function(e,t){var r=this;o.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":614,"core-util-is":481,inherits:520}],618:[function(e,t,r){(function(r,n){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function o(t,r){h=h||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof h&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(d(i,n),d(l,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),l(e,t))}(e,r,n,t,i);else{var o=f(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||c(e,r),n?p(u,e,r,o,i):u(e,r,o,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function s(t){if(h=h||e("./_stream_duplex"),!(w.call(s,this)||this instanceof h))return new s(t);this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),v.call(this)}function a(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function u(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),l(e,t)}function c(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var u=0,c=!0;r;)o[u]=r,r.isBuf||(c=!1),r=r.next,u+=1;o.allBuffers=c,a(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t)}else{for(;r;){var f=r.chunk,l=r.encoding,d=r.callback;if(a(e,t,!1,t.objectMode?1:f.length,f,l,d),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function l(e,t){var r=f(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,d(function(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),l(e,t)})},e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}var d=e("process-nextick-args");t.exports=s;var h,p=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:d;s.WritableState=o;var b=e("core-util-is");b.inherits=e("inherits");var y={deprecate:e("util-deprecate")},v=e("./internal/streams/stream"),_=e("safe-buffer").Buffer,m=n.Uint8Array||function(){},g=e("./internal/streams/destroy");b.inherits(s,v),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var w;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!w.call(this,e)||e&&e._writableState instanceof o}})):w=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=function(e){return _.isBuffer(e)||e instanceof m}(e)&&!n.objectMode;return o&&!_.isBuffer(e)&&(e=function(e){return _.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),d(t,r)}(this,r):(o||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),d(n,o),i=!1),i}(this,n,e,r))&&(n.pendingcb++,i=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=_.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else a(e,t,!1,u,n,i,o);return c}(this,n,o,e,t,r)),i},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||c(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,l(e,t),r&&(t.finished?d(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),s.prototype.destroy=g.destroy,s.prototype._undestroy=g.undestroy,s.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":614,"./internal/streams/destroy":620,"./internal/streams/stream":621,_process:609,"core-util-is":481,inherits:520,"process-nextick-args":608,"safe-buffer":741,"util-deprecate":771}],619:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t=n.allocUnsafe(e>>>0),r=this.head,i=0;r;)!function(e,t,r){e.copy(t,r)}(r.data,t,i),i+=r.data.length,r=r.next;return t},e}()},{"safe-buffer":741}],620:[function(e,t,r){"use strict";function n(e,t){e.emit("error",t)}var i=e("process-nextick-args");t.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;o||s?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(n,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":608}],621:[function(e,t,r){t.exports=e("events").EventEmitter},{events:510}],622:[function(e,t,r){t.exports=e("./readable").PassThrough},{"./readable":623}],623:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":614,"./lib/_stream_passthrough.js":615,"./lib/_stream_readable.js":616,"./lib/_stream_transform.js":617,"./lib/_stream_writable.js":618}],624:[function(e,t,r){t.exports=e("./readable").Transform},{"./readable":623}],625:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":618}],626:[function(e,t,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},{"./runtime":627}],627:[function(e,t,r){!function(e){"use strict";function r(e,t,r,o){var s=t&&t.prototype instanceof i?t:i,a=Object.create(s.prototype),u=new l(o||[]);return a._invoke=function(e,t,r){var i=k;return function(o,s){if(i===S)throw new Error("Generator is already running");if(i===E){if("throw"===o)throw s;return h()}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=c(a,r);if(u){if(u===O)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===k)throw i=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=S;var f=n(e,t,r);if("normal"===f.type){if(i=r.done?E:j,f.arg===O)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(i=E,r.method="throw",r.arg=f.arg)}}}(e,r,u),a}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function s(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(r,i,o,s){var a=n(e[r],e,i);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,s)},function(e){t("throw",e,o,s)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},s)}s(a.arg)}var r;this._invoke=function(e,n){function i(){return new Promise(function(r,i){t(e,n,r,i)})}return r=r?r.then(i,i):i()}}function c(e,t){var r=e.iterator[t.method];if(r===p){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=p,c(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=p),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function l(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(function(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)},this),this.reset(!0)}function d(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=p,t.done=!0,t};return n.next=n}}return{next:h}}function h(){return{value:p,done:!0}}var p,b=Object.prototype,y=b.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},_=v.iterator||"@@iterator",m=v.asyncIterator||"@@asyncIterator",g=v.toStringTag||"@@toStringTag",w="object"==typeof t,x=e.regeneratorRuntime;if(x)w&&(t.exports=x);else{(x=e.regeneratorRuntime=w?t.exports:{}).wrap=r;var k="suspendedStart",j="suspendedYield",S="executing",E="completed",O={},C={};C[_]=function(){return this};var A=Object.getPrototypeOf,P=A&&A(A(d([])));P&&P!==b&&y.call(P,_)&&(C=P);var M=s.prototype=i.prototype=Object.create(C);o.prototype=M.constructor=s,s.constructor=o,s[g]=o.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,g in e||(e[g]="GeneratorFunction")),e.prototype=Object.create(M),e},x.awrap=function(e){return{__await:e}},a(u.prototype),u.prototype[m]=function(){return this},x.AsyncIterator=u,x.async=function(e,t,n,i){var o=new u(r(e,t,n,i));return x.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},a(M),M[g]="Generator",M[_]=function(){return this},M.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},x.values=d,l.prototype={constructor:l,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=p)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=p),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=y.call(i,"catchLoc"),a=y.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;f(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=p),O}}}}(function(){return this}()||Function("return this")())},{}],628:[function(e,t,r){"use strict";var n=e("to-string-x"),i=e("require-coercible-to-string-x"),o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s="".replace;t.exports=function(e){return s.call(i(e),o,arguments.length>1?n(arguments[1]):"")}},{"require-coercible-to-string-x":629,"to-string-x":764}],629:[function(e,t,r){"use strict";var n=e("require-object-coercible-x"),i=e("to-string-x");t.exports=function(e){return i(n(e))}},{"require-object-coercible-x":630,"to-string-x":764}],630:[function(e,t,r){"use strict";var n=e("is-nil-x");t.exports=function(e){if(n(e))throw new TypeError("Cannot call method on "+e);return e}},{"is-nil-x":531}],631:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subject"),o=e("./util/ObjectUnsubscribedError"),s=function(e){function t(t){e.call(this),this._value=t}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject);r.BehaviorSubject=s},{"./Subject":639,"./util/ObjectUnsubscribedError":721}],632:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return n(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(e("./Subscriber").Subscriber);r.InnerSubscriber=i},{"./Subscriber":641}],633:[function(e,t,r){"use strict";var n=e("./Observable"),i=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();r.Notification=i},{"./Observable":634}],634:[function(e,t,r){"use strict";var n=e("./util/root"),i=e("./util/toSubscriber"),o=e("./symbol/observable"),s=e("./util/pipe"),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?n.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;i=r.subscribe(function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();r.Observable=a},{"./symbol/observable":718,"./util/pipe":736,"./util/root":737,"./util/toSubscriber":739}],635:[function(e,t,r){"use strict";r.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},{}],636:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(e("./Subscriber").Subscriber);r.OuterSubscriber=i},{"./Subscriber":641}],637:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subject"),o=e("./scheduler/queue"),s=e("./Subscription"),a=e("./operators/observeOn"),u=e("./util/ObjectUnsubscribedError"),c=e("./SubjectSubscription"),f=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=n,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return n(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new l(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=s.Subscription.EMPTY:this.isStopped?t=s.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),n&&e.add(e=new a.ObserveOnSubscriber(e,n));for(var i=r.length,o=0;o<i&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(i.Subject);r.ReplaySubject=f;var l=function(){return function(e,t){this.time=e,this.value=t}}()},{"./Subject":639,"./SubjectSubscription":640,"./Subscription":642,"./operators/observeOn":703,"./scheduler/queue":716,"./util/ObjectUnsubscribedError":721}],638:[function(e,t,r){"use strict";var n=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();r.Scheduler=n},{}],639:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Observable"),o=e("./Subscriber"),s=e("./Subscription"),a=e("./util/ObjectUnsubscribedError"),u=e("./SubjectSubscription"),c=e("./symbol/rxSubscriber"),f=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(o.Subscriber);r.SubjectSubscriber=f;var l=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[c.rxSubscriber]=function(){return new f(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);r.Subject=l;var d=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(l);r.AnonymousSubject=d},{"./Observable":634,"./SubjectSubscription":640,"./Subscriber":641,"./Subscription":642,"./symbol/rxSubscriber":719,"./util/ObjectUnsubscribedError":721}],640:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(e("./Subscription").Subscription);r.SubjectSubscription=i},{"./Subscription":642}],641:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./util/isFunction"),o=e("./Subscription"),s=e("./Observer"),a=e("./symbol/rxSubscriber"),u=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,r,n,i)}}return n(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(o.Subscription);r.Subscriber=u;var c=function(e){function t(t,r,n,o){e.call(this),this._parentSubscriber=t;var a,u=this;i.isFunction(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==s.empty&&(u=Object.create(r),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=a,this._error=n,this._complete=o}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},{"./Observer":635,"./Subscription":642,"./symbol/rxSubscriber":719,"./util/isFunction":730}],642:[function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=e("./util/isArray"),o=e("./util/isObject"),s=e("./util/isFunction"),a=e("./util/tryCatch"),u=e("./util/errorObject"),c=e("./util/UnsubscriptionError"),f=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,f=this._parents,l=this._unsubscribe,d=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,p=f?f.length:0;r;)r.remove(this),r=++h<p&&f[h]||null;if(s.isFunction(l)){(y=a.tryCatch(l).call(this))===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?n(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(d))for(h=-1,p=d.length;++h<p;){var b=d[h];if(o.isObject(b)){var y=a.tryCatch(b.unsubscribe).call(b);if(y===u.errorObject){t=!0,e=e||[];var v=u.errorObject.e;v instanceof c.UnsubscriptionError?e=e.concat(n(v.errors)):e.push(v)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();r.Subscription=f},{"./util/UnsubscriptionError":724,"./util/errorObject":725,"./util/isArray":727,"./util/isFunction":730,"./util/isObject":732,"./util/tryCatch":740}],643:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/defer");n.Observable.defer=i.defer},{"../../Observable":634,"../../observable/defer":673}],644:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/from");n.Observable.from=i.from},{"../../Observable":634,"../../observable/from":674}],645:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/fromEvent");n.Observable.fromEvent=i.fromEvent},{"../../Observable":634,"../../observable/fromEvent":675}],646:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/interval");n.Observable.interval=i.interval},{"../../Observable":634,"../../observable/interval":676}],647:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../observable/merge");n.Observable.merge=i.merge},{"../../Observable":634,"../../observable/merge":677}],648:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/delay");n.Observable.prototype.delay=i.delay},{"../../Observable":634,"../../operator/delay":679}],649:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/distinct");n.Observable.prototype.distinct=i.distinct},{"../../Observable":634,"../../operator/distinct":680}],650:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/distinctUntilChanged");n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},{"../../Observable":634,"../../operator/distinctUntilChanged":681}],651:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/do");n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},{"../../Observable":634,"../../operator/do":682}],652:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/filter");n.Observable.prototype.filter=i.filter},{"../../Observable":634,"../../operator/filter":683}],653:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/first");n.Observable.prototype.first=i.first},{"../../Observable":634,"../../operator/first":684}],654:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/map");n.Observable.prototype.map=i.map},{"../../Observable":634,"../../operator/map":685}],655:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/mergeMap");n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},{"../../Observable":634,"../../operator/mergeMap":687}],656:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/publish");n.Observable.prototype.publish=i.publish},{"../../Observable":634,"../../operator/publish":688}],657:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/publishReplay");n.Observable.prototype.publishReplay=i.publishReplay},{"../../Observable":634,"../../operator/publishReplay":689}],658:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/startWith");n.Observable.prototype.startWith=i.startWith},{"../../Observable":634,"../../operator/startWith":690}],659:[function(e,t,r){"use strict";var n=e("../../Observable"),i=e("../../operator/timeout");n.Observable.prototype.timeout=i.timeout},{"../../Observable":634,"../../operator/timeout":691}],660:[function(e,t,r){},{}],661:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=e("./ScalarObservable"),s=e("./EmptyObservable"),a=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){var n=e.length;return 0===n?new s.EmptyObservable:1===n?new o.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;i.closed||(r>=n?i.complete():(i.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:e});for(var o=0;o<i&&!e.closed;o++)e.next(r[o]);e.complete()},t}(i.Observable);r.ArrayLikeObservable=a},{"../Observable":634,"./EmptyObservable":665,"./ScalarObservable":671}],662:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=e("./ScalarObservable"),s=e("./EmptyObservable"),a=e("../util/isScheduler"),u=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];a.isScheduler(n)?e.pop():n=null;var i=e.length;return i>1?new t(e,n):1===i?new o.ScalarObservable(e[0],n):new s.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t[r]),i.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:r,index:0,count:n,subscriber:e});for(var o=0;o<n&&!e.closed;o++)e.next(r[o]);e.complete()},t}(i.Observable);r.ArrayObservable=u},{"../Observable":634,"../util/isScheduler":734,"./EmptyObservable":665,"./ScalarObservable":671}],663:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subject"),o=e("../Observable"),s=e("../Subscriber"),a=e("../Subscription"),u=e("../operators/refCount"),c=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new a.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=a.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return u.refCount()(this)},t}(o.Observable);r.ConnectableObservable=c;var f=c.prototype;r.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:f._subscribe},_isComplete:{value:f._isComplete,writable:!0},getSubject:{value:f.getSubject},connect:{value:f.connect},refCount:{value:f.refCount}};var l=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),d=(function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new d(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i}}(),function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(s.Subscriber))},{"../Observable":634,"../Subject":639,"../Subscriber":641,"../Subscription":642,"../operators/refCount":706}],664:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=e("../util/subscribeToResult"),s=e("../OuterSubscriber"),a=function(e){function t(t){e.call(this),this.observableFactory=t}return n(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new u(e,this.observableFactory)},t}(i.Observable);r.DeferObservable=a;var u=function(e){function t(t,r){e.call(this,t),this.factory=r,this.tryDefer()}return n(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(o.subscribeToResult(this,e))},t}(s.OuterSubscriber)},{"../Observable":634,"../OuterSubscriber":636,"../util/subscribeToResult":738}],665:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.scheduler=t}return n(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(e("../Observable").Observable);r.EmptyObservable=i},{"../Observable":634}],666:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Observable"),o=e("../util/tryCatch"),s=e("../util/isFunction"),a=e("../util/errorObject"),u=e("../Subscription"),c=Object.prototype.toString,f=function(e){function t(t,r,n,i){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return n(t,e),t.create=function(e,r,n,i){return s.isFunction(n)&&(i=n,n=void 0),new t(e,r,i,n)},t.setupSubscription=function(e,r,n,i,o){var s;if(function(e){return!!e&&"[object NodeList]"===c.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===c.call(e)}(e))for(var a=0,f=e.length;a<f;a++)t.setupSubscription(e[a],r,n,i,o);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var l=e;e.addEventListener(r,n,o),s=function(){return l.removeEventListener(r,n)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var d=e;e.on(r,n),s=function(){return d.off(r,n)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var h=e;e.addListener(r,n),s=function(){return h.removeListener(r,n)}}i.add(new u.Subscription(s))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,i=this.options,s=this.selector;t.setupSubscription(r,n,s?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=o.tryCatch(s).apply(void 0,t);n===a.errorObject?e.error(a.errorObject.e):e.next(n)}:function(t){return e.next(t)},e,i)},t}(i.Observable);r.FromEventObservable=f},{"../Observable":634,"../Subscription":642,"../util/errorObject":725,"../util/isFunction":730,"../util/tryCatch":740}],667:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../util/isArray"),o=e("../util/isArrayLike"),s=e("../util/isPromise"),a=e("./PromiseObservable"),u=e("./IteratorObservable"),c=e("./ArrayObservable"),f=e("./ArrayLikeObservable"),l=e("../symbol/iterator"),d=e("../Observable"),h=e("../operators/observeOn"),p=e("../symbol/observable"),b=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return n(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[p.observable])return e instanceof d.Observable&&!r?e:new t(e,r);if(i.isArray(e))return new c.ArrayObservable(e,r);if(s.isPromise(e))return new a.PromiseObservable(e,r);if("function"==typeof e[l.iterator]||"string"==typeof e)return new u.IteratorObservable(e,r);if(o.isArrayLike(e))return new f.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[p.observable]().subscribe(e):t[p.observable]().subscribe(new h.ObserveOnSubscriber(e,r,0))},t}(d.Observable);r.FromObservable=b},{"../Observable":634,"../operators/observeOn":703,"../symbol/iterator":717,"../symbol/observable":718,"../util/isArray":727,"../util/isArrayLike":728,"../util/isPromise":733,"./ArrayLikeObservable":661,"./ArrayObservable":662,"./IteratorObservable":669,"./PromiseObservable":670}],668:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../util/isNumeric"),o=e("../Observable"),s=e("../scheduler/async"),a=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=s.async),e.call(this),this.period=t,this.scheduler=r,(!i.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=s.async)}return n(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=s.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=this.period,n=this.scheduler;e.add(n.schedule(t.dispatch,r,{index:0,subscriber:e,period:r}))},t}(o.Observable);r.IntervalObservable=a},{"../Observable":634,"../scheduler/async":715,"../util/isNumeric":731}],669:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../util/root"),o=e("../Observable"),s=e("../symbol/iterator"),a=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[s.iterator];if(!t&&"string"==typeof e)return new u(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[s.iterator]()}(t)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)i.error(e.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var i=r.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(o.Observable);r.IteratorObservable=a;var u=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=function(e){var t=+e.length;return isNaN(t)?0:0!==t&&function(e){return"number"==typeof e&&i.root.isFinite(e)}(t)?(t=function(e){var r=+t;return 0===r?r:isNaN(r)?r:r<0?-1:1}()*Math.floor(Math.abs(t)))<=0?0:t>f?f:t:t}(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),f=Math.pow(2,53)-1},{"../Observable":634,"../symbol/iterator":717,"../util/root":737}],670:[function(e,t,r){"use strict";function n(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("../util/root"),s=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return i(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,i=this.scheduler;if(null==i)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){o.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return i.schedule(n,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(i.schedule(n,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(i.schedule(function(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)},0,{err:t,subscriber:e}))}).then(null,function(e){o.root.setTimeout(function(){throw e})})},t}(e("../Observable").Observable);r.PromiseObservable=s},{"../Observable":634,"../util/root":737}],671:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(e("../Observable").Observable);r.ScalarObservable=i},{"../Observable":634}],672:[function(e,t,r){"use strict";var n=e("../util/isScheduler"),i=e("./of"),o=e("./from"),s=e("../operators/concatAll");r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&n.isScheduler(e[1])?o.from(e[0]):s.concatAll()(i.of.apply(void 0,e))}},{"../operators/concatAll":692,"../util/isScheduler":734,"./from":674,"./of":678}],673:[function(e,t,r){"use strict";var n=e("./DeferObservable");r.defer=n.DeferObservable.create},{"./DeferObservable":664}],674:[function(e,t,r){"use strict";var n=e("./FromObservable");r.from=n.FromObservable.create},{"./FromObservable":667}],675:[function(e,t,r){"use strict";var n=e("./FromEventObservable");r.fromEvent=n.FromEventObservable.create},{"./FromEventObservable":666}],676:[function(e,t,r){"use strict";var n=e("./IntervalObservable");r.interval=n.IntervalObservable.create},{"./IntervalObservable":668}],677:[function(e,t,r){"use strict";var n=e("../operator/merge");r.merge=n.mergeStatic},{"../operator/merge":686}],678:[function(e,t,r){"use strict";var n=e("./ArrayObservable");r.of=n.ArrayObservable.of},{"./ArrayObservable":662}],679:[function(e,t,r){"use strict";var n=e("../scheduler/async"),i=e("../operators/delay");r.delay=function(e,t){return void 0===t&&(t=n.async),i.delay(e,t)(this)}},{"../operators/delay":693,"../scheduler/async":715}],680:[function(e,t,r){"use strict";var n=e("../operators/distinct");r.distinct=function(e,t){return n.distinct(e,t)(this)}},{"../operators/distinct":694}],681:[function(e,t,r){"use strict";var n=e("../operators/distinctUntilChanged");r.distinctUntilChanged=function(e,t){return n.distinctUntilChanged(e,t)(this)}},{"../operators/distinctUntilChanged":695}],682:[function(e,t,r){"use strict";var n=e("../operators/tap");r._do=function(e,t,r){return n.tap(e,t,r)(this)}},{"../operators/tap":708}],683:[function(e,t,r){"use strict";var n=e("../operators/filter");r.filter=function(e,t){return n.filter(e,t)(this)}},{"../operators/filter":696}],684:[function(e,t,r){"use strict";var n=e("../operators/first");r.first=function(e,t,r){return n.first(e,t,r)(this)}},{"../operators/first":697}],685:[function(e,t,r){"use strict";var n=e("../operators/map");r.map=function(e,t){return n.map(e,t)(this)}},{"../operators/map":698}],686:[function(e,t,r){"use strict";var n=e("../operators/merge"),i=e("../operators/merge");r.mergeStatic=i.mergeStatic,r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.merge.apply(void 0,e)(this)}},{"../operators/merge":699}],687:[function(e,t,r){"use strict";var n=e("../operators/mergeMap");r.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMap(e,t,r)(this)}},{"../operators/mergeMap":701}],688:[function(e,t,r){"use strict";var n=e("../operators/publish");r.publish=function(e){return n.publish(e)(this)}},{"../operators/publish":704}],689:[function(e,t,r){"use strict";var n=e("../operators/publishReplay");r.publishReplay=function(e,t,r,i){return n.publishReplay(e,t,r,i)(this)}},{"../operators/publishReplay":705}],690:[function(e,t,r){"use strict";var n=e("../operators/startWith");r.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.startWith.apply(void 0,e)(this)}},{"../operators/startWith":707}],691:[function(e,t,r){"use strict";var n=e("../scheduler/async"),i=e("../operators/timeout");r.timeout=function(e,t){return void 0===t&&(t=n.async),i.timeout(e,t)(this)}},{"../operators/timeout":709,"../scheduler/async":715}],692:[function(e,t,r){"use strict";var n=e("./mergeAll");r.concatAll=function(){return n.mergeAll(1)}},{"./mergeAll":700}],693:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../scheduler/async"),o=e("../util/isDate"),s=e("../Subscriber"),a=e("../Notification");r.delay=function(e,t){void 0===t&&(t=i.async);var r=o.isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(r,t))}};var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.delay,this.scheduler))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return n(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new f(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(a.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete())},t}(s.Subscriber),f=function(){return function(e,t){this.time=e,this.notification=t}}()},{"../Notification":633,"../Subscriber":641,"../scheduler/async":715,"../util/isDate":729}],694:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../OuterSubscriber"),o=e("../util/subscribeToResult"),s=e("../util/Set");r.distinct=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.keySelector,this.flushes))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.keySelector=r,this.values=new s.Set,n&&this.add(o.subscribeToResult(this,n))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(i.OuterSubscriber);r.DistinctSubscriber=u},{"../OuterSubscriber":636,"../util/Set":722,"../util/subscribeToResult":738}],695:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber"),o=e("../util/tryCatch"),s=e("../util/errorObject");r.distinctUntilChanged=function(e,t){return function(r){return r.lift(new a(e,t))}};var a=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return n(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=o.tryCatch(this.keySelector)(e))===s.errorObject)return this.destination.error(s.errorObject.e);var r=!1;if(this.hasKey){if((r=o.tryCatch(this.compare)(this.key,t))===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},t}(i.Subscriber)},{"../Subscriber":641,"../util/errorObject":725,"../util/tryCatch":740}],696:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber");r.filter=function(e,t){return function(r){return r.lift(new o(e,t))}};var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0}return n(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.Subscriber)},{"../Subscriber":641}],697:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber"),o=e("../util/EmptyError");r.first=function(e,t,r){return function(n){return n.lift(new s(e,t,r,n))}};var s=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),a=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new o.EmptyError):(e.next(this.defaultValue),e.complete())},t}(i.Subscriber)},{"../Subscriber":641,"../util/EmptyError":720}],698:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber");r.map=function(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new o(e,t))}};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();r.MapOperator=o;var s=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return n(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.Subscriber)},{"../Subscriber":641}],699:[function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,u=e[e.length-1];return a.isScheduler(u)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof u&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof i.Observable?e[0]:s.mergeAll(r)(new o.ArrayObservable(e,n))}var i=e("../Observable"),o=e("../observable/ArrayObservable"),s=e("./mergeAll"),a=e("../util/isScheduler");r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(n.apply(void 0,[t].concat(e)))}},r.mergeStatic=n},{"../Observable":634,"../observable/ArrayObservable":662,"../util/isScheduler":734,"./mergeAll":700}],700:[function(e,t,r){"use strict";var n=e("./mergeMap"),i=e("../util/identity");r.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),n.mergeMap(i.identity,null,e)}},{"../util/identity":726,"./mergeMap":701}],701:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../util/subscribeToResult"),o=e("../OuterSubscriber");r.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return"number"==typeof t&&(r=t,t=null),n.lift(new s(e,t,r))}};var s=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector,this.concurrent))},e}();r.MergeMapOperator=s;var a=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(i.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);r.MergeMapSubscriber=a},{"../OuterSubscriber":636,"../util/subscribeToResult":738}],702:[function(e,t,r){"use strict";var n=e("../observable/ConnectableObservable");r.multicast=function(e,t){return function(r){var o;if(o="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new i(o,t));var s=Object.create(r,n.connectableObservableDescriptor);return s.source=r,s.subjectFactory=o,s}};var i=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();r.MulticastOperator=i},{"../observable/ConnectableObservable":663}],703:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber"),o=e("../Notification");r.observeOn=function(e,t){return void 0===t&&(t=0),function(r){return r.lift(new s(e,t))}};var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))},e}();r.ObserveOnOperator=s;var a=function(e){function t(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return n(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},t}(i.Subscriber);r.ObserveOnSubscriber=a;var u=function(){return function(e,t){this.notification=e,this.destination=t}}();r.ObserveOnMessage=u},{"../Notification":633,"../Subscriber":641}],704:[function(e,t,r){"use strict";var n=e("../Subject"),i=e("./multicast");r.publish=function(e){return e?i.multicast(function(){return new n.Subject},e):i.multicast(new n.Subject)}},{"../Subject":639,"./multicast":702}],705:[function(e,t,r){"use strict";var n=e("../ReplaySubject"),i=e("./multicast");r.publishReplay=function(e,t,r,o){r&&"function"!=typeof r&&(o=r);var s="function"==typeof r?r:void 0,a=new n.ReplaySubject(e,t,o);return function(e){return i.multicast(function(){return a},s)(e)}}},{"../ReplaySubject":637,"./multicast":702}],706:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber");r.refCount=function(){return function(e){return e.lift(new o(e))}};var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new s(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),s=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(i.Subscriber)},{"../Subscriber":641}],707:[function(e,t,r){"use strict";var n=e("../observable/ArrayObservable"),i=e("../observable/ScalarObservable"),o=e("../observable/EmptyObservable"),s=e("../observable/concat"),a=e("../util/isScheduler");r.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var r=e[e.length-1];a.isScheduler(r)?e.pop():r=null;var u=e.length;return 1===u?s.concat(new i.ScalarObservable(e[0],r),t):u>1?s.concat(new n.ArrayObservable(e,r),t):s.concat(new o.EmptyObservable(r),t)}}},{"../observable/ArrayObservable":662,"../observable/EmptyObservable":665,"../observable/ScalarObservable":671,"../observable/concat":672,"../util/isScheduler":734}],708:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../Subscriber");r.tap=function(e,t,r){return function(n){return n.lift(new o(e,t,r))}};var o=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,r,n,o){e.call(this,t);var s=new i.Subscriber(r,n,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)},{"../Subscriber":641}],709:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../scheduler/async"),o=e("../util/isDate"),s=e("../Subscriber"),a=e("../util/TimeoutError");r.timeout=function(e,t){void 0===t&&(t=i.async);var r=o.isDate(e),n=r?+e-t.now():Math.abs(e);return function(e){return e.lift(new u(n,r,t,new a.TimeoutError))}};var u=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=r,this.errorInstance=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),c=function(e){function t(t,r,n,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.scheduler=i,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return n(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(s.Subscriber)},{"../Subscriber":641,"../scheduler/async":715,"../util/TimeoutError":723,"../util/isDate":729}],710:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,r){e.call(this)}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(e("../Subscription").Subscription);r.Action=i},{"../Subscription":642}],711:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../util/root"),o=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){return void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(e("./Action").Action);r.AsyncAction=o},{"../util/root":737,"./Action":710}],712:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(e("../Scheduler").Scheduler);r.AsyncScheduler=i},{"../Scheduler":638}],713:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(e("./AsyncAction").AsyncAction);r.QueueAction=i},{"./AsyncAction":711}],714:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(e("./AsyncScheduler").AsyncScheduler);r.QueueScheduler=i},{"./AsyncScheduler":712}],715:[function(e,t,r){"use strict";var n=e("./AsyncAction"),i=e("./AsyncScheduler");r.async=new i.AsyncScheduler(n.AsyncAction)},{"./AsyncAction":711,"./AsyncScheduler":712}],716:[function(e,t,r){"use strict";var n=e("./QueueAction"),i=e("./QueueScheduler");r.queue=new i.QueueScheduler(n.QueueAction)},{"./QueueAction":713,"./QueueScheduler":714}],717:[function(e,t,r){"use strict";function n(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}var i=e("../util/root");r.symbolIteratorPonyfill=n,r.iterator=n(i.root),r.$$iterator=r.iterator},{"../util/root":737}],718:[function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var i=e("../util/root");r.getSymbolObservable=n,r.observable=n(i.root),r.$$observable=r.observable},{"../util/root":737}],719:[function(e,t,r){"use strict";var n=e("../util/root").root.Symbol;r.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",r.$$rxSubscriber=r.rxSubscriber},{"../util/root":737}],720:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.EmptyError=i},{}],721:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.ObjectUnsubscribedError=i},{}],722:[function(e,t,r){"use strict";function n(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}var i=e("./root");r.minimalSetImpl=n,r.Set=i.root.Set||n()},{"./root":737}],723:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.TimeoutError=i},{}],724:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(t,e),t}(Error);r.UnsubscriptionError=i},{}],725:[function(e,t,r){"use strict";r.errorObject={e:{}}},{}],726:[function(e,t,r){"use strict";r.identity=function(e){return e}},{}],727:[function(e,t,r){"use strict";r.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],728:[function(e,t,r){"use strict";r.isArrayLike=function(e){return e&&"number"==typeof e.length}},{}],729:[function(e,t,r){"use strict";r.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},{}],730:[function(e,t,r){"use strict";r.isFunction=function(e){return"function"==typeof e}},{}],731:[function(e,t,r){"use strict";var n=e("../util/isArray");r.isNumeric=function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0}},{"../util/isArray":727}],732:[function(e,t,r){"use strict";r.isObject=function(e){return null!=e&&"object"==typeof e}},{}],733:[function(e,t,r){"use strict";r.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},{}],734:[function(e,t,r){"use strict";r.isScheduler=function(e){return e&&"function"==typeof e.schedule}},{}],735:[function(e,t,r){"use strict";r.noop=function(){}},{}],736:[function(e,t,r){"use strict";function n(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:i.noop}var i=e("./noop");r.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n(e)},r.pipeFromArray=n},{"./noop":735}],737:[function(e,t,r){(function(e){"use strict";var t="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=t||void 0!==e&&e||n;r.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],738:[function(e,t,r){"use strict";var n=e("./root"),i=e("./isArrayLike"),o=e("./isPromise"),s=e("./isObject"),a=e("../Observable"),u=e("../symbol/iterator"),c=e("../InnerSubscriber"),f=e("../symbol/observable");r.subscribeToResult=function(e,t,r,l){var d=new c.InnerSubscriber(e,r,l);if(d.closed)return null;if(t instanceof a.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):(d.syncErrorThrowable=!0,t.subscribe(d));if(i.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(o.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){n.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[u.iterator])for(var b=t[u.iterator]();;){var y=b.next();if(y.done){d.complete();break}if(d.next(y.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var v=t[f.observable]();if("function"==typeof v.subscribe)return v.subscribe(new c.InnerSubscriber(e,r,l));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var _="You provided "+(s.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(_))}}return null}},{"../InnerSubscriber":632,"../Observable":634,"../symbol/iterator":717,"../symbol/observable":718,"./isArrayLike":728,"./isObject":732,"./isPromise":733,"./root":737}],739:[function(e,t,r){"use strict";var n=e("../Subscriber"),i=e("../symbol/rxSubscriber"),o=e("../Observer");r.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(o.empty)}},{"../Observer":635,"../Subscriber":641,"../symbol/rxSubscriber":719}],740:[function(e,t,r){"use strict";var n,i=e("./errorObject");r.tryCatch=function(e){return n=e,function(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}}},{"./errorObject":725}],741:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return s(e,t,r)}var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(n(o,r),r.Buffer=i),n(s,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:61}],742:[function(e,t,r){"use strict";t.exports=e("to-string-symbols-supported-x")},{"to-string-symbols-supported-x":762}],743:[function(e,t,r){!function(e){if("object"==typeof r)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;try{n=window}catch(e){n=self}n.SparkMD5=e()}}(function(e){"use strict";function t(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function i(e){var n,i,o,s,a,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=c;n+=64)t(f,r(e.substring(n-64,n)));for(i=(e=e.substring(n-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(f,o),n=0;n<16;n+=1)o[n]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,t(f,o),f}function o(e){var t;for(t=0;t<e.length;t+=1)e[t]=function(e){var t,r="";for(t=0;t<4;t+=1)r+=c[e>>8*t+4&15]+c[e>>8*t&15];return r}(e[t]);return e.join("")}function s(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function a(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function u(){this.reset()}var c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==o(i("hello"))&&function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var i,o,s,a,u=this.byteLength,c=t(r,u),f=u;return n!==e&&(f=t(n,u)),c>f?new ArrayBuffer(0):(i=f-c,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,c,i),s.set(a),o)}}(),u.prototype.append=function(e){return this.appendBinary(s(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var n,i=this._buff.length;for(n=64;n<=i;n+=64)t(this._hash,r(this._buff.substring(n-64,n)));return this._buff=this._buff.substring(n-64),this},u.prototype.end=function(e){var t,r,n=this._buff,i=n.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(s,i),r=o(this._hash),e&&(r=a(r)),this.reset(),r},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,r){var n,i,o,s=r;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=i,e[15]=o,t(this._hash,e)},u.hash=function(e,t){return u.hashBinary(s(e),t)},u.hashBinary=function(e,t){var r=o(i(e));return t?a(r):r},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var r,i=function(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}(this._buff.buffer,e,!0),o=i.length;for(this._length+=e.byteLength,r=64;r<=o;r+=64)t(this._hash,n(i.subarray(r-64,r)));return this._buff=r-64<o?new Uint8Array(i.buffer.slice(r-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=n[t]<<(t%4<<3);return this._finish(s,i),r=o(this._hash),e&&(r=a(r)),this.reset(),r},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e=u.prototype.getState.call(this);return e.buff=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(e.buff),e},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),o=new Uint8Array(i);for(r=0;r<n;r+=1)o[r]=e.charCodeAt(r);return t?o:i}(e.buff,!0),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,r){var i=o(function(e){var r,i,o,s,a,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=c;r+=64)t(f,n(e.subarray(r-64,r)));for(i=(e=r-64<c?e.subarray(r-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)o[r>>2]|=e[r]<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(t(f,o),r=0;r<16;r+=1)o[r]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,t(f,o),f}(new Uint8Array(e)));return r?a(i):i},u})},{}],744:[function(e,t,r){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter;e("inherits")(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){f||(f=!0,e.end())}function s(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(c.on("end",o),c.on("close",s));var f=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:510,inherits:520,"readable-stream/duplex.js":613,"readable-stream/passthrough.js":622,"readable-stream/readable.js":623,"readable-stream/transform.js":624,"readable-stream/writable.js":625}],745:[function(e,t,r){"use strict";function n(e){this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e);var t;switch(this.encoding){case"utf16le":this.text=function(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)},this.end=function(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t},t=4;break;case"utf8":this.fillLast=function(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}(this,e,t);if(void 0!==r)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length},t=4;break;case"base64":this.text=function(e,t){var r=(e.length-t)%3;if(0===r)return e.toString("base64",t);this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]);return e.toString("base64",t,e.length-r)},this.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t},t=3;break;default:return this.write=function(e){return e.toString(this.encoding)},void(this.end=function(e){return e&&e.length?this.write(e):""})}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}var o=e("safe-buffer").Buffer,s=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},n.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=i(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r?0:(o=i(t[n]))>=0?(o>0&&(e.lastNeed=o-2),o):--n<r?0:(o=i(t[n]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":741}],746:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(){Error.call(this)}function o(e,t){if(!(this instanceof o))return new o(e,t);p.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._waiting=!1,this._options=e,this._makeData=t}var s=n(e("ltgt")),a=n(e("events")),u=n(e("inherits")),c=n(e("level-codec")),f=n(e("readable-stream"));u(i,Error),i.prototype.name="NotFoundError";var l=a.EventEmitter,d=new i,h=function(e,t,r,n){function i(e){var t,r={};if(n)for(t in n)void 0!==n[t]&&(r[t]=n[t]);if(e)for(t in e)void 0!==e[t]&&(r[t]=e[t]);return r}var o=new l;return o.sublevels={},o.options=n,o.version="6.5.4",o.methods={},t=t||[],o.put=function(r,n,s,a){"function"==typeof s&&(a=s,s={}),e.apply([{key:r,value:n,prefix:t.slice(),type:"put"}],i(s),function(e){if(e)return a(e);o.emit("put",r,n),a(null)})},o.prefix=function(){return t.slice()},o.batch=function(r,n,s){"function"==typeof n&&(s=n,n={}),r=r.map(function(e){return{key:e.key,value:e.value,prefix:e.prefix||t,keyEncoding:e.keyEncoding,valueEncoding:e.valueEncoding,type:e.type}}),e.apply(r,i(n),function(e){if(e)return s(e);o.emit("batch",r),s(null)})},o.get=function(r,n,o){"function"==typeof n&&(o=n,n={}),e.get(r,t,i(n),function(e,t){e?o(d):o(null,t)})},o.sublevel=function(n,s){return o.sublevels[n]=o.sublevels[n]||h(e,t.concat(n),r,i(s))},o.readStream=o.createReadStream=function(n){(n=i(n)).prefix=t;var o,s=e.iterator(n);return(o=r(n,e.createDecoder(n))).setIterator(s),o},o.close=function(t){e.close(t)},o.isOpen=e.isOpen,o.isClosed=e.isClosed,o},p=f.Readable;u(o,p),o.prototype.setIterator=function(e){return this._iterator=e,this._destroyed?e.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this},o.prototype._read=function(){var e=this;if(!e._destroyed)return e._iterator?void e._iterator.next(function(t,r,n){if(t||void 0===r&&void 0===n)return t||e._destroyed||e.push(null),e._cleanup(t);n=e._makeData(r,n),e._destroyed||e.push(n)}):this._waiting=!0},o.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;e&&t.emit("error",e),t._iterator?t._iterator.end(function(){t._iterator=null,t.emit("close")}):t.emit("close")}},o.prototype.destroy=function(){this._cleanup()};var b={encode:function(e){return"ÿ"+e[0]+"ÿ"+e[1]},decode:function(e){var t=e.toString(),r=t.indexOf("ÿ",1);return[t.substring(1,r),t.substring(r+1)]},lowerBound:"\0",upperBound:"ÿ"},y=new c;t.exports=function(e){return h(function(e,t,r){function n(e,n,i,o){return t.encode([e,r.encodeKey(n,i,o)])}return e.open(function(){}),{apply:function(t,i,o){i=i||{};for(var s=[],a=-1,u=t.length;++a<u;){var c=t[a];!function(e,t){t&&t.options&&(e.keyEncoding=e.keyEncoding||t.options.keyEncoding,e.valueEncoding=e.valueEncoding||t.options.valueEncoding)}(c,c.prefix),c.prefix=function(e){return"function"==typeof e.prefix?e.prefix():e}(c.prefix),s.push({key:n(c.prefix,c.key,i,c),value:"del"!==c.type&&r.encodeValue(c.value,i,c),type:c.type})}e.db.batch(s,i,o)},get:function(t,i,o,s){return o.asBuffer=r.valueAsBuffer(o),e.db.get(n(i,t,o),o,function(e,t){e?s(e):s(null,r.decodeValue(t,o))})},createDecoder:function(e){return function(n,i){return{key:r.decodeKey(t.decode(n)[1],e),value:r.decodeValue(i,e)}}},isClosed:function(){return e.isClosed()},close:function(t){return e.close(t)},iterator:function(i){var o=function(e){var t={};for(var r in e)t[r]=e[r];return t}(i||{}),a=i.prefix||[];return s.toLtgt(i,o,function(e){return n(a,e,o,{})},t.lowerBound,t.upperBound),o.prefix=null,o.keyAsBuffer=o.valueAsBuffer=!1,"number"!=typeof o.limit&&(o.limit=-1),o.keyAsBuffer=t.buffer,o.valueAsBuffer=r.valueAsBuffer(o),function(e){return{next:function(t){return e.next(t)},end:function(t){e.end(t)}}}(e.db.iterator(o))}}}(e,b,y),[],o,e.options)}},{events:510,inherits:520,"level-codec":539,ltgt:558,"readable-stream":753}],747:[function(e,t,r){arguments[4][543][0].apply(r,arguments)},{dup:543}],748:[function(e,t,r){arguments[4][544][0].apply(r,arguments)},{"./_stream_readable":750,"./_stream_writable":752,_process:609,"core-util-is":481,dup:544,inherits:520}],749:[function(e,t,r){arguments[4][545][0].apply(r,arguments)},{"./_stream_transform":751,"core-util-is":481,dup:545,inherits:520}],750:[function(e,t,r){(function(r){function n(t,r){var n=(t=t||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function i(e){if(!(this instanceof i))return new i(e);this._readableState=new n(e,this),this.readable=!0,_.call(this)}function o(e,t,n,i,o){var s=function(e,t){var r=null;y.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,n);if(s)e.emit("error",s);else if(null===n||void 0===n)t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?a(e):h(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&o){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||o||i||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&a(e),function(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){!function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}(e,t)}))}(e,t);else o||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function s(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=w)e=w;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function a(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){u(e)}):u(e))}function u(e){e.emit("readable")}function c(e){function t(e,t,i){!1===e.write(r)&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes):p(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;if(0===n.pipesCount)return n.flowing=!1,void(v.listenerCount(e,"data")>0&&l(e));n.ranOut=!0}function f(){this._readableState.ranOut&&(this._readableState.ranOut=!1,c(this))}function l(e,t){if(e._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=t||!1,i=!1;e.readable=!0,e.pipe=_.prototype.pipe,e.on=e.addListener=_.prototype.on,e.on("readable",function(){i=!0;for(var t;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function d(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):y.concat(n,i),n.length=0;else if(e<n[0].length){r=(f=n[0]).slice(0,e),n[0]=f.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new y(e);for(var a=0,u=0,c=n.length;u<c&&a<e;u++){var f=n[0],l=Math.min(e-a,f.length);o?r+=f.slice(0,l):f.copy(r,a,0,l),l<f.length?n[0]=f.slice(l):n.shift(),a+=l}}return r}function h(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function p(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}t.exports=i;var b=e("isarray"),y=e("buffer").Buffer;i.ReadableState=n;var v=e("events").EventEmitter;v.listenerCount||(v.listenerCount=function(e,t){return e.listeners(t).length});var _=e("stream"),m=e("core-util-is");m.inherits=e("inherits");var g;m.inherits(i,_),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding)!==r.encoding&&(e=new y(e,t),t=""),o(this,r,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.setEncoding=function(t){g||(g=e("string_decoder/").StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t};var w=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return a(this),null;if(0===(e=s(e,t))&&t.ended)return r=null,t.length>0&&t.decoder&&(r=d(e,t),t.length-=r.length),0===t.length&&h(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=s(n,t)),null===(r=e>0?d(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&h(this),r},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===d&&o()}function i(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",y),e.removeListener("error",s),e.removeListener("unpipe",n),d.removeListener("end",i),d.removeListener("end",o),e._writableState&&!e._writableState.needDrain||y()}function s(t){l(),e.removeListener("error",s),0===v.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),l()}function u(){e.removeListener("close",a),l()}function l(){d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1;var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:o;h.endEmitted?r.nextTick(p):d.once("end",p),e.on("unpipe",n);var y=function(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&c(e)}}(d);return e.on("drain",y),e._events&&e._events.error?b(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",u),e.emit("pipe",d),h.flowing||(this.on("readable",f),h.flowing=!0,r.nextTick(function(){c(d)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",f),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",f),t.flowing=!1;for(i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i;return-1===(i=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=_.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||l(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&a(this):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){l(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){l(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&void 0===this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return p(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){r&&(r=!1,e.resume())},n},i._fromList=d}).call(this,e("_process"))},{_process:609,buffer:61,"core-util-is":481,events:510,inherits:520,isarray:747,stream:744,"string_decoder/":754}],751:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);o.call(this,e);this._transformState=new function(e,t){this.afterTransform=function(e,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){i(t,e)}):i(t)})}function i(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=n;var o=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(n,o),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,r){throw new Error("not implemented")},n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":748,"core-util-is":481,inherits:520}],752:[function(e,t,r){(function(r){function n(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,u=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i);e._writableState.errorEmitted=!0,e.emit("error",i)}(e,0,i,t,u);else{var c=a(e,n);c||n.bufferProcessing||!n.buffer.length||function(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,s=n.encoding,a=n.callback,u=t.objectMode?1:i.length;if(o(e,t,u,i,s,a),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}(e,n),i?r.nextTick(function(){s(e,n,c,u)}):s(e,n,c,u)}}(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(t){var r=e("./_stream_duplex");if(!(this instanceof i||this instanceof r))return new i(t);this._writableState=new n(t,this),this.writable=!0,l.call(this)}function o(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function s(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),n(),r&&u(e,t)}function a(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function u(e,t){var r=a(0,t);return r&&(t.finished=!0,e.emit("finish")),r}t.exports=i;var c=e("buffer").Buffer;i.WritableState=n;var f=e("core-util-is");f.inherits=e("inherits");var l=e("stream");f.inherits(i,l),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,n){var i=this._writableState,s=!1;return"function"==typeof t&&(n=t,t=null),c.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=function(){}),i.ended?function(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}(this,0,n):function(e,t,n,i){var o=!0;if(!c.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}(this,i,e,n)&&(s=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new c(t,r)),t}(t,r,n),c.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new function(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}(r,n,i)):o(e,t,s,r,n,i),a}(this,i,e,t,n)),s},i.prototype._write=function(e,t,r){r(new Error("not implemented"))},i.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),void 0!==e&&null!==e&&this.write(e,t),i.ending||i.finished||function(e,t,n){t.ending=!0,u(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}(this,i,n)}}).call(this,e("_process"))},{"./_stream_duplex":748,_process:609,buffer:61,"core-util-is":481,inherits:520,stream:744}],753:[function(e,t,r){var n=e("stream");(r=t.exports=e("./lib/_stream_readable.js")).Stream=n,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":748,"./lib/_stream_passthrough.js":749,"./lib/_stream_readable.js":750,"./lib/_stream_transform.js":751,"./lib/_stream_writable.js":752,stream:744}],754:[function(e,t,r){arguments[4][550][0].apply(r,arguments)},{buffer:61,dup:550}],755:[function(e,t,r){(function(r){function n(e){o.call(this,e),this._destroyed=!1}function i(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=function(e,t,r){r(null,e)}),"function"!=typeof n&&(n=null),e(t,r,n)}}var o=e("readable-stream/transform"),s=e("util").inherits,a=e("xtend");s(n,o),n.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=i(function(e,t,r){var i=new n(e);return i._transform=t,r&&(i._flush=r),i}),t.exports.ctor=i(function(e,t,r){function i(t){if(!(this instanceof i))return new i(t);this.options=a(e,t),n.call(this,this.options)}return s(i,n),i.prototype._transform=t,r&&(i.prototype._flush=r),i}),t.exports.obj=i(function(e,t,r){var i=new n(a({objectMode:!0,highWaterMark:16},e));return i._transform=t,r&&(i._flush=r),i})}).call(this,e("_process"))},{_process:609,"readable-stream/transform":624,util:774,xtend:783}],756:[function(e,t,r){"use strict";t.exports=function(e){return!!e}},{}],757:[function(e,t,r){"use strict";var n=e("to-number-x"),i=e("is-nan-x"),o=e("is-finite-x"),s=e("math-sign-x");t.exports=function(e){var t=n(e);return i(t)?0:0===t||!1===o(t)?t:s(t)*Math.floor(Math.abs(t))}},{"is-finite-x":525,"is-nan-x":530,"math-sign-x":560,"to-number-x":758}],758:[function(e,t,r){"use strict";var n=e("cached-constructors-x"),i=e("cached-constructors-x").Number,o=n.RegExp,s=e("to-primitive-x"),a=e("trim-x"),u=e("parse-int-x"),c="".slice,f=e("nan-x"),l=/^0b[01]+$/i,d=l.test,h=/^0o[0-7]+$/i,p=new o("[​￾]","g"),b=/^[-+]0x[0-9a-f]+$/i;t.exports=function e(t){var r=s(t,Number);if("symbol"==typeof r)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof r){if(function(e){return d.call(l,e)}(r))return e(u(c.call(r,2),2));if(function(e){return d.call(h,e)}(r))return e(u(c.call(r,2),8));if(function(e){return d.call(p,e)}(r)||function(e){return d.call(b,e)}(r))return f;var n=a(r);if(n!==r)return e(n)}return i(r)}},{"cached-constructors-x":62,"nan-x":564,"parse-int-x":568,"to-primitive-x":760,"trim-x":767}],759:[function(e,t,r){"use strict";var n=e("require-object-coercible-x"),i=e("cached-constructors-x").Object;t.exports=function(e){return i(n(e))}},{"cached-constructors-x":62,"require-object-coercible-x":630}],760:[function(e,t,r){"use strict";var n=e("has-symbol-support-x"),i=e("is-primitive"),o=e("is-date-object"),s=e("is-symbol"),a=e("is-function-x"),u=e("require-object-coercible-x"),c=e("is-nil-x"),f=e("validate.io-undefined"),l=n&&Symbol.toPrimitive,d=n&&Symbol.prototype.valueOf,h=["toString","valueOf"],p=["valueOf","toString"];t.exports=function(e,t){if(i(e))return e;var r="default";arguments.length>1&&(t===String?r="string":t===Number&&(r="number"));var b;if(n&&(l?b=function(e,t){var r=e[t];if(!1===c(r)){if(!1===a(r))throw new TypeError(r+" returned for property "+t+" of object "+e+" is not a function");return r}}(e,l):s(e)&&(b=d)),!1===f(b)){var y=b.call(e,r);if(i(y))return y;throw new TypeError("unable to convert exotic object to primitive")}return"default"===r&&(o(e)||s(e))&&(r="string"),function(e,t){if(u(e),"string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');for(var r,n,o="string"===t?h:p,s=0;s<2;s+=1)if(r=e[o[s]],a(r)&&(n=r.call(e),i(n)))return n;throw new TypeError("No default value")}(e,"default"===r?"number":r)}},{"has-symbol-support-x":515,"is-date-object":523,"is-function-x":526,"is-nil-x":531,"is-primitive":533,"is-symbol":536,"require-object-coercible-x":630,"validate.io-undefined":780}],761:[function(e,t,r){"use strict";var n=e("has-symbol-support-x"),i=e("to-primitive-x"),o=e("to-string-x");t.exports=function(e){var t=i(e,String);return n&&"symbol"==typeof t?t:o(t)}},{"has-symbol-support-x":515,"to-primitive-x":760,"to-string-x":764}],762:[function(e,t,r){"use strict";var n=e("cached-constructors-x").String,i=e("has-symbol-support-x")&&Symbol.prototype.toString,o="function"==typeof i&&e("is-symbol");t.exports=function(e){return o&&o(e)?i.call(e):n(e)}},{"cached-constructors-x":62,"has-symbol-support-x":515,"is-symbol":536}],763:[function(e,t,r){"use strict";var n=e("lodash.isnull"),i=e("validate.io-undefined"),o={}.toString;t.exports=function(e){return n(e)?"[object Null]":i(e)?"[object Undefined]":o.call(e)}},{"lodash.isnull":557,"validate.io-undefined":780}],764:[function(e,t,r){"use strict";var n="".constructor,i=e("is-symbol");t.exports=function(e){if(i(e))throw new TypeError("Cannot convert a Symbol value to a string");return n(e)}},{"is-symbol":536}],765:[function(e,t,r){"use strict";var n=e("require-coercible-to-string-x"),i=new(0,e("cached-constructors-x").RegExp)("^["+e("white-space-x").string+"]+"),o="".replace;t.exports=function(e){return o.call(n(e),i,"")}},{"cached-constructors-x":62,"require-coercible-to-string-x":629,"white-space-x":782}],766:[function(e,t,r){"use strict";var n=e("require-coercible-to-string-x"),i=new(0,e("cached-constructors-x").RegExp)("["+e("white-space-x").string+"]+$"),o="".replace;t.exports=function(e){return o.call(n(e),i,"")}},{"cached-constructors-x":62,"require-coercible-to-string-x":629,"white-space-x":782}],767:[function(e,t,r){"use strict";var n=e("trim-left-x"),i=e("trim-right-x");t.exports=function(e){return n(i(e))}},{"trim-left-x":765,"trim-right-x":766}],768:[function(e,t,r){t.exports=function(){var e={};return e.add=function(e){var t={};return"object"==typeof window&&window.addEventListener&&"function"==typeof window.addEventListener&&(window.addEventListener("beforeunload",e,!1),t.beforeunload=e),t},e.remove=function(e,t){Object.keys(t).forEach(function(e){var r=t[e];switch(e){case"beforeunload":window.removeEventListener("beforeunload",r,!1)}})},e}()},{}],769:[function(e,t,r){t.exports=function(e){var t={},r=!1,n=!1,i=0,o={};return t.debug=function(){n=!0},t.add=function(t){i++;var s=function(e,n,i){if(!r)return r=!0,t(e,n,i)},a={};Object.keys(e).forEach(function(t){a[t]=e[t].add(s)});var u=function(){Object.keys(a).forEach(function(t){e[t].remove(s,a[t])}),n&&console.log("unload.stopListening()"),n&&console.dir(o[i])};return u.run=function(){s()},o[i]={fn:t,remove:u,listeners:a},n&&console.log("unload.add()"),n&&console.dir(o[i]),u},t.runAll=function(){r||(r=!0,Object.keys(o).forEach(function(e){o[e].fn()}))},t.removeAll=function(){Object.keys(o).forEach(function(e){o[e].remove()})},t}({node:e("./nodeJS.js"),browser:e("./browser.js")})},{"./browser.js":768,"./nodeJS.js":770}],770:[function(e,t,r){(function(e){t.exports=function(){var t={};return t.add=function(t){var r={};return"object"==typeof e&&e.on&&"function"==typeof e.on&&(r.beforeExit=function(r){var n=t(r);Promise.resolve(n).then(function(){e.exit()})},e.on("beforeExit",r.beforeExit),r.exit=function(e){var r=t(e);Promise.resolve(r)},e.on("exit",r.exit),r.SIGINT=function(r){var n=t(r);Promise.resolve(n).then(function(){e.exit()})},e.on("SIGINT",r.SIGINT),r.uncaughtException=function(r){var n=t(r);Promise.resolve(n).then(function(){e.exit()})},e.on("uncaughtException",r.uncaughtException)),r},t.remove=function(t,r){Object.keys(r).forEach(function(t){var n=r[t];switch(t){case"beforeExit":case"SIGINT":case"uncaughtException":case"exit":e.removeListener(t,n)}})},t}()}).call(this,e("_process"))},{_process:609}],771:[function(e,t,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],772:[function(e,t,r){arguments[4][520][0].apply(r,arguments)},{dup:520}],773:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],774:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:function(e,t){return e}};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),c(t)?n.showHidden=t:t&&r._extend(n,t),h(n.showHidden)&&(n.showHidden=!1),h(n.depth)&&(n.depth=2),h(n.colors)&&(n.colors=!1),h(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=function(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}),o(n,e,n.depth)}function o(e,t,n){if(e.customInspect&&t&&_(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return d(i)||(i=o(e,i,n)),i}var b=function(e,t){if(h(t))return e.stylize("undefined","undefined");if(d(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(l(t))return e.stylize(""+t,"number");if(c(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(e,t);if(b)return b;var m=Object.keys(t),g=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(m);if(e.showHidden&&(m=Object.getOwnPropertyNames(t)),v(t)&&(m.indexOf("message")>=0||m.indexOf("description")>=0))return s(t);if(0===m.length){if(_(t)){var x=t.name?": "+t.name:"";return e.stylize("[Function"+x+"]","special")}if(p(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(y(t))return e.stylize(Date.prototype.toString.call(t),"date");if(v(t))return s(t)}var k="",j=!1,S=["{","}"];if(u(t)&&(j=!0,S=["[","]"]),_(t)){k=" [Function"+(t.name?": "+t.name:"")+"]"}if(p(t)&&(k=" "+RegExp.prototype.toString.call(t)),y(t)&&(k=" "+Date.prototype.toUTCString.call(t)),v(t)&&(k=" "+s(t)),0===m.length&&(!j||0==t.length))return S[0]+k+S[1];if(n<0)return p(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return E=j?function(e,t,r,n,i){for(var o=[],s=0,u=t.length;s<u;++s)w(t,String(s))?o.push(a(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(a(e,t,r,n,i,!0))}),o}(e,t,n,g,m):m.map(function(r){return a(e,t,n,g,r,j)}),e.seen.pop(),function(e,t,r){var n=0;if(e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(E,k,S)}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,r,n,i,s){var a,u,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),w(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=f(r)?o(e,c.value,null):o(e,c.value,r-1)).indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),h(a)){if(s&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function u(e){return Array.isArray(e)}function c(e){return"boolean"==typeof e}function f(e){return null===e}function l(e){return"number"==typeof e}function d(e){return"string"==typeof e}function h(e){return void 0===e}function p(e){return b(e)&&"[object RegExp]"===m(e)}function b(e){return"object"==typeof e&&null!==e}function y(e){return b(e)&&"[object Date]"===m(e)}function v(e){return b(e)&&("[object Error]"===m(e)||e instanceof Error)}function _(e){return"function"==typeof e}function m(e){return Object.prototype.toString.call(e)}function g(e){return e<10?"0"+e.toString(10):e.toString(10)}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var x=/%[sdj%]/g;r.format=function(e){if(!d(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(x,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<o;a=n[++r])f(a)||!b(a)?s+=" "+a:s+=" "+i(a);return s},r.deprecate=function(e,i){if(h(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var k,j={};r.debuglog=function(e){if(h(k)&&(k=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!j[e])if(new RegExp("\\b"+e+"\\b","i").test(k)){var n=t.pid;j[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else j[e]=function(){};return j[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=u,r.isBoolean=c,r.isNull=f,r.isNullOrUndefined=function(e){return null==e},r.isNumber=l,r.isString=d,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=h,r.isRegExp=p,r.isObject=b,r.isDate=y,r.isError=v,r.isFunction=_,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",function(){var e=new Date,t=[g(e.getHours()),g(e.getMinutes()),g(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!b(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":773,_process:609,inherits:772}],775:[function(e,t,r){var n=e("./v1"),i=e("./v4"),o=i;o.v1=n,o.v4=i,t.exports=o},{"./v1":778,"./v4":779}],776:[function(e,t,r){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},{}],777:[function(e,t,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var o=new Array(16);r=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],778:[function(e,t,r){var n=e("./lib/rng"),i=e("./lib/bytesToUuid"),o=n(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],a=16383&(o[6]<<8|o[7]),u=0,c=0;t.exports=function(e,t,r){var n=t&&r||0,o=t||[],f=void 0!==(e=e||{}).clockseq?e.clockseq:a,l=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:c+1,h=l-u+(d-c)/1e4;if(h<0&&void 0===e.clockseq&&(f=f+1&16383),(h<0||l>u)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=l,c=d,a=f;var p=(1e4*(268435455&(l+=122192928e5))+d)%4294967296;o[n++]=p>>>24&255,o[n++]=p>>>16&255,o[n++]=p>>>8&255,o[n++]=255&p;var b=l/4294967296*1e4&268435455;o[n++]=b>>>8&255,o[n++]=255&b,o[n++]=b>>>24&15|16,o[n++]=b>>>16&255,o[n++]=f>>>8|128,o[n++]=255&f;for(var y=e.node||s,v=0;v<6;++v)o[n+v]=y[v];return t||i(o)}},{"./lib/bytesToUuid":776,"./lib/rng":777}],779:[function(e,t,r){var n=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},{"./lib/bytesToUuid":776,"./lib/rng":777}],780:[function(e,t,r){"use strict";t.exports=function(e){return void 0===e}},{}],781:[function(e,t,r){"use strict";function n(e,t,r){var n=r[r.length-1];e===n.element&&(r.pop(),n=r[r.length-1]);var i=n.element,o=n.index;if(Array.isArray(i))i.push(e);else if(o===t.length-2){i[t.pop()]=e}else t.push(e)}r.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,i,o,s,a,u,c,f,l,d,h="";r=t.pop();)if(n=r.obj,i=r.prefix||"",o=r.val||"",h+=i,o)h+=o;else if("object"!=typeof n)h+=void 0===n?null:JSON.stringify(n);else if(null===n)h+="null";else if(Array.isArray(n)){for(t.push({val:"]"}),s=n.length-1;s>=0;s--)a=0===s?"":",",t.push({obj:n[s],prefix:a});t.push({val:"["})}else{u=[];for(c in n)n.hasOwnProperty(c)&&u.push(c);for(t.push({val:"}"}),s=u.length-1;s>=0;s--)l=n[f=u[s]],d=s>0?",":"",d+=JSON.stringify(f)+":",t.push({obj:l,prefix:d});t.push({val:"{"})}return h},r.parse=function(e){for(var t,r,i,o,s,a,u,c,f,l=[],d=[],h=0;;)if("}"!==(t=e[h++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":h+=3,n(null,l,d);break;case"t":h+=3,n(!0,l,d);break;case"f":h+=4,n(!1,l,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",h--;;){if(i=e[h++],!/[\d\.\-e\+]/.test(i)){h--;break}r+=i}n(parseFloat(r),l,d);break;case'"':for(o="",s=void 0,a=0;;){if('"'===(u=e[h++])&&("\\"!==s||a%2!=1))break;o+=u,"\\"===(s=u)?a++:a=0}n(JSON.parse('"'+o+'"'),l,d);break;case"[":c={element:[],index:l.length},l.push(c.element),d.push(c);break;case"{":f={element:{},index:l.length},l.push(f.element),d.push(f);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===l.length)return l.pop();n(l.pop(),l,d)}}},{}],782:[function(e,t,r){"use strict";for(var n=[{code:9,description:"Tab",string:"\t"},{code:10,description:"Line Feed",string:"\n"},{code:11,description:"Vertical Tab",string:"\v"},{code:12,description:"Form Feed",string:"\f"},{code:13,description:"Carriage Return",string:"\r"},{code:32,description:"Space",string:" "},{code:160,description:"No-break space",string:" "},{code:5760,description:"Ogham space mark",string:" "},{code:6158,description:"Mongolian vowel separator",string:"᠎"},{code:8192,description:"En quad",string:" "},{code:8193,description:"Em quad",string:" "},{code:8194,description:"En space",string:" "},{code:8195,description:"Em space",string:" "},{code:8196,description:"Three-per-em space",string:" "},{code:8197,description:"Four-per-em space",string:" "},{code:8198,description:"Six-per-em space",string:" "},{code:8199,description:"Figure space",string:" "},{code:8200,description:"Punctuation space",string:" "},{code:8201,description:"Thin space",string:" "},{code:8202,description:"Hair space",string:" "},{code:8232,description:"Line separator",string:"\u2028"},{code:8233,description:"Paragraph separator",string:"\u2029"},{code:8239,description:"Narrow no-break space",string:" "},{code:8287,description:"Medium mathematical space",string:" "},{code:12288,description:"Ideographic space",string:"　"},{code:65279,description:"Byte Order Mark",string:"\ufeff"}],i="",o=n.length,s=0;s<o;s+=1)i+=n[s].string;t.exports={list:n,string:i}},{}],783:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},{}]},{},[1]);