!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),a(t),t}:a(jQuery)}(function(B){var M,a,t,s,n,e,i,l,c,d,o,h,r,u,b,f,p,w,q="undefined"!=typeof window?window:this;void 0===M&&(M={i18n:{modes:["Stack","Swipe","Toggle"],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:"Columns",columnsDialogError:"No eligible columns.",sort:"Sort"},mustard:"querySelector"in document&&"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini}),M.config||(M.config={}),M.mustard&&B(document.documentElement).addClass("tablesaw-enhanced"),a="tablesaw",t="tablesaw-bar",s="tablesawcreate",n="tablesawdestroy",e="tablesawrefresh",(i=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=B(e),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.init()}).prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",a+"-"+Math.round(1e4*Math.random())),this.createToolbar();var e=this._initCells();this.$table.trigger(s,[this,e])},i.prototype._initCells=function(){var n,t=this.table.querySelectorAll("thead tr"),i=this;return B(t).each(function(){var a=0,e=B(this).children(),s=[];e.each(function(){var e=parseInt(this.getAttribute("colspan"),10);if(s[a]=this,n=a+1,e)for(var t=0;t<e-1;t++)s[++a]=this;this.cells=[],a++}),i.$table.find("tr").not(t[0]).each(function(){var t=0;B(this).children().each(function(){var e=parseInt(this.getAttribute("colspan"),10);s[t].cells.push(this),e?t+=e:t++})})}),n},i.prototype.refresh=function(){this._initCells(),this.$table.trigger(e)},i.prototype.createToolbar=function(){var e=this.$table.prev().filter("."+t);e.length||(e=B("<div>").addClass(t).insertBefore(this.$table)),this.$toolbar=e,this.mode&&this.$toolbar.addClass("mode-"+this.mode)},i.prototype.destroy=function(){this.$table.prev().filter("."+t).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,"")});var e=this.$table.attr("id");B(document).off("."+e),B(window).off("."+e),this.$table.trigger(n,[this]),this.$table.removeData(a)},B.fn[a]=function(){return this.each(function(){var e=B(this);if(!e.data(a)){var t=new i(this);e.data(a,t)}})},B(document).on("enhance.tablesaw",function(e){M.mustard&&B(e.target).find("table[data-tablesaw-mode],table[data-tablesaw-sortable]")[a]()}),c="tablesaw-cell-label",d="tablesaw-cell-content",o=l="tablesaw-stack",h="data-tablesaw-no-labels",r="data-tablesaw-hide-empty",(u=function(e){this.$table=B(e),this.labelless=this.$table.is("["+h+"]"),this.hideempty=this.$table.is("["+r+"]"),this.labelless||(this.allHeaders=this.$table.find("th")),this.$table.data(o,this)}).prototype.init=function(o){if(this.$table.addClass(l),!this.labelless){var e=B(this.allHeaders),r=this.hideempty;e.each(function(){var e=B(this),t=B(this.cells).filter(function(){return!(B(this).parent().is("["+h+"]")||r&&B(this).is(":empty"))}),a=t.not(this).filter("thead th").length&&" tablesaw-cell-label-top",s=e.find(".tablesaw-sortable-btn"),n=s.length?s.html():e.html();if(""!==n)if(a){var i=parseInt(B(this).attr("colspan"),10),l="";i&&(l="td:nth-child("+i+"n + "+o+")"),t.filter(l).prepend("<b class='"+c+a+"'>"+n+"</b>")}else t.wrapInner("<span class='"+d+"'></span>"),t.prepend("<b class='"+c+"'>"+n+"</b>")})}},u.prototype.destroy=function(){this.$table.removeClass(l),this.$table.find("."+c).remove(),this.$table.find("."+d).each(function(){B(this).replaceWith(this.childNodes)})},B(document).on("tablesawcreate",function(e,t,a){"stack"===t.mode&&new u(t.table).init(a)}),B(document).on("tablesawdestroy",function(e,t){"stack"===t.mode&&B(t.table).data(o).destroy()}),b="tablesawbtn",f={_create:function(){return B(this).each(function(){B(this).trigger("beforecreate."+b)[b]("_init").trigger("create."+b)})},_init:function(){var e=B(this),t=this.getElementsByTagName("select")[0];return t&&B(this).addClass("btn-select")[b]("_select",t),e},_select:function(e){var t=function(e,t){var a,s,n,i=B(t).find("option");if(i.each(function(){this.selected&&(a=document.createTextNode(this.text))}),n=e.childNodes,0<i.length)for(var l=0,o=n.length;l<o;l++)(s=n[l])&&3===s.nodeType&&e.replaceChild(a,s)};t(this,e),B(this).on("change refresh",function(){t(this,e)})}},B.fn[b]=function(e,t,a,s){return this.each(function(){return e&&"string"==typeof e?B.fn[b].prototype[e].call(this,t,a,s):B(this).data(b+"active")?B(this):(B(this).data(b+"active",!0),void B.fn[b].prototype._create.call(this))})},B.extend(B.fn[b].prototype,f),(p=function(e){this.$table=B(e),this.$table.length&&(this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-",toolbar:"tablesaw-bar"},this.headers=this.$table.find("tr").eq(0).find("th"),this.$table.data("tablesaw-coltoggle",this))}).prototype.init=function(){if(this.$table.length){var t,e,a,s,n,i,l=this;this.$table.addClass(this.classes.columnToggleTable),e=(t=this.$table.attr("id"))+"-popup",i=B("<div class='"+this.classes.columnBtnContain+"'></div>"),a=B("<a href='#"+e+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+M.i18n.columnBtnText+"</span></a>"),s=B("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+e+"'></div>"),n=B("<div class='btn-group'></div>");var o,r=!1;B(this.headers).not("td").each(function(){var e=B(this),t=e.attr("data-tablesaw-priority"),a=l.$getCells(this);t&&"persist"!==t&&(a.addClass(l.classes.priorityPrefix+t),B("<label><input type='checkbox' checked>"+e.text()+"</label>").appendTo(n).children(0).data("tablesaw-header",this),r=!0)}),r||n.append("<label>"+M.i18n.columnsDialogError+"</label>"),n.appendTo(s),n.find('input[type="checkbox"]').on("change",function(e){var t=e.target.checked,a=l.$getCellsFromCheckbox(e.target);a[t?"removeClass":"addClass"]("tablesaw-cell-hidden"),a[t?"addClass":"removeClass"]("tablesaw-cell-visible"),l.$table.trigger("tablesawcolumns")}),a.appendTo(i),i.appendTo(this.$table.prev().filter("."+this.classes.toolbar)),a.on("click.tablesaw",function(e){e.preventDefault(),i.is(".visible")?c():(i.addClass("visible"),a.removeClass("down").addClass("up"),B(document).off("click."+t,c),window.clearTimeout(o),o=window.setTimeout(function(){B(document).one("click."+t,c)},15))}),s.appendTo(i),this.$menu=n,B(window).on("resize."+t,function(){l.refreshToggle()}),this.refreshToggle()}function c(e){e&&B(e.target).closest("."+l.classes.popup).length||(B(document).off("click."+t),a.removeClass("up").addClass("down"),i.removeClass("visible"))}},p.prototype.$getCells=function(e){return B(e).add(e.cells)},p.prototype.$getCellsFromCheckbox=function(e){var t=B(e).data("tablesaw-header");return this.$getCells(t)},p.prototype.refreshToggle=function(){var e=this;this.$menu.find("input").each(function(){this.checked="table-cell"===e.$getCellsFromCheckbox(this).eq(0).css("display")})},p.prototype.refreshPriority=function(){var s=this;B(this.headers).not("td").each(function(){var e=B(this),t=e.attr("data-tablesaw-priority"),a=e.add(this.cells);t&&"persist"!==t&&a.addClass(s.classes.priorityPrefix+t)})},p.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){B(this).removeClass("tablesaw-cell-hidden").removeClass("tablesaw-cell-visible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},B(document).on("tablesawcreate",function(e,t){"columntoggle"===t.mode&&new p(t.table).init()}),B(document).on("tablesawdestroy",function(e,t){"columntoggle"===t.mode&&B(t.table).data("tablesaw-coltoggle").destroy()}),function(){function $(e){var t=B(e);return t.width()+function(e,t){for(var a=0,s=0,n=t.length;s<n;s++)a+=parseInt(e.css(t[s])||0,10);return a}(t,["padding-left","padding-right","border-left-width","border-right-width"])}B.extend(M.config,{swipe:{horizontalThreshold:15,verticalThreshold:30}});var T="tablesaw-bar",x="disabled",k="tablesaw-fix-persist",N="tablesaw-all-cols-visible",_="data-tablesaw-no-touch";function a(o){var e,t,a=B("<div class='tablesaw-advance'></div>"),s=B("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(a),n=B("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(a),r=o.find("thead th"),i=r.not('[data-tablesaw-priority="persist"]'),c=[],l=B(document.head||"head"),d=o.attr("id"),h=(e=document.createElement("div"),t=e.getElementsByTagName("i"),e.innerHTML="\x3c!--[if lte IE 8]><i></i><![endif]--\x3e",!t.length);if(!r.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");function u(e){return B(e.cells).add(e)}function b(e){u(e).removeClass("tablesaw-cell-hidden")}function f(e){u(e).addClass("tablesaw-cell-hidden")}function p(){var e,a="#"+d+".tablesaw-swipe ",s=[],n=o.width(),i=[];r.each(function(e){var t;B(this).is('[data-tablesaw-priority="persist"]')&&(t=$(this))<.75*n&&(i.push(e+"-"+t),s.push(a+" .tablesaw-cell-persist:nth-child("+(e+1)+") { width: "+t+"px; }"))}),e=i.join("_"),o.addClass(k);var t=B("#"+d+"-persist");t.length&&t.data("tablesaw-hash")===e||(t.remove(),s.length&&B("<style>"+s.join("\n")+"</style>").attr("id",d+"-persist").data("tablesaw-hash",e).appendTo(l))}function w(){var s,n=[];return i.each(function(e){var t=B(this),a="none"===t.css("display")||t.is(".tablesaw-cell-hidden");if(a||s){if(a&&s)return n[1]=e,!1}else s=!0,n[0]=e}),n}function m(){var e=w();return[e[1]-1,e[0]-1]}function v(e){return-1<e[1]&&e[1]<i.length}function g(){if(!(e=o.attr("data-tablesaw-swipe-media"))||"matchMedia"in q&&q.matchMedia(e).matches){var e,a=o.parent().width(),s=[],n=0,i=[],l=r.length;r.each(function(e){var t=B(this).is('[data-tablesaw-priority="persist"]');s.push(t),n+=c[e],i.push(n),(t||a<n)&&l--});var t=0===l;r.each(function(e){s[e]?u(this).addClass("tablesaw-cell-persist"):i[e]<=a||t?(t=!1,b(this)):f(this)}),h&&(o.removeClass(k),B("#"+d+"-persist").remove()),o.trigger("tablesawcolumns")}}function y(e){var t=e?w():m();v(t)&&(isNaN(t[0])&&(t[0]=e?0:i.length-1),h&&p(),f(i.get(t[0])),b(i.get(t[1])),o.trigger("tablesawcolumns"))}function C(e,t){return(e.touches||e.originalEvent.touches)[0][t]}o.css("width","auto"),r.each(function(){c.push($(this))}),o.css("width",""),a.appendTo(o.prev().filter(".tablesaw-bar")),o.addClass("tablesaw-swipe"),d||(d="tableswipe-"+Math.round(1e4*Math.random()),o.attr("id",d)),s.add(n).on("click",function(e){y(!!B(e.target).closest(n).length),e.preventDefault()}),o.is("["+_+"]")||o.on("touchstart.swipetoggle",function(e){var a,s,n=C(e,"pageX"),i=C(e,"pageY");B(q).off("resize",g),B(this).on("touchmove",function(e){a=C(e,"pageX"),s=C(e,"pageY");var t=M.config.swipe;Math.abs(a-n)>t.horizontalThreshold&&Math.abs(s-i)<t.verticalThreshold&&e.preventDefault()}).on("touchend.swipetoggle",function(){var e=M.config.swipe;Math.abs(s-i)<e.verticalThreshold&&(a-n<-1*e.horizontalThreshold&&y(!0),a-n>e.horizontalThreshold&&y(!1)),window.setTimeout(function(){B(q).on("resize",g)},300),B(this).off("touchmove touchend")})}),o.on("tablesawcolumns.swipetoggle",function(){var e=v(m()),t=v(w());s[e?"removeClass":"addClass"](x),n[t?"removeClass":"addClass"](x),s.closest("."+T)[e||t?"removeClass":"addClass"](N)}).on("tablesawnext.swipetoggle",function(){y(!0)}).on("tablesawprev.swipetoggle",function(){y(!1)}).on("tablesawdestroy.swipetoggle",function(){var e=B(this);e.removeClass("tablesaw-swipe"),e.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),B(q).off("resize",g),e.off(".swipetoggle")}).on("tablesawrefresh",function(){c=[],r.each(function(){var e=$(this);c.push(e)}),g()}),g(),B(q).on("resize",g)}B(document).on("tablesawcreate",function(e,t){"swipe"===t.mode&&a(t.$table)})}(),function(){function u(e){var t=[];return B(e.childNodes).each(function(){var e=B(this);e.is("input, select")?t.push(e.val()):e.is(".tablesaw-cell-label")||t.push((e.text()||"").replace(/^\s+|\s+$/g,""))}),t.join("")}var c="tablesaw-sortable",d="data-tablesaw-sortable-default-col",h={head:c+"-head",ascend:c+"-ascending",descend:c+"-descending",switcher:c+"-switch",tableToolbar:"tablesaw-toolbar",sortButton:c+"-btn"},e={_create:function(e){return B(this).each(function(){if(B(this).data(c+"-init"))return!1;B(this).data(c+"-init",!0).trigger("beforecreate."+c)[c]("_init",e).trigger("create."+c)})},_init:function(){var n,i,e,t,s,a,l=B(this),r=function(e){B.each(e,function(e,t){var a=B(t);a.removeAttr(d),a.removeClass(h.ascend),a.removeClass(h.descend)})};l.addClass(c),n=l.find("thead th[data-"+c+"-col]"),e=n,B.each(e,function(e,t){B(t).addClass(h.head)}),t=n,s=function(e){if(!B(e.target).is("a[href]")){e.stopPropagation();var t=B(this).parent(),a=e.data.col,s=n.index(t[0]);r(t.siblings()),t.is("."+h.descend)?(l[c]("sortBy",a,!0),s+="_asc"):(l[c]("sortBy",a),s+="_desc"),i&&i.find("select").val(s).trigger("refresh"),e.preventDefault()}},B.each(t,function(e,t){var a=B("<button class='"+h.sortButton+"'/>");a.on("click",{col:t},s),B(t).wrapInner(a)}),a=n,B.each(a,function(e,t){var a=B(t);a.is("["+d+"]")&&(a.is("."+h.descend)||a.addClass(h.ascend))}),l.is("[data-tablesaw-sortable-switch]")&&function(a){i=B("<div>").addClass(h.switcher).addClass(h.tableToolbar);var o=["<label>"+M.i18n.sort+":"];o.push('<span class="btn btn-small">&#160;<select>'),a.each(function(e){var t=B(this),a=t.is("["+d+"]"),s=t.is("."+h.descend),n=t.is("[data-sortable-numeric]"),i=0;B(this.cells.slice(0,5)).each(function(){isNaN(parseInt(u(this),10))||i++});var l=5===i;n||t.attr("data-sortable-numeric",l?"":"false"),o.push("<option"+(a&&!s?" selected":"")+' value="'+e+'_asc">'+t.text()+" "+(l?"&#x2191;":"(A-Z)")+"</option>"),o.push("<option"+(a&&s?" selected":"")+' value="'+e+'_desc">'+t.text()+" "+(l?"&#x2193;":"(Z-A)")+"</option>")}),o.push("</select></span></label>"),i.html(o.join(""));var e=l.prev().filter(".tablesaw-bar"),t=e.children().eq(0);t.length?i.insertBefore(t):i.appendTo(e),i.find(".btn").tablesawbtn(),i.find("select").on("change",function(){var e=B(this).val().split("_"),t=a.eq(e[0]);r(t.siblings()),l[c]("sortBy",t.get(0),"asc"===e[1])})}(n,l.find("tbody tr:nth-child(-n+3)"))},getColumnNumber:function(e){return B(e).prevAll().length},getTableRows:function(){return B(this).find("tbody tr")},sortRows:function(e,s,t,a){var n,i,l,o;l=e,o=[],B.each(l,function(e,t){var a=B(t).children().get(s);o.push({element:a,cell:u(a),rowNum:e})}),n=o;var r,c,d,h=B(a).data("tablesaw-sort");return i=!(!h||"function"!=typeof h)&&h(t)||(r=t,c=B(a).is("[data-sortable-numeric]")&&!B(a).is('[data-sortable-numeric="false"]'),d=/[^\-\+\d\.]/g,r?function(e,t){return c?parseFloat(e.cell.replace(d,""))-parseFloat(t.cell.replace(d,"")):e.cell.toLowerCase()>t.cell.toLowerCase()?1:-1}:function(e,t){return c?parseFloat(t.cell.replace(d,""))-parseFloat(e.cell.replace(d,"")):e.cell.toLowerCase()<t.cell.toLowerCase()?1:-1}),e=function(e,t){var a,s,n,i=[];for(a=0,s=e.length;a<s;a++)n=e[a].rowNum,i.push(t[n]);return i}(n.sort(i),e)},replaceTableRows:function(e){for(var t=B(this).find("tbody"),a=0,s=e.length;a<s;a++)t.append(e[a])},makeColDefault:function(e,t){var a=B(e);a.attr(d,"true"),t?(a.removeClass(h.descend),a.addClass(h.ascend)):(a.removeClass(h.ascend),a.addClass(h.descend))},sortBy:function(e,t){var a,s,n=B(this);a=n[c]("getColumnNumber",e),s=n[c]("getTableRows"),s=n[c]("sortRows",s,a,t,e),n[c]("replaceTableRows",s),n[c]("makeColDefault",e,t),n.trigger("tablesaw-sorted")}};B.fn[c]=function(e){var t,a=Array.prototype.slice.call(arguments,1);return e&&"string"==typeof e?void 0!==(t=B.fn[c].prototype[e].apply(this[0],a))?t:B(this):(B(this).data(c+"-active")||(B(this).data(c+"-active",!0),B.fn[c].prototype._create.call(this,e)),B(this))},B.extend(B.fn[c].prototype,e),B(document).on("tablesawcreate",function(e,t){t.$table.is("table[data-tablesaw-sortable]")&&t.$table[c]()})}(),function(){var l={init:"data-tablesaw-minimap"};function a(a){var s=B('<div class="tablesaw-advance minimap">'),n=B('<ul class="tablesaw-advance-dots">').appendTo(s),i="tablesaw-advance-dots-hide";function t(){if(!(e=a.attr(l.init))||q.matchMedia&&q.matchMedia(e).matches){var e;s.css("display","block");var t=n.find("li").removeClass(i);a.find("thead th").each(function(e){"none"===B(this).css("display")&&t.eq(e).addClass(i)})}else s.css("display","none")}a.find("thead th").each(function(){n.append("<li><i></i></li>")}),s.appendTo(a.prev().filter(".tablesaw-bar")),t(),B(q).on("resize",t),a.on("tablesawcolumns.minimap",function(){t()}).on("tablesawdestroy.minimap",function(){var e=B(this);e.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),B(q).off("resize",t),e.off(".minimap")})}B(document).on("tablesawcreate",function(e,t){"swipe"!==t.mode&&"columntoggle"!==t.mode||!t.$table.is("[ "+l.init+"]")||a(t.$table)})}(),w={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-toolbar"},modes:["stack","swipe","columntoggle"],init:function(e){var t,a=B(e),s=a.attr(w.attributes.excludeMode),n=a.prev().filter(".tablesaw-bar"),i=B("<div>").addClass(w.classes.main+" "+w.classes.toolbar),l=["<label>"+M.i18n.columns+":"],o=a.attr("data-tablesaw-mode");l.push('<span class="btn btn-small">&#160;<select>');for(var r=0,c=w.modes.length;r<c;r++)s&&s.toLowerCase()===w.modes[r]||((t=o===w.modes[r])&&w.modes[r],l.push("<option"+(t?" selected":"")+' value="'+w.modes[r]+'">'+M.i18n.modes[r]+"</option>"));l.push("</select></span></label>"),i.html(l.join(""));var d=n.find(".tablesaw-advance").eq(0);d.length?i.insertBefore(d):i.appendTo(n),i.find(".btn").tablesawbtn(),i.find("select").on("change",w.onModeChange)},onModeChange:function(){var e=B(this),t=e.closest("."+w.classes.main),a=e.closest(".tablesaw-bar").next().eq(0),s=e.val();t.remove(),a.data("tablesaw").destroy(),a.attr("data-tablesaw-mode",s),a.tablesaw()}},B(q.document).on("tablesawcreate",function(e,t){t.$table.is(w.selectors.init)&&w.init(t.table)}),B(q.document).on("tablesawdestroy",function(e,t){t.$table.prev().is(".tablesaw-bar")&&t.$table.prev().remove()})});