!function(e){"function"==typeof define&&define.amd?define(["shoestring"],e):"object"==typeof module&&module.exports?module.exports=e():e()}(function(){var i="undefined"!=typeof window?window:this,l=i.document;function c(e,t){var n,a=typeof e;if(!e)return new r([]);if(e.call)return c.ready(e);if(e.constructor===r&&!t)return e;if("string"!==a||0!==e.indexOf("<"))return"string"===a?t?c(t).find(e):(n=l.querySelectorAll(e),new r(n,e)):"[object Array]"===Object.prototype.toString.call(a)||i.NodeList&&e instanceof i.NodeList?new r(e,e):e.constructor===Array?new r(e,e):new r([e],e);var s=l.createElement("div");return s.innerHTML=e,c(s).children().each(function(){s.removeChild(this)})}var r=function(e,t){this.length=0,this.selector=t,c.merge(this,e)};r.prototype.reverse=[].reverse,c.fn=r.prototype,c.Shoestring=r,c.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c.merge=function(e,t){var n,a,s;for(n=+t.length,a=0,s=e.length;a<n;a++)e[s++]=t[a];return e.length=s,e},(i.shoestring=c).fn.each=function(e){return c.each(this,e)},c.each=function(e,t){for(var n=0,a=e.length;n<a&&!1!==t.call(e[n],n,e[n]);n++);return e},c.inArray=function(e,t){for(var n=-1,a=0,s=t.length;a<s;a++)t.hasOwnProperty(a)&&t[a]===e&&(n=a);return n},c.ready=function(e){return t&&e?e.call(l):e?n.push(e):a(),[l]};var o,t=!(c.fn.ready=function(e){return c.ready(e),this}),n=[],a=function(){if(!t){for(;n.length;)n.shift().call(l);t=!0}};function h(e,t){var n=!1;return e.each(function(){for(var e=0;e<t.length;)this===t[e]&&(n=!0),e++}),n}(l.attachEvent?"complete"===l.readyState:"loading"!==l.readyState)?a():(l.addEventListener("DOMContentLoaded",a,!1),l.addEventListener("readystatechange",a,!1),i.addEventListener("load",a,!1)),c.fn.is=function(a){var e,s=!1,i=this;return"string"!=typeof a?h(this,a.length&&a[0]?a:[a]):((e=this.parent()).length||(e=c(l)),e.each(function(e,t){var n;n=t.querySelectorAll(a),s=h(i,n)}),s)},c.fn.data=function(e,t){return void 0===e?this[0]?this[0].shoestringData||{}:void 0:void 0!==t?this.each(function(){this.shoestringData||(this.shoestringData={}),this.shoestringData[e]=t}):this[0]&&this[0].shoestringData?this[0].shoestringData[e]:void 0},c.fn.removeData=function(e){return this.each(function(){void 0!==e&&this.shoestringData?(this.shoestringData[e]=void 0,delete this.shoestringData[e]):this[0].shoestringData={}})},(i.$=c).fn.addClass=function(e){var n=e.replace(/^\s+|\s+$/g,"").split(" ");return this.each(function(){for(var e=0,t=n.length;e<t;e++)void 0===this.className||""!==this.className&&this.className.match(new RegExp("(^|\\s)"+n[e]+"($|\\s)"))||(this.className+=" "+n[e])})},c.fn.add=function(e){var t=[];return this.each(function(){t.push(this)}),c(e).each(function(){t.push(this)}),c(t)},c.fn.append=function(a){return"string"!=typeof a&&void 0===a.nodeType||(a=c(a)),this.each(function(e){for(var t=0,n=a.length;t<n;t++)this.appendChild(0<e?a[t].cloneNode(!0):a[t])})},c.fn.appendTo=function(e){return this.each(function(){c(e).append(this)})},c.fn.attr=function(t,n){var a="string"==typeof t;return void 0===n&&a?this[0]?this[0].getAttribute(t):void 0:this.each(function(){if(a)this.setAttribute(t,n);else for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e])})},c.fn.before=function(a){return"string"!=typeof a&&void 0===a.nodeType||(a=c(a)),this.each(function(e){for(var t=0,n=a.length;t<n;t++)this.parentNode.insertBefore(0<e?a[t].cloneNode(!0):a[t],this)})},c.fn.children=function(){var e,t,n=[];return this.each(function(){for(e=this.children,t=-1;t++<e.length-1;)-1===c.inArray(e[t],n)&&n.push(e[t])}),c(n)},c.fn.closest=function(t){var n=[];return t&&this.each(function(){var e;if(c(e=this).is(t))n.push(this);else for(;e.parentElement;){if(c(e.parentElement).is(t)){n.push(e.parentElement);break}e=e.parentElement}}),c(n)},c.cssExceptions={float:["cssFloat"]},function(){var r=c.cssExceptions;function o(e,t){return i.getComputedStyle(e,null).getPropertyValue(t)}var l=["","-webkit-","-ms-","-moz-","-o-","-khtml-"];c._getStyle=function(e,t){var n,a,s,i;if(r[t])for(s=0,i=r[t].length;s<i;s++)if(a=o(e,r[t][s]))return a;for(s=0,i=l.length;s<i;s++)if(a=o(e,n=(l[s]+t).replace(/\-([A-Za-z])/g,function(e,t){return t.toUpperCase()})),n!==t&&(a=a||o(e,t)),l[s]&&(a=a||o(e,l[s]+t)),a)return a}}(),o=c.cssExceptions,c._setStyle=function(e,t,n){var a=t.replace(/\-([A-Za-z])/g,function(e,t){return t.toUpperCase()});if(e.style[t]=n,a!==t&&(e.style[a]=n),o[t])for(var s=0,i=o[t].length;s<i;s++)e.style[o[t][s]]=n},c.fn.css=function(t,e){if(this[0])return"object"==typeof t?this.each(function(){for(var e in t)t.hasOwnProperty(e)&&c._setStyle(this,e,t[e])}):void 0!==e?this.each(function(){c._setStyle(this,t,e)}):c._getStyle(this[0],t)},c.fn.eq=function(e){return this[e]?c(this[e]):c([])},c.fn.filter=function(a){var s=[];return this.each(function(e){var t;if("function"==typeof a)!1!==a.call(this,e)&&s.push(this);else{if(this.parentNode)t=c(a,this.parentNode);else{var n=c(l.createDocumentFragment());n[0].appendChild(this),t=c(a,n)}-1<c.inArray(this,t)&&s.push(this)}}),c(s)},c.fn.find=function(n){var a,s=[];return this.each(function(){for(var e=0,t=(a=this.querySelectorAll(n)).length;e<t;e++)s=s.concat(a[e])}),c(s)},c.fn.first=function(){return this.eq(0)},c.fn.get=function(e){if(void 0!==e)return this[e];for(var t=[],n=0;n<this.length;n++)t.push(this[n]);return t};c.fn.html=function(e){if(void 0!==e)return function(e){if("string"==typeof e||"number"==typeof e)return this.each(function(){this.innerHTML=""+e});var t="";if(void 0!==e.length)for(var n=0,a=e.length;n<a;n++)t+=e[n].outerHTML;else t=e.outerHTML;return this.each(function(){this.innerHTML=t})}.call(this,e);var t="";return this.each(function(){t+=this.innerHTML}),t},function(){function e(e,t){var n,a,s;for(n=a=0;n<e.length;n++){if(t(s=e.item?e.item(n):e[n]))return a;1===s.nodeType&&a++}return-1}c.fn.index=function(t){var n;return n=this,void 0===t?e((this[0]&&this[0].parentNode||l.documentElement).childNodes,function(e){return n[0]===e}):e(n,function(e){return e===c(t,e.parentNode)[0]})}}(),c.fn.insertBefore=function(e){return this.each(function(){c(e).before(this)})},c.fn.last=function(){return this.eq(this.length-1)},c.fn.next=function(){var s=[];return this.each(function(){var e,t,n;e=c(this.parentNode)[0].childNodes;for(var a=0;a<e.length;a++){if(t=e.item(a),n&&1===t.nodeType){s.push(t);break}t===this&&(n=!0)}}),c(s)},c.fn.not=function(t){var n=[];return this.each(function(){var e=c(t,this.parentNode);-1===c.inArray(this,e)&&n.push(this)}),c(n)},c.fn.parent=function(){var e,t=[];return this.each(function(){(e=this===l.documentElement?l:this.parentNode)&&11!==e.nodeType&&t.push(e)}),c(t)},c.fn.prepend=function(s){return"string"!=typeof s&&void 0===s.nodeType||(s=c(s)),this.each(function(e){for(var t=0,n=s.length;t<n;t++){var a=0<e?s[t].cloneNode(!0):s[t];this.firstChild?this.insertBefore(a,this.firstChild):this.appendChild(a)}})},c.fn.prev=function(){var s=[];return this.each(function(){for(var e,t,n,a=(e=c(this.parentNode)[0].childNodes).length-1;0<=a;a--){if(t=e.item(a),n&&1===t.nodeType){s.push(t);break}t===this&&(n=!0)}}),c(s)},c.fn.prevAll=function(){var t=[];return this.each(function(){for(var e=c(this).prev();e.length;)t.push(e[0]),e=e.prev()}),c(t)},c.fn.removeAttr=function(e){return this.each(function(){this.removeAttribute(e)})},c.fn.removeClass=function(e){var s=e.replace(/^\s+|\s+$/g,"").split(" ");return this.each(function(){for(var e,t,n=0,a=s.length;n<a;n++)void 0!==this.className&&(t=new RegExp("(^|\\s)"+s[n]+"($|\\s)","gmi"),e=this.className.replace(t," "),this.className=e.replace(/^\s+|\s+$/g,""))})},c.fn.remove=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},c.fn.replaceWith=function(i){"string"==typeof i&&(i=c(i));var r=[];return 1<i.length&&(i=i.reverse()),this.each(function(e){var t,n=this.cloneNode(!0);if(r.push(n),this.parentNode)if(1===i.length)t=0<e?i[0].cloneNode(!0):i[0],this.parentNode.replaceChild(t,this);else{for(var a=0,s=i.length;a<s;a++)t=0<e?i[a].cloneNode(!0):i[a],this.parentNode.insertBefore(t,this.nextSibling);this.parentNode.removeChild(this)}}),c(r)},c.fn.siblings=function(){if(!this.length)return c([]);for(var e=[],t=this[0].parentNode.firstChild;1===t.nodeType&&t!==this[0]&&e.push(t),t=t.nextSibling;);return c(e)};var d=function(e){var t,n="",a=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=d(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[a++];)n+=d(t);return n};function f(e,t,n){var a=this.shoestringData.events[e];if(a&&a.length){var s,i,r=[];for(s=0,i=a.length;s<i;s++)t&&t!==a[s].namespace||void 0!==n&&n!==a[s].originalCallback||(this.removeEventListener(e,a[s].callback,!1),r.push(s));for(s=0,i=r.length;s<i;s++)this.shoestringData.events[e].splice(s,1)}}function u(e,t){for(var n in this.shoestringData.events)f.call(this,n,e,t)}return c.fn.text=function(){return d(this)},c.fn.val=function(r){var e;return void 0!==r?this.each(function(){if("SELECT"===this.tagName){var e,t,n,a=this.options,s=[],i=a.length;for(s[0]=r;i--;)((t=a[i]).selected=0<=c.inArray(t.value,s))&&(e=!0,n=i);this.selectedIndex=e?n:-1}else this.value=r}):"SELECT"===(e=this[0]).tagName?e.selectedIndex<0?"":e.options[e.selectedIndex].value:e.value},c._dimension=function(e,t,n){var a;return void 0===n?(a=t.replace(/^[a-z]/,function(e){return e.toUpperCase()}),e[0]["offset"+a]):(n="string"==typeof n?n:n+"px",e.each(function(){this.style[t]=n}))},c.fn.width=function(e){return c._dimension(this,"width",e)},c.fn.wrapInner=function(t){return this.each(function(){var e=this.innerHTML;this.innerHTML="",c(this).append(c(t).html(e))})},c.fn.bind=function(e,r,u){"function"==typeof r&&(u=r,r=null);var p=e.split(" ");function v(e,t,n){var a;if(!e._namespace||e._namespace===t){e.data=r,e.namespace=e._namespace;var s=function(){return!0};e.isDefaultPrevented=function(){return!1};var i=e.preventDefault;return e.target=n||e.target||e.srcElement,e.preventDefault=i?function(){e.isDefaultPrevented=s,i.call(e)}:function(){e.isDefaultPrevented=s,e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},!1===(a=u.apply(this,[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),a}}return this.each(function(){for(var e,t,n,a,s,i,r,o=this,l=0,c=p.length;l<c;l++){var h=p[l].split("."),d=h[0],f=0<h.length?h[1]:null;e=function(e){return o.ssEventTrigger&&(e._namespace=o.ssEventTrigger._namespace,e._args=o.ssEventTrigger._args,o.ssEventTrigger=null),v.call(o,e,f)},null,r=d,(i=this).shoestringData||(i.shoestringData={}),i.shoestringData.events||(i.shoestringData.events={}),i.shoestringData.loop||(i.shoestringData.loop={}),i.shoestringData.events[r]||(i.shoestringData.events[r]=[]),this.addEventListener(d,e,!1),t=this,n=d,s=void 0,(s={}).isCustomEvent=(a={callfunc:e,isCustomEvent:!1,customEventLoop:null,originalCallback:u,namespace:f}).isCustomEvent,s.callback=a.callfunc,s.originalCallback=a.originalCallback,s.namespace=a.namespace,t.shoestringData.events[n].push(s),a.customEventLoop&&(t.shoestringData.loop[n]=a.customEventLoop)}})},c.fn.on=c.fn.bind,c.fn.unbind=function(e,i){var r=e?e.split(" "):[];return this.each(function(){if(this.shoestringData&&this.shoestringData.events)if(r.length)for(var e,t,n,a=0,s=r.length;a<s;a++)t=(e=r[a].split("."))[0],n=0<e.length?e[1]:null,t?f.call(this,t,n,i):u.call(this,n,i);else u.call(this)})},c.fn.off=c.fn.unbind,c.fn.one=function(e,i){var r=e.split(" ");return this.each(function(){for(var e,a={},t=c(this),n=0,s=r.length;n<s;n++)e=r[n],a[e]=function(e){var t=c(this);for(var n in a)t.unbind(n,a[n]);return i.apply(this,[e].concat(e._args))},t.bind(e,a[e])})},c.fn.triggerHandler=function(e,t){var n,a=e.split(" ")[0],s=this[0];if(l.createEvent&&s.shoestringData&&s.shoestringData.events&&s.shoestringData.events[a]){var i=s.shoestringData.events[a];for(var r in i)i.hasOwnProperty(r)&&((e=l.createEvent("Event")).initEvent(a,!0,!0),(e._args=t).unshift(e),n=i[r].originalCallback.apply(e.target,t))}return n},c.fn.trigger=function(e,r){var o=e.split(" ");return this.each(function(){for(var e,t,n,a=0,s=o.length;a<s;a++){if(t=(e=o[a].split("."))[0],n=0<e.length?e[1]:null,"click"===t&&"INPUT"===this.tagName&&"checkbox"===this.type&&this.click)return this.click(),!1;if(l.createEvent){var i=l.createEvent("Event");i.initEvent(t,!0,!0),i._args=r,i._namespace=n,this.dispatchEvent(i)}}})},c}),function(n){"function"==typeof define&&define.amd?define(["shoestring"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("shoestring"):require("shoestring")(e)),n(t),t}:n(shoestring)}(function(k){"use strict";var e,a,i,n,s,r,o,l,t,c,h,d,N="undefined"!=typeof window?window:this,E={i18n:{modes:["Stack","Swipe","Toggle"],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:"Columns",columnsDialogError:"No eligible columns.",sort:"Sort"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini};E.mustard&&k(document.documentElement).addClass("tablesaw-enhanced"),function(){var t="tablesaw",n="tablesaw-bar",a={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},s={};E.events=a;var e=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=k(e),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.init()};e.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",t+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(t,this),this.$table.trigger(a.create,[this])},e.prototype.getConfig=function(e){var t=k.extend(s,e||{});return k.extend(t,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},e.prototype._getPrimaryHeaderRow=function(){return this.$thead.children().filter("tr").filter(function(){return!k(this).is("[data-tablesaw-ignorerow]")}).eq(0)},e.prototype._getPrimaryHeaderRowIndex=function(e){return(e||this._getPrimaryHeaderRow()).prevAll().length},e.prototype._getPrimaryHeaderCells=function(e){return(e||this._getPrimaryHeaderRow()).find("th")},e.prototype._findPrimaryHeadersForCell=function(e){for(var t=this._getPrimaryHeaderRow(),n=this._getPrimaryHeaderCells(t),a=this._getPrimaryHeaderRowIndex(t),s=[],i=0;i<this.headerMapping.length;i++)if(i!==a)for(var r=0;r<this.headerMapping[i].length;r++)this.headerMapping[i][r]===e&&s.push(n[r]);return s},e.prototype.getRows=function(){var e=this;return this.$table.find("tr").filter(function(){return k(this).closest("table").is(e.$table)})},e.prototype.getBodyRows=function(e){return(e?k(e):this.$tbody).children().filter("tr")},e.prototype.getHeaderCellIndex=function(e){for(var t=this.headerMapping[0],n=0;n<t.length;n++)if(t[n]===e)return n;return-1},e.prototype._initCells=function(){var e=this.getRows(),r=[];e.each(function(e){r[e]=[]}),e.each(function(s){var i=0;k(this).children().each(function(){for(var e=parseInt(this.getAttribute("colspan"),10),t=parseInt(this.getAttribute("rowspan"),10);r[s][i];)i++;if(r[s][i]=this,e)for(var n=0;n<e-1;n++)i++,r[s][i]=this;if(t)for(var a=1;a<t;a++)r[s+a][i]=this;i++})});for(var t=this._getPrimaryHeaderRowIndex(),n=0;n<r[0].length;n++){var a,s=r[t][n],i=0;for(s.cells||(s.cells=[]);i<r.length;)s!==(a=r[i][n])&&(s.cells.push(a),a.headerCell=s),i++}this.headerMapping=r},e.prototype.refresh=function(){this._initCells(),this.$table.trigger(a.refresh,[this])},e.prototype.createToolbar=function(){var e=this.$table.prev().filter("."+n);e.length||(e=k("<div>").addClass(n).insertBefore(this.$table)),this.$toolbar=e,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},e.prototype.destroy=function(){this.$table.prev().filter("."+n).each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var e=this.$table.attr("id");k(document).off("."+e),k(window).off("."+e),this.$table.trigger(a.destroy,[this]),this.$table.removeData(t)},k.fn[t]=function(){return this.each(function(){k(this).data(t)||new e(this)})};var i=k(N.document);i.on("enhance.tablesaw",function(e){E.mustard&&k(e.target).find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]")[t]()});var r,o,l=!1;i.on("scroll.tablesaw",function(){l=!0,N.clearTimeout(r),r=N.setTimeout(function(){l=!1},300)}),k(N).on("resize",function(){l||(N.clearTimeout(o),o=N.setTimeout(function(){i.trigger(a.resize)},150))})}(),a="tablesaw-cell-label",i="tablesaw-cell-content",n=e="tablesaw-stack",s="data-tablesaw-no-labels",r="data-tablesaw-hide-empty",(o=function(e,t){this.tablesaw=t,this.$table=k(e),this.labelless=this.$table.is("["+s+"]"),this.hideempty=this.$table.is("["+r+"]"),this.$table.data(n,this)}).prototype.init=function(){if(this.$table.addClass(e),!this.labelless){var n=this;this.$table.find("th, td").filter(function(){return!k(this).closest("thead").length}).filter(function(){return!(k(this).closest("tr").is("["+s+"]")||n.hideempty&&!k(this).html())}).each(function(){var s=k(document.createElement("b")).addClass(a),e=k(this);k(n.tablesaw._findPrimaryHeadersForCell(this)).each(function(e){var t=k(this.cloneNode(!0)),n=t.find(".tablesaw-sortable-btn");t.find(".tablesaw-sortable-arrow").remove();var a=t.find("[data-tablesaw-checkall]");a.closest("label").remove(),a.length?s=k([]):(0<e&&s.append(document.createTextNode(", ")),s.append(n.length?n[0].childNodes:t[0].childNodes))}),s.length&&!e.find("."+i).length&&e.wrapInner("<span class='"+i+"'></span>");var t=e.find("."+a);t.length?t.replaceWith(s):e.prepend(s)})}},o.prototype.destroy=function(){this.$table.removeClass(e),this.$table.find("."+a).remove(),this.$table.find("."+i).each(function(){k(this).replaceWith(this.childNodes)})},k(document).on(E.events.create,function(e,t){"stack"===t.mode&&new o(t.table,t).init()}).on(E.events.refresh,function(e,t){"stack"===t.mode&&k(t.table).data(n).init()}).on(E.events.destroy,function(e,t){"stack"===t.mode&&k(t.table).data(n).destroy()}),l="tablesawbtn",t={_create:function(){return k(this).each(function(){k(this).trigger("beforecreate."+l)[l]("_init").trigger("create."+l)})},_init:function(){var e=k(this),t=this.getElementsByTagName("select")[0];return t&&k(this).addClass("btn-select")[l]("_select",t),e},_select:function(e){var t=function(e,t){var n,a,s=k(t).find("option"),i=document.createElement("span"),r=!1;if(i.setAttribute("aria-hidden","true"),i.innerHTML="&#160;",s.each(function(){this.selected&&(i.innerHTML=this.text)}),a=e.childNodes,0<s.length){for(var o=0,l=a.length;o<l;o++)(n=a[o])&&"SPAN"===n.nodeName.toUpperCase()&&(e.replaceChild(i,n),r=!0);r||e.insertBefore(i,e.firstChild)}};t(this,e),k(this).on("change refresh",function(){t(this,e)})}},k.fn[l]=function(e,t,n,a){return this.each(function(){return e&&"string"==typeof e?k.fn[l].prototype[e].call(this,t,n,a):k(this).data(l+"active")?k(this):(k(this).data(l+"active",!0),void k.fn[l].prototype._create.call(this))})},k.extend(k.fn[l].prototype,t),c="tablesaw-coltoggle",(h=function(e){this.$table=k(e),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-",toolbar:"tablesaw-bar"},this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(c,this))}).prototype.init=function(){if(this.$table.length){var t,e,n,a,s,i,r=this;this.$table.addClass(this.classes.columnToggleTable),e=(t=this.$table.attr("id"))+"-popup",i=k("<div class='"+this.classes.columnBtnContain+"'></div>"),n=k("<a href='#"+e+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+E.i18n.columnBtnText+"</span></a>"),a=k("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+e+"'></div>"),s=k("<div class='btn-group'></div>");var o,l=!1,c=0;this.$headers.each(function(){var e=k(this),t=e.attr("data-tablesaw-priority"),n=r.$getCells(this);t&&"persist"!==t?(n.addClass(r.classes.priorityPrefix+t),k("<label><input type='checkbox' checked>"+e.text()+"</label>").appendTo(s).children().first().data("tablesaw-header",this),l=!0):c++}),l||s.append("<label>"+E.i18n.columnsDialogError+"</label>"),s.appendTo(a),s.find('input[type="checkbox"]').on("change",function(e){var t=e.target.checked,n=r.getHeaderFromCheckbox(e.target),a=r.$getCells(n);a[t?"removeClass":"addClass"]("tablesaw-cell-hidden"),a[t?"addClass":"removeClass"]("tablesaw-cell-visible"),r.updateColspanIgnoredRows(t),r.$table.trigger("tablesawcolumns")}),n.appendTo(i),i.appendTo(this.$table.prev().filter("."+this.classes.toolbar)),n.on("click.tablesaw",function(e){e.preventDefault(),i.is(".visible")?h():(i.addClass("visible"),n.removeClass("down").addClass("up"),k(document).off("click."+t,h),window.clearTimeout(o),o=window.setTimeout(function(){k(document).on("click."+t,h)},15))}),a.appendTo(i),this.$menu=s,k(window).on(E.events.resize+"."+t,function(){r.refreshToggle(c)}),this.refreshToggle(c)}function h(e){e&&k(e.target).closest("."+r.classes.popup).length||(k(document).off("click."+t),n.removeClass("up").addClass("down"),i.removeClass("visible"))}},h.prototype.updateColspanIgnoredRows=function(t){this.$table.find("["+this.attributes.subrow+"],["+this.attributes.ignorerow+"]").each(function(){var e=k(this).find("td[colspan]").eq(0);!0!==t&&!1!==t||(t=parseInt(e.attr("colspan"),10)+(t?1:-1)),e.attr("colspan",t)})},h.prototype.$getCells=function(e){var t=this;return k(e).add(e.cells).filter(function(){return!k(this).parent().is("["+t.attributes.subrow+"],["+t.attributes.ignorerow+"]")})},h.prototype.getHeaderFromCheckbox=function(e){return k(e).data("tablesaw-header")},h.prototype.refreshToggle=function(e){var n=this,a=e;this.$menu.find("input").each(function(){var e=n.getHeaderFromCheckbox(this),t="table-cell"===n.$getCells(e).eq(0).css("display");(this.checked=t)&&a++}),this.updateColspanIgnoredRows(a)},h.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){k(this).removeClass("tablesaw-cell-hidden").removeClass("tablesaw-cell-visible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},k(document).on(E.events.create,function(e,t){"columntoggle"===t.mode&&new h(t.table).init()}),k(document).on(E.events.destroy,function(e,t){"columntoggle"===t.mode&&k(t.table).data(c).destroy()}),function(){function p(e){var t=[];return k(e.childNodes).each(function(){var e=k(this);e.is("input, select")?t.push(e.val()):e.is(".tablesaw-cell-label")||t.push((e.text()||"").replace(/^\s+|\s+$/g,""))}),t.join("")}var d="tablesaw-sortable",o="data-tablesaw-sortable-col",c="data-tablesaw-sortable-default-col",v="data-tablesaw-sortable-numeric",b="data-tablesaw-subrow",g="data-tablesaw-ignorerow",h={head:d+"-head",ascend:d+"-ascending",descend:d+"-descending",switcher:d+"-switch",tableToolbar:"tablesaw-toolbar",sortButton:d+"-btn"},e={_create:function(e){return k(this).each(function(){if(k(this).data(d+"-init"))return!1;k(this).data(d+"-init",!0).trigger("beforecreate."+d)[d]("_init",e).trigger("create."+d)})},_init:function(){var s,i,e,t,a,n,r=k(this);function l(e){k.each(e,function(e,t){var n=k(t);n.removeAttr(c),n.removeClass(h.ascend),n.removeClass(h.descend)})}r.addClass(d),s=r.children().filter("thead").find("th["+o+"]"),e=s,k.each(e,function(e,t){k(t).addClass(h.head)}),t=s,a=function(e){if(!k(e.target).is("a[href]")){e.stopPropagation();var t=k(e.target).closest("["+o+"]"),n=e.data.col,a=s.index(t[0]);l(t.siblings()),t.is("."+h.descend)||!t.is("."+h.ascend)?(r[d]("sortBy",n,!0),a+="_asc"):(r[d]("sortBy",n),a+="_desc"),i&&i.find("select").val(a).trigger("refresh"),e.preventDefault()}},k.each(t,function(e,t){var n=k("<button class='"+h.sortButton+"'/>");n.on("click",{col:t},a),k(t).wrapInner(n).find("button").append("<span class='tablesaw-sortable-arrow'>")}),n=s,k.each(n,function(e,t){var n=k(t);n.is("["+c+"]")&&(n.is("."+h.descend)||n.addClass(h.ascend))}),r.is("[data-tablesaw-sortable-switch]")&&function(n){i=k("<div>").addClass(h.switcher).addClass(h.tableToolbar);var o=["<label>"+E.i18n.sort+":"];o.push('<span class="btn"><select>'),n.each(function(e){var t=k(this),n=t.is("["+c+"]"),a=t.is("."+h.descend),s=t.is("["+v+"]"),i=0;k(this.cells.slice(0,5)).each(function(){isNaN(parseInt(p(this),10))||i++});var r=5===i;s||t.attr(v,r?"":"false"),o.push("<option"+(n&&!a?" selected":"")+' value="'+e+'_asc">'+t.text()+" "+(r?"&#x2191;":"(A-Z)")+"</option>"),o.push("<option"+(n&&a?" selected":"")+' value="'+e+'_desc">'+t.text()+" "+(r?"&#x2193;":"(Z-A)")+"</option>")}),o.push("</select></span></label>"),i.html(o.join(""));var e=r.prev().filter(".tablesaw-bar"),t=e.children().eq(0);t.length?i.insertBefore(t):i.appendTo(e),i.find(".btn").tablesawbtn(),i.find("select").on("change",function(){var e=k(this).val().split("_"),t=n.eq(e[0]);l(t.siblings()),r[d]("sortBy",t.get(0),"asc"===e[1])})}(s)},sortRows:function(e,t,n,a,s){var i,r,o,l,c,h,d,f=(r=a.cells,o=s,l=[],k.each(r,function(e,t){var n=t.parentNode,a=k(n),s=a.next().filter("["+b+"]"),i=n.parentNode;a.is("["+b+"]")||i===o&&l.push({element:t,cell:p(t),row:n,subrow:s.length?s[0]:null,ignored:a.is("["+g+"]")})}),l),u=k(a).data("tablesaw-sort");return i=!(!u||"function"!=typeof u)&&u(n)||(c=n,h=k(a).is("["+v+"]")&&!k(a).is("["+v+'="false"]'),d=/[^\-\+\d\.]/g,c?function(e,t){return e.ignored||t.ignored?0:h?parseFloat(e.cell.replace(d,""))-parseFloat(t.cell.replace(d,"")):e.cell.toLowerCase()>t.cell.toLowerCase()?1:-1}:function(e,t){return e.ignored||t.ignored?0:h?parseFloat(t.cell.replace(d,""))-parseFloat(e.cell.replace(d,"")):e.cell.toLowerCase()<t.cell.toLowerCase()?1:-1}),function(e){var t,n,a=[];for(t=0,n=e.length;t<n;t++)a.push(e[t].row),e[t].subrow&&a.push(e[t].subrow);return a}(f.sort(i))},makeColDefault:function(e,t){var n=k(e);n.attr(c,"true"),t?(n.removeClass(h.descend),n.addClass(h.ascend)):(n.removeClass(h.ascend),n.addClass(h.descend))},sortBy:function(r,o){var l,c=k(this),h=c.data("tablesaw");h.$tbody.each(function(){var e,t,n,a=k(this),s=h.getBodyRows(this),i=h.headerMapping[0];for(t=0,n=i.length;t<n;t++)if(i[t]===r){l=t;break}for(t=0,n=(e=c[d]("sortRows",s,l,o,r,this)).length;t<n;t++)a.append(e[t])}),c[d]("makeColDefault",r,o),c.trigger("tablesaw-sorted")}};k.fn[d]=function(e){var t,n=Array.prototype.slice.call(arguments,1);return e&&"string"==typeof e?void 0!==(t=k.fn[d].prototype[e].apply(this[0],n))?t:k(this):(k(this).data(d+"-active")||(k(this).data(d+"-active",!0),k.fn[d].prototype._create.call(this,e)),k(this))},k.extend(k.fn[d].prototype,e),k(document).on(E.events.create,function(e,t){t.$table.is("table[data-tablesaw-sortable]")&&t.$table[d]()})}(),function(){var y="tablesaw-bar",C="disabled",$="tablesaw-fix-persist",T="tablesaw-all-cols-visible",x="data-tablesaw-no-touch";function n(c,o){var e=k("<div class='tablesaw-advance'></div>"),n=k("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(e),a=k("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(e),l=c._getPrimaryHeaderCells(),i=l.not('[data-tablesaw-priority="persist"]'),h=[],r=k(document.head||"head"),d=o.attr("id");if(!l.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");function f(e){return k(e.cells).add(e)}function u(e){f(e).removeClass("tablesaw-cell-hidden")}function p(e){f(e).addClass("tablesaw-cell-hidden")}function s(){var e,n="#"+d+".tablesaw-swipe ",a=[],s=o.width(),i=[];if(l.each(function(e){var t;k(this).is('[data-tablesaw-priority="persist"]')&&(t=this.offsetWidth)<.75*s&&(i.push(e+"-"+t),a.push(n+" .tablesaw-cell-persist:nth-child("+(e+1)+") { width: "+t+"px; }"))}),e=i.join("_"),a.length){o.addClass($);var t=k("#"+d+"-persist");t.length&&t.data("tablesaw-hash")===e||(t.remove(),k("<style>"+a.join("\n")+"</style>").attr("id",d+"-persist").data("tablesaw-hash",e).appendTo(r))}}function v(){var a,s=[];return i.each(function(e){var t=k(this),n="none"===t.css("display")||t.is(".tablesaw-cell-hidden");if(n||a){if(n&&a)return s[1]=e,!1}else a=!0,s[0]=e}),s}function b(){var e=v();return[e[1]-1,e[0]-1]}function g(e){return-1<e[1]&&e[1]<i.length}function m(){if(!(e=o.attr("data-tablesaw-swipe-media"))||"matchMedia"in N&&N.matchMedia(e).matches){var e,n=o.parent().width(),a=[],s=0,i=[],r=l.length;l.each(function(e){var t=k(this).is('[data-tablesaw-priority="persist"]');a.push(t),s+=h[e],i.push(s),(t||n<s)&&r--});var t=0===r;l.each(function(e){a[e]?f(this).addClass("tablesaw-cell-persist"):i[e]<=n||t?(t=!1,u(this)):p(this)}),o.removeClass($),k("#"+d+"-persist").remove(),o.trigger("tablesawcolumns")}}function w(e){var t=e?v():b();g(t)&&(isNaN(t[0])&&(t[0]=e?0:i.length-1),s(),p(i.get(t[0])),u(i.get(t[1])),o.trigger("tablesawcolumns"))}function t(e,t){return(e.touches||e.originalEvent.touches)[0][t]}o.addClass("tablesaw-swipe"),l.each(function(){var e=this.offsetWidth;h.push(e)}),e.appendTo(o.prev().filter(".tablesaw-bar")),d||(d="tableswipe-"+Math.round(1e4*Math.random()),o.attr("id",d)),n.add(a).on("click",function(e){w(!!k(e.target).closest(a).length),e.preventDefault()}),o.is("["+x+"]")||o.on("touchstart.swipetoggle",function(e){var s,i,r=t(e,"pageX"),o=t(e,"pageY"),l=window.pageYOffset;k(N).off(E.events.resize,m),k(this).on("touchmove.swipetoggle",function(e){s=t(e,"pageX"),i=t(e,"pageY")}).on("touchend.swipetoggle",function(){var e=c.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),t=e.swipe?e.swipe.verticalThreshold:e.swipeVerticalThreshold,n=e.swipe?e.swipe.horizontalThreshold:e.swipeHorizontalThreshold,a=Math.abs(window.pageYOffset-l)>=t;Math.abs(i-o)>=t||a||(s-r<-1*n&&w(!0),n<s-r&&w(!1)),window.setTimeout(function(){k(N).on(E.events.resize,m)},300),k(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),o.on("tablesawcolumns.swipetoggle",function(){var e=g(b()),t=g(v());n[e?"removeClass":"addClass"](C),a[t?"removeClass":"addClass"](C),n.closest("."+y)[e||t?"removeClass":"addClass"](T)}).on("tablesawnext.swipetoggle",function(){w(!0)}).on("tablesawprev.swipetoggle",function(){w(!1)}).on(E.events.destroy+".swipetoggle",function(){var e=k(this);e.removeClass("tablesaw-swipe"),e.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),k(N).off(E.events.resize,m),e.off(".swipetoggle")}).on(E.events.refresh,function(){h=[],l.each(function(){var e=this.offsetWidth;h.push(e)}),m()}),m(),k(N).on(E.events.resize,m)}k(document).on(E.events.create,function(e,t){"swipe"===t.mode&&n(t,t.$table)})}(),function(){var r={init:"data-tablesaw-minimap"};function n(n){var a=k('<div class="tablesaw-advance minimap">'),s=k('<ul class="tablesaw-advance-dots">').appendTo(a),i="tablesaw-advance-dots-hide";function t(){if(!(e=n.attr(r.init))||N.matchMedia&&N.matchMedia(e).matches){var e;a.css("display","block");var t=s.find("li").removeClass(i);n.find("thead th").each(function(e){"none"===k(this).css("display")&&t.eq(e).addClass(i)})}else a.css("display","none")}n.find("thead th").each(function(){s.append("<li><i></i></li>")}),a.appendTo(n.prev().filter(".tablesaw-bar")),t(),k(N).on(E.events.resize,t),n.on("tablesawcolumns.minimap",function(){t()}).on(E.events.destroy+".minimap",function(){var e=k(this);e.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),k(N).off(E.events.resize,t),e.off(".minimap")})}k(document).on(E.events.create,function(e,t){"swipe"!==t.mode&&"columntoggle"!==t.mode||!t.$table.is("[ "+r.init+"]")||n(t.$table)})}(),d={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-toolbar"},modes:["stack","swipe","columntoggle"],init:function(e){var t,n=k(e),a=n.attr(d.attributes.excludeMode),s=n.prev().filter(".tablesaw-bar"),i=k("<div>").addClass(d.classes.main+" "+d.classes.toolbar),r=["<label>"+E.i18n.columns+":"],o=n.attr("data-tablesaw-mode");r.push('<span class="btn"><select>');for(var l=0,c=d.modes.length;l<c;l++)a&&a.toLowerCase()===d.modes[l]||((t=o===d.modes[l])&&d.modes[l],r.push("<option"+(t?" selected":"")+' value="'+d.modes[l]+'">'+E.i18n.modes[l]+"</option>"));r.push("</select></span></label>"),i.html(r.join(""));var h=s.find(".tablesaw-advance").eq(0);h.length?i.insertBefore(h):i.appendTo(s),i.find(".btn").tablesawbtn(),i.find("select").on("change",d.onModeChange)},onModeChange:function(){var e=k(this),t=e.closest("."+d.classes.main),n=e.closest(".tablesaw-bar").next().eq(0),a=e.val();t.remove(),n.data("tablesaw").destroy(),n.attr("data-tablesaw-mode",a),n.tablesaw()}},k(N.document).on(E.events.create,function(e,t){t.$table.is(d.selectors.init)&&d.init(t.table)}),function(){var t="tablesawCheckAll";function n(e){this.tablesaw=e,this.$table=e.$table,this.checkboxAllSelector='input[type="checkbox"][data-tablesaw-checkall]',this.checkboxSelector='input[type="checkbox"]',this.$checkbox=null,this.$table.data(t)||(this.$table.data(t,this),this.init())}n.prototype.init=function(){this.$checkbox=this.$table.find("thead").find(this.checkboxAllSelector),this.$checkbox.length&&this.addEvents()},n.prototype.addEvents=function(){var a=this;this.$checkbox.on("change",function(){var e=this.checked,t=k(this).closest("th");t.length&&k(t[0].cells).find(a.checkboxSelector).each(function(){this.checked=e})}),this.$table.find("tbody "+this.checkboxSelector).on("change",function(){var t,n=0,e=k(this).closest("th,td");e.length&&(t=e[0].headerCell.cells,k(t).find(a.checkboxSelector).not(a.checkboxAllSelector).each(function(){this.checked&&n++}),k(e[0].headerCell).find(a.checkboxSelector).each(function(){var e=n===t.length;this.checked=e,this.indeterminate=0!==n&&!e}))})},k(document).on(E.events.create,function(e,t){new n(t)})}()});