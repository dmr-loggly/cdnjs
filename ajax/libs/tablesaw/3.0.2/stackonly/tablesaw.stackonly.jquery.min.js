!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t),t}:i(jQuery)}(function(d){"use strict";var e,a,o,i,n,r,s,h="undefined"!=typeof window?window:this,c={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini};d(h.document).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(c.i18n=d.extend(c.i18n,TablesawConfig.i18n||{})),c.i18n.modes=[c.i18n.modeStack,c.i18n.modeSwipe,c.i18n.modeToggle]}),c.mustard&&d(document.documentElement).addClass("tablesaw-enhanced"),function(){var t="tablesaw",i="tablesaw-bar",a={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},n={};c.events=a;var e=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=d(e),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.init()};e.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",t+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(t,this),this.$table.trigger(a.create,[this])},e.prototype.getConfig=function(e){var t=d.extend(n,e||{});return d.extend(t,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},e.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},e.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!d(this).is("[data-tablesaw-ignorerow]")})},e.prototype._getRowIndex=function(e){return e.prevAll().length},e.prototype._getHeaderRowIndeces=function(){var e=this,t=[];return this._getHeaderRows().each(function(){t.push(e._getRowIndex(d(this)))}),t},e.prototype._getPrimaryHeaderCells=function(e){return(e||this._getPrimaryHeaderRow()).find("th")},e.prototype._findPrimaryHeadersForCell=function(e){for(var t=this._getPrimaryHeaderRow(),i=this._getPrimaryHeaderCells(t),a=this._getRowIndex(t),n=[],o=0;o<this.headerMapping.length;o++)if(o!==a)for(var r=0;r<this.headerMapping[o].length;r++)this.headerMapping[o][r]===e&&n.push(i[r]);return n},e.prototype.getRows=function(){var e=this;return this.$table.find("tr").filter(function(){return d(this).closest("table").is(e.$table)})},e.prototype.getBodyRows=function(e){return(e?d(e):this.$tbody).children().filter("tr")},e.prototype.getHeaderCellIndex=function(e){for(var t=this.headerMapping[0],i=0;i<t.length;i++)if(t[i]===e)return i;return-1},e.prototype._initCells=function(){var e=this.getRows(),r=[];e.each(function(e){r[e]=[]}),e.each(function(n){var o=0;d(this).children().each(function(){for(var e=parseInt(this.getAttribute("colspan"),10),t=parseInt(this.getAttribute("rowspan"),10);r[n][o];)o++;if(r[n][o]=this,e)for(var i=0;i<e-1;i++)o++,r[n][o]=this;if(t)for(var a=1;a<t;a++)r[n+a][o]=this;o++})});for(var t=this._getHeaderRowIndeces(),i=0;i<r[0].length;i++)for(var a=0,n=t.length;a<n;a++){var o,s=r[t[a]][i],l=t[a];for(s.cells||(s.cells=[]);l<r.length;)s!==(o=r[l][i])&&s.cells.push(o),l++}this.headerMapping=r},e.prototype.refresh=function(){this._initCells(),this.$table.trigger(a.refresh,[this])},e.prototype._getToolbarAnchor=function(){var e=this.$table.parent();return e.is(".tablesaw-overflow")?e:this.$table},e.prototype._getToolbar=function(e){return e||(e=this._getToolbarAnchor()),e.prev().filter("."+i)},e.prototype.createToolbar=function(){var e=this._getToolbarAnchor(),t=this._getToolbar(e);t.length||(t=d("<div>").addClass(i).insertBefore(e)),this.$toolbar=t,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},e.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var e=this.$table.attr("id");d(document).off("."+e),d(window).off("."+e),this.$table.trigger(a.destroy,[this]),this.$table.removeData(t)},d.fn[t]=function(){return this.each(function(){d(this).data(t)||new e(this)})};var o=d(h.document);o.on("enhance.tablesaw",function(e){c.mustard&&d(e.target).find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]")[t]()});var r,s,l=!1;o.on("scroll.tablesaw",function(){l=!0,h.clearTimeout(r),r=h.setTimeout(function(){l=!1},300)}),d(h).on("resize",function(){l||(h.clearTimeout(s),s=h.setTimeout(function(){o.trigger(a.resize)},150))})}(),a="tablesaw-cell-label",o="tablesaw-cell-content",i=e="tablesaw-stack",n="data-tablesaw-no-labels",r="data-tablesaw-hide-empty",(s=function(e,t){this.tablesaw=t,this.$table=d(e),this.labelless=this.$table.is("["+n+"]"),this.hideempty=this.$table.is("["+r+"]"),this.$table.data(i,this)}).prototype.init=function(){if(this.$table.addClass(e),!this.labelless){var i=this;this.$table.find("th, td").filter(function(){return!d(this).closest("thead").length}).filter(function(){return!(d(this).closest("tr").is("["+n+"]")||i.hideempty&&!d(this).html())}).each(function(){var n=d(document.createElement("b")).addClass(a),e=d(this);d(i.tablesaw._findPrimaryHeadersForCell(this)).each(function(e){var t=d(this.cloneNode(!0)),i=t.find(".tablesaw-sortable-btn");t.find(".tablesaw-sortable-arrow").remove();var a=t.find("[data-tablesaw-checkall]");a.closest("label").remove(),a.length?n=d([]):(0<e&&n.append(document.createTextNode(", ")),n.append(i.length?i[0].childNodes:t[0].childNodes))}),n.length&&!e.find("."+o).length&&e.wrapInner("<span class='"+o+"'></span>");var t=e.find("."+a);t.length?t.replaceWith(n):e.prepend(n)})}},s.prototype.destroy=function(){this.$table.removeClass(e),this.$table.find("."+a).remove(),this.$table.find("."+o).each(function(){d(this).replaceWith(this.childNodes)})},d(document).on(c.events.create,function(e,t){"stack"===t.mode&&new s(t.table,t).init()}).on(c.events.refresh,function(e,t){"stack"===t.mode&&d(t.table).data(i).init()}).on(c.events.destroy,function(e,t){"stack"===t.mode&&d(t.table).data(i).destroy()})});