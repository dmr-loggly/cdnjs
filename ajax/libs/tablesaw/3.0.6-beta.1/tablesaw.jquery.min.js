!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),a(t),t}:a(jQuery)}(function(N){"use strict";var e,s,i,a,n,o,l,r,t,f,c,u,H="undefined"!=typeof window?window:this,S={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini};N(H.document).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(S.i18n=N.extend(S.i18n,TablesawConfig.i18n||{})),S.i18n.modes=[S.i18n.modeStack,S.i18n.modeSwipe,S.i18n.modeToggle]}),S.mustard&&N(document.documentElement).addClass("tablesaw-enhanced"),function(){var t="tablesaw",a="tablesaw-bar",s={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},n={};S.events=s;var e=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=N(e),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()};e.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id",t+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(t,this),this.$table.trigger(s.create,[this])},e.prototype.getConfig=function(e){var t=N.extend(n,e||{});return N.extend(t,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},e.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},e.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!N(this).is("[data-tablesaw-ignorerow]")})},e.prototype._getRowIndex=function(e){return e.prevAll().length},e.prototype._getHeaderRowIndeces=function(){var e=this,t=[];return this._getHeaderRows().each(function(){t.push(e._getRowIndex(N(this)))}),t},e.prototype._getPrimaryHeaderCells=function(e){return(e||this._getPrimaryHeaderRow()).find("th")},e.prototype._$getCells=function(e){var s=this;return N(e).add(e.cells).filter(function(){var e=N(this),t=e.parent(),a=e.is("[colspan]");return!(t.is("["+s.attributes.subrow+"]")||t.is("["+s.attributes.ignorerow+"]")&&a)})},e.prototype._getVisibleColspan=function(){var t=0;return this._getPrimaryHeaderCells().each(function(){var e=N(this);"none"!==e.css("display")&&(t+=parseInt(e.attr("colspan"),10)||1)}),t},e.prototype.getColspanForCell=function(e){var t=this._getVisibleColspan(),a=0;return e.closest("tr").data("tablesaw-rowspanned")&&a++,console.log("ROWSPANNED",e.closest("tr").data("tablesaw-rowspanned")),e.siblings().each(function(){var e=N(this),t=parseInt(e.attr("colspan"),10)||1;"none"!==e.css("display")&&(a+=t)}),console.log(e[0],t,a),t-a},e.prototype.isCellInColumn=function(e,t){return N(e).add(e.cells).filter(function(){return this===t}).length},e.prototype.updateColspanCells=function(s,n,i){var o=this,e=o._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var e=N(this);if("persist"===e.attr("data-tablesaw-priority")){var t=e.closest("tr"),a=parseInt(e.attr("rowspan"),10);1<a&&((t=t.next()).data("tablesaw-rowspanned",!0),a--)}}),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return N(this).closest("tr")[0]!==e[0]}).each(function(){var e=N(this);if(void 0===i||o.isCellInColumn(n,this)){var t=o.getColspanForCell(e);s&&void 0!==i&&(console.log(0===t?"addClass":"removeClass",e),e[0===t?"addClass":"removeClass"](s));var a=parseInt(e.attr("data-tablesaw-maxcolspan"),10);a?a<t&&(t=a):e.attr("data-tablesaw-maxcolspan",e.attr("colspan")),console.log(this,"setting colspan to ",t),e.attr("colspan",t)}})},e.prototype._findPrimaryHeadersForCell=function(e){for(var t=this._getPrimaryHeaderRow(),a=this._getPrimaryHeaderCells(t),s=this._getRowIndex(t),n=[],i=0;i<this.headerMapping.length;i++)if(i!==s)for(var o=0;o<this.headerMapping[i].length;o++)this.headerMapping[i][o]===e&&n.push(a[o]);return n},e.prototype.getRows=function(){var e=this;return this.$table.find("tr").filter(function(){return N(this).closest("table").is(e.$table)})},e.prototype.getBodyRows=function(e){return(e?N(e):this.$tbody).children().filter("tr")},e.prototype.getHeaderCellIndex=function(e){for(var t=this.headerMapping[0],a=0;a<t.length;a++)if(t[a]===e)return a;return-1},e.prototype._initCells=function(){var e=this.getRows(),o=[];e.each(function(e){o[e]=[]}),e.each(function(n){var i=0;N(this).children().each(function(){for(var e=parseInt(this.getAttribute("colspan"),10),t=parseInt(this.getAttribute("rowspan"),10);o[n][i];)i++;if(o[n][i]=this,e)for(var a=0;a<e-1;a++)i++,o[n][i]=this;if(t)for(var s=1;s<t;s++)o[n+s][i]=this;i++})});for(var t=this._getHeaderRowIndeces(),a=0;a<o[0].length;a++)for(var s=0,n=t.length;s<n;s++){var i,l=o[t[s]][a],r=t[s];for(l.cells||(l.cells=[]);r<o.length;)l!==(i=o[r][a])&&l.cells.push(i),r++}this.headerMapping=o},e.prototype.refresh=function(){this._initCells(),this.$table.trigger(s.refresh,[this])},e.prototype._getToolbarAnchor=function(){var e=this.$table.parent();return e.is(".tablesaw-overflow")?e:this.$table},e.prototype._getToolbar=function(e){return e||(e=this._getToolbarAnchor()),e.prev().filter("."+a)},e.prototype.createToolbar=function(){var e=this._getToolbarAnchor(),t=this._getToolbar(e);t.length||(t=N("<div>").addClass(a).insertBefore(e)),this.$toolbar=t,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},e.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var e=this.$table.attr("id");N(document).off("."+e),N(window).off("."+e),this.$table.trigger(s.destroy,[this]),this.$table.removeData(t)},N.fn[t]=function(){return this.each(function(){N(this).data(t)||new e(this)})};var i=N(H.document);i.on("enhance.tablesaw",function(e){S.mustard&&N(e.target).find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]")[t]()});var o,l,r=!1;i.on("scroll.tablesaw",function(){r=!0,H.clearTimeout(o),o=H.setTimeout(function(){r=!1},300)}),N(H).on("resize",function(){r||(H.clearTimeout(l),l=H.setTimeout(function(){i.trigger(s.resize)},150))})}(),s="tablesaw-cell-label",i="tablesaw-cell-content",a=e="tablesaw-stack",n="data-tablesaw-no-labels",o="data-tablesaw-hide-empty",(l=function(e,t){this.tablesaw=t,this.$table=N(e),this.labelless=this.$table.is("["+n+"]"),this.hideempty=this.$table.is("["+o+"]"),this.$table.data(a,this)}).prototype.init=function(){if(this.$table.addClass(e),!this.labelless){var a=this;this.$table.find("th, td").filter(function(){return!N(this).closest("thead").length}).filter(function(){return!(N(this).closest("tr").is("["+n+"]")||a.hideempty&&!N(this).html())}).each(function(){var n=N(document.createElement("b")).addClass(s),e=N(this);N(a.tablesaw._findPrimaryHeadersForCell(this)).each(function(e){var t=N(this.cloneNode(!0)),a=t.find(".tablesaw-sortable-btn");t.find(".tablesaw-sortable-arrow").remove();var s=t.find("[data-tablesaw-checkall]");s.closest("label").remove(),s.length?n=N([]):(0<e&&n.append(document.createTextNode(", ")),n.append(a.length?a[0].childNodes:t[0].childNodes))}),n.length&&!e.find("."+i).length&&e.wrapInner("<span class='"+i+"'></span>");var t=e.find("."+s);t.length?t.replaceWith(n):e.prepend(n)})}},l.prototype.destroy=function(){this.$table.removeClass(e),this.$table.find("."+s).remove(),this.$table.find("."+i).each(function(){N(this).replaceWith(this.childNodes)})},N(document).on(S.events.create,function(e,t){"stack"===t.mode&&new l(t.table,t).init()}).on(S.events.refresh,function(e,t){"stack"===t.mode&&N(t.table).data(a).init()}).on(S.events.destroy,function(e,t){"stack"===t.mode&&N(t.table).data(a).destroy()}),r="tablesawbtn",t={_create:function(){return N(this).each(function(){N(this).trigger("beforecreate."+r)[r]("_init").trigger("create."+r)})},_init:function(){var e=N(this),t=this.getElementsByTagName("select")[0];return t&&N(this).addClass("btn-select tablesaw-btn-select")[r]("_select",t),e},_select:function(e){var t=function(e,t){var a,s,n=N(t).find("option"),i=document.createElement("span"),o=!1;if(i.setAttribute("aria-hidden","true"),i.innerHTML="&#160;",n.each(function(){this.selected&&(i.innerHTML=this.text)}),s=e.childNodes,0<n.length){for(var l=0,r=s.length;l<r;l++)(a=s[l])&&"SPAN"===a.nodeName.toUpperCase()&&(e.replaceChild(i,a),o=!0);o||e.insertBefore(i,e.firstChild)}};t(this,e),N(this).on("change refresh",function(){t(this,e)})}},N.fn[r]=function(e,t,a,s){return this.each(function(){return e&&"string"==typeof e?N.fn[r].prototype[e].call(this,t,a,s):N(this).data(r+"active")?N(this):(N(this).data(r+"active",!0),void N.fn[r].prototype._create.call(this))})},N.extend(N.fn[r].prototype,t),f="tablesaw-coltoggle",(c=function(e){this.$table=N(e),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={btnTarget:"data-tablesaw-columntoggle-btn-target",set:"data-tablesaw-columntoggle-set"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-"},this.set=[],this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(f,this))}).prototype.initSet=function(){var e=this.$table.attr(this.attributes.set);if(e){var t=this.$table[0];this.set=N("table["+this.attributes.set+"='"+e+"']").filter(function(){return this!==t}).get()}},c.prototype.init=function(){if(this.$table.length){var t,e,a,s,n,i,o=this,l=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(e){return"<label><input type='checkbox' checked>"+e+"</label>"}});this.$table.addClass(this.classes.columnToggleTable),e=(t=this.$table.attr("id"))+"-popup",i=N("<div class='"+this.classes.columnBtnContain+"'></div>"),a=N("<a href='#"+e+"' class='btn tablesaw-btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+S.i18n.columnToggleButton+"</span></a>"),s=N("<div class='"+this.classes.popup+"' id='"+e+"'></div>"),n=N("<div class='btn-group'></div>"),this.$popup=s;var r=!1;this.$headers.each(function(){var e=N(this),t=e.attr("data-tablesaw-priority"),a=o.tablesaw._$getCells(this);t&&"persist"!==t&&(a.addClass(o.classes.priorityPrefix+t),N(l.getColumnToggleLabelTemplate(e.text())).appendTo(n).find('input[type="checkbox"]').data("tablesaw-header",this),r=!0)}),r||n.append("<label>"+S.i18n.columnToggleError+"</label>"),n.appendTo(s),n.find('input[type="checkbox"]').on("change",function(t){var a;p(t.target),o.set.length&&(N(o.$popup).find("input[type='checkbox']").each(function(e){if(this===t.target)return a=e,!1}),N(o.set).each(function(){var e=N(this).data(f).$popup.find("input[type='checkbox']").get(a);e&&(e.checked=t.target.checked,p(e))}))}),a.appendTo(i);var c,d=N(this.$table.attr(this.attributes.btnTarget));i.appendTo(d.length?d:this.tablesaw.$toolbar),a.on("click.tablesaw",function(e){e.preventDefault(),i.is(".visible")?b():(i.addClass("visible"),a.removeClass("down").addClass("up"),N(document).off("click."+t,b),window.clearTimeout(c),c=window.setTimeout(function(){N(document).on("click."+t,b)},15))}),s.appendTo(i),this.$menu=n;var h,u=this.$table.closest(".tablesaw-overflow");u.css("-webkit-overflow-scrolling")&&u.on("scroll",function(){var e=N(this);window.clearTimeout(h),h=window.setTimeout(function(){e.css("-webkit-overflow-scrolling","auto"),window.setTimeout(function(){e.css("-webkit-overflow-scrolling","touch")},0)},100)}),N(window).on(S.events.resize+"."+t,function(){o.refreshToggle()}),this.initSet(),this.refreshToggle()}function p(e){var t=e.checked,a=o.getHeaderFromCheckbox(e),s=o.tablesaw._$getCells(a);s[t?"removeClass":"addClass"]("tablesaw-toggle-cellhidden"),s[t?"addClass":"removeClass"]("tablesaw-toggle-cellvisible"),o.updateColspanCells(a,t),o.$table.trigger("tablesawcolumns")}function b(e){e&&N(e.target).closest("."+o.classes.popup).length||(N(document).off("click."+t),a.removeClass("up").addClass("down"),i.removeClass("visible"))}},c.prototype.getHeaderFromCheckbox=function(e){return N(e).data("tablesaw-header")},c.prototype.refreshToggle=function(){var t=this;this.$menu.find("input").each(function(){var e=t.getHeaderFromCheckbox(this);this.checked="table-cell"===t.tablesaw._$getCells(e).eq(0).css("display")}),this.updateColspanCells()},c.prototype.updateColspanCells=function(e,t){this.tablesaw.updateColspanCells("tablesaw-toggle-cellhidden",e,t)},c.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){N(this).removeClass("tablesaw-toggle-cellhidden").removeClass("tablesaw-toggle-cellvisible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},N(document).on(S.events.create,function(e,t){"columntoggle"===t.mode&&new c(t.table).init()}),N(document).on(S.events.destroy,function(e,t){"columntoggle"===t.mode&&N(t.table).data(f).destroy()}),N(document).on(S.events.refresh,function(e,t){"columntoggle"===t.mode&&N(t.table).data(f).refreshPriority()}),function(){function b(e){var t=[];return N(e.childNodes).each(function(){var e=N(this);e.is("input, select")?t.push(e.val()):e.is(".tablesaw-cell-label")||t.push((e.text()||"").replace(/^\s+|\s+$/g,""))}),t.join("")}var h="tablesaw-sortable",l="data-tablesaw-sortable-col",d="data-tablesaw-sortable-default-col",f="data-tablesaw-sortable-numeric",w="data-tablesaw-subrow",g="data-tablesaw-ignorerow",u={head:h+"-head",ascend:h+"-ascending",descend:h+"-descending",switcher:h+"-switch",tableToolbar:"tablesaw-bar-section",sortButton:h+"-btn"},e={_create:function(e){return N(this).each(function(){if(N(this).data(h+"-init"))return!1;N(this).data(h+"-init",!0).trigger("beforecreate."+h)[h]("_init",e).trigger("create."+h)})},_init:function(){var n,i,e,t,s,a,o=N(this),r=o.data("tablesaw");function c(e){N.each(e,function(e,t){var a=N(t);a.removeAttr(d),a.removeClass(u.ascend),a.removeClass(u.descend)})}o.addClass(h),n=o.children().filter("thead").find("th["+l+"]"),e=n,N.each(e,function(e,t){N(t).addClass(u.head)}),t=n,s=function(e){if(!N(e.target).is("a[href]")){e.stopPropagation();var t=N(e.target).closest("["+l+"]"),a=e.data.col,s=n.index(t[0]);c(t.closest("thead").find("th").filter(function(){return this!==t[0]})),t.is("."+u.descend)||!t.is("."+u.ascend)?(o[h]("sortBy",a,!0),s+="_asc"):(o[h]("sortBy",a),s+="_desc"),i&&i.find("select").val(s).trigger("refresh"),e.preventDefault()}},N.each(t,function(e,t){var a=N("<button class='"+u.sortButton+"'/>");a.on("click",{col:t},s),N(t).wrapInner(a).find("button").append("<span class='tablesaw-sortable-arrow'>")}),a=n,N.each(a,function(e,t){var a=N(t);a.is("["+d+"]")&&(a.is("."+u.descend)||a.addClass(u.ascend))}),o.is("[data-tablesaw-sortable-switch]")&&function(a){i=N("<div>").addClass(u.switcher).addClass(u.tableToolbar);var l=["<label>"+S.i18n.sort+":"];l.push('<span class="btn tablesaw-btn"><select>'),a.each(function(e){var t=N(this),a=t.is("["+d+"]"),s=t.is("."+u.descend),n=t.is("["+f+"]"),i=0;N(this.cells.slice(0,5)).each(function(){isNaN(parseInt(b(this),10))||i++});var o=5===i;n||t.attr(f,o?"":"false"),l.push("<option"+(a&&!s?" selected":"")+' value="'+e+'_asc">'+t.text()+" "+(o?"&#x2191;":"(A-Z)")+"</option>"),l.push("<option"+(a&&s?" selected":"")+' value="'+e+'_desc">'+t.text()+" "+(o?"&#x2193;":"(Z-A)")+"</option>")}),l.push("</select></span></label>"),i.html(l.join(""));var e=r.$toolbar.children().eq(0);e.length?i.insertBefore(e):i.appendTo(r.$toolbar),i.find(".tablesaw-btn").tablesawbtn(),i.find("select").on("change",function(){var e=N(this).val().split("_"),t=a.eq(e[0]);c(t.siblings()),o[h]("sortBy",t.get(0),"asc"===e[1])})}(n)},sortRows:function(e,t,a,s,n){var i,o,l,r,c,d,h,u=(o=s.cells,l=n,r=[],N.each(o,function(e,t){for(var a=t.parentNode,s=N(a),n=[],i=s.next();i.is("["+w+"]");)n.push(i[0]),i=i.next();var o=a.parentNode;s.is("["+w+"]")||o===l&&r.push({element:t,cell:b(t),row:a,subrows:n.length?n:null,ignored:s.is("["+g+"]")})}),r),p=N(s).data("tablesaw-sort");return i=!(!p||"function"!=typeof p)&&p(a)||(c=a,d=N(s).is("["+f+"]")&&!N(s).is("["+f+'="false"]'),h=/[^\-\+\d\.]/g,c?function(e,t){return e.ignored||t.ignored?0:d?parseFloat(e.cell.replace(h,""))-parseFloat(t.cell.replace(h,"")):e.cell.toLowerCase()>t.cell.toLowerCase()?1:-1}:function(e,t){return e.ignored||t.ignored?0:d?parseFloat(t.cell.replace(h,""))-parseFloat(e.cell.replace(h,"")):e.cell.toLowerCase()<t.cell.toLowerCase()?1:-1}),function(e){var t,a,s=[];for(t=0,a=e.length;t<a;t++)s.push(e[t].row),e[t].subrows&&s.push(e[t].subrows);return s}(u.sort(i))},makeColDefault:function(e,t){var a=N(e);a.attr(d,"true"),t?(a.removeClass(u.descend),a.addClass(u.ascend)):(a.removeClass(u.ascend),a.addClass(u.descend))},sortBy:function(o,l){var r,c=N(this),d=c.data("tablesaw");d.$tbody.each(function(){var e,t,a,s=N(this),n=d.getBodyRows(this),i=d.headerMapping[0];for(t=0,a=i.length;t<a;t++)if(i[t]===o){r=t;break}for(t=0,a=(e=c[h]("sortRows",n,r,l,o,this)).length;t<a;t++)s.append(e[t])}),c[h]("makeColDefault",o,l),c.trigger("tablesaw-sorted")}};N.fn[h]=function(e){var t,a=Array.prototype.slice.call(arguments,1);return e&&"string"==typeof e?void 0!==(t=N.fn[h].prototype[e].apply(this[0],a))?t:N(this):(N(this).data(h+"-active")||(N(this).data(h+"-active",!0),N.fn[h].prototype._create.call(this,e)),N(this))},N.extend(N.fn[h].prototype,e),N(document).on(S.events.create,function(e,t){t.$table.is("table[data-tablesaw-sortable]")&&t.$table[h]()})}(),function(){var y="disabled",$="tablesaw-fix-persist",k="tablesaw-swipe-cellhidden",T="tablesaw-swipe-cellpersist",x="tablesaw-all-cols-visible",_="data-tablesaw-no-touch";function a(c,r){var d=r.data("tablesaw"),e=N("<div class='tablesaw-advance'></div>"),a=N("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left'>"+S.i18n.swipePreviousColumn+"</a>").appendTo(e),s=N("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right'>"+S.i18n.swipeNextColumn+"</a>").appendTo(e),h=c._getPrimaryHeaderCells(),i=h.not('[data-tablesaw-priority="persist"]'),u=[],o=N(document.head||"head"),p=r.attr("id");if(!h.length)throw new Error("tablesaw swipe: no header cells found.");function t(){u=[],h.each(function(){var e=this.offsetWidth;u.push(e)})}function b(e){d._$getCells(e).removeClass(k)}function f(e){d._$getCells(e).addClass(k)}function n(){var e,a="#"+p+".tablesaw-swipe ",s=[],n=r.width(),i=[];if(h.each(function(e){var t;N(this).is('[data-tablesaw-priority="persist"]')&&(t=this.offsetWidth)<.75*n&&(i.push(e+"-"+t),s.push(a+" ."+T+":nth-child("+(e+1)+") { width: "+t+"px; }"))}),e=i.join("_"),s.length){r.addClass($);var t=N("#"+p+"-persist");t.length&&t.data("tablesaw-hash")===e||(t.remove(),N("<style>"+s.join("\n")+"</style>").attr("id",p+"-persist").data("tablesaw-hash",e).appendTo(o))}}function l(){var s,n=[];return i.each(function(e){var t=N(this),a="none"===t.css("display")||t.is("."+k);if(a||s){if(a&&s)return n[1]=e,!1}else s=!0,n[0]=e}),n}function w(){var e=l();return[e[1]-1,e[0]-1]}function g(e){return-1<e[1]&&e[1]<i.length}function v(){if(!(e=r.attr("data-tablesaw-swipe-media"))||"matchMedia"in H&&H.matchMedia(e).matches){var e,a=r.parent().width(),s=[],n=0,i=[],o=h.length;h.each(function(e){var t=N(this).is('[data-tablesaw-priority="persist"]');s.push(t),n+=u[e],i.push(n),(t||a<n)&&o--});var l=0===o;h.each(function(e){i[e]>a&&f(this)}),h.each(function(e){if(s[e])return t=this,void d._$getCells(t).addClass(T);var t;(i[e]<=a||l)&&(l=!1,b(this),d.updateColspanCells(k,this,!0))}),r.removeClass($),N("#"+p+"-persist").remove(),r.trigger("tablesawcolumns")}}function m(e){var t=e?l():w();g(t)&&(isNaN(t[0])&&(t[0]=e?0:i.length-1),n(),f(i.get(t[0])),d.updateColspanCells(k,i.get(t[0]),!1),b(i.get(t[1])),d.updateColspanCells(k,i.get(t[1]),!0),r.trigger("tablesawcolumns"))}function C(e,t){return(e.touches||e.originalEvent.touches)[0][t]}r.addClass("tablesaw-swipe"),r.find("."+k).removeClass(k),t(),e.appendTo(d.$toolbar),p||(p="tableswipe-"+Math.round(1e4*Math.random()),r.attr("id",p)),a.add(s).on("click",function(e){m(!!N(e.target).closest(s).length),e.preventDefault()}),r.is("["+_+"]")||r.on("touchstart.swipetoggle",function(e){var n,i,o=C(e,"pageX"),l=C(e,"pageY"),r=window.pageYOffset;N(H).off(S.events.resize,v),N(this).on("touchmove.swipetoggle",function(e){n=C(e,"pageX"),i=C(e,"pageY")}).on("touchend.swipetoggle",function(){var e=c.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),t=e.swipe?e.swipe.verticalThreshold:e.swipeVerticalThreshold,a=e.swipe?e.swipe.horizontalThreshold:e.swipeHorizontalThreshold,s=Math.abs(window.pageYOffset-r)>=t;Math.abs(i-l)>=t||s||(n-o<-1*a&&m(!0),a<n-o&&m(!1)),window.setTimeout(function(){N(H).on(S.events.resize,v)},300),N(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),r.on("tablesawcolumns.swipetoggle",function(){var e=g(w()),t=g(l());a[e?"removeClass":"addClass"](y),s[t?"removeClass":"addClass"](y),d.$toolbar[e||t?"removeClass":"addClass"](x)}).on("tablesawnext.swipetoggle",function(){m(!0)}).on("tablesawprev.swipetoggle",function(){m(!1)}).on(S.events.destroy+".swipetoggle",function(){var e=N(this);e.removeClass("tablesaw-swipe"),d.$toolbar.find(".tablesaw-advance").remove(),N(H).off(S.events.resize,v),e.off(".swipetoggle")}).on(S.events.refresh,function(){t(),v()}),v(),N(H).on(S.events.resize,v)}N(document).on(S.events.create,function(e,t){"swipe"===t.mode&&a(t,t.$table)})}(),function(){var l={init:"data-tablesaw-minimap"};function a(a){var t=a.data("tablesaw"),s=N('<div class="tablesaw-advance minimap">'),n=N('<ul class="tablesaw-advance-dots">').appendTo(s),i="tablesaw-advance-dots-hide";function o(){if(!(e=a.attr(l.init))||H.matchMedia&&H.matchMedia(e).matches){var e;s.css("display","block");var t=n.find("li").removeClass(i);a.find("thead th").each(function(e){"none"===N(this).css("display")&&t.eq(e).addClass(i)})}else s.css("display","none")}a.data("tablesaw")._getPrimaryHeaderCells().each(function(){n.append("<li><i></i></li>")}),s.appendTo(t.$toolbar),o(),N(H).on(S.events.resize,o),a.on("tablesawcolumns.minimap",function(){o()}).on(S.events.destroy+".minimap",function(){var e=N(this);t.$toolbar.find(".tablesaw-advance").remove(),N(H).off(S.events.resize,o),e.off(".minimap")})}N(document).on(S.events.create,function(e,t){"swipe"!==t.mode&&"columntoggle"!==t.mode||!t.$table.is("[ "+l.init+"]")||a(t.$table)})}(),u={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-bar-section"},modes:["stack","swipe","columntoggle"],init:function(t){var e,a=N(t),s=a.data("tablesaw"),n=a.attr(u.attributes.excludeMode),i=s.$toolbar,o=N("<div>").addClass(u.classes.main+" "+u.classes.toolbar),l=['<label><span class="abbreviated">'+S.i18n.modeSwitchColumnsAbbreviated+'</span><span class="longform">'+S.i18n.modeSwitchColumns+"</span>:"],r=a.attr("data-tablesaw-mode");l.push('<span class="btn tablesaw-btn"><select>');for(var c=0,d=u.modes.length;c<d;c++)n&&n.toLowerCase()===u.modes[c]||(e=r===u.modes[c],l.push("<option"+(e?" selected":"")+' value="'+u.modes[c]+'">'+S.i18n.modes[c]+"</option>"));l.push("</select></span></label>"),o.html(l.join(""));var h=i.find(".tablesaw-advance").eq(0);h.length?o.insertBefore(h):o.appendTo(i),o.find(".tablesaw-btn").tablesawbtn(),o.find("select").on("change",function(e){return u.onModeChange.call(t,e,N(this).val())})},onModeChange:function(e,t){var a=N(this),s=a.data("tablesaw");s.$toolbar.find("."+u.classes.main).remove(),s.destroy(),a.attr("data-tablesaw-mode",t),a.tablesaw()}},N(H.document).on(S.events.create,function(e,t){t.$table.is(u.selectors.init)&&u.init(t.table)}),function(){var i="tablesawCheckAll";function a(e){this.tablesaw=e,this.$table=e.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,this.$table.data(i)||(this.$table.data(i,this),this.init())}a.prototype._filterCells=function(e){return e.filter(function(){return!N(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)},a.prototype.getCheckboxesForButton=function(e){return this._filterCells(N(N(e).attr(this.attr)))},a.prototype.getCheckboxesForCheckbox=function(e){return this._filterCells(N(N(e).closest("th")[0].cells))},a.prototype.init=function(){var e=this;this.$table.find(this.checkAllSelector).each(function(){N(this).is(e.checkboxSelector)?e.addCheckboxEvents(this):e.addButtonEvents(this)})},a.prototype.addButtonEvents=function(e){var n=this;N(e).on("click",function(e){e.preventDefault();var t,a=n.getCheckboxesForButton(this),s=!0;a.each(function(){this.checked||(s=!1)}),t=!!N(this).is(n.forceCheckedSelector)||!N(this).is(n.forceUncheckedSelector)&&!s,a.each(function(){this.checked=t,N(this).trigger("change."+i)})})},a.prototype.addCheckboxEvents=function(a){var t=this;N(a).on("change",function(){var e=this.checked;t.getCheckboxesForCheckbox(this).each(function(){this.checked=e})});var s=t.getCheckboxesForCheckbox(a);s.on("change."+i,function(){var e=0;s.each(function(){this.checked&&e++});var t=e===s.length;a.checked=t,a.indeterminate=0!==e&&!t})},N(document).on(S.events.create,function(e,t){new a(t)})}()});