"use strict";var Zmodem;function zmodemAttach(t,o,e){e||(e={});var n;function r(){return!!n.get_confirmed_session()||!e.noTerminalWriteOutsideSession}n=new Zmodem.Sentry({to_terminal:function(e){r()&&t.write(String.fromCharCode.apply(String,e))},sender:function(e){o.send(new Uint8Array(e))},on_retract:function(){t.emit("zmodemRetract")},on_detect:function(e){t.emit("zmodemDetect",e)}}),o.binaryType="arraybuffer",o.addEventListener("message",function(e){"string"==typeof e.data?r()&&t.write(e.data):n.consume(e.data)})}function apply(e){Zmodem="object"==typeof window?window.ZModem:{Browser:null},e.prototype.zmodemAttach=zmodemAttach.bind(this,this),e.prototype.zmodemBrowser=Zmodem.Browser}Object.defineProperty(exports,"__esModule",{value:!0}),exports.zmodemAttach=zmodemAttach,exports.apply=apply;