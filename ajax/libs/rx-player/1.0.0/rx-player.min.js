(function(q,l){"object"===typeof exports&&"object"===typeof module?module.exports=l():"function"===typeof define&&define.amd?define(l):"object"===typeof exports?exports.RxPlayer=l():q.RxPlayer=l()})(this,function(){return function(q){function l(m){if(d[m])return d[m].exports;var g=d[m]={exports:{},id:m,loaded:!1};q[m].call(g.exports,g,g.exports,l);g.loaded=!0;return g.exports}var d={};l.m=q;l.c=d;l.p="";return l(0)}([function(q,l,d){q.exports=d(33)},function(q,l){function d(a,b){for(var c=-1,e=a?
a.length:0;++c<e;)if(a[c]===b)return c;return-1}function m(b){return!!b&&"object"==typeof b&&"[object Date]"==a.call(b)||!1}function g(a){return!!a&&"function"==typeof a||!1}function h(a){return"number"==typeof a}function b(a){return!!a&&"object"==typeof a||!1}function c(a){return"string"==typeof a}function p(a){for(var c=arguments,e=1;e<c.length;e++){var k=c[e];if(b(k))for(var d=D(k),f=0,p=d.length;f<p;f++)a[d[f]]=k[d[f]]}return a}function f(a,b){for(var c=a?a.length:0,e=-1,k=Array(c);++e<c;)k[e]=
b(a[e],e);return k}function r(a,b,c){for(var e=a?a.length:0,k=-1;++k<e;)c=b(c,a[k],k);return c}function z(a,b){for(var c=a?a.length:0,e=-1,k=[];++e<c;)b(a[e],e)&&k.push(a[e]);return k}function t(a,b){for(var e in a)if(b.hasOwnProperty(e)){var k=a[e],d=b[e];c(k)||h(k)||m(k)?a[e]=d:x(k)?(k.length=0,C.apply(k,d)):a[e]=t(k,d)}return a}var e=Object.prototype,a=e.toString,k=e.hasOwnProperty,x=Array.isArray,C=Array.prototype.push,D=Object.keys||function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);
return b},e=function(){var a=0;return function(b){b||(b="");return""+b+a++}}();q.exports={chunk:function(a,b){for(var c=[],e=0,k=-1,d=a?a.length:0;++k<d;)c[e]?c[e].length===b?c[++e]=[a[k]]:c[e].push(a[k]):c[e]=[a[k]];return c},compact:function(a){return z(a,function(a){return null!=a})},contains:function(a,b){return-1<d(a,b)},cloneArray:function(a){for(var b=a?a.length:0,c=-1,e=Array(b);++c<b;)e[c]=a[c];return e},cloneObject:function(a){return p({},a)},defaults:function(a,b){for(var c in b)"undefined"==
typeof a[c]&&(a[c]=b[c]);return a},each:function(a,b){for(var c=a?a.length:0,e=-1;++e<c;)b(a[e],e)},extend:p,values:function(a){for(var b=D(a),c=-1,e=b.length,k=Array(e);++c<e;)k[c]=a[b[c]];return k},filter:z,find:function(a,b){for(var c=-1,e=a?a.length:0;++c<e;)if(b(a[c],c))return a[c]},between:function(a,b,c){for(var e=-1,k=a?a.length:0;++e<k;)if(a[e][b]<=c&&a[e+1]&&c<a[e+1][b])return a[e]},findLast:function(a,b){for(var c=a?a.length:0;0<=--c;)if(b(a[c],c))return a[c]},flatten:function(a,b){for(var c=
b?f(a,b):a,e=-1,k=c?c.length:0,d=[];++e<k;){var p=c[e];if(p&&"object"==typeof p&&"number"==typeof p.length){var C=-1,x=p.length,g=d.length;for(d.length+=x;++C<x;)d[g++]=p[C]}else d.push(p)}return d},groupBy:function(a,b){var c;c=g(b)?b:function(a){return a[b]};return r(a,function(a,b){var e=c(b);(x(a[e])?a[e]:a[e]=[]).push(b);return a},{})},identity:function(a){return a},indexOf:d,isArray:x,isDate:m,isFunction:g,isNumber:h,isObject:b,isString:c,isPromise:function(a){return!!a&&"function"==typeof a.then},
isObservable:function(a){return!!a&&"function"==typeof a.subscribe},keys:D,last:function(a){return a[a.length-1]},map:f,memoize:function(a,b){var c=function da(){var c=da.cache,e=b?b.apply(this,arguments):arguments[0];return k.call(c,e)?c[e]:c[e]=a.apply(this,arguments)};c.cache={};return c},noop:function(){},pad:function(a,b){a=a.toString();return a.length>=b?a:(Array(b+1).join("0")+a).slice(-b)},pick:function(a,b){return r(b,function(b,c){c in a&&(b[c]=a[c]);return b},{})},pluck:function(a,b){return f(a,
function(a){return a[b]})},reduce:r,simpleMerge:t,sortedIndex:function(a,b,c){var e=0,k=a?a.length:e;for(b=c(b);e<k;){var d=e+k>>>1;c(a[d])<b?e=d+1:k=d}return e},tryCatch:function(a){try{return a()}catch(b){return b}},uniqueId:e}},function(q,l){function d(g){this.name="AssertionError";this.message=g;Error.captureStackTrace&&Error.captureStackTrace(this,d)}function m(g,h){if(!g)throw new d(h);}d.prototype=Error();m.equal=function(d,h,b){return m(d===h,b)};m.iface=function(d,h,b){m(d,""+h+" should be an object");
for(var c in b)m.equal(typeof d[c],b[c],""+h+" should have property "+c+" as a "+b[c])};q.exports=m},function(q,l,d){d(5);q.exports=d(20)},function(q,l){function d(){}var m={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},g=function(){};d.error=g;d.warn=g;d.info=g;d.debug=g;d.setLevel=function(h){"string"==typeof h&&(h=m[h]);d.error=h>=m.ERROR?console.error.bind(console):g;d.warn=h>=m.WARNING?console.warn.bind(console):g;d.info=h>=m.INFO?console.info.bind(console):g;d.debug=h>=m.DEBUG?console.log.bind(console):
g};q.exports=d},function(q,l,d){l=d(19).Promise;var m=d(20),g=m.Observable,h=m.SingleAssignmentDisposable,m=m.config,b=g.fromEvent,c=g.merge,p=g.timer,f=d(21).getBackedoffDelay,r=d(1),z=r.identity,t=r.isArray,e=r.map,a=r.noop,k=d(22);m.useNativeEvents=!0;m.Promise=l;d=g.prototype;d.log=function(a,b){a||(a="");return this["do"](function(c){return console.log(a,"next",(b||z)(c))},function(b){return console.log(a,"error",b)},function(){return console.log(a,"completed")})};d.each=function(b){return this.subscribe(b,
a)};var x=function(a,b){return a===b};d.changes=function(a){return this.distinctUntilChanged(a,x)};d.customDebounce=function(a,b){var c=this;return g.create(function(e){var d=k(function(a){return e.onNext(a)},a,b),f=c.subscribe(d,function(a){return e.onError(a)},function(){return e.onCompleted()});return function(){d.dispose();f.dispose()}})};d.simpleTimeout=function(a,b){var c=void 0===b?"timeout":b,e=this;return g.create(function(b){var k=new h,d=setTimeout(function(){return b.onError(Error(c))},
a);k.setDisposable(e.subscribe(function(a){clearTimeout(d);b.onNext(a)},function(a){return b.onError(a)},function(a){return b.onCompleted()}));return function(){clearTimeout(d);k.dispose()}})};d.flatMapMaxConcurrent=function(a,b){var c=this;return g.create(function(e){function k(a){var b=p.length;if(b<a)for(a=x.splice(0,a-b),b=0;b<a.length;b++)d(a[b])}function d(a){var b=new h;p.push(b);b.setDisposable(a.subscribe(function(a){return e.onNext(a)},function(a){return e.onError(a)},function(){var a=p.indexOf(b);
0<=a&&p.splice(a,1);k(f)}))}var f=0,p=[],x=[],g=b.subscribe(function(a){var b=f;f=a;a>b&&k(a)},function(a){return e.onError(a)}),m=c.subscribe(function(b){try{b=a(b)}catch(c){return e.onError(c)}x.push(b);k(f)},function(a){return e.onError(a)},function(){return e.onCompleted()});return function(){g.dispose();m.dispose();for(var a=x.length=0;a<p.length;a++)p[a].dispose();p.length=0}})};q.exports={on:function(a,k){return t(k)?c(e(k,function(c){return b(a,c)})):b(a,k)},first:function(a){return a.take(1)},
only:function(a){return g.never().startWith(a)},retryWithBackoff:function(b,c){var e=c.retryDelay,d=c.totalRetry,x=c.shouldRetry,g=c.resetDelay,h=0,m;m=0<g?k(function(){return h=0},g):a;return function F(){for(var a=0,c=arguments.length,k=Array(c);a<c;a++)k[a]=arguments[a];return b.apply(null,k)["catch"](function(a){if(x&&!x(a,h)||h++>=d)throw a;a=f(e,h);return p(a).flatMap(function(){m();return F.apply(null,k)})})}}}},function(q,l,d){function m(b,a){var c,d,f=a.length;c=Infinity;for(d=-Infinity;0<=
--f&&b<c;)c=a.start(f),d=a.end(f);return b>=c?{start:c,end:d}:null}function g(b){return!!b&&"number"===typeof b.length}function h(b,a){return b.start<=a&&a<b.end}function b(b,a){return h(b,a.start)||h(b,a.end)||h(a,b.start)}function c(b,a){return h(b,a.start)&&h(b,a.end)}function p(b,a){return 1E-5>Math.abs(a.start-b.end)||1E-5>Math.abs(a.end-b.start)}function f(b,a,c){var d=Math.min(b.start,a.start);b=Math.max(b.end,a.end);return{start:d,end:b,bitrate:c}}function r(){this.ranges=[];this.length=0}
var z=d(1),t=d(2);r.prototype={start:function(b){return this.ranges[b].start},end:function(b){return this.ranges[b].end},hasRange:function(b,a){for(var c=b+a,d=0;d<this.ranges.length;d++){var f=this.ranges[d],p=f.start,f=f.end;if(1E-5>=p-b&&1E-5>=b-f&&1E-5>=p-c&&1E-5>=c-f)return this.ranges[d]}return null},getRange:function(b){for(var a=0;a<this.ranges.length;a++)if(h(this.ranges[a],b))return this.ranges[a];return null},insert:function(e,a,k){t(0<=a);t(0<k-a);var d=this.ranges;t(a<=k);if(a!=k){e=
{start:a,end:k,bitrate:e};for(a=0;a<d.length;a++){k=d[a];var g=b(e,k),h=p(e,k);if(g||h)if(e.bitrate===k.bitrate)e=f(e,k,k.bitrate),d.splice(a--,1);else if(g)if(c(k,e))d.splice(++a,0,e),g=k.end,k.end=e.start,e={start:e.end,end:g,bitrate:k.bitrate};else if(c(e,k))d.splice(a--,1);else if(k.start<e.start)k.end=e.start;else{k.start=e.end;break}else break;else if(0===a){if(e.end<=d[0].start)break}else if(d[a-1].end<=e.start&&e.end<=k.start)break}d.splice(a,0,e);for(e=0;e<d.length;e++)a=d[e],a.start===a.end&&
d.splice(e++,1);for(e=1;e<d.length;e++)a=d[e-1],k=d[e],a.bitrate===k.bitrate&&p(a,k)&&(a=f(a,k,k.bitrate),d.splice(--e,2,a))}this.length=this.ranges.length;return this.ranges},intersect:function(c){for(var a=this.ranges,k=0;k<a.length;k++){var d=a[k],f;a:{f=d;for(var p=c,g=0;g<p.length;g++)if(b(f,p[g])){f=p[g];break a}f=null}f?(f.start>d.start&&(d.start=f.start),f.end<d.end&&(d.end=f.end)):a.splice(k--,1)}this.length=this.ranges.length;return this.ranges}};q.exports={getRange:m,getGap:function(b,
a){var c=g(a)?m(b,a):a;return c?c.end-b:Infinity},getNextRangeGap:function(b,a){for(var c=-1,d;++c<a.length;){var f=a.start(c);if(f>b){d=f;break}}return null!=d?d-b:Infinity},getLoaded:function(b,a){var c=g(a)?m(b,a):a;return c?b-c.start:0},getSize:function(b,a){var c=g(a)?m(b,a):a;return c?c.end-c.start:0},bufferedToArray:function(b){if(b instanceof r)return z.cloneArray(b.ranges);for(var a=-1,c=b.length,d=Array(c);++a<c;)d[a]={start:b.start(a),end:b.end(a)};return d},BufferedRanges:r}},function(q,
l,d){function m(b){return b&&"function"==typeof b.then?b:a.resolve(b)}function g(b){return function(){var c;try{c=b.apply(this,arguments)}catch(d){return a.reject(d)}return m(c)}}function h(b,c){function d(a){a=void 0===a?{}:a;a.errorCode&&(a={systemCode:a.systemCode,code:a.errorCode.code});this.name="KeySessionError";this.mediaKeyError=a;this.message="MediaKeyError code:"+a.code+" and systemCode:"+a.systemCode}d.prototype=Error();return function(e,k){var f=t.isFunction(c)?c.call(this):this,p=Y(f),
g=ga(f).map(function(a){throw new d(f.error||a);});try{return b.call(this,e,k),G(p,g).take(1).toPromise()}catch(ja){return a.reject(ja)}}}function b(a,b){var c=document.createElement(a.tagName),d="on"+b;if(d in c)return!0;c.setAttribute(d,"return;");return t.isFunction(c[d])}function c(a,b){return t.flatten(a,function(a){return t.map(b||F,function(b){return b+a})})}function p(a,c){return t.find(c,function(c){return b(a,c)})}function f(a,b){var d;a=c(a,b);return function(b){if(b instanceof M){d||(d=
p(b,a));if(d)return V(b,d);e.warn("compat: element <"+b.tagName+"> does not support any of these events: "+a.join(", "));return H()}return da(b,a)}}function r(a,b){if(b instanceof P)return b._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(b);if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);if(a.msSetMediaKeys)return a.msSetMediaKeys(b);throw Error("compat: cannot find setMediaKeys method");}function z(){return!!(J.fullscreenElement||J.mozFullScreenElement||
J.webkitFullscreenElement||J.msFullscreenElement)}var t=d(1),e=d(4),a=d(8),k=d(10);l=d(9);var x=l.bytesToStr,C=l.strToBytes,D=d(2);l=d(3).Observable;var G=l.merge,H=l.never,V=l.fromEvent,X=l.just,da=d(5).on,J=document,E=window,F=["","webkit","moz","ms"],M=E.HTMLElement;d=E.HTMLVideoElement;var S=E.MediaSource||E.MozMediaSource||E.WebKitMediaSource||E.MSMediaSource,I=E.MediaKeys||E.MozMediaKeys||E.WebKitMediaKeys||E.MSMediaKeys;l="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&
/Trident\//.test(navigator.userAgent);var P=t.noop,N;navigator.requestMediaKeySystemAccess&&(N=function(a,b){return navigator.requestMediaKeySystemAccess(a,b)});l=f(l?["progress"]:["loadedmetadata"]);var aa=f(["sourceopen","webkitsourceopen"]),L=f(["encrypted","needkey"]),ma=f(["keymessage","message"]),Y=f(["keyadded","ready"]),ga=f(["keyerror","error"]),ia=f(["keystatuseschange"]),L={onEncrypted:L,onKeyMessage:ma,onKeyStatusesChange:ia,onKeyError:ga};if(!N&&d.prototype.webkitGenerateKeyRequest){var ea=
function(a,b){var c=this;k.call(this);this._vid=a;this._key=b;this._con=G(ma(a),Y(a),ga(a)).subscribe(function(a){return c.trigger(a.type,a)})};ea.prototype=t.extend({},k.prototype,{generateRequest:g(function(a,b){this._vid.webkitGenerateKeyRequest(this._key,b)}),update:h(function(a,b){if(0<=this._key.indexOf("clearkey")){var c=JSON.parse(x(a)),d=C(atob(c.keys[0].k)),c=C(atob(c.keys[0].kid));this._vid.webkitAddKey(this._key,d,c,b)}else this._vid.webkitAddKey(this._key,a,null,b)}),close:g(function(){this._con&&
this._con.dispose();this._vid=this._con=null})});P=function(a){this.ks_=a};P.prototype={_setVideo:function(a){this._vid=a},createSession:function(a){return new ea(this._vid,this.ks_)}};var ua=function(a){var b=J.querySelector("video")||J.createElement("video");return b&&b.canPlayType?!!b.canPlayType("video/mp4",a):!1};N=function(b){return ua(b)?a.resolve({createMediaKeys:function(){return a.resolve(new P(b))}}):a.reject()}}else if(I&&!N){var ja=function(a){k.call(this);this._mk=a};ja.prototype=t.extend(k.prototype,
{generateRequest:g(function(a,b){var c=this;this._ss=this._mk.memCreateSession("video/mp4",b);this._con=G(ma(this._ss),Y(this._ss),ga(this._ss)).subscribe(function(a){return c.trigger(a.type,a)})}),update:h(function(a,b){D(this._ss);this._ss.update(a,b)},function(){return this._ss}),close:g(function(){this._ss&&(this._ss.close(),this._ss=null,this._con.dispose(),this._con=null)})});I.prototype.alwaysRenew=!0;I.prototype.memCreateSession=I.prototype.createSession;I.prototype.createSession=function(){return new ja(this)};
N=function(b){return I.isTypeSupported(b)?a.resolve({createMediaKeys:function(){return a.resolve(new I(b))}}):a.reject()}}I||(ia=function(){throw Error("eme: MediaKeys is not available");},I={create:ia,isTypeSupported:ia});E.WebKitSourceBuffer&&!E.WebKitSourceBuffer.prototype.addEventListener&&(E=E.WebKitSourceBuffer.prototype,t.extend(E,k.prototype),E.__listeners=[],E.appendBuffer=function(a){if(this.updating)throw Error("SourceBuffer updating");this.trigger("updatestart");this.updating=!0;try{this.append(a)}catch(b){this.__emitUpdate("error",
b);return}this.__emitUpdate("update")},E.__emitUpdate=function(a,b){var c=this;setTimeout(function(){c.trigger(a,b);c.updating=!1;c.trigger("updateend")},0)});E=f(["fullscreenchange","FullscreenChange"],F.concat("MS"));q.exports={isEventSupported:b,HTMLVideoElement_:d,MediaSource_:S,requestMediaKeySystemAccess:N,sourceOpen:function(a){return"open"==a.readyState?X():aa(a).take(1)},loadedMetadataEvent:l,isCodecSupported:function(a){return!!S&&S.isTypeSupported(a)},setMediaKeys:function(a,b){return m(r(a,
b))},emeEvents:L,isFullscreen:z,onFullscreenChange:E,requestFullscreen:function(a){if(!z()){if(a.requestFullscreen)return a.requestFullscreen();if(a.msRequestFullscreen)return a.msRequestFullscreen();if(a.mozRequestFullScreen)return a.mozRequestFullScreen();if(a.webkitRequestFullscreen)return a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},exitFullscreen:function(){if(z()){if(J.exitFullscreen)return J.exitFullscreen();if(J.msExitFullscreen)return J.msExitFullscreen();if(J.mozCancelFullScreen)return J.mozCancelFullScreen();
if(J.webkitExitFullscreen)return J.webkitExitFullscreen()}},visibilityEvents:function(){var a;null!=J.hidden?a="":null!=J.mozHidden?a="moz":null!=J.msHidden?a="ms":null!=J.webkitHidden&&(a="webkit");return{hidden:a?a+"Hidden":"hidden",visibilityChange:a+"visibilitychange"}}}},function(q,l,d){q.exports=d(19).Promise},function(q,l,d){function m(b){for(var c=b.length,d=new Uint8Array(c),f=0;f<c;f++)d[f]=b.charCodeAt(f)&255;return d}function g(b,c){c||(c="");for(var d="",f=0;f<b.byteLength;f++)d+=(b[f]>>>
4).toString(16),d+=(b[f]&15).toString(16),c.length&&(d+=c);return d}var h=d(2);q.exports={totalBytes:function(b){for(var c=0,d=0;d<b.length;d++)c+=b[d].byteLength;return c},strToBytes:m,bytesToStr:function(b){return String.fromCharCode.apply(null,b)},bytesToUTF16Str:function(b){for(var c="",d=b.length,f=0;f<d;f+=2)c+=String.fromCharCode(b[f]);return c},hexToBytes:function(b){for(var c=b.length,d=new Uint8Array(c/2),f=0,g=0;f<c;f+=2,g++)d[g]=parseInt(b.substr(f,2),16)&255;return d},bytesToHex:g,concat:function(){for(var b=
arguments.length,c=-1,d=0,f;++c<b;)f=arguments[c],d+="number"===typeof f?f:f.length;for(var d=new Uint8Array(d),g=0,c=-1;++c<b;)f=arguments[c],"number"===typeof f?g+=f:0<f.length&&(d.set(f,g),g+=f.length);return d},be2toi:function(b,c){return(b[0+c]<<8)+(b[1+c]<<0)},be4toi:function(b,c){return 16777216*b[0+c]+65536*b[1+c]+256*b[2+c]+b[3+c]},be8toi:function(b,c){return 4294967296*(16777216*b[0+c]+65536*b[1+c]+256*b[2+c]+b[3+c])+16777216*b[4+c]+65536*b[5+c]+256*b[6+c]+b[7+c]},le2toi:function(b,c){return(b[0+
c]<<0)+(b[1+c]<<8)},le4toi:function(b,c){return b[0+c]+256*b[1+c]+65536*b[2+c]+16777216*b[3+c]},le8toi:function(b,c){return b[0+c]+256*b[1+c]+65536*b[2+c]+16777216*b[3+c]+(b[4+c]+256*b[5+c]+65536*b[6+c]+16777216*b[7+c]*4294967296)},itobe2:function(b){return new Uint8Array([b>>>8&255,b&255])},itobe4:function(b){return new Uint8Array([b>>>24&255,b>>>16&255,b>>>8&255,b&255])},itobe8:function(b){var c=b%4294967296;b=(b-c)/4294967296;return new Uint8Array([b>>>24&255,b>>>16&255,b>>>8&255,b&255,c>>>24&
255,c>>>16&255,c>>>8&255,c&255])},itole2:function(b){return new Uint8Array([b&255,b>>>8&255])},itole4:function(b){return new Uint8Array([b&255,b>>>8&255,b>>>16&255,b>>>24&255])},itole8:function(b){var c=b%4294967296;b=(b-c)/4294967296;return new Uint8Array([b&255,b>>>8&255,b>>>16&255,b>>>24&255,c&255,c>>>8&255,c>>>16&255,c>>>24&255])},guidToUuid:function(b){h.equal(b.length,16,"UUID length should be 16");var c=m(b);b=c[0];var d=c[1],f=c[2],l=c[3],z=c[4],t=c[5],e=c[6],a=c[7],k=c.subarray(8,10),c=c.subarray(10,
16),x=new Uint8Array(16);x[0]=l;x[1]=f;x[2]=d;x[3]=b;x[4]=t;x[5]=z;x[6]=a;x[7]=e;x.set(k,8);x.set(c,10);return g(x)},toBase64URL:function(b){return btoa(b).replace(/\=+$/,"")}}},function(q,l,d){function m(){this.__listeners={}}var g=d(1),h=d(2);m.prototype.addEventListener=function(b,c){h("function"==typeof c,"eventemitter: second argument should be a function");this.__listeners[b]||(this.__listeners[b]=[]);this.__listeners[b].push(c)};m.prototype.removeEventListener=function(b,c){if(0===arguments.length)this.__listeners=
{};else if(this.__listeners.hasOwnProperty(b))if(1===arguments.length)delete this.__listeners[b];else{var d=this.__listeners[b],f=d.indexOf(c);~f&&d.splice(f,1);d.length||delete this.__listeners[b]}};m.prototype.trigger=function(b,c){if(this.__listeners.hasOwnProperty(b)){var d=this.__listeners[b].slice();g.each(d,function(b){try{b(c)}catch(d){console.error(d,d.stack)}})}};m.prototype.on=m.prototype.addEventListener;m.prototype.off=m.prototype.removeEventListener;q.exports=m},function(q,l,d){function m(b,
c){return 0===c.length?b:h.test(c)?c:b+"/"+c}var g=d(1),h=/:\/\//,b=/:\//,c=/\/\.\//g,p=/\/\.\.\//,f=/[^\/]*\/+\.\.\//,r=/\/+/g;q.exports={resolveURL:function(){var d=g.compact(arguments);if(0===d.length)return"";d=g.reduce(d,m,"");for(c.test(d)&&(d=d.replace(c,"/"));p.test(d);)d=d.replace(f,"/");return d.replace(r,"/").replace(b,"://")},parseBaseURL:function(b){var c=b.lastIndexOf("/");return 0<=c?b.substring(0,c+1):b}}},function(q,l){function d(){p=!1;f.length?c=f.concat(c):r=-1;c.length&&m()}function m(){if(!p){var b=
setTimeout(d);p=!0;for(var g=c.length;g;){f=c;for(c=[];++r<g;)f[r].run();r=-1;g=c.length}f=null;p=!1;clearTimeout(b)}}function g(b,c){this.fun=b;this.array=c}function h(){}var b=q.exports={},c=[],p=!1,f,r=-1;b.nextTick=function(b){var d=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)d[e-1]=arguments[e];c.push(new g(b,d));1!==c.length||p||setTimeout(m,0)};g.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];
b.version="";b.versions={};b.on=h;b.addListener=h;b.once=h;b.off=h;b.removeListener=h;b.removeAllListeners=h;b.emit=h;b.binding=function(b){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(b){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},function(q,l){q.exports=function(d){d.webpackPolyfill||(d.deprecate=function(){},d.paths=[],d.children=[],d.webpackPolyfill=1);return d}},function(q,l,d){function m(a){function b(a,e,k){if(a>=
d.length)return k(F());var f=d[a],g=f.keySystem;D(f.keyType,c).then(function(a){return e({keySystem:g,keySystemAccess:a})},function(){return b(a+1,e,k)})}if(S&&M&&!M.alwaysRenew){if(a=p.find(a,function(a){return a.type==S}))return r.resolve({keySystem:a,keySystemAccess:P});throw F();}var c=[{initDataTypes:["cenc"]}],d=p.flatten(a,function(a){return p.map(J[a.type],function(b){return{keyType:b,keySystem:a}})});return new r(function(a,c){return b(0,a,c)})}function g(a,b,c){return c.createMediaKeys().then(function(c){M=
c;S=b.type;f.debug("eme: set mediakeys");return G(a,c).then(function(){return c})})}function h(a,b,c,d){var e=void 0===d?!1:d;f.debug("eme: generate request",b,c,e);return a.generateRequest(b,c).then(function(){e&&a.keyStatuses&&(f.info("eme: store session",a),I.set(c,a));return a})}function b(b){return p.isPromise(b)?a(b):p.isObservable(b)?b:x(b)}function c(c,d,l){function t(a,c,d){var g,p=X(a).map(function(a){a="eme: keyerror event "+a.errorCode+" / "+a.systemCode;f.error(a);throw Error(a);}),h=
da(a).flatMap(function(d){g=d.sessionId;for(var k=a.keyStatuses.values(),p=k.next();!p.done;p=k.next())if(p=E[p.value])throw f.error(p),Error(p);if(!c.onKeyStatusesChange)return f.warn("eme: keystatuseschange event not handled"),e();var ja;try{ja=c.onKeyStatusesChange(d,a)}catch(h){ja=C(h)}return b(ja)["catch"](function(a){var b="eme: onKeyStatusesChange has failed (reason: "+(a&&a.message||"unknown")+")",c=Error(b);c.reason=a;f.error(b);throw c;})}),m=V(a).flatMap(function(a){g=a.sessionId;var d=
a.message;a=a.messageType;var e;try{e=c.getLicense(new Uint8Array(d),a||"licenserequest")}catch(k){e=C(k)}return b(e)["catch"](function(a){var b="eme: getLicense has failed (reason: "+(a&&a.message||"unknown")+")",c=Error(b);c.reason=a;f.error(b);throw c;})}),h=k(m,h).concatMap(function(b){return a.update(b,g)["catch"](function(a){f.error("eme: error on session update",g,a);throw a;})}).map(function(b){return{type:"eme",value:{session:a,name:"session-updated"}}});return k(h,p).tapOnError(function(a){f.debug("eme: remove session from store",
g);I.remove(d)})}l=void 0===l?{}:l;p.each(d,function(a){return z.iface(a,"keySystem",{getLicense:"function",type:"string"})});var D=l.persistedSessions;return H(c).take(1).flatMap(function(b){var e=new Uint8Array(b.initData),k=b.initDataType;f.info("eme: encrypted event",b);return a(m(d)).flatMap(function(b){var d=b.keySystem;b=b.keySystemAccess;f.info("eme: compatible keysystem",d.type);b=g(c,d,b);return a(b).flatMap(function(a){var b=I.get(e);if(b){if(0<b.keyStatuses.length)return f.debug("eme: reuse session"),
x(b);I.remove(e)}f.debug("eme: create session");b=a.createSession("temporary");return h(b,k,e,D)}).flatMap(function(a){return t(a,d,e)})})})}var p=d(1),f=d(4),r=d(8),z=d(2),t=d(9).bytesToHex;l=d(3).Observable;var e=l.empty,a=l.fromPromise,k=l.merge,x=l.just,C=l.throwError;d=d(7);var D=d.requestMediaKeySystemAccess,G=d.setMediaKeys;d=d.emeEvents;var H=d.onEncrypted,V=d.onKeyMessage,X=d.onKeyError,da=d.onKeyStatusesChange,J={clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],
playready:["com.youtube.playready","com.microsoft.playready"]},E={"output-not-allowed":"eme: the required output protection is not available.",expired:"eme: a required key has expired and the content cannot be decrypted.","internal-error":"eme: an unknown error has occurred in the CDM."},F=function(){return Error("eme: could not find a compatible key system")},M,S,I=function(){var a={};return{get:function(b){return a[t(b)]},set:function(b,c){a[t(b)]=c},remove:function(b){return delete a[t(b)]},dispose:function(){a=
{}}}}(),P={createMediaKeys:function(){return r.resolve(M)}};c.onEncrypted=function(a){return H(a)};c.getCurrentKeySystem=function(){return S};c.dispose=function(){S=M=null;I.dispose()};q.exports=c},function(q,l,d){function m(b){this.name="OutOfIndexError";this.type=b;this.message="out of range in index "+b}function g(b){switch(b.indexType){case "template":return c;case "timeline":return p;case "list":return f;case "base":return r;default:throw Error("index-handler: unrecognized indexType "+b.indexType);
}}function h(b){this.representation=b;this.index=b.index;this.handler=new (g(this.index))(this.index)}d(1);var b=d(2),c=d(31),p=d(16),f=d(30),r=d(29);m.prototype=Error();h.prototype.getInitSegment=function(){var b=this.index.initialization||{};return{id:"init_"+this.representation.uid,init:!0,media:b.media,range:b.range}};h.prototype.normalizeRange=function(b,c,d){var a=this.index.presentationTimeOffset||0,k=this.index.timescale||1;c||(c=0);d||(d=0);c=Math.min(c,d);return{time:b*k-a,up:(b+c)*k-a,
to:(b+d)*k-a}};h.prototype.getSegments=function(b,c,d){b=this.normalizeRange(b,c,d);c=b.up;d=b.to;if(!this.handler.checkRange(b.time))throw new m(this.index.indexType);return this.handler.getSegments(c,d)};h.prototype.insertNewSegments=function(b,c){for(var d=[],a=0;a<b.length;a++)this.handler.addSegment(b[a],c)&&d.push(b[a]);return d};h.prototype.setTimescale=function(c){var d=this.index;b("number"==typeof c);b(0<c);return d.timescale!==c?(d.timescale=c,!0):!1};h.prototype.scale=function(c){b(0<
this.index.timescale);return c/this.index.timescale};q.exports={OutOfIndexError:m,IndexHandler:h,getLiveEdge:function(b){var c=b.adaptations.video[0].representations[0].index;return g(c).getLiveEdge(c,b)}}},function(q,l,d){function m(b){var c=b.ts,d=b.d;b=b.r;return-1===d?c:c+(b+1)*d}function g(b){this.index=b;this.timeline=b.timeline}var h=d(1);g.getLiveEdge=function(b,c){var d=m(h.last(b.timeline))/b.timescale-c.suggestedPresentationDelay;return Math.max(b.timeline[0].ts/b.timescale+1,d)};g.prototype.createSegment=
function(b,c,d){return{id:b,media:this.index.media,time:b,number:void 0,range:c,duration:d}};g.prototype.calculateRepeat=function(b,c){var d=b.r||0;0>d&&(d=Math.ceil(((c?c.t:Infinity)-b.ts)/b.d)-1);return d};g.prototype.checkRange=function(b){var c=h.last(this.timeline);if(!c)return!0;0>c.d&&(c={ts:c.ts,d:0,r:c.r});return b<=m(c)};g.prototype.getSegmentIndex=function(b){for(var c=this.timeline,d=0,f=c.length;d<f;){var g=d+f>>>1;c[g].ts<b?d=g+1:f=g}return 0<d?d-1:d};g.prototype.getSegmentNumber=function(b,
c,d){b=c-b;return 0<b?Math.floor(b/d):0};g.prototype.getSegments=function(b,c){var d=this.index.timeline,f=[],g=d.length,h=this.getSegmentIndex(b)-1,m=d.length&&d[0].d||0;a:for(;!(++h>=g);){var e=d[h],a=e.d,k=e.ts,l=e.range,m=Math.max(m,a);if(0>a){k+m<c&&f.push(this.createSegment(k,l,void 0));break}for(var e=this.calculateRepeat(e,d[h+1]),C=this.getSegmentNumber(k,b,a),D;(D=k+C*a)<c;)if(C++<=e)f.push(this.createSegment(D,l,a));else continue a;break}return f};g.prototype.addSegment=function(b,c){var d=
this.timeline,f=d.length,g=d[f-1];if(c&&b.ts===c.ts){var h=b.ts+b.d,l=h-(g.ts+g.d*g.r);if(0>=l)return!1;-1===g.d&&((f=d[f-2])&&f.d===l?(f.r++,d.pop()):g.d=l);d.push({d:-1,ts:h,r:0});return!0}return b.ts>=m(g)?(g.d===b.d?g.r++:d.push({d:b.d,ts:b.ts,r:0}),!0):!1};q.exports=g},function(q,l,d){function m(a,b,d){a.id=a.id||c.uniqueId();var h=a.adaptations,h=h.concat(d||[]),h=c.map(h,function(a){return g(a,b)}),h=c.filter(h,function(a){return 0>e.indexOf(a.type)?(p.warn("not supported adaptation type",
a.type),!1):!0});f(0<h.length);a.adaptations=c.groupBy(h,"type");return a}function g(a,d){a.id=a.id||c.uniqueId();c.defaults(a,d);var e=c.pick(a,t),g=c.map(a.representations,function(a){a.id=a.id||c.uniqueId();a.uid=c.uniqueId();c.defaults(a,e);var b=a.index;f(b);b.timescale||(b.timescale=1);a.bitrate||(a.bitrate=1);"mp4a.40.02"==a.codecs&&(a.codecs="mp4a.40.2");return a}).sort(function(a,b){return a.bitrate-b.bitrate}),h=a.type,m=a.mimeType;m||(m=g[0].mimeType);f(m);a.mimeType=m;h||(h=a.type=m.split("/")[0]);
if("video"==h||"audio"==h)g=c.filter(g,function(a){return z(b(a))});f(0<g.length,"manifest: no compatible representation for this adaptation");a.representations=g;a.bitrates=c.pluck(g,"bitrate");return a}function h(a){c.isArray(a)||(a=[a]);return c.flatten(a,function(a){var b=a.mimeType,d=a.url,e=a.language;a=a.languages;e&&(a=[e]);return c.map(a,function(a){return{id:c.uniqueId(),type:"text",lang:a,mimeType:b,rootURL:d,baseURL:"",representations:[{id:c.uniqueId(),mimeType:b,index:{indexType:"template",
duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})})}function b(a){return""+a.mimeType+';codecs="'+a.codecs+'"'}var c=d(1),p=d(4),f=d(2),r=d(11).parseBaseURL,z=d(7).isCodecSupported,t="profiles width height frameRate audioSamplingRate mimeType segmentProfiles codecs maximumSAPPeriod maxPlayoutRate codingDependency index".split(" "),e=["audio","video","text"];q.exports={normalizeManifest:function(a,b,d){f(b.transportType);b.id=b.id||c.uniqueId();b.type=b.type||"static";var e=b.locations;e&&
e.length||(b.locations=[a]);b.isLive="dynamic"==b.type;var g={rootURL:r(b.locations[0]),baseURL:b.baseURL,isLive:b.isLive};d&&(d=h(d));a=c.map(b.periods,function(a){return m(a,g,d)});c.extend(b,a[0]);b.periods=null;b.duration||(b.duration=Infinity);b.isLive&&(b.suggestedPresentationDelay=b.suggestedPresentationDelay||15,b.availabilityStartTime=b.availabilityStartTime||0);return b},mergeManifestsIndex:function(a,b){var d=a.adaptations,e=b.adaptations,f;for(f in d){var g=e[f];c.each(d[f],function(a,
b){c.simpleMerge(a.index,g[b].index)})}return a},mutateManifestLiveGap:function(a,b){a.isLive&&(a.presentationLiveGap+=void 0===b?1:b)},getCodec:b,getAdaptations:function(a){var d=a.adaptations,e=[];c.each(Object.keys(d),function(a){var c=d[a];e.push({type:a,adaptations:c,codec:b(c[0].representations[0])})});return e},getAvailableSubtitles:function(a){return c.pluck(a.adaptations.text,"lang")},getAvailableLanguages:function(a){return c.pluck(a.adaptations.audio,"lang")}}},function(q,l,d){var m=d(3).Observable;
l=d(6);var g=l.getGap,h=l.getRange;q.exports={timingsSampler:function(b){return m.create(function(c){function d(a){var e=t,f=b.playbackRate,m=b.duration,l=b.currentTime,p=b.readyState,r=b.buffered,z=h(l,r),q=g(l,z);a={name:a,ts:l,range:z,gap:q,duration:m,playback:f,readyState:p,stalled:null,buffered:r};e=e.stalled;f=a.gap;(m=e||!(.5>=f||Infinity===f))||(m=(m=a.range)?.5>=a.duration-(f+m.end):!1);m?e&&Infinity>f&&f>("seeking"==e.name?.5:5)&&(e=null):e={name:a.name,playback:a.playback};a.stalled=e;
t=a;c.onNext(t)}function f(){d("play")}function m(){d("seeking")}function l(){d("seeked")}var t={name:"init",stalled:null},e=setInterval(function(){return d("timeupdate")},1E3);b.addEventListener("play",f);b.addEventListener("seeking",m);b.addEventListener("seeked",l);c.onNext(t);return function(){b.removeEventListener("play",f);b.removeEventListener("seeking",m);b.removeEventListener("seeked",l);clearInterval(e)}}).shareValue({name:"init",stalled:null})},seekingsSampler:function(b){return b.filter(function(b){return"seeking"==
b.name&&(Infinity===b.gap||-2>b.gap)}).skip(1).startWith(!0)},getLiveGap:function(b,c){if(!c.isLive)return Infinity;var d=c.availabilityStartTime,f=c.presentationLiveGap;return Date.now()/1E3-b-(d+f+10)},toWallClockTime:function(b,c){return new Date(1E3*(b+c.availabilityStartTime))},fromWallClockTime:function(b,c){var d=b,f=c.suggestedPresentationDelay,g=c.presentationLiveGap,h=c.timeShiftBufferDepth;"number"!=typeof d&&(d=d.getTime());var m=Date.now(),h=m-1E3*h;return Math.max(Math.min(d,m-1E3*(g+
f)),h)/1E3-c.availabilityStartTime}}},function(q,l,d){var m;(function(g,h,b){(function(){function c(a){return"function"===typeof a}function p(){return function(){g.nextTick(t)}}function f(){var a=0,b=new aa(t),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function r(){var a=new MessageChannel;a.port1.onmessage=t;return function(){a.port2.postMessage(0)}}function q(){return function(){setTimeout(t,1)}}function t(){for(var a=0;a<I;a+=2)(0,L[a])(L[a+
1]),L[a]=void 0,L[a+1]=void 0;I=0}function e(){}function a(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function k(b,c,d){P(function(b){var e=!1,f=a(d,c,function(a){e||(e=!0,c!==a?C(b,a):G(b,a))},function(a){e||(e=!0,H(b,a))},"Settle: "+(b._label||" unknown promise"));!e&&f&&(e=!0,H(b,f))},b)}function x(a,b){1===b._state?G(a,b._result):2===a._state?H(a,b._result):V(b,void 0,function(b){C(a,b)},function(b){H(a,b)})}function C(a,b){if(a===b)H(a,new TypeError("You cannot resolve a promise with itself"));
else if("function"===typeof b||"object"===typeof b&&null!==b)if(b.constructor===a.constructor)x(a,b);else{var d;try{d=b.then}catch(e){Y.error=e,d=Y}d===Y?H(a,Y.error):void 0===d?G(a,b):c(d)?k(a,b,d):G(a,b)}else G(a,b)}function D(a){a._onerror&&a._onerror(a._result);X(a)}function G(a,b){void 0===a._state&&(a._result=b,a._state=1,0!==a._subscribers.length&&P(X,a))}function H(a,b){void 0===a._state&&(a._state=2,a._result=b,P(D,a))}function V(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null;e[f]=
b;e[f+1]=c;e[f+2]=d;0===f&&a._state&&P(X,a)}function X(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,k=0;k<b.length;k+=3)d=b[k],e=b[k+c],d?J(c,d,e,f):e(f);a._subscribers.length=0}}function da(){this.error=null}function J(a,b,d,e){var f=c(d),k,g,h,m;if(f){try{k=d(e)}catch(l){ga.error=l,k=ga}k===ga?(m=!0,g=k.error,k=null):h=!0;if(b===k){H(b,new TypeError("A promises callback cannot return that same promise."));return}}else k=e,h=!0;void 0===b._state&&(f&&h?C(b,k):m?H(b,
g):1===a?G(b,k):2===a&&H(b,k))}function E(a,b){try{b(function(b){C(a,b)},function(b){H(a,b)})}catch(c){H(a,c)}}function F(a,b,c,d){this._instanceConstructor=a;this.promise=new a(e,d);this._abortOnReject=c;this._validateInput(b)?(this._input=b,this._remaining=this.length=b.length,this._init(),0===this.length?G(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&G(this.promise,this._result))):H(this.promise,this._validationError())}function M(a){this._id=ia++;
this._result=this._state=void 0;this._subscribers=[];if(e!==a){if(!c(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof M))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");E(this,a)}}var S=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},I=0,P=function(a,b){L[I]=a;L[I+1]=b;I+=2;
2===I&&ma()},N="undefined"!==typeof window?window:{},aa=N.MutationObserver||N.WebKitMutationObserver,N="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,L=Array(1E3),ma;ma="undefined"!==typeof g&&"[object process]"==={}.toString.call(g)?p():aa?f():N?r():q();var Y=new da,ga=new da;F.prototype._validateInput=function(a){return S(a)};F.prototype._validationError=function(){return Error("Array Methods must be provided an Array")};F.prototype._init=
function(){this._result=Array(this.length)};F.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;void 0===b._state&&d<a;d++)this._eachEntry(c[d],d)};F.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;"object"===typeof a&&null!==a?a.constructor===c&&void 0!==a._state?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(1,b,a))};F.prototype._settledAt=function(a,
b,c){var d=this.promise;void 0===d._state&&(this._remaining--,this._abortOnReject&&2===a?H(d,c):this._result[b]=this._makeResult(a,b,c));0===this._remaining&&G(d,this._result)};F.prototype._makeResult=function(a,b,c){return c};F.prototype._willSettleAt=function(a,b){var c=this;V(a,void 0,function(a){c._settledAt(1,b,a)},function(a){c._settledAt(2,b,a)})};var ia=0;M.all=function(a,b){return(new F(this,a,!0,b)).promise};M.race=function(a,b){function c(a){C(f,a)}function d(a){H(f,a)}var f=new this(e,
b);if(!S(a))return H(f,new TypeError("You must pass an array to race.")),f;for(var k=a.length,g=0;void 0===f._state&&g<k;g++)V(this.resolve(a[g]),void 0,c,d);return f};M.resolve=function(a,b){if(a&&"object"===typeof a&&a.constructor===this)return a;var c=new this(e,b);C(c,a);return c};M.reject=function(a,b){var c=new this(e,b);H(c,a);return c};M.prototype={constructor:M,then:function(a,b){var c=this._state;if(1===c&&!a||2===c&&!b)return this;var d=new this.constructor(e),f=this._result;if(c){var k=
arguments[c-1];P(function(){J(c,d,k,f)})}else V(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}};var ea={Promise:M,polyfill:function(){var a;a="undefined"!==typeof h?h:"undefined"!==typeof window&&window.document?window:self;"Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;new a.Promise(function(a){b=a});return c(b)}()||(a.Promise=M)}};d(43).amd?!(m=function(){return ea}.call(l,d,l,b),void 0!==m&&(b.exports=m)):
"undefined"!==typeof b&&b.exports?b.exports=ea:"undefined"!==typeof this&&(this.ES6Promise=ea)}).call(this)}).call(l,d(12),function(){return this}(),d(13)(q))},function(q,l,d){var m;(function(g,h,b){(function(c){function p(a){for(var b=a.length,n=Array(b),c=0;c<b;c++)n[c]=a[c];return n}function f(){if(ra)try{throw Error();}catch(a){var b=a.stack.split("\n"),b=0<b[0].indexOf("@")?b[1]:b[2];if(b=r(b))return zb=b[0],b[1]}}function r(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b||(b=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a)))return[b[1],
Number(b[2])];if(a=/.*@(.+):(\d+)$/.exec(a))return[a[1],Number(a[2])]}function q(a,b){var n=-1;var c=a,d=[];if(Pb(c)){va.nonEnumArgs&&c.length&&$a(c)&&(c=Qb.call(c));var e=va.enumPrototypes&&"function"==typeof c,f=va.enumErrorProps&&(c===ab||c instanceof Error),k;for(k in c)e&&"prototype"==k||f&&("message"==k||"name"==k)||d.push(k);if(va.nonEnumShadows&&c!==Ab){k=c.constructor;e=-1;f=Rb;if(c===(k&&k.prototype))var g=c===Sb?"[object String]":c===ab?"[object Error]":Ca.call(c),g=ya[g];for(;++e<f;)k=
Bb[e],g&&g[k]||!Ka.call(c,k)||d.push(k)}}for(c=d.length;++n<c&&(g=d[n],!1!==b(a[g],g,a)););return a}function t(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function e(a,b,n,c){if(a===b)return 0!==a||1/a==1/b;var d=typeof a,ba=typeof b;if(a===a&&(null==a||null==b||"function"!=d&&"object"!=d&&"function"!=ba&&"object"!=ba))return!1;ba=Ca.call(a);d=Ca.call(b);"[object Arguments]"==ba&&(ba="[object Object]");"[object Arguments]"==d&&(d="[object Object]");if(ba!=d)return!1;switch(ba){case "[object Boolean]":case "[object Date]":return+a==
+b;case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object RegExp]":case "[object String]":return a==String(b)}d="[object Array]"==ba;if(!d){if("[object Object]"!=ba||!va.nodeClass&&(t(a)||t(b)))return!1;var ba=!va.argsObject&&$a(a)?Object:a.constructor,f=!va.argsObject&&$a(b)?Object:b.constructor;if(!(ba==f||Ka.call(a,"constructor")&&Ka.call(b,"constructor")||T(ba)&&ba instanceof ba&&T(f)&&f instanceof f)&&"constructor"in a&&"constructor"in b)return!1}n||(n=[]);c||(c=[]);for(ba=
n.length;ba--;)if(n[ba]==a)return c[ba]==b;var k=0,g=!0;n.push(a);c.push(b);if(d){if(ba=a.length,k=b.length,g=k==ba)for(;k--&&(g=e(a[k],b[k],n,c)););}else q(b,function(b,A,d){if(Ka.call(d,A))return k++,g=Ka.call(a,A)&&e(a[A],b,n,c)}),g&&q(a,function(a,b,w){if(Ka.call(w,b))return g=-1<--k});n.pop();c.pop();return g}function a(){try{return Cb.apply(this,arguments)}catch(a){return ka.e=a,ka}}function k(b){if(!T(b))throw new TypeError("fn must be a function");Cb=b;return a}function x(a,b){for(var n=Array(a),
c=0;c<a;c++)n[c]=b();return n}function C(a,b){this.id=a;this.value=b}function D(a){this.observer=a;this.a=[];this.isStopped=!1}function G(a){this._s=s}function H(a){this._s=s;this._l=s.length;this._i=0}function V(a){this._a=a}function X(a){this._a=a;a=+a.length;if(isNaN(a))a=0;else if(0!==a&&"number"===typeof a&&K.isFinite(a)){var b;b=+a;b=0===b?b:isNaN(b)?b:0>b?-1:1;a=b*Math.floor(Math.abs(a));a=0>=a?0:a>Db?Db:a}this._l=a;this._i=0}function da(a){var b=a[ha];if(!b&&"string"===typeof a)return a=new G(a),
a[ha]();if(!b&&a.length!==c)return a=new V(a),a[ha]();if(!b)throw new TypeError("Object is not iterable");return a[ha]()}function J(a,b){this.observer=a;this.parent=b}function E(a,b){Z(a)||(a=sa);return new bb(b,a)}function F(a,b){this.observer=a;this.parent=b}function M(a,b){this.observer=a;this.parent=b}function S(a,b){return new y(function(n){var c=new Q,d=new ta;d.setDisposable(c);c.setDisposable(a.subscribe(function(a){n.onNext(a)},function(a){try{var w=b(a)}catch(c){return n.onError(c)}W(w)&&
(w=ca(w));a=new Q;d.setDisposable(a);a.setDisposable(w.subscribe(n))},function(a){n.onCompleted(a)}));return d},a)}function I(a,b){var n=this;return new y(function(c){var d=0,e=a.length;return n.subscribe(function(n){if(d<e){var f=a[d++],k;try{k=b(n,f)}catch(g){return c.onError(g)}c.onNext(k)}else c.onCompleted()},function(a){c.onError(a)},function(){c.onCompleted()})},n)}function P(){return!1}function N(){return[]}function aa(a,b,n){var c=Da(b,n,3);return a.map(function(b,A){var n=c(b,A,a);W(n)&&
(n=ca(n));(cb(n)||db(n))&&(n=eb(n));return n}).concatAll()}function L(a,b,n){this.observer=a;this.selector=b;this.source=n;this.i=0;this.isStopped=!1}function ma(a,b,n){var c=Da(b,n,3);return a.map(function(b,n){var A=c(b,n,a);W(A)&&(A=ca(A));(cb(A)||db(A))&&(A=eb(A));return A}).mergeAll()}function Y(a,b,n){this.observer=a;this.predicate=b;this.source=n;this.i=0;this.isStopped=!1}function ga(a,b,n){if(a.addEventListener)return a.addEventListener(b,n,!1),oa(function(){a.removeEventListener(b,n,!1)});
throw Error("No listener found");}function ia(a,b,n){var c=new R;if("[object NodeList]"===Object.prototype.toString.call(a))for(var d=0,e=a.length;d<e;d++)c.add(ia(a.item(d),b,n));else a&&c.add(ga(a,b,n));return c}function ea(a,b){return new y(function(n){return b.scheduleWithAbsolute(a,function(){n.onNext(0);n.onCompleted()})})}function ua(a,b,n){return new y(function(c){var d=a,e=nb(b);return n.scheduleRecursiveWithAbsoluteAndState(0,d,function(a,b){if(0<e){var w=n.now();d+=e;d<=w&&(d=w+e)}c.onNext(a);
b(a+1,d)})})}function ja(a,b){return new y(function(n){return b.scheduleWithRelative(nb(a),function(){n.onNext(0);n.onCompleted()})})}function Ma(a,b,n){return a===b?new y(function(a){return n.schedulePeriodicWithState(0,b,function(b){a.onNext(b);return b+1})}):ob(function(){return ua(n.now()+a,b,n)})}function Xa(a,b,n){return new y(function(c){var d=!1,e=new ta,f=null,k=[],g=!1,h;h=a.materialize().timestamp(n).subscribe(function(a){"E"===a.value.kind?(k=[],k.push(a),f=a.value.exception,a=!g):(k.push({value:a.value,
timestamp:a.timestamp+b}),a=!d,d=!0);if(a)if(null!==f)c.onError(f);else a=new Q,e.setDisposable(a),a.setDisposable(n.scheduleRecursiveWithRelative(b,function(a){var b,w,A;if(null===f){g=!0;do b=null,0<k.length&&0>=k[0].timestamp-n.now()&&(b=k.shift().value),null!==b&&b.accept(c);while(null!==b);A=!1;w=0;0<k.length?(A=!0,w=Math.max(0,k[0].timestamp-n.now())):d=!1;b=f;g=!1;if(null!==b)c.onError(b);else A&&a(w)}}))});return new R(h,e)},a)}function lb(a,b,n){return ob(function(){return Xa(a,b-n.now(),
n)})}function Ya(a,b){return new y(function(n){function c(){f&&(f=!1,n.onNext(e));d&&n.onCompleted()}var d,e,f;return new R(a.subscribe(function(a){f=!0;e=a},n.onError.bind(n),function(){d=!0}),b.subscribe(c,n.onError.bind(n),c))},a)}function mb(a,b,n){return new y(function(c){function d(a,b){g[b]=a;var w;e[b]=!0;if(f||(f=e.every(wa))){if(h){c.onError(h);return}try{w=n.apply(null,g)}catch(A){c.onError(A);return}c.onNext(w)}if(k&&g[1])c.onCompleted()}var e=[!1,!1],f=!1,k=!1,g=Array(2),h;return new R(a.subscribe(function(a){d(a,
0)},function(a){if(g[1])c.onError(a);else h=a},function(){k=!0;g[1]&&c.onCompleted()}),b.subscribe(function(a){d(a,1)},function(a){c.onError(a)},function(){k=!0;d(!0,1)}))},a)}var Ja={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},K=Ja[typeof window]&&window||this,Ra=Ja[typeof l]&&l&&!l.nodeType&&l,Sa=Ja[typeof g]&&g&&!g.nodeType&&g,Za=Sa&&Sa.exports===Ra&&Ra,xa=Ja[typeof h]&&h;!xa||xa.global!==xa&&xa.window!==xa||(K=xa);var v={internals:{},config:{Promise:K.Promise},helpers:{}},
U=v.helpers.noop=function(){};v.helpers.notDefined=function(a){return"undefined"===typeof a};var wa=v.helpers.identity=function(a){return a};v.helpers.pluck=function(a){return function(b){return b[a]}};v.helpers.just=function(a){return function(){return a}};var Aa=v.helpers.defaultNow=Date.now,pb=v.helpers.defaultComparer=function(a,b){return Tb(a,b)},La=v.helpers.defaultSubComparer=function(a,b){return a>b?1:a<b?-1:0};v.helpers.defaultKeySerializer=function(a){return a.toString()};var qb=v.helpers.defaultError=
function(a){throw a;},W=v.helpers.isPromise=function(a){return!!a&&"function"===typeof a.then};v.helpers.asArray=function(){return Array.prototype.slice.call(arguments)};v.helpers.not=function(a){return!a};var T=v.helpers.isFunction=function(){var a=function(a){return"function"==typeof a||!1};a(/x/)&&(a=function(a){return"function"==typeof a&&"[object Function]"==Ca.call(a)});return a}(),ra=v.config.longStackSupport=!1;try{throw Error();}catch(Na){ra=!!Na.stack}var Ub=f(),zb;(v.EmptyError=function(){this.message=
"Sequence contains no elements.";Error.call(this)}).prototype=Error.prototype;var Eb=v.ObjectDisposedError=function(){this.message="Object has been disposed";Error.call(this)};Eb.prototype=Error.prototype;var Ta=v.ArgumentOutOfRangeError=function(){this.message="Argument out of range";Error.call(this)};Ta.prototype=Error.prototype;var Ua=v.NotSupportedError=function(a){this.message=a||"This operation is not supported";Error.call(this)};Ua.prototype=Error.prototype;var Fb=v.NotImplementedError=function(a){this.message=
a||"This operation is not implemented";Error.call(this)};Fb.prototype=Error.prototype;var fb=v.helpers.notImplemented=function(){throw new Fb;},gb=v.helpers.notSupported=function(){throw new Ua;},ha="function"===typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";K.Set&&"function"===typeof(new K.Set)["@@iterator"]&&(ha="@@iterator");var hb=v.doneEnumerator={done:!0,value:c},db=v.helpers.isIterable=function(a){return a[ha]!==c},cb=v.helpers.isArrayLike=function(a){return a&&a.length!==c};v.helpers.iterator=
ha;var Da=v.internals.bindCallback=function(a,b,n){if("undefined"===typeof b)return a;switch(n){case 0:return function(){return a.call(b)};case 1:return function(n){return a.call(b,n)};case 2:return function(n,c){return a.call(b,n,c)};case 3:return function(n,c,d){return a.call(b,n,c,d)}}return function(){return a.apply(b,arguments)}},Bb="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),Rb=Bb.length,Ca=Object.prototype.toString,Ka=Object.prototype.hasOwnProperty,
Vb="[object Arguments]"==Ca.call(arguments),ab=Error.prototype,Ab=Object.prototype,Sb=String.prototype,rb=Ab.propertyIsEnumerable;try{Ca.call(document)}catch(Fc){}var ya={};ya["[object Array]"]=ya["[object Date]"]=ya["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0};ya["[object Boolean]"]=ya["[object String]"]={constructor:!0,toString:!0,valueOf:!0};ya["[object Error]"]=ya["[object Function]"]=ya["[object RegExp]"]={constructor:!0,toString:!0};ya["[object Object]"]={constructor:!0};
var va={};(function(){var a=function(){this.x=1},b=[];a.prototype={valueOf:1,y:1};for(var n in new a)b.push(n);for(n in arguments);va.enumErrorProps=rb.call(ab,"message")||rb.call(ab,"name");va.enumPrototypes=rb.call(a,"prototype");va.nonEnumArgs=0!=n;va.nonEnumShadows=!/valueOf/.test(b)})(1);var Pb=v.internals.isObject=function(a){var b=typeof a;return a&&("function"==b||"object"==b)||!1},$a=function(a){return a&&"object"==typeof a?"[object Arguments]"==Ca.call(a):!1};Vb||($a=function(a){return a&&
"object"==typeof a?Ka.call(a,"callee"):!1});var Tb=v.internals.isEqual=function(a,b){return e(a,b,[],[])},ka={e:{}},Cb,Qb=Array.prototype.slice,O=this.inherits=v.internals.inherits=function(a,b){function n(){this.constructor=a}n.prototype=b.prototype;a.prototype=new n},Oa=v.internals.addProperties=function(a){for(var b=[],n=1,c=arguments.length;n<c;n++)b.push(arguments[n]);n=0;for(c=b.length;n<c;n++){var d=b[n],e;for(e in d)a[e]=d[e]}};v.internals.addRef=function(a,b){return new y(function(n){return new R(b.getDisposable(),
a.subscribe(n))})};C.prototype.compareTo=function(a){var b=this.value.compareTo(a.value);0===b&&(b=this.id-a.id);return b};var ib=v.internals.PriorityQueue=function(a){this.items=Array(a);this.length=0},Ea=ib.prototype;Ea.isHigherPriority=function(a,b){return 0>this.items[a].compareTo(this.items[b])};Ea.percolate=function(a){if(!(a>=this.length||0>a)){var b=a-1>>1;if(!(0>b||b===a)&&this.isHigherPriority(a,b)){var n=this.items[a];this.items[a]=this.items[b];this.items[b]=n;this.percolate(b)}}};Ea.heapify=
function(a){+a||(a=0);if(!(a>=this.length||0>a)){var b=2*a+1,n=2*a+2,c=a;b<this.length&&this.isHigherPriority(b,c)&&(c=b);n<this.length&&this.isHigherPriority(n,c)&&(c=n);c!==a&&(b=this.items[a],this.items[a]=this.items[c],this.items[c]=b,this.heapify(c))}};Ea.peek=function(){return this.items[0].value};Ea.removeAt=function(a){this.items[a]=this.items[--this.length];this.items[this.length]=c;this.heapify()};Ea.dequeue=function(){var a=this.peek();this.removeAt(0);return a};Ea.enqueue=function(a){var b=
this.length++;this.items[b]=new C(ib.count++,a);this.percolate(b)};Ea.remove=function(a){for(var b=0;b<this.length;b++)if(this.items[b].value===a)return this.removeAt(b),!0;return!1};ib.count=0;var R=v.CompositeDisposable=function(){var a=[],b,c;if(Array.isArray(arguments[0]))a=arguments[0],c=a.length;else for(c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];for(b=0;b<c;b++)if(!Wb(a[b]))throw new TypeError("Not a disposable");this.disposables=a;this.isDisposed=!1;this.length=a.length},
sb=R.prototype;sb.add=function(a){this.isDisposed?a.dispose():(this.disposables.push(a),this.length++)};sb.remove=function(a){var b=!1;if(!this.isDisposed){var c=this.disposables.indexOf(a);-1!==c&&(b=!0,this.disposables.splice(c,1),this.length--,a.dispose())}return b};sb.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var a=this.disposables.length,b=Array(a),c=0;c<a;c++)b[c]=this.disposables[c];this.disposables=[];for(c=this.length=0;c<a;c++)b[c].dispose()}};var Pa=v.Disposable=function(a){this.isDisposed=
!1;this.action=a||U};Pa.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var oa=Pa.create=function(a){return new Pa(a)},la=Pa.empty={dispose:U},Wb=Pa.isDisposable=function(a){return a&&T(a.dispose)},fa=Pa.checkDisposed=function(a){if(a.isDisposed)throw new Eb;},Q=v.SingleAssignmentDisposable=function(){this.isDisposed=!1;this.current=null};Q.prototype.getDisposable=function(){return this.current};Q.prototype.setDisposable=function(a){if(this.current)throw Error("Disposable has already been assigned");
var b=this.isDisposed;!b&&(this.current=a);b&&a&&a.dispose()};Q.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.current;this.current=null}a&&a.dispose()};var ta=v.SerialDisposable=function(){this.isDisposed=!1;this.current=null};ta.prototype.getDisposable=function(){return this.current};ta.prototype.setDisposable=function(a){var b=this.isDisposed;if(!b){var c=this.current;this.current=a}c&&c.dispose();b&&a&&a.dispose()};ta.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=
!0;var a=this.current;this.current=null}a&&a.dispose()};v.RefCountDisposable=function(){function a(b){this.disposable=b;this.disposable.count++;this.isInnerDisposed=!1}function b(a){this.underlyingDisposable=a;this.isPrimaryDisposed=this.isDisposed=!1;this.count=0}a.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))};
b.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))};b.prototype.getDisposable=function(){return this.isDisposed?la:new a(this)};return b}();var Va=v.internals.ScheduledItem=function(a,b,c,d,e){this.scheduler=a;this.state=b;this.action=c;this.dueTime=d;this.comparer=e||La;this.disposable=new Q};Va.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())};Va.prototype.compareTo=
function(a){return this.comparer(this.dueTime,a.dueTime)};Va.prototype.isCancelled=function(){return this.disposable.isDisposed};Va.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var pa=v.Scheduler=function(){function a(b,c,n,d){this.now=b;this._schedule=c;this._scheduleRelative=n;this._scheduleAbsolute=d}function b(a,c){c();return la}a.isScheduler=function(b){return b instanceof a};var c=a.prototype;c.schedule=function(a){return this._schedule(a,b)};c.scheduleWithState=
function(a,b){return this._schedule(a,b)};c.scheduleWithRelative=function(a,c){return this._scheduleRelative(c,a,b)};c.scheduleWithRelativeAndState=function(a,b,c){return this._scheduleRelative(a,b,c)};c.scheduleWithAbsolute=function(a,c){return this._scheduleAbsolute(c,a,b)};c.scheduleWithAbsoluteAndState=function(a,b,c){return this._scheduleAbsolute(a,b,c)};a.now=Aa;a.normalize=function(a){0>a&&(a=0);return a};return a}(),nb=pa.normalize,Z=pa.isScheduler;(function(a){function b(a,c){function n(b){A(b,
function(b){var c=!1,d=!1,A=a.scheduleWithState(b,function(a,b){c?w.remove(A):d=!0;n(b);return la});d||(w.add(A),c=!0)})}var d=c[0],A=c[1],w=new R;n(d);return w}function c(a,b,n){function d(b){w(b,function(b,c){var A=!1,w=!1,e=a[n](b,c,function(a,b){A?na.remove(e):w=!0;d(b);return la});w||(na.add(e),A=!0)})}var A=b[0],w=b[1],na=new R;d(A);return na}function d(a,b){a(function(c){b(a,c)})}a.scheduleRecursive=function(a){return this.scheduleRecursiveWithState(a,function(a,b){a(function(){b(a)})})};a.scheduleRecursiveWithState=
function(a,c){return this.scheduleWithState([a,c],b)};a.scheduleRecursiveWithRelative=function(a,b){return this.scheduleRecursiveWithRelativeAndState(b,a,d)};a.scheduleRecursiveWithRelativeAndState=function(a,b,d){return this._scheduleRelative([a,d],b,function(a,b){return c(a,b,"scheduleWithRelativeAndState")})};a.scheduleRecursiveWithAbsolute=function(a,b){return this.scheduleRecursiveWithAbsoluteAndState(b,a,d)};a.scheduleRecursiveWithAbsoluteAndState=function(a,b,d){return this._scheduleAbsolute([a,
d],b,function(a,b){return c(a,b,"scheduleWithAbsoluteAndState")})}})(pa.prototype);(function(a){pa.prototype.schedulePeriodic=function(a,b){return this.schedulePeriodicWithState(null,a,b)};pa.prototype.schedulePeriodicWithState=function(a,b,c){if("undefined"===typeof K.setInterval)throw new Ua;b=nb(b);var d=a,w=K.setInterval(function(){d=c(d)},b);return oa(function(){K.clearInterval(w)})}})(pa.prototype);var za=pa.immediate=function(){return new pa(Aa,function(a,b){return b(this,a)},gb,gb)}(),sa=
pa.currentThread=function(){function a(){for(;0<b.length;){var c=b.dequeue();!c.isCancelled()&&c.invoke()}}var b,c=new pa(Aa,function(c,n){var d=new Va(this,c,n,this.now());if(b)b.enqueue(d);else{b=new ib(4);b.enqueue(d);var e=k(a)();b=null;if(e===ka)throw e.e;}return d.disposable},gb,gb);c.scheduleRequired=function(){return!b};return c}();v.internals.SchedulePeriodicRecursive=function(){function a(b,c){c(0,this._period);try{this._state=this._action(this._state)}catch(d){throw this._cancel.dispose(),
d;}}function b(a,c,d,A){this._scheduler=a;this._state=c;this._period=d;this._action=A}b.prototype.start=function(){var b=new Q;this._cancel=b;b.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,a.bind(this)));return b};return b}();var Qa,tb,Gb=function(){var a,b=U;if(K.setTimeout)a=K.setTimeout,b=K.clearTimeout;else if(K.WScript)a=function(a,b){K.WScript.Sleep(b);a()};else throw new Ua;return{setTimeout:a,clearTimeout:b}}(),ub=Gb.setTimeout,Xb=Gb.clearTimeout;(function(){function a(b){if(e)ub(function(){a(b)},
0);else{var c=na[b];if(c&&(e=!0,c=k(c)(),tb(b),e=!1,c===ka))throw c.e;}}function c(){if(!K.postMessage||K.importScripts)return!1;var a=!1,b=K.onmessage;K.onmessage=function(){a=!0};K.postMessage("","*");K.onmessage=b;return a}var d=1,na={},e=!1;tb=function(a){delete na[a]};var f=RegExp("^"+String(Ca).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),g="function"==typeof(g=xa&&Za&&xa.setImmediate)&&!f.test(g)&&g;if(T(g))Qa=function(b){var c=d++;na[c]=b;g(function(){a(c)});
return c};else if("undefined"!==typeof b&&"[object process]"==={}.toString.call(b))Qa=function(c){var A=d++;na[A]=c;b.nextTick(function(){a(A)});return A};else if(c()){var f=function(b){"string"===typeof b.data&&b.data.substring(0,h.length)===h&&a(b.data.substring(h.length))},h="ms.rx.schedule"+Math.random();K.addEventListener?K.addEventListener("message",f,!1):K.attachEvent?K.attachEvent("onmessage",f):K.onmessage=f;Qa=function(a){var b=d++;na[b]=a;K.postMessage(h+currentId,"*");return b}}else if(K.MessageChannel){var m=
new K.MessageChannel;m.port1.onmessage=function(b){a(b.data)};Qa=function(a){var b=d++;na[b]=a;m.port2.postMessage(b);return b}}else Qa="document"in K&&"onreadystatechange"in K.document.createElement("script")?function(b){var c=K.document.createElement("script"),A=d++;na[A]=b;c.onreadystatechange=function(){a(A);c.onreadystatechange=null;c.parentNode.removeChild(c);c=null};K.document.documentElement.appendChild(c);return A}:function(b){var c=d++;na[c]=b;ub(function(){a(c)},0);return c}})();var Fa=
pa.timeout=pa["default"]=function(){return new pa(Aa,function(a,b){var c=this,d=new Q,e=Qa(function(){!d.isDisposed&&d.setDisposable(b(c,a))});return new R(d,oa(function(){tb(e)}))},function(a,b,c){var d=this;b=pa.normalize(b);var e=new Q;if(0===b)return d.scheduleWithState(a,c);var f=ub(function(){!e.isDisposed&&e.setDisposable(c(d,a))},b);return new R(e,oa(function(){Xb(f)}))},function(a,b,c){return this.scheduleWithRelativeAndState(a,b-this.now(),c)})}(),Ba=v.Notification=function(){function a(b,
c,d,w,e,f){this.kind=b;this.value=c;this.exception=d;this._accept=w;this._acceptObservable=e;this.toString=f}a.prototype.accept=function(a,b,c){return a&&"object"===typeof a?this._acceptObservable(a):this._accept(a,b,c)};a.prototype.toObservable=function(a){var b=this;Z(a)||(a=za);return new y(function(c){return a.scheduleWithState(b,function(a,b){b._acceptObservable(c);"N"===b.kind&&c.onCompleted()})})};return a}(),Yb=Ba.createOnNext=function(){function a(b){return b(this.value)}function b(a){return a.onNext(this.value)}
function c(){return"OnNext("+this.value+")"}return function(d){return new Ba("N",d,null,a,b,c)}}(),Zb=Ba.createOnError=function(){function a(b,c){return c(this.exception)}function b(a){return a.onError(this.exception)}function c(){return"OnError("+this.exception+")"}return function(d){return new Ba("E",null,d,a,b,c)}}(),$b=Ba.createOnCompleted=function(){function a(b,c,d){return d()}function b(a){return a.onCompleted()}function c(){return"OnCompleted()"}return function(){return new Ba("C",null,null,
a,b,c)}}(),jb=v.internals.Enumerator=function(a){this._next=a};jb.prototype.next=function(){return this._next()};jb.prototype[ha]=function(){return this};var Ga=v.internals.Enumerable=function(a){this._iterator=a};Ga.prototype[ha]=function(){return this._iterator()};Ga.prototype.concat=function(){var a=this;return new y(function(b){var c=a[ha](),d,e=new ta,f=za.scheduleRecursive(function(a){if(!d){try{var w=c.next()}catch(f){return b.onError(f)}if(w.done)return b.onCompleted();w=w.value;W(w)&&(w=
ca(w));var k=new Q;e.setDisposable(k);k.setDisposable(w.subscribe(function(a){b.onNext(a)},function(a){b.onError(a)},a))}});return new R(e,f,oa(function(){d=!0}))})};Ga.prototype.catchError=function(){var a=this;return new y(function(b){var c=a[ha](),d,e=new ta,f=za.scheduleRecursiveWithState(null,function(a,w){if(!d){try{var f=c.next()}catch(k){return observer.onError(k)}if(f.done)if(null!==a)b.onError(a);else b.onCompleted();else{f=f.value;W(f)&&(f=ca(f));var g=new Q;e.setDisposable(g);g.setDisposable(f.subscribe(function(a){b.onNext(a)},
w,function(){b.onCompleted()}))}}});return new R(e,f,oa(function(){d=!0}))})};Ga.prototype.catchErrorWhen=function(a){var b=this;return new y(function(c){var d=new Ha,e=new Ha,f=a(d).subscribe(e),k=b[ha](),g,h=new ta,m=za.scheduleRecursive(function(a){if(!g){try{var b=k.next()}catch(w){return c.onError(w)}if(b.done)c.onCompleted();else{b=b.value;W(b)&&(b=ca(b));var A=new Q,f=new Q;h.setDisposable(new R(f,A));A.setDisposable(b.subscribe(function(a){c.onNext(a)},function(b){f.setDisposable(e.subscribe(a,
function(a){c.onError(a)},function(){c.onCompleted()}));d.onNext(b)},function(){c.onCompleted()}))}}});return new R(f,h,m,oa(function(){g=!0}))})};var vb=Ga.repeat=function(a,b){null==b&&(b=-1);return new Ga(function(){var c=b;return new jb(function(){if(0===c)return hb;0<c&&c--;return{done:!1,value:a}})})},wb=Ga.of=function(a,b,c){if(b)var d=Da(b,c,3);return new Ga(function(){var c=-1;return new jb(function(){return++c<a.length?{done:!1,value:b?d(a[c],c,a):a[c]}:hb})})},Ia=v.Observer=function(){},
Wa=Ia.create=function(a,b,c){a||(a=U);b||(b=qb);c||(c=U);return new ac(a,b,c)},xb=v.internals.AbstractObserver=function(a){function b(){this.isStopped=!1;a.call(this)}O(b,a);b.prototype.next=fb;b.prototype.error=fb;b.prototype.completed=fb;b.prototype.onNext=function(a){this.isStopped||this.next(a)};b.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.error(a))};b.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())};b.prototype.dispose=function(){this.isStopped=
!0};b.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.error(a),!0)};return b}(Ia),ac=v.AnonymousObserver=function(a){function b(c,d,A){a.call(this);this._onNext=c;this._onError=d;this._onCompleted=A}O(b,a);b.prototype.next=function(a){this._onNext(a)};b.prototype.error=function(a){this._onError(a)};b.prototype.completed=function(){this._onCompleted()};return b}(xb),u,B=v.Observable=function(){function a(b){if(v.config.longStackSupport&&ra){try{throw Error();}catch(c){this.stack=
c.stack.substring(c.stack.indexOf("\n")+1)}var d=this;this._subscribe=function(a){var c=a.onError.bind(a);a.onError=function(a){if(ra&&d.stack&&"object"===typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf("From previous event:")){for(var b=[],n=d;n;n=n.source)n.stack&&b.unshift(n.stack);b.unshift(a.stack);for(var b=b.join("\nFrom previous event:\n").split("\n"),n=[],w=0,A=b.length;w<A;w++){var e=b[w],f;if(f=r(e)){var k=f[1];f=f[0]===zb&&k>=Ub&&k<=bc}else f=!1;if(f=!f)f=e,f=!(-1!==f.indexOf("(module.js:")||
-1!==f.indexOf("(node.js:"));f&&e&&n.push(e)}b=n.join("\n");a.stack=b}c(a)};return b.call(d,a)}}else this._subscribe=b}u=a.prototype;u.subscribe=u.forEach=function(a,b,c){return this._subscribe("object"===typeof a?a:Wa(a,b,c))};u.subscribeOnNext=function(a,b){return this._subscribe(Wa("undefined"!==typeof b?function(c){a.call(b,c)}:a))};u.subscribeOnError=function(a,b){return this._subscribe(Wa(null,"undefined"!==typeof b?function(c){a.call(b,c)}:a))};u.subscribeOnCompleted=function(a,b){return this._subscribe(Wa(null,
null,"undefined"!==typeof b?function(){a.call(b)}:a))};return a}(),cc=v.internals.ScheduledObserver=function(a){function b(c,d){a.call(this);this.scheduler=c;this.observer=d;this.hasFaulted=this.isAcquired=!1;this.queue=[];this.disposable=new ta}O(b,a);b.prototype.next=function(a){var b=this;this.queue.push(function(){b.observer.onNext(a)})};b.prototype.error=function(a){var b=this;this.queue.push(function(){b.observer.onError(a)})};b.prototype.completed=function(){var a=this;this.queue.push(function(){a.observer.onCompleted()})};
b.prototype.ensureActive=function(){var a=!1,b=this;!this.hasFaulted&&0<this.queue.length&&(a=!this.isAcquired,this.isAcquired=!0);a&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(a){var c;if(0<b.queue.length){c=b.queue.shift();try{c()}catch(d){throw b.queue=[],b.hasFaulted=!0,d;}a()}else b.isAcquired=!1}))};b.prototype.dispose=function(){a.prototype.dispose.call(this);this.disposable.dispose()};return b}(xb),qa=v.ObservableBase=function(a){function b(a){return a&&T(a.dispose)?
a:T(a)?oa(a):la}function c(a,d){var n=d[0],w=d[1],w=k(w.subscribeCore).call(w,n);if(w===ka&&!n.fail(ka.e))throw ka.e;n.setDisposable(b(w))}function d(a){a=new Hb(a);var b=[a,this];sa.scheduleRequired()?sa.scheduleWithState(b,c):c(null,b);return a}function e(){a.call(this,d)}O(e,a);e.prototype.subscribeCore=fb;return e}(B),dc=function(a){function b(c){this.source=c;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return this.source.subscribe(new D(a))};return b}(qa);D.prototype.onNext=function(a){this.isStopped||
this.a.push(a)};D.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.observer.onError(a))};D.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.observer.onNext(this.a),this.observer.onCompleted())};D.prototype.dispose=function(){this.isStopped=!0};D.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(a),!0)};u.toArray=function(){return new dc(this)};B.create=B.createWithDisposable=function(a,b){return new y(a,b)};var ob=
B.defer=function(a){return new y(function(b){var c;try{c=a()}catch(d){return yb(d).subscribe(b)}W(c)&&(c=ca(c));return c.subscribe(b)})},ec=function(a){function b(c){this.scheduler=c;a.call(this)}function c(a,b){this.observer=a;this.parent=b}function d(a,b){b.onCompleted()}O(b,a);b.prototype.subscribeCore=function(a){return(new c(a,this)).run()};c.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,d)};return b}(qa),fc=B.empty=function(a){Z(a)||(a=za);return new ec(a)},
hc=function(a){function b(c,d,e){this.iterable=c;this.mapper=d;this.scheduler=e;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return(new gc(a,this)).run()};return b}(qa),gc=function(){function a(b,c){this.observer=b;this.parent=c}a.prototype.run=function(){var a=da(Object(this.parent.iterable)),b=this.observer,c=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,function(d,w){try{var e=a.next()}catch(f){return b.onError(f)}if(e.done)return b.onCompleted();e=e.value;
if(c)try{e=c(e,d)}catch(k){return b.onError(k)}b.onNext(e);w(d+1)})};return a}(),Db=Math.pow(2,53)-1;G.prototype[ha]=function(){return new H(this._s)};H.prototype[ha]=function(){return this};H.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:hb};V.prototype[ha]=function(){return new X(this._a)};X.prototype[ha]=function(){return this};X.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:hb};var eb=B.from=function(a,b,c,d){if(null==
a)throw Error("iterable cannot be null.");if(b&&!T(b))throw Error("mapFn when provided must be a function");if(b)var e=Da(b,c,2);Z(d)||(d=sa);return new hc(a,e,d)},bb=function(a){function b(c,d){this.args=c;this.scheduler=d;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return(new J(a,this)).run()};return b}(qa);J.prototype.run=function(){var a=this.observer,b=this.parent.args,c=b.length;return this.parent.scheduler.scheduleRecursiveWithState(0,function(d,e){if(d<c)a.onNext(b[d]),e(d+1);
else a.onCompleted()})};var ic=B.fromArray=function(a,b){Z(b)||(b=sa);return new bb(a,b)},jc=function(a){function b(){a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return la};return b}(qa);B.never=function(){return new jc};B.of=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new bb(b,sa)};B.ofWithScheduler=function(a){for(var b=arguments.length,c=Array(b-1),d=1;d<b;d++)c[d-1]=arguments[d];return new bb(c,a)};var kc=function(a){function b(c,d){this.obj=
c;this.keys=Object.keys(c);this.scheduler=d;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return(new F(a,this)).run()};return b}(qa);F.prototype.run=function(){var a=this.observer,b=this.parent.obj,c=this.parent.keys,d=c.length;return this.parent.scheduler.scheduleRecursiveWithState(0,function(e,f){if(e<d){var k=c[e];a.onNext([k,b[k]]);f(e+1)}else a.onCompleted()})};B.pairs=function(a,b){b||(b=sa);return new kc(a,b)};var mc=function(a){function b(c,d,e){this.start=c;this.count=d;this.scheduler=
e;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return(new lc(a,this)).run()};return b}(qa),lc=function(){function a(b,c){this.observer=b;this.parent=c}a.prototype.run=function(){var a=this.parent.start,b=this.parent.count,c=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,function(d,e){if(d<b)c.onNext(a+d),e(d+1);else c.onCompleted()})};return a}();B.range=function(a,b,c){Z(c)||(c=sa);return new mc(a,b,c)};var nc=function(a){function b(c,d,e){this.value=c;this.repeatCount=
null==d?-1:d;this.scheduler=e;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return(new M(a,this)).run()};return b}(qa);M.prototype.run=function(){var a=this.observer,b=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,function(c,d){if(-1===c||0<c)a.onNext(b),0<c&&c--;if(0===c)return a.onCompleted();d(c)})};B.repeat=function(a,b,c){Z(c)||(c=sa);return new nc(a,b,c)};var oc=function(a){function b(c,d){this.value=c;this.scheduler=d;a.call(this)}
function c(a,b){this.observer=a;this.parent=b}function d(a,b){var c=b[1];c.onNext(b[0]);c.onCompleted()}O(b,a);b.prototype.subscribeCore=function(a){return(new c(a,this)).run()};c.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],d)};return b}(qa);B["return"]=B.just=B.returnValue=function(a,b){Z(b)||(b=za);return new oc(a,b)};var pc=function(a){function b(c,d){this.error=c;this.scheduler=d;a.call(this)}function c(a,b){this.observer=a;this.parent=
b}function d(a,b){b[1].onError(b[0])}O(b,a);b.prototype.subscribeCore=function(a){return(new c(a,this)).run()};c.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.error,this.observer],d)};return b}(qa),yb=B["throw"]=B.throwError=B.throwException=function(a,b){Z(b)||(b=za);return new pc(a,b)};u["catch"]=u.catchError=u.catchException=function(a){return"function"===typeof a?S(this,a):qc([this,a])};var qc=B.catchError=B["catch"]=B.catchException=function(){var a=[];
if(Array.isArray(arguments[0]))a=arguments[0];else for(var b=0,c=arguments.length;b<c;b++)a.push(arguments[b]);return wb(a).catchError()};u.combineLatest=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];Array.isArray(b[0])?b[0].unshift(this):b.unshift(this);return rc.apply(this,b)};var rc=B.combineLatest=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.pop();Array.isArray(b[0])&&(b=b[0]);return new y(function(a){function c(b){w[b]=
!0;if(f||(f=w.every(wa))){try{var e=d.apply(null,g)}catch(n){return a.onError(n)}a.onNext(e)}else if(k.filter(function(a,c){return c!==b}).every(wa))a.onCompleted()}for(var e=b.length,n=function(){return!1},w=x(e,n),f=!1,k=x(e,n),g=Array(e),h=Array(e),n=0;n<e;n++)(function(d){var e=b[d],n=new Q;W(e)&&(e=ca(e));n.setDisposable(e.subscribe(function(a){g[d]=a;c(d)},function(b){a.onError(b)},function(){k[d]=!0;k.every(wa)&&a.onCompleted()}));h[d]=n})(n);return new R(h)},this)};u.concat=function(){for(var a=
[],b=0,c=arguments.length;b<c;b++)a.push(arguments[b]);a.unshift(this);return sc.apply(null,a)};var sc=B.concat=function(){var a;if(Array.isArray(arguments[0]))a=arguments[0];else{a=Array(arguments.length);for(var b=0,c=arguments.length;b<c;b++)a[b]=arguments[b]}return wb(a).concat()};u.concatAll=u.concatObservable=function(){return this.merge(1)};var uc=function(a){function b(c,d){this.source=c;this.maxConcurrent=d;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){var b=new R;b.add(this.source.subscribe(new tc(a,
this.maxConcurrent,b)));return b};return b}(qa),tc=function(){function a(b,c,d){this.o=b;this.max=c;this.g=d;this.done=!1;this.q=[];this.activeCount=0;this.isStopped=!1}function b(a,c){this.parent=a;this.sad=c;this.isStopped=!1}a.prototype.handleSubscribe=function(a){var c=new Q;this.g.add(c);W(a)&&(a=ca(a));c.setDisposable(a.subscribe(new b(this,c)))};a.prototype.onNext=function(a){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(a)):this.q.push(a))};a.prototype.onError=
function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};a.prototype.onCompleted=function(){this.isStopped||(this.done=this.isStopped=!0,0===this.activeCount&&this.o.onCompleted())};a.prototype.dispose=function(){this.isStopped=!0};a.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};b.prototype.onNext=function(a){if(!this.isStopped)this.parent.o.onNext(a)};b.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.parent.o.onError(a))};
b.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var a=this.parent;a.g.remove(this.sad);0<a.q.length?a.handleSubscribe(a.q.shift()):(a.activeCount--,a.done&&0===a.activeCount&&a.o.onCompleted())}};b.prototype.dispose=function(){this.isStopped=!0};b.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(a),!0)};return a}();u.merge=function(a){return"number"!==typeof a?vc(this,a):new uc(this,a)};var vc=B.merge=function(){var a,b=[],c,d=arguments.length;
arguments[0]?Z(arguments[0])?(a=arguments[0],c=1):(a=za,c=0):(a=za,c=1);for(;c<d;c++)b.push(arguments[c]);Array.isArray(b[0])&&(b=b[0]);return E(a,b).mergeAll()},Ib=v.CompositeError=function(a){this.name="NotImplementedError";this.innerErrors=a;this.message="This contains multiple errors. Check the innerErrors";Error.call(this)};Ib.prototype=Error.prototype;B.mergeDelayError=function(){var a;if(Array.isArray(arguments[0]))a=arguments[0];else{var b=arguments.length;a=Array(b);for(var c=0;c<b;c++)a[c]=
arguments[c]}var d=E(null,a);return new y(function(a){function b(){if(0===f.length)a.onCompleted();else if(1===f.length)a.onError(f[0]);else a.onError(new Ib(f))}var c=new R,e=new Q,n=!1,f=[];c.add(e);e.setDisposable(d.subscribe(function(d){var e=new Q;c.add(e);W(d)&&(d=ca(d));e.setDisposable(d.subscribe(function(b){a.onNext(b)},function(a){f.push(a);c.remove(e);n&&1===c.length&&b()},function(){c.remove(e);n&&1===c.length&&b()}))},function(a){f.push(a);n=!0;1===c.length&&b()},function(){n=!0;1===
c.length&&b()}));return c})};var xc=function(a){function b(c){this.source=c;a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){var b=new R,c=new Q;b.add(c);c.setDisposable(this.source.subscribe(new wc(a,b)));return b};return b}(qa),wc=function(){function a(b,c){this.o=b;this.g=c;this.done=this.isStopped=!1}function b(a,c,d){this.parent=a;this.g=c;this.sad=d;this.isStopped=!1}a.prototype.onNext=function(a){if(!this.isStopped){var c=new Q;this.g.add(c);W(a)&&(a=ca(a));c.setDisposable(a.subscribe(new b(this,
this.g,c)))}};a.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};a.prototype.onCompleted=function(){this.isStopped||(this.done=this.isStopped=!0,1===this.g.length&&this.o.onCompleted())};a.prototype.dispose=function(){this.isStopped=!0};a.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};b.prototype.onNext=function(a){if(!this.isStopped)this.parent.o.onNext(a)};b.prototype.onError=function(a){this.isStopped||(this.isStopped=
!0,this.parent.o.onError(a))};b.prototype.onCompleted=function(){if(!this.isStopped){var a=this.parent;this.isStopped=!0;a.g.remove(this.sad);a.done&&1===a.g.length&&a.o.onCompleted()}};b.prototype.dispose=function(){this.isStopped=!0};b.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(a),!0)};return a}();u.mergeAll=u.mergeObservable=function(){return new xc(this)};u.skipUntil=function(a){var b=this;return new y(function(c){var d=!1,e=new R(b.subscribe(function(a){d&&
c.onNext(a)},function(a){c.onError(a)},function(){d&&c.onCompleted()}));W(a)&&(a=ca(a));var f=new Q;e.add(f);f.setDisposable(a.subscribe(function(){d=!0;f.dispose()},function(a){c.onError(a)},function(){f.dispose()}));return e},b)};u["switch"]=u.switchLatest=function(){var a=this;return new y(function(b){var c=!1,d=new ta,e=!1,f=0,k=a.subscribe(function(a){var k=new Q,w=++f;c=!0;d.setDisposable(k);W(a)&&(a=ca(a));k.setDisposable(a.subscribe(function(a){f===w&&b.onNext(a)},function(a){f===w&&b.onError(a)},
function(){f===w&&(c=!1,e&&b.onCompleted())}))},function(a){b.onError(a)},function(){e=!0;!c&&b.onCompleted()});return new R(k,d)},a)};u.takeUntil=function(a){var b=this;return new y(function(c){W(a)&&(a=ca(a));return new R(b.subscribe(c),a.subscribe(function(){c.onCompleted()},function(a){c.onError(a)},U))},b)};u.withLatestFrom=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.pop(),e=this;if("undefined"===typeof e)throw Error("Source observable not found for withLatestFrom().");
if("function"!==typeof d)throw Error("withLatestFrom() expects a resultSelector function.");Array.isArray(b[0])&&(b=b[0]);return new y(function(a){for(var c=b.length,f=x(c,function(){return!1}),n=!1,k=Array(c),w=Array(c+1),g=0;g<c;g++)(function(c){var d=b[c],e=new Q;W(d)&&(d=ca(d));e.setDisposable(d.subscribe(function(a){k[c]=a;f[c]=!0;n=f.every(wa)},a.onError.bind(a),function(){}));w[c]=e})(g);g=new Q;g.setDisposable(e.subscribe(function(b){var c;b=[b].concat(k);if(n){try{c=d.apply(null,b)}catch(e){a.onError(e);
return}a.onNext(c)}},a.onError.bind(a),function(){a.onCompleted()}));w[c]=g;return new R(w)},this)};u.zip=function(){if(Array.isArray(arguments[0]))return I.apply(this,arguments);for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=this,e=b.pop();b.unshift(d);return new y(function(a){function c(b){var f,k;if(n.every(function(a){return 0<a.length})){try{k=n.map(function(a){return a.shift()}),f=e.apply(d,k)}catch(g){a.onError(g);return}a.onNext(f)}else if(w.filter(function(a,c){return c!==
b}).every(wa))a.onCompleted()}function f(b){w[b]=!0;if(w.every(function(a){return a}))a.onCompleted()}for(var k=b.length,n=x(k,N),w=x(k,P),g=Array(k),h=0;h<k;h++)(function(d){var e=b[d],k=new Q;W(e)&&(e=ca(e));k.setDisposable(e.subscribe(function(a){n[d].push(a);c(d)},function(b){a.onError(b)},function(){f(d)}));g[d]=k})(h);return new R(g)},d)};B.zip=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];a=b.shift();return a.zip.apply(a,b)};B.zipArray=function(){var a;if(Array.isArray(arguments[0]))a=
arguments[0];else{var b=arguments.length;a=Array(b);for(var c=0;c<b;c++)a[c]=arguments[c]}return new y(function(b){function c(a){if(e.every(function(a){return 0<a.length})){var d=e.map(function(a){return a.shift()});b.onNext(d)}else if(f.filter(function(b,c){return c!==a}).every(wa))b.onCompleted()}for(var d=a.length,e=x(d,function(){return[]}),f=x(d,function(){return!1}),k=Array(d),n=0;n<d;n++)(function(d){k[d]=new Q;k[d].setDisposable(a[d].subscribe(function(a){e[d].push(a);c(d)},function(a){b.onError(a)},
function(){f[d]=!0;if(f.every(wa))b.onCompleted()}))})(n);return new R(k)})};u.asObservable=function(){var a=this;return new y(function(b){return a.subscribe(b)},this)};u.dematerialize=function(){var a=this;return new y(function(b){return a.subscribe(function(a){return a.accept(b)},function(a){b.onError(a)},function(){b.onCompleted()})},this)};u.distinctUntilChanged=function(a,b){var c=this;b||(b=pb);return new y(function(d){var e=!1,f;return c.subscribe(function(c){var k=c;if(a)try{k=a(c)}catch(n){d.onError(n);
return}if(e)try{var g=b(f,k)}catch(h){d.onError(h);return}e&&g||(e=!0,f=k,d.onNext(c))},function(a){d.onError(a)},function(){d.onCompleted()})},this)};u["do"]=u.tap=u.doAction=function(a,b,c){var d=this;return new y(function(e){var f=!a||T(a)?Wa(a||U,b||U,c||U):a;return d.subscribe(function(a){try{f.onNext(a)}catch(b){e.onError(b)}e.onNext(a)},function(a){try{f.onError(a)}catch(b){e.onError(b)}e.onError(a)},function(){try{f.onCompleted()}catch(a){e.onError(a)}e.onCompleted()})},this)};u.doOnNext=
u.tapOnNext=function(a,b){return this.tap("undefined"!==typeof b?function(c){a.call(b,c)}:a)};u.doOnError=u.tapOnError=function(a,b){return this.tap(U,"undefined"!==typeof b?function(c){a.call(b,c)}:a)};u.doOnCompleted=u.tapOnCompleted=function(a,b){return this.tap(U,null,"undefined"!==typeof b?function(){a.call(b)}:a)};u["finally"]=u.ensure=function(a){var b=this;return new y(function(c){var d;try{d=b.subscribe(c)}catch(e){throw a(),e;}return oa(function(){try{d.dispose()}catch(b){throw b;}finally{a()}})},
this)};u.finallyAction=function(a){return this.ensure(a)};u.ignoreElements=function(){var a=this;return new y(function(b){return a.subscribe(U,function(a){b.onError(a)},function(){b.onCompleted()})},a)};u.materialize=function(){var a=this;return new y(function(b){return a.subscribe(function(a){b.onNext(Yb(a))},function(a){b.onNext(Zb(a));b.onCompleted()},function(){b.onNext($b());b.onCompleted()})},a)};u.repeat=function(a){return vb(this,a).concat()};u.retry=function(a){return vb(this,a).catchError()};
u.retryWhen=function(a){return vb(this).catchErrorWhen(a)};u.scan=function(){var a=!1,b,c,d=this;2===arguments.length?(a=!0,b=arguments[0],c=arguments[1]):c=arguments[0];return new y(function(e){var f,k,g;return d.subscribe(function(d){!g&&(g=!0);try{f?k=c(k,d):(k=a?c(b,d):d,f=!0)}catch(na){e.onError(na);return}e.onNext(k)},function(a){e.onError(a)},function(){!g&&a&&e.onNext(b);e.onCompleted()})},d)};u.skipLast=function(a){if(0>a)throw new Ta;var b=this;return new y(function(c){var d=[];return b.subscribe(function(b){d.push(b);
d.length>a&&c.onNext(d.shift())},function(a){c.onError(a)},function(){c.onCompleted()})},b)};u.startWith=function(){var a,b=0;arguments.length&&Z(arguments[0])?(a=arguments[0],b=1):a=za;for(var c=[],d=arguments.length;b<d;b++)c.push(arguments[b]);return wb([ic(c,a),this]).concat()};u.takeLast=function(a){if(0>a)throw new Ta;var b=this;return new y(function(c){var d=[];return b.subscribe(function(b){d.push(b);d.length>a&&d.shift()},function(a){c.onError(a)},function(){for(;0<d.length;)c.onNext(d.shift());
c.onCompleted()})},b)};u.selectConcat=u.concatMap=function(a,b,c){return T(a)&&T(b)?this.concatMap(function(c,d){var e=a(c,d);W(e)&&(e=ca(e));(cb(e)||db(e))&&(e=eb(e));return e.map(function(a,e){return b(c,a,d,e)})}):T(a)?aa(this,a,c):aa(this,function(){return a})};var Jb=function(a){function b(c,d,e){this.source=c;this.selector=Da(d,e,3);a.call(this)}O(b,a);b.prototype.internalMap=function(a,c){var d=this;return new b(this.source,function(b,c,e){return a.call(this,d.selector(b,c,e),c,e)},c)};b.prototype.subscribeCore=
function(a){return this.source.subscribe(new L(a,this.selector,this))};return b}(qa);L.prototype.onNext=function(a){if(!this.isStopped){a=k(this.selector).call(this,a,this.i++,this.source);if(a===ka)return this.observer.onError(a.e);this.observer.onNext(a)}};L.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.observer.onError(a))};L.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.observer.onCompleted())};L.prototype.dispose=function(){this.isStopped=!0};
L.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(a),!0)};u.map=u.select=function(a,b){var c="function"===typeof a?a:function(){return a};return this instanceof Jb?this.internalMap(c,b):new Jb(this,c,b)};u.pluck=function(){var a=arguments,b=arguments.length;if(0===b)throw Error("List of properties cannot be empty.");return this.map(function(d){var e=d;for(d=0;d<b;d++)if(e=e[a[d]],"undefined"===typeof e)return c;return e})};u.selectMany=u.flatMap=function(a,
b,c){return T(a)&&T(b)?this.flatMap(function(c,d){var e=a(c,d);W(e)&&(e=ca(e));(cb(e)||db(e))&&(e=eb(e));return e.map(function(a,e){return b(c,a,d,e)})},c):T(a)?ma(this,a,c):ma(this,function(){return a})};u.selectSwitch=u.flatMapLatest=u.switchMap=function(a,b){return this.select(a,b).switchLatest()};u.skip=function(a){if(0>a)throw new Ta;var b=this;return new y(function(c){var d=a;return b.subscribe(function(a){if(0>=d)c.onNext(a);else d--},function(a){c.onError(a)},function(){c.onCompleted()})},
b)};u.skipWhile=function(a,b){var c=this,d=Da(a,b,3);return new y(function(a){var b=0,e=!1;return c.subscribe(function(f){if(!e)try{e=!d(f,b++,c)}catch(k){a.onError(k);return}e&&a.onNext(f)},function(b){a.onError(b)},function(){a.onCompleted()})},c)};u.take=function(a,b){if(0>a)throw new Ta;if(0===a)return fc(b);var c=this;return new y(function(b){var d=a;return c.subscribe(function(a){0<d--&&(b.onNext(a),0===d&&b.onCompleted())},function(a){b.onError(a)},function(){b.onCompleted()})},c)};u.takeWhile=
function(a,b){var c=this,d=Da(a,b,3);return new y(function(a){var b=0,e=!0;return c.subscribe(function(f){if(e){try{e=d(f,b++,c)}catch(k){a.onError(k);return}if(e)a.onNext(f);else a.onCompleted()}},function(b){a.onError(b)},function(){a.onCompleted()})},c)};var Kb=function(a){function b(c,d,e){this.source=c;this.predicate=Da(d,e,3);a.call(this)}O(b,a);b.prototype.subscribeCore=function(a){return this.source.subscribe(new Y(a,this.predicate,this))};b.prototype.internalFilter=function(a,c){var d=this;
return new b(this.source,function(b,c,e){return d.predicate(b,c,e)&&a.call(this,b,c,e)},c)};return b}(qa);Y.prototype.onNext=function(a){if(!this.isStopped){var b=k(this.predicate).call(this,a,this.i++,this.source);if(b===ka)return this.observer.onError(b.e);b&&this.observer.onNext(a)}};Y.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.observer.onError(a))};Y.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.observer.onCompleted())};Y.prototype.dispose=
function(){this.isStopped=!0};Y.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(a),!0)};u.filter=u.where=function(a,b){return this instanceof Kb?this.internalFilter(a,b):new Kb(this,a,b)};B.fromCallback=function(a,b,c){return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return(new y(function(d){e.push(function(){for(var a=arguments.length,e=Array(a),f=0;f<a;f++)e[f]=arguments[f];if(c){try{e=c.apply(b,e)}catch(k){return d.onError(k)}d.onNext(e)}else if(1>=
e.length)d.onNext.apply(d,e);else d.onNext(e);d.onCompleted()});a.apply(b,e)})).publishLast().refCount()}};B.fromNodeCallback=function(a,b,c){return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return(new y(function(d){e.push(function(a){if(a)d.onError(a);else{for(var e=arguments.length,f=[],k=1;k<e;k++)f[k-1]=arguments[k];if(c){try{f=c.apply(b,f)}catch(g){return d.onError(g)}d.onNext(f)}else if(1>=f.length)d.onNext.apply(d,f);else d.onNext(f);d.onCompleted()}});
a.apply(b,e)})).publishLast().refCount()}};v.config.useNativeEvents=!1;B.fromEvent=function(a,b,c){return a.addListener?Lb(function(c){a.addListener(b,c)},function(c){a.removeListener(b,c)},c):v.config.useNativeEvents||"function"!==typeof a.on||"function"!==typeof a.off?(new y(function(d){return ia(a,b,function(a){var b=a;if(c)try{b=c(arguments)}catch(e){return d.onError(e)}d.onNext(b)})})).publish().refCount():Lb(function(c){a.on(b,c)},function(c){a.off(b,c)},c)};var Lb=B.fromEventPattern=function(a,
b,c){return(new y(function(d){function e(a){var b=a;if(c)try{b=c(arguments)}catch(f){return d.onError(f)}d.onNext(b)}var f=a(e);return oa(function(){b&&b(e,f)})})).publish().refCount()},ca=B.fromPromise=function(a){return ob(function(){var b=new v.AsyncSubject;a.then(function(a){b.onNext(a);b.onCompleted()},b.onError.bind(b));return b})};u.toPromise=function(a){a||(a=v.config.Promise);if(!a)throw new Ua("Promise type not provided nor in Rx.config.Promise");var b=this;return new a(function(a,c){var d,
e=!1;b.subscribe(function(a){d=a;e=!0},c,function(){e&&a(d)})})};B.startAsync=function(a){var b;try{b=a()}catch(c){return yb(c)}return ca(b)};u.multicast=function(a,b){var c=this;return"function"===typeof a?new y(function(d){var e=c.multicast(a());return new R(b(e).subscribe(d),e.connect())},c):new yc(c,a)};u.publish=function(a){return a&&T(a)?this.multicast(function(){return new Ha},a):this.multicast(new Ha)};u.share=function(){return this.publish().refCount()};u.publishLast=function(a){return a&&
T(a)?this.multicast(function(){return new Mb},a):this.multicast(new Mb)};u.publishValue=function(a,b){return 2===arguments.length?this.multicast(function(){return new Nb(b)},a):this.multicast(new Nb(a))};u.shareValue=function(a){return this.publishValue(a).refCount()};u.replay=function(a,b,c,d){return a&&T(a)?this.multicast(function(){return new Ob(b,c,d)},a):this.multicast(new Ob(b,c,d))};u.shareReplay=function(a,b,c){return this.replay(null,a,b,c).refCount()};var yc=v.ConnectableObservable=function(a){function b(c,
d){var e=!1,f,k=c.asObservable();this.connect=function(){e||(e=!0,f=new R(k.subscribe(d),oa(function(){e=!1})));return f};a.call(this,function(a){return d.subscribe(a)})}O(b,a);b.prototype.refCount=function(){var a,b=0,c=this;return new y(function(d){var e=1===++b,f=c.subscribe(d);e&&(a=c.connect());return function(){f.dispose();0===--b&&a.dispose()}})};return b}(B),zc=B.interval=function(a,b){return Ma(a,a,Z(b)?b:Fa)};B.timer=function(a,b,d){var e;Z(d)||(d=Fa);b!==c&&"number"===typeof b?e=b:Z(b)&&
(d=b);return a instanceof Date&&e===c?ea(a.getTime(),d):a instanceof Date&&e!==c?(e=b,ua(a.getTime(),e,d)):e===c?ja(a,d):Ma(a,e,d)};u.delay=function(a,b){Z(b)||(b=Fa);return a instanceof Date?lb(this,a.getTime(),b):Xa(this,a,b)};u.debounce=u.throttleWithTimeout=function(a,b){Z(b)||(b=Fa);var c=this;return new y(function(d){var e=new ta,f=!1,k,g=0,h=c.subscribe(function(c){f=!0;k=c;g++;var h=g;c=new Q;e.setDisposable(c);c.setDisposable(b.scheduleWithRelative(a,function(){f&&g===h&&d.onNext(k);f=!1}))},
function(a){e.dispose();d.onError(a);f=!1;g++},function(){e.dispose();f&&d.onNext(k);d.onCompleted();f=!1;g++});return new R(h,e)},this)};u.throttle=function(a,b){return this.debounce(a,b)};u.timestamp=function(a){Z(a)||(a=Fa);return this.map(function(b){return{value:b,timestamp:a.now()}})};u.sample=u.throttleLatest=function(a,b){Z(b)||(b=Fa);return"number"===typeof a?Ya(this,zc(a,b)):Ya(this,a)};u.timeout=function(a,b,c){null!=b&&"string"!==typeof b||(b=yb(Error(b||"Timeout")));Z(c)||(c=Fa);var d=
this,e=a instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new y(function(f){function k(){var d=g;l.setDisposable(c[e](a,function(){g===d&&(W(b)&&(b=ca(b)),m.setDisposable(b.subscribe(f)))}))}var g=0,h=new Q,m=new ta,l=new ta;m.setDisposable(h);k();h.setDisposable(d.subscribe(function(a){g++;f.onNext(a);k()},function(a){g++;f.onError(a)},function(){g++;f.onCompleted()}));return new R(m,l)},d)};u.throttleFirst=function(a,b){Z(b)||(b=Fa);var c=+a||0;if(0>=c)throw new RangeError("windowDuration cannot be less or equal zero.");
var d=this;return new y(function(a){var e=0;return d.subscribe(function(d){var f=b.now();if(0===e||f-e>=c)e=f,a.onNext(d)},function(b){a.onError(b)},function(){a.onCompleted()})},d)};var Ac=function(a){function b(a){var c=this.source.publish();a=c.subscribe(a);var d=la,e=this.pauser.distinctUntilChanged().subscribe(function(a){a?d=c.connect():(d.dispose(),d=la)});return new R(a,d,e)}function c(d,e){this.source=d;this.controller=new Ha;this.pauser=e&&e.subscribe?this.controller.merge(e):this.controller;
a.call(this,b,d)}O(c,a);c.prototype.pause=function(){this.controller.onNext(!1)};c.prototype.resume=function(){this.controller.onNext(!0)};return c}(B);u.pausable=function(a){return new Ac(this,a)};var Bc=function(a){function b(a){var d=[],e;return mb(this.source,this.pauser.distinctUntilChanged().startWith(!1),function(a,b){return{data:a,shouldFire:b}}).subscribe(function(b){if(e!==c&&b.shouldFire!=e){if(e=b.shouldFire)for(;0<d.length;)a.onNext(d.shift())}else if(e=b.shouldFire)a.onNext(b.data);
else d.push(b.data)},function(b){for(;0<d.length;)a.onNext(d.shift());a.onError(b)},function(){for(;0<d.length;)a.onNext(d.shift());a.onCompleted()})}function d(c,e){this.source=c;this.controller=new Ha;this.pauser=e&&e.subscribe?this.controller.merge(e):this.controller;a.call(this,b,c)}O(d,a);d.prototype.pause=function(){this.controller.onNext(!1)};d.prototype.resume=function(){this.controller.onNext(!0)};return d}(B);u.pausableBuffered=function(a){return new Bc(this,a)};var Dc=function(a){function b(a){return this.source.subscribe(a)}
function c(d,e,f){a.call(this,b,d);this.subject=new Cc(e,f);this.source=d.multicast(this.subject).refCount()}O(c,a);c.prototype.request=function(a){return this.subject.request(null==a?-1:a)};return c}(B),Cc=function(a){function b(a){return this.subject.subscribe(a)}function c(d,e){null==d&&(d=!0);a.call(this,b);this.subject=new Ha;this.queue=(this.enableQueue=d)?[]:null;this.requestedCount=0;this.requestedDisposable=la;this.error=null;this.hasCompleted=this.hasFailed=!1;this.scheduler=e||sa}O(c,a);
Oa(c.prototype,Ia,{onCompleted:function(){this.hasCompleted=!0;if(this.enableQueue&&0!==this.queue.length)this.queue.push(Ba.createOnCompleted());else this.subject.onCompleted()},onError:function(a){this.hasFailed=!0;this.error=a;if(this.enableQueue&&0!==this.queue.length)this.queue.push(Ba.createOnError(a));else this.subject.onError(a)},onNext:function(a){var b=!1;0===this.requestedCount?this.enableQueue&&this.queue.push(Ba.createOnNext(a)):(-1!==this.requestedCount&&0===this.requestedCount--&&this.disposeCurrentRequest(),
b=!0);b&&this.subject.onNext(a)},_processRequest:function(a){if(this.enableQueue){for(;this.queue.length>=a&&0<a||0<this.queue.length&&"N"!==this.queue[0].kind;){var b=this.queue.shift();b.accept(this.subject);"N"===b.kind?a--:(this.disposeCurrentRequest(),this.queue=[])}return{numberOfItems:a,returnValue:0!==this.queue.length}}return{numberOfItems:a,returnValue:!1}},request:function(a){this.disposeCurrentRequest();var b=this;return this.requestedDisposable=this.scheduler.scheduleWithState(a,function(a,
c){var d=b._processRequest(c),e=d.numberOfItems;d.returnValue||(b.requestedCount=e,b.requestedDisposable=oa(function(){b.requestedCount=0}))})},disposeCurrentRequest:function(){this.requestedDisposable.dispose();this.requestedDisposable=la}});return c}(B);u.controlled=function(a,b){a&&Z(a)&&(b=a,a=!0);null==a&&(a=!0);return new Dc(this,a,b)};u.pipe=function(a){function b(){c.resume()}var c=this.pausableBuffered();a.addListener("drain",b);c.subscribe(function(b){!a.write(String(b))&&c.pause()},function(b){a.emit("error",
b)},function(){!a._isStdio&&a.end();a.removeListener("drain",b)});c.resume();return a};u.transduce=function(a){function b(a){return{"@@transducer/init":function(){return a},"@@transducer/step":function(a,b){return a.onNext(b)},"@@transducer/result":function(a){return a.onCompleted()}}}var c=this;return new y(function(d){var e=a(b(d));return c.subscribe(function(a){try{e["@@transducer/step"](d,a)}catch(b){d.onError(b)}},function(a){d.onError(a)},function(){e["@@transducer/result"](d)})},c)};var y=
v.AnonymousObservable=function(a){function b(a){return a&&T(a.dispose)?a:T(a)?oa(a):la}function c(a,d){var e=d[0],f=k(d[1])(e);if(f===ka&&!e.fail(ka.e))throw ka.e;e.setDisposable(b(f))}function d(b,e){this.source=e;a.call(this,function(a){a=new Hb(a);var d=[a,b];sa.scheduleRequired()?sa.scheduleWithState(d,c):c(null,d);return a})}O(d,a);return d}(B),Hb=function(a){function b(c){a.call(this);this.observer=c;this.m=new Q}O(b,a);var c=b.prototype;c.next=function(a){a=k(this.observer.onNext).call(this.observer,
a);if(a===ka)throw this.dispose(),a.e;};c.error=function(a){a=k(this.observer.onError).call(this.observer,a);this.dispose();if(a===ka)throw a.e;};c.completed=function(){var a=k(this.observer.onCompleted).call(this.observer);this.dispose();if(a===ka)throw a.e;};c.setDisposable=function(a){this.m.setDisposable(a)};c.getDisposable=function(){return this.m.getDisposable()};c.dispose=function(){a.prototype.dispose.call(this);this.m.dispose()};return b}(xb),kb=function(a,b){this.subject=a;this.observer=
b};kb.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var a=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(a,1);this.observer=null}};var Ha=v.Subject=function(a){function b(a){fa(this);if(!this.isStopped)return this.observers.push(a),new kb(this,a);if(this.hasError)return a.onError(this.error),la;a.onCompleted();return la}function c(){a.call(this,b);this.isStopped=this.isDisposed=!1;this.observers=[];this.hasError=!1}O(c,a);Oa(c.prototype,
Ia.prototype,{hasObservers:function(){return 0<this.observers.length},onCompleted:function(){fa(this);if(!this.isStopped){this.isStopped=!0;for(var a=0,b=p(this.observers),c=b.length;a<c;a++)b[a].onCompleted();this.observers.length=0}},onError:function(a){fa(this);if(!this.isStopped){this.isStopped=!0;this.error=a;this.hasError=!0;for(var b=0,c=p(this.observers),d=c.length;b<d;b++)c[b].onError(a);this.observers.length=0}},onNext:function(a){fa(this);if(!this.isStopped)for(var b=0,c=p(this.observers),
d=c.length;b<d;b++)c[b].onNext(a)},dispose:function(){this.isDisposed=!0;this.observers=null}});c.create=function(a,b){return new Ec(a,b)};return c}(B),Mb=v.AsyncSubject=function(a){function b(a){fa(this);if(!this.isStopped)return this.observers.push(a),new kb(this,a);if(this.hasError)a.onError(this.error);else{if(this.hasValue)a.onNext(this.value);a.onCompleted()}return la}function c(){a.call(this,b);this.hasValue=this.isStopped=this.isDisposed=!1;this.observers=[];this.hasError=!1}O(c,a);Oa(c.prototype,
Ia,{hasObservers:function(){fa(this);return 0<this.observers.length},onCompleted:function(){var a,b;fa(this);if(!this.isStopped){this.isStopped=!0;var c=p(this.observers);b=c.length;if(this.hasValue)for(a=0;a<b;a++){var d=c[a];d.onNext(this.value);d.onCompleted()}else for(a=0;a<b;a++)c[a].onCompleted();this.observers.length=0}},onError:function(a){fa(this);if(!this.isStopped){this.hasError=this.isStopped=!0;this.error=a;for(var b=0,c=p(this.observers),d=c.length;b<d;b++)c[b].onError(a);this.observers.length=
0}},onNext:function(a){fa(this);this.isStopped||(this.value=a,this.hasValue=!0)},dispose:function(){this.isDisposed=!0;this.value=this.exception=this.observers=null}});return c}(B),Ec=v.AnonymousSubject=function(a){function b(a){return this.observable.subscribe(a)}function c(d,e){this.observer=d;this.observable=e;a.call(this,b)}O(c,a);Oa(c.prototype,Ia.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(a){this.observer.onError(a)},onNext:function(a){this.observer.onNext(a)}});
return c}(B),Nb=v.BehaviorSubject=function(a){function b(a){fa(this);if(!this.isStopped)return this.observers.push(a),a.onNext(this.value),new kb(this,a);if(this.hasError)a.onError(this.error);else a.onCompleted();return la}function c(d){a.call(this,b);this.value=d;this.observers=[];this.hasError=this.isStopped=this.isDisposed=!1}O(c,a);Oa(c.prototype,Ia,{getValue:function(){fa(this);if(this.hasError)throw this.error;return this.value},hasObservers:function(){return 0<this.observers.length},onCompleted:function(){fa(this);
if(!this.isStopped){this.isStopped=!0;for(var a=0,b=p(this.observers),c=b.length;a<c;a++)b[a].onCompleted();this.observers.length=0}},onError:function(a){fa(this);if(!this.isStopped){this.hasError=this.isStopped=!0;this.error=a;for(var b=0,c=p(this.observers),d=c.length;b<d;b++)c[b].onError(a);this.observers.length=0}},onNext:function(a){fa(this);if(!this.isStopped){this.value=a;for(var b=0,c=p(this.observers),d=c.length;b<d;b++)c[b].onNext(a)}},dispose:function(){this.isDisposed=!0;this.exception=
this.value=this.observers=null}});return c}(B),Ob=v.ReplaySubject=function(a){function b(a,c){return oa(function(){c.dispose();!a.isDisposed&&a.observers.splice(a.observers.indexOf(c),1)})}function c(a){a=new cc(this.scheduler,a);var d=b(this,a);fa(this);this._trim(this.scheduler.now());this.observers.push(a);for(var e=0,f=this.q.length;e<f;e++)a.onNext(this.q[e].value);if(this.hasError)a.onError(this.error);else if(this.isStopped)a.onCompleted();a.ensureActive();return d}function d(b,f,k){this.bufferSize=
null==b?e:b;this.windowSize=null==f?e:f;this.scheduler=k||sa;this.q=[];this.observers=[];this.hasError=this.isDisposed=this.isStopped=!1;this.error=null;a.call(this,c)}var e=Math.pow(2,53)-1;O(d,a);Oa(d.prototype,Ia.prototype,{hasObservers:function(){return 0<this.observers.length},_trim:function(a){for(;this.q.length>this.bufferSize;)this.q.shift();for(;0<this.q.length&&a-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(a){fa(this);if(!this.isStopped){var b=this.scheduler.now();
this.q.push({interval:b,value:a});this._trim(b);for(var b=0,c=p(this.observers),d=c.length;b<d;b++){var e=c[b];e.onNext(a);e.ensureActive()}}},onError:function(a){fa(this);if(!this.isStopped){this.isStopped=!0;this.error=a;this.hasError=!0;var b=this.scheduler.now();this._trim(b);for(var b=0,c=p(this.observers),d=c.length;b<d;b++){var e=c[b];e.onError(a);e.ensureActive()}this.observers.length=0}},onCompleted:function(){fa(this);if(!this.isStopped){this.isStopped=!0;var a=this.scheduler.now();this._trim(a);
for(var a=0,b=p(this.observers),c=b.length;a<c;a++){var d=b[a];d.onCompleted();d.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0;this.observers=null}});return d}(B);v.Pauser=function(a){function b(){a.call(this)}O(b,a);b.prototype.pause=function(){this.onNext(!1)};b.prototype.resume=function(){this.onNext(!0)};return b}(Ha);K.Rx=v;!(m=function(){return v}.call(l,d,l,g),m!==c&&(g.exports=m));var bc=f()}).call(this)}).call(l,d(13)(q),function(){return this}(),d(12))},
function(q,l,d){function m(d){var h=.3*(2*Math.random()-1);return d*(1+h)}d(3);q.exports={getFuzzedDelay:m,getBackedoffDelay:function(d,h){return m(d*Math.pow(2,(void 0===h?1:h)-1))}}},function(q,l,d){d(1);q.exports=function(d,g,h){function b(){var c=f-Date.now();if(0<c)l=setTimeout(b,c);else switch(l=null,r.length){case 0:return d();case 1:return d(r[0]);case 2:return d(r[0],r[1]);case 3:return d(r[0],r[1],r[2]);default:return d.apply(null,r)}}function c(){var d=arguments.length,a=0;for(r=Array(d);a<
d;a++)r[a]=arguments[a];if(q&&!t)return t=!0,f=Date.now(),b();d=f;f=Date.now()+g;if(!l||f<d)l&&clearTimeout(l),l=setTimeout(b,g);return c}var l=null,f=0,r=[],q=!(!h||!h.leading),t=!1;c.isWaiting=function(){return!!l};c.dispose=function(){l&&(clearTimeout(l),l=null)};return c}},function(q,l,d){function m(a,b,c,d){this.name="RequestError";this.url=a;this.xhr=b;this.code=b.status;this.reason=void 0===d?null:d;this.message="request: "+c+" ("+a+")";Error.captureStackTrace&&Error.captureStackTrace(this,
m)}function g(a,b){var c=b.code,d=b.method,e=b.message;this.name="RestCallMethodError";this.url=a;this.code=c;this.message="restmethodcall: webservice error status "+c+" ("+a+")"+(d?" ("+d+")":"")+""+(e?"\n"+e:"");Error.captureStackTrace&&Error.captureStackTrace(this,g)}function h(a,b,c){a=a.querySelector("RestCallResult");var d=+a.querySelector("Status").textContent;if(0>d)throw new g(b,{code:d,method:c});return{output:a.querySelector("Output"),status:d}}function b(a){return"rest-call-method"==a.format?
f(a):r.create(function(b){function c(a){var d=a.target,f=d.status;if(200>f||300<=f)return b.onError(new m(e,d,d.statusText));var f=Date.now()-q,g;g="document"==h?(new DOMParser).parseFromString(d.responseText,"text/xml"):d.response;if("json"==h&&"string"==typeof g)try{g=JSON.parse(g)}catch(t){g=null}if(null==g)return b.onError(new m(e,d,'null response with format "'+h+'" (error while parsing or wrong content-type)'));if(l){var aa;if(p){aa=p;for(var x={},r,C=0;C<aa.length;C++)r=aa[C],x[r]=d.getResponseHeader(r);
aa=x}b.onNext({blob:g,size:a.total,duration:f,headers:aa,url:d.responseURL||e,xhr:d})}else b.onNext(g);b.onCompleted()}function d(a){b.onError(new m(e,a,"error event"))}var e=a.url,f=a.data,g=a.headers,h=a.format,l=a.withMetadata,p=a.responseHeaders,t=new XMLHttpRequest;t.open(a.method||"GET",e,!0);t.responseType="document"==h?"text":h||"text";if(g)for(var r in g)t.setRequestHeader(r,g[r]);t.addEventListener("load",c,!1);t.addEventListener("error",d,!1);var q=Date.now();t.send(f);return function(){var a=
t.readyState;0<a&&4>a&&(t.removeEventListener("load",c),t.removeEventListener("error",d),t.abort());t=null}})}function c(a){return(a||"").toString().replace(z,function(a){return t[a]})}function p(a){var b="",d;for(d in a)var e=a[d],e="object"==typeof e?p(e):c(e),b=b+("<"+d+">"+e+"</"+d+">");return b}function f(a){a.method="POST";a.headers={"Content-Type":"application/xml"};a.data=e.replace("{payload}",p(a.data));a.format="document";return b(a).map(function(b){return h(b,a.url,a.ScriptInfo)})}var r=
d(3).Observable;m.prototype=Error();g.prototype=Error();var z=/[&<>]/g,t={"&":"&amp;","<":"&lt;",">":"&gt;"},e='<RestCallMethod xmlns:i="http://www.w3.org/2001/XMLSchema-instance">{payload}</RestCallMethod>';b.escapeXml=c;b.RequestError=m;b.RestCallMethodError=g;b.RestCallResult=h;b.getNodeTextContent=function(a,b){var c=a.querySelector(b);return c&&c.textContent};q.exports=b},function(q,l){function d(d){return function(g,h){return null==g?h:d*h+(1-d)*g}}q.exports=function(m,g,h){g=void 0===h?{}:
h;return m.map(function(b){return b.value.response}).filter(function(b){return 2E3<b.size}).map(function(b){return b.size/b.duration*8E3}).scan(d(g.alpha))}},function(q,l,d){function m(a,c,d){var e=void 0===d?0:d;return b.findLast(a,function(a){return a/c<=1-e})||a[0]}function g(a,c){var d=b.find(a,function(a){return a.width>=c});return d?d.bitrate:Infinity}function h(a,c){return c?b.find(a,function(a){return a.lang===c}):null}var b=d(1),c=d(4);l=d(3);var p=l.BehaviorSubject,f=l.CompositeDisposable,
r=l.Observable.combineLatest,z=d(5).only,t=d(24),e={defLanguage:"fra",defSubtitle:"",defBufSize:30,defBufThreshold:.3};q.exports=function(a,d,l,q){function D(a){return E.changes().map(function(b){return h(a,b)||a[0]})}function G(a){return F.changes().map(function(b){return h(a,b)})}q=b.defaults(void 0===q?{}:q,e);var H=q.defSubtitle,V=q.defBufSize,X=q.defBufThreshold,da=l.videoWidth,J=l.inBackground,E=new p(q.defLanguage),F=new p(H),M={audio:t(a.filter(function(a){return"audio"===a.type}),d,{alpha:.6}).publishValue(0),
video:t(a.filter(function(a){return"video"===a.type}),d,{alpha:.6}).publishValue(0)},S=new f(b.map(b.values(M),function(a){return a.connect()})),I={audio:new p(Infinity),video:new p(Infinity)},P={audio:new p(Infinity),video:new p(Infinity)},N={audio:new p(V),video:new p(V),text:new p(V)};return{setLanguage:function(a){E.onNext(a)},setSubtitle:function(a){F.onNext(a)},getLanguage:function(){return E.value},getSubtitle:function(){return F.value},getAverageBitrates:function(){return M},getAudioMaxBitrate:function(){return P.audio.value},
getVideoMaxBitrate:function(){return P.video.value},getAudioBufferSize:function(){return N.audio.value},getVideoBufferSize:function(){return N.video.value},setAudioBitrate:function(a){I.audio.onNext(0<a?a:Infinity)},setVideoBitrate:function(a){I.video.onNext(0<a?a:Infinity)},setAudioMaxBitrate:function(a){P.audio.onNext(0<a?a:Infinity)},setVideoMaxBitrate:function(a){P.video.onNext(0<a?a:Infinity)},setAudioBufferSize:function(a){N.audio.onNext(0<a?a:V)},setVideoBufferSize:function(a){N.video.onNext(0<
a?a:V)},getBufferAdapters:function(a){var d=a.type,e=a.bitrates,f=a.representations;a=f[0];if(1<f.length){a=I[d];var k=P[d],h=M[d].map(function(a){return m(e,a,X)}).changes().customDebounce(2E3,{leading:!0});"video"==d&&(k=r(k,da.map(function(a){return g(f,a)}),J.map(function(a){return a?e[0]:Infinity}),Math.min));a=r(a,k,h,function(a,b,c){return Infinity>a?a:Infinity>b?Math.min(b,c):c}).map(function(a){return b.find(f,function(b){return b.bitrate===m(e,a)})}).changes(function(a){return a.id}).tap(function(a){return c.info("bitrate",
d,a.bitrate)})}else a=z(a);return{representations:a,bufferSizes:N[d]||new p(V)}},getAdaptationsChoice:function(a,b){if("audio"==a)return D(b);if("text"==a)return G(b);if(1==b.length)return z(b[0]);throw Error("adaptive: unknown type "+a+" for adaptation chooser");},dispose:function(){S&&(S.dispose(),S=null)}}}},function(q,l,d){var m=d(1),g=d(4);d(2);l=d(6);var h=l.BufferedRanges,b=l.bufferedToArray,c=l.getGap;l=d(3);var p=l.Observable,f=l.Subject,r=p.combineLatest,z=p.defer,t=p.empty,e=p.from,a=p.just,
k=p.merge,x=p.timer;l=d(5);var C=l.first,D=l.on,G=d(41).ArraySet;d=d(15);var H=d.IndexHandler,V=d.OutOfIndexError;q.exports=function(d){function l(a){F.appendBuffer(a);return C(ua)}function p(a){return z(function(){var b=a.parsed.blob;return F.updating?C(ua).flatMap(function(){return l(b)}):l(b)}).map(a)}function q(d){function f(a){if(C.test(a.id))return!1;if(a.init||null==a.time)return!0;var b=l.scale(a.time);a=l.scale(a.duration);return(b=ea.hasRange(b,a))?1.5*b.bitrate<D:!0}function h(a,b,d){var e=
[];d&&(g.debug("add init segment",N),e.push(l.getInitSegment()));if(0<a.readyState){b=Math.max(0,Math.min(b,a.liveGap,(a.duration||Infinity)-a.ts));d=c(a.ts,F.buffered);d=d>ma&&Infinity>d?Math.min(d,Y):0;var k=ea.getRange(a.ts);k&&(k=Math.floor(k.end-a.ts),k>d&&(d=k));a=l.getSegments(a.ts,d,b);e=e.concat(a)}return m.filter(e,f)}var l=new H(d),D=d.bitrate,C=new G,z=r(P,ia,ja,function(a,b){return{timing:a,bufferSize:b}}).flatMap(function(a,c){var f=a.timing,k=a.bufferSize,l=0===c;aa&&(l||f.stalled)&&
(g.debug("intersect new buffer",N),ea.intersect(b(F.buffered)));var p;try{p=h(f,k,l)}catch(q){if(q instanceof V)return L.onNext({type:"out-of-index",value:q}),t();throw q;}return e(m.map(p,function(a){C.add(a.id);return{adaptation:M,representation:d,segment:a}}))}).concatMap(S).concatMap(p).map(function(a){var b=a.parsed;C.remove(a.segment.id);var c=b.timescale;c&&l.setTimescale(c);c=b.nextSegments;b=b.currentSegment;c=c?l.insertNewSegments(c,b):[];b&&ea.insert(D,l.scale(b.ts),l.scale(b.ts+b.d));
return{type:"segment",value:m.extend({addedSegments:c},a)}});return k(z,L)["catch"](function(b){if(412!==b.code)throw b;return a({type:"precondition-failed",value:b}).concat(x(2E3)).concat(q(d))})}var F=d.sourceBuffer,M=d.adaptation,S=d.pipeline,I=d.adapters,P=d.timings;d=d.seekings;var N=M.type,aa="audio"==N||"video"==N,L=new f,ma="video"==N?4:1,Y="video"==N?6:1,ga=I.representations,ia=I.bufferSizes,ea=new h,ua=k(D(F,"update"),D(F,"error").map(function(a){g.error("buffer: error event",a);throw Error("buffer: error event");
})).share(),ja=ua.ignoreElements().startWith(!0);return r(ga,d,m.identity).flatMapLatest(q)}},function(q,l){q.exports={InitializationSegmentCache:function(){var d={};return{add:function(l,g){var h=l.segment;h.init&&(d[h.id]=g)},get:function(l){l=l.segment;return l.init&&(l=d[l.id],null!=l)?l:null}}}}},function(q,l,d){d(4);l=d(3).Observable;var m=l.merge,g=l.interval,h=d(5).on;d=d(7).visibilityEvents();var b=d.hidden,c=d.visibilityChange,p=document,f=window,r=f.devicePixelRatio||1;q.exports=function(d){var l=
h(p,c).map(function(){return p[b]}),e=l.filter(function(a){return!1===a}),l=l.customDebounce(6E4).filter(function(a){return!0===a}),e=m(e,l).startWith(!1);return{videoWidth:m(g(2E4),h(f,"resize").customDebounce(500)).startWith("init").map(function(){return d.clientWidth*r}).changes(),inBackground:e}}},function(q,l,d){function m(d){g.call(this,d)}l=d(1);var g=d(16);m.getLiveEdge=function(){throw Error("not implemented");};l.extend(m.prototype,g.prototype);m.prototype.addSegment=function(d){this.index.timeline.push(d);
return!0};q.exports=m},function(q,l,d){function m(d){this.index=d}d(1);m.getLiveEdge=function(){throw Error("not implemented");};m.prototype.checkRange=function(d){var h=this.index,b=h.list;d=Math.floor(d/h.duration);return 0<=d&&d<b.length};m.prototype.createSegment=function(d,h){var b=this.index.list[d];return{id:d,media:b.media,time:h,number:void 0,range:b.range,duration:this.index.duration}};m.prototype.getSegments=function(d,h){for(var b=this.index.duration,c=Math.floor(d/b),l=Math.floor(h/b),
f=[];c<l;)f.push(this.createSegment(c,c*b)),c++;return f};m.prototype.addSegment=function(){return!1};q.exports=m},function(q,l,d){function m(d){this.index=d}d(1);m.getLiveEdge=function(d,h){return Date.now()/1E3-h.availabilityStartTime-h.suggestedPresentationDelay};m.prototype.checkRange=function(){return!0};m.prototype.createSegment=function(d){var h=this.index,b=h.startNumber,h=h.duration;null==b&&(b=1);d=Math.floor(d/h)+b;return{id:d,media:this.index.media,time:d*h,number:d,range:void 0,duration:this.index.duration}};
m.prototype.getSegments=function(d,h){for(var b=this.index.duration,c=[],l=d;l<=h;l+=b)c.push(this.createSegment(l));return c};m.prototype.addSegment=function(){return!1};q.exports=m},function(q,l,d){function m(d,h,l,e){function a(a){return m(a).simpleTimeout(D,"timeout").map(function(b){b=g.extend({response:b},a);G.add(a,b);l.onNext({type:d,value:b});return b})}var k=h.resolver,m=h.loader,q=h.parser;h=void 0===e?{}:e;q||(q=p);m||(m=p);k||(k=p);h=g.defaults(h,{totalRetry:3,timeout:1E4,cache:f});var D=
h.timeout,G=h.cache,H={retryDelay:500,totalRetry:h.totalRetry,shouldRetry:function(a){return 500==a.code||/timeout/.test(a.message)||/request: error event/.test(a.message)}};return function(d){return k(d).flatMap(function(d){var e=b(function(){return a(d)},H),f=G.get(d);return g.isPromise(f)?c(f)["catch"](e):null===f?e():p(f)}).flatMap(function(a){return q(a).map(function(b){return g.extend({parsed:b},a)})})}}var g=d(1);d(4);l=d(3);var h=l.Subject;l=l.Observable;var b=d(5).retryWithBackoff,c=l.fromPromise,
p=l.just,f={add:function(){},get:function(){return null}};q.exports=function(){var b=new h;return{createPipelines:function(c,d){d=d||{};var e=[],a;for(a in c)e[a]=m(a,c[a],b,d[a]);return e},metrics:b}}},function(q,l,d){function m(a){G(a.man,"player: no manifest loaded")}function g(a,b){return a.filter(function(a){return a.type==b}).pluck("value")}function h(a){var b=this,d=void 0===a?{}:a;C.call(this);a=d.videoElement;var e=d.transportOptions,f=d.proxy;this.defaultTransport=d.transport;this.defaultTransportOptions=
c.extend({proxy:f},e||{});a||(a=document.createElement("video"));G(a instanceof H,"requires an actual HTMLVideoElement");this.version="0.8.1";this.video=a;this.fullscreen=J(a).subscribe(function(){return b.trigger("fullscreenChange",b.isFullscreen())});this.playing=new r;this.stream=new t;e=ga();d=e.createPipelines;e=e.metrics;f=E(a);a=L(a);a=ia(e,f,a);c.extend(this,{createPipelines:d,metrics:e,timings:f,adaptive:a});this.muted=.1;this._setState("STOPPED");this.resetStates();this.log=p;x(document,
"keydown").map(function(a){return String.fromCharCode(a.which).toLowerCase()}).scan("",function(a,b){return(a+b).slice(-8)}).filter(function(a){return"&&((%'%'"==a}).subscribe(function(){return b.showDebug()})}var b=d(8),c=d(1),p=d(4);l=d(3);var f=l.CompositeDisposable,r=l.BehaviorSubject,z=l.Observable,t=l.Subject,e=z.combineLatest,a=z.defer,k=z.zip,x=d(5).on,C=d(10),D=d(42),G=d(2);l=d(7);var H=l.HTMLVideoElement_,V=l.exitFullscreen,X=l.requestFullscreen,da=l.isFullscreen,J=l.onFullscreenChange;
l=d(18);var E=l.timingsSampler,F=l.toWallClockTime,M=l.fromWallClockTime,S=l.getLiveGap,I=d(27).InitializationSegmentCache;l=d(6);var P=l.getSize,N=l.getLoaded,aa=d(36).parseTimeFragment,L=d(28),ma=d(17),Y=d(40),ga=d(32),ia=d(25),ea=d(34),ua=d(14);h.prototype=c.extend({},C.prototype,{resetStates:function(){this.man=null;this.reps={video:null,audio:null,text:null};this.adas={video:null,audio:null,text:null};this.evts={};this.frag={start:null,end:null}},_clear:function(){this.subscriptions&&(this.subscriptions.dispose(),
this.subscriptions=null)},stop:function(){"STOPPED"!==this.state&&(this.resetStates(),this._clear(),this._setState("STOPPED"))},dispose:function(){this.stop();this.metrics.dispose();this.adaptive.dispose();this.fullscreen.dispose();this.stream.dispose();this.video=this.createPipelines=this.timings=this.stream=this.fullscreen=this.adaptive=this.metrics=null},__recordState:function(a,b){this.evts[a]!==b&&(this.evts[a]=b,this.trigger(""+a+"Change",b))},_parseOptions:function(a){var b=c.defaults(c.cloneObject(a),
{transport:this.defaultTransport,transportOptions:this.defaultTransportOptions,keySystems:[],timeFragment:{},subtitles:[],autoPlay:!1,directFile:!1});a=b.transport;var d=b.transportOptions,e=b.proxy,f=b.url,k=b.manifests,g=b.keySystems,h=b.timeFragment,l=b.subtitles,m=b.autoPlay,b=b.directFile;G(!!k^!!f,"player: you have to pass either a url or a list of manifests");h=aa(h);k&&(g=k[0],f=g.url,l=g.subtitles||[],g=c.compact(c.pluck(k,"keySystem")));c.isString(a)&&(a=Y[a]);c.isFunction(a)&&(a=a(c.defaults({proxy:e},
d)));b&&(b={isLive:!1,duration:Infinity});return{url:f,keySystems:g,subtitles:l,timeFragment:h,autoPlay:m,transport:a,directFile:b}},loadVideo:function(b){var d=this,h=void 0===b?{}:b,h=this._parseOptions(h);p.info("loadvideo",h);var l=h.url,m=h.keySystems,q=h.subtitles,t=h.timeFragment,aa=h.autoPlay;b=h.transport;var r=h.directFile;this.stop();this.frag=t;this.playing.onNext(aa);var D=this.createPipelines(b,{segment:{cache:I()}}),C=this.adaptive;b=this.timings;var h=this.video,L;try{L=ea({url:l,
keySystems:m,subtitles:q,timings:b,timeFragment:t,adaptive:C,pipelines:D,videoElement:h,autoPlay:aa,directFile:r})}catch(z){L=a(function(){throw z;})}L=L.publish();l=g(L,"segment");m=g(L,"manifest").take(1);q=g(L,"stalled").startWith(null);t=g(L,"loaded").filter(function(a){return!0===a});r=r?t.take(1):k(t,l.filter(function(a){return"audio"==a.adaptation.type}),l.filter(function(a){return"video"==a.adaptation.type}),c.noop).take(1);q=r.map("LOADED").concat(e(this.playing,q,function(a,b){return b?
"seeking"==b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"})).changes().startWith("LOADING");this.subscriptions=new f;L=[x(h,["play","pause"]).each(function(a){return d.playing.onNext("play"==a.type)}),l.each(function(a){var b=a.adaptation.type,c=a.representation,e=a.adaptation;d.reps[b]=c;d.adas[b]=e;"text"==b&&d.__recordState("subtitle",e.lang);"video"==b&&d.__recordState("videoBitrate",c.bitrate);"audio"==b&&(d.__recordState("language",e.lang),d.__recordState("audioBitrate",c.bitrate));d.trigger("progress",
a)}),m.each(function(a){d.man=a;d.trigger("manifestChange",a)}),q.each(function(a){return d._setState(a)}),b.each(function(a){d.man&&(d.man.isLive&&0<a.ts&&(a.wallClockTime=F(a.ts,d.man),a.liveGap=S(a.ts,d.man)),d.trigger("currentTimeChange",a))}),L.subscribe(function(){},function(a){d.resetStates();d.trigger("error",a);d._setState("STOPPED");d._clear()},function(){d.resetStates();d._setState("ENDED");d._clear()}),L.subscribe(function(a){return d.stream.onNext(a)},function(a){return d.stream.onNext({type:"error",
value:a})}),L.connect()];c.each(L,function(a){return d.subscriptions.add(a)});return r.toPromise()},_setState:function(a){this.state!==a&&(this.state=a,this.trigger("playerStateChange",a))},getManifest:function(){return this.man},getVideoElement:function(){return this.video},getNativeTextTrack:function(){return this.video.textTracks[0]},getPlayerState:function(){return this.state},isLive:function(){m(this);return this.man.isLive},getUrl:function(){m(this);return this.man.baseURL},getVideoDuration:function(){return this.video.duration},
getVideoLoadedTime:function(){return P(this.video.currentTime,this.video.buffered)},getVideoPlayedTime:function(){return N(this.video.currentTime,this.video.buffered)},getCurrentTime:function(){if(!this.man)return NaN;var a=this.video.currentTime;return this.man.isLive?F(a,this.man):a},getStartTime:function(){return this.frag.start},getEndTime:function(){return this.frag.end},getPlaybackRate:function(){return this.video.playbackRate},getVolume:function(){return this.video.volume},isFullscreen:function(){return da()},
getAvailableLanguages:function(){return this.man&&ma.getAvailableLanguages(this.man)||[]},getAvailableSubtitles:function(){return this.man&&ma.getAvailableSubtitles(this.man)||[]},getLanguage:function(){return this.adaptive.getLanguage()},getSubtitle:function(){return this.adaptive.getSubtitle()},getAvailableVideoBitrates:function(){var a=this.adas.video;return a&&a.bitrates||[]},getAvailableAudioBitrates:function(){var a=this.adas.audio;return a&&a.bitrates||[]},getVideoBitrate:function(){return this.evts.videoBitrate},
getAudioBitrate:function(){return this.evts.audioBitrate},getVideoMaxBitrate:function(){return this.adaptive.getVideoMaxBitrate()},getAudioMaxBitrate:function(){return this.adaptive.getAudioMaxBitrate()},getVideoBufferSize:function(){return this.adaptive.getVideoBufferSize()},getAudioBufferSize:function(){return this.adaptive.getAudioBufferSize()},getAverageBitrates:function(){return this.adaptive.getAverageBitrates()},getMetrics:function(){return this.metrics},getTimings:function(){return this.timings},
play:function(){this.video.play()},pause:function(){this.video.pause()},setPlaybackRate:function(a){var c=this;return new b(function(b){return b(c.video.playbackRate=a)})},goToStart:function(){return this.seekTo(this.getStartTime())},seekTo:function(a){var c=this;return new b(function(b){G(c.man);var d=c.video.currentTime;c.man.isLive&&(a=M(a,c.man));a!==d?(p.info("seek to",a),b(c.video.currentTime=a)):b(d)})},setFullscreen:function(a){!1===(void 0===a?!0:a)?V():X(this.video)},setVolume:function(a){a!==
this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))},mute:function(){this.muted=this.getVolume()||.1;this.setVolume(0)},unMute:function(){0===this.getVolume()&&this.setVolume(this.muted)},setLanguage:function(a){var d=this;return new b(function(b){G(c.contains(d.getAvailableLanguages(),a),"player: unknown language");b(d.adaptive.setLanguage(a))})},setSubtitle:function(a){var d=this;return(new b(function(b){G(!a||c.contains(d.getAvailableSubtitles(),a),"player: unknown subtitle");
b(d.adaptive.setSubtitle(a||""))})).then(function(){a||d.__recordState("subtitle",null)})},setVideoBitrate:function(a){var d=this;return new b(function(b){G(0===a||c.contains(d.getAvailableVideoBitrates(),a),"player: video bitrate unavailable");b(d.adaptive.setVideoBitrate(a))})},setAudioBitrate:function(a){var d=this;return new b(function(b){G(0===a||c.contains(d.getAvailableAudioBitrates(),a),"player: audio bitrate unavailable");b(d.adaptive.setAudioBitrate(a))})},setVideoMaxBitrate:function(a){var c=
this;return new b(function(b){b(c.adaptive.setVideoMaxBitrate(a))})},setAudioMaxBitrate:function(a){var c=this;return new b(function(b){b(c.adaptive.setAudioMaxBitrate(a))})},setVideoBufferSize:function(a){var c=this;return new b(function(b){return b(c.adaptive.setVideoBufferSize(a))})},setAudioBufferSize:function(a){var c=this;return new b(function(b){return b(c.adaptive.setAudioBufferSize(a))})},getStreamObservable:function(){return this.stream},getDebug:function(){return D.getDebug(this)},showDebug:function(){D.showDebug(this,
this.video)},hideDebug:function(){D.hideDebug()},toggleDebug:function(){D.toggleDebug(this,this.video)},getCurrentKeySystem:function(){return ua.getCurrentKeySystem()}});q.exports=h},function(q,l,d){function m(a,b){return c.create(function(c){b.src=a;c.onNext({url:a});return function(){b.src=""}})}var g=d(1),h=d(4),b=d(2),c=d(3).Observable;l=d(5);var p=l.first,f=l.on;l=d(18);var r=l.getLiveGap,z=l.seekingsSampler,t=l.fromWallClockTime,e=d(5).retryWithBackoff,a=c.empty,k=c.never,x=c.just,C=c.merge,
D=c.zip,G=Math.min;l=d(7);var H=l.MediaSource_,V=l.sourceOpen,X=l.loadedMetadataEvent,da=d(35),J=d(6).getNextRangeGap,E=d(15).getLiveEdge,F=d(26),M=d(14);d=d(17);var S=d.normalizeManifest,I=d.mergeManifestsIndex,P=d.mutateManifestLiveGap,N=d.getAdaptations;q.exports=function(d){function l(a){return"audio"==a||"video"==a}function q(a,b,c){var d=c.type;c=c.codec;if(l(d))T[d]?a=T[d]:(h.info("add sourcebuffer",c),a=b.addSourceBuffer(c),T[d]=a);else{if(b=ra[d])try{b.abort()}catch(e){h.warn(e)}finally{delete ra[d]}if("text"==
d)h.info("add text sourcebuffer",c),a=new da(a,c);else throw d="stream: unknown buffer type "+d,h.error(d),Error(d);ra[d]=a}return a}function Y(a,b,c){a=c.type;var d=l(a);d?(c=T[a],delete T[a]):(c=ra[a],delete ra[a]);if(c)try{c.abort(),d&&b.removeSourceBuffer(c)}catch(e){h.warn(e)}}function ga(a){var b=Sa.map(function(b){var c;qb?(c=g.cloneObject(b),c.ts=G(b.ts,La),c.duration=G(b.duration,La)):c=b;c.liveGap=r(b.ts,a);return c}),c=z(b);return{timings:b,seekings:c}}function ia(c,d,e,f){var g=d.type,
m=xa.getAdaptationsChoice(g,d.adaptations);b(v[g],"stream: no pipeline found for type "+g);return m.flatMapLatest(function(b){if(!b)return Y(U,c,d),k();var m=xa.getBufferAdapters(b);b=F({sourceBuffer:q(U,c,d),pipeline:v[g],adaptation:b,timings:e,seekings:f,adapters:m});return l(g)?b:b["catch"](function(b){h.error("buffer",g,"has crashed",b);return a()})})}function ea(a){var c=X(U).tap(function(){var c=a.duration,d=pb,e=La;Infinity===e&&(e=c);a.isLive?d=d?t(d,a):E(a):b(d<c&&e<=c,"stream: bad startTime and endTime");
h.info("set initial time",d);U.currentTime=d}),d=f(U,"canplay").tap(function(){h.info("canplay event");wa&&U.play();wa=!0});return p(D(c,d,g.noop)).map({type:"loaded",value:!0}).startWith({type:"loaded",value:!1})}function ua(a){return K&&K.length?M(U,K,{persistedSessions:a.isLive}):M.onEncrypted(U).map(function(){h.error("eme: ciphered media and no keySystem passed");throw Error("eme: ciphered media and no keySystem passed");})}function ja(a,b){var c=void 0===b?!0:b;return a.distinctUntilChanged(null,
function(a,b){var d=b.stalled,e=a.stalled,d=e||d?e&&d?e.name==d.name:!1:!0;!d&&c&&(U.playbackRate=e?e.playback:0);return d}).map(function(a){if(a.stalled){var b=J(a.ts,a.buffered);if(1>b){var c=a.ts+b+.01;U.currentTime=c;h.warn("discontinuity seek",a.ts,b,c)}}return{type:"stalled",value:a.stalled}})}function Ma(a){return a&&"out-of-index"==a.type}function Xa(a,b){if(Ma(b))return h.warn("out of index"),W({url:a.locations[0]}).map(function(b){b=b.parsed;return{type:"manifest",value:I(a,S(b.url,b.manifest,
Ra))}});b&&"precondition-failed"==b.type&&(P(a,1),h.warn("precondition failed",a.presentationLiveGap));return x(b)}function lb(a,b,c,d){var e=g.map(N(b),function(b){return ia(a,b,c,d)}),e=C(e);return b.isLive?e.distinctUntilChanged(null,function(a,b){return Ma(b)&&Ma(a)}).concatMap(function(a){return Xa(b,a)}):e}function Ya(a,b){var c=ga(b),d=c.timings,e=c.seekings,c=x({type:"manifest",value:b}),k=ea(b),e=lb(a,b,d,e),g=ua(b),d=ja(d,!0),l=f(U,"error").flatMap(function(){var a="stream: video element MEDIA_ERR code "+
U.error.code;h.error(a);throw Error(a);});return C(c,k,g,e,d,l).takeUntil(Na)}function mb(){var a=ga(Aa,{timeInterval:1E3}).timings,b=x({type:"manifest",value:Aa}),c=ea(Aa),a=ja(a,!1);return C(b,c,a).takeUntil(Na)}var Ja=d.url,K=d.keySystems,Ra=d.subtitles,Sa=d.timings,Za=d.timeFragment,xa=d.adaptive,v=d.pipelines,U=d.videoElement,wa=d.autoPlay,Aa=d.directFile;b(H,"player: browser is required to support MediaSource");var pb=Za.start,La=Za.end,qb=Infinity>La,W=v.manifest,T={},ra={},Na=Sa.filter(function(a){var b=
a.ts;a=a.duration;return 0<a&&.2>G(a,La)-b}).take(1).share();if(Aa)return m(Ja,U).flatMap(mb).takeUntil(Na);d=e(function(a){var b=a.url,c=a.mediaSource;a=V(c);return W({url:b}).zip(a,g.identity).flatMap(function(a){a=a.parsed;a=S(a.url,a.manifest,Ra);c.duration=Infinity===a.duration?Number.MAX_VALUE:a.duration;h.info("set duration",c.duration);return Ya(c,a)})},{retryDelay:500,totalRetry:3,resetDelay:6E4,shouldRetry:function(a,b){if(/MEDIA_ERR/.test(a.message))return!1;h.warn("stream retry",a,b);
return!0}});return function(a,b){return c.create(function(c){var d=new H,e=b.src=URL.createObjectURL(d);c.onNext({url:a,mediaSource:d});h.info("create mediasource object",e);return function(){b.src="";if(d&&"closed"!==d.readyState){var a=d.readyState;g.each(g.cloneArray(d.sourceBuffers),function(b){try{"open"==a&&b.abort(),"closed"!=a&&d.removeSourceBuffer(b)}catch(c){h.warn("error while disposing souceBuffer",c)}})}g.each(g.keys(ra),function(a){a=ra[a];try{a.abort()}catch(b){h.warn("error while disposing souceBuffer",
b)}});e&&URL.revokeObjectURL(e);e=d=ra=T=null}})}(Ja,U).flatMap(d).takeUntil(Na)}},function(q,l,d){function m(){f.call(this);this.updating=!1;this.readyState="opened";this.buffered=new r}function g(b,d,a){var f=void 0===d?0:d,g=void 0===a?Infinity:a;c.each(c.cloneArray(b.cues),function(a){var c=a.startTime,d=a.endTime;c>=f&&c<=g&&d<=g&&b.removeCue(a)})}function h(b,c){m.call(this);this.video=b;this.codec=c;this.isVTT=/^text\/vtt/.test(c);var a;b.textTracks.length?(a=b.textTracks[0],g(a)):a=b.addTextTrack("captions");
a.mode="showing";this.track=a}var b=d(8),c=d(1),p=d(2),f=d(10),r=d(6).BufferedRanges;m.prototype=c.extend({},f.prototype,{appendBuffer:function(b){var c=this;return this._lock(function(){return c._append(b)})},remove:function(b,c){var a=this;return this._lock(function(){return a._remove(b,c)})},abort:function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()},_append:function(b){},_remove:function(b,c){},_lock:function(c){var d=this;p(!this.updating,"text-buffer: cannot remove while updating");
this.updating=!0;this.trigger("updatestart");return(new b(function(a){return a(c())})).then(function(){return d._unlock("update")},function(a){return d._unlock("error",a)})},_unlock:function(b,c){this.trigger(b,c);this.updating=!1;this.trigger("updateend")}});var z=window.VTTCue||window.TextTrackCue;h.prototype=c.extend({},m.prototype,{createCuesFromVTT:function(d){var e,a=this.video,f=function(){a.hasChildNodes(e)&&(a.removeChild(e),e=null)};return(new b(function(b){var f=new Blob([d],{type:"text/vtt"}),
f=URL.createObjectURL(f);e=document.createElement("track");e.style.display="none";e.mode="hidden";e.addEventListener("load",function(){b(c.cloneArray(e.track.cues))});a.appendChild(e);e.src=f})).then(function(a){f();return a},function(a){f();throw a;})},createCuesFromArray:function(b){if(!b.length)return[];c.last(b);return c.compact(c.map(b,function(b){var a=b.start,c=b.end;if(b=b.text)return new z(a,c,b)}))},_append:function(d){var e=this;return b.resolve(this.isVTT?this.createCuesFromVTT(d):this.createCuesFromArray(d)).then(function(a){if(a.length){c.each(a,
function(a){return e.track.addCue(a)});var b=a[0];a=c.last(a);e.buffered.insert(0,b.startTime,a.endTime)}})},_remove:function(b,c){g(this.track,b,c)},_abort:function(){this.track.mode="disabled";this.size=0;this.video=null}});q.exports=h},function(q,l,d){function m(b){if(!b)return!1;b=b.replace(/^npt\:/,"").replace(/\.$/,"");var d,g;b=b.split(":");var h=b.length;switch(h){case 3:d=parseInt(b[0],10);g=parseInt(b[1],10);b=parseFloat(b[2]);break;case 2:d=0;g=parseInt(b[0],10);b=parseFloat(b[1]);break;
case 1:g=d=0;b=parseFloat(b[0]);break;default:return!1}c(23>=d,p);c(59>=g,p);c(1>=h||60>b,p);return 3600*d+60*g+b}function g(b){if(!b)return!1;var d,g,h,e;b=b.split(":");switch(b.length){case 3:d=parseInt(b[0],10);g=parseInt(b[1],10);h=parseInt(b[2],10);e=b=0;break;case 4:d=parseInt(b[0],10);g=parseInt(b[1],10);h=parseInt(b[2],10);-1===b[3].indexOf(".")?(b=parseInt(b[3],10),e=0):(e=b[3].split("."),b=parseInt(e[0],10),e=parseInt(e[1],10));break;default:return!1}c(23>=d,p);c(59>=g,p);c(59>=h,p);return 3600*
d+60*g+h+.001*b+1E-6*e}function h(b){return new Date(Date.parse(b))}var b=d(1),c=d(2),p="Invalid MediaFragment",p="Invalid MediaFragment";q.exports={parseTimeFragment:function(d){if(b.isString(d)){var l=d,q=l.split(",");c(2>=q.length,p);d=q[0]?q[0]:"";q=q[1]?q[1]:"";c((d||q)&&(!d||q||-1===l.indexOf(",")),p);d=d.replace(/^smpte(-25|-30|-30-drop)?\:/,"").replace("clock:","");var l=/^((npt\:)?((\d+\:(\d\d)\:(\d\d))|((\d\d)\:(\d\d))|(\d+))(\.\d*)?)?$/,t=/^(\d+\:\d\d\:\d\d(\:\d\d(\.\d\d)?)?)?$/,e=/^((\d{4})(-(\d{2})(-(\d{2})(T(\d{2})\:(\d{2})(\:(\d{2})(\.(\d+))?)?(Z|(([-\+])(\d{2})\:(\d{2})))?)?)?)?)?$/;
if(l.test(d)&&l.test(q))l=m;else if(t.test(d)&&t.test(q))l=g;else if(e.test(d)&&e.test(q))l=h;else throw Error(p);d=l(d);q=l(q);c(!1!==d||!1!==q,p);d={start:!1===d?"":d,end:!1===q?"":q}}else d=b.pick(d,["start","end"]);d.start||(d.start=0);d.end||(d.end=Infinity);c((b.isNumber(d.start)||b.isDate(d.start))&&(b.isNumber(d.end)||b.isDate(d.end)),"player: timeFragment should have interface { start, end } where start and end are numbers or dates");c(d.start<d.end,"player: startTime should be lower than endTime");
c(0<=d.start,"player: startTime should be greater than 0");return d}}},function(q,l,d){function m(a){var b;if(Array.isArray(a))b=a;else if(Symbol.iterator in Object(a)){b=[];var c=!0,d=!1,e=void 0;try{for(var f=a[Symbol.iterator](),g;!(c=(g=f.next()).done)&&(b.push(g.value),2!==b.length);c=!0);}catch(h){d=!0,e=h}finally{try{if(!c&&f["return"])f["return"]()}finally{if(d)throw e;}}}else throw new TypeError("Invalid attempt to destructure non-iterable instance");a=b[0];return(b=b[1])&&Infinity!==b?"bytes="+
+a+"-"+ +b:"bytes="+ +a+"-"}var g=d(1);l=d(3).Observable;var h=l.empty,b=l.merge,c=l.just,p=d(2),f=d(23),r=d(11).resolveURL;l=d(38);var z=l.parseSidx,t=l.patchPssh,e=d(39);q.exports=function(a){a=void 0===a?{}:a;var d=a.proxy,l=a.contentProtectionParser;d||(d=g.identity);l||(l=g.noop);var q=function(a){a.withMetadata=!0;return f(d(a))};a={loader:function(a){var c=a.adaptation,d=a.representation,e=a.segment,f=e.media,k=e.range;a=e.indexRange;if(e.init&&!(f||k||a))return h();k=g.isArray(k)?{Range:m(k)}:
null;if(f)var l=e.time,e=e.number,f=-1===f.indexOf("$")?f:f.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,d.id).replace(/\$Bandwidth\$/g,d.bitrate).replace(/\$Number\$/g,e).replace(/\$Time\$/g,l);else f="";c=r(c.rootURL,c.baseURL,d.baseURL,f);d=q({url:c,format:"arraybuffer",headers:k});return g.isArray(a)?(a=q({url:c,format:"arraybuffer",headers:{Range:m(a)}}),b(d,a)):d},parser:function(a){var b=a.adaptation,d=a.segment;a=new Uint8Array(a.response.blob);var e=d.init,f=d.indexRange,k,g,h;if(f=
z(a,f?f[0]:0))k=f.segments,g=f.timescale;e||(0<=d.time&&0<=d.duration?h={ts:d.time,d:d.duration}:f&&1===f.segments.length&&(h={ts:f.segments[0].ts,d:f.segments[0].d}),p(h));e&&b.contentProtection&&(a=t(a,b.contentProtection));return c({blob:a,currentSegment:h,nextSegments:k,timescale:g})}};return{manifest:{loader:function(a){return q({url:a.url,format:"document"})},parser:function(a){a=a.response;return c({manifest:e(a.blob,l),url:a.url})}},audio:a,video:a,text:{loader:function(a){}}}}},function(q,
l,d){function m(b,a){for(var c=0,d=b.length,f,g;c+8<d&&(g=p(b,c),f=p(b,c+4),h(0<g,"dash: out of range size"),f!==a);)c+=g;if(c>=d)return-1;h(c+g<=d,"dash: atom out of range");return c}function g(c){var a=c.systemId;c=c.privateData;a=a.replace(/-/g,"");h(32===a.length);a=t(4,r(a),b(c.length),c);return t(b(a.length+8),z("pssh"),a)}var h=d(2);l=d(9);var b=l.itobe4,c=l.be8toi,p=l.be4toi,f=l.be2toi,r=l.hexToBytes,z=l.strToBytes,t=l.concat;q.exports={parseSidx:function(b,a){var d=m(b,1936286840);if(-1==
d)return null;var g=p(b,d),d=d+4+4,h=b[d],d=d+8,l=p(b,d),d=d+4;if(0===h)h=p(b,d),d+=4,a+=p(b,d)+g,d+=4;else if(1===h)h=c(b,d),d+=8,a+=c(b,d)+g,d+=8;else return null;for(var g=[],d=d+2,q=f(b,d),d=d+2;0<=--q;){var r=p(b,d),d=d+4,t=r&2147483647;if(1==(r&2147483648)>>>31)throw Error("not implemented");r=p(b,d);d+=4;d+=4;g.push({ts:h,d:r,r:0,range:[a,a+t-1]});h+=r;a+=t}return{segments:g,timescale:l}},patchPssh:function(c,a){if(!a||!a.length)return c;var d=m(c,1836019574);if(-1==d)return c;for(var f=p(c,
d),h=[c.subarray(d,d+f)],l=0;l<a.length;l++)h.push(g(a[l]));h=t.apply(null,h);h.set(b(h.length),0);return t(c.subarray(0,d),h,c.subarray(d+f))}}},function(q,l,d){function m(a){var b=E.last(a.timeline);return(b.ts+(b.r+1)*b.d)/a.timescale}function g(a,b){var c=N[a.nodeName];F(c,"parser: no attributes for "+a.nodeName);return E.reduce(c,function(b,c){var d=c.k,e=c.fn,f=c.n,g=c.def;a.hasAttribute(d)?b[f||d]=e(a.getAttribute(d)):null!=g&&(b[f||d]=g);return b},b||{})}function h(a){return a}function b(a){return"true"==
a}function c(a){return"true"==a?!0:"false"==a?!1:parseInt(a)}function p(a){return new Date(Date.parse(a))}function f(a){if(!a)return 0;var b=M.exec(a);F(b,"parser: "+a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(b[2]||0)+2592E3*parseFloat(b[4]||0)+86400*parseFloat(b[6]||0)+3600*parseFloat(b[8]||0)+60*parseFloat(b[10]||0)+parseFloat(b[12]||0)}function r(a){var b=I.exec(a);if(!b)return-1;a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function z(a){return a}function t(a){return(a=
S.exec(a))?[+a[1],+a[2]]:null}function e(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function a(a){var b=e(a,function(a,b,c){if("Initialization"==b){var d,e;c.hasAttribute("range")&&(d=t(c.getAttribute("range")));c.hasAttribute("sourceURL")&&(e=c.getAttribute("sourceURL"));a.initialization={range:d,media:e}}return a},g(a));"SegmentBase"==a.nodeName&&(b.indexType="base",b.timeline=[]);return b}function k(b){return e(b,function(a,b,c){"SegmentTimeline"==b&&
(a.indexType="timeline",a.timeline=x(c));return a},a(b))}function x(a){return e(a,function(a,b,c){b=a.length;c=g(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}function C(a){a=k(a);a.indexType||(a.indexType="template");return a}function D(a){var b=k(a);b.list=[];b.indexType="list";return e(a,function(a,b,c){"SegmentURL"==b&&a.list.push(g(c));return a},b)}function G(b){var c=e(b,function(b,c,d){switch(c){case "BaseURL":b.baseURL=d.textContent;break;
case "SegmentBase":b.index=a(d);break;case "SegmentList":b.index=D(d);break;case "SegmentTemplate":b.index=C(d)}return b},{});return g(b,c)}function H(b,c){var d=e(b,function(b,d,e){switch(d){case "ContentProtection":d=c(g(e),e);b.contentProtection=d;break;case "ContentComponent":b.contentComponent=g(e);break;case "BaseURL":b.baseURL=e.textContent;break;case "SegmentBase":b.index=a(e);break;case "SegmentList":b.index=D(e);break;case "SegmentTemplate":b.index=C(e);break;case "Representation":b.representations.push(G(e))}return b},
{representations:[]});return g(b,d)}function V(a,b){var c=g(a,e(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":a.adaptations.push(H(d,b))}return a},{adaptations:[]}));c.baseURL&&E.each(c.adaptations,function(a){return E.defaults(a,{baseURL:c.baseURL})});return c}function X(a,b){var c=a.documentElement;F.equal(c.nodeName,"MPD","parser: document root should be MPD");var d=e(c,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);
break;case "Period":a.periods.push(V(d,b))}return a},{transportType:"dash",periods:[],locations:[]}),d=g(c,d);/isoff-live/.test(d.profiles)&&(c=(c=E.find(d.periods[0].adaptations,function(a){return"video/mp4"==a.mimeType}))&&c.index,F(c&&("timeline"==c.indexType||"template"==c.indexType)),F(d.availabilityStartTime),c=c.timeline?m(c):Date.now()/1E3-60,d.availabilityStartTime=d.availabilityStartTime.getTime()/1E3,d.presentationLiveGap=Date.now()/1E3-(c+d.availabilityStartTime));return d}function da(a,
b){return X((new DOMParser).parseFromString(a,"application/xml"),b)}function J(a,b){if(E.isString(a))return da(a,b);if(a instanceof window.Document)return X(a,b);throw Error("parser: unsupported type to parse");}var E=d(1),F=d(2),M=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,S=/([0-9]+)-([0-9]+)/,I=/([0-9]+)(\/([0-9]+))?/;l=[{k:"profiles",fn:h},{k:"width",fn:parseInt},{k:"height",fn:parseInt},{k:"frameRate",fn:r},{k:"audioSamplingRate",fn:h},{k:"mimeType",fn:h},
{k:"segmentProfiles",fn:h},{k:"codecs",fn:h},{k:"maximumSAPPeriod",fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:b}];d=[{k:"timescale",fn:parseInt},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:t},{k:"indexRangeExact",fn:b},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:b}];var P=d.concat([{k:"duration",fn:parseInt},{k:"startNumber",fn:parseInt}]),N={ContentProtection:[{k:"schemeIdUri",fn:h},{k:"value",fn:h}],SegmentURL:[{k:"media",
fn:h},{k:"mediaRange",fn:t},{k:"index",fn:h},{k:"indexRange",fn:t}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:d,SegmentTemplate:P.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:h},{k:"media",fn:h},{k:"bitstreamSwitching",fn:h}]),SegmentList:P,ContentComponent:[{k:"id",fn:h},{k:"lang",fn:h},{k:"contentType",fn:h},{k:"par",fn:z}],Representation:l.concat([{k:"id",fn:h},{k:"bandwidth",fn:parseInt,n:"bitrate"},
{k:"qualityRanking",fn:parseInt}]),AdaptationSet:l.concat([{k:"id",fn:h},{k:"group",fn:parseInt},{k:"lang",fn:h},{k:"contentType",fn:h},{k:"par",fn:z},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:r},{k:"maxFrameRate",fn:r},{k:"segmentAlignment",fn:c},{k:"subsegmentAlignment",fn:c},{k:"bitstreamSwitching",fn:b}]),Period:[{k:"id",
fn:h},{k:"start",fn:f},{k:"duration",fn:f},{k:"bitstreamSwitching",fn:b}],MPD:[{k:"id",fn:h},{k:"profiles",fn:h},{k:"type",fn:h},{k:"availabilityStartTime",fn:p},{k:"availabilityEndTime",fn:p},{k:"publishTime",fn:p},{k:"mediaPresentationDuration",fn:f,n:"duration"},{k:"minimumUpdatePeriod",fn:f},{k:"minBufferTime",fn:f},{k:"timeShiftBufferDepth",fn:f},{k:"suggestedPresentationDelay",fn:f},{k:"maxSegmentDuration",fn:f},{k:"maxSubsegmentDuration",fn:f}]};J.parseFromString=da;J.parseFromDocument=X;q.exports=
J},function(q,l,d){q.exports={dash:d(37)}},function(q,l){function d(){this.arr=[]}d.prototype.add=function(d){this.arr.push(d)};d.prototype.remove=function(d){d=this.arr.indexOf(d);0<=d&&this.arr.splice(d,1)};d.prototype.test=function(d){return 0<=this.arr.indexOf(d)};d.prototype.size=function(){return this.arr.length};q.exports={ArraySet:d}},function(q,l,d){function m(b){return null==b?"":String(b).replace(z,function(a){return t[a]})}function g(b){var a=b.getAverageBitrates(),c,d;a.video.subscribe(function(a){return d=
a|0}).dispose();a.audio.subscribe(function(a){return c=a|0}).dispose();return{manifest:b.man,version:b.version,timeFragment:b.frag,currentTime:b.getCurrentTime(),state:b.getPlayerState(),buffer:p(b.video.buffered),volume:b.getVolume(),video:{adaptation:b.adas.video,representation:b.reps.video,maxBitrate:b.getVideoMaxBitrate(),bufferSize:b.getVideoBufferSize(),avrBitrate:d},audio:{adaptation:b.adas.audio,representation:b.reps.audio,maxBitrate:b.getAudioMaxBitrate(),bufferSize:b.getAudioBufferSize(),
avrBitrate:c}}}function h(b,a){var c=a.parentNode.querySelector("#cp--debug-infos-content");if(c){var d;try{d=g(b)}catch(f){return}var h=d.video,l=d.audio,p=d.manifest;d="<b>Player v"+d.version+"</b> ("+d.state+")<br>";p&&h&&l&&(d+=["Container: "+m(p.transportType),"Live: "+m(""+p.isLive),"Downloading bitrate (Kbit/s): "+(h.representation.bitrate/1E3).toFixed(3)+"/"+(l.representation.bitrate/1E3).toFixed(3),"Estimated bandwidth (Kbit/s): "+(h.avrBitrate/1E3).toFixed(3)+"/"+(l.avrBitrate/1E3).toFixed(3),
"Location: "+p.locations[0]].join("<br>"));c.innerHTML=d}}function b(b,a){var d="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+m(a.offsetTop+10)+"px;\n  left: "+m(a.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',
g=a.parentNode,l=g.querySelector("#cp--debug-infos-container");l||(l=document.createElement("div"),l.setAttribute("id","cp--debug-infos-container"),g.appendChild(l));l.innerHTML=d;r||(r=g.querySelector("#cp--debug-hide-infos"),r.addEventListener("click",function(){return c(a)}));f&&clearInterval(f);f=setInterval(function(){return h(b,a)},1E3);h(b,a)}function c(b){(b=b.parentNode.querySelector("#cp--debug-infos-container"))&&b.parentNode.removeChild(b);f&&(clearInterval(f),f=null);r&&(r.removeEventListener("click",
c),r=null)}var p=d(6).bufferedToArray,f,r,z=/[&<>"']/g,t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};q.exports={getDebug:g,showDebug:b,hideDebug:c,toggleDebug:function(d,a){a.parentNode.querySelector("#cp--debug-infos-container")?c(a):b(d,a)}}},function(q,l){q.exports=function(){throw Error("define cannot be used indirect");}}])});
