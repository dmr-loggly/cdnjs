(function(q,l){"object"===typeof exports&&"object"===typeof module?module.exports=l():"function"===typeof define&&define.amd?define([],l):"object"===typeof exports?exports.RxPlayer=l():q.RxPlayer=l()})(this,function(){return function(q){function l(n){if(d[n])return d[n].exports;var p=d[n]={exports:{},id:n,loaded:!1};q[n].call(p.exports,p,p.exports,l);p.loaded=!0;return p.exports}var d={};l.m=q;l.c=d;l.p="";return l(0)}([function(q,l,d){q.exports=d(32)},function(q,l){function d(a,b){for(var f=-1,h=
a?a.length:0;++f<h;)if(a[f]===b)return f;return-1}function n(a){return!!a&&"object"==typeof a&&"[object Date]"==h.call(a)||!1}function p(a){return!!a&&"function"==typeof a||!1}function g(a){return"number"==typeof a}function b(a){return!!a&&"object"==typeof a||!1}function a(a){return"string"==typeof a}function k(a){for(var f=arguments,h=1;h<f.length;h++){var c=f[h];if(b(c))for(var d=D(c),k=0,z=d.length;k<z;k++)a[d[k]]=c[d[k]]}return a}function t(a,b){for(var f=a?a.length:0,h=-1,c=Array(f);++h<f;)c[h]=
b(a[h],h);return c}function c(a,b,f){for(var h=a?a.length:0,c=-1;++c<h;)f=b(f,a[c],c);return f}function u(a,b){for(var f=a?a.length:0,h=-1,c=[];++h<f;)b(a[h],h)&&c.push(a[h]);return c}function r(b,f){for(var h in b)if(f.hasOwnProperty(h)){var c=b[h],k=f[h];a(c)||g(c)||n(c)?b[h]=k:z(c)?(c.length=0,E.apply(c,k)):b[h]=r(c,k)}return b}var x=Object.prototype,h=x.toString,f=x.hasOwnProperty,z=Array.isArray,E=Array.prototype.push,D=Object.keys||function(a){var b=[],f;for(f in a)a.hasOwnProperty(f)&&b.push(a[f]);
return b},x=function(){var a=0;return function(b){b||(b="");return""+b+a++}}();q.exports={chunk:function(a,b){for(var f=[],h=0,c=-1,k=a?a.length:0;++c<k;)f[h]?f[h].length===b?f[++h]=[a[c]]:f[h].push(a[c]):f[h]=[a[c]];return f},compact:function(a){return u(a,function(a){return null!=a})},contains:function(a,b){return-1<d(a,b)},cloneArray:function(a){for(var b=a?a.length:0,f=-1,h=Array(b);++f<b;)h[f]=a[f];return h},cloneObject:function(a){return k({},a)},defaults:function(a,b){for(var f in b)"undefined"==
typeof a[f]&&(a[f]=b[f]);return a},each:function(a,b){for(var f=a?a.length:0,h=-1;++h<f;)b(a[h],h)},extend:k,values:function(a){for(var b=D(a),f=-1,h=b.length,c=Array(h);++f<h;)c[f]=a[b[f]];return c},filter:u,find:function(a,b){for(var f=-1,h=a?a.length:0;++f<h;)if(b(a[f],f))return a[f]},between:function(a,b,f){for(var h=-1,c=a?a.length:0;++h<c;)if(a[h][b]<=f&&a[h+1]&&f<a[h+1][b])return a[h]},findLast:function(a,b){for(var f=a?a.length:0;0<=--f;)if(b(a[f],f))return a[f]},flatten:function(a,b){for(var f=
b?t(a,b):a,h=-1,c=f?f.length:0,k=[];++h<c;){var d=f[h];if(d&&"object"==typeof d&&"number"==typeof d.length){var z=-1,g=d.length,x=k.length;for(k.length+=g;++z<g;)k[x++]=d[z]}else k.push(d)}return k},groupBy:function(a,b){var f;f=p(b)?b:function(a){return a[b]};return c(a,function(a,b){var h=f(b);(z(a[h])?a[h]:a[h]=[]).push(b);return a},{})},identity:function(a){return a},indexOf:d,isArray:z,isDate:n,isFunction:p,isNumber:g,isObject:b,isString:a,isPromise:function(a){return!!a&&"function"==typeof a.then},
isObservable:function(a){return!!a&&"function"==typeof a.subscribe},keys:D,last:function(a){return a[a.length-1]},map:t,memoize:function(a,b){var h=function H(){var h=H.cache,c=b?b.apply(this,arguments):arguments[0];return f.call(h,c)?h[c]:h[c]=a.apply(this,arguments)};h.cache={};return h},noop:function(){},pad:function(a,b){a=a.toString();return a.length>=b?a:(Array(b+1).join("0")+a).slice(-b)},pick:function(a,b){return c(b,function(b,f){f in a&&(b[f]=a[f]);return b},{})},pluck:function(a,b){return t(a,
function(a){return a[b]})},reduce:c,simpleMerge:r,sortedIndex:function(a,b,f){var h=0,c=a?a.length:h;for(b=f(b);h<c;){var k=h+c>>>1;f(a[k])<b?h=k+1:c=k}return h},sortedMerge:function(a,b,f){for(var h=0,c=0,k=0,d=a.length,z=b.length,g=[];h<d&&c<z;)a[h][f]<=b[c][f]?(g[k]=a[h],h++,k++):0<k&&b[c][f]<=g[k-1][f]?c++:(g[k]=b[c],c++,k++);if(h<d)for(f=h;f<d;f++)g[k]=a[f],k++;else for(f=c;f<z;f++)g[k]=b[f],k++;return g},tryCatch:function(a){try{return a()}catch(b){return b}},uniqueId:x}},function(q,l){function d(p){this.name=
"AssertionError";this.message=p;Error.captureStackTrace&&Error.captureStackTrace(this,d)}function n(p,g){if(!p)throw new d(g);}d.prototype=Error();n.equal=function(d,g,b){return n(d===g,b)};n.iface=function(d,g,b){n(d,g+" should be an object");for(var a in b)n.equal(typeof d[a],b[a],g+" should have property "+a+" as a "+b[a])};q.exports=n},function(q,l,d){d(5);q.exports=d(12)},function(q,l){function d(){}var n={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},p=function(){};d.error=p;d.warn=p;d.info=p;d.debug=
p;d.setLevel=function(g){"string"==typeof g&&(g=n[g]);d.error=g>=n.ERROR?console.error.bind(console):p;d.warn=g>=n.WARNING?console.warn.bind(console):p;d.info=g>=n.INFO?console.info.bind(console):p;d.debug=g>=n.DEBUG?console.log.bind(console):p};q.exports=d},function(q,l,d){l=d(12);var n=l.Observable,p=l.SingleAssignmentDisposable;l=l.config;var g=n.fromEvent,b=n.merge,a=n.timer,k=d(20).getBackedoffDelay,t=d(1),c=t.isArray,u=t.map,r=t.noop,x=d(21);l.useNativeEvents=!0;d=n.prototype;d.log=function(){return this};
d.each=function(a){return this.subscribe(a,r)};var h=function(a,b){return a===b};d.changes=function(a){return this.distinctUntilChanged(a,h)};d.customDebounce=function(a,b){var h=this;return n.create(function(c){var k=x(function(a){return c.onNext(a)},a,b),d=h.subscribe(k,function(a){return c.onError(a)},function(){return c.onCompleted()});return function(){k.dispose();d.dispose()}})};d.simpleTimeout=function(a){var b=1>=arguments.length||void 0===arguments[1]?"timeout":arguments[1],h=this;return n.create(function(c){var k=
new p,d=setTimeout(function(){return c.onError(Error(b))},a);k.setDisposable(h.subscribe(function(a){clearTimeout(d);c.onNext(a)},function(a){return c.onError(a)},function(a){return c.onCompleted()}));return function(){clearTimeout(d);k.dispose()}})};q.exports={on:function(a,h){return c(h)?b(u(h,function(b){return g(a,b)})):g(a,h)},first:function(a){return a.take(1)},only:function(a){return n.never().startWith(a)},retryWithBackoff:function(b,h){var c=h.retryDelay,d=h.totalRetry,g=h.shouldRetry,t=
h.resetDelay,u=0,n;n=0<t?x(function(){return u=0},t):r;return function O(){for(var h=0,x=arguments.length,z=Array(x);h<x;h++)z[h]=arguments[h];return b.apply(null,z)["catch"](function(b){if(g&&!g(b,u)||u++>=d)throw b;b=k(c,u);return a(b).flatMap(function(){n();return O.apply(null,z)})})}}}},function(q,l,d){function n(b){for(var a=b.length,k=new Uint8Array(a),d=0;d<a;d++)k[d]=b.charCodeAt(d)&255;return k}function p(b,a){a||(a="");for(var k="",d=0;d<b.byteLength;d++)k+=(b[d]>>>4).toString(16),k+=(b[d]&
15).toString(16),a.length&&(k+=a);return k}var g=d(2);q.exports={totalBytes:function(b){for(var a=0,k=0;k<b.length;k++)a+=b[k].byteLength;return a},strToBytes:n,bytesToStr:function(b){return String.fromCharCode.apply(null,b)},bytesToUTF16Str:function(b){for(var a="",k=b.length,d=0;d<k;d+=2)a+=String.fromCharCode(b[d]);return a},hexToBytes:function(b){for(var a=b.length,d=new Uint8Array(a/2),g=0,c=0;g<a;g+=2,c++)d[c]=parseInt(b.substr(g,2),16)&255;return d},bytesToHex:p,concat:function(){for(var b=
arguments.length,a=-1,d=0,g;++a<b;)g=arguments[a],d+="number"===typeof g?g:g.length;for(var d=new Uint8Array(d),c=0,a=-1;++a<b;)g=arguments[a],"number"===typeof g?c+=g:0<g.length&&(d.set(g,c),c+=g.length);return d},be2toi:function(b,a){return(b[0+a]<<8)+(b[1+a]<<0)},be4toi:function(b,a){return 16777216*b[0+a]+65536*b[1+a]+256*b[2+a]+b[3+a]},be8toi:function(b,a){return 4294967296*(16777216*b[0+a]+65536*b[1+a]+256*b[2+a]+b[3+a])+16777216*b[4+a]+65536*b[5+a]+256*b[6+a]+b[7+a]},le2toi:function(b,a){return(b[0+
a]<<0)+(b[1+a]<<8)},le4toi:function(b,a){return b[0+a]+256*b[1+a]+65536*b[2+a]+16777216*b[3+a]},le8toi:function(b,a){return b[0+a]+256*b[1+a]+65536*b[2+a]+16777216*b[3+a]+(b[4+a]+256*b[5+a]+65536*b[6+a]+16777216*b[7+a]*4294967296)},itobe2:function(b){return new Uint8Array([b>>>8&255,b&255])},itobe4:function(b){return new Uint8Array([b>>>24&255,b>>>16&255,b>>>8&255,b&255])},itobe8:function(b){var a=b%4294967296;b=(b-a)/4294967296;return new Uint8Array([b>>>24&255,b>>>16&255,b>>>8&255,b&255,a>>>24&
255,a>>>16&255,a>>>8&255,a&255])},itole2:function(b){return new Uint8Array([b&255,b>>>8&255])},itole4:function(b){return new Uint8Array([b&255,b>>>8&255,b>>>16&255,b>>>24&255])},itole8:function(b){var a=b%4294967296;b=(b-a)/4294967296;return new Uint8Array([b&255,b>>>8&255,b>>>16&255,b>>>24&255,a&255,a>>>8&255,a>>>16&255,a>>>24&255])},guidToUuid:function(b){g.equal(b.length,16,"UUID length should be 16");var a=n(b);b=a[0];var d=a[1],t=a[2],c=a[3],u=a[4],r=a[5],x=a[6],h=a[7],f=a.subarray(8,10),a=a.subarray(10,
16),z=new Uint8Array(16);z[0]=c;z[1]=t;z[2]=d;z[3]=b;z[4]=r;z[5]=u;z[6]=h;z[7]=x;z.set(f,8);z.set(a,10);return p(z)},toBase64URL:function(b){return btoa(b).replace(/\=+$/,"")}}},function(q,l,d){q.exports=d(48).Promise},function(q,l,d){function n(a){return a&&"function"==typeof a.then?a:r.resolve(a)}function p(a){return function(){var b;try{b=a.apply(this,arguments)}catch(h){return r.reject(h)}return n(b)}}function g(a,b){return u.flatten(a,function(a){return u.map(b||O,function(b){return b+a})})}
function b(a,b){return u.find(b,function(b){var h;h=document.createElement(a.tagName);b="on"+b;b in h?h=!0:(h.setAttribute(b,"return;"),h=u.isFunction(h[b]));return h})}function a(a,h){var f;a=g(a,h);return function(h){return h instanceof R?("undefined"==typeof f&&(f=b(h,a)||null),f?J(h,f):D()):N(h,a)}}function k(a,b){function h(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];a.errorCode&&(a={systemCode:a.systemCode,code:a.errorCode.code});this.name="KeySessionError";this.mediaKeyError=
a;this.message="MediaKeyError code:"+a.code+" and systemCode:"+a.systemCode}h.prototype=Error();return function(f,c){var d=u.isFunction(b)?b.call(this):this,k=Z(d),g=ea(d).map(function(a){throw new h(d.error||a);});try{return a.call(this,f,c),E(k,g).take(1).toPromise()}catch(z){return r.reject(z)}}}function t(a,b){if(b instanceof V)return b._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(b);if(null!==b){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);
if(a.msSetMediaKeys)return new r(function(h,f){1<=a.readyState?(a.msSetMediaKeys(b),h()):a.addEventListener("loadedmetatdata",function(){try{a.msSetMediaKeys(b)}catch(c){return f(c)}finally{a.removeEventListener("loadedmetatdata")}h()})});throw Error("compat: cannot find setMediaKeys method");}}function c(){return!!(y.fullscreenElement||y.mozFullScreenElement||y.webkitFullscreenElement||y.msFullscreenElement)}var u=d(1);d(4);var r=d(7),x=d(10);l=d(6);var h=l.bytesToStr,f=l.strToBytes,z=d(2);l=d(3).Observable;
var E=l.merge,D=l.never,J=l.fromEvent,F=l.just,N=d(5).on,y=document,H=window,O=["","webkit","moz","ms"],R=H.HTMLElement;d=H.HTMLVideoElement;var Q=H.MediaSource||H.MozMediaSource||H.WebKitMediaSource||H.MSMediaSource,L=H.MediaKeys||H.MozMediaKeys||H.WebKitMediaKeys||H.MSMediaKeys;l="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&/Trident\//.test(navigator.userAgent);var V=u.noop,I;navigator.requestMediaKeySystemAccess&&(I=function(a,b){return navigator.requestMediaKeySystemAccess(a,
b)});l=a(l?["progress"]:["loadedmetadata"]);var ba=a(["sourceopen","webkitsourceopen"]),aa=a(["encrypted","needkey"]),Y=a(["keymessage","message"]),Z=a(["keyadded","ready"]),ea=a(["keyerror","error"]),S=a(["keystatuseschange"]),aa={onEncrypted:aa,onKeyMessage:Y,onKeyStatusesChange:S,onKeyError:ea};if(!I&&d.prototype.webkitGenerateKeyRequest){var ga=function(a,b){var h=this;x.call(this);this._vid=a;this._key=b;this._con=E(Y(a),Z(a),ea(a)).subscribe(function(a){return h.trigger(a.type,a)})};ga.prototype=
u.extend({},x.prototype,{generateRequest:p(function(a,b){this._vid.webkitGenerateKeyRequest(this._key,b)}),update:k(function(a,b){if(0<=this._key.indexOf("clearkey")){var c=JSON.parse(h(a)),d=f(atob(c.keys[0].k)),c=f(atob(c.keys[0].kid));this._vid.webkitAddKey(this._key,d,c,b)}else this._vid.webkitAddKey(this._key,a,null,b)}),close:p(function(){this._con&&this._con.dispose();this._vid=this._con=null})});V=function(a){this.ks_=a};V.prototype={_setVideo:function(a){this._vid=a},createSession:function(){return new ga(this._vid,
this.ks_)}};var ka=function(a){var b=y.querySelector("video")||y.createElement("video");return b&&b.canPlayType?!!b.canPlayType("video/mp4",a):!1};I=function(a){return ka(a)?r.resolve({createMediaKeys:function(){return r.resolve(new V(a))}}):r.reject()}}else if(L&&!I){var sa=function(a){x.call(this);this._mk=a};sa.prototype=u.extend(x.prototype,{generateRequest:p(function(a,b){var h=this;this._ss=this._mk.memCreateSession("video/mp4",b);this._con=E(Y(this._ss),Z(this._ss),ea(this._ss)).subscribe(function(a){return h.trigger(a.type,
a)})}),update:k(function(a,b){z(this._ss);this._ss.update(a,b)},function(){return this._ss}),close:p(function(){this._ss&&(this._ss.close(),this._ss=null,this._con.dispose(),this._con=null)})});L.prototype.alwaysRenew=!0;L.prototype.memCreateSession=L.prototype.createSession;L.prototype.createSession=function(){return new sa(this)};I=function(a){return L.isTypeSupported(a)?r.resolve({createMediaKeys:function(){return r.resolve(new L(a))}}):r.reject()}}L||(S=function(){throw Error("eme: MediaKeys is not available");
},L={create:S,isTypeSupported:S});H.WebKitSourceBuffer&&!H.WebKitSourceBuffer.prototype.addEventListener&&(S=H.WebKitSourceBuffer.prototype,u.extend(S,x.prototype),S.__listeners=[],S.appendBuffer=function(a){if(this.updating)throw Error("SourceBuffer updating");this.trigger("updatestart");this.updating=!0;try{this.append(a)}catch(b){this.__emitUpdate("error",b);return}this.__emitUpdate("update")},S.__emitUpdate=function(a,b){var h=this;setTimeout(function(){h.trigger(a,b);h.updating=!1;h.trigger("updateend")},
0)});S=a(["fullscreenchange","FullscreenChange"],O.concat("MS"));q.exports={HTMLVideoElement_:d,MediaSource_:Q,isCodecSupported:function(a){return!!Q&&Q.isTypeSupported(a)},sourceOpen:function(a){return"open"==a.readyState?F():ba(a).take(1)},loadedMetadataEvent:l,requestMediaKeySystemAccess:I,setMediaKeys:function(a,b){return n(t(a,b))},emeEvents:aa,isFullscreen:c,onFullscreenChange:S,requestFullscreen:function(a){if(!c()){if(a.requestFullscreen)return a.requestFullscreen();if(a.msRequestFullscreen)return a.msRequestFullscreen();
if(a.mozRequestFullScreen)return a.mozRequestFullScreen();if(a.webkitRequestFullscreen)return a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},exitFullscreen:function(){if(c()){if(y.exitFullscreen)return y.exitFullscreen();if(y.msExitFullscreen)return y.msExitFullscreen();if(y.mozCancelFullScreen)return y.mozCancelFullScreen();if(y.webkitExitFullscreen)return y.webkitExitFullscreen()}},videoSizeChange:function(){return N(H,"resize")},visibilityChange:function(){var a;null!=y.hidden?a="":
null!=y.mozHidden?a="moz":null!=y.msHidden?a="ms":null!=y.webkitHidden&&(a="webkit");var b=a?a+"Hidden":"hidden";return N(y,a+"visibilitychange").map(function(){return y[b]})}}},function(q,l,d){function n(a){if(c.isArray(a))return a;for(var b=-1,f=a.length,d=Array(f);++b<f;)d[b]={start:a.start(b),end:a.end(b),bitrate:0};return d}function p(a,b){return a.start<=b&&b<a.end}function g(a,h){for(var f=0;f<h.length;f++)if(b(a,h[f]))return h[f];return null}function b(a,b){return p(a,b.start)||p(a,b.end)||
p(b,a.start)}function a(a,b){return p(a,b.start)&&p(a,b.end)}function k(a,b){return Math.abs(b.start-a.end)<r||Math.abs(b.end-a.start)<r}function t(a,b,f){var c=Math.min(a.start,b.start);a=Math.max(a.end,b.end);return{start:c,end:a,bitrate:f}}var c=d(1),u=d(2),r=1/60;l=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.ranges=a?n(a):[];this.length=this.ranges.length}c.prototype.start=function(a){return this.ranges[a].start};c.prototype.end=
function(a){return this.ranges[a].end};c.prototype.hasRange=function(a,b){for(var c=a+b,d=0;d<this.ranges.length;d++){var k=this.ranges[d],g=k.start,k=k.end;if(g-a<=r&&a-k<=r&&g-c<=r&&c-k<=r)return this.ranges[d]}return null};c.prototype.getRange=function(a){for(var b=0;b<this.ranges.length;b++)if(p(this.ranges[b],a))return this.ranges[b];return null};c.prototype.getGap=function(a){var b=this.getRange(a);return b?b.end-a:Infinity};c.prototype.getLoaded=function(a){var b=this.getRange(a);return b?
a-b.start:0};c.prototype.getSize=function(a){return(a=this.getRange(a))?a.end-a.start:0};c.prototype.getNextRangeGap=function(a){for(var b=this.ranges,c=-1,d;++c<b.length;){var k=b[c].start;if(k>a){d=k;break}}return null!=d?d-a:Infinity};c.prototype.insert=function(c,f,d){var g=this.ranges;u(f<=d);if(f!=d){c={start:f,end:d,bitrate:c};for(f=0;f<g.length;f++){d=g[f];var n=b(c,d),x=k(c,d);if(n||x)if(c.bitrate===d.bitrate)c=t(c,d,d.bitrate),g.splice(f--,1);else if(n)if(a(d,c))g.splice(++f,0,c),n=d.end,
d.end=c.start,c={start:c.end,end:n,bitrate:d.bitrate};else if(a(c,d))g.splice(f--,1);else if(d.start<c.start)d.end=c.start;else{d.start=c.end;break}else break;else if(0===f){if(c.end<=g[0].start)break}else if(g[f-1].end<=c.start&&c.end<=d.start)break}g.splice(f,0,c);for(c=0;c<g.length;c++)f=g[c],f.start===f.end&&g.splice(c++,1);for(c=1;c<g.length;c++)f=g[c-1],d=g[c],f.bitrate===d.bitrate&&k(f,d)&&(f=t(f,d,d.bitrate),g.splice(--c,2,f))}this.length=this.ranges.length;return this.ranges};c.prototype.remove=
function(a,b){this.intersect(new c([{start:0,end:a},{start:b,end:Infinity}]))};c.prototype.equals=function(a){var b;a:{b=this.ranges;a=a.ranges;for(var c=0;c<b.length;c++){var d=b[c],k=g(d,a);if(!k||k.start>d.start||k.end<d.end){b=!1;break a}}b=!0}return b};c.prototype.intersect=function(a){var b=this.ranges;a=a.ranges;for(var c=0;c<b.length;c++){var d=b[c],k=g(d,a);k?(k.start>d.start&&(d.start=k.start),k.end<d.end&&(d.end=k.end)):b.splice(c--,1)}this.length=this.ranges.length;return this.ranges};
return c}();q.exports={bufferedToArray:n,BufferedRanges:l}},function(q,l,d){function n(){this.__listeners={}}var p=d(1),g=d(2);n.prototype.addEventListener=function(b,a){g("function"==typeof a,"eventemitter: second argument should be a function");this.__listeners[b]||(this.__listeners[b]=[]);this.__listeners[b].push(a)};n.prototype.removeEventListener=function(b,a){if(0===arguments.length)this.__listeners={};else if(this.__listeners.hasOwnProperty(b))if(1===arguments.length)delete this.__listeners[b];
else{var d=this.__listeners[b],g=d.indexOf(a);~g&&d.splice(g,1);d.length||delete this.__listeners[b]}};n.prototype.trigger=function(b,a){if(this.__listeners.hasOwnProperty(b)){var d=this.__listeners[b].slice();p.each(d,function(b){try{b(a)}catch(c){console.error(c,c.stack)}})}};n.prototype.on=n.prototype.addEventListener;n.prototype.off=n.prototype.removeEventListener;q.exports=n},function(q,l){var d=/^(?:[a-z]+:)?\/\//i,n=/\/[\.]{1,2}\//;q.exports={resolveURL:function(){var p=arguments.length;if(0===
p)return"";for(var g="",b=0;b<p;b++){var a=arguments[b];"string"===typeof a&&""!==a&&(d.test(a)?g=a:("/"===a[0]&&(a=a.substr(1)),"/"===g[g.length-1]&&(g=g.substr(0,g.length-1)),g=g+"/"+a))}if(n.test(g)){p=[];g=g.split("/");b=0;for(a=g.length;b<a;b++)".."==g[b]?p.pop():"."!=g[b]&&p.push(g[b]);p=p.join("/")}else p=g;return p},parseBaseURL:function(d){var g=d.lastIndexOf("/");return 0<=g?d.substring(0,g+1):d}}},function(q,l,d){(function(d,p){function g(w){for(var a=w.length,m=Array(a),C=0;C<a;C++)m[C]=
w[C];return m}function b(){try{return La.apply(this,arguments)}catch(w){return K.e=w,K}}function a(w){if(!W(w))throw new TypeError("fn must be a function");La=w;return b}function k(w){throw w;}function t(w,a){for(var m=Array(w),C=0;C<w;C++)m[C]=a();return m}function c(w){this._s=w}function u(w){this._s=w;this._l=w.length;this._i=0}function r(w){this._a=w}function x(w){this._a=w;w=+w.length;if(isNaN(w))w=0;else if(0!==w&&"number"===typeof w&&v.isFinite(w)){var a;a=+w;a=0===a?a:isNaN(a)?a:0>a?-1:1;
w=a*Math.floor(Math.abs(w));w=0>=w?0:w>cb?cb:w}this._l=w;this._i=0}function h(a){var e=a._es6shim_iterator_;if(!e&&"string"===typeof a)return a=new c(a),a._es6shim_iterator_();if(!e&&void 0!==a.length)return a=new r(a),a._es6shim_iterator_();if(!e)throw new TypeError("Object is not iterable");return a._es6shim_iterator_()}function f(a,e){this.observer=a;this.parent=e}function z(a,e){ca(a)||(a=qa);return new Ra(e,a)}function l(a,e){this.observer=a;this.parent=e}function D(a,e){this.observer=a;this.parent=
e}function J(a,e){return new P(function(m){var C=new T,b=new na;b.setDisposable(C);C.setDisposable(a.subscribe(new nb(m,b,e)));return b},a)}function F(){return!1}function N(){return[]}function y(){for(var a=arguments.length,e=Array(a),m=0;m<a;m++)e[m]=arguments[m];return e}function H(a){return function(e){return a.subscribe(e)}}function O(a,e){this.o=a;this.accumulator=e.accumulator;this.hasSeed=e.hasSeed;this.seed=e.seed;this.hasAccumulation=!1;this.accumulation=null;this.isStopped=this.hasValue=
!1}function R(a,e){return function(m){var C=m;for(m=0;m<e;m++)if(C=C[a[m]],"undefined"===typeof C)return;return C}}function Q(w,e,m){return function(){for(var C=arguments.length,b=Array(C),c=0;c<C;c++)b[c]=arguments[c];if(W(m)){b=a(m).apply(e,b);if(b===K)return w.onError(b.e);w.onNext(b)}else if(1>=b.length)w.onNext(b[0]);else w.onNext(b);w.onCompleted()}}function L(w,e,m){return function(){var C=arguments[0];if(C)return w.onError(C);for(var C=arguments.length,b=[],c=1;c<C;c++)b[c-1]=arguments[c];
if(W(m)){b=a(m).apply(e,b);if(b===K)return w.onError(b.e);w.onNext(b)}else if(1>=b.length)w.onNext(b[0]);else w.onNext(b);w.onCompleted()}}function V(a,e,m){this._e=a;this._n=e;this._fn=m;this._e.addEventListener(this._n,this._fn,!1);this.isDisposed=!1}function I(a,e,m){var C=Object.prototype.toString.call(a);if("[object NodeList]"===C||"[object HTMLCollection]"===C){for(var C=new U,b=0,c=a.length;b<c;b++)C.add(I(a.item(b),e,m));return C}return new V(a,e,m)}function ba(a,e){return function(){var m=
arguments[0];W(e)&&(m=e.apply(null,arguments));a.onNext(m)}}function aa(a,e){return new P(function(m){return e.scheduleWithAbsolute(a,function(){m.onNext(0);m.onCompleted()})})}function Y(a,e,m){return new P(function(C){var b=a,c=Xa(e);return m.scheduleRecursiveWithAbsoluteAndState(0,b,function(a,w){if(0<c){var e=m.now();b+=c;b<=e&&(b=e+c)}C.onNext(a);w(a+1,b)})})}function Z(a,e){return new P(function(m){return e.scheduleWithRelative(Xa(a),function(){m.onNext(0);m.onCompleted()})})}function ea(a,
e,m){return a===e?new P(function(a){return m.schedulePeriodicWithState(0,e,function(e){a.onNext(e);return e+1})}):db(function(){return Y(m.now()+a,e,m)})}function S(a,e,m){return new P(function(C){var b=!1,c=new na,d=null,f=[],h=!1,k;k=a.materialize().timestamp(m).subscribe(function(a){"E"===a.value.kind?(f=[],f.push(a),d=a.value.exception,a=!h):(f.push({value:a.value,timestamp:a.timestamp+e}),a=!b,b=!0);if(a)if(null!==d)C.onError(d);else a=new T,c.setDisposable(a),a.setDisposable(m.scheduleRecursiveWithRelative(e,
function(a){var e,w,c;if(null===d){h=!0;do e=null,0<f.length&&0>=f[0].timestamp-m.now()&&(e=f.shift().value),null!==e&&e.accept(C);while(null!==e);c=!1;w=0;0<f.length?(c=!0,w=Math.max(0,f[0].timestamp-m.now())):b=!1;e=d;h=!1;if(null!==e)C.onError(e);else c&&a(w)}}))});return new U(k,c)},a)}function ga(a,e,m){return db(function(){return S(a,e-m.now(),m)})}function ka(a,e){return new P(function(m){function C(){d&&(d=!1,m.onNext(c));b&&m.onCompleted()}var b=!1,c,d=!1,f=new T;f.setDisposable(a.subscribe(function(a){d=
!0;c=a},function(a){m.onError(a)},function(){b=!0;f.dispose()}));return new U(f,e.subscribe(C,function(a){m.onError(a)},C))},a)}function sa(w,e,m){return new P(function(C){function b(e,w){h[w]=e;c[w]=!0;if(d||(d=c.every(ta))){if(k)return C.onError(k);var Ea=a(m).apply(null,h);if(Ea===K)return C.onError(Ea.e);C.onNext(Ea)}f&&h[1]&&C.onCompleted()}var c=[!1,!1],d=!1,f=!1,h=Array(2),k;return new U(w.subscribe(function(a){b(a,0)},function(a){if(h[1])C.onError(a);else k=a},function(){f=!0;h[1]&&C.onCompleted()}),
e.subscribe(function(a){b(a,1)},function(a){C.onError(a)},function(){f=!0;b(!0,1)}))},w)}var v=d,B={internals:{},config:{Promise:v.Promise},helpers:{}},ma=B.helpers.noop=function(){},ta=B.helpers.identity=function(a){return a},Da=B.helpers.defaultNow=Date.now,Wa=B.helpers.defaultComparer=function(a,e){return va(a,e)},Qa=B.helpers.defaultSubComparer=function(a,e){return a>e?1:a<e?-1:0};B.helpers.defaultKeySerializer=function(a){return a.toString()};var Ka=B.helpers.defaultError=function(a){throw a;
},fa=B.helpers.isPromise=function(a){return!!a&&"function"!==typeof a.subscribe&&"function"===typeof a.then},W=B.helpers.isFunction=function(a){return"function"==typeof a||!1},K={e:{}},La;(B.EmptyError=function(){this.message="Sequence contains no elements.";this.name="EmptyError";Error.call(this)}).prototype=Error.prototype;var Ma=B.ObjectDisposedError=function(){this.message="Object has been disposed";this.name="ObjectDisposedError";Error.call(this)};Ma.prototype=Error.prototype;var da=B.ArgumentOutOfRangeError=
function(){this.message="Argument out of range";this.name="ArgumentOutOfRangeError";Error.call(this)};da.prototype=Error.prototype;var xa=B.NotSupportedError=function(a){this.message=a||"This operation is not supported";this.name="NotSupportedError";Error.call(this)};xa.prototype=Error.prototype;var Ba=B.NotImplementedError=function(a){this.message=a||"This operation is not implemented";this.name="NotImplementedError";Error.call(this)};Ba.prototype=Error.prototype;var Fa=B.helpers.notImplemented=
function(){throw new Ba;},ua=B.helpers.notSupported=function(){throw new xa;},Ga=B.doneEnumerator={done:!0,value:void 0},Sa=B.helpers.isArrayLike=function(a){return a&&void 0!==a.length},ra=B.internals.bindCallback=function(a,e,m){return e?function(){return a.apply(e,arguments)}:a};B.internals.isObject=function(a){var e=typeof a;return a&&("function"==e||"object"==e)||!1};var va=B.internals.isEqual=function(a,e){if(a===e)return!0;if(!a||!e||"object"!==typeof a||"object"!==typeof e)return!1;for(var m in a)if(a.hasOwnProperty(m)&&
(!e.hasOwnProperty(m)||a[m]!==e[m]))return!1;for(m in e)if(e.hasOwnProperty(m)&&!a.hasOwnProperty(m))return!1;return!0},G=B.internals.inherits=function(a,e){function m(){this.constructor=a}m.prototype=e.prototype;a.prototype=new m},Ha=B.internals.addProperties=function(a){for(var e=1,m=arguments.length;e<m;e++){var b=arguments[e],c;for(c in b)a[c]=b[c]}},U=B.CompositeDisposable=function(){var a=[],e,m;if(Array.isArray(arguments[0]))a=arguments[0],m=a.length;else for(m=arguments.length,a=Array(m),
e=0;e<m;e++)a[e]=arguments[e];for(e=0;e<m;e++)if(!ob(a[e]))throw new TypeError("Not a disposable");this.disposables=a;this.isDisposed=!1;this.length=a.length},Ya=U.prototype;Ya.add=function(a){this.isDisposed?a.dispose():(this.disposables.push(a),this.length++)};Ya.remove=function(a){var e=!1;if(!this.isDisposed){var m=this.disposables.indexOf(a);-1!==m&&(e=!0,this.disposables.splice(m,1),this.length--,a.dispose())}return e};Ya.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var a=
this.disposables.length,e=Array(a),m=0;m<a;m++)e[m]=this.disposables[m];this.disposables=[];for(m=this.length=0;m<a;m++)e[m].dispose()}};var Ia=B.Disposable=function(a){this.isDisposed=!1;this.action=a||ma};Ia.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var oa=Ia.create=function(a){return new Ia(a)},ja=Ia.empty={dispose:ma},ob=Ia.isDisposable=function(a){return a&&W(a.dispose)},ha=Ia.checkDisposed=function(a){if(a.isDisposed)throw new Ma;},T=B.SingleAssignmentDisposable=
function(){this.isDisposed=!1;this.current=null};T.prototype.getDisposable=function(){return this.current};T.prototype.setDisposable=function(a){if(this.current)throw Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=a);e&&a&&a.dispose()};T.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.current;this.current=null}a&&a.dispose()};var na=B.SerialDisposable=function(){this.isDisposed=!1;this.current=null};na.prototype.getDisposable=
function(){return this.current};na.prototype.setDisposable=function(a){var e=this.isDisposed;if(!e){var m=this.current;this.current=a}m&&m.dispose();e&&a&&a.dispose()};na.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.current;this.current=null}a&&a.dispose()};B.RefCountDisposable=function(){function a(e){this.disposable=e;this.disposable.count++;this.isInnerDisposed=!1}function e(a){this.underlyingDisposable=a;this.isPrimaryDisposed=this.isDisposed=!1;this.count=0}
a.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))};e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))};e.prototype.getDisposable=function(){return this.isDisposed?
ja:new a(this)};return e}();var Na=B.internals.ScheduledItem=function(a,e,m,b,c){this.scheduler=a;this.state=e;this.action=m;this.dueTime=b;this.comparer=c||Qa;this.disposable=new T};Na.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())};Na.prototype.compareTo=function(a){return this.comparer(this.dueTime,a.dueTime)};Na.prototype.isCancelled=function(){return this.disposable.isDisposed};Na.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var pa=
B.Scheduler=function(){function a(e,m,b,w){this.now=e;this._schedule=m;this._scheduleRelative=b;this._scheduleAbsolute=w}function e(a,e){e();return ja}a.isScheduler=function(e){return e instanceof a};var m=a.prototype;m.schedule=function(a){return this._schedule(a,e)};m.scheduleWithState=function(a,e){return this._schedule(a,e)};m.scheduleWithRelative=function(a,m){return this._scheduleRelative(m,a,e)};m.scheduleWithRelativeAndState=function(a,e,m){return this._scheduleRelative(a,e,m)};m.scheduleWithAbsolute=
function(a,m){return this._scheduleAbsolute(m,a,e)};m.scheduleWithAbsoluteAndState=function(a,e,m){return this._scheduleAbsolute(a,e,m)};a.now=Da;a.normalize=function(a){0>a&&(a=0);return a};return a}(),Xa=pa.normalize,ca=pa.isScheduler;(function(a){function e(a,e){function m(e){var b=!1,c=!1,d=a.scheduleWithState(e,function(a,e){b?w.remove(d):c=!0;C(e,m);return ja});c||(w.add(d),b=!0)}var b=e[0],C=e[1],w=new U;C(b,m);return w}function m(a,e,m){function b(e,C){var d=!1,Ea=!1,f=a[m](e,C,function(a,
e){d?c.remove(f):Ea=!0;w(e,b);return ja});Ea||(c.add(f),d=!0)}var C=e[0],w=e[1],c=new U;w(C,b);return c}function b(a,e){return m(a,e,"scheduleWithRelativeAndState")}function c(a,e){return m(a,e,"scheduleWithAbsoluteAndState")}function d(a,e){a(function(m){e(a,m)})}a.scheduleRecursive=function(a){return this.scheduleRecursiveWithState(a,d)};a.scheduleRecursiveWithState=function(a,m){return this.scheduleWithState([a,m],e)};a.scheduleRecursiveWithRelative=function(a,e){return this.scheduleRecursiveWithRelativeAndState(e,
a,d)};a.scheduleRecursiveWithRelativeAndState=function(a,e,m){return this._scheduleRelative([a,m],e,b)};a.scheduleRecursiveWithAbsolute=function(a,e){return this.scheduleRecursiveWithAbsoluteAndState(e,a,d)};a.scheduleRecursiveWithAbsoluteAndState=function(a,e,m){return this._scheduleAbsolute([a,m],e,c)}})(pa.prototype);(function(a){pa.prototype.schedulePeriodic=function(a,m){return this.schedulePeriodicWithState(null,a,m)};pa.prototype.schedulePeriodicWithState=function(a,m,b){if("undefined"===typeof v.setInterval)throw new xa;
m=Xa(m);var w=a,c=v.setInterval(function(){w=b(w)},m);return oa(function(){v.clearInterval(c)})}})(pa.prototype);var la=pa.immediate=function(){return new pa(Da,function(a,e){return e(this,a)},ua,ua)}(),qa=pa.currentThread=function(){function b(){for(;0<e.length;){var a=e.shift();!a.isCancelled()&&a.invoke()}}var e,m=new pa(Da,function(m,c){var d=new Na(this,m,c,this.now());if(e)e.push(d);else{e=[d];var f=a(b)();e=null;if(f===K)return k(f.e)}return d.disposable},ua,ua);m.scheduleRequired=function(){return!e};
return m}();B.internals.SchedulePeriodicRecursive=function(){function a(e,b){b(0,this._period);try{this._state=this._action(this._state)}catch(w){throw this._cancel.dispose(),w;}}function e(a,e,b,w){this._scheduler=a;this._state=e;this._period=b;this._action=w}e.prototype.start=function(){var e=new T;this._cancel=e;e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,a.bind(this)));return e};return e}();var Ja,Za,eb=function(){var a,e=ma;if(v.setTimeout)a=v.setTimeout,
e=v.clearTimeout;else if(v.WScript)a=function(a,e){v.WScript.Sleep(e);a()};else throw new xa;return{setTimeout:a,clearTimeout:e}}(),$a=eb.setTimeout,pb=eb.clearTimeout;(function(){function b(e){if(c)$a(function(){b(e)},0);else{var m=C[e];if(m&&(c=!0,m=a(m)(),Za(e),c=!1,m===K))return k(m.e)}}function e(){if(!v.postMessage||v.importScripts)return!1;var a=!1,e=v.onmessage;v.onmessage=function(){a=!0};v.postMessage("","*");v.onmessage=e;return a}var m=1,C={},c=!1;Za=function(a){delete C[a]};String(toString).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/toString| for [^\]]+/g,".*?");var f=d.setImmediate;if(W(f))Ja=function(a){var e=m++;C[e]=a;f(function(){b(e)});return e};else if("undefined"!==typeof p&&"[object process]"==={}.toString.call(p))Ja=function(a){var e=m++;C[e]=a;p.nextTick(function(){b(e)});return e};else if(e()){var h=function(a){"string"===typeof a.data&&a.data.substring(0,g.length)===g&&b(a.data.substring(g.length))},g="ms.rx.schedule"+Math.random();v.addEventListener?v.addEventListener("message",h,!1):v.attachEvent?
v.attachEvent("onmessage",h):v.onmessage=h;Ja=function(a){var e=m++;C[e]=a;v.postMessage(g+currentId,"*");return e}}else if(v.MessageChannel){var B=new v.MessageChannel;B.port1.onmessage=function(a){b(a.data)};Ja=function(a){var e=m++;C[e]=a;B.port2.postMessage(e);return e}}else Ja="document"in v&&"onreadystatechange"in v.document.createElement("script")?function(a){var e=v.document.createElement("script"),c=m++;C[c]=a;e.onreadystatechange=function(){b(c);e.onreadystatechange=null;e.parentNode.removeChild(e);
e=null};v.document.documentElement.appendChild(e);return c}:function(a){var e=m++;C[e]=a;$a(function(){b(e)},0);return e}})();var ya=pa.timeout=pa["default"]=function(){return new pa(Da,function(a,e){var m=this,b=new T,c=Ja(function(){!b.isDisposed&&b.setDisposable(e(m,a))});return new U(b,oa(function(){Za(c)}))},function(a,e,m){var b=this;e=pa.normalize(e);var c=new T;if(0===e)return b.scheduleWithState(a,m);var d=$a(function(){!c.isDisposed&&c.setDisposable(m(b,a))},e);return new U(c,oa(function(){pb(d)}))},
function(a,e,m){return this.scheduleWithRelativeAndState(a,e-this.now(),m)})}(),wa=B.Notification=function(){function a(e,m,b,w,c,d){this.kind=e;this.value=m;this.exception=b;this._accept=w;this._acceptObservable=c;this.toString=d}a.prototype.accept=function(a,m,b){return a&&"object"===typeof a?this._acceptObservable(a):this._accept(a,m,b)};a.prototype.toObservable=function(a){var m=this;ca(a)||(a=la);return new P(function(b){return a.scheduleWithState(m,function(a,e){e._acceptObservable(b);"N"===
e.kind&&b.onCompleted()})})};return a}(),qb=wa.createOnNext=function(){function a(e){return e(this.value)}function e(a){return a.onNext(this.value)}function m(){return"OnNext("+this.value+")"}return function(b){return new wa("N",b,null,a,e,m)}}(),rb=wa.createOnError=function(){function a(e,m){return m(this.exception)}function e(a){return a.onError(this.exception)}function m(){return"OnError("+this.exception+")"}return function(b){return new wa("E",null,b,a,e,m)}}(),sb=wa.createOnCompleted=function(){function a(e,
m,b){return b()}function e(a){return a.onCompleted()}function m(){return"OnCompleted()"}return function(){return new wa("C",null,null,a,e,m)}}(),za=B.Observer=function(){},Oa=za.create=function(a,e,m){a||(a=ma);e||(e=Ka);m||(m=ma);return new tb(a,e,m)},Pa=B.internals.AbstractObserver=function(a){function e(){this.isStopped=!1}G(e,a);e.prototype.next=Fa;e.prototype.error=Fa;e.prototype.completed=Fa;e.prototype.onNext=function(a){!this.isStopped&&this.next(a)};e.prototype.onError=function(a){this.isStopped||
(this.isStopped=!0,this.error(a))};e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())};e.prototype.dispose=function(){this.isStopped=!0};e.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.error(a),!0)};return e}(za),tb=B.AnonymousObserver=function(a){function e(e,b,c){a.call(this);this._onNext=e;this._onError=b;this._onCompleted=c}G(e,a);e.prototype.next=function(a){this._onNext(a)};e.prototype.error=function(a){this._onError(a)};e.prototype.completed=
function(){this._onCompleted()};return e}(Pa),A,M=B.Observable=function(){function a(e){this._subscribe=e}A=a.prototype;a.isObservable=function(a){return a&&W(a.subscribe)};A.subscribe=A.forEach=function(a,m,b){return this._subscribe("object"===typeof a?a:Oa(a,m,b))};A.subscribeOnNext=function(a,b){return this._subscribe(Oa("undefined"!==typeof b?function(C){a.call(b,C)}:a))};A.subscribeOnError=function(a,b){return this._subscribe(Oa(null,"undefined"!==typeof b?function(C){a.call(b,C)}:a))};A.subscribeOnCompleted=
function(a,b){return this._subscribe(Oa(null,null,"undefined"!==typeof b?function(){a.call(b)}:a))};return a}(),ub=B.internals.ScheduledObserver=function(b){function e(a,e){b.call(this);this.scheduler=a;this.observer=e;this.hasFaulted=this.isAcquired=!1;this.queue=[];this.disposable=new na}G(e,b);e.prototype.next=function(a){var e=this;this.queue.push(function(){e.observer.onNext(a)})};e.prototype.error=function(a){var e=this;this.queue.push(function(){e.observer.onError(a)})};e.prototype.completed=
function(){var a=this;this.queue.push(function(){a.observer.onCompleted()})};e.prototype.ensureActive=function(){var e=!1;!this.hasFaulted&&0<this.queue.length&&(e=!this.isAcquired,this.isAcquired=!0);e&&this.disposable.setDisposable(this.scheduler.scheduleRecursiveWithState(this,function(e,b){var m;if(0<e.queue.length){m=e.queue.shift();m=a(m)();if(m===K)return e.queue=[],e.hasFaulted=!0,k(m.e);b(e)}else e.isAcquired=!1}))};e.prototype.dispose=function(){b.prototype.dispose.call(this);this.disposable.dispose()};
return e}(Pa),X=B.ObservableBase=function(b){function e(a){return a&&W(a.dispose)?a:W(a)?oa(a):ja}function m(b,m){var C=m[0],w=m[1],w=a(w.subscribeCore).call(w,C);if(w===K&&!C.fail(K.e))return k(K.e);C.setDisposable(e(w))}function C(a){a=new fb(a);var e=[a,this];qa.scheduleRequired()?qa.scheduleWithState(e,m):m(null,e);return a}function c(){b.call(this,C)}G(c,b);c.prototype.subscribeCore=Fa;return c}(M),Ta=function(b){function e(a,e,m,c){this.resultSelector=B.helpers.isFunction(m)?m:null;this.selector=
B.internals.bindCallback(B.helpers.isFunction(e)?e:function(){return e},c,3);this.source=a;b.call(this)}function m(a,e,b,m){this.i=0;this.selector=e;this.resultSelector=b;this.source=m;this.isStopped=!1;this.o=a}G(e,b);e.prototype.subscribeCore=function(a){return this.source.subscribe(new m(a,this.selector,this.resultSelector,this))};m.prototype._wrapResult=function(a,e,b){return this.resultSelector?a.map(function(a,m){return this.resultSelector(e,a,b,m)},this):a};m.prototype.onNext=function(e){if(!this.isStopped){var b=
this.i++,m=a(this.selector)(e,b,this.source);if(m===K)return this.o.onError(m.e);B.helpers.isPromise(m)&&(m=B.Observable.fromPromise(m));B.helpers.isArrayLike(m)&&(m=B.Observable.from(m));this.o.onNext(this._wrapResult(m,e,b))}};m.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};m.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())};return e}(X),Ca=B.internals.Enumerable=function(){},vb=function(b){function e(a){this.sources=
a;b.call(this)}function m(a,e,b){this.o=a;this.s=e;this.e=b;this.isStopped=!1}G(e,b);e.prototype.subscribeCore=function(e){var b,w=new na,c=la.scheduleRecursiveWithState(this.sources._es6shim_iterator_(),function(c,d){if(!b){var f=a(c.next).call(c);if(f===K)return e.onError(f.e);if(f.done)return e.onCompleted();f=f.value;fa(f)&&(f=ia(f));var h=new T;w.setDisposable(h);h.setDisposable(f.subscribe(new m(e,d,c)))}});return new U(w,c,oa(function(){b=!0}))};m.prototype.onNext=function(a){if(!this.isStopped)this.o.onNext(a)};
m.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};m.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.s(this.e))};m.prototype.dispose=function(){this.isStopped=!0};m.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return e}(X);Ca.prototype.concat=function(){return new vb(this)};var wb=function(b){function e(a){this.sources=a;b.call(this)}G(e,b);e.prototype.subscribeCore=function(e){var b=this.sources._es6shim_iterator_(),
w,c=new na,d=la.scheduleRecursiveWithState(null,function(d,f){if(!w){var h=a(b.next).call(b);if(h===K)return e.onError(h.e);if(h.done)return null!==d?e.onError(d):e.onCompleted();h=h.value;fa(h)&&(h=ia(h));var k=new T;c.setDisposable(k);k.setDisposable(h.subscribe(function(a){e.onNext(a)},f,function(){e.onCompleted()}))}});return new U(c,d,oa(function(){w=!0}))};return e}(X);Ca.prototype.catchError=function(){return new wb(this)};Ca.prototype.catchErrorWhen=function(b){var e=this;return new P(function(m){var c=
new Aa,d=new Aa,f=b(c).subscribe(d),h=e._es6shim_iterator_(),k,g=new na,v=la.scheduleRecursive(function(e){if(!k){var b=a(h.next).call(h);if(b===K)return m.onError(b.e);if(b.done)m.onCompleted();else{b=b.value;fa(b)&&(b=ia(b));var w=new T,f=new T;g.setDisposable(new U(f,w));w.setDisposable(b.subscribe(function(a){m.onNext(a)},function(a){f.setDisposable(d.subscribe(e,function(a){m.onError(a)},function(){m.onCompleted()}));c.onNext(a)},function(){m.onCompleted()}))}}});return new U(f,g,v,oa(function(){k=
!0}))})};var xb=function(a){function e(a,e){this.v=a;this.c=null==e?-1:e}function b(a){this.v=a.v;this.l=a.c}G(e,a);e.prototype._es6shim_iterator_=function(){return new b(this)};b.prototype.next=function(){if(0===this.l)return Ga;0<this.l&&this.l--;return{done:!1,value:this.v}};return e}(Ca),ab=Ca.repeat=function(a,e){return new xb(a,e)},yb=function(a){function e(a,e,b){this.s=a;this.fn=e?ra(e,b,3):null}function b(a){this.i=-1;this.s=a.s;this.l=this.s.length;this.fn=a.fn}G(e,a);e.prototype._es6shim_iterator_=
function(){return new b(this)};b.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Ga};return e}(Ca),gb=Ca.of=function(a,e,b){return new yb(a,e,b)},zb=function(a){function e(e){this.source=e;a.call(this)}function b(a){this.o=a;this.a=[];this.isStopped=!1}G(e,a);e.prototype.subscribeCore=function(a){return this.source.subscribe(new b(a))};b.prototype.onNext=function(a){this.isStopped||this.a.push(a)};b.prototype.onError=function(a){this.isStopped||
(this.isStopped=!0,this.o.onError(a))};b.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onNext(this.a),this.o.onCompleted())};b.prototype.dispose=function(){this.isStopped=!0};b.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return e}(X);A.toArray=function(){return new zb(this)};M.create=function(a,e){return new P(a,e)};var db=M.defer=function(a){return new P(function(e){var b;try{b=a()}catch(c){return bb(c).subscribe(e)}fa(b)&&
(b=ia(b));return b.subscribe(e)})},hb=function(a){function e(e){this.scheduler=e;a.call(this)}function b(a,e){this.observer=a;this.scheduler=e}function c(a,e){e.onCompleted();return ja}G(e,a);e.prototype.subscribeCore=function(a){return(new b(a,this.scheduler)).run()};b.prototype.run=function(){return this.scheduler.scheduleWithState(this.observer,c)};return e}(X),Ab=new hb(la),Bb=M.empty=function(a){ca(a)||(a=la);return a===la?Ab:new hb(a)},Db=function(a){function e(e,b,c){this.iterable=e;this.mapper=
b;this.scheduler=c;a.call(this)}G(e,a);e.prototype.subscribeCore=function(a){return(new Cb(a,this)).run()};return e}(X),Cb=function(){function b(a,m){this.o=a;this.parent=m}b.prototype.run=function(){var e=h(Object(this.parent.iterable)),b=this.o,c=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,function(w,d){var f=a(e.next).call(e);if(f===K)return b.onError(f.e);if(f.done)return b.onCompleted();f=f.value;if(W(c)&&(f=a(c)(f,w),f===K))return b.onError(f.e);b.onNext(f);
d(w+1)})};return b}(),cb=Math.pow(2,53)-1;c.prototype._es6shim_iterator_=function(){return new u(this._s)};u.prototype._es6shim_iterator_=function(){return this};u.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Ga};r.prototype._es6shim_iterator_=function(){return new x(this._a)};x.prototype._es6shim_iterator_=function(){return this};x.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Ga};var Eb=M.from=function(a,e,b,c){if(null==
a)throw Error("iterable cannot be null.");if(e&&!W(e))throw Error("mapFn when provided must be a function");if(e)var d=ra(e,b,2);ca(c)||(c=qa);return new Db(a,d,c)},Ra=function(a){function e(e,b){this.args=e;this.scheduler=b;a.call(this)}G(e,a);e.prototype.subscribeCore=function(a){return(new f(a,this)).run()};return e}(X);f.prototype.run=function(){var a=this.observer,e=this.parent.args,b=e.length;return this.parent.scheduler.scheduleRecursiveWithState(0,function(c,d){if(c<b)a.onNext(e[c]),d(c+1);
else a.onCompleted()})};var Fb=M.fromArray=function(a,e){ca(e)||(e=qa);return new Ra(a,e)},Gb=new (function(a){function e(){a.call(this)}G(e,a);e.prototype.subscribeCore=function(a){return ja};return e}(X));M.never=function(){return Gb};M.of=function(){for(var a=arguments.length,e=Array(a),b=0;b<a;b++)e[b]=arguments[b];return new Ra(e,qa)};M.ofWithScheduler=function(a){for(var e=arguments.length,b=Array(e-1),c=1;c<e;c++)b[c-1]=arguments[c];return new Ra(b,a)};var Hb=function(a){function e(e,b){this.obj=
e;this.keys=Object.keys(e);this.scheduler=b;a.call(this)}G(e,a);e.prototype.subscribeCore=function(a){return(new l(a,this)).run()};return e}(X);l.prototype.run=function(){var a=this.observer,e=this.parent.obj,b=this.parent.keys,c=b.length;return this.parent.scheduler.scheduleRecursiveWithState(0,function(d,f){if(d<c){var h=b[d];a.onNext([h,e[h]]);f(d+1)}else a.onCompleted()})};M.pairs=function(a,e){e||(e=qa);return new Hb(a,e)};var Jb=function(a){function e(e,b,c){this.start=e;this.rangeCount=b;this.scheduler=
c;a.call(this)}G(e,a);e.prototype.subscribeCore=function(a){return(new Ib(a,this)).run()};return e}(X),Ib=function(){function a(e,b){this.observer=e;this.parent=b}a.prototype.run=function(){var a=this.parent.start,b=this.parent.rangeCount,c=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,function(w,d){if(w<b)c.onNext(a+w),d(w+1);else c.onCompleted()})};return a}();M.range=function(a,e,b){ca(b)||(b=qa);return new Jb(a,e,b)};var Kb=function(a){function e(e,b,c){this.value=e;
this.repeatCount=null==b?-1:b;this.scheduler=c;a.call(this)}G(e,a);e.prototype.subscribeCore=function(a){return(new D(a,this)).run()};return e}(X);D.prototype.run=function(){var a=this.observer,e=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,function(b,c){if(-1===b||0<b)a.onNext(e),0<b&&b--;if(0===b)return a.onCompleted();c(b)})};M.repeat=function(a,e,b){ca(b)||(b=qa);return new Kb(a,e,b)};var Lb=function(a){function e(e,b){this.value=e;this.scheduler=
b;a.call(this)}function b(a,e,m){this.observer=a;this.value=e;this.scheduler=m}function c(a,e){var b=e[1];b.onNext(e[0]);b.onCompleted();return ja}G(e,a);e.prototype.subscribeCore=function(a){return(new b(a,this.value,this.scheduler)).run()};b.prototype.run=function(){var a=[this.value,this.observer];return this.scheduler===la?c(null,a):this.scheduler.scheduleWithState(a,c)};return e}(X);M["return"]=M.just=function(a,e){ca(e)||(e=la);return new Lb(a,e)};var Mb=function(a){function e(e,b){this.error=
e;this.scheduler=b;a.call(this)}function b(a,e){this.o=a;this.p=e}function c(a,e){e[1].onError(e[0])}G(e,a);e.prototype.subscribeCore=function(a){return(new b(a,this)).run()};b.prototype.run=function(){return this.p.scheduler.scheduleWithState([this.p.error,this.o],c)};return e}(X),bb=M["throw"]=function(a,e){ca(e)||(e=la);return new Mb(a,e)},nb=function(b){function e(a,e,c){this._o=a;this._s=e;this._fn=c;b.call(this)}G(e,b);e.prototype.next=function(a){this._o.onNext(a)};e.prototype.completed=function(){return this._o.onCompleted()};
e.prototype.error=function(e){e=a(this._fn)(e);if(e===K)return this._o.onError(e.e);fa(e)&&(e=ia(e));var b=new T;this._s.setDisposable(b);b.setDisposable(e.subscribe(this._o))};return e}(Pa);A["catch"]=function(a){return W(a)?J(this,a):Nb([this,a])};var Nb=M["catch"]=function(){var a;if(Array.isArray(arguments[0]))a=arguments[0];else{var e=arguments.length;a=Array(e);for(var b=0;b<e;b++)a[b]=arguments[b]}return gb(a).catchError()};A.combineLatest=function(){for(var a=arguments.length,e=Array(a),b=
0;b<a;b++)e[b]=arguments[b];Array.isArray(e[0])?e[0].unshift(this):e.unshift(this);return Ob.apply(this,e)};var Ob=M.combineLatest=function(){for(var a=arguments.length,e=Array(a),b=0;b<a;b++)e[b]=arguments[b];var c=W(e[a-1])?e.pop():y;Array.isArray(e[0])&&(e=e[0]);return new P(function(a){function b(e){d[e]=!0;if(w||(w=d.every(ta))){try{var m=c.apply(null,h)}catch(k){return a.onError(k)}a.onNext(m)}else if(f.filter(function(a,b){return b!==e}).every(ta))a.onCompleted()}for(var m=e.length,d=t(m,F),
w=!1,f=t(m,F),h=Array(m),k=Array(m),g=0;g<m;g++)(function(c){var m=e[c],d=new T;fa(m)&&(m=ia(m));d.setDisposable(m.subscribe(function(a){h[c]=a;b(c)},function(b){a.onError(b)},function(){f[c]=!0;f.every(ta)&&a.onCompleted()}));k[c]=d})(g);return new U(k)},this)};A.concat=function(){for(var a=[],b=0,c=arguments.length;b<c;b++)a.push(arguments[b]);a.unshift(this);return Pb.apply(null,a)};var Qb=function(a){function b(e){this.sources=e;a.call(this)}function c(a,b){this.sources=a;this.o=b}G(b,a);b.prototype.subscribeCore=
function(a){return(new c(this.sources,a)).run()};c.prototype.run=function(){var a,b=new na,e=this.sources,c=e.length,m=this.o,d=la.scheduleRecursiveWithState(0,function(d,f){if(!a){if(d===c)return m.onCompleted();var w=e[d];fa(w)&&(w=ia(w));var h=new T;b.setDisposable(h);h.setDisposable(w.subscribe(function(a){m.onNext(a)},function(a){m.onError(a)},function(){f(d+1)}))}});return new U(b,d,oa(function(){a=!0}))};return b}(X),Pb=M.concat=function(){var a;if(Array.isArray(arguments[0]))a=arguments[0];
else{a=Array(arguments.length);for(var b=0,c=arguments.length;b<c;b++)a[b]=arguments[b]}return new Qb(a)};A.concatAll=function(){return this.merge(1)};var Sb=function(a){function b(e,c){this.source=e;this.maxConcurrent=c;a.call(this)}G(b,a);b.prototype.subscribeCore=function(a){var b=new U;b.add(this.source.subscribe(new Rb(a,this.maxConcurrent,b)));return b};return b}(X),Rb=function(){function a(b,e,c){this.o=b;this.max=e;this.g=c;this.done=!1;this.q=[];this.activeCount=0;this.isStopped=!1}function b(a,
e){this.parent=a;this.sad=e;this.isStopped=!1}a.prototype.handleSubscribe=function(a){var c=new T;this.g.add(c);fa(a)&&(a=ia(a));c.setDisposable(a.subscribe(new b(this,c)))};a.prototype.onNext=function(a){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(a)):this.q.push(a))};a.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};a.prototype.onCompleted=function(){this.isStopped||(this.done=this.isStopped=!0,0===this.activeCount&&this.o.onCompleted())};
a.prototype.dispose=function(){this.isStopped=!0};a.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};b.prototype.onNext=function(a){if(!this.isStopped)this.parent.o.onNext(a)};b.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.parent.o.onError(a))};b.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var a=this.parent;a.g.remove(this.sad);0<a.q.length?a.handleSubscribe(a.q.shift()):(a.activeCount--,a.done&&0===a.activeCount&&
a.o.onCompleted())}};b.prototype.dispose=function(){this.isStopped=!0};b.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(a),!0)};return a}();A.merge=function(a){return"number"!==typeof a?Tb(this,a):new Sb(this,a)};var Tb=M.merge=function(){var a,b=[],c,d=arguments.length;arguments[0]?ca(arguments[0])?(a=arguments[0],c=1):(a=la,c=0):(a=la,c=1);for(;c<d;c++)b.push(arguments[c]);Array.isArray(b[0])&&(b=b[0]);return z(a,b).mergeAll()},ib=B.CompositeError=function(a){this.name=
"NotImplementedError";this.innerErrors=a;this.message="This contains multiple errors. Check the innerErrors";Error.call(this)};ib.prototype=Error.prototype;M.mergeDelayError=function(){var a;if(Array.isArray(arguments[0]))a=arguments[0];else{var b=arguments.length;a=Array(b);for(var c=0;c<b;c++)a[c]=arguments[c]}var d=z(null,a);return new P(function(a){function b(){if(0===f.length)a.onCompleted();else if(1===f.length)a.onError(f[0]);else a.onError(new ib(f))}var e=new U,c=new T,m=!1,f=[];e.add(c);
c.setDisposable(d.subscribe(function(c){var d=new T;e.add(d);fa(c)&&(c=ia(c));d.setDisposable(c.subscribe(function(b){a.onNext(b)},function(a){f.push(a);e.remove(d);m&&1===e.length&&b()},function(){e.remove(d);m&&1===e.length&&b()}))},function(a){f.push(a);m=!0;1===e.length&&b()},function(){m=!0;1===e.length&&b()}));return e})};var Ub=function(a){function b(e){this.source=e;a.call(this)}function c(a,b){this.o=a;this.g=b;this.done=this.isStopped=!1}function d(a,b){this.parent=a;this.sad=b;this.isStopped=
!1}G(b,a);b.prototype.subscribeCore=function(a){var b=new U,e=new T;b.add(e);e.setDisposable(this.source.subscribe(new c(a,b)));return b};c.prototype.onNext=function(a){if(!this.isStopped){var b=new T;this.g.add(b);fa(a)&&(a=ia(a));b.setDisposable(a.subscribe(new d(this,b)))}};c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};c.prototype.onCompleted=function(){this.isStopped||(this.done=this.isStopped=!0,1===this.g.length&&this.o.onCompleted())};c.prototype.dispose=
function(){this.isStopped=!0};c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};d.prototype.onNext=function(a){if(!this.isStopped)this.parent.o.onNext(a)};d.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.parent.o.onError(a))};d.prototype.onCompleted=function(){if(!this.isStopped){var a=this.parent;this.isStopped=!0;a.g.remove(this.sad);a.done&&1===a.g.length&&a.o.onCompleted()}};d.prototype.dispose=function(){this.isStopped=!0};
d.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(a),!0)};return b}(X);A.mergeAll=function(){return new Ub(this)};A.skipUntil=function(a){var b=this;return new P(function(c){var d=!1,f=new U(b.subscribe(function(a){d&&c.onNext(a)},function(a){c.onError(a)},function(){d&&c.onCompleted()}));fa(a)&&(a=ia(a));var h=new T;f.add(h);h.setDisposable(a.subscribe(function(){d=!0;h.dispose()},function(a){c.onError(a)},function(){h.dispose()}));return f},b)};var Vb=
function(a){function b(e){this.source=e;a.call(this)}function c(a,b){this.o=a;this.inner=b;this.stopped=!1;this.latest=0;this.isStopped=this.hasLatest=!1}function d(a,b){this.parent=a;this.id=b;this.isStopped=!1}G(b,a);b.prototype.subscribeCore=function(a){var b=new na;a=this.source.subscribe(new c(a,b));return new U(a,b)};c.prototype.onNext=function(a){if(!this.isStopped){var b=new T,e=++this.latest;this.hasLatest=!0;this.inner.setDisposable(b);fa(a)&&(a=ia(a));b.setDisposable(a.subscribe(new d(this,
e)))}};c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};c.prototype.onCompleted=function(){this.isStopped||(this.stopped=this.isStopped=!0,!this.hasLatest&&this.o.onCompleted())};c.prototype.dispose=function(){this.isStopped=!0};c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};d.prototype.onNext=function(a){this.isStopped||this.parent.latest===this.id&&this.parent.o.onNext(a)};d.prototype.onError=function(a){this.isStopped||
(this.isStopped=!0,this.parent.latest===this.id&&this.parent.o.onError(a))};d.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.isStopped&&this.parent.o.onCompleted()))};d.prototype.dispose=function(){this.isStopped=!0};d.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(a),!0)};return b}(X);A["switch"]=A.switchLatest=function(){return new Vb(this)};var Wb=function(a){function b(e,
c){this.source=e;this.other=fa(c)?ia(c):c;a.call(this)}function c(a){this.o=a;this.isStopped=!1}G(b,a);b.prototype.subscribeCore=function(a){return new U(this.source.subscribe(a),this.other.subscribe(new c(a)))};c.prototype.onNext=function(a){if(!this.isStopped)this.o.onCompleted()};c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};c.prototype.onCompleted=function(){!this.isStopped&&(this.isStopped=!0)};c.prototype.dispose=function(){this.isStopped=!0};c.prototype.fail=
function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return b}(X);A.takeUntil=function(a){return new Wb(this,a)};A.withLatestFrom=function(){for(var b=arguments.length,e=Array(b),c=0;c<b;c++)e[c]=arguments[c];var d=e.pop(),f=this;Array.isArray(e[0])&&(e=e[0]);return new P(function(b){for(var c=e.length,m=t(c,F),h=!1,w=Array(c),k=Array(c+1),g=0;g<c;g++)(function(a){var c=e[a],d=new T;fa(c)&&(c=ia(c));d.setDisposable(c.subscribe(function(b){w[a]=b;m[a]=!0;h=m.every(ta)},function(a){b.onError(a)},
ma));k[a]=d})(g);g=new T;g.setDisposable(f.subscribe(function(e){e=[e].concat(w);if(h){e=a(d).apply(null,e);if(e===K)return b.onError(e.e);b.onNext(e)}},function(a){b.onError(a)},function(){b.onCompleted()}));k[c]=g;return new U(k)},this)};A.zip=function(){if(0===arguments.length)throw Error("invalid arguments");for(var b=arguments.length,e=Array(b),c=0;c<b;c++)e[c]=arguments[c];var d=W(e[b-1])?e.pop():y;Array.isArray(e[0])&&(e=e[0]);var f=this;e.unshift(f);return new P(function(b){for(var c=e.length,
m=t(c,N),h=t(c,F),w=Array(c),k=0;k<c;k++)(function(c){var k=e[c],g=new T;fa(k)&&(k=ia(k));g.setDisposable(k.subscribe(function(e){m[c].push(e);if(m.every(function(a){return 0<a.length})){e=m.map(function(a){return a.shift()});e=a(d).apply(f,e);if(e===K)return b.onError(e.e);b.onNext(e)}else if(h.filter(function(a,b){return b!==c}).every(ta))b.onCompleted()},function(a){b.onError(a)},function(){h[c]=!0;h.every(ta)&&b.onCompleted()}));w[c]=g})(k);return new U(w)},f)};M.zip=function(){for(var a=arguments.length,
b=Array(a),c=0;c<a;c++)b[c]=arguments[c];Array.isArray(b[0])&&(b=W(b[1])?b[0].concat(b[1]):b[0]);a=b.shift();return a.zip.apply(a,b)};A.zipIterable=function(){if(0===arguments.length)throw Error("invalid arguments");for(var b=arguments.length,e=Array(b),c=0;c<b;c++)e[c]=arguments[c];var d=W(e[b-1])?e.pop():y,f=this;e.unshift(f);return new P(function(b){for(var c=e.length,m=t(c,N),h=t(c,F),w=Array(c),k=0;k<c;k++)(function(c){var k=e[c],g=new T;(Sa(k)||isIterable(k))&&(k=Eb(k));g.setDisposable(k.subscribe(function(e){m[c].push(e);
if(m.every(function(a){return 0<a.length})){e=m.map(function(a){return a.shift()});e=a(d).apply(f,e);if(e===K)return b.onError(e.e);b.onNext(e)}else if(h.filter(function(a,b){return b!==c}).every(ta))b.onCompleted()},function(a){b.onError(a)},function(){h[c]=!0;h.every(ta)&&b.onCompleted()}));w[c]=g})(k);return new U(w)},f)};A.asObservable=function(){return new P(H(this),this)};A.dematerialize=function(){var a=this;return new P(function(b){return a.subscribe(function(a){return a.accept(b)},function(a){b.onError(a)},
function(){b.onCompleted()})},this)};var Yb=function(a){function b(e,c,d){this.source=e;this.keyFn=c;this.comparer=d;a.call(this)}G(b,a);b.prototype.subscribeCore=function(a){return this.source.subscribe(new Xb(a,this.keyFn,this.comparer))};return b}(X),Xb=function(b){function e(a,e,c){this.o=a;this.keyFn=e;this.comparer=c;this.hasCurrentKey=!1;this.currentKey=null;b.call(this)}G(e,b);e.prototype.next=function(b){var e=b,c;if(W(this.keyFn)&&(e=a(this.keyFn)(b),e===K))return this.o.onError(e.e);if(this.hasCurrentKey&&
(c=a(this.comparer)(this.currentKey,e),c===K))return this.o.onError(c.e);this.hasCurrentKey&&c||(this.hasCurrentKey=!0,this.currentKey=e,this.o.onNext(b))};e.prototype.error=function(a){this.o.onError(a)};e.prototype.completed=function(){this.o.onCompleted()};return e}(Pa);A.distinctUntilChanged=function(a,b){b||(b=Wa);return new Yb(this,a,b)};var Zb=function(b){function e(a,e,c,d){this.source=a;this._oN=e;this._oE=c;this._oC=d;b.call(this)}function c(a,b){this.o=a;this.t=!b._oN||W(b._oN)?Oa(b._oN||
ma,b._oE||ma,b._oC||ma):b._oN;this.isStopped=!1}G(e,b);e.prototype.subscribeCore=function(a){return this.source.subscribe(new c(a,this))};c.prototype.onNext=function(b){if(!this.isStopped){var e=a(this.t.onNext).call(this.t,b);if(e===K)this.o.onError(e.e);this.o.onNext(b)}};c.prototype.onError=function(b){if(!this.isStopped){this.isStopped=!0;var e=a(this.t.onError).call(this.t,b);if(e===K)return this.o.onError(e.e);this.o.onError(b)}};c.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=
!0;var b=a(this.t.onCompleted).call(this.t);if(b===K)return this.o.onError(b.e);this.o.onCompleted()}};c.prototype.dispose=function(){this.isStopped=!0};c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return e}(X);A["do"]=A.tap=A.doAction=function(a,b,c){return new Zb(this,a,b,c)};A.doOnNext=A.tapOnNext=function(a,b){return this.tap("undefined"!==typeof b?function(c){a.call(b,c)}:a)};A.doOnError=A.tapOnError=function(a,b){return this.tap(ma,"undefined"!==
typeof b?function(c){a.call(b,c)}:a)};A.doOnCompleted=A.tapOnCompleted=function(a,b){return this.tap(ma,null,"undefined"!==typeof b?function(){a.call(b)}:a)};A["finally"]=function(b){var e=this;return new P(function(c){var d=a(e.subscribe).call(e,c);return d===K?(b(),k(d.e)):oa(function(){var e=a(d.dispose).call(d);b();e===K&&k(e.e)})},this)};var $b=function(a){function b(e){this.source=e;a.call(this)}function c(a){this.o=a;this.isStopped=!1}G(b,a);b.prototype.subscribeCore=function(a){return this.source.subscribe(new c(a))};
c.prototype.onNext=ma;c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};c.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())};c.prototype.dispose=function(){this.isStopped=!0};c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(a),!0)};return b}(X);A.ignoreElements=function(){return new $b(this)};A.materialize=function(){var a=this;return new P(function(b){return a.subscribe(function(a){b.onNext(qb(a))},
function(a){b.onNext(rb(a));b.onCompleted()},function(){b.onNext(sb());b.onCompleted()})},a)};A.repeat=function(a){return ab(this,a).concat()};A.retry=function(a){return ab(this,a).catchError()};A.retryWhen=function(a){return ab(this).catchErrorWhen(a)};var ac=function(a){function b(e,c,d,f){this.source=e;this.accumulator=c;this.hasSeed=d;this.seed=f;a.call(this)}G(b,a);b.prototype.subscribeCore=function(a){return this.source.subscribe(new O(a,this))};return b}(X);O.prototype={onNext:function(b){if(!this.isStopped){!this.hasValue&&
(this.hasValue=!0);this.hasAccumulation?this.accumulation=a(this.accumulator)(this.accumulation,b):(this.accumulation=this.hasSeed?a(this.accumulator)(this.seed,b):b,this.hasAccumulation=!0);if(this.accumulation===K)return this.o.onError(this.accumulation.e);this.o.onNext(this.accumulation)}},onError:function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))},onCompleted:function(){this.isStopped||(this.isStopped=!0,!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),this.o.onCompleted())},
dispose:function(){this.isStopped=!0},fail:function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)}};A.scan=function(){var a=!1,b,c=arguments[0];2===arguments.length&&(a=!0,b=arguments[1]);return new ac(this,c,a,b)};A.skipLast=function(a){if(0>a)throw new da;var b=this;return new P(function(c){var d=[];return b.subscribe(function(b){d.push(b);d.length>a&&c.onNext(d.shift())},function(a){c.onError(a)},function(){c.onCompleted()})},b)};A.startWith=function(){var a,b=0;arguments.length&&
ca(arguments[0])?(a=arguments[0],b=1):a=la;for(var c=[],d=arguments.length;b<d;b++)c.push(arguments[b]);return gb([Fb(c,a),this]).concat()};A.takeLast=function(a){if(0>a)throw new da;var b=this;return new P(function(c){var d=[];return b.subscribe(function(b){d.push(b);d.length>a&&d.shift()},function(a){c.onError(a)},function(){for(;0<d.length;)c.onNext(d.shift());c.onCompleted()})},b)};A.flatMapConcat=A.concatMap=function(a,b,c){return(new Ta(this,a,b,c)).merge(1)};var jb=function(b){function e(a,
e,c){this.source=a;this.selector=ra(e,c,3);b.call(this)}function c(a,b){return function(e,c,d){return a.call(this,b.selector(e,c,d),c,d)}}function d(a,b,e){this.o=a;this.selector=b;this.source=e;this.i=0;this.isStopped=!1}G(e,b);e.prototype.internalMap=function(a,b){return new e(this.source,c(a,this),b)};e.prototype.subscribeCore=function(a){return this.source.subscribe(new d(a,this.selector,this))};d.prototype.onNext=function(b){if(!this.isStopped){b=a(this.selector)(b,this.i++,this.source);if(b===
K)return this.o.onError(b.e);this.o.onNext(b)}};d.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};d.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())};d.prototype.dispose=function(){this.isStopped=!0};d.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return e}(X);A.map=A.select=function(a,b){var c="function"===typeof a?a:function(){return a};return this instanceof jb?this.internalMap(c,
b):new jb(this,c,b)};A.pluck=function(){var a=arguments.length,b=Array(a);if(0===a)throw Error("List of properties cannot be empty.");for(var c=0;c<a;c++)b[c]=arguments[c];return this.map(R(b,a))};A.flatMap=A.selectMany=function(a,b,c){return(new Ta(this,a,b,c)).mergeAll()};B.Observable.prototype.flatMapWithMaxConcurrent=function(a,b,c,d){return(new Ta(this,b,c,d)).merge(a)};B.Observable.prototype.flatMapLatest=function(a,b,c){return(new Ta(this,a,b,c)).switchLatest()};var bc=function(a){function b(e,
c){this.source=e;this.skipCount=c;a.call(this)}function c(a,b){this.r=this.c=b;this.o=a;this.isStopped=!1}G(b,a);b.prototype.subscribeCore=function(a){return this.source.subscribe(new c(a,this.skipCount))};c.prototype.onNext=function(a){if(!this.isStopped)if(0>=this.r)this.o.onNext(a);else this.r--};c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};c.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())};c.prototype.dispose=
function(){this.isStopped=!0};c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return b}(X);A.skip=function(a){if(0>a)throw new da;return new bc(this,a)};A.skipWhile=function(a,b){var c=this,d=ra(a,b,3);return new P(function(a){var b=0,e=!1;return c.subscribe(function(f){if(!e)try{e=!d(f,b++,c)}catch(h){a.onError(h);return}e&&a.onNext(f)},function(b){a.onError(b)},function(){a.onCompleted()})},c)};A.take=function(a,b){if(0>a)throw new da;if(0===a)return Bb(b);
var c=this;return new P(function(b){var e=a;return c.subscribe(function(a){0<e--&&(b.onNext(a),0>=e&&b.onCompleted())},function(a){b.onError(a)},function(){b.onCompleted()})},c)};A.takeWhile=function(a,b){var c=this,d=ra(a,b,3);return new P(function(a){var b=0,e=!0;return c.subscribe(function(f){if(e){try{e=d(f,b++,c)}catch(h){a.onError(h);return}if(e)a.onNext(f);else a.onCompleted()}},function(b){a.onError(b)},function(){a.onCompleted()})},c)};var kb=function(b){function e(a,e,c){this.source=a;this.predicate=
ra(e,c,3);b.call(this)}function c(a,b){return function(e,c,d){return b.predicate(e,c,d)&&a.call(this,e,c,d)}}function d(a,b,e){this.o=a;this.predicate=b;this.source=e;this.i=0;this.isStopped=!1}G(e,b);e.prototype.subscribeCore=function(a){return this.source.subscribe(new d(a,this.predicate,this))};e.prototype.internalFilter=function(a,b){return new e(this.source,c(a,this),b)};d.prototype.onNext=function(b){if(!this.isStopped){var e=a(this.predicate)(b,this.i++,this.source);if(e===K)return this.o.onError(e.e);
e&&this.o.onNext(b)}};d.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))};d.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())};d.prototype.dispose=function(){this.isStopped=!0};d.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)};return e}(X);A.filter=A.where=function(a,b){return this instanceof kb?this.internalFilter(a,b):new kb(this,a,b)};M.fromCallback=function(a,b,c){return function(){"undefined"===
typeof b&&(b=this);for(var d=arguments.length,f=Array(d),h=0;h<d;h++)f[h]=arguments[h];d=b;h=new Ua;f.push(Q(h,d,c));a.apply(d,f);return h.asObservable()}};M.fromNodeCallback=function(a,b,c){return function(){"undefined"===typeof b&&(b=this);for(var d=arguments.length,f=Array(d),h=0;h<d;h++)f[h]=arguments[h];d=b;h=new Ua;f.push(L(h,d,c));a.apply(d,f);return h.asObservable()}};V.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)};M.fromEvent=
function(a,b,c){return a.addListener?cc(function(c){a.addListener(b,c)},function(c){a.removeListener(b,c)},c):new P(function(d){return I(a,b,ba(d,c))})};var cc=M.fromEventPattern=function(b,e,c,d){ca(d)||(d=la);return(new P(function(d){function f(){var b=arguments[0];if(W(c)&&(b=a(c).apply(null,arguments),b===K))return d.onError(b.e);d.onNext(b)}var h=b(f);return oa(function(){W(e)&&e(f,h)})})).publish().refCount()},dc=function(a){function b(c){this.p=c;a.call(this)}G(b,a);b.prototype.subscribeCore=
function(a){this.p.then(function(b){a.onNext(b);a.onCompleted()},function(b){a.onError(b)});return ja};return b}(X),ia=M.fromPromise=function(a){return new dc(a)};A.toPromise=function(a){a||(a=B.config.Promise);if(!a)throw new xa("Promise type not provided nor in Rx.config.Promise");var b=this;return new a(function(a,c){var d,f=!1;b.subscribe(function(a){d=a;f=!0},c,function(){f&&a(d)})})};M.startAsync=function(a){var b;try{b=a()}catch(c){return bb(c)}return ia(b)};A.multicast=function(a,b){var c=
this;return"function"===typeof a?new P(function(d){var f=c.multicast(a());return new U(b(f).subscribe(d),f.connect())},c):new ec(c,a)};A.publish=function(a){return a&&W(a)?this.multicast(function(){return new Aa},a):this.multicast(new Aa)};A.share=function(){return this.publish().refCount()};A.publishLast=function(a){return a&&W(a)?this.multicast(function(){return new Ua},a):this.multicast(new Ua)};A.publishValue=function(a,b){return 2===arguments.length?this.multicast(function(){return new lb(b)},
a):this.multicast(new lb(a))};A.shareValue=function(a){return this.publishValue(a).refCount()};A.replay=function(a,b,c,d){return a&&W(a)?this.multicast(function(){return new mb(b,c,d)},a):this.multicast(new mb(b,c,d))};A.shareReplay=function(a,b,c){return this.replay(null,a,b,c).refCount()};var ec=B.ConnectableObservable=function(a){function b(c,e){var d=!1,f,h=c.asObservable();this.connect=function(){d||(d=!0,f=new U(h.subscribe(e),oa(function(){d=!1})));return f};a.call(this,function(a){return e.subscribe(a)})}
G(b,a);b.prototype.refCount=function(){var a,b=0,c=this;return new P(function(e){var d=1===++b,f=c.subscribe(e);d&&(a=c.connect());return function(){f.dispose();0===--b&&a.dispose()}})};return b}(M),fc=M.interval=function(a,b){return ea(a,a,ca(b)?b:ya)};M.timer=function(a,b,c){var d;ca(c)||(c=ya);null!=b&&"number"===typeof b?d=b:ca(b)&&(c=b);return a instanceof Date&&void 0===d?aa(a.getTime(),c):a instanceof Date&&void 0!==d?Y(a.getTime(),b,c):void 0===d?Z(a,c):ea(a,d,c)};A.delay=function(a,b){ca(b)||
(b=ya);return a instanceof Date?ga(this,a.getTime(),b):S(this,a,b)};A.debounce=function(a,b){ca(b)||(b=ya);var c=this;return new P(function(d){var f=new na,h=!1,k,g=0,v=c.subscribe(function(c){h=!0;k=c;g++;var m=g;c=new T;f.setDisposable(c);c.setDisposable(b.scheduleWithRelative(a,function(){h&&g===m&&d.onNext(k);h=!1}))},function(a){f.dispose();d.onError(a);h=!1;g++},function(){f.dispose();h&&d.onNext(k);d.onCompleted();h=!1;g++});return new U(v,f)},this)};A.throttle=function(a,b){return this.debounce(a,
b)};A.timestamp=function(a){ca(a)||(a=ya);return this.map(function(b){return{value:b,timestamp:a.now()}})};A.sample=A.throttleLatest=function(a,b){ca(b)||(b=ya);return"number"===typeof a?ka(this,fc(a,b)):ka(this,a)};A.timeout=function(a,b,c){null!=b&&"string"!==typeof b||(b=bb(Error(b||"Timeout")));ca(c)||(c=ya);var d=this,f=a instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new P(function(h){function k(){var d=g;u.setDisposable(c[f](a,function(){g===d&&(fa(b)&&(b=ia(b)),B.setDisposable(b.subscribe(h)))}))}
var g=0,v=new T,B=new na,u=new na;B.setDisposable(v);k();v.setDisposable(d.subscribe(function(a){g++;h.onNext(a);k()},function(a){g++;h.onError(a)},function(){g++;h.onCompleted()}));return new U(B,u)},d)};A.throttleFirst=function(a,b){ca(b)||(b=ya);var c=+a||0;if(0>=c)throw new RangeError("windowDuration cannot be less or equal zero.");var d=this;return new P(function(a){var f=0;return d.subscribe(function(d){var h=b.now();if(0===f||h-f>=c)f=h,a.onNext(d)},function(b){a.onError(b)},function(){a.onCompleted()})},
d)};var gc=function(a){function b(a){var c=this.source.publish();a=c.subscribe(a);var e=ja,d=this.pauser.distinctUntilChanged().subscribe(function(a){a?e=c.connect():(e.dispose(),e=ja)});return new U(a,e,d)}function c(d,f){this.source=d;this.controller=new Aa;this.pauser=f&&f.subscribe?this.controller.merge(f):this.controller;a.call(this,b,d)}G(c,a);c.prototype.pause=function(){this.controller.onNext(!1)};c.prototype.resume=function(){this.controller.onNext(!0)};return c}(M);A.pausable=function(a){return new gc(this,
a)};var hc=function(a){function b(a){function c(){for(;0<e.length;)a.onNext(e.shift())}var e=[],d;return sa(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(a,b){return{data:a,shouldFire:b}}).subscribe(function(b){if(void 0!==d&&b.shouldFire!=d)(d=b.shouldFire)&&c();else if(d=b.shouldFire)a.onNext(b.data);else e.push(b.data)},function(b){c();a.onError(b)},function(){c();a.onCompleted()})}function c(d,f){this.source=d;this.controller=new Aa;this.pauser=f&&f.subscribe?this.controller.merge(f):
this.controller;a.call(this,b,d)}G(c,a);c.prototype.pause=function(){this.controller.onNext(!1)};c.prototype.resume=function(){this.controller.onNext(!0)};return c}(M);A.pausableBuffered=function(a){return new hc(this,a)};var jc=function(a){function b(a){return this.source.subscribe(a)}function c(d,f,h){a.call(this,b,d);this.subject=new ic(f,h);this.source=d.multicast(this.subject).refCount()}G(c,a);c.prototype.request=function(a){return this.subject.request(null==a?-1:a)};return c}(M),ic=function(a){function b(a){return this.subject.subscribe(a)}
function c(d,f){null==d&&(d=!0);a.call(this,b);this.subject=new Aa;this.queue=(this.enableQueue=d)?[]:null;this.requestedCount=0;this.error=this.requestedDisposable=null;this.hasCompleted=this.hasFailed=!1;this.scheduler=f||qa}G(c,a);Ha(c.prototype,za,{onCompleted:function(){this.hasCompleted=!0;this.enableQueue&&0!==this.queue.length?this.queue.push(wa.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(a){this.hasFailed=!0;this.error=a;this.enableQueue&&
0!==this.queue.length?this.queue.push(wa.createOnError(a)):(this.subject.onError(a),this.disposeCurrentRequest())},onNext:function(a){0>=this.requestedCount?this.enableQueue&&this.queue.push(wa.createOnNext(a)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(a))},_processRequest:function(a){if(this.enableQueue)for(;0<this.queue.length&&(0<a||"N"!==this.queue[0].kind);){var b=this.queue.shift();b.accept(this.subject);"N"===b.kind?a--:(this.disposeCurrentRequest(),this.queue=
[])}return a},request:function(a){this.disposeCurrentRequest();var b=this;return this.requestedDisposable=this.scheduler.scheduleWithState(a,function(a,c){var e=b._processRequest(c);if(!b.hasCompleted&&!b.hasFailed&&0<e)return b.requestedCount=e,oa(function(){b.requestedCount=0})})},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}});return c}(M);A.controlled=function(a,b){a&&ca(a)&&(b=a,a=!0);null==a&&(a=!0);return new jc(this,
a,b)};A.pipe=function(a){function b(){c.resume()}var c=this.pausableBuffered();a.addListener("drain",b);c.subscribe(function(b){!a.write(String(b))&&c.pause()},function(b){a.emit("error",b)},function(){!a._isStdio&&a.end();a.removeListener("drain",b)});c.resume();return a};var P=B.AnonymousObservable=function(b){function c(a){return a&&W(a.dispose)?a:W(a)?oa(a):ja}function d(b,f){var h=f[0],g=f[1],g=a(g.__subscribe).call(g,h);if(g===K&&!h.fail(K.e))return k(K.e);h.setDisposable(c(g))}function f(a){a=
new fb(a);var b=[a,this];qa.scheduleRequired()?qa.scheduleWithState(b,d):d(null,b);return a}function h(a,c){this.source=c;this.__subscribe=a;b.call(this,f)}G(h,b);return h}(M),fb=function(b){function c(a){b.call(this);this.observer=a;this.m=new T}G(c,b);var d=c.prototype;d.next=function(b){b=a(this.observer.onNext).call(this.observer,b);b===K&&(this.dispose(),k(b.e))};d.error=function(b){b=a(this.observer.onError).call(this.observer,b);this.dispose();b===K&&k(b.e)};d.completed=function(){var b=a(this.observer.onCompleted).call(this.observer);
this.dispose();b===K&&k(b.e)};d.setDisposable=function(a){this.m.setDisposable(a)};d.getDisposable=function(){return this.m.getDisposable()};d.dispose=function(){b.prototype.dispose.call(this);this.m.dispose()};return c}(Pa),Va=function(a,b){this.subject=a;this.observer=b};Va.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var a=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(a,1);this.observer=null}};var Aa=B.Subject=function(a){function b(a){ha(this);
if(!this.isStopped)return this.observers.push(a),new Va(this,a);if(this.hasError)return a.onError(this.error),ja;a.onCompleted();return ja}function c(){a.call(this,b);this.isStopped=this.isDisposed=!1;this.observers=[];this.hasError=!1}G(c,a);Ha(c.prototype,za.prototype,{hasObservers:function(){return 0<this.observers.length},onCompleted:function(){ha(this);if(!this.isStopped){this.isStopped=!0;for(var a=0,b=g(this.observers),c=b.length;a<c;a++)b[a].onCompleted();this.observers.length=0}},onError:function(a){ha(this);
if(!this.isStopped){this.isStopped=!0;this.error=a;this.hasError=!0;for(var b=0,c=g(this.observers),e=c.length;b<e;b++)c[b].onError(a);this.observers.length=0}},onNext:function(a){ha(this);if(!this.isStopped)for(var b=0,c=g(this.observers),e=c.length;b<e;b++)c[b].onNext(a)},dispose:function(){this.isDisposed=!0;this.observers=null}});c.create=function(a,b){return new kc(a,b)};return c}(M),Ua=B.AsyncSubject=function(a){function b(a){ha(this);if(!this.isStopped)return this.observers.push(a),new Va(this,
a);if(this.hasError)a.onError(this.error);else{if(this.hasValue)a.onNext(this.value);a.onCompleted()}return ja}function c(){a.call(this,b);this.hasValue=this.isStopped=this.isDisposed=!1;this.observers=[];this.hasError=!1}G(c,a);Ha(c.prototype,za,{hasObservers:function(){ha(this);return 0<this.observers.length},onCompleted:function(){var a,b;ha(this);if(!this.isStopped){this.isStopped=!0;var c=g(this.observers);b=c.length;if(this.hasValue)for(a=0;a<b;a++){var e=c[a];e.onNext(this.value);e.onCompleted()}else for(a=
0;a<b;a++)c[a].onCompleted();this.observers.length=0}},onError:function(a){ha(this);if(!this.isStopped){this.hasError=this.isStopped=!0;this.error=a;for(var b=0,c=g(this.observers),e=c.length;b<e;b++)c[b].onError(a);this.observers.length=0}},onNext:function(a){ha(this);this.isStopped||(this.value=a,this.hasValue=!0)},dispose:function(){this.isDisposed=!0;this.value=this.exception=this.observers=null}});return c}(M),kc=B.AnonymousSubject=function(a){function b(a){return this.observable.subscribe(a)}
function c(d,f){this.observer=d;this.observable=f;a.call(this,b)}G(c,a);Ha(c.prototype,za.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(a){this.observer.onError(a)},onNext:function(a){this.observer.onNext(a)}});return c}(M),lb=B.BehaviorSubject=function(a){function b(a){ha(this);if(!this.isStopped)return this.observers.push(a),a.onNext(this.value),new Va(this,a);if(this.hasError)a.onError(this.error);else a.onCompleted();return ja}function c(d){a.call(this,b);this.value=
d;this.observers=[];this.hasError=this.isStopped=this.isDisposed=!1}G(c,a);Ha(c.prototype,za,{getValue:function(){ha(this);if(this.hasError)throw this.error;return this.value},hasObservers:function(){return 0<this.observers.length},onCompleted:function(){ha(this);if(!this.isStopped){this.isStopped=!0;for(var a=0,b=g(this.observers),c=b.length;a<c;a++)b[a].onCompleted();this.observers.length=0}},onError:function(a){ha(this);if(!this.isStopped){this.hasError=this.isStopped=!0;this.error=a;for(var b=
0,c=g(this.observers),e=c.length;b<e;b++)c[b].onError(a);this.observers.length=0}},onNext:function(a){ha(this);if(!this.isStopped){this.value=a;for(var b=0,c=g(this.observers),e=c.length;b<e;b++)c[b].onNext(a)}},dispose:function(){this.isDisposed=!0;this.exception=this.value=this.observers=null}});return c}(M),mb=B.ReplaySubject=function(a){function b(a,c){return oa(function(){c.dispose();!a.isDisposed&&a.observers.splice(a.observers.indexOf(c),1)})}function c(a){a=new ub(this.scheduler,a);var d=
b(this,a);ha(this);this._trim(this.scheduler.now());this.observers.push(a);for(var f=0,h=this.q.length;f<h;f++)a.onNext(this.q[f].value);if(this.hasError)a.onError(this.error);else if(this.isStopped)a.onCompleted();a.ensureActive();return d}function d(b,e,h){this.bufferSize=null==b?f:b;this.windowSize=null==e?f:e;this.scheduler=h||qa;this.q=[];this.observers=[];this.hasError=this.isDisposed=this.isStopped=!1;this.error=null;a.call(this,c)}var f=Math.pow(2,53)-1;G(d,a);Ha(d.prototype,za.prototype,
{hasObservers:function(){return 0<this.observers.length},_trim:function(a){for(;this.q.length>this.bufferSize;)this.q.shift();for(;0<this.q.length&&a-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(a){ha(this);if(!this.isStopped){var b=this.scheduler.now();this.q.push({interval:b,value:a});this._trim(b);for(var b=0,c=g(this.observers),e=c.length;b<e;b++){var d=c[b];d.onNext(a);d.ensureActive()}}},onError:function(a){ha(this);if(!this.isStopped){this.isStopped=!0;this.error=a;this.hasError=
!0;var b=this.scheduler.now();this._trim(b);for(var b=0,c=g(this.observers),e=c.length;b<e;b++){var d=c[b];d.onError(a);d.ensureActive()}this.observers.length=0}},onCompleted:function(){ha(this);if(!this.isStopped){this.isStopped=!0;var a=this.scheduler.now();this._trim(a);for(var a=0,b=g(this.observers),c=b.length;a<c;a++){var e=b[a];e.onCompleted();e.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0;this.observers=null}});return d}(M);B.Pauser=function(a){function b(){a.call(this)}
G(b,a);b.prototype.pause=function(){this.onNext(!1)};b.prototype.resume=function(){this.onNext(!0)};return b}(Aa);q.exports=B}).call(l,function(){return this}(),d(14))},function(q,l,d){(function(n){function p(a,b,c){var d=3>=arguments.length||void 0===arguments[3]?null:arguments[3];this.name="RequestError";this.url=a;this.xhr=b;this.code=b.status;this.reason=d;this.message="request: "+c+" ("+a+")";Error.captureStackTrace&&Error.captureStackTrace(this,p)}function g(a,b){var c=b.code,d=b.method,h=b.message;
this.name="RestCallMethodError";this.url=a;this.code=c;this.message="restmethodcall: webservice error status "+c+" ("+a+")"+(d?" ("+d+")":"")+(h?"\n"+h:"");Error.captureStackTrace&&Error.captureStackTrace(this,g)}function b(a,b,c){a=a.querySelector("RestCallResult");var d=+a.querySelector("Status").textContent;if(0>d)throw new g(b,{code:d,method:c});return{output:a.querySelector("Output"),status:d}}function a(a){return"rest-call-method"==a.format?c(a):u.create(function(b){function c(a){var d=a.target,
f=d.status;if(200>f||300<=f)return b.onError(new p(h,d,d.statusText));var f=Date.now()-L,k;k="document"==u?(new n.DOMParser).parseFromString(d.responseText,"text/xml"):d.response;if("json"==u&&"string"==typeof k)try{k=JSON.parse(k)}catch(g){k=null}if(null==k)return b.onError(new p(h,d,'null response with format "'+u+'" (error while parsing or wrong content-type)'));if(x){var r;if(t){r=t;for(var l={},E,D=0;D<r.length;D++)E=r[D],l[E]=d.getResponseHeader(E);r=l}b.onNext({blob:k,size:a.total,duration:f,
headers:r,url:d.responseURL||h,xhr:d})}else b.onNext(k);b.onCompleted()}function d(a){b.onError(new p(h,a,"error event"))}var h=a.url,k=a.data,g=a.headers,u=a.format,x=a.withMetadata,t=a.responseHeaders,r=new XMLHttpRequest;r.open(a.method||"GET",h,!0);r.responseType="document"==u?"text":u||"text";if(g)for(var l in g)r.setRequestHeader(l,g[l]);r.addEventListener("load",c,!1);r.addEventListener("error",d,!1);var L=Date.now();r.send(k);return function(){var a=r.readyState;0<a&&4>a&&(r.removeEventListener("load",
c),r.removeEventListener("error",d),r.abort());r=null}})}function k(a){return(a||"").toString().replace(r,function(a){return x[a]})}function t(a){var b="",c;for(c in a)var d=a[c],d="object"==typeof d?t(d):k(d),b=b+("<"+c+">"+d+"</"+c+">");return b}function c(c){c.method="POST";c.headers={"Content-Type":"application/xml"};c.data=h.replace("{payload}",t(c.data));c.format="document";return a(c).map(function(a){return b(a,c.url,c.ScriptInfo)})}var u=d(3).Observable;p.prototype=Error();g.prototype=Error();
var r=/[&<>]/g,x={"&":"&amp;","<":"&lt;",">":"&gt;"},h='<RestCallMethod xmlns:i="http://www.w3.org/2001/XMLSchema-instance">{payload}</RestCallMethod>';a.escapeXml=k;a.RequestError=p;a.RestCallMethodError=g;a.RestCallResult=b;a.getNodeTextContent=function(a,b){var c=a.querySelector(b);return c&&c.textContent};q.exports=a}).call(l,function(){return this}())},function(q,l){function d(){k=!1;t.length?a=t.concat(a):c=-1;a.length&&n()}function n(){if(!k){var b=setTimeout(d);k=!0;for(var g=a.length;g;){t=
a;for(a=[];++c<g;)t&&t[c].run();c=-1;g=a.length}t=null;k=!1;clearTimeout(b)}}function p(a,b){this.fun=a;this.array=b}function g(){}var b=q.exports={},a=[],k=!1,t,c=-1;b.nextTick=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];a.push(new p(b,c));1!==a.length||k||setTimeout(n,0)};p.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=g;b.addListener=
g;b.once=g;b.off=g;b.removeListener=g;b.removeAllListeners=g;b.emit=g;b.binding=function(a){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(a){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},function(q,l,d){function n(a){function b(a,c,h){if(a>=f.length)return h(R());var k=f[a],g=k.keySystem;E(k.keyType,d).then(function(a){return c({keySystem:g,keySystemAccess:a})},function(){return b(a+1,c,h)})}if(L&&Q&&!Q.alwaysRenew){if(a=
k.find(a,function(a){return a.type==L}))return c.resolve({keySystem:a,keySystemAccess:I});throw R();}var d=[{initDataTypes:["cenc"]}],f=k.flatten(a,function(a){return k.map(H[a.type],function(b){return{keyType:b,keySystem:a}})});return new c(function(a,c){return b(0,a,c)})}function p(a,b,c){return c.createMediaKeys().then(function(c){Q=c;L=b.type;t.debug("eme: set mediakeys");return D(a,c).then(function(){return c})})}function g(a,b,c){var d=3>=arguments.length||void 0===arguments[3]?!1:arguments[3];
t.debug("eme: generate request",b,c,d);return a.generateRequest(b,c).then(function(){d&&a.keyStatuses&&(t.info("eme: store session",a),V.set(c,a));return a})}function b(a){return k.isPromise(a)?h(a):k.isObservable(a)?a:z(a)}function a(a,c){function d(b){var f=new Uint8Array(b.initData),x=b.initDataType;t.info("eme: encrypted event",b);return h(n(c)).flatMap(function(b){var c=b.keySystem;b=b.keySystemAccess;t.info("eme: compatible keysystem",c.type);b=p(a,c,b);return h(b).flatMap(function(a){var b=
V.get(f);if(b){if(0<b.keyStatuses.size)return t.debug("eme: reuse session"),z(b);V["delete"](f)}t.debug("eme: create session");b=a.createSession("temporary");return g(b,x,f,u)}).flatMap(function(a){return k(a,c,f)})})}function k(a,c,d){var h,g=N(a).map(function(a){a="eme: keyerror event "+a.errorCode+" / "+a.systemCode;t.error(a);throw Error(a);}),B=y(a).flatMap(function(d){h=d.sessionId;for(var f=a.keyStatuses.values(),k=f.next();!k.done;k=f.next())if(k=O[k.value])throw t.error(k),Error(k);if(!c.onKeyStatusesChange)return t.warn("eme: keystatuseschange event not handled"),
x();var g;try{g=c.onKeyStatusesChange(d,a)}catch(v){g=r["throw"](v)}return b(g)["catch"](function(a){var b="eme: onKeyStatusesChange has failed (reason: "+(a&&a.message||"unknown")+")",c=Error(b);c.reason=a;t.error(b);throw c;})}),u=F(a).flatMap(function(a){h=a.sessionId;var d=a.message;a=a.messageType;var f;try{f=c.getLicense(new Uint8Array(d),a||"licenserequest")}catch(k){f=r["throw"](k)}return b(f)["catch"](function(a){var b="eme: getLicense has failed (reason: "+(a&&a.message||"unknown")+")",
c=Error(b);c.reason=a;t.error(b);throw c;})}),B=f(u,B).concatMap(function(b){return a.update(b,h)["catch"](function(a){t.error("eme: error on session update",h,a);throw a;})}).map(function(){return{type:"eme",value:{session:a,name:"session-updated"}}});return f(B,g).tapOnError(function(){t.debug("eme: delete session from store",h);V["delete"](d)})}var u=(2>=arguments.length||void 0===arguments[2]?{}:arguments[2]).persistedSessions;return r.create(function(b){var c=J(a).take(1).flatMap(d).subscribe(b);
return function(){c&&c.dispose();D(a,null)["catch"](function(a){return t.warn(a)})}})}var k=d(1),t=d(4),c=d(7);d(2);var u=d(6).bytesToHex,r=d(3).Observable,x=r.empty,h=r.fromPromise,f=r.merge,z=r.just;l=d(8);var E=l.requestMediaKeySystemAccess,D=l.setMediaKeys;l=l.emeEvents;var J=l.onEncrypted,F=l.onKeyMessage,N=l.onKeyError,y=l.onKeyStatusesChange,H={clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.youtube.playready","com.microsoft.playready"]},
O={"output-not-allowed":"eme: the required output protection is not available.",expired:"eme: a required key has expired and the content cannot be decrypted.","internal-error":"eme: an unknown error has occurred in the CDM."},R=function(){return Error("eme: could not find a compatible key system")},Q,L,V=function(){var a={};return{get:function(b){return a[u(b)]},set:function(b,c){a[u(b)]=c},"delete":function(b){delete a[u(b)]},dispose:function(){a={}}}}(),I={createMediaKeys:function(){return c.resolve(Q)}};
a.onEncrypted=function(a){return J(a)};a.getCurrentKeySystem=function(){return L};a.dispose=function(){L=Q=null;V.dispose()};q.exports=a},function(q,l,d){function n(a){this.name="OutOfIndexError";this.type=a;this.message="out of range in index "+a}function p(d){switch(d.indexType){case "template":return g;case "timeline":return b;case "list":return a;case "base":return k;default:throw Error("index-handler: unrecognized indexType "+d.indexType);}}d(2);var g=d(30),b=d(17),a=d(29),k=d(28);n.prototype=
Error();l=function(){function a(b,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=b;this.representation=d;this.index=d.index;this.handler=new (p(this.index))(this.index)}a.prototype.getInitSegment=function(){var a=this.index.initialization||{};return{id:"init_"+this.adaptation.id+"_"+this.representation.id,init:!0,media:a.media,range:a.range,indexRange:this.index.indexRange}};a.prototype.normalizeRange=function(a,b,d){var k=this.index.presentationTimeOffset||
0,h=this.index.timescale||1;b||(b=0);d||(d=0);b=Math.min(b,d);return{time:a*h-k,up:(a+b)*h-k,to:(a+d)*h-k}};a.prototype.getSegments=function(a,b,d){a=this.normalizeRange(a,b,d);b=a.up;d=a.to;if(!this.handler.checkRange(a.time))throw new n(this.index.indexType);return this.handler.getSegments(b,d)};a.prototype.insertNewSegments=function(a,b){for(var d=[],k=0;k<a.length;k++)this.handler.addSegment(a[k],b)&&d.push(a[k]);return d};a.prototype.setTimescale=function(a){var b=this.index;return b.timescale!==
a?(b.timescale=a,!0):!1};a.prototype.scale=function(a){return a/this.index.timescale};return a}();q.exports={OutOfIndexError:n,IndexHandler:l,getLiveEdge:function(a){var b=a.adaptations.video[0].representations[0].index;return p(b).getLiveEdge(b,a)}}},function(q,l,d){function n(d){var b=d.ts,a=d.d;d=d.r;return-1===a?b:b+(d+1)*a}var p=d(1);l=function(){function d(b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.index=b;this.timeline=b.timeline}d.getLiveEdge=
function(b,a){var d=n(p.last(b.timeline))/b.timescale-a.suggestedPresentationDelay;return Math.max(b.timeline[0].ts/b.timescale+1,d)};d.prototype.createSegment=function(b,a,d){return{id:b,media:this.index.media,time:b,number:void 0,range:a,duration:d}};d.prototype.calculateRepeat=function(b,a){var d=b.r||0;0>d&&(d=Math.ceil(((a?a.t:Infinity)-b.ts)/b.d)-1);return d};d.prototype.checkRange=function(b){var a=p.last(this.timeline);if(!a)return!0;0>a.d&&(a={ts:a.ts,d:0,r:a.r});return b<=n(a)};d.prototype.getSegmentIndex=
function(b){for(var a=this.timeline,d=0,g=a.length;d<g;){var c=d+g>>>1;a[c].ts<b?d=c+1:g=c}return 0<d?d-1:d};d.prototype.getSegmentNumber=function(b,a,d){b=a-b;return 0<b?Math.floor(b/d):0};d.prototype.getSegments=function(b,a){var d=this.index.timeline,g=[],c=d.length,u=this.getSegmentIndex(b)-1,n=d.length&&d[0].d||0;a:for(;!(++u>=c);){var x=d[u],h=x.d,f=x.ts,p=x.range,n=Math.max(n,h);if(0>h){f+n<a&&g.push(this.createSegment(f,p,void 0));break}for(var x=this.calculateRepeat(x,d[u+1]),l=this.getSegmentNumber(f,
b,h),D;(D=f+l*h)<a;)if(l++<=x)g.push(this.createSegment(D,p,h));else continue a;break}return g};d.prototype.addSegment=function(b,a){var d=this.timeline,g=d.length,c=d[g-1];if(a&&b.ts===a.ts){var u=b.ts+b.d,p=u-(c.ts+c.d*c.r);if(0>=p)return!1;-1===c.d&&((g=d[g-2])&&g.d===p?(g.r++,d.pop()):c.d=p);d.push({d:-1,ts:u,r:0});return!0}return b.ts>=n(c)?(c.d===b.d?c.r++:d.push({d:b.d,ts:b.ts,r:0}),!0):!1};return d}();q.exports=l},function(q,l,d){function n(b,c,d){b.id=b.id||a.uniqueId();var g=b.adaptations,
g=g.concat(d||[]),g=a.map(g,function(a){return p(a,c)}),g=a.filter(g,function(a){return 0>x.indexOf(a.type)?(k.warn("not supported adaptation type",a.type),!1):!0});t(0<g.length);b.adaptations=a.groupBy(g,"type");return b}function p(c,d){t("undefined"!=typeof c.id);a.defaults(c,d);var g=a.pick(c,r),k=a.map(c.representations,function(b){t("undefined"!=typeof b.id);a.defaults(b,g);var c=b.index;t(c);c.timescale||(c.timescale=1);b.bitrate||(b.bitrate=1);"mp4a.40.02"==b.codecs&&(b.codecs="mp4a.40.2");
return b}).sort(function(a,b){return a.bitrate-b.bitrate}),n=c.type,p=c.mimeType;p||(p=k[0].mimeType);t(p);c.mimeType=p;n||(n=c.type=p.split("/")[0]);if("video"==n||"audio"==n)k=a.filter(k,function(a){return u(b(a))});t(0<k.length,"manifest: no compatible representation for this adaptation");c.representations=k;c.bitrates=a.pluck(k,"bitrate");return c}function g(b){a.isArray(b)||(b=[b]);return a.flatten(b,function(b){var c=b.mimeType,d=b.url,h=b.language;b=b.languages;h&&(b=[h]);return a.map(b,function(b){return{id:a.uniqueId(),
type:"text",lang:b,mimeType:c,rootURL:d,baseURL:"",representations:[{id:a.uniqueId(),mimeType:c,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})})}function b(a){return a.mimeType+';codecs="'+a.codecs+'"'}var a=d(1),k=d(4),t=d(2),c=d(11).parseBaseURL,u=d(8).isCodecSupported,r="profiles width height frameRate audioSamplingRate mimeType segmentProfiles codecs maximumSAPPeriod maxPlayoutRate codingDependency index".split(" "),x=["audio","video","text"];q.exports={normalizeManifest:function(b,
d,k){t(d.transportType);d.id=d.id||a.uniqueId();d.type=d.type||"static";var u=d.locations;u&&u.length||(d.locations=[b]);d.isLive="dynamic"==d.type;var p={rootURL:c(d.locations[0]),baseURL:d.baseURL,isLive:d.isLive};k&&(k=g(k));b=a.map(d.periods,function(a){return n(a,p,k)});a.extend(d,b[0]);d.periods=null;d.duration||(d.duration=Infinity);d.isLive&&(d.suggestedPresentationDelay=d.suggestedPresentationDelay||15,d.availabilityStartTime=d.availabilityStartTime||0);return d},mergeManifestsIndex:function(b,
c){var d=b.adaptations,g=c.adaptations,k;for(k in d){var u=g[k];a.each(d[k],function(b,c){a.simpleMerge(b.index,u[c].index)})}return b},mutateManifestLiveGap:function(a){var b=1>=arguments.length||void 0===arguments[1]?1:arguments[1];a.isLive&&(a.presentationLiveGap+=b)},getCodec:b,getAdaptations:function(c){var d=c.adaptations,g=[];a.each(a.keys(d),function(a){var c=d[a];g.push({type:a,adaptations:c,codec:b(c[0].representations[0])})});return g},getAvailableSubtitles:function(b){return a.pluck(b.adaptations.text,
"lang")},getAvailableLanguages:function(b){return a.pluck(b.adaptations.audio,"lang")}}},function(q,l,d){function n(b,a){var d=b.playbackRate,n=b.duration,c=b.currentTime,u=b.readyState,p=new g(b.buffered),x=p.getRange(c),h=p.getGap(c);return{name:a,ts:c,range:x,gap:h,duration:n,playback:d,readyState:u,stalled:null,buffered:p}}var p=d(3).Observable,g=d(9).BufferedRanges;q.exports={timingsSampler:function(b){return p.create(function(a){function d(c){var k=g,p=c&&c.type||"timeupdate";c=n(b,p);var k=
k.stalled,h=c.gap;(p="loadedmetadata"==p||k)||(p=(p=c.range)?.5>=c.duration-(h+p.end):!1);c.stalled=p||!(.5>=h||Infinity===h)?k&&Infinity>h&&h>("seeking"==k.name?.5:5)?null:k:{name:c.name,playback:c.playback};g=c;a.onNext(g)}var g=n(b,"init"),c=setInterval(d,1E3);b.addEventListener("play",d);b.addEventListener("seeking",d);b.addEventListener("seeked",d);b.addEventListener("loadedmetadata",d);a.onNext(g);return function(){clearInterval(c);b.removeEventListener("play",d);b.removeEventListener("seeking",
d);b.removeEventListener("seeked",d);b.removeEventListener("loadedmetadata",d)}}).shareValue({name:"init",stalled:null})},seekingsSampler:function(b){return b.filter(function(a){return"seeking"==a.name&&(Infinity===a.gap||-2>a.gap)}).skip(1).startWith(!0)},getLiveGap:function(b,a){if(!a.isLive)return Infinity;var d=a.availabilityStartTime,g=a.presentationLiveGap;return Date.now()/1E3-b-(d+g+10)},toWallClockTime:function(b,a){return new Date(1E3*(b+a.availabilityStartTime))},fromWallClockTime:function(b,
a){var d=b,g=a.suggestedPresentationDelay,c=a.presentationLiveGap,p=a.timeShiftBufferDepth;"number"!=typeof d&&(d=d.getTime());var n=Date.now(),p=n-1E3*p;return Math.max(Math.min(d,n-1E3*(c+g)),p)/1E3-a.availabilityStartTime}}},function(q,l,d){function n(d){var g=.3*(2*Math.random()-1);return d*(1+g)}d(3);q.exports={getFuzzedDelay:n,getBackedoffDelay:function(d){return n(d*Math.pow(2,(1>=arguments.length||void 0===arguments[1]?1:arguments[1])-1))}}},function(q,l,d){d(1);q.exports=function(d,p,g){function b(){var a=
l-Date.now();if(0<a)k=setTimeout(b,a);else switch(k=null,c.length){case 0:return d();case 1:return d(c[0]);case 2:return d(c[0],c[1]);case 3:return d(c[0],c[1],c[2]);default:return d.apply(null,c)}}function a(){var d=arguments.length,h=0;for(c=Array(d);h<d;h++)c[h]=arguments[h];if(u&&!r)return r=!0,l=Date.now(),b();d=l;l=Date.now()+p;if(!k||l<d)k&&clearTimeout(k),k=setTimeout(b,p);return a}var k=null,l=0,c=[],u=!(!g||!g.leading),r=!1;a.isWaiting=function(){return!!k};a.dispose=function(){k&&(clearTimeout(k),
k=null)};return a}},function(q,l){q.exports=function(d){d.webpackPolyfill||(d.deprecate=function(){},d.paths=[],d.children=[],d.webpackPolyfill=1);return d}},function(q,l){function d(d){return function(p,g){return null==p?g:d*g+(1-d)*p}}q.exports=function(n,p){return n.map(function(d){return d.value.response}).filter(function(d){return 2E3<d.size}).map(function(d){return d.size/d.duration*8E3}).scan(d(p.alpha))}},function(q,l,d){function n(a,b){return"number"==typeof a&&0<a?a:b}function p(a,b){var c=
2>=arguments.length||void 0===arguments[2]?0:arguments[2];return k.findLast(a,function(a){return a/b<=1-c})||a[0]}function g(a,b){var c=k.find(a,function(a){return a.width>=b});return c?c.bitrate:Infinity}function b(a,b){return b?k.find(a,function(a){return a.lang===b}):null}function a(a,b){return a.filter(function(a){return a.type===b})}var k=d(1),t=d(4);l=d(3);var c=l.BehaviorSubject,u=l.CompositeDisposable,r=l.Observable.combineLatest,x=d(5).only,h=d(23),f={defLanguage:"fra",defSubtitle:"",defBufSize:30,
defBufThreshold:.3};q.exports=function(d,l,D){function q(a){return I.changes().map(function(c){return b(a,c)||a[0]})}function F(a){return ba.changes().map(function(c){return b(a,c)})}var N=k.defaults(3>=arguments.length||void 0===arguments[3]?{}:arguments[3],f),y=N.defSubtitle,H=N.defBufSize,O=N.defBufThreshold,R=N.initVideoBitrate,Q=N.initAudioBitrate,L=D.videoWidth,V=D.inBackground,I=new c(N.defLanguage),ba=new c(y),aa={audio:h(a(d,"audio"),{alpha:.6}).publishValue(Q||0),video:h(a(d,"video"),{alpha:.6}).publishValue(R||
0)},Y=new u(k.map(k.values(aa),function(a){return a.connect()})),Z={audio:new c(Infinity),video:new c(Infinity)},ea={audio:new c(Infinity),video:new c(Infinity)},S={audio:new c(H),video:new c(H),text:new c(H)};return{setLanguage:function(a){I.onNext(a)},setSubtitle:function(a){ba.onNext(a)},getLanguage:function(){return I.value},getSubtitle:function(){return ba.value},getAverageBitrates:function(){return aa},getAudioMaxBitrate:function(){return ea.audio.value},getVideoMaxBitrate:function(){return ea.video.value},
getAudioBufferSize:function(){return S.audio.value},getVideoBufferSize:function(){return S.video.value},setAudioBitrate:function(a){Z.audio.onNext(n(a,Infinity))},setVideoBitrate:function(a){Z.video.onNext(n(a,Infinity))},setAudioMaxBitrate:function(a){ea.audio.onNext(n(a,Infinity))},setVideoMaxBitrate:function(a){ea.video.onNext(n(a,Infinity))},setAudioBufferSize:function(a){S.audio.onNext(n(a,H))},setVideoBufferSize:function(a){S.video.onNext(n(a,H))},getBufferAdapters:function(a){var b=a.type,
d=a.bitrates,f=a.representations;a=f[0];if(1<f.length){a=Z[b];var h=ea[b],n=aa[b].map(function(a,b){return p(d,a,0===b?0:O)}).changes().customDebounce(2E3,{leading:!0});"video"==b&&(h=r(h,L,V,function(a,b,c){if(c)return d[0];b=g(f,b);return b<a?b:a}));a=r(a,h,n,function(a,b,c){return Infinity>a?a:Infinity>b?Math.min(b,c):c}).map(function(a){return k.find(f,function(b){return b.bitrate===p(d,a)})}).changes(function(a){return a.id}).tap(function(a){return t.info("bitrate",b,a.bitrate)})}else a=x(a);
return{representations:a,bufferSizes:S[b]||new c(H)}},getAdaptationsChoice:function(a,b){if("audio"==a)return q(b);if("text"==a)return F(b);if(1==b.length)return x(b[0]);throw Error("adaptive: unknown type "+a+" for adaptation chooser");},dispose:function(){Y&&(Y.dispose(),Y=null)}}}},function(q,l,d){var n=d(1),p=d(4);d(2);var g=d(9).BufferedRanges;l=d(3);var b=l.Observable,a=l.Subject,k=b.combineLatest,t=b.defer,c=b.empty,u=b.from,r=b.just,x=b.merge,h=b.timer;l=d(5);var f=l.first,z=l.on,E=d(46).ArraySet;
d=d(16);var D=d.IndexHandler,J=d.OutOfIndexError;q.exports=function(b){function d(a){O.appendBuffer(a);return f(ka)}function l(a){return t(function(){return O.updating?f(ka).flatMap(function(){return d(a)}):d(a)})}function q(a){function b(c){if(t.test(c.id))return!1;if(c.init||null==c.time)return!0;var d=f.scale(c.time);c=f.scale(c.duration);return(d=ga.hasRange(d,c))?1.5*d.bitrate<a.bitrate:!0}function d(b,c,h,g){var k=[];g&&(p.debug("add init segment",I),k.push(f.getInitSegment()));if(0===c.readyState)return k;
g=c.ts;c=Math.max(0,Math.min(h,c.liveGap,(c.duration||Infinity)-g));b=b.getGap(g);b=b>Y&&Infinity>b?Math.min(b,Z):0;(h=ga.getRange(g))&&h.bitrate===a.bitrate&&(h=Math.floor(h.end-g),h>b&&(b=h));g=f.getSegments(g,b,c);return k.concat(g)}var f=new D(R,a),t=new E,z=k(V,S,sa,function(a,b){return{timing:a,bufferSize:b}}).flatMap(function(f,h){var k=f.timing,l=f.bufferSize,x=new g(O.buffered);ba&&!ga.equals(x)&&(p.debug("intersect new buffer",I),ga.intersect(x));var Y;try{Y=d(x,k,l,0===h),Y=n.filter(Y,
b)}catch(r){if(r instanceof J)return aa.onNext({type:"out-of-index",value:r}),c();throw r;}return u(n.map(Y,function(b){t.add(b.id);return{adaptation:R,representation:a,segment:b}}))}).concatMap(Q).concatMap(function(a){return l(a.parsed.blob).map(a)}).map(function(b){var c=b.parsed;t.remove(b.segment.id);var d=c.timescale;d&&f.setTimescale(d);d=c.nextSegments;c=c.currentSegment;d=d?f.insertNewSegments(d,c):[];c&&ga.insert(a.bitrate,f.scale(c.ts),f.scale(c.ts+c.d));return{type:"segment",value:n.extend({addedSegments:d},
b)}});return x(z,aa)["catch"](function(b){if(412!==b.code)throw b;return r({type:"precondition-failed",value:b}).concat(h(2E3)).concat(q(a))})}var O=b.sourceBuffer,R=b.adaptation,Q=b.pipeline,L=b.adapters,V=b.timings;b=b.seekings;var I=R.type,ba="audio"==I||"video"==I,aa=new a,Y="video"==I?4:1,Z="video"==I?6:1,ea=L.representations,S=L.bufferSizes,ga=new g,ka=x(z(O,"update"),z(O,"error").map(function(a){p.error("buffer: error event",a);throw Error("buffer: error event");})).share(),sa=ka.ignoreElements().startWith(!0);
return k(ea,b,n.identity).flatMapLatest(q)}},function(q,l){var d=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.cache={}}d.prototype.add=function(d,g){var b=d.segment;b.init&&(this.cache[b.id]=g)};d.prototype.get=function(d){d=d.segment;return d.init&&(d=this.cache[d.id],null!=d)?d:null};return d}();q.exports={InitializationSegmentCache:d}},function(q,l,d){l=d(3).Observable;var n=l.merge,p=l.interval;d=d(8);var g=d.visibilityChange,b=
d.videoSizeChange,a=window.devicePixelRatio||1;q.exports=function(d){var l=g().filter(function(a){return!1===a}),c=g().customDebounce(6E4).filter(function(a){return!0===a}),l=n(l,c).startWith(!1);return{videoWidth:n(p(2E4),b().customDebounce(500)).startWith("init").map(function(){return d.clientWidth*a}).changes(),inBackground:l}}},function(q,l,d){function n(d,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=
Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}l=function(d){function g(b){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");d.call(this,b)}n(g,d);g.getLiveEdge=function(){throw Error("not implemented");};g.prototype.addSegment=function(b){this.index.timeline.push(b);return!0};return g}(d(17));q.exports=l},function(q,l){var d=function(){function d(l){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");this.index=l}d.getLiveEdge=function(){throw Error("not implemented");};d.prototype.checkRange=function(d){var g=this.index,b=g.list;d=Math.floor(d/g.duration);return 0<=d&&d<b.length};d.prototype.createSegment=function(d,g){var b=this.index.list[d];return{id:d,media:b.media,time:g,number:void 0,range:b.range,duration:this.index.duration}};d.prototype.getSegments=function(d,g){for(var b=this.index.duration,a=Math.floor(d/b),k=Math.floor(g/
b),l=[];a<k;)l.push(this.createSegment(a,a*b)),a++;return l};d.prototype.addSegment=function(){return!1};return d}();q.exports=d},function(q,l){var d=function(){function d(l){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.index=l}d.getLiveEdge=function(d,g){return Date.now()/1E3-g.availabilityStartTime-g.suggestedPresentationDelay};d.prototype.checkRange=function(){return!0};d.prototype.createSegment=function(d){var g=this.index,b=g.startNumber,g=g.duration;
null==b&&(b=1);d=Math.floor(d/g)+b;return{id:d,media:this.index.media,time:d*g,number:d,range:void 0,duration:this.index.duration}};d.prototype.getSegments=function(d,g){for(var b=this.index.duration,a=[],k=d;k<=g;k+=b)a.push(this.createSegment(k));return a};d.prototype.addSegment=function(){return!1};return d}();q.exports=d},function(q,l,d){function n(c,d,g){function l(a){return f(a).simpleTimeout(D,"timeout").map(function(b){b=p.extend({response:b},a);q.add(a,b);g.onNext({type:c,value:b});return b})}
var h=d.resolver,f=d.loader,n=d.parser,E=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];n||(n=k);f||(f=k);h||(h=k);var E=p.defaults(E,{totalRetry:3,timeout:1E4,cache:t}),D=E.timeout,q=E.cache,F={retryDelay:500,totalRetry:E.totalRetry,shouldRetry:function(a){return 500<=a.code||200>a.code||/timeout/.test(a.message)||/request: error event/.test(a.message)}};return function(c){return h(c).flatMap(function(c){var d=b(function(){return l(c)},F),f=q.get(c);return p.isPromise(f)?a(f)["catch"](d):
null===f?d():k(f)}).flatMap(function(a){return n(a).map(function(b){return p.extend({parsed:b},a)})})}}var p=d(1);l=d(3);var g=l.Subject;l=l.Observable;var b=d(5).retryWithBackoff,a=l.fromPromise,k=l.just,t={add:function(){},get:function(){return null}};q.exports=function(){var a=new g;return{createPipelines:function(b,d){d=d||{};var g=[],h;for(h in b)g[h]=n(h,b[h],a,d[h]);return g},metrics:a}}},function(q,l,d){function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function p(a){D(a.man,"player: no manifest loaded")}function g(a,b){return a.filter(function(a){return a.type==b}).pluck("value")}var b=d(7),a=d(1),k=d(4);l=d(3);var t=l.CompositeDisposable,c=l.BehaviorSubject,u=l.Observable,r=l.Subject,x=u.combineLatest,h=u.defer,f=u.zip,z=d(5).on;l=d(10);var E=d(47),D=d(2),u=d(8),
J=u.HTMLVideoElement_,F=u.exitFullscreen,N=u.requestFullscreen,y=u.isFullscreen,H=u.onFullscreenChange,u=d(19),O=u.timingsSampler,R=u.toWallClockTime,Q=u.fromWallClockTime,L=u.getLiveGap,V=d(26).InitializationSegmentCache,I=d(9).BufferedRanges,ba=d(36).parseTimeFragment,aa=d(27),Y=d(18),Z=d(40),ea=d(31),S=d(24),ga=d(34),ka=d(15);d=function(d){function v(a){var b=this;if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");var f=a.videoElement,h=a.transport,g=a.transportOptions,
l=a.initVideoBitrate;a=a.initAudioBitrate;d.call(this);this.defaultTransport=h;this.defaultTransportOptions=g||{};f||(f=document.createElement("video"));D(f instanceof J,"requires an actual HTMLVideoElement");this.version="1.2.1";this.video=f;this.fullscreen=H(f).subscribe(function(){return b.trigger("fullscreenChange",b.isFullscreen())});this.playing=new c;this.stream=new r;var g=ea(),h=g.createPipelines,g=g.metrics,n=O(f),f=aa(f);this.createPipelines=h;this.metrics=g;this.timings=n;this.adaptive=
S(g,n,f,{initVideoBitrate:l,initAudioBitrate:a});this.muted=.1;this._setState("STOPPED");this.resetStates();this.log=k}n(v,d);v.prototype.resetStates=function(){this.man=null;this.reps={video:null,audio:null,text:null};this.adas={video:null,audio:null,text:null};this.evts={};this.frag={start:null,end:null}};v.prototype._clear=function(){this.subscriptions&&(this.subscriptions.dispose(),this.subscriptions=null)};v.prototype.stop=function(){"STOPPED"!==this.state&&(this.resetStates(),this._clear(),
this._setState("STOPPED"))};v.prototype.dispose=function(){this.stop();this.metrics.dispose();this.adaptive.dispose();this.fullscreen.dispose();this.stream.dispose();this.video=this.createPipelines=this.timings=this.stream=this.fullscreen=this.adaptive=this.metrics=null};v.prototype.__recordState=function(a,b){this.evts[a]!==b&&(this.evts[a]=b,this.trigger(a+"Change",b))};v.prototype._parseOptions=function(b){var c=a.defaults(a.cloneObject(b),{transport:this.defaultTransport,transportOptions:{},keySystems:[],
timeFragment:{},subtitles:[],autoPlay:!1,directFile:!1}),d=c.transport,f=c.transportOptions,h=c.url,g=c.manifests,k=c.keySystems,v=c.timeFragment,l=c.subtitles,n=c.autoPlay,c=c.directFile,v=ba(v);D(!!g^!!h,"player: you have to pass either a url or a list of manifests");g&&(k=g[0],h=k.url,l=k.subtitles||[],k=a.compact(a.pluck(g,"keySystem")));a.isString(d)&&(d=Z[d]);a.isFunction(d)&&(d=d(a.defaults(f,this.defaultTransportOptions)));D(d,"player: transport "+b.transport+" is not supported");c&&(c={isLive:!1,
duration:Infinity});return{url:h,keySystems:k,subtitles:l,timeFragment:v,autoPlay:n,transport:d,directFile:c}};v.prototype.loadVideo=function(){var b=this,c=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],c=this._parseOptions(c);k.info("loadvideo",c);var d=c,v=d.url,l=d.keySystems,n=d.subtitles,u=d.timeFragment,p=d.autoPlay,c=d.transport,I=d.directFile;this.stop();this.frag=u;this.playing.onNext(p);var O=this.createPipelines(c,{audio:{cache:new V},video:{cache:new V}}),Y=this.adaptive,
c=this.timings,d=this.video,r;try{r=ga({url:v,keySystems:l,subtitles:n,timings:c,timeFragment:u,adaptive:Y,pipelines:O,videoElement:d,autoPlay:p,directFile:I})}catch(y){r=h(function(){throw y;})}r=r.publish();var v=g(r,"segment"),l=g(r,"manifest"),n=g(r,"stalled").startWith(null),u=g(r,"loaded").filter(function(a){return!0===a}),I=I?u:f(u,g(v.pluck("adaptation"),"audio"),g(v.pluck("adaptation"),"video"),a.noop),I=I.take(1),n=I.map("LOADED").concat(x(this.playing,n,function(a,b){return b?"seeking"==
b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"})).changes().startWith("LOADING"),Z=this.subscriptions=new t;r=[z(d,["play","pause"]).each(function(a){return b.playing.onNext("play"==a.type)}),v.each(function(a){var c=a.adaptation.type,d=a.representation,f=a.adaptation;b.reps[c]=d;b.adas[c]=f;"text"==c&&b.__recordState("subtitle",f.lang);"video"==c&&b.__recordState("videoBitrate",d.bitrate);"audio"==c&&(b.__recordState("language",f.lang),b.__recordState("audioBitrate",d.bitrate));b.trigger("progress",
a)}),l.each(function(a){b.man=a;b.trigger("manifestChange",a)}),n.each(function(a){return b._setState(a)}),c.each(function(a){b.man&&(b.man.isLive&&0<a.ts&&(a.wallClockTime=R(a.ts,b.man),a.liveGap=L(a.ts,b.man)),b.trigger("currentTimeChange",a))}),r.subscribe(function(){},function(a){b.resetStates();b.trigger("error",a);b._setState("STOPPED");b._clear()},function(){b.resetStates();b._setState("ENDED");b._clear()}),r.subscribe(function(a){return b.stream.onNext(a)},function(a){return b.stream.onNext({type:"error",
value:a})}),r.connect()];a.each(r,function(a){return Z.add(a)});this.subscriptions||Z.dispose();return I.toPromise()};v.prototype._setState=function(a){this.state!==a&&(this.state=a,this.trigger("playerStateChange",a))};v.prototype.getManifest=function(){return this.man};v.prototype.getVideoElement=function(){return this.video};v.prototype.getNativeTextTrack=function(){return this.video.textTracks[0]};v.prototype.getPlayerState=function(){return this.state};v.prototype.isLive=function(){p(this);return this.man.isLive};
v.prototype.getUrl=function(){p(this);return this.man.locations[0]};v.prototype.getVideoDuration=function(){return this.video.duration};v.prototype.getVideoLoadedTime=function(){return(new I(this.video.buffered)).getSize(this.video.currentTime)};v.prototype.getVideoPlayedTime=function(){return(new I(this.video.buffered)).getLoaded(this.video.currentTime)};v.prototype.getCurrentTime=function(){if(!this.man)return NaN;var a=this.video.currentTime;return this.man.isLive?R(a,this.man):a};v.prototype.getStartTime=
function(){return this.frag.start};v.prototype.getEndTime=function(){return this.frag.end};v.prototype.getPlaybackRate=function(){return this.video.playbackRate};v.prototype.getVolume=function(){return this.video.volume};v.prototype.isFullscreen=function(){return y()};v.prototype.getAvailableLanguages=function(){return this.man&&Y.getAvailableLanguages(this.man)||[]};v.prototype.getAvailableSubtitles=function(){return this.man&&Y.getAvailableSubtitles(this.man)||[]};v.prototype.getLanguage=function(){return this.adaptive.getLanguage()};
v.prototype.getSubtitle=function(){return this.adaptive.getSubtitle()};v.prototype.getAvailableVideoBitrates=function(){var a=this.man&&this.man.adaptations.video[0];return a&&a.bitrates||[]};v.prototype.getAvailableAudioBitrates=function(){var a=this.adas.audio;return a&&a.bitrates||[]};v.prototype.getVideoBitrate=function(){return this.evts.videoBitrate};v.prototype.getAudioBitrate=function(){return this.evts.audioBitrate};v.prototype.getVideoMaxBitrate=function(){return this.adaptive.getVideoMaxBitrate()};
v.prototype.getAudioMaxBitrate=function(){return this.adaptive.getAudioMaxBitrate()};v.prototype.getVideoBufferSize=function(){return this.adaptive.getVideoBufferSize()};v.prototype.getAudioBufferSize=function(){return this.adaptive.getAudioBufferSize()};v.prototype.getAverageBitrates=function(){return this.adaptive.getAverageBitrates()};v.prototype.getMetrics=function(){return this.metrics};v.prototype.getTimings=function(){return this.timings};v.prototype.play=function(){this.video.play()};v.prototype.pause=
function(){this.video.pause()};v.prototype.setPlaybackRate=function(a){var c=this;return new b(function(b){return b(c.video.playbackRate=a)})};v.prototype.goToStart=function(){return this.seekTo(this.getStartTime())};v.prototype.seekTo=function(a){var c=this;return new b(function(b){D(c.man);var d=c.video.currentTime;c.man.isLive&&(a=Q(a,c.man));a!==d?(k.info("seek to",a),b(c.video.currentTime=a)):b(d)})};v.prototype.setFullscreen=function(){!1===(0>=arguments.length||void 0===arguments[0]?!0:arguments[0])?
F():N(this.video)};v.prototype.setVolume=function(a){a!==this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))};v.prototype.mute=function(){this.muted=this.getVolume()||.1;this.setVolume(0)};v.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this.muted)};v.prototype.setLanguage=function(c){var d=this;return new b(function(b){D(a.contains(d.getAvailableLanguages(),c),"player: unknown language");b(d.adaptive.setLanguage(c))})};v.prototype.setSubtitle=function(c){var d=
this;return(new b(function(b){D(!c||a.contains(d.getAvailableSubtitles(),c),"player: unknown subtitle");b(d.adaptive.setSubtitle(c||""))})).then(function(){c||d.__recordState("subtitle",null)})};v.prototype.setVideoBitrate=function(c){var d=this;return new b(function(b){D(0===c||a.contains(d.getAvailableVideoBitrates(),c),"player: video bitrate unavailable");b(d.adaptive.setVideoBitrate(c))})};v.prototype.setAudioBitrate=function(c){var d=this;return new b(function(b){D(0===c||a.contains(d.getAvailableAudioBitrates(),
c),"player: audio bitrate unavailable");b(d.adaptive.setAudioBitrate(c))})};v.prototype.setVideoMaxBitrate=function(a){var c=this;return new b(function(b){b(c.adaptive.setVideoMaxBitrate(a))})};v.prototype.setAudioMaxBitrate=function(a){var c=this;return new b(function(b){b(c.adaptive.setAudioMaxBitrate(a))})};v.prototype.setVideoBufferSize=function(a){var c=this;return new b(function(b){return b(c.adaptive.setVideoBufferSize(a))})};v.prototype.setAudioBufferSize=function(a){var c=this;return new b(function(b){return b(c.adaptive.setAudioBufferSize(a))})};
v.prototype.getStreamObservable=function(){return this.stream};v.prototype.getDebug=function(){return E.getDebug(this)};v.prototype.showDebug=function(){E.showDebug(this,this.video)};v.prototype.hideDebug=function(){E.hideDebug()};v.prototype.toggleDebug=function(){E.toggleDebug(this,this.video)};v.prototype.getCurrentKeySystem=function(){return ka.getCurrentKeySystem()};return v}(l);q.exports=d},function(q,l,d){function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l=d(10);var p=d(9).BufferedRanges,g=d(7),b=d(2);d=function(a){function d(b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");a.call(this);this.codec=b;this.updating=!1;this.readyState="opened";this.buffered=new p}n(d,a);d.prototype.appendBuffer=function(a){var b=this;return this._lock(function(){return b._append(a)})};
d.prototype.remove=function(a,b){var d=this;return this._lock(function(){return d._remove(a,b)})};d.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};d.prototype._append=function(){};d.prototype._remove=function(){};d.prototype._abort=function(){};d.prototype._lock=function(a){var c=this;b(!this.updating,"text-buffer: cannot remove while updating");this.updating=!0;this.trigger("updatestart");return(new g(function(b){return b(a())})).then(function(){return c._unlock("update")},
function(a){return c._unlock("error",a)})};d.prototype._unlock=function(a,b){this.trigger(a,b);this.updating=!1;this.trigger("updateend")};return d}(l);q.exports=d},function(q,l,d){function n(a,b){return k.create(function(c){b.src=a;c.onNext({url:a});return function(){b.src=""}})}function p(a){return"audio"==a||"video"==a}var g=d(1),b=d(4),a=d(2),k=d(3).Observable;l=d(5);var t=l.first,c=l.on;l=d(19);var u=l.getLiveGap,r=l.seekingsSampler,x=l.fromWallClockTime,h=d(5).retryWithBackoff,f=k.empty,z=k.never,
E=k.just,D=k.merge,J=k.zip,F=Math.min;l=d(8);var N=l.MediaSource_,y=l.sourceOpen,H=l.loadedMetadataEvent,O=d(35),R=d(16).getLiveEdge,Q=d(25),L=d(15);d=d(18);var V=d.normalizeManifest,I=d.mergeManifestsIndex,ba=d.mutateManifestLiveGap,aa=d.getAdaptations;q.exports=function(d){function l(a,c,d){var f=d.type;d=d.codec;if(p(f))ra[f]?a=ra[f]:(b.info("add sourcebuffer",d),a=c.addSourceBuffer(d),ra[f]=a);else{if(c=va[f])try{c.abort()}catch(h){b.warn(h)}finally{delete va[f]}if("text"==f)b.info("add text sourcebuffer",
d),a=new O(a,d);else throw f="stream: unknown buffer type "+f,b.error(f),Error(f);va[f]=a}return a}function q(a,c,d){a=d.type;var f=p(a);f?(d=ra[a],delete ra[a]):(d=va[a],delete va[a]);if(d)try{d.abort(),f&&c.removeSourceBuffer(d)}catch(h){b.warn(h)}}function S(a){var b=W.map(function(b){var c;Ga?(c=g.cloneObject(b),c.ts=F(b.ts,ua),c.duration=F(b.duration,ua)):c=b;c.liveGap=u(b.ts,a);return c}),c=r(b);return{timings:b,seekings:c}}function ga(a,c,d,h){var g=c.type;return La.getAdaptationsChoice(g,
c.adaptations).flatMapLatest(function(k){if(!k)return q(da,a,c),z();var v=La.getBufferAdapters(k);k=Q({sourceBuffer:l(da,a,c),pipeline:Ma[g],adaptation:k,timings:d,seekings:h,adapters:v});return p(g)?k:k["catch"](function(a){b.error("buffer",g,"has crashed",a);return f()})})}function ka(d){var f=H(da).tap(function(){var c=d.duration,f=Fa,h=ua,k=/^\d*(\.\d+)? ?%$/;g.isString(f)&&k.test(f)&&(f=parseFloat(f)/100*c);g.isString(h)&&k.test(h)&&(ua=parseFloat(h)/100*c);if(Infinity===h||"100%"===h)h=c;d.isLive?
f=f?x(f,d):R(d):a(f<c&&h<=c,"stream: bad startTime and endTime");b.info("set initial time",f);da.currentTime=f}),h=c(da,"canplay").tap(function(){b.info("canplay event");xa&&da.play();xa=!0});return t(J(f,h,g.noop)).map({type:"loaded",value:!0}).startWith({type:"loaded",value:!1})}function sa(a){return Ka&&Ka.length?L(da,Ka,{persistedSessions:a.isLive}):L.onEncrypted(da).map(function(){b.error("eme: ciphered media and no keySystem passed");throw Error("eme: ciphered media and no keySystem passed");
})}function v(a){var c=1>=arguments.length||void 0===arguments[1]?!0:arguments[1];return a.distinctUntilChanged(null,function(a,d){var f=d.stalled,h=a.stalled,g;g=h||f?h&&f?h.name==f.name:!1:!0;!g&&c&&(h?(b.warn("resume playback",d.ts,d.name),da.playbackRate=h.playback):(b.warn("stop playback",d.ts,d.name),da.playbackRate=0));f&&(f=d.buffered.getNextRangeGap(d.ts),1>f&&(h=d.ts+f+1/60,da.currentTime=h,b.warn("discontinuity seek",d.ts,f,h)));return g}).map(function(a){return{type:"stalled",value:a.stalled}})}
function B(a){return a&&"out-of-index"==a.type}function ma(a,c){if(B(c))return b.warn("out of index"),Sa({url:a.locations[0]}).map(function(b){b=b.parsed;return{type:"manifest",value:I(a,V(b.url,b.manifest,fa))}});c&&"precondition-failed"==c.type&&(ba(a,1),b.warn("precondition failed",a.presentationLiveGap));return E(c)}function ta(a,b,c,d){var f=g.map(aa(b),function(b){return ga(a,b,c,d)}),f=D(f);return b.isLive?f.distinctUntilChanged(null,function(a,b){return B(b)&&B(a)}).concatMap(function(a){return ma(b,
a)}):f}function Da(a,d){var f=S(d),h=f.timings,g=f.seekings,f=E({type:"manifest",value:d}),k=ka(d),g=ta(a,d,h,g),l=sa(d),h=v(h,!0),n=c(da,"error").flatMap(function(){var a="stream: video element MEDIA_ERR code "+da.error.code;b.error(a);throw Error(a);});return D(f,k,l,g,h,n)}function Wa(){var a=S(Ba,{timeInterval:1E3}).timings,b=E({type:"manifest",value:Ba}),c=ka(Ba),a=v(a,!1);return D(b,c,a)}var Qa=d.url,Ka=d.keySystems,fa=d.subtitles,W=d.timings,K=d.timeFragment,La=d.adaptive,Ma=d.pipelines,da=
d.videoElement,xa=d.autoPlay,Ba=d.directFile;a(N,"player: browser is required to support MediaSource");var Fa=K.start,ua=K.end,Ga=Infinity>ua,Sa=Ma.manifest,ra={},va={};d=W.filter(function(a){var b=a.ts;a=a.duration;return 0<a&&.2>F(a,ua)-b}).take(1).share();if(Ba)return n(Qa,da).flatMap(Wa).takeUntil(d);K=h(function(a){var c=a.url,d=a.mediaSource;a=y(d);return Sa({url:c}).zip(a,g.identity).flatMap(function(a){a=a.parsed;a=V(a.url,a.manifest,fa);d.duration=Infinity===a.duration?Number.MAX_VALUE:a.duration;
b.info("set duration",d.duration);return Da(d,a)})},{retryDelay:500,totalRetry:3,resetDelay:6E4,shouldRetry:function(a,c){if(/MEDIA_ERR/.test(a.message))return!1;b.warn("stream retry",a,c);return!0}});return function(a,c){return k.create(function(d){var f=new N,h=c.src=URL.createObjectURL(f);d.onNext({url:a,mediaSource:f});b.info("create mediasource object",h);return function(){if(f&&"closed"!=f.readyState){var a=f.readyState;g.each(g.cloneArray(f.sourceBuffers),function(c){try{"open"==a&&c.abort(),
f.removeSourceBuffer(c)}catch(d){b.warn("error while disposing souceBuffer",d)}})}g.each(g.keys(va),function(a){a=va[a];try{a.abort()}catch(c){b.warn("error while disposing souceBuffer",c)}});c.src="";if(h)try{URL.revokeObjectURL(h)}catch(d){b.warn("error while revoking ObjectURL",d)}h=f=va=ra=null}})}(Qa,da).flatMap(K).takeUntil(d)}},function(q,l,d){function n(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var p=d(7),g=d(1);l=d(33);var b=window.VTTCue||window.TextTrackCue;l=function(a){function d(b,c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");a.call(this,c);this.video=b;this.codec=c;this.isVTT=/^text\/vtt/.test(c);var g=document.createElement("track"),l=g.track;this.trackElement=g;this.track=l;g.kind=
"subtitles";l.mode="showing";b.appendChild(g)}n(d,a);d.prototype.createCuesFromArray=function(a){return a.length?g.compact(g.map(a,function(a){var d=a.start,g=a.end;if(a=a.text)return new b(d,g,a)})):[]};d.prototype._append=function(a){var b=this;if(this.isVTT)a=new Blob([a],{type:"text/vtt"}),a=URL.createObjectURL(a),this.trackElement.src=a,this.buffered.insert(0,Infinity);else{var d=this.createCuesFromArray(a);d.length&&(g.each(d,function(a){return b.track.addCue(a)}),a=d[0],d=g.last(d),this.buffered.insert(0,
a.startTime,d.endTime))}return p.resolve()};d.prototype._remove=function(a,b){var d=this.track;g.each(g.cloneArray(d.cues),function(g){var k=g.startTime,h=g.endTime;k>=a&&k<=b&&h<=b&&d.removeCue(g)})};d.prototype._abort=function(){var a=this.trackElement,b=this.video;a&&b&&b.hasChildNodes(a)&&b.removeChild(a);this.track.mode="disabled";this.size=0;this.video=this.track=this.trackElement=null};return d}(l);q.exports=l},function(q,l,d){function n(a){if(!a)return!1;a=a.replace(/^npt\:/,"").replace(/\.$/,
"");var b,d;a=a.split(":");var g=a.length;switch(g){case 3:b=parseInt(a[0],10);d=parseInt(a[1],10);a=parseFloat(a[2]);break;case 2:b=0;d=parseInt(a[0],10);a=parseFloat(a[1]);break;case 1:d=b=0;a=parseFloat(a[0]);break;default:return!1}k(23>=b,t);k(59>=d,t);k(1>=g||60>a,t);return 3600*b+60*d+a}function p(a){if(!a)return!1;var b,d,g,h;a=a.split(":");switch(a.length){case 3:b=parseInt(a[0],10);d=parseInt(a[1],10);g=parseInt(a[2],10);h=a=0;break;case 4:b=parseInt(a[0],10);d=parseInt(a[1],10);g=parseInt(a[2],
10);-1===a[3].indexOf(".")?(a=parseInt(a[3],10),h=0):(h=a[3].split("."),a=parseInt(h[0],10),h=parseInt(h[1],10));break;default:return!1}k(23>=b,t);k(59>=d,t);k(59>=g,t);return 3600*b+60*d+g+.001*a+1E-6*h}function g(a){return new Date(Date.parse(a))}function b(a){return a?a:!1}var a=d(1),k=d(2),t="Invalid MediaFragment";q.exports={parseTimeFragment:function(c){if(a.isString(c)){var d=c,l=d.split(",");k(2>=l.length,t);c=l[0]?l[0]:"";l=l[1]?l[1]:"";k((c||l)&&(!c||l||-1===d.indexOf(",")),t);c=c.replace(/^smpte(-25|-30|-30-drop)?\:/,
"").replace("clock:","");var d=/^((npt\:)?((\d+\:(\d\d)\:(\d\d))|((\d\d)\:(\d\d))|(\d+))(\.\d*)?)?$/,x=/^(\d+\:\d\d\:\d\d(\:\d\d(\.\d\d)?)?)?$/,h=/^((\d{4})(-(\d{2})(-(\d{2})(T(\d{2})\:(\d{2})(\:(\d{2})(\.(\d+))?)?(Z|(([-\+])(\d{2})\:(\d{2})))?)?)?)?)?$/,f=/^(\d*(\.\d+)? ?%)?$/;if(d.test(c)&&d.test(l))d=n;else if(x.test(c)&&x.test(l))d=p;else if(h.test(c)&&h.test(l))d=g;else if(f.test(c)&&f.test(l))d=b;else throw Error(t);c=d(c);l=d(l);k(!1!==c||!1!==l,t);c={start:!1===c?"":c,end:!1===l?"":l}}else c=
a.pick(c,["start","end"]);a.isString(c.start)&&a.isString(c.end)?(c.start||(c.start="0%"),c.end||(c.end="100%")):(c.start||(c.start=0),c.end||(c.end=Infinity));a.isString(c.start)&&a.isString(c.end)?(k(0<=parseFloat(c.start)&&100>=parseFloat(c.start),"player: startTime should be between 0% and 100%"),k(0<=parseFloat(c.end)&&100>=parseFloat(c.end),"player: endTime should be between 0% and 100%")):(k((a.isNumber(c.start)||a.isDate(c.start))&&(a.isNumber(c.end)||a.isDate(c.end)),"player: timeFragment should have interface { start, end } where start and end are numbers or dates"),
k(c.start<c.end,"player: startTime should be lower than endTime"),k(0<=c.start,"player: startTime should be greater than 0"));return c}}},function(q,l,d){function n(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+ +b+"-"}var p=d(1);l=d(3).Observable;var g=l.empty,b=l.merge,a=l.just;d(2);var k=d(13),t=d(11).resolveURL;l=d(38);var c=l.parseSidx,u=l.patchPssh,r=d(39),x=function(a){a.withMetadata=!0;return k(a)};q.exports=function(){var d=(0>=arguments.length||void 0===arguments[0]?
{}:arguments[0]).contentProtectionParser;d||(d=p.noop);var f={loader:function(a){var c=a.adaptation,d=a.representation,f=a.segment,h=f.media,k=f.range;a=f.indexRange;if(f.init&&!(h||k||a))return g();k=p.isArray(k)?{Range:n(k)}:null;if(h)var l=f.time,f=f.number,h=-1===h.indexOf("$")?h:h.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,d.id).replace(/\$Bandwidth\$/g,d.bitrate).replace(/\$Number\$/g,f).replace(/\$Time\$/g,l);else h="";c=t(c.rootURL,c.baseURL,d.baseURL,h);d=x({url:c,format:"arraybuffer",
headers:k});return p.isArray(a)?(a=x({url:c,format:"arraybuffer",headers:{Range:n(a)}}),b(d,a)):d},parser:function(b){var d=b.adaptation,f=b.segment;b=new Uint8Array(b.response.blob);var h=f.init,g=f.indexRange,k,l,n;if(g=c(b,g?g[0]:0))k=g.segments,l=g.timescale;h||(0<=f.time&&0<=f.duration?n={ts:f.time,d:f.duration}:g&&1===g.segments.length&&(n={ts:g.segments[0].ts,d:g.segments[0].d}));h&&d.contentProtection&&(b=u(b,d.contentProtection));return a({blob:b,currentSegment:n,nextSegments:k,timescale:l})}};
return{manifest:{loader:function(a){return x({url:a.url,format:"document"})},parser:function(b){b=b.response;return a({manifest:r(b.blob,d),url:b.url})}},audio:f,video:f,text:{loader:function(){}}}}},function(q,l,d){function n(a,b){for(var c=0,d=a.length,l,n;c+8<d&&(n=k(a,c),l=k(a,c+4),g(0<n,"dash: out of range size"),l!==b);)c+=n;if(c>=d)return-1;g(c+n<=d,"dash: atom out of range");return c}function p(a){var d=a.systemId;a=a.privateData;d=d.replace(/-/g,"");g(32===d.length);d=r(4,c(d),b(a.length),
a);return r(b(d.length+8),u("pssh"),d)}var g=d(2);l=d(6);var b=l.itobe4,a=l.be8toi,k=l.be4toi,t=l.be2toi,c=l.hexToBytes,u=l.strToBytes,r=l.concat;q.exports={parseSidx:function(b,d){var c=n(b,1936286840);if(-1==c)return null;var g=k(b,c),c=c+4+4,l=b[c],c=c+8,p=k(b,c),c=c+4;if(0===l)l=k(b,c),c+=4,d+=k(b,c)+g,c+=4;else if(1===l)l=a(b,c),c+=8,d+=a(b,c)+g,c+=8;else return null;for(var g=[],c=c+2,u=t(b,c),c=c+2;0<=--u;){var r=k(b,c),c=c+4,q=r&2147483647;if(1==(r&2147483648)>>>31)throw Error("not implemented");
r=k(b,c);c+=4;c+=4;g.push({ts:l,d:r,r:0,range:[d,d+q-1]});l+=r;d+=q}return{segments:g,timescale:p}},patchPssh:function(a,c){if(!c||!c.length)return a;var d=n(a,1836019574);if(-1==d)return a;for(var g=k(a,d),l=[a.subarray(d,d+g)],u=0;u<c.length;u++)l.push(p(c[u]));l=r.apply(null,l);l.set(b(l.length),0);return r(a.subarray(0,d),l,a.subarray(d+g))}}},function(q,l,d){function n(a){var b=R.last(a.timeline);return(b.ts+(b.r+1)*b.d)/a.timescale}function p(a,b){var c=aa[a.nodeName];Q(c,"parser: no attributes for "+
a.nodeName);return R.reduce(c,function(b,c){var d=c.k,f=c.fn,g=c.n,h=c.def;a.hasAttribute(d)?b[g||d]=f(a.getAttribute(d)):null!=h&&(b[g||d]=h);return b},b||{})}function g(a){return a}function b(a){return"true"==a}function a(a){return"true"==a?!0:"false"==a?!1:parseInt(a)}function k(a){return new Date(Date.parse(a))}function t(a){if(!a)return 0;var b=L.exec(a);Q(b,"parser: "+a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(b[2]||0)+2592E3*parseFloat(b[4]||0)+86400*parseFloat(b[6]||0)+
3600*parseFloat(b[8]||0)+60*parseFloat(b[10]||0)+parseFloat(b[12]||0)}function c(a){var b=I.exec(a);if(!b)return-1;a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function u(a){return a}function r(a){return(a=V.exec(a))?[+a[1],+a[2]]:null}function x(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function h(a){var b=x(a,function(a,b,c){if("Initialization"==b){var d,f;c.hasAttribute("range")&&(d=r(c.getAttribute("range")));c.hasAttribute("sourceURL")&&
(f=c.getAttribute("sourceURL"));a.initialization={range:d,media:f}}return a},p(a));"SegmentBase"==a.nodeName&&(b.indexType="base",b.timeline=[]);return b}function f(a){return x(a,function(a,b,c){"SegmentTimeline"==b&&(a.indexType="timeline",a.timeline=z(c));return a},h(a))}function z(a){return x(a,function(a,b,c){b=a.length;c=p(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}function E(a){a=f(a);a.indexType||(a.indexType="template");return a}function D(a){var b=
f(a);b.list=[];b.indexType="list";return x(a,function(a,b,c){"SegmentURL"==b&&a.list.push(p(c));return a},b)}function J(a){var b=x(a,function(a,b,c){switch(b){case "BaseURL":a.baseURL=c.textContent;break;case "SegmentBase":a.index=h(c);break;case "SegmentList":a.index=D(c);break;case "SegmentTemplate":a.index=E(c)}return a},{});return p(a,b)}function F(a,b){var c=x(a,function(a,c,d){switch(c){case "ContentProtection":c=b(p(d),d);a.contentProtection=c;break;case "ContentComponent":a.contentComponent=
p(d);break;case "BaseURL":a.baseURL=d.textContent;break;case "SegmentBase":a.index=h(d);break;case "SegmentList":a.index=D(d);break;case "SegmentTemplate":a.index=E(d);break;case "Representation":c=J(d),null==c.id&&(c.id=a.representations.length),a.representations.push(c)}return a},{representations:[]});return p(a,c)}function N(a,b){var c=p(a,x(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":c=F(d,b),null==c.id&&(c.id=a.adaptations.length),a.adaptations.push(c)}return a},
{adaptations:[]}));c.baseURL&&R.each(c.adaptations,function(a){return R.defaults(a,{baseURL:c.baseURL})});return c}function y(a,b){var c=a.documentElement;Q.equal(c.nodeName,"MPD","parser: document root should be MPD");var d=x(c,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);break;case "Period":a.periods.push(N(d,b))}return a},{transportType:"dash",periods:[],locations:[]}),d=p(c,d);/isoff-live/.test(d.profiles)&&(c=(c=R.find(d.periods[0].adaptations,
function(a){return"video/mp4"==a.mimeType}))&&c.index,c=c.timeline?n(c):Date.now()/1E3-60,d.availabilityStartTime=d.availabilityStartTime.getTime()/1E3,d.presentationLiveGap=Date.now()/1E3-(c+d.availabilityStartTime));return d}function H(a,b){return y((new DOMParser).parseFromString(a,"application/xml"),b)}function O(a,b){if(R.isString(a))return H(a,b);if(a instanceof window.Document)return y(a,b);throw Error("parser: unsupported type to parse");}var R=d(1),Q=d(2),L=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,
V=/([0-9]+)-([0-9]+)/,I=/([0-9]+)(\/([0-9]+))?/;l=[{k:"profiles",fn:g},{k:"width",fn:parseInt},{k:"height",fn:parseInt},{k:"frameRate",fn:c},{k:"audioSamplingRate",fn:g},{k:"mimeType",fn:g},{k:"segmentProfiles",fn:g},{k:"codecs",fn:g},{k:"maximumSAPPeriod",fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:b}];d=[{k:"timescale",fn:parseInt},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:r},{k:"indexRangeExact",fn:b},{k:"availabilityTimeOffset",fn:parseFloat},
{k:"availabilityTimeComplete",fn:b}];var ba=d.concat([{k:"duration",fn:parseInt},{k:"startNumber",fn:parseInt}]),aa={ContentProtection:[{k:"schemeIdUri",fn:g},{k:"value",fn:g}],SegmentURL:[{k:"media",fn:g},{k:"mediaRange",fn:r},{k:"index",fn:g},{k:"indexRange",fn:r}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:d,SegmentTemplate:ba.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:g},{k:"media",fn:g},{k:"bitstreamSwitching",
fn:g}]),SegmentList:ba,ContentComponent:[{k:"id",fn:g},{k:"lang",fn:g},{k:"contentType",fn:g},{k:"par",fn:u}],Representation:l.concat([{k:"id",fn:g},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:l.concat([{k:"id",fn:g},{k:"group",fn:parseInt},{k:"lang",fn:g},{k:"contentType",fn:g},{k:"par",fn:u},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",
fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:c},{k:"maxFrameRate",fn:c},{k:"segmentAlignment",fn:a},{k:"subsegmentAlignment",fn:a},{k:"bitstreamSwitching",fn:b}]),Period:[{k:"id",fn:g},{k:"start",fn:t},{k:"duration",fn:t},{k:"bitstreamSwitching",fn:b}],MPD:[{k:"id",fn:g},{k:"profiles",fn:g},{k:"type",fn:g},{k:"availabilityStartTime",fn:k},{k:"availabilityEndTime",fn:k},{k:"publishTime",fn:k},{k:"mediaPresentationDuration",fn:t,n:"duration"},{k:"minimumUpdatePeriod",fn:t},{k:"minBufferTime",
fn:t},{k:"timeShiftBufferDepth",fn:t},{k:"suggestedPresentationDelay",fn:t},{k:"maxSegmentDuration",fn:t},{k:"maxSubsegmentDuration",fn:t}]};O.parseFromString=H;O.parseFromDocument=y;q.exports=O},function(q,l,d){q.exports={smooth:d(41),dash:d(37)}},function(q,l,d){function n(a){return(a=a.match(O))&&a[1]||""}function p(a,b){return b?a.replace(O,"?token="+b):a.replace(O,"")}function g(a,b,d){return c(a.rootURL,a.baseURL,b.baseURL).replace(/\{bitrate\}/g,b.bitrate).replace(/\{start time\}/g,d.time)}
l=d(1);var b=d(3).Observable,a=b.empty,k=b.just,t=d(13),c=d(11).resolveURL,u=d(6).bytesToStr,r=d(4),x=d(43),b=d(42),h=b.patchSegment,f=b.createVideoInitSegment,z=b.createAudioInitSegment,E=b.getMdat,D=b.getTraf,J=b.parseTfrf,F=b.parseTfxd,b=d(44).parseSami;d=d(45).parseTTML;var N={"application/x-sami":b,"application/smil":b,"application/ttml+xml":d,"application/ttml+xml+mp4":d,"text/vtt":l.identity},y=/\.(isml?)(\?token=\S+)?$/,H=/\.wsx?(\?token=\S+)?/,O=/\?token=(\S+)/,R=function(a){a.withMetadata=
!0;return t(a)};q.exports=function(){function b(a,c,d){var f,g;c.isLive?(a=D(a))?(f=J(a),g=F(a)):r.warn("smooth: could not find traf atom"):f=null;g||(g={d:d.duration,ts:d.time});return{nextSegments:f,currentSegment:g}}var c=x(0>=arguments.length||void 0===arguments[0]?{}:arguments[0]),d={loader:function(a){var b=a.adaptation,c=a.representation;a=a.segment;if(a.init){var d;a=b.smoothProtection||{};switch(b.type){case "video":d=f(c.index.timescale,c.width,c.height,72,72,4,c.codecPrivateData,a.keyId,
a.keySystems);break;case "audio":d=z(c.index.timescale,c.channels,c.bitsPerSample,c.packetSize,c.samplingRate,c.codecPrivateData,a.keyId,a.keySystems)}return k({blob:d,size:d.length,duration:100})}var h;if(d=a.range)h=d[0],h=(d=d[1])&&Infinity!==d?"bytes="+ +h+"-"+ +d:"bytes="+ +h+"-",h={Range:h};b=g(b,c,a);return R({url:b,format:"arraybuffer",headers:h})},parser:function(a){var c=a.adaptation,d=a.response;a=a.segment;if(a.init)return k({blob:d.blob,timings:null});d=new Uint8Array(d.blob);a=b(d,c,
a);c=a.nextSegments;a=a.currentSegment;return k({blob:h(d,a.ts),nextSegments:c,currentSegment:a})}};return{manifest:{resolver:function(a){a=a.url;var b=n(a);return(H.test(a)?R({url:p(a,""),format:"document"}).map(function(a){return a.blob.getElementsByTagName("media")[0].getAttribute("src")}):k(a)).map(function(a){var c=a.match(y);a=c?a.replace(c[1],c[1]+"/manifest"):a;return{url:p(a,b)}})},loader:function(a){return R({url:a.url,format:"document"})},parser:function(a){a=a.response;return k({manifest:c(a.blob),
url:a.url})}},audio:d,video:d,text:{loader:function(b){var c=b.adaptation,d=b.representation,f=b.segment;if(f.init)return a();b=d.mimeType;c=g(c,d,f);return 0<=b.indexOf("mp4")?R({url:c,format:"arraybuffer"}):R({url:c,format:"text"})},parser:function(a){var c=a.response,d=a.adaptation,f=a.representation;a=a.segment;var g=d.lang,h=f.mimeType,l=N[h];if(!l)throw Error("smooth: could not find a text-track parser for the type "+h);var n=c.blob;0<=h.indexOf("mp4")?(n=new Uint8Array(n),c=u(E(n))):c=n;h=
b(n,d,a);d=h.nextSegments;h=h.currentSegment;return k({blob:l(c,g,a.time/f.index.timescale),currentSegment:h,nextSegments:d})}}}}},function(q,l,d){function n(a,b){return c(E(b.length+8),N(a),b)}function p(a,b,c,d,f){for(var g=0,h=a.length,k;g<h;){k=z(a,g);if(1970628964===z(a,g+4)&&z(a,g+8)===b&&z(a,g+12)===c&&z(a,g+16)===d&&z(a,g+20)===f)return a.subarray(g+24,g+k);g+=k}}function g(a,b){for(var c=0,d=a.length,f,g;c+8<d&&(g=z(a,c),f=z(a,c+4),t(0<g,"dash: out of range size"),f!==b);)c+=g;if(!(c>=d))return a.subarray(c+
8,c+g)}function b(a,b,c,d){var f=[a,b,c];k.each(d,function(a){a=y.pssh(a.systemId,a.privateData,a.keyIds);f.push(a)});return f}function a(a,d,f,g,h,k,l){f=y.mult("stbl",[f,n("stts",new Uint8Array(8)),n("stsc",new Uint8Array(8)),n("stsz",new Uint8Array(12)),n("stco",new Uint8Array(8))]);var p=n("url ",new Uint8Array([0,0,0,1])),p=y.dref(p),p=y.mult("dinf",[p]);g=y.mult("minf",[g,p,f]);d=y.hdlr(d);f=y.mdhd(a);d=y.mult("mdia",[f,d,g]);h=y.tkhd(h,k,1);h=y.mult("trak",[h,d]);k=y.trex(1);k=y.mult("mvex",
[k]);a=y.mvhd(a,1);l=y.mult("moov",b(a,k,h,l));a=y.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return c(a,l)}var k=d(1),t=d(2);l=d(6);var c=l.concat,u=l.strToBytes,r=l.hexToBytes,x=l.bytesToHex,h=l.be2toi,f=l.itobe2,z=l.be4toi,E=l.itobe4,D=l.be8toi,J=l.itobe8,F=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],N=k.memoize(u),y={mult:function(a,b){return n(a,c.apply(null,b))},avc1encv:function(a,b,d,g,h,k,l,p,x,r){return n(a,c(6,f(b),16,f(d),f(g),f(h),2,f(k),6,[0,1,l.length],
u(l),31-l.length,f(p),[255,255],x,"encv"===a?r:[]))},avcc:function(a,b,d){return n("avcC",c([1,a[1],a[2],a[3],252|(2===d?1:4===d?3:0),225],f(a.length),a,[1],f(b.length),b))},dref:function(a){return n("dref",c(7,[1],a))},esds:function(a,b){return n("esds",c(4,[3,25],f(a),[0,4,17,64,21],11,[5,2],r(b),[6,1,2]))},frma:function(a){return n("frma",u(a))},free:function(a){return n("free",new Uint8Array(a-8))},ftyp:function(a,b){return n("ftyp",c.apply(null,[u(a),[0,0,0,1]].concat(b.map(u))))},hdlr:function(a){return n("hdlr",
c(8,u("audio"===a?"soun":"vide"),12,u("Media Handler")))},mdhd:function(a){return n("mdhd",c(12,E(a),8))},moof:function(a,b){return y.mult("moof",[a,b])},mp4aenca:function(a,b,d,g,h,k,l,p){return n(a,c(6,f(b),8,f(d),f(g),2,f(h),f(k),2,l,"enca"===a?p:[]))},mvhd:function(a,b){return n("mvhd",c(12,E(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,f(b+1)))},pssh:function(a){var b=1>=arguments.length||void 0===arguments[1]?[]:arguments[1],d=2>=arguments.length||void 0===arguments[2]?[]:arguments[2];
a=a.replace(/-/g,"");t(32===a.length,"wrong system id length");var f,g=d.length;0<g?(f=1,d=c.apply(null,[E(g)].concat(d))):(f=0,d=[]);return n("pssh",c([f,0,0,0],r(a),d,E(b.length),b))},saio:function(a,b,d,f){return n("saio",c(4,[0,0,0,1],E(a.length+b.length+d.length+f.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return n("saiz",new Uint8Array);var b=z(a,0),c=z(a,4),d=new Uint8Array(9+c);d.set(E(c),5);for(var c=9,f=8,g,k;f<a.length;)f+=8,2===(b&2)?(k=2,g=h(a,f),f+=2+6*g):k=g=0,d[c]=6*g+8+k,
c++;return n("saiz",d)},schm:function(a,b){return n("schm",c(4,u(a),E(b)))},senc:function(a){return n("senc",a)},smhd:function(){return n("smhd",new Uint8Array(8))},stsd:function(a){return n("stsd",c.apply(null,[7,[a.length]].concat(a)))},tkhd:function(a,b,d){return n("tkhd",c(E(7),8,E(d),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],f(a),2,f(b),2))},trex:function(a){return n("trex",c(4,E(a),[0,0,0,1],12))},tfdt:function(a){return n("tfdt",c([1,0,0,0],J(a)))},tenc:function(a,b,d){return n("tenc",
c(6,[a,b],r(d)))},traf:function(a,b,c,d,f){var g=[a,b,c];d&&g.push(y.senc(d),y.saiz(d),y.saio(f,a,b,c));return y.mult("traf",g)},vmhd:function(){var a=new Uint8Array(12);a[3]=1;return n("vmhd",a)}},H={traf:function(a){return(a=g(a,1836019558))?g(a,1953653094):null},senc:function(a){return p(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return p(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return p(a,3565190898,3392751253,2387879627,2655430559)},mdat:function(a){return g(a,
1835295092)}};q.exports={getMdat:H.mdat,getTraf:H.traf,parseTfrf:function(a){a=H.tfrf(a);if(!a)return[];for(var b=[],c=a[0],d=a[4],f=0;f<d;f++){var g,h;1==c?(h=D(a,16*f+5),g=D(a,16*f+13)):(h=z(a,8*f+5),g=z(a,8*f+9));b.push({ts:h,d:g})}return b},parseTfxd:function(a){if(a=H.tfxd(a))return{d:D(a,12),ts:D(a,4)}},createVideoInitSegment:function(b,c,d,f,g,h,k,l,n){n||(n=[]);var p=k.split("00000001");k=p[2];p=r(p[1]);k=r(k);h=y.avcc(p,k,h);n.length?(l=y.tenc(1,8,l),l=y.mult("schi",[l]),k=y.schm("cenc",
65536),p=y.frma("avc1"),l=y.mult("sinf",[p,k,l]),f=y.avc1encv("encv",1,c,d,f,g,"AVC Coding",24,h,l)):f=y.avc1encv("avc1",1,c,d,f,g,"AVC Coding",24,h);f=y.stsd([f]);return a(b,"video",f,y.vmhd(),c,d,n)},createAudioInitSegment:function(b,c,d,g,h,k,l,n){n||(n=[]);k||(k=F.indexOf(h),k=((32|k&31)<<4|c&31)<<3,k=x(f(k)));k=y.esds(1,k);if(n.length){l=y.tenc(1,8,l);l=y.mult("schi",[l]);var p=y.schm("cenc",65536),u=y.frma("mp4a");l=y.mult("sinf",[u,p,l]);c=y.mp4aenca("enca",1,c,d,g,h,k,l)}else c=y.mp4aenca("mp4a",
1,c,d,g,h,k);c=y.stsd([c]);return a(b,"audio",c,y.smhd(),0,0,n)},patchSegment:function(a,b){var c=a.subarray(0,z(a,0)),d=y.tfdt(b),f=d.length,g=z(c,8),h=z(c,8+g),k=z(c,8+g+8),l=z(c,8+g+8+k),n=c.subarray(8,8+g),p=c.subarray(8+g+8,8+g+8+h-8),h=p.subarray(0,k),l=p.subarray(k,k+l);h.set([0,0,0,1],12);p=H.senc(p);d=y.traf(h,d,l,p,n);n=y.moof(n,d);f=8+g+8+k+f;k=a.length;g=n.length;d=c.length;c=a.subarray(d,k);k=new Uint8Array(g+(k-d));k.set(n,0);k.set(c,g);k.set(E(n.length+8),f+16);return k}}},function(q,
l,d){function n(a){var b=g.last(a.timeline);return(b.ts+(b.r+1)*b.d)/a.timescale}function p(b){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:a.concat([8,1,18,16],b)}]}var g=d(1),b=d(2),a=d(6),k={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},t={audio:"mp4a.40.2",video:"avc1.4D401E"};l={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};d={AACL:"mp4a.40.5",AACH:"mp4a.40.5",AVC1:"avc1.4D401E",H264:"avc1.4D401E"};var c={audio:[["Bitrate",
"bitrate",parseInt],["AudioTag","audiotag",parseInt],["FourCC","mimeType",l],["FourCC","codecs",d],["Channels","channels",parseInt],["SamplingRate","samplingRate",parseInt],["BitsPerSample","bitsPerSample",parseInt],["PacketSize","packetSize",parseInt],["CodecPrivateData","codecPrivateData",String]],video:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",l],["FourCC","codecs",d],["MaxWidth","width",parseInt],["MaxHeight","height",parseInt],["CodecPrivateData","codecPrivateData",String]],text:[["Bitrate",
"bitrate",parseInt],["FourCC","mimeType",l]]};q.exports=function(){function d(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function l(a,b){return g.reduce(b,function(b,c){var d=c[0],f=c[2];b[c[1]]=g.isFunction(f)?f(a.getAttribute(d)):f[a.getAttribute(d)];return b},{})}function x(a,f){a.hasAttribute("Timescale")&&(f=+a.getAttribute("Timescale"));var h=a.getAttribute("Type"),n=a.getAttribute("Subtype"),p=c[h];b(p,"parser: unrecognized QualityLevel type "+h);
var x=0,q=d(a,function(a,b,c){switch(b){case "QualityLevel":c=l(c,p);if("video"!=h||c.bitrate>F)c.id=x++,a.representations.push(c);break;case "c":b=a.index;var d=a.index.timeline,f=d.length,g=0<f?d[f-1]:{d:0,ts:0,r:0},k=+c.getAttribute("d"),v=c.getAttribute("t");(c=+c.getAttribute("r"))&&c--;0<f&&k==g.d&&null==v?g.r+=(c||0)+1:d.push({d:k,ts:null==v?g.ts+g.d*(g.r+1):+v,r:c});b.timeline=d}return a},{representations:[],index:{timeline:[],indexType:"timeline",timescale:f,initialization:{}}}),z=q.representations,
q=q.index;b(z.length,"parser: adaptation should have at least one representation");var E=z[0].codecs;E||(E=t[h],g.each(z,function(a){return a.codecs=E}));var D=z[0].mimeType;D||(D=k[h],g.each(z,function(a){return a.mimeType=D}));return"ADVT"==n?null:{type:h,index:q,representations:z,name:a.getAttribute("Name"),lang:a.getAttribute("Language"),baseURL:a.getAttribute("Url")}}function h(a){return f((new DOMParser).parseFromString(a,"application/xml"))}function f(c){c=c.documentElement;b.equal(c.nodeName,
"SmoothStreamingMedia","parser: document root should be SmoothStreamingMedia");b(/^[2]-[0-2]$/.test(c.getAttribute("MajorVersion")+"-"+c.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var f=+c.getAttribute("Timescale")||1E7,h=0,k=d(c,function(c,d,g){switch(d){case "Protection":g=g.firstElementChild;b.equal(g.nodeName,"ProtectionHeader","parser: Protection should have ProtectionHeader child");d=a.strToBytes(atob(g.textContent));var k;k=a.le2toi(d,8);k=a.bytesToUTF16Str(d.subarray(10,
10+k));k=(new DOMParser).parseFromString(k,"application/xml").querySelector("KID").textContent;k=a.guidToUuid(atob(k)).toLowerCase();var l=a.hexToBytes(k);g=g.getAttribute("SystemID").toLowerCase().replace(/\{|\}/g,"");d={keyId:k,keySystems:[{systemId:g,privateData:d}].concat(N(l))};c.protection=d;break;case "StreamIndex":if(d=x(g,f))d.id=h++,c.adaptations.push(d)}return c},{protection:null,adaptations:[]}),l=k.protection,k=k.adaptations;g.each(k,function(a){return a.smoothProtection=l});var p,r,
q,t,z="TRUE"===c.getAttribute("IsLive");if(z){p=D;q=+c.getAttribute("DVRWindowLength")/f;t=J;r=g.find(k,function(a){return"video"==a.type});var E=g.find(k,function(a){return"audio"==a.type});r=Math.min(n(r.index),n(E.index));r=Date.now()/1E3-(r+t)}return{transportType:"smoothstreaming",profiles:"",type:z?"dynamic":"static",suggestedPresentationDelay:p,timeShiftBufferDepth:q,presentationLiveGap:r,availabilityStartTime:t,periods:[{duration:(+c.getAttribute("Duration")||Infinity)/f,adaptations:k,laFragCount:+c.getAttribute("LookAheadFragmentCount")}]}}
function q(a){if(g.isString(a))return h(a);if(a instanceof window.Document)return f(a);throw Error("parser: unsupported type to parse");}var E=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],D=E.suggestedPresentationDelay||20,J=E.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,F=E.minRepresentationBitrate||19E4,N=E.keySystems||p;q.parseFromString=h;q.parseFromDocument=f;return q}},function(q,l,d){function n(c){return c.replace(a,"\n").replace(b,function(a,b){return String.fromCharCode(b)})}
var p=d(1),g=d(2),b=/&#([0-9]+);/g,a=/<br>/gi,k=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,t=/\s*<p class=([^>]+)>(.*)/i,c=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;q.exports={parseSami:function(a,b){var d=/<sync[ >]/ig,h=/<sync[ >]|<\/body>/ig,f=[],l=a.match(k)[1],q,D=h.exec(a),D=/\.(\S+)\s*{([^}]*)}/gi,J;for(q={};J=D.exec(l);){var F=J[1];J=J[2].match(/\s*lang:\s*(\S+);/i)[1];F&&J&&(q[J]=F)}l=q[b];for(g(l,"sami: could not find lang "+b+" in CSS");;){q=d.exec(a);D=h.exec(a);if(!q&&!D)break;if(!q||!D||q.index>=
D.index)throw Error("parse error");q=a.slice(q.index,D.index);D=q.match(c);if(!D)throw Error("parse error: sync time attribute");F=+D[1];if(isNaN(F))throw Error("parse error: sync time attribute NaN");D=f;q=q.split("\n");F/=1E3;J=q.length;for(var N=void 0;0<=--J;)if(N=q[J].match(t)){var y=N[2];l===N[1]&&("&nbsp;"===y?p.last(D).end=F:D.push({text:n(y),start:F}))}}return f}}},function(q,l,d){function n(a,c){var d=0;a=a.firstChild;for(var h=[],f;a;){if(1===a.nodeType)switch(a.tagName.toUpperCase()){case "P":f=
a;var k=c,l=p(f.getAttribute("begin"),k),q=p(f.getAttribute("end"),k),J=p(f.getAttribute("dur"),0);if(!g.isNumber(l)&&!g.isNumber(q)&&!g.isNumber(J))throw Error("ttml: unsupported timestamp format");0<J?(null==l&&(l=d||k),null==q&&(q=l+J)):null==q&&(q=p(f.getAttribute("duration"),0),q=0<=q?q+l:Number.MAX_VALUE);f={id:f.getAttribute("xml:id")||f.getAttribute("id"),text:decodeURIComponent(t(f.innerHTML.replace(b,"\n"))),start:l,end:q};d=f.end;h.push(f);break;case "DIV":f=p(a.getAttribute("begin"),0),
null==f&&(f=c),h.push.apply(h,n(a,f))}a=a.nextSibling}return h}function p(b,d){if(b){var g;if(g=b.match(a)){var h=g[3],f=g[4],l=g[6];return 3600*parseInt(g[2]||0,10)+60*parseInt(h,10)+parseInt(f,10)+parseFloat("0."+l)}if(g=b.match(k))return h=g[4],parseFloat(g[1])*c[h]+d}}var g=d(1),b=/<br[^>]+>/gm,a=/^(([0-9]+):)?([0-9]+):([0-9]+)(\.([0-9]+))?$/,k=/(([0-9]+)(\.[0-9]+)?)(ms|h|m|s)/,t=window.escape,c={h:3600,m:60,s:1,ms:.001};q.exports={parseTTML:function(a,b,c){a=g.isString(a)?(new DOMParser).parseFromString(a,
"text/xml"):a;if(!(a instanceof window.Document||a instanceof window.HTMLElement))throw Error("ttml: needs a Document to parse");a=a.querySelector("tt");if(!a)throw Error("ttml: could not find <tt> tag");a=n(a.querySelector("body"),0);g.each(a,function(a){a.start+=c;a.end+=c});return a}}},function(q,l){function d(){this.arr=[]}d.prototype.add=function(d){this.arr.push(d)};d.prototype.remove=function(d){d=this.arr.indexOf(d);0<=d&&this.arr.splice(d,1)};d.prototype.test=function(d){return 0<=this.arr.indexOf(d)};
d.prototype.size=function(){return this.arr.length};q.exports={ArraySet:d}},function(q,l,d){function n(a){return null==a?"":String(a).replace(u,function(a){return r[a]})}function p(a){var b=a.getAverageBitrates(),c,d;b.video.subscribe(function(a){return d=a|0}).dispose();b.audio.subscribe(function(a){return c=a|0}).dispose();return{manifest:a.man,version:a.version,timeFragment:a.frag,currentTime:a.getCurrentTime(),state:a.getPlayerState(),buffer:k(a.video.buffered),volume:a.getVolume(),video:{adaptation:a.adas.video,
representation:a.reps.video,maxBitrate:a.getVideoMaxBitrate(),bufferSize:a.getVideoBufferSize(),avrBitrate:d},audio:{adaptation:a.adas.audio,representation:a.reps.audio,maxBitrate:a.getAudioMaxBitrate(),bufferSize:a.getAudioBufferSize(),avrBitrate:c}}}function g(a,b){var c=b.parentNode.querySelector("#cp--debug-infos-content");if(c){var d;try{d=p(a)}catch(g){return}var k=d,l=k.video,q=k.audio,k=k.manifest;d="<b>Player v"+d.version+"</b> ("+d.state+")<br>";k&&l&&q&&(d+=["Container: "+n(k.transportType),
"Live: "+n(""+k.isLive),"Downloading bitrate (Kbit/s): "+(l.representation.bitrate/1E3).toFixed(3)+"/"+(q.representation.bitrate/1E3).toFixed(3),"Estimated bandwidth (Kbit/s): "+(l.avrBitrate/1E3).toFixed(3)+"/"+(q.avrBitrate/1E3).toFixed(3),"Location: "+k.locations[0]].join("<br>"));c.innerHTML=d}}function b(b,d){var f="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+n(d.offsetTop+10)+"px;\n  left: "+n(d.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',
k=d.parentNode,l=k.querySelector("#cp--debug-infos-container");l||(l=document.createElement("div"),l.setAttribute("id","cp--debug-infos-container"),k.appendChild(l));l.innerHTML=f;c||(c=k.querySelector("#cp--debug-hide-infos"),c.addEventListener("click",function(){return a(d)}));t&&clearInterval(t);t=setInterval(function(){return g(b,d)},1E3);g(b,d)}function a(b){(b=b.parentNode.querySelector("#cp--debug-infos-container"))&&b.parentNode.removeChild(b);t&&(clearInterval(t),t=null);c&&(c.removeEventListener("click",
a),c=null)}var k=d(9).bufferedToArray,t,c,u=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};q.exports={getDebug:p,showDebug:b,hideDebug:a,toggleDebug:function(c,d){d.parentNode.querySelector("#cp--debug-infos-container")?a(d):b(c,d)}}},function(q,l,d){var n;(function(p,g,b){(function(){function a(a){return"function"===typeof a}function k(){return function(){p.nextTick(r)}}function q(){var a=0,b=new Y(r),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=
a=++a%2}}function c(){var a=new MessageChannel;a.port1.onmessage=r;return function(){a.port2.postMessage(0)}}function u(){return function(){setTimeout(r,1)}}function r(){for(var a=0;a<I;a+=2)(0,Z[a])(Z[a+1]),Z[a]=void 0,Z[a+1]=void 0;I=0}function x(){}function h(a,b,c,d){try{a.call(b,c,d)}catch(f){return f}}function f(a,b,c){ba(function(a){var d=!1,f=h(c,b,function(c){d||(d=!0,b!==c?E(a,c):J(a,c))},function(b){d||(d=!0,F(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&f&&(d=!0,F(a,f))},a)}function z(a,
b){1===b._state?J(a,b._result):2===a._state?F(a,b._result):N(b,void 0,function(b){E(a,b)},function(b){F(a,b)})}function E(b,c){if(b===c)F(b,new TypeError("You cannot resolve a promise with itself"));else if("function"===typeof c||"object"===typeof c&&null!==c)if(c.constructor===b.constructor)z(b,c);else{var d;try{d=c.then}catch(g){S.error=g,d=S}d===S?F(b,S.error):void 0===d?J(b,c):a(d)?f(b,c,d):J(b,c)}else J(b,c)}function D(a){a._onerror&&a._onerror(a._result);y(a)}function J(a,b){void 0===a._state&&
(a._result=b,a._state=1,0!==a._subscribers.length&&ba(y,a))}function F(a,b){void 0===a._state&&(a._state=2,a._result=b,ba(D,a))}function N(a,b,c,d){var f=a._subscribers,g=f.length;a._onerror=null;f[g]=b;f[g+1]=c;f[g+2]=d;0===g&&a._state&&ba(y,a)}function y(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,f,g=a._result,h=0;h<b.length;h+=3)d=b[h],f=b[h+c],d?O(c,d,f,g):f(g);a._subscribers.length=0}}function H(){this.error=null}function O(b,c,d,f){var g=a(d),h,k,l,n;if(g){try{h=d(f)}catch(p){ga.error=
p,h=ga}h===ga?(n=!0,k=h.error,h=null):l=!0;if(c===h){F(c,new TypeError("A promises callback cannot return that same promise."));return}}else h=f,l=!0;void 0===c._state&&(g&&l?E(c,h):n?F(c,k):1===b?J(c,h):2===b&&F(c,h))}function R(a,b){try{b(function(b){E(a,b)},function(b){F(a,b)})}catch(c){F(a,c)}}function Q(a,b,c,d){this._instanceConstructor=a;this.promise=new a(x,d);this._abortOnReject=c;this._validateInput(b)?(this._input=b,this._remaining=this.length=b.length,this._init(),0===this.length?J(this.promise,
this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&J(this.promise,this._result))):F(this.promise,this._validationError())}function L(b){this._id=ka++;this._result=this._state=void 0;this._subscribers=[];if(x!==b){if(!a(b))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof L))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
R(this,b)}}var V=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},I=0,ba=function(a,b){Z[I]=a;Z[I+1]=b;I+=2;2===I&&ea()},aa="undefined"!==typeof window?window:{},Y=aa.MutationObserver||aa.WebKitMutationObserver,aa="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,Z=Array(1E3),ea;ea="undefined"!==typeof p&&"[object process]"==={}.toString.call(p)?k():Y?q():aa?c():u();var S=new H,ga=new H;
Q.prototype._validateInput=function(a){return V(a)};Q.prototype._validationError=function(){return Error("Array Methods must be provided an Array")};Q.prototype._init=function(){this._result=Array(this.length)};Q.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;void 0===b._state&&d<a;d++)this._eachEntry(c[d],d)};Q.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;"object"===typeof a&&null!==a?a.constructor===c&&void 0!==a._state?(a._onerror=null,
this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(1,b,a))};Q.prototype._settledAt=function(a,b,c){var d=this.promise;void 0===d._state&&(this._remaining--,this._abortOnReject&&2===a?F(d,c):this._result[b]=this._makeResult(a,b,c));0===this._remaining&&J(d,this._result)};Q.prototype._makeResult=function(a,b,c){return c};Q.prototype._willSettleAt=function(a,b){var c=this;N(a,void 0,function(a){c._settledAt(1,b,a)},function(a){c._settledAt(2,
b,a)})};var ka=0;L.all=function(a,b){return(new Q(this,a,!0,b)).promise};L.race=function(a,b){function c(a){E(f,a)}function d(a){F(f,a)}var f=new this(x,b);if(!V(a))return F(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;void 0===f._state&&h<g;h++)N(this.resolve(a[h]),void 0,c,d);return f};L.resolve=function(a,b){if(a&&"object"===typeof a&&a.constructor===this)return a;var c=new this(x,b);E(c,a);return c};L.reject=function(a,b){var c=new this(x,b);F(c,a);return c};L.prototype=
{constructor:L,then:function(a,b){var c=this._state;if(1===c&&!a||2===c&&!b)return this;var d=new this.constructor(x),f=this._result;if(c){var g=arguments[c-1];ba(function(){O(c,d,g,f)})}else N(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}};var sa={Promise:L,polyfill:function(){var b;b="undefined"!==typeof g?g:"undefined"!==typeof window&&window.document?window:self;"Promise"in b&&"resolve"in b.Promise&&"reject"in b.Promise&&"all"in b.Promise&&"race"in b.Promise&&function(){var c;
new b.Promise(function(a){c=a});return a(c)}()||(b.Promise=L)}};d(49).amd?!(n=function(){return sa}.call(l,d,l,b),void 0!==n&&(b.exports=n)):"undefined"!==typeof b&&b.exports?b.exports=sa:"undefined"!==typeof this&&(this.ES6Promise=sa)}).call(this)}).call(l,d(14),function(){return this}(),d(22)(q))},function(q,l){q.exports=function(){throw Error("define cannot be used indirect");}}])});
