(function(b,g){"object"===typeof exports&&"object"===typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):"object"===typeof exports?exports.RxPlayer=g():b.RxPlayer=g()})(this,function(){return function(b){function g(h){if(a[h])return a[h].exports;var k=a[h]={exports:{},id:h,loaded:!1};b[h].call(k.exports,k,k.exports,g);k.loaded=!0;return k.exports}var a={};g.m=b;g.c=a;g.p="";return g(0)}([function(b,g,a){b.exports=a(353)},function(b,g,a){var h=a(15),k=a(27),m=a(341);
b=function(){function a(f){this._isScalar=!1;f&&(this._subscribe=f)}a.prototype.lift=function(f){var e=new a;e.source=this;e.operator=f;return e};a.prototype.subscribe=function(a,e,c){var d=this.operator;a=m.toSubscriber(a,e,c);d?a.add(this._subscribe(this.operator.call(a))):a.add(this._subscribe(a));return a};a.prototype.forEach=function(a,e,c){c||(h.root.Rx&&h.root.Rx.config&&h.root.Rx.config.Promise?c=h.root.Rx.config.Promise:h.root.Promise&&(c=h.root.Promise));if(!c)throw Error("no Promise impl found");
var d;e?(d=function r(a){return r.next.call(r.thisArg,a)},d.thisArg=e,d.next=a):d=a;a=function r(a,c){r.source.subscribe(r.nextHandler,c,a)};a.source=this;a.nextHandler=d;return new c(a)};a.prototype._subscribe=function(a){return this.source.subscribe(a)};a.prototype[k.SymbolShim.observable]=function(){return this};a.create=function(f){return new a(f)};return a}();g.Observable=b},function(b,g,a){var h=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=
null===c?Object.create(c):(e.prototype=c.prototype,new e)},k=a(40),m=a(91),l=a(342);b=a(9);var f=a(37),e=a(137);a=function(a){function n(c){void 0===c&&(c=e.empty);a.call(this);this.isStopped=!1;!(this.destination=c)||c instanceof n||c===e.empty||("function"!==typeof c.next&&(c.next=k.noop),"function"!==typeof c.error&&(c.error=m.throwError),"function"!==typeof c.complete&&(c.complete=k.noop))}h(n,a);n.create=function(a,d,e){return new c(a,d,e)};n.prototype.next=function(a){this.isStopped||this._next(a)};
n.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))};n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};n.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};n.prototype._next=function(a){this.destination.next(a)};n.prototype._error=function(a){this.destination.error(a);this.unsubscribe()};n.prototype._complete=function(){this.destination.complete();this.unsubscribe()};n.prototype[f.rxSubscriber]=
function(){return this};return n}(b.Subscription);g.Subscriber=a;var c=function(a){function c(e,n,f){a.call(this);this._next="function"===typeof e&&l.tryOrThrowError(e)||null;this._error="function"===typeof n&&l.tryOrThrowError(n)||m.throwError;this._complete="function"===typeof f&&l.tryOrThrowError(f)||null}h(c,a);c.prototype.next=function(a){!this.isStopped&&this._next&&this._next(a)};c.prototype.error=function(a){this.isStopped||(this._error&&this._error(a),this.unsubscribe())};c.prototype.complete=
function(){this.isStopped||(this._complete&&this._complete(),this.unsubscribe())};return c}(a)},function(b,g){g.errorObject={e:{}}},function(b,g,a){function h(){try{return m.apply(this,arguments)}catch(a){return k.errorObject.e=a,k.errorObject}}var k=a(3),m;g.tryCatch=function(a){m=a;return h}},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(){a.apply(this,
arguments)}h(b,a);b.prototype.notifyNext=function(a,f,e,c){this.destination.next(f)};b.prototype.notifyError=function(a,f){this.destination.error(a)};b.prototype.notifyComplete=function(a){this.destination.complete()};return b}(a(2).Subscriber);g.OuterSubscriber=b},function(b,g,a){var h=a(15),k=a(14),m=a(52),l=a(1),f=a(27),e=a(136);g.subscribeToResult=function(a,d,n,r){var b=new e.InnerSubscriber(a,n,r);if(!b.isUnsubscribed){if(d instanceof l.Observable){if(d._isScalar){b.next(d.value);b.complete();
return}return d.subscribe(b)}if(k.isArray(d)){a=0;for(n=d.length;a<n&&!b.isUnsubscribed;a++)b.next(d[a]);b.isUnsubscribed||b.complete()}else{if(m.isPromise(d))return d.then(function(a){b.isUnsubscribed||(b.next(a),b.complete())},function(a){return b.error(a)}).then(null,function(a){h.root.setTimeout(function(){throw a;})}),b;if("function"===typeof d[f.SymbolShim.iterator]){for(a=0;a<d.length&&(b.next(d[a]),!b.isUnsubscribed);a++);b.isUnsubscribed||b.complete()}else if("function"===typeof d[f.SymbolShim.observable])if(d=
d[f.SymbolShim.observable](),"function"!==typeof d.subscribe)b.error("invalid observable");else return d.subscribe(new e.InnerSubscriber(a,n,r));else b.error(new TypeError("unknown type returned"))}}}},function(b,g){function a(b){this.name="AssertionError";this.message=b;Error.captureStackTrace&&Error.captureStackTrace(this,a)}function h(b,l){if(!b)throw new a(l);}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&
a.constructor===Symbol?"symbol":typeof a};a.prototype=Error();h.equal=function(a,l,f){return h(a===l,f)};h.iface=function(a,l,f){h(a,l+" should be an object");for(var e in f)h.equal(k(a[e]),f[e],l+" should have property "+e+" as a "+f[e])};b.exports=h},function(b,g,a){b=a(10);g.Subject=b.Subject;b=a(1);g.Observable=b.Observable;a(161);a(163);a(188);a(201);a(139);a(140);a(141);a(142);a(143);a(144);a(145);a(146);a(147);a(148);a(149);a(150);a(151);a(152);a(153);a(235);a(154);a(155);a(156);a(157);a(158);
a(159);a(160);a(162);a(164);a(165);a(166);a(167);a(168);a(173);a(169);a(170);a(171);a(172);a(174);a(175);a(177);a(178);a(179);a(180);a(181);a(182);a(176);a(183);a(184);a(185);a(186);a(187);a(189);a(190);a(191);a(192);a(193);a(194);a(195);a(196);a(197);a(198);a(200);a(199);a(202);a(203);a(204);a(205);a(206);a(207);a(208);a(209);a(210);a(211);a(212);a(213);a(214);a(215);a(216);a(217);a(218);a(219);a(220);a(221);a(222);a(223);a(224);a(225);a(226);a(227);a(228);a(229);a(230);a(231);a(232);a(233);a(234);
a(236);a(237);b=a(138);g.Operator=b.Operator;b=a(9);g.Subscription=b.Subscription;b=a(2);g.Subscriber=b.Subscriber;b=a(36);g.AsyncSubject=b.AsyncSubject;b=a(86);g.ReplaySubject=b.ReplaySubject;b=a(85);g.BehaviorSubject=b.BehaviorSubject;b=a(72);g.ConnectableObservable=b.ConnectableObservable;b=a(35);g.Notification=b.Notification;b=a(38);g.EmptyError=b.EmptyError;b=a(87);g.ArgumentOutOfRangeError=b.ArgumentOutOfRangeError;b=a(88);g.ObjectUnsubscribedError=b.ObjectUnsubscribedError;b=a(11);var h=a(84);
a=a(37);g.Scheduler={asap:b.asap,queue:h.queue};g.Symbol={rxSubscriber:a.rxSubscriber}},function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(14),m=a(90),l=a(89);b=function(){function a(e){this.isUnsubscribed=!1;e&&(this._unsubscribe=e)}a.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var a=this._unsubscribe,c=
this._subscriptions;this._subscriptions=null;l.isFunction(a)&&a.call(this);if(k.isArray(c))for(var a=-1,d=c.length;++a<d;){var n=c[a];m.isObject(n)&&n.unsubscribe()}}};a.prototype.add=function(e){if(e&&e!==this&&e!==a.EMPTY){var c=e;switch("undefined"===typeof e?"undefined":h(e)){case "function":c=new a(e);case "object":if(c.isUnsubscribed||"function"!==typeof c.unsubscribe)break;else this.isUnsubscribed?c.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(c);break;default:throw Error("Unrecognized subscription "+
e+" added to Subscription.");}}};a.prototype.remove=function(e){if(null!=e&&e!==this&&e!==a.EMPTY){var c=this._subscriptions;c&&(e=c.indexOf(e),-1!==e&&c.splice(e,1))}};a.EMPTY=function(a){a.isUnsubscribed=!0;return a}(new a);return a}();g.Subscription=b},function(b,g,a){var h=function(a,c){function d(){this.constructor=a}for(var n in c)c.hasOwnProperty(n)&&(a[n]=c[n]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a(1);var k=a(2),m=a(9),l=a(335),f=a(37);a=function(a){function c(c,
n){a.call(this);this.observers=[];this.hasCompleted=this.dispatching=this.hasErrored=this.isStopped=this.isUnsubscribed=!1;this.source=c;this.destination=n}h(c,a);c.prototype.lift=function(a){var e=new c(this,this.destination||this);e.operator=a;return e};c.prototype.add=function(a){m.Subscription.prototype.add.call(this,a)};c.prototype.remove=function(a){m.Subscription.prototype.remove.call(this,a)};c.prototype.unsubscribe=function(){m.Subscription.prototype.unsubscribe.call(this)};c.prototype._subscribe=
function(a){if(this.source)return this.source.subscribe(a);if(!a.isUnsubscribed){if(this.hasErrored)return a.error(this.errorValue);if(this.hasCompleted)return a.complete();if(this.isUnsubscribed)throw Error("Cannot subscribe to a disposed Subject.");var c=new l.SubjectSubscription(this,a);this.observers.push(a);return c}};c.prototype._unsubscribe=function(){this.source=null;this.isStopped=!0;this.destination=this.observers=null};c.prototype.next=function(a){this.isStopped||(this.dispatching=!0,this._next(a),
this.dispatching=!1,this.hasErrored?this._error(this.errorValue):this.hasCompleted&&this._complete())};c.prototype.error=function(a){this.isStopped||(this.hasErrored=this.isStopped=!0,this.errorValue=a,this.dispatching||this._error(a))};c.prototype.complete=function(){this.isStopped||(this.hasCompleted=this.isStopped=!0,this.dispatching||this._complete())};c.prototype._next=function(a){this.destination?this.destination.next(a):this._finalNext(a)};c.prototype._finalNext=function(a){for(var c=-1,e=
this.observers.slice(0),f=e.length;++c<f;)e[c].next(a)};c.prototype._error=function(a){this.destination?this.destination.error(a):this._finalError(a)};c.prototype._finalError=function(a){var c=-1,e=this.observers;this.observers=null;this.isUnsubscribed=!0;if(e)for(var f=e.length;++c<f;)e[c].error(a);this.isUnsubscribed=!1;this.unsubscribe()};c.prototype._complete=function(){this.destination?this.destination.complete():this._finalComplete()};c.prototype._finalComplete=function(){var a=-1,c=this.observers;
this.observers=null;this.isUnsubscribed=!0;if(c)for(var e=c.length;++a<e;)c[a].complete();this.isUnsubscribed=!1;this.unsubscribe()};c.prototype[f.rxSubscriber]=function(){return new k.Subscriber(this)};c.create=function(a,e){return new c(a,e)};return c}(b.Observable);g.Subject=a},function(b,g,a){b=a(333);g.asap=new b.AsapScheduler},function(b,g,a){var h=function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=
e.prototype,new c)};b=a(1);var k=a(46),m=a(25),l=a(19);a=function(a){function e(c,d){a.call(this);this.array=c;this.scheduler=d;d||1!==c.length||(this._isScalar=!0,this.value=c[0])}h(e,a);e.create=function(a,d){return new e(a,d)};e.of=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=a[a.length-1];l.isScheduler(d)?a.pop():d=null;var n=a.length;return 1<n?new e(a,d):1===n?new k.ScalarObservable(a[0],d):new m.EmptyObservable(d)};e.dispatch=function(a){var d=a.array,e=a.index,
f=a.subscriber;e>=a.count?f.complete():(f.next(d[e]),f.isUnsubscribed||(a.index=e+1,this.schedule(a)))};e.prototype._subscribe=function(a){var d=this.array,n=d.length,f=this.scheduler;if(f)return f.schedule(e.dispatch,0,{array:d,index:0,count:n,subscriber:a});for(f=0;f<n&&!a.isUnsubscribed;f++)a.next(d[f]);a.complete()};return e}(b.Observable);g.ArrayObservable=a},function(b,g){function a(){}var h={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},k=function(){};a.error=k;a.warn=k;a.info=k;a.debug=k;a.setLevel=
function(b){"string"==typeof b&&(b=h[b]);a.error=b>=h.ERROR?console.error.bind(console):k;a.warn=b>=h.WARNING?console.warn.bind(console):k;a.info=b>=h.INFO?console.info.bind(console):k;a.debug=b>=h.DEBUG?console.log.bind(console):k};b.exports=a},function(b,g){g.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(b,g,a){(function(a,b){var m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&
a.constructor===Symbol?"symbol":typeof a},l={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};g.root=l["undefined"===typeof self?"undefined":m(self)]&&self||l["undefined"===typeof window?"undefined":m(window)]&&window;m(g);m(a);!(m=l["undefined"===typeof b?"undefined":m(b)]&&b)||m.global!==m&&m.window!==m||(g.root=m)}).call(g,a(343)(b),function(){return this}())},function(b,g,a){var h=a(18);b.exports=function(a){return h(a)?a:Object(a)}},function(b,g,a){g=a(66);var h=a(22),k=
a(23),m=Object.prototype.toString;a=g(Array,"isArray")||function(a){return k(a)&&h(a.length)&&"[object Array]"==m.call(a)};b.exports=a},function(b,g){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};b.exports=function(b){var k="undefined"===typeof b?"undefined":a(b);return!!b&&("object"==k||"function"==k)}},function(b,g){g.isScheduler=function(a){return a&&"function"===
typeof a.schedule}},function(b,g,a){function h(a,c){return n(a.map(function(a){return(c||D).map(function(c){return c+a})}))}function k(a,c){return C(c,function(c){var d;d=document.createElement(a.tagName);c="on"+c;c in d?d=!0:(d.setAttribute(c,"return;"),d="function"==typeof d[c]);return d})}function m(a,c){var d=void 0;a=h(a,c);return function(c){return c instanceof J?("undefined"==typeof d&&(d=k(c,a)||null),d?y(c,d):w()):z(c,a)}}function l(a,c){function d(){var a=0>=arguments.length||void 0===arguments[0]?
{}:arguments[0];a.errorCode&&(a={systemCode:a.systemCode,code:a.errorCode.code});this.name="KeySessionError";this.mediaKeyError=a;this.message="MediaKeyError code:"+a.code+" and systemCode:"+a.systemCode}d.prototype=Error();return function(e,n){var f="function"==typeof c?c.call(this):this,l=P(f),b=F(f).map(function(a){throw new d(f.error||a);});try{return a.call(this,e,n),p(l,b).take(1)}catch(r){return q["throw"](r)}}}function f(a,c){if(c instanceof M)return c._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(c);
if(null!==c){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(c);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(c);if(a.msSetMediaKeys)return a.msSetMediaKeys(c);throw Error("compat: cannot find setMediaKeys method");}}function e(){return!!(v.fullscreenElement||v.mozFullScreenElement||v.webkitFullscreenElement||v.msFullscreenElement)}var c=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a},
d=function(){function a(c,d){for(var e=0;e<d.length;e++){var f=d[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,d,e){d&&a(c.prototype,d);e&&a(c,e);return c}}(),n=a(43);a(13);var r=a(41);g=a(28);var u=g.bytesToStr,x=g.strToBytes,t=a(7),q=a(8).Observable,p=q.merge,w=q.never,y=q.fromEvent,z=a(21).on,C=a(29),A=a(96),v=document,B=window,D=["","webkit","moz","ms"],J=B.HTMLElement;a=B.HTMLVideoElement;var H=B.MediaSource||
B.MozMediaSource||B.WebKitMediaSource||B.MSMediaSource,G=B.MediaKeys||B.MozMediaKeys||B.WebKitMediaKeys||B.MSMediaKeys,K="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),M=function(){},I=void 0;navigator.requestMediaKeySystemAccess&&(I=function(a,c){return A(navigator.requestMediaKeySystemAccess(a,c))});var L=function(){function a(c,d,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._keyType=
c;this._mediaKeys=d;this._configuration=e}a.prototype.createMediaKeys=function(){return q.of(this._mediaKeys)};a.prototype.getConfiguration=function(){return this._configuration};d(a,[{key:"keySystem",get:function(){return this._keyType}}]);return a}(),T=m(["loadedmetadata"]),R=m(["sourceopen","webkitsourceopen"]);g=m(["encrypted","needkey"]);var S=m(["keymessage","message"]),P=m(["keyadded","ready"]),F=m(["keyerror","error"]),E=m(["keystatuseschange"]);g={onEncrypted:g,onKeyMessage:S,onKeyStatusesChange:E,
onKeyError:F};!I&&a.prototype.webkitGenerateKeyRequest?function(){var a=function(a,c){var d=this;r.call(this);this.sessionId="";this._vid=a;this._key=c;this._con=p(S(a),P(a),F(a)).subscribe(function(a){return d.trigger(a.type,a)})};a.prototype=c({},r.prototype,{generateRequest:function(a,c){this._vid.webkitGenerateKeyRequest(this._key,c)},update:l(function(a,c){if(0<=this._key.indexOf("clearkey")){var d=JSON.parse(u(a)),e=x(atob(d.keys[0].k)),d=x(atob(d.keys[0].kid));this._vid.webkitAddKey(this._key,
e,d,c)}else this._vid.webkitAddKey(this._key,a,null,c);this.sessionId=c}),close:function(){this._con&&this._con.unsubscribe();this._vid=this._con=null}});M=function(a){this.ks_=a};M.prototype={_setVideo:function(a){this._vid=a},createSession:function(){return new a(this._vid,this.ks_)}};var d=function(a){var c=v.querySelector("video")||v.createElement("video");return c&&c.canPlayType?!!c.canPlayType("video/mp4",a):!1};I=function(a,c){if(!d(a))return q["throw"]();for(var e=0;e<c.length;e++){var f=
c[e],n=f.videoCapabilities,l=f.audioCapabilities,b=f.initDataTypes,r=f.sessionTypes,m=f.distinctiveIdentifier,f=f.persistentState,k=!0;if(k=(k=(k=(k=k&&(!b||!!C(b,function(a){return"cenc"===a})))&&(!r||r.filter(function(a){return"temporary"===a}).length===r.length))&&"required"!==m)&&"required"!==f)return e={videoCapabilities:n,audioCapabilities:l,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]},q.of(new L(a,new M(a),e))}return q["throw"]()}}():
G&&!I&&function(){var a=function(a){r.call(this);this.sessionId="";this._mk=a};a.prototype=c({},r.prototype,{generateRequest:function(a,c){var d=this;this._ss=this._mk.memCreateSession("video/mp4",c);this._con=p(S(this._ss),P(this._ss),F(this._ss)).subscribe(function(a){return d.trigger(a.type,a)})},update:l(function(a,c){t(this._ss);this._ss.update(a,c);this.sessionId=c},function(){return this._ss}),close:function(){this._ss&&(this._ss.close(),this._ss=null);this._con&&(this._con.unsubscribe(),this._con=
null)}});G.prototype.alwaysRenew=!0;G.prototype.memCreateSession=G.prototype.createSession;G.prototype.createSession=function(){return new a(this)};I=function(a,c){if(!G.isTypeSupported(a))return q["throw"]();for(var d=0;d<c.length;d++){var e=c[d],f=e.videoCapabilities,n=e.audioCapabilities,l=e.initDataTypes,e=e.distinctiveIdentifier,b=!0;if(b=(b=b&&(!l||C(l,function(a){return"cenc"===a})))&&"required"!==e)return d={videoCapabilities:f,audioCapabilities:n,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",
persistentState:"required",sessionTypes:["temporary","persistent-license"]},q.of(new L(a,new G(a),d))}return q["throw"]()}}();G||(E=function(){throw Error("eme: MediaKeys is not available");},G={create:E,isTypeSupported:E});if(B.WebKitSourceBuffer&&!B.WebKitSourceBuffer.prototype.addEventListener){var E=B.WebKitSourceBuffer.prototype,N;for(N in r.prototype)E[N]=r.prototype[N];E.__listeners=[];E.appendBuffer=function(a){if(this.updating)throw Error("SourceBuffer updating");this.trigger("updatestart");
this.updating=!0;try{this.append(a)}catch(c){this.__emitUpdate("error",c);return}this.__emitUpdate("update")};E.__emitUpdate=function(a,c){var d=this;setTimeout(function(){d.trigger(a,c);d.updating=!1;d.trigger("updateend")},0)}}N=m(["fullscreenchange","FullscreenChange"],D.concat("MS"));b.exports={HTMLVideoElement_:a,MediaSource_:H,isCodecSupported:function(a){return!!H&&H.isTypeSupported(a)},sourceOpen:function(a){return"open"==a.readyState?q.of(null):R(a).take(1)},canSeek:function(a){return 1<=
a.readyState?q.of(null):T(a).take(1)},canPlay:function(a){return 4<=a.readyState?q.of(null):z(a,"canplay").take(1)},KeySystemAccess:L,requestMediaKeySystemAccess:I,setMediaKeys:function(a,c){return A(f(a,c))},emeEvents:g,shouldRenewMediaKeys:function(){return K},isFullscreen:e,onFullscreenChange:N,requestFullscreen:function(a){e()||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},
exitFullscreen:function(){e()&&(v.exitFullscreen?v.exitFullscreen():v.msExitFullscreen?v.msExitFullscreen():v.mozCancelFullScreen?v.mozCancelFullScreen():v.webkitExitFullscreen&&v.webkitExitFullscreen())},videoSizeChange:function(){return z(B,"resize")},visibilityChange:function(){var a=void 0;null!=v.hidden?a="":null!=v.mozHidden?a="moz":null!=v.msHidden?a="ms":null!=v.webkitHidden&&(a="webkit");var c=a?a+"Hidden":"hidden";return z(v,a+"visibilitychange").map(function(){return v[c]})},clearVideoSrc:function(a){K?
a.removeAttribute("src"):a.src=""},addTextTrack:function(a){var c=void 0,d=void 0;K?(c=a.addTextTrack("subtitles"),c.mode=c.SHOWING):(d=document.createElement("track"),c=d.track,d.kind="subtitles",c.mode="showing",a.appendChild(d));return{track:c,trackElement:d}},isVTTSupported:function(){return!K},isIE:K}},function(b,g,a){var h=a(8).Observable,k=h.fromEvent,m=h.merge,l=h.timer,f=a(54).getBackedoffDelay,e=a(13),c=a(55);h.prototype.log=function(a,c){a||(a="");return this["do"](function(f){return e.debug(a,
"next",c?c(f):f)},function(c){return e.debug(a,"error",c)},function(){return e.debug(a,"completed")})};b.exports={on:function(a,c){return Array.isArray(c)?m.apply(null,c.map(function(c){return k(a,c)})):k(a,c)},first:function(a){return a.take(1)},only:function(a){return h.never().startWith(a)},retryWithBackoff:function(a,e){var b=e.retryDelay,m=e.totalRetry,k=e.shouldRetry,g=e.resetDelay,h=0,p;0<g&&(p=c(function(){return h=0},g));return function y(){for(var c=0,e=arguments.length,n=Array(e);c<e;c++)n[c]=
arguments[c];return a.apply(null,n)["catch"](function(a){if(k&&!k(a,h)||h++>=m)throw a;a=f(b,h);return l(a).flatMap(function(){p&&p();return y.apply(null,n)})})}}}},function(b,g){b.exports=function(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}},function(b,g){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};b.exports=function(b){return!!b&&"object"==
("undefined"===typeof b?"undefined":a(b))}},function(b,g,a){g=a(66);var h=a(34),k=a(18),m=a(128),l=g(Object,"keys");b.exports=l?function(a){var e=null==a?void 0:a.constructor;return"function"==typeof e&&e.prototype===a||"function"!=typeof a&&h(a)?m(a):k(a)?l(a):[]}:m},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(l){a.call(this);this.scheduler=
l}h(b,a);b.create=function(a){return new b(a)};b.dispatch=function(a){a.subscriber.complete()};b.prototype._subscribe=function(a){var f=this.scheduler;if(f)return f.schedule(b.dispatch,0,{subscriber:a});a.complete()};return b}(a(1).Observable);g.EmptyObservable=b},function(b,g,a){var h=a(72);g.multicast=function(a){return new h.ConnectableObservable(this,"function"===typeof a?a:function(){return a})}},function(b,g,a){function h(a){var c=m(a);f(c,a);e(c);k(c);return c}function k(a){a["for"]||(a["for"]=
l)}function m(a){a.Symbol||(a.Symbol=function(a){return"@@Symbol("+a+"):"+c++});return a.Symbol}function l(a){return"@@"+a}function f(a,c){if(!a.iterator)if("function"===typeof a["for"])a.iterator=a["for"]("iterator");else if(c.Set&&"function"===typeof(new c.Set)["@@iterator"])a.iterator="@@iterator";else if(c.Map)for(var e=Object.getOwnPropertyNames(c.Map.prototype),f=0;f<e.length;++f){var l=e[f];if("entries"!==l&&"size"!==l&&c.Map.prototype[l]===c.Map.prototype.entries){a.iterator=l;break}}else a.iterator=
"@@iterator"}function e(a){a.observable||(a.observable="function"===typeof a["for"]?a["for"]("observable"):"@@observable")}b=a(15);g.polyfillSymbol=h;g.ensureFor=k;var c=0;g.ensureSymbol=m;g.symbolForPolyfill=l;g.ensureIterator=f;g.ensureObservable=e;g.SymbolShim=h(b.root)},function(b,g,a){function h(a){for(var f=a.length,e=new Uint8Array(f),c=0;c<f;c++)e[c]=a.charCodeAt(c)&255;return e}function k(a,f){f||(f="");for(var e="",c=0;c<a.byteLength;c++)e+=(a[c]>>>4).toString(16),e+=(a[c]&15).toString(16),
f.length&&(e+=f);return e}var m=a(7);b.exports={totalBytes:function(a){for(var f=0,e=0;e<a.length;e++)f+=a[e].byteLength;return f},strToBytes:h,bytesToStr:function(a){return String.fromCharCode.apply(null,a)},bytesToUTF16Str:function(a){for(var f="",e=a.length,c=0;c<e;c+=2)f+=String.fromCharCode(a[c]);return f},hexToBytes:function(a){for(var f=a.length,e=new Uint8Array(f/2),c=0,d=0;c<f;c+=2,d++)e[d]=parseInt(a.substr(c,2),16)&255;return e},bytesToHex:k,concat:function(){for(var a=arguments.length,
f=-1,e=0,c;++f<a;)c=arguments[f],e+="number"===typeof c?c:c.length;for(var e=new Uint8Array(e),d=0,f=-1;++f<a;)c=arguments[f],"number"===typeof c?d+=c:0<c.length&&(e.set(c,d),d+=c.length);return e},be2toi:function(a,f){return(a[0+f]<<8)+(a[1+f]<<0)},be4toi:function(a,f){return 16777216*a[0+f]+65536*a[1+f]+256*a[2+f]+a[3+f]},be8toi:function(a,f){return 4294967296*(16777216*a[0+f]+65536*a[1+f]+256*a[2+f]+a[3+f])+16777216*a[4+f]+65536*a[5+f]+256*a[6+f]+a[7+f]},le2toi:function(a,f){return(a[0+f]<<0)+
(a[1+f]<<8)},le4toi:function(a,f){return a[0+f]+256*a[1+f]+65536*a[2+f]+16777216*a[3+f]},le8toi:function(a,f){return a[0+f]+256*a[1+f]+65536*a[2+f]+16777216*a[3+f]+(a[4+f]+256*a[5+f]+65536*a[6+f]+16777216*a[7+f]*4294967296)},itobe2:function(a){return new Uint8Array([a>>>8&255,a&255])},itobe4:function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])},itobe8:function(a){var f=a%4294967296;a=(a-f)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,f>>>24&255,f>>>
16&255,f>>>8&255,f&255])},itole2:function(a){return new Uint8Array([a&255,a>>>8&255])},itole4:function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])},itole8:function(a){var f=a%4294967296;a=(a-f)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,f&255,f>>>8&255,f>>>16&255,f>>>24&255])},guidToUuid:function(a){m.equal(a.length,16,"UUID length should be 16");var f=h(a);a=f[0];var e=f[1],c=f[2],d=f[3],n=f[4],b=f[5],u=f[6],g=f[7],t=f.subarray(8,10),f=f.subarray(10,
16),q=new Uint8Array(16);q[0]=d;q[1]=c;q[2]=e;q[3]=a;q[4]=b;q[5]=n;q[6]=g;q[7]=u;q.set(t,8);q.set(f,10);return k(q)},toBase64URL:function(a){return btoa(a).replace(/\=+$/,"")}}},function(b,g,a){g=a(106);a=a(64)(g);b.exports=a},function(b,g,a){g=a(132);var h=a(101);a=a(123)(g,h);b.exports=a},function(b,g,a){var h=function(a,f){function e(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(e.prototype=f.prototype,new e)};b=a(5);var k=a(6);a=function(){function a(f){this.concurrent=
f}a.prototype.call=function(a){return new m(a,this.concurrent)};return a}();g.MergeAllOperator=a;var m=function(a){function f(e,c){a.call(this,e);this.concurrent=c;this.hasCompleted=!1;this.buffer=[];this.active=0}h(f,a);f.prototype._next=function(a){this.active<this.concurrent?a._isScalar?this.destination.next(a.value):(this.active++,this.add(k.subscribeToResult(this,a))):this.buffer.push(a)};f.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};
f.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return f}(b.OuterSubscriber);g.MergeAllSubscriber=m},function(b,g,a){function h(a){if(Array.isArray(a))return a;for(var c=a.length,d=Array(c),e=-1;++e<c;)d[e]={start:a.start(e),end:a.end(e),bitrate:0};return d}function k(a,c){return a.start<=c&&c<a.end}function m(a,c){for(var d=0;d<c.length;d++)if(l(a,c[d]))return c[d];
return null}function l(a,c){return k(a,c.start)||k(a,c.end)||k(c,a.start)}function f(a,c){return k(a,c.start)&&k(a,c.end)}function e(a,c,d){return{start:Math.min(a.start,c.start),end:Math.max(a.end,c.end),bitrate:d}}var c=a(7),d=1/60;g=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ranges=c?h(c):[];this.length=this.ranges.length}a.prototype.start=function(a){return this.ranges[a].start};a.prototype.end=function(a){return this.ranges[a].end};
a.prototype.hasRange=function(a,c){for(var e=a+c,f=0;f<this.ranges.length;f++){var n=this.ranges[f],b=n.start,n=n.end;if(b-a<=d&&a-n<=d&&b-e<=d&&e-n<=d)return this.ranges[f]}return null};a.prototype.getRange=function(a){for(var c=0;c<this.ranges.length;c++)if(k(this.ranges[c],a))return this.ranges[c];return null};a.prototype.getOuterRanges=function(a){for(var c=[],d=0;d<this.ranges.length;d++)k(this.ranges[d],a)||c.push(this.ranges[d]);return c};a.prototype.getGap=function(a){var c=this.getRange(a);
return c?c.end-a:Infinity};a.prototype.getLoaded=function(a){var c=this.getRange(a);return c?a-c.start:0};a.prototype.getSize=function(a){return(a=this.getRange(a))?a.end-a.start:0};a.prototype.getNextRangeGap=function(a){for(var c=this.ranges,d=-1,e=void 0;++d<c.length;){var f=c[d].start;if(f>a){e=f;break}}return null!=e?e-a:Infinity};a.prototype.insert=function(a,n,b){var m=this.ranges;c(n<=b);if(n!=b){a={start:n,end:b,bitrate:a};for(n=0;n<m.length;n++){b=m[n];var k=l(a,b),g=Math.abs(b.start-a.end)<
d||Math.abs(b.end-a.start)<d;if(k||g)if(a.bitrate===b.bitrate)a=e(a,b,b.bitrate),m.splice(n--,1);else if(k)if(f(b,a))m.splice(++n,0,a),k=b.end,b.end=a.start,a={start:a.end,end:k,bitrate:b.bitrate};else if(f(a,b))m.splice(n--,1);else if(b.start<a.start)b.end=a.start;else{b.start=a.end;break}else break;else if(0===n){if(a.end<=m[0].start)break}else if(m[n-1].end<=a.start&&a.end<=b.start)break}m.splice(n,0,a);for(a=0;a<m.length;a++)n=m[a],n.start===n.end&&m.splice(a++,1);for(a=1;a<m.length;a++)n=m[a-
1],b=m[a],n.bitrate===b.bitrate&&(Math.abs(b.start-n.end)<d||Math.abs(b.end-n.start)<d)&&(n=e(n,b,b.bitrate),m.splice(--a,2,n))}this.length=this.ranges.length;return this.ranges};a.prototype.remove=function(c,d){this.intersect(new a([{start:0,end:c},{start:d,end:Infinity}]))};a.prototype.equals=function(a){var c;a:{c=this.ranges;a=a.ranges;for(var d=0;d<c.length;d++){var e=c[d],f=m(e,a);if(!f||f.start>e.start||f.end<e.end){c=!1;break a}}c=!0}return c};a.prototype.intersect=function(a){var c=this.ranges;
a=a.ranges;for(var d=0;d<c.length;d++){var e=c[d],f=m(e,a);f?(f.start>e.start&&(e.start=f.start),f.end<e.end&&(e.end=f.end)):c.splice(d--,1)}this.length=this.ranges.length;return this.ranges};return a}();b.exports={bufferedToArray:h,BufferedRanges:g}},function(b,g,a){function h(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}function k(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function");}function m(a){return"number"==typeof a&&!isNaN(a)||!isNaN(+a)?!0:!1}var l=a(42).resolveURL,f=a(370),e=new f(100);g=function(){function a(d,e,f,b,l,g,h,p,w,y){k(this,a);this.id=f;this.ada=d;this.rep=e;this.time=m(l)?+l:-1;this.duration=m(g)?+g:-1;this.number=m(h)?+h:-1;this.media=b?""+b:"";this.range=Array.isArray(p)?p:null;this.indexRange=
Array.isArray(w)?w:null;this.init=!!y}a.create=function(d,f,b,l,m,k,g,h,w,y){b=d.id+"_"+f.id+"_"+b;var z=e.get(b);if(z)return z;d=new a(d,f,b,l,m,k,g,h,w,y);e.set(b,d);return d};a.prototype.getId=function(){return this.id};a.prototype.getAdaptation=function(){return this.ada};a.prototype.getRepresentation=function(){return this.rep};a.prototype.getTime=function(){return this.time};a.prototype.getDuration=function(){return this.duration};a.prototype.getNumber=function(){return this.number};a.prototype.getMedia=
function(){return this.media};a.prototype.getRange=function(){return this.range};a.prototype.getIndexRange=function(){return this.indexRange};a.prototype.isInitSegment=function(){return this.init};a.prototype.getResolvedURL=function(){return l(this.ada.rootURL,this.ada.baseURL,this.rep.baseURL)};return a}();a=function(a){function d(e,f,b,l,m){k(this,d);e=a.call(this,e,f,e.id+"_"+f.id+"_init",b,-1,-1,-1,l,m,!0);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!==typeof e&&"function"!==typeof e?this:e}h(d,a);return d}(g);b.exports={Segment:g,InitSegment:a,clearSegmentCache:function(){e=new f(100)}}},function(b,g,a){var h=a(65),k=a(22);b.exports=function(a){return null!=a&&k(h(a))}},function(b,g,a){var h=a(1);b=function(){function a(b,l,f){this.kind=b;this.value=l;this.exception=f;this.hasValue="N"===b}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next(this.value);case "E":return a.error(this.exception);case "C":return a.complete()}};
a.prototype["do"]=function(a,b,f){switch(this.kind){case "N":return a(this.value);case "E":return b(this.exception);case "C":return f()}};a.prototype.accept=function(a,b,f){return a&&"function"===typeof a.next?this.observe(a):this["do"](a,b,f)};a.prototype.toObservable=function(){switch(this.kind){case "N":return h.Observable.of(this.value);case "E":return h.Observable["throw"](this.exception);case "C":return h.Observable.empty()}};a.createNext=function(b){return"undefined"!==typeof b?new a("N",b):
this.undefinedValueNotification};a.createError=function(b){return new a("E",void 0,b)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();g.Notification=b},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(){a.apply(this,arguments);this.value=
null;this.hasNext=!1}h(b,a);b.prototype._subscribe=function(b){this.hasCompleted&&this.hasNext&&b.next(this.value);return a.prototype._subscribe.call(this,b)};b.prototype._next=function(a){this.value=a;this.hasNext=!0};b.prototype._complete=function(){var a=-1,f=this.observers,e=f.length;this.isUnsubscribed=!0;if(this.hasNext)for(;++a<e;){var c=f[a];c.next(this.value);c.complete()}else for(;++a<e;)f[a].complete();this.isUnsubscribed=!1;this.unsubscribe()};return b}(a(10).Subject);g.AsyncSubject=b},
function(b,g,a){b=a(27);g.rxSubscriber=b.SymbolShim["for"]("rxSubscriber")},function(b,g){var a=function(){return function(){this.name="EmptyError";this.message="no elements in sequence"}}();g.EmptyError=a},function(b,g){g.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(b,g){g.noop=function(){}},function(b,g,a){function h(){this.__listeners={}}var k=a(7);h.prototype.addEventListener=function(a,b){k("function"==typeof b,"eventemitter: second argument should be a function");this.__listeners[a]||
(this.__listeners[a]=[]);this.__listeners[a].push(b)};h.prototype.removeEventListener=function(a,b){if(0===arguments.length)this.__listeners={};else if(this.__listeners.hasOwnProperty(a))if(1===arguments.length)delete this.__listeners[a];else{var f=this.__listeners[a],e=f.indexOf(b);~e&&f.splice(e,1);f.length||delete this.__listeners[a]}};h.prototype.trigger=function(a,b){this.__listeners.hasOwnProperty(a)&&this.__listeners[a].slice().forEach(function(a){try{a(b)}catch(e){console.error(e,e.stack)}})};
h.prototype.on=h.prototype.addEventListener;h.prototype.off=h.prototype.removeEventListener;b.exports=h},function(b,g){var a=/^(?:[a-z]+:)?\/\//i,h=/\/[\.]{1,2}\//;b.exports={resolveURL:function(){var b=arguments.length;if(0===b)return"";for(var m="",l=0;l<b;l++){var f=arguments[l];"string"===typeof f&&""!==f&&(a.test(f)?m=f:("/"===f[0]&&(f=f.substr(1)),"/"===m[m.length-1]&&(m=m.substr(0,m.length-1)),m=m+"/"+f))}if(h.test(m)){b=[];m=m.split("/");l=0;for(f=m.length;l<f;l++)".."==m[l]?b.pop():"."!=
m[l]&&b.push(m[l]);b=b.join("/")}else b=m;return b},parseBaseURL:function(a){var b=a.lastIndexOf("/");return 0<=b?a.substring(0,b+1):a}}},function(b,g,a){var h=a(110),k=a(67);b.exports=function(a,b,f){var e=a?a.length:0;f&&k(a,b,f)&&(b=!1);return e?h(a,b):[]}},function(b,g){var a=/^\d+$/;b.exports=function(b,k){b="number"==typeof b||a.test(b)?+b:-1;return-1<b&&0==b%1&&b<(null==k?9007199254740991:k)}},function(b,g,a){var h=a(34),k=a(23);g=Object.prototype;var m=g.hasOwnProperty,l=g.propertyIsEnumerable;
b.exports=function(a){return k(a)&&h(a)&&m.call(a,"callee")&&!l.call(a,"callee")}},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(l,f){a.call(this);this.value=l;this.scheduler=f;this._isScalar=!0}h(b,a);b.create=function(a,f){return new b(a,f)};b.dispatch=function(a){var f=a.value,e=a.subscriber;a.done?e.complete():(e.next(f),e.isUnsubscribed||
(a.done=!0,this.schedule(a)))};b.prototype._subscribe=function(a){var f=this.value,e=this.scheduler;if(e)return e.schedule(b.dispatch,0,{done:!1,value:f,subscriber:a});a.next(f);a.isUnsubscribed||a.complete()};return b}(a(1).Observable);g.ScalarObservable=b},function(b,g,a){function h(a){var e=a.value;a=a.subscriber;a.isUnsubscribed||(a.next(e),a.complete())}function k(a){var e=a.err;a=a.subscriber;a.isUnsubscribed||a.error(e)}var m=function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&
(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)},l=a(15);b=function(a){function e(c,d){void 0===d&&(d=null);a.call(this);this.promise=c;this.scheduler=d}m(e,a);e.create=function(a,d){void 0===d&&(d=null);return new e(a,d)};e.prototype._subscribe=function(a){var d=this,e=this.promise,f=this.scheduler;if(null==f)this._isScalar?a.isUnsubscribed||(a.next(this.value),a.complete()):e.then(function(e){d.value=e;d._isScalar=!0;a.isUnsubscribed||(a.next(e),a.complete())},
function(d){a.isUnsubscribed||a.error(d)}).then(null,function(a){l.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.isUnsubscribed)return f.schedule(h,0,{value:this.value,subscriber:a})}else e.then(function(e){d.value=e;d._isScalar=!0;a.isUnsubscribed||a.add(f.schedule(h,0,{value:e,subscriber:a}))},function(d){a.isUnsubscribed||a.add(f.schedule(k,0,{err:d,subscriber:a}))}).then(null,function(a){l.root.setTimeout(function(){throw a;})})};return e}(a(1).Observable);g.PromiseObservable=
b},function(b,g,a){var h=function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},k=a(4),m=a(3);b=a(5);var l=a(6);a=function(){function a(c){this.project=c}a.prototype.call=function(a){return new f(a,this.project)};return a}();g.CombineLatestOperator=a;var f=function(a){function c(c,f){a.call(this,c);this.project=f;this.active=0;this.values=[];this.observables=[];this.toRespond=[]}h(c,a);c.prototype._next=
function(a){var c=this.toRespond;c.push(c.length);this.observables.push(a)};c.prototype._complete=function(){var a=this.observables,c=a.length;if(0===c)this.destination.complete();else{this.active=c;for(var e=0;e<c;e++){var f=a[e];this.add(l.subscribeToResult(this,f,f,e))}}};c.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};c.prototype.notifyNext=function(a,c,e,f){a=this.values;a[e]=c;c=this.toRespond;0<c.length&&(e=c.indexOf(e),-1!==e&&c.splice(e,1));0===c.length&&
(c=this.project,e=this.destination,c?(a=k.tryCatch(c).apply(this,a),a===m.errorObject?e.error(m.errorObject.e):e.next(a)):e.next(a))};return c}(b.OuterSubscriber);g.CombineLatestSubscriber=f},function(b,g,a){var h=function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};b=a(2);var k=a(35);a=function(){function a(e,c){void 0===c&&(c=0);this.scheduler=e;this.delay=c}a.prototype.call=function(a){return new m(a,
this.scheduler,this.delay)};return a}();g.ObserveOnOperator=a;var m=function(a){function e(c,e,b){void 0===b&&(b=0);a.call(this,c);this.scheduler=e;this.delay=b}h(e,a);e.dispatch=function(a){a.notification.observe(a.destination)};e.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(e.dispatch,this.delay,new l(a,this.destination)))};e.prototype._next=function(a){this.scheduleMessage(k.Notification.createNext(a))};e.prototype._error=function(a){this.scheduleMessage(k.Notification.createError(a))};
e.prototype._complete=function(){this.scheduleMessage(k.Notification.createComplete())};return e}(b.Subscriber);g.ObserveOnSubscriber=m;var l=function(){return function(a,e){this.notification=a;this.destination=e}}()},function(b,g,a){var h=function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)},k=a(15);b=function(a){function b(f,e){a.call(this);this.scheduler=f;this.work=e}h(b,a);b.prototype.execute=
function(){if(this.isUnsubscribed)throw Error("How did did we execute a canceled Action?");this.work(this.state)};b.prototype.schedule=function(a,e){void 0===e&&(e=0);return this.isUnsubscribed?this:this._schedule(a,e)};b.prototype._schedule=function(a,e){var c=this;void 0===e&&(e=0);this.delay=e;this.state=a;var d=this.id;null!=d&&(this.id=void 0,k.root.clearTimeout(d));this.id=k.root.setTimeout(function(){c.id=null;var a=c.scheduler;a.actions.push(c);a.flush()},e);return this};b.prototype._unsubscribe=
function(){var a=this.id,e=this.scheduler.actions,c=e.indexOf(this);null!=a&&(this.id=null,k.root.clearTimeout(a));-1!==c&&e.splice(c,1);this.scheduler=this.state=this.work=null};return b}(a(9).Subscription);g.FutureAction=b},function(b,g,a){var h=a(14);g.isNumeric=function(a){return!h.isArray(a)&&0<=a-parseFloat(a)+1}},function(b,g){g.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(b,g,a){function h(a,c,e){a.id=a.id||w++;var d=a.adaptations,
d=d.concat(e||[]),d=d.map(function(a){return k(a,c)}),d=d.filter(function(a){return 0>y.indexOf(a.type)?(n.info("not supported adaptation type",a.type),!1):!0});r(0<d.length);e={};for(var f=0;f<d.length;f++){var b=d[f],l=b.type;e[l]=e[l]||[];e[l].push(b)}a.adaptations=e;return a}function k(a,c){r("undefined"!=typeof a.id);u(a,c);var e={};p.forEach(function(c){c in a&&(e[c]=a[c])});var d=a.representations.map(function(a){r("undefined"!=typeof a.id);u(a,e);var c=a.index;r(c);c.timescale||(c.timescale=
1);a.bitrate||(a.bitrate=1);"mp4a.40.02"==a.codecs&&(a.codecs="mp4a.40.2");return a}).sort(function(a,c){return a.bitrate-c.bitrate}),b=a.type,n=a.mimeType;n||(n=d[0].mimeType);r(n);a.mimeType=n;b||(b=a.type=n.split("/")[0]);if("video"==b||"audio"==b)d=d.filter(function(a){return q(f(a))});r(0<d.length,"manifest: no compatible representation for this adaptation");a.representations=d;a.bitrates=d.map(function(a){return a.bitrate});return a}function m(a){Array.isArray(a)||(a=[a]);return x(a.map(function(a){var c=
a.mimeType,e=a.url,d=a.language;a=a.languages;d&&(a=[d]);return a.map(function(a){return{id:w++,type:"text",lang:a,mimeType:c,rootURL:e,baseURL:"",representations:[{id:w++,mimeType:c,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})}))}function l(a,e){for(var d in a)if(e.hasOwnProperty(d)){var f=a[d],b=e[d];"string"==typeof f||"number"==typeof f||"object"==("undefined"===typeof f?"undefined":c(f))&&f instanceof Date?a[d]=b:Array.isArray(f)?(f.length=0,Array.prototype.push.apply(f,
b)):a[d]=l(f,b)}return a}function f(a){return a.mimeType+';codecs="'+a.codecs+'"'}function e(a,c){var e=a.adaptations;return(e=e&&e[c])?e:[]}var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},d=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var e=arguments[c],d;for(d in e)Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}return a},n=a(13),r=
a(7),u=a(30),x=a(43),t=a(42).parseBaseURL,q=a(20).isCodecSupported,p="profiles width height frameRate audioSamplingRate mimeType segmentProfiles codecs maximumSAPPeriod maxPlayoutRate codingDependency index".split(" "),w=0,y=["audio","video","text"];b.exports={normalizeManifest:function(a,c,e){r(c.transportType);c.id=c.id||w++;c.type=c.type||"static";var f=c.locations;f&&f.length||(c.locations=[a]);c.isLive="dynamic"==c.type;var b={rootURL:t(c.locations[0]),baseURL:c.baseURL,isLive:c.isLive};e&&(e=
m(e));a=c.periods.map(function(a){return h(a,b,e)});c=d({},c,a[0]);c.periods=null;c.duration||(c.duration=Infinity);c.isLive&&(c.suggestedPresentationDelay=c.suggestedPresentationDelay||15,c.availabilityStartTime=c.availabilityStartTime||0);return c},mergeManifestsIndex:function(a,c){var e=a.adaptations,d=c.adaptations,f=function(a){var c=d[a];e[a].forEach(function(a,e){l(a.index,c[e].index)})},b;for(b in e)f(b);return a},mutateManifestLiveGap:function(a){var c=1>=arguments.length||void 0===arguments[1]?
1:arguments[1];a.isLive&&(a.presentationLiveGap+=c)},getCodec:f,getAdaptations:function(a){a=a.adaptations;if(!a)return[];var c=[],e;for(e in a){var d=a[e];c.push({type:e,adaptations:d,codec:f(d[0].representations[0])})}return c},getAdaptationsByType:e,getAvailableSubtitles:function(a){return e(a,"text").map(function(a){return a.lang})},getAvailableLanguages:function(a){return e(a,"audio").map(function(a){return a.lang})}}},function(b,g){function a(a){return a*(1+.3*(2*Math.random()-1))}b.exports=
{getFuzzedDelay:a,getBackedoffDelay:function(b){return a(b*Math.pow(2,(1>=arguments.length||void 0===arguments[1]?1:arguments[1])-1))}}},function(b,g){b.exports=function(a,b,k){function m(){var d=e-Date.now();if(0<d)f=setTimeout(m,d);else switch(f=null,c.length){case 0:return a();case 1:return a(c[0]);case 2:return a(c[0],c[1]);case 3:return a(c[0],c[1],c[2]);default:return a.apply(null,c)}}function l(){var a=arguments.length,k=0;for(c=Array(a);k<a;k++)c[k]=arguments[k];if(d&&!n)return n=!0,e=Date.now(),
m();a=e;e=Date.now()+b;if(!f||e<a)f&&clearTimeout(f),f=setTimeout(m,b);return l}var f=null,e=0,c=[],d=!(!k||!k.leading),n=!1;l.isWaiting=function(){return!!f};l.dispose=function(){f&&(clearTimeout(f),f=null)};return l}},function(b,g,a){(function(g){function k(a,c,e){var d=3>=arguments.length||void 0===arguments[3]?null:arguments[3];this.name="RequestError";this.url=a;this.xhr=c;this.code=c.status;this.reason=d;this.message="request: "+e+" ("+a+")";Error.captureStackTrace&&Error.captureStackTrace(this,
k)}function m(a,c){var e=c.code,d=c.method,f=c.message;this.name="RestCallMethodError";this.url=a;this.code=e;this.message="restmethodcall: webservice error status "+e+" ("+a+")"+(d?" ("+d+")":"")+(f?"\n"+f:"");Error.captureStackTrace&&Error.captureStackTrace(this,m)}function l(a,c,e){a=a.querySelector("RestCallResult");var d=+a.querySelector("Status").textContent;if(0>d)throw new m(c,{code:d,method:e});return{output:a.querySelector("Output"),status:d}}function f(a){return"rest-call-method"==a.format?
d(a):r.create(function(c){function e(a){var d=a.target,b=d.status;if(200>b||300<=b)return c.error(new k(f,d,d.statusText));var b=Date.now()-t,n;n="document"==l?(new g.DOMParser).parseFromString(d.responseText,"text/xml"):d.response;if("json"==l&&"string"==typeof n)try{n=JSON.parse(n)}catch(u){n=null}if(null==n)return c.error(new k(f,d,'null response with format "'+l+'" (error while parsing or wrong content-type)'));if(m){var x;if(r){x=r;for(var q={},w,y=0;y<x.length;y++)w=x[y],q[w]=d.getResponseHeader(w);
x=q}c.next({blob:n,size:a.total,duration:b,headers:x,url:d.responseURL||f,xhr:d})}else c.next(n);c.complete()}function d(a){c.error(new k(f,a,"error event"))}var f=a.url,b=a.data,n=a.headers,l=a.format,m=a.withMetadata,r=a.responseHeaders,u=new XMLHttpRequest;u.open(a.method||"GET",f,!0);u.responseType="document"==l?"text":l||"text";if(n)for(var x in n)u.setRequestHeader(x,n[x]);u.addEventListener("load",e,!1);u.addEventListener("error",d,!1);var t=Date.now();u.send(b);return function(){var a=u.readyState;
0<a&&4>a&&(u.removeEventListener("load",e),u.removeEventListener("error",d),u.abort());u=null}})}function e(a){return(a||"").toString().replace(u,function(a){return x[a]})}function c(a){var d="",f;for(f in a)var b=a[f],b="object"==("undefined"===typeof b?"undefined":n(b))?c(b):e(b),d=d+("<"+f+">"+b+"</"+f+">");return d}function d(a){a.method="POST";a.headers={"Content-Type":"application/xml"};a.data=t.replace("{payload}",c(a.data));a.format="document";return f(a).map(function(c){return l(c,a.url,
a.ScriptInfo)})}var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},r=a(8).Observable;k.prototype=Error();m.prototype=Error();var u=/[&<>]/g,x={"&":"&amp;","<":"&lt;",">":"&gt;"},t='<RestCallMethod xmlns:i="http://www.w3.org/2001/XMLSchema-instance">{payload}</RestCallMethod>';f.escapeXml=e;f.RequestError=k;f.RestCallMethodError=m;f.RestCallResult=l;f.getNodeTextContent=
function(a,c){var d=a.querySelector(c);return d&&d.textContent};b.exports=f}).call(g,function(){return this}())},function(b,g){var a=Math.max;b.exports=function(b,k){if("function"!=typeof b)throw new TypeError("Expected a function");k=a(void 0===k?b.length-1:+k||0,0);return function(){for(var m=arguments,l=-1,f=a(m.length-k,0),e=Array(f);++l<f;)e[l]=m[k+l];switch(k){case 0:return b.call(this,e);case 1:return b.call(this,m[0],e);case 2:return b.call(this,m[0],m[1],e)}f=Array(k+1);for(l=-1;++l<k;)f[l]=
m[l];f[k]=e;return b.apply(this,f)}}},function(b,g,a){var h=a(16);b.exports=function(a,b,l){if(null!=a){void 0!==l&&l in h(a)&&(b=[l]);l=0;for(var f=b.length;null!=a&&l<f;)a=a[b[l++]];return l&&l==f?a:void 0}}},function(b,g,a){function h(a,e,c,d,b,r){return a===e?!0:null==a||null==e||!m(a)&&!l(e)?a!==a&&e!==e:k(a,e,h,c,d,b,r)}var k=a(115),m=a(18),l=a(23);b.exports=h},function(b,g){b.exports=function(a){return function(b){return null==b?void 0:b[a]}}},function(b,g,a){var h=a(71);b.exports=function(a,
b,l){if("function"!=typeof a)return h;if(void 0===b)return a;switch(l){case 1:return function(f){return a.call(b,f)};case 3:return function(f,e,c){return a.call(b,f,e,c)};case 4:return function(f,e,c,d){return a.call(b,f,e,c,d)};case 5:return function(f,e,c,d,n){return a.call(b,f,e,c,d,n)}}return function(){return a.apply(b,arguments)}}},function(b,g,a){var h=a(65),k=a(22),m=a(16);b.exports=function(a,f){return function(e,c){var d=e?h(e):0;if(!k(d))return a(e,c);for(var b=f?d:-1,r=m(e);(f?b--:++b<
d)&&!1!==c(r[b],b,r););return e}}},function(b,g,a){var h=a(16);b.exports=function(a){return function(b,l,f){var e=h(b);f=f(b);for(var c=f.length,d=a?c:-1;a?d--:++d<c;){var n=f[d];if(!1===l(e[n],n,e))break}return b}}},function(b,g,a){var h=a(104),k=a(108),m=a(109),l=a(17);b.exports=function(a,e){return function(c,d,b){d=h(d,b,3);return l(c)?(d=m(c,d,e),-1<d?c[d]:void 0):k(c,d,a)}}},function(b,g,a){g=a(60)("length");b.exports=g},function(b,g,a){var h=a(130);b.exports=function(a,b){var l=null==a?void 0:
a[b];return h(l)?l:void 0}},function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(34),m=a(44),l=a(18);b.exports=function(a,e,c){if(!l(c))return!1;var d="undefined"===typeof e?"undefined":h(e);return("number"==d?k(c)&&m(e,c.length):"string"==d&&e in c)?(e=c[e],a===a?a===e:e!==e):!1}},function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?
function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(17),m=a(16),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/;b.exports=function(a,c){var d="undefined"===typeof a?"undefined":h(a);return"string"==d&&f.test(a)||"number"==d?!0:k(a)?!1:!l.test(a)||null!=c&&a in m(c)}},function(b,g,a){var h=a(18);b.exports=function(a){return a===a&&!h(a)}},function(b,g,a){var h=a(121),k=a(17),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,
l=/\\(\\)?/g;b.exports=function(a){if(k(a))return a;var e=[];h(a).replace(m,function(a,d,b,f){e.push(b?f.replace(l,"$1"):d||a)});return e}},function(b,g){b.exports=function(a){return a}},function(b,g,a){var h=function(a,d){function e(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)};b=a(1);var k=a(2);a=a(9);var m=function(a){function d(d,e){a.call(this);this.source=d;this.subjectFactory=e}h(d,a);d.prototype._subscribe=
function(a){return this._getSubject().subscribe(a)};d.prototype._getSubject=function(){var a=this.subject;return a&&!a.isUnsubscribed?a:this.subject=this.subjectFactory()};d.prototype.connect=function(){var a=this.subscription;if(a&&!a.isUnsubscribed)return a;a=this.source.subscribe(this._getSubject());a.add(new l(this));return this.subscription=a};d.prototype.refCount=function(){return new f(this)};return d}(b.Observable);g.ConnectableObservable=m;var l=function(a){function d(d){a.call(this);this.connectable=
d}h(d,a);d.prototype._unsubscribe=function(){var a=this.connectable;a.subject=null;this.connectable=a.subscription=null};return d}(a.Subscription),f=function(a){function d(d,e){void 0===e&&(e=0);a.call(this);this.connectable=d;this.refCount=e}h(d,a);d.prototype._subscribe=function(a){var c=this.connectable;a=new e(a,this);var d=c.subscribe(a);d.isUnsubscribed||1!==++this.refCount||(a.connection=this.connection=c.connect());return d};return d}(b.Observable),e=function(a){function d(d,e){a.call(this,
null);this.destination=d;this.refCountObservable=e;this.connection=e.connection;d.add(this)}h(d,a);d.prototype._next=function(a){this.destination.next(a)};d.prototype._error=function(a){this._resetConnectable();this.destination.error(a)};d.prototype._complete=function(){this._resetConnectable();this.destination.complete()};d.prototype._resetConnectable=function(){var a=this.refCountObservable,c=a.connection,d=this.connection;d&&d===c&&(a.refCount=0,c.unsubscribe(),a.connection=null,this.unsubscribe())};
d.prototype._unsubscribe=function(){var a=this.refCountObservable;if(0!==a.refCount&&0===--a.refCount){var c=a.connection,d=this.connection;d&&d===c&&(c.unsubscribe(),a.connection=null)}};return d}(k.Subscriber)},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(l,f){a.call(this);this.error=l;this.scheduler=f}h(b,a);b.create=function(a,f){return new b(a,
f)};b.dispatch=function(a){a.subscriber.error(a.error)};b.prototype._subscribe=function(a){var f=this.error,e=this.scheduler;if(e)return e.schedule(b.dispatch,0,{error:f,subscriber:a});a.error(f)};return b}(a(1).Observable);g.ErrorObservable=b},function(b,g,a){var h=a(31),k=a(12),m=a(19);g.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;m.isScheduler(a[a.length-1])&&(b=a.pop());return(new k.ArrayObservable(a,b)).lift(new h.MergeAllOperator(1))}},function(b,g,a){var h=
function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.filter=function(a,c){return this.lift(new l(a,c))};var l=function(){function a(c,d){this.select=c;this.thisArg=d}a.prototype.call=function(a){return new f(a,this.select,this.thisArg)};return a}(),f=function(a){function c(c,b,f){a.call(this,c);this.select=b;this.thisArg=f;this.count=0;this.select=b}h(c,a);c.prototype._next=
function(a){var c=k.tryCatch(this.select).call(this.thisArg||this,a,this.count++);c===m.errorObject?this.destination.error(m.errorObject.e):Boolean(c)&&this.destination.next(a)};return c}(b.Subscriber)},function(b,g,a){var h=function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.map=function(a,c){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
return this.lift(new l(a,c))};var l=function(){function a(c,d){this.project=c;this.thisArg=d}a.prototype.call=function(a){return new f(a,this.project,this.thisArg)};return a}(),f=function(a){function c(c,b,f){a.call(this,c);this.project=b;this.thisArg=f;this.count=0}h(c,a);c.prototype._next=function(a){a=k.tryCatch(this.project).call(this.thisArg||this,a,this.count++);a===m.errorObject?this.error(m.errorObject.e):this.destination.next(a)};return c}(b.Subscriber)},function(b,g,a){var h=a(12),k=a(31),
m=a(19);g.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var b=Number.POSITIVE_INFINITY,e=null,c=a[a.length-1];m.isScheduler(c)?(e=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(b=a.pop())):"number"===typeof c&&(b=a.pop());return 1===a.length?a[0]:(new h.ArrayObservable(a,e)).lift(new k.MergeAllOperator(b))}},function(b,g,a){var h=function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)},k=a(4),m=a(3),l=a(6);b=a(5);a=function(){function a(c,d,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.project=c;this.resultSelector=d;this.concurrent=e}a.prototype.call=function(a){return new f(a,this.project,this.resultSelector,this.concurrent)};return a}();g.MergeMapOperator=a;var f=function(a){function c(c,b,f,l){void 0===l&&(l=Number.POSITIVE_INFINITY);a.call(this,c);this.project=b;this.resultSelector=f;this.concurrent=l;this.hasCompleted=!1;this.buffer=[];
this.index=this.active=0}h(c,a);c.prototype._next=function(a){if(this.active<this.concurrent){var c=this.index++,e=k.tryCatch(this.project)(a,c),b=this.destination;e===m.errorObject?b.error(m.errorObject.e):(this.active++,this._innerSub(e,a,c))}else this.buffer.push(a)};c.prototype._innerSub=function(a,c,e){this.add(l.subscribeToResult(this,a,c,e))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,
c,e,b){var f=this.destination,l=this.resultSelector;l?(a=k.tryCatch(l)(a,c,e,b),a===m.errorObject?f.error(m.errorObject.e):f.next(a)):f.next(c)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(b.OuterSubscriber);g.MergeMapSubscriber=f},function(b,g,a){var h=function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=
null===c?Object.create(c):(d.prototype=c.prototype,new d)},k=a(4),m=a(3);b=a(5);var l=a(6);a=function(){function a(c,d,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.ish=c;this.resultSelector=d;this.concurrent=e}a.prototype.call=function(a){return new f(a,this.ish,this.resultSelector,this.concurrent)};return a}();g.MergeMapToOperator=a;var f=function(a){function c(c,b,f,l){void 0===l&&(l=Number.POSITIVE_INFINITY);a.call(this,c);this.ish=b;this.resultSelector=f;this.concurrent=l;this.hasCompleted=
!1;this.buffer=[];this.index=this.active=0}h(c,a);c.prototype._next=function(a){if(this.active<this.concurrent){var c=this.resultSelector,e=this.index++,b=this.ish,f=this.destination;this.active++;this._innerSub(b,f,c,a,e)}else this.buffer.push(a)};c.prototype._innerSub=function(a,c,e,b,f){this.add(l.subscribeToResult(this,a,b,f))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,c,e,b){var f=
this.resultSelector,l=this.destination;f?(a=k.tryCatch(f)(a,c,e,b),a===m.errorObject?l.error(m.errorObject.e):l.next(a)):l.next(c)};c.prototype.notifyError=function(a){this.destination.error(a)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(b.OuterSubscriber);g.MergeMapToSubscriber=f},function(b,g,a){var h=a(12),k=a(295),m=a(14);g.race=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1===a.length)if(m.isArray(a[0]))a=a[0];else return a[0];return(new h.ArrayObservable(a)).lift(new k.RaceOperator)}},function(b,g,a){var h=a(12),k=a(82);g.zip=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];"function"===typeof b&&a.pop();return(new h.ArrayObservable(a)).lift(new k.ZipOperator(b))}},function(b,g,a){var h=function(a,c){function d(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=
c[e]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},k=a(14);b=a(2);var m=a(4),l=a(3),f=a(5),e=a(6),c=a(27);a=function(){function a(c){this.project=c}a.prototype.call=function(a){return new d(a,this.project)};return a}();g.ZipOperator=a;var d=function(a){function d(c,e,b){void 0===b&&(b=Object.create(null));a.call(this,c);this.index=0;this.iterators=[];this.active=0;this.project="function"===typeof e?e:null;this.values=b}h(d,a);d.prototype._next=function(a){var d=this.iterators,
e=this.index++;k.isArray(a)?d.push(new r(a)):"function"===typeof a[c.SymbolShim.iterator]?d.push(new n(a[c.SymbolShim.iterator]())):d.push(new u(this.destination,this,a,e))};d.prototype._complete=function(){var a=this.iterators,c=a.length;this.active=c;for(var d=0;d<c;d++){var e=a[d];e.stillUnsubscribed?this.add(e.subscribe(e,d)):this.active--}};d.prototype.notifyInactive=function(){this.active--;0===this.active&&this.destination.complete()};d.prototype.checkIterators=function(){for(var a=this.iterators,
c=a.length,d=this.destination,e=0;e<c;e++){var b=a[e];if("function"===typeof b.hasValue&&!b.hasValue())return}for(var f=!1,n=[],e=0;e<c;e++){var b=a[e],r=b.next();b.hasCompleted()&&(f=!0);if(r.done){d.complete();return}n.push(r.value)}(a=this.project)?(r=m.tryCatch(a).apply(this,n),r===l.errorObject?d.error(l.errorObject.e):d.next(r)):d.next(n);f&&d.complete()};return d}(b.Subscriber);g.ZipSubscriber=d;var n=function(){function a(c){this.iterator=c;this.nextResult=c.next()}a.prototype.hasValue=function(){return!0};
a.prototype.next=function(){var a=this.nextResult;this.nextResult=this.iterator.next();return a};a.prototype.hasCompleted=function(){var a=this.nextResult;return a&&a.done};return a}(),r=function(){function a(c){this.array=c;this.length=this.index=0;this.length=c.length}a.prototype[c.SymbolShim.iterator]=function(){return this};a.prototype.next=function(a){a=this.index++;var c=this.array;return a<this.length?{value:c[a],done:!1}:{done:!0}};a.prototype.hasValue=function(){return this.array.length>
this.index};a.prototype.hasCompleted=function(){return this.array.length===this.index};return a}(),u=function(a){function d(c,e,b,f){a.call(this,c);this.parent=e;this.observable=b;this.index=f;this.stillUnsubscribed=!0;this.buffer=[];this.isComplete=!1}h(d,a);d.prototype[c.SymbolShim.iterator]=function(){return this};d.prototype.next=function(){var a=this.buffer;return 0===a.length&&this.isComplete?{done:!0}:{value:a.shift(),done:!1}};d.prototype.hasValue=function(){return 0<this.buffer.length};d.prototype.hasCompleted=
function(){return 0===this.buffer.length&&this.isComplete};d.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()};d.prototype.notifyNext=function(a,c,d,e){this.buffer.push(c);this.parent.checkIterators()};d.prototype.subscribe=function(a,c){return e.subscribeToResult(this,this.observable,this,c)};return d}(f.OuterSubscriber)},function(b,g,a){var h=a(334),k=a(50);b=function(){function a(){this.active=!1;this.actions=
[];this.scheduledId=null}a.prototype.now=function(){return Date.now()};a.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var a=this.actions,b=void 0;b=a.shift();)b.execute();this.active=!1}};a.prototype.schedule=function(a,b,e){void 0===b&&(b=0);return 0>=b?this.scheduleNow(a,e):this.scheduleLater(a,b,e)};a.prototype.scheduleNow=function(a,b){return(new h.QueueAction(this,a)).schedule(b)};a.prototype.scheduleLater=function(a,b,e){return(new k.FutureAction(this,a)).schedule(e,
b)};return a}();g.QueueScheduler=b},function(b,g,a){b=a(83);g.queue=new b.QueueScheduler},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(10);var k=a(91),m=a(88);a=function(a){function b(e){a.call(this);this._value=e}h(b,a);b.prototype.getValue=function(){if(this.hasErrored)k.throwError(this.errorValue);else if(this.isUnsubscribed)k.throwError(new m.ObjectUnsubscribedError);
else return this._value};Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});b.prototype._subscribe=function(e){var c=a.prototype._subscribe.call(this,e);c&&!c.isUnsubscribed&&e.next(this._value);return c};b.prototype._next=function(e){a.prototype._next.call(this,this._value=e)};b.prototype._error=function(e){this.hasErrored=!0;a.prototype._error.call(this,this.errorValue=e)};return b}(b.Subject);g.BehaviorSubject=a},function(b,g,a){var h=
function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};b=a(10);var k=a(84),m=a(49);a=function(a){function e(c,d,e){void 0===c&&(c=Number.POSITIVE_INFINITY);void 0===d&&(d=Number.POSITIVE_INFINITY);a.call(this);this.events=[];this.scheduler=e;this.bufferSize=1>c?1:c;this.windowSize=1>d?1:d}h(e,a);e.prototype._next=function(c){var d=this._getNow();this.events.push(new l(d,c));this._trimBufferThenGetEvents(d);
a.prototype._next.call(this,c)};e.prototype._subscribe=function(c){var d=this._trimBufferThenGetEvents(this._getNow()),e=this.scheduler;e&&c.add(c=new m.ObserveOnSubscriber(c,e));for(var e=-1,b=d.length;++e<b&&!c.isUnsubscribed;)c.next(d[e].value);return a.prototype._subscribe.call(this,c)};e.prototype._getNow=function(){return(this.scheduler||k.queue).now()};e.prototype._trimBufferThenGetEvents=function(a){for(var d=this.bufferSize,e=this.windowSize,b=this.events,f=b.length,l=0;l<f&&!(a-b[l].time<
e);)l+=1;f>d&&(l=Math.max(l,f-d));0<l&&b.splice(0,l);return b};return e}(b.Subject);g.ReplaySubject=a;var l=function(){return function(a,e){this.time=a;this.value=e}}()},function(b,g){var a=function(){return function(){this.name="ArgumentOutOfRangeError";this.message="argument out of range"}}();g.ArgumentOutOfRangeError=a},function(b,g){var a=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,
new l)},h=function(b){function m(){b.call(this,"object unsubscribed");this.name="ObjectUnsubscribedError"}a(m,b);return m}(Error);g.ObjectUnsubscribedError=h},function(b,g){g.isFunction=function(a){return"function"===typeof a}},function(b,g){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};g.isObject=function(b){return null!=b&&"object"===("undefined"===typeof b?
"undefined":a(b))}},function(b,g){g.throwError=function(a){throw a;}},function(b,g,a){function h(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}function k(a){if("number"==typeof a)return a;for(var c=0,d=void 0,e=0;e<a.length;e++)d=a[e],c=(c<<5)-c+d,c&=c;return c}function m(a){if(!O||!N||K())return null;var c=U;return(a=y(a,function(a){return a.type!==O.type||a.persistentLicense&&"required"!=c.persistentState||a.distinctiveIdentifierRequired&&"required"!=c.distinctiveIdentifier?
!1:!0}))?{keySystem:a,keySystemAccess:new J(O,N,U)}:null}function l(a){var c=["temporary"],d="optional",e="optional";a.persistentLicense&&(d="required",c.push("persistent-license"));a.persistentStateRequired&&(d="required");a.distinctiveIdentifierRequired&&(e="required");return{videoCapabilities:void 0,audioCapabilities:void 0,initDataTypes:["cenc"],distinctiveIdentifier:e,persistentState:d,sessionTypes:c}}function f(a){var c=m(a);if(c)return p.debug("eme: found compatible keySystem quickly",c),A.of(c);
var d=z(a.map(function(a){return R[a.type].map(function(c){return{keyType:c,keySystem:a}})}));return A.create(function(a){function c(f){if(!e)if(f>=d.length)a.onError(P());else{var n=d[f],r=n.keyType,m=n.keySystem,k=[l(m)];p.debug("eme: request keysystem access "+r+","+(f+1+" of "+d.length),k);b=H(r,k).subscribe(function(c){p.info("eme: found compatible keysystem",r,k);a.next({keySystem:m,keySystemAccess:c});a.complete()},function(){p.debug("eme: rejected access to keysystem",r,k);b=null;c(f+1)})}}
var e=!1,b=null;c(0);(function(){e=!0;b&&b.unsubscribe()})})}function e(a,c,d){var e=W,b=N;return C(d.createMediaKeys()).flatMap(function(f){N=f;U=d.getConfiguration();O=c;W=a;if(a.mediaKeys===f)return A.of(f);b&&b!==N&&E.dispose();var n=void 0;e&&e!==W?(p.debug("eme: unlink old video element and set mediakeys"),n=G(e,null).concat(G(W,f))):(p.debug("eme: set mediakeys"),n=G(W,f));return n.mapTo(f)})}function c(a,c){p.debug("eme: create a new "+c+" session");return a.createSession(c)}function d(a,
d,e,b,f){var n=c(a,e);E.add(f,n,d);p.debug("eme: generate request",b,f);return C(n.generateRequest(b,f))["do"](function(){"persistent-license"==e&&F.add(f,n)}).mapTo(n)}function n(a,d,e,b,f){p.debug("eme: load persisted session",e);var n=c(a,"persistent-license");return C(n.load(e)).map(function(a){a?(F.add(f,n,d),E.add(f,n)):(p.warn("eme: no data stored for the loaded session, removing it",e),C(n.remove())["catch"](function(a){return p.warn("eme: could not remove session",a)}),F["delete"](f),E.deleteById(e));
return{success:a,session:n}})["catch"](function(a){F["delete"](f);E.deleteById(e);throw a;})}function r(a,c,e,b,f){return d(a,c,e,b,f)["catch"](function(n){var l=E.getFirst();if(!l)throw n;p.warn("eme: could not create a new session, retry after closing a currently loaded session",n);return E.deleteAndClose(l).flatMap(function(){return d(a,c,e,b,f)})})}function u(a,c,e,d,b){return n(a,c,e,d,b)["catch"](function(f){p.warn("eme: failed to load persisted session, do fallback",e,f);return r(a,c,"persistent-license",
d,b).map(function(a){return{success:!0,session:a}})}).flatMap(function(e){var f=e.session;return e.success?(p.debug("eme: successfully loaded session"),A.of(f)):r(a,c,"persistent-license",d,b)})}function x(a,c){p.debug("eme: handle message events for session",a.sessionId);var e=void 0,d=L(a).map(function(a){return t("eme: keyerror event "+a.errorCode+" / "+a.systemCode,a)}),b=T(a).flatMap(function(d){e=d.sessionId;p.debug("eme: keystatuseschange event",e,a,d);a.keyStatuses.forEach(function(a,c){var e=
S[c]||S[a];e&&t(e)});if(!c.onKeyStatusesChange)return p.warn("eme: keystatuseschange event not handled"),B();var b=void 0;try{b=c.onKeyStatusesChange(d,a)}catch(f){b=A["throw"](f)}return C(b)["catch"](function(a){return t("eme: onKeyStatusesChange has failed "+("(reason:"+(a&&a.message||"unknown")+")"),a)})}),f=I(a).flatMap(function(d){e=d.sessionId;var b=new Uint8Array(d.message),f=d.messageType||"license-request";p.debug("eme: event message type "+f,a,d);d=void 0;try{d=c.getLicense(b,f)}catch(n){d=
A["throw"](n)}return C(d)["catch"](function(a){return t("eme: getLicense has failed "+("(reason: "+(a&&a.message||"unknown")+")"),a)})}),b=D(f,b).concatMap(function(c){p.debug("eme: update session",e,c);return C(a.update(c,e))["catch"](function(a){return t("eme: error on session update "+e,a)})}),d=D(b,d);return a.closed?d.takeUntil(C(a.closed)):d}function t(a,c){var d=Error(a);c&&(d.reason=c);p.error(a,c);throw d;}function q(a,c){function d(c,b){var f=b.keySystem,n=b.keySystemAccess;f.persistentLicense&&
F.setStorage(f.licenseStorage);p.info("eme: encrypted event",c);return e(a,f,n).flatMap(function(a){a:{var d=n.getConfiguration(),e=c.initDataType,b=new Uint8Array(c.initData),l=E.get(b);if(l&&l.sessionId)p.debug("eme: reuse loaded session",l.sessionId),a=A.of(l);else{d=(l=(d=d.sessionTypes)&&0<=d.indexOf("persistent-license"))&&f.persistentLicense?"persistent-license":"temporary";if(l&&f.persistentLicense&&(l=F.get(b))){a=u(a,f,l.sessionId,e,b);break a}a=r(a,f,d,e,b)}}return a})}return v(M(a),f(c)).take(1).flatMap(function(a){return d(a[0],
a[1])})}var p=a(13),w=a(7),y=a(29),z=a(43),C=a(96),A=a(8).Observable,v=A.combineLatest,B=A.empty,D=A.merge;g=a(20);var J=g.KeySystemAccess,H=g.requestMediaKeySystemAccess,G=g.setMediaKeys;a=g.emeEvents;var K=g.shouldRenewMediaKeys,M=a.onEncrypted,I=a.onKeyMessage,L=a.onKeyError,T=a.onKeyStatusesChange,R={clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.youtube.playready","com.microsoft.playready"]},S={expired:"eme: a required key has expired and the content cannot be decrypted.",
"internal-error":"eme: an unknown error has occurred in the CDM."},P=function(){Error("eme: could not find a compatible key system")};g=function(){function a(){h(this,a);this._entries=[]}a.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};a.prototype.get=function(a){a=k(a);var c=y(this._entries,function(c){return c.initData===a});if(c)return c.session};a.prototype.add=function(a,c,d){a=k(a);var e=this.get(a);e&&this.deleteAndClose(e);d=x(c,d)["finally"](function(){F["delete"](a);
E.deleteAndClose(c)}).subscribe(null);d={session:c,initData:a,eventSubscription:d};p.debug("eme-mem-store: add session",d);this._entries.push(d)};a.prototype.deleteById=function(a){var c=y(this._entries,function(c){return c.session.sessionId===a});return c?this["delete"](c.session):null};a.prototype["delete"]=function(a){var c=y(this._entries,function(c){return c.session===a});if(c){p.debug("eme-mem-store: delete session",c);var d=this._entries.indexOf(c);this._entries.splice(d,1);c.eventSubscription.unsubscribe();
return c.session}};a.prototype.deleteAndClose=function(a){return(a=this["delete"](a))&&a.sessionId?(p.debug("eme-mem-store: close session",a),C(a.close())["catch"](function(){return A.of(null)})):A.of(null)};a.prototype.dispose=function(){var a=this,c=this._entries.map(function(c){return a.deleteAndClose(c.session)});this._entries=[];return D.apply(null,c)};return a}();var F=new (function(){function a(c){h(this,a);this.setStorage(c)}a.prototype.setStorage=function(a){if(this._storage!==a){w(a,"eme: no licenseStorage given for keySystem with persistentLicense");
w.iface(a,"licenseStorage",{save:"function",load:"function"});this._storage=a;try{this._entries=this._storage.load(),w(Array.isArray(this._entries))}catch(c){p.warn("eme-persitent-store: could not get entries from license storage",c),this.dispose()}}};a.prototype.get=function(a){a=k(a);return y(this._entries,function(c){return c.initData===a})||null};a.prototype.add=function(a,c){var d=c&&c.sessionId;d&&(a=k(a),this.get(a)&&this["delete"](a),p.info("eme-persitent-store: add new session",d,c),this._entries.push({sessionId:d,
initData:a}),this._save())};a.prototype["delete"]=function(a){a=k(a);var c=y(this._entries,function(c){return c.initData===a});c&&(p.warn("eme-persitent-store: delete session from store",c),c=this._entries.indexOf(c),this._entries.splice(c,1),this._save())};a.prototype.dispose=function(){this._entries=[];this._save()};a.prototype._save=function(){try{this._storage.save(this._entries)}catch(a){p.warn("eme-persitent-store: could not save licenses in localStorage")}};return a}())({load:function(){return[]},
save:function(){}}),E=new g,N=void 0,U=void 0,O=void 0,W=void 0;q.onEncrypted=M;q.getCurrentKeySystem=function(){return O&&O.type};q.dispose=function(){O=N=null;E.dispose()};b.exports=q},function(b,g,a){function h(a){this.name="OutOfIndexError";this.type=a;this.message="out of range in index "+a}function k(a){switch(a.indexType){case "template":return f;case "timeline":return e;case "list":return c;case "base":return d;default:throw Error("index-handler: unrecognized indexType "+a.indexType);}}a(7);
var m=a(53).getAdaptationsByType,l=a(33).InitSegment,f=a(351),e=a(94),c=a(350),d=a(349);h.prototype=Error();g=function(){function a(c,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=c;this.representation=d;this.index=d.index;this.handler=new (k(this.index))(c,d,this.index)}a.prototype.getInitSegment=function(){var a=this.index.initialization||{};return new l(this.adaptation,this.representation,a.media,a.range,this.index.indexRange)};a.prototype.normalizeRange=
function(a,c,d){var e=this.index.presentationTimeOffset||0,b=this.index.timescale||1;c||(c=0);d||(d=0);c=Math.min(c,d);return{time:a*b-e,up:(a+c)*b-e,to:(a+d)*b-e}};a.prototype.getSegments=function(a,c,d){a=this.normalizeRange(a,c,d);c=a.up;d=a.to;if(!this.handler.checkRange(a.time))throw new h(this.index.indexType);return this.handler.getSegments(c,d)};a.prototype.insertNewSegments=function(a,c){for(var d=[],e=0;e<a.length;e++)this.handler.addSegment(a[e],c)&&d.push(a[e]);return d};a.prototype.setTimescale=
function(a){var c=this.index;return c.timescale!==a?(c.timescale=a,!0):!1};a.prototype.scale=function(a){return a/this.index.timescale};return a}();b.exports={OutOfIndexError:h,IndexHandler:g,getLiveEdge:function(a){var c=m(a,"video")[0].representations[0].index;return k(c).getLiveEdge(c,a)}}},function(b,g,a){function h(a){var b=a.ts,f=a.d;a=a.r;return-1===f?b:b+(a+1)*f}var k=a(33).Segment;g=function(){function a(b,f,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=b;this.representation=f;this.index=e;this.timeline=e.timeline}a.getLiveEdge=function(a,b){var e=h(a.timeline[a.timeline.length-1])/a.timescale-b.suggestedPresentationDelay;return Math.max(a.timeline[0].ts/a.timescale+1,e)};a.prototype.createSegment=function(a,b,e){return k.create(this.adaptation,this.representation,a,this.index.media,a,e,0,b,null,!1)};a.prototype.calculateRepeat=function(a,b){var e=a.r||0;0>e&&(e=Math.ceil(((b?b.t:Infinity)-a.ts)/a.d)-1);return e};a.prototype.checkRange=
function(a){var b=this.timeline[this.timeline.length-1];if(!b)return!0;0>b.d&&(b={ts:b.ts,d:0,r:b.r});return a<=h(b)};a.prototype.getSegmentIndex=function(a){for(var b=this.timeline,e=0,c=b.length;e<c;){var d=e+c>>>1;b[d].ts<a?e=d+1:c=d}return 0<e?e-1:e};a.prototype.getSegmentNumber=function(a,b,e){a=b-a;return 0<a?Math.floor(a/e):0};a.prototype.getSegments=function(a,b){var e=this.index.timeline,c=[],d=e.length,n=this.getSegmentIndex(a)-1,k=e.length&&e[0].d||0;a:for(;!(++n>=d);){var m=e[n],g=m.d,
h=m.ts,q=m.range,k=Math.max(k,g);if(0>g){h+k<b&&c.push(this.createSegment(h,q,void 0));break}for(var m=this.calculateRepeat(m,e[n+1]),p=this.getSegmentNumber(h,a,g),w=void 0;(w=h+p*g)<b;)if(p++<=m)c.push(this.createSegment(w,q,g));else continue a;break}return c};a.prototype.addSegment=function(a,b){var e=this.timeline,c=e.length,d=e[c-1];if(b&&a.ts===b.ts){var n=a.ts+a.d,k=n-(d.ts+d.d*d.r);if(0>=k)return!1;-1===d.d&&((c=e[c-2])&&c.d===k?(c.r++,e.pop()):d.d=k);e.push({d:-1,ts:n,r:0});return!0}return a.ts>=
h(d)?(d.d===a.d?d.r++:e.push({d:a.d,ts:a.ts,r:0}),!0):!1};return a}();b.exports=g},function(b,g,a){function h(a,c){var d=a.currentTime,b=new l(a.buffered);return new f(d,b,a.duration,b.getGap(d),c,a.playbackRate,b.getRange(d),a.readyState,null)}g=a(8);var k=g.Observable,m=g.BehaviorSubject,l=a(32).BufferedRanges,f=function(){function a(c,d,b,f,l,k,m,g,h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ts=c;this.buffered=d;this.duration=b;this.gap=f;this.name=
l;this.playback=k;this.range=m;this.readyState=g;this.stalled=h}a.prototype.clone=function(){return new a(this.ts,this.buffered,this.duration,this.gap,this.name,this.playback,this.range,this.readyState,this.stalled)};return a}();b.exports={getEmptyTimings:function(){return new f(0,new l,0,Infinity,"timeupdate",1,null,0,null)},getTimings:h,timingsSampler:function(a){return k.create(function(c){function d(d){var f=b,l=d&&d.type||"timeupdate";d=h(a,l);var f=f.stalled,k=d.gap;if(l="loadedmetadata"!=l&&
!f)l=d.range,l=!(l&&.5>=d.duration-(k+l.end));var m=void 0,m=l&&(.5>=k||Infinity===k)?{name:d.name,playback:d.playback}:f&&Infinity>k&&k>("seeking"==f.name?.5:5)?null:f;d.stalled=m;b=d;c.next(b)}var b=h(a,"init"),f=setInterval(d,1E3);a.addEventListener("play",d);a.addEventListener("progress",d);a.addEventListener("seeking",d);a.addEventListener("seeked",d);a.addEventListener("loadedmetadata",d);c.next(b);return function(){clearInterval(f);a.removeEventListener("play",d);a.removeEventListener("progress",
d);a.removeEventListener("seeking",d);a.removeEventListener("seeked",d);a.removeEventListener("loadedmetadata",d)}}).multicast(function(){return new m({name:"init",stalled:null})}).refCount()},seekingsSampler:function(a){return a.filter(function(a){return"seeking"==a.name&&(Infinity===a.gap||-2>a.gap)}).skip(1).startWith(!0)},getLiveGap:function(a,c){if(!c.isLive)return Infinity;var d=c.availabilityStartTime,b=c.presentationLiveGap;return Date.now()/1E3-a-(d+b+10)},toWallClockTime:function(a,c){return new Date(1E3*
(a+c.availabilityStartTime))},fromWallClockTime:function(a,c){var d=a,b=c.suggestedPresentationDelay,f=c.presentationLiveGap,l=c.timeShiftBufferDepth;"number"!=typeof d&&(d=d.getTime());var k=Date.now();return Math.max(Math.min(d,k-1E3*(f+b)),k-1E3*l)/1E3-c.availabilityStartTime}}},function(b,g,a){var h=a(8).Observable,k=h.fromPromise;b.exports=function(a){return a&&"function"==typeof a.subscribe?a:a&&"function"==typeof a.then?k(a):h.of(a)}},function(b,g){b.exports=function(a){var b=a?a.length:0;
return b?a[b-1]:void 0}},function(b,g,a){g=a(107);a=a(64)(g,!0);b.exports=a},function(b,g){b.exports=function(a,b){for(var k=-1,m=b.length,l=a.length;++k<m;)a[l+k]=b[k];return a}},function(b,g){b.exports=function(a,b){for(var k=-1,m=a.length;++k<m;)if(b(a[k],k,a))return!0;return!1}},function(b,g){b.exports=function(a,b){return void 0===a?b:a}},function(b,g,a){var h=a(24);b.exports=function(a,b,l){for(var f=-1,e=h(b),c=e.length;++f<c;){var d=e[f],n=a[d],g=l(n,b[d],d,a,b);(g===g?g===n:n!==n)&&(void 0!==
n||d in a)||(a[d]=g)}return a}},function(b,g,a){var h=a(105),k=a(24);b.exports=function(a,b){return null==b?a:h(b,k(b),a)}},function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(117),m=a(118),l=a(61),f=a(71),e=a(135);b.exports=function(a,d,b){var g="undefined"===typeof a?"undefined":h(a);return"function"==g?void 0===d?a:l(a,d,b):null==a?f:"object"==
g?k(a):void 0===d?e(a):m(a,d)}},function(b,g){b.exports=function(a,b,k){k||(k={});for(var m=-1,l=b.length;++m<l;){var f=b[m];k[f]=a[f]}return k}},function(b,g,a){g=a(112);a=a(62)(g);b.exports=a},function(b,g,a){g=a(113);a=a(62)(g,!0);b.exports=a},function(b,g){b.exports=function(a,b,k,m){var l;k(a,function(a,e,c){if(b(a,e,c))return l=m?e:a,!1});return l}},function(b,g){b.exports=function(a,b,k){for(var m=a.length,l=k?m:-1;k?l--:++l<m;)if(b(a[l],l,a))return l;return-1}},function(b,g,a){function h(a,
d,b,g){g||(g=[]);for(var u=-1,x=a.length;++u<x;){var t=a[u];e(t)&&f(t)&&(b||l(t)||m(t))?d?h(t,d,b,g):k(g,t):b||(g[g.length]=t)}return g}var k=a(99),m=a(45),l=a(17),f=a(34),e=a(23);b.exports=h},function(b,g,a){g=a(63)();b.exports=g},function(b,g,a){var h=a(111),k=a(24);b.exports=function(a,b){return h(a,b,k)}},function(b,g,a){var h=a(114),k=a(24);b.exports=function(a,b){return h(a,b,k)}},function(b,g,a){g=a(63)(!0);b.exports=g},function(b,g,a){var h=a(124),k=a(125),m=a(126),l=a(17),f=a(131);g=Object.prototype;
var e=g.hasOwnProperty,c=g.toString;b.exports=function(a,b,g,u,x,t,q){var p=l(a),w=l(b),y="[object Array]",z="[object Array]";p||(y=c.call(a),"[object Arguments]"==y?y="[object Object]":"[object Object]"!=y&&(p=f(a)));w||(z=c.call(b),"[object Arguments]"==z?z="[object Object]":"[object Object]"!=z&&f(b));var C="[object Object]"==y,w="[object Object]"==z;if((z=y==z)&&!p&&!C)return k(a,b,y);if(!x&&(y=C&&e.call(a,"__wrapped__"),w=w&&e.call(b,"__wrapped__"),y||w))return g(y?a.value():a,w?b.value():b,
u,x,t,q);if(!z)return!1;t||(t=[]);q||(q=[]);for(y=t.length;y--;)if(t[y]==a)return q[y]==b;t.push(a);q.push(b);a=(p?h:m)(a,b,g,u,x,t,q);t.pop();q.pop();return a}},function(b,g,a){var h=a(59),k=a(16);b.exports=function(a,b,f){var e=b.length,c=e,d=!f;if(null==a)return!c;for(a=k(a);e--;){var n=b[e];if(d&&n[2]?n[1]!==a[n[0]]:!(n[0]in a))return!1}for(;++e<c;){var n=b[e],g=n[0],u=a[g],x=n[1];if(d&&n[2]){if(void 0===u&&!(g in a))return!1}else if(n=f?f(u,x,g):void 0,void 0===n?!h(x,u,f,!0):!n)return!1}return!0}},
function(b,g,a){var h=a(116),k=a(127),m=a(16);b.exports=function(a){var b=k(a);if(1==b.length&&b[0][2]){var e=b[0][0],c=b[0][1];return function(a){return null==a?!1:a[e]===c&&(void 0!==c||e in m(a))}}return function(a){return h(a,b)}}},function(b,g,a){var h=a(58),k=a(59),m=a(120),l=a(17),f=a(68),e=a(69),c=a(97),d=a(16),n=a(70);b.exports=function(a,b){var g=l(a),t=f(a)&&e(b),q=a+"";a=n(a);return function(e){if(null==e)return!1;var f=q;e=d(e);if(!(!g&&t||f in e)){e=1==a.length?e:h(e,m(a,0,-1));if(null==
e)return!1;f=c(a);e=d(e)}return e[f]===b?void 0!==b||f in e:k(b,e[f],void 0,!0)}}},function(b,g,a){var h=a(58),k=a(70);b.exports=function(a){var b=a+"";a=k(a);return function(f){return h(f,a,b)}}},function(b,g){b.exports=function(a,b,k){var g=-1,l=a.length;b=null==b?0:+b||0;0>b&&(b=-b>l?0:l+b);k=void 0===k||k>l?l:+k||0;0>k&&(k+=l);l=b>k?0:k-b>>>0;b>>>=0;for(k=Array(l);++g<l;)k[g]=a[g+b];return k}},function(b,g){b.exports=function(a){return null==a?"":a+""}},function(b,g,a){var h=a(61),k=a(67),m=a(57);
b.exports=function(a){return m(function(b,e){var c=-1,d=null==b?0:e.length,n=2<d?e[d-2]:void 0,g=2<d?e[2]:void 0,m=1<d?e[d-1]:void 0;"function"==typeof n?(n=h(n,m,5),d-=2):(n="function"==typeof m?m:void 0,d-=n?1:0);g&&k(e[0],e[1],g)&&(n=3>d?void 0:n,d=1);for(;++c<d;)(g=e[c])&&a(b,g,n);return b})}},function(b,g,a){var h=a(57);b.exports=function(a,b){return h(function(l){var f=l[0];if(null==f)return f;l.push(b);return a.apply(void 0,l)})}},function(b,g,a){var h=a(100);b.exports=function(a,b,l,f,e,c,
d){var n=-1,g=a.length,u=b.length;if(g!=u&&!(e&&u>g))return!1;for(;++n<g;){var x=a[n],u=b[n],t=f?f(e?u:x,e?x:u,n):void 0;if(void 0!==t){if(t)continue;return!1}if(e){if(!h(b,function(a){return x===a||l(x,a,f,e,c,d)}))return!1}else if(x!==u&&!l(x,u,f,e,c,d))return!1}return!0}},function(b,g){b.exports=function(a,b,g){switch(g){case "[object Boolean]":case "[object Date]":return+a==+b;case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object Number]":return a!=+a?b!=+b:a==+b;case "[object RegExp]":case "[object String]":return a==
b+""}return!1}},function(b,g,a){var h=a(24),k=Object.prototype.hasOwnProperty;b.exports=function(a,b,f,e,c,d,n){var g=h(a),u=g.length,x=h(b).length;if(u!=x&&!c)return!1;for(x=u;x--;){var t=g[x];if(!(c?t in b:k.call(b,t)))return!1}for(var q=c;++x<u;){var t=g[x],p=a[t],w=b[t],y=e?e(c?w:p,c?p:w,t):void 0;if(void 0===y?!f(p,w,e,c,d,n):!y)return!1;q||(q="constructor"==t)}return q||(f=a.constructor,e=b.constructor,!(f!=e&&"constructor"in a&&"constructor"in b)||"function"==typeof f&&f instanceof f&&"function"==
typeof e&&e instanceof e)?!0:!1}},function(b,g,a){var h=a(69),k=a(134);b.exports=function(a){a=k(a);for(var b=a.length;b--;)a[b][2]=h(a[b][1]);return a}},function(b,g,a){var h=a(45),k=a(17),m=a(44),l=a(22),f=a(133),e=Object.prototype.hasOwnProperty;b.exports=function(a){for(var b=f(a),n=b.length,g=n&&a.length,u=!!g&&l(g)&&(k(a)||h(a)),x=-1,t=[];++x<n;){var q=b[x];(u&&m(q,g)||e.call(a,q))&&t.push(q)}return t}},function(b,g,a){var h=a(18),k=Object.prototype.toString;b.exports=function(a){return h(a)&&
"[object Function]"==k.call(a)}},function(b,g,a){var h=a(129),k=a(23),m=/^\[object .+?Constructor\]$/,l=Function.prototype.toString,f=RegExp("^"+l.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=function(a){return null==a?!1:h(a)?f.test(l.call(a)):k(a)&&m.test(a)}},function(b,g,a){var h=a(22),k=a(23),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=
m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0;m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1;var l=Object.prototype.toString;b.exports=
function(a){return k(a)&&h(a.length)&&!!m[l.call(a)]}},function(b,g,a){var h=a(102),k=a(103);g=a(122)(function(a,b,f){return f?h(a,b,f):k(a,b)});b.exports=g},function(b,g,a){var h=a(45),k=a(17),m=a(44),l=a(22),f=a(18),e=Object.prototype.hasOwnProperty;b.exports=function(a){if(null==a)return[];f(a)||(a=Object(a));for(var b=a.length,b=b&&l(b)&&(k(a)||h(a))&&b||0,n=a.constructor,g=-1,n="function"==typeof n&&n.prototype===a,u=Array(b),x=0<b;++g<b;)u[g]=g+"";for(var t in a)x&&m(t,b)||"constructor"==t&&
(n||!e.call(a,t))||u.push(t);return u}},function(b,g,a){var h=a(24),k=a(16);b.exports=function(a){a=k(a);for(var b=-1,f=h(a),e=f.length,c=Array(e);++b<e;){var d=f[b];c[b]=[d,a[d]]}return c}},function(b,g,a){var h=a(60),k=a(119),m=a(68);b.exports=function(a){return m(a)?h(a):k(a)}},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(l,f,e){a.call(this);
this.parent=l;this.outerValue=f;this.outerIndex=e;this.index=0}h(b,a);b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++)};b.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};b.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return b}(a(2).Subscriber);g.InnerSubscriber=b},function(b,g){g.empty={isUnsubscribed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},
function(b,g,a){var h=a(2);b=function(){function a(){}a.prototype.call=function(a){return new h.Subscriber(a)};return a}();g.Operator=b},function(b,g,a){b=a(1);a=a(240);b.Observable.bindCallback=a.BoundCallbackObservable.create},function(b,g,a){b=a(1);a=a(241);b.Observable.bindNodeCallback=a.BoundNodeCallbackObservable.create},function(b,g,a){b=a(1);a=a(242);b.Observable.defer=a.DeferObservable.create},function(b,g,a){b=a(1);a=a(25);b.Observable.empty=a.EmptyObservable.create},function(b,g,a){b=a(1);
a=a(243);b.Observable.forkJoin=a.ForkJoinObservable.create},function(b,g,a){b=a(1);a=a(244);b.Observable.from=a.FromObservable.create},function(b,g,a){b=a(1);a=a(12);b.Observable.fromArray=a.ArrayObservable.create;b.Observable.of=a.ArrayObservable.of},function(b,g,a){b=a(1);a=a(245);b.Observable.fromEvent=a.FromEventObservable.create},function(b,g,a){b=a(1);a=a(246);b.Observable.fromEventPattern=a.FromEventPatternObservable.create},function(b,g,a){b=a(1);a=a(47);b.Observable.fromPromise=a.PromiseObservable.create},
function(b,g,a){b=a(1);a=a(247);b.Observable.interval=a.IntervalObservable.create},function(b,g,a){b=a(1);a=a(248);b.Observable.never=a.InfiniteObservable.create},function(b,g,a){b=a(1);a=a(249);b.Observable.range=a.RangeObservable.create},function(b,g,a){b=a(1);a=a(73);b.Observable["throw"]=a.ErrorObservable.create},function(b,g,a){b=a(1);a=a(250);b.Observable.timer=a.TimerObservable.create},function(b,g,a){b=a(1);a=a(251);b.Observable.prototype.buffer=a.buffer},function(b,g,a){b=a(1);a=a(252);b.Observable.prototype.bufferCount=
a.bufferCount},function(b,g,a){b=a(1);a=a(253);b.Observable.prototype.bufferTime=a.bufferTime},function(b,g,a){b=a(1);a=a(254);b.Observable.prototype.bufferToggle=a.bufferToggle},function(b,g,a){b=a(1);a=a(255);b.Observable.prototype.bufferWhen=a.bufferWhen},function(b,g,a){b=a(1);a=a(256);b.Observable.prototype["catch"]=a._catch},function(b,g,a){b=a(1);a=a(257);b.Observable.prototype.combineAll=a.combineAll},function(b,g,a){b=a(1);a=a(258);b.Observable.combineLatest=a.combineLatest},function(b,g,
a){b=a(1);a=a(259);b.Observable.prototype.combineLatest=a.combineLatest},function(b,g,a){b=a(1);a=a(74);b.Observable.concat=a.concat},function(b,g,a){b=a(1);a=a(260);b.Observable.prototype.concat=a.concat},function(b,g,a){b=a(1);a=a(261);b.Observable.prototype.concatAll=a.concatAll},function(b,g,a){b=a(1);a=a(262);b.Observable.prototype.concatMap=a.concatMap},function(b,g,a){b=a(1);a=a(263);b.Observable.prototype.concatMapTo=a.concatMapTo},function(b,g,a){b=a(1);a=a(264);b.Observable.prototype.count=
a.count},function(b,g,a){b=a(1);a=a(265);b.Observable.prototype.debounce=a.debounce},function(b,g,a){b=a(1);a=a(266);b.Observable.prototype.debounceTime=a.debounceTime},function(b,g,a){b=a(1);a=a(267);b.Observable.prototype.defaultIfEmpty=a.defaultIfEmpty},function(b,g,a){b=a(1);a=a(268);b.Observable.prototype.delay=a.delay},function(b,g,a){b=a(1);a=a(269);b.Observable.prototype.dematerialize=a.dematerialize},function(b,g,a){b=a(1);a=a(270);b.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},
function(b,g,a){b=a(1);a=a(271);b.Observable.prototype["do"]=a._do},function(b,g,a){b=a(1);a=a(272);b.Observable.prototype.every=a.every},function(b,g,a){b=a(1);a=a(274);b.Observable.prototype.expand=a.expand},function(b,g,a){b=a(1);a=a(75);b.Observable.prototype.filter=a.filter},function(b,g,a){b=a(1);a=a(275);b.Observable.prototype["finally"]=a._finally},function(b,g,a){b=a(1);a=a(276);b.Observable.prototype.first=a.first},function(b,g,a){b=a(1);a=a(278);b.Observable.prototype.groupBy=a.groupBy},
function(b,g,a){b=a(1);a=a(279);b.Observable.prototype.ignoreElements=a.ignoreElements},function(b,g,a){b=a(1);a=a(280);b.Observable.prototype.last=a.last},function(b,g,a){b=a(1);a=a(281);b.Observable.prototype.let=a.letProto;b.Observable.prototype.letBind=a.letProto},function(b,g,a){b=a(1);a=a(76);b.Observable.prototype.map=a.map},function(b,g,a){b=a(1);a=a(282);b.Observable.prototype.mapTo=a.mapTo},function(b,g,a){b=a(1);a=a(283);b.Observable.prototype.materialize=a.materialize},function(b,g,a){b=
a(1);a=a(77);b.Observable.merge=a.merge},function(b,g,a){b=a(1);a=a(284);b.Observable.prototype.merge=a.merge},function(b,g,a){b=a(1);a=a(285);b.Observable.prototype.mergeAll=a.mergeAll},function(b,g,a){b=a(1);a=a(286);b.Observable.prototype.mergeMap=a.mergeMap;b.Observable.prototype.flatMap=a.mergeMap},function(b,g,a){b=a(1);a=a(287);b.Observable.prototype.mergeMapTo=a.mergeMapTo},function(b,g,a){b=a(1);a=a(26);b.Observable.prototype.multicast=a.multicast},function(b,g,a){b=a(1);a=a(288);b.Observable.prototype.observeOn=
a.observeOn},function(b,g,a){b=a(1);a=a(289);b.Observable.prototype.partition=a.partition},function(b,g,a){b=a(1);a=a(290);b.Observable.prototype.pluck=a.pluck},function(b,g,a){b=a(1);a=a(291);b.Observable.prototype.publish=a.publish},function(b,g,a){b=a(1);a=a(292);b.Observable.prototype.publishBehavior=a.publishBehavior},function(b,g,a){b=a(1);a=a(293);b.Observable.prototype.publishLast=a.publishLast},function(b,g,a){b=a(1);a=a(294);b.Observable.prototype.publishReplay=a.publishReplay},function(b,
g,a){b=a(1);a=a(80);b.Observable.race=a.race},function(b,g,a){b=a(1);a=a(296);b.Observable.prototype.race=a.race},function(b,g,a){b=a(1);a=a(298);b.Observable.prototype.reduce=a.reduce},function(b,g,a){b=a(1);a=a(299);b.Observable.prototype.repeat=a.repeat},function(b,g,a){b=a(1);a=a(300);b.Observable.prototype.retry=a.retry},function(b,g,a){b=a(1);a=a(301);b.Observable.prototype.retryWhen=a.retryWhen},function(b,g,a){b=a(1);a=a(302);b.Observable.prototype.sample=a.sample},function(b,g,a){b=a(1);
a=a(303);b.Observable.prototype.sampleTime=a.sampleTime},function(b,g,a){b=a(1);a=a(304);b.Observable.prototype.scan=a.scan},function(b,g,a){b=a(1);a=a(305);b.Observable.prototype.share=a.share},function(b,g,a){b=a(1);a=a(306);b.Observable.prototype.single=a.single},function(b,g,a){b=a(1);a=a(307);b.Observable.prototype.skip=a.skip},function(b,g,a){b=a(1);a=a(308);b.Observable.prototype.skipUntil=a.skipUntil},function(b,g,a){b=a(1);a=a(309);b.Observable.prototype.skipWhile=a.skipWhile},function(b,
g,a){b=a(1);a=a(310);b.Observable.prototype.startWith=a.startWith},function(b,g,a){b=a(1);a=a(311);b.Observable.prototype.subscribeOn=a.subscribeOn},function(b,g,a){b=a(1);a=a(312);b.Observable.prototype["switch"]=a._switch},function(b,g,a){b=a(1);a=a(313);b.Observable.prototype.switchMap=a.switchMap},function(b,g,a){b=a(1);a=a(314);b.Observable.prototype.switchMapTo=a.switchMapTo},function(b,g,a){b=a(1);a=a(315);b.Observable.prototype.take=a.take},function(b,g,a){b=a(1);a=a(316);b.Observable.prototype.takeUntil=
a.takeUntil},function(b,g,a){b=a(1);a=a(317);b.Observable.prototype.takeWhile=a.takeWhile},function(b,g,a){b=a(1);a=a(318);b.Observable.prototype.throttle=a.throttle},function(b,g,a){b=a(1);a=a(319);b.Observable.prototype.throttleTime=a.throttleTime},function(b,g,a){b=a(1);a=a(320);b.Observable.prototype.timeout=a.timeout},function(b,g,a){b=a(1);a=a(321);b.Observable.prototype.timeoutWith=a.timeoutWith},function(b,g,a){b=a(1);a=a(322);b.Observable.prototype.toArray=a.toArray},function(b,g,a){b=a(1);
a=a(323);b.Observable.prototype.toPromise=a.toPromise},function(b,g,a){b=a(1);a=a(324);b.Observable.prototype.window=a.window},function(b,g,a){b=a(1);a=a(325);b.Observable.prototype.windowCount=a.windowCount},function(b,g,a){b=a(1);a=a(326);b.Observable.prototype.windowTime=a.windowTime},function(b,g,a){b=a(1);a=a(327);b.Observable.prototype.windowToggle=a.windowToggle},function(b,g,a){b=a(1);a=a(328);b.Observable.prototype.windowWhen=a.windowWhen},function(b,g,a){b=a(1);a=a(329);b.Observable.prototype.withLatestFrom=
a.withLatestFrom},function(b,g,a){b=a(1);a=a(81);b.Observable.zip=a.zip},function(b,g,a){b=a(1);a=a(330);b.Observable.prototype.zip=a.zipProto},function(b,g,a){b=a(1);a=a(331);b.Observable.prototype.zipAll=a.zipAll},function(b,g,a){var h=function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},k=a(15),m=a(90),l=a(4);b=a(1);var f=a(89),e=a(27),c=a(3);a=function(a){function b(c,l,g,k){a.call(this);
if(null==c)throw Error("iterator cannot be null.");if(m.isObject(l))this.thisArg=l,this.scheduler=g;else if(f.isFunction(l))this.project=l,this.thisArg=g,this.scheduler=k;else if(null!=l)throw Error("When provided, `project` must be a function.");if((l=c[e.SymbolShim.iterator])||"string"!==typeof c)if(l||void 0===c.length){if(!l)throw new TypeError("Object is not iterable");c=c[e.SymbolShim.iterator]()}else c=new n(c);else c=new d(c);this.iterator=c}h(b,a);b.create=function(a,c,d,e){return new b(a,
c,d,e)};b.dispatch=function(a){var b=a.index,d=a.thisArg,e=a.project,f=a.iterator,n=a.subscriber;a.hasError?n.error(a.error):(f=f.next(),f.done?n.complete():(e?(f=l.tryCatch(e).call(d,f.value,b),f===c.errorObject?(a.error=c.errorObject.e,a.hasError=!0):(n.next(f),a.index=b+1)):(n.next(f.value),a.index=b+1),n.isUnsubscribed||this.schedule(a)))};b.prototype._subscribe=function(a){var d=0,e=this.iterator,f=this.project,n=this.thisArg,g=this.scheduler;if(g)return g.schedule(b.dispatch,0,{index:d,thisArg:n,
project:f,iterator:e,subscriber:a});do{g=e.next();if(g.done){a.complete();break}else if(f){g=l.tryCatch(f).call(n,g.value,d++);if(g===c.errorObject){a.error(c.errorObject.e);break}a.next(g)}else a.next(g.value);if(a.isUnsubscribed)break}while(1)};return b}(b.Observable);g.IteratorObservable=a;var d=function(){function a(c,b,d){void 0===b&&(b=0);void 0===d&&(d=c.length);this.str=c;this.idx=b;this.len=d}a.prototype[e.SymbolShim.iterator]=function(){return this};a.prototype.next=function(){return this.idx<
this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),n=function(){function a(c,b,d){void 0===b&&(b=0);if(void 0===d)if(d=+c.length,isNaN(d))d=0;else if(0!==d&&"number"===typeof d&&k.root.isFinite(d)){var e;e=+d;e=0===e?e:isNaN(e)?e:0>e?-1:1;d=e*Math.floor(Math.abs(d));d=0>=d?0:d>r?r:d}this.arr=c;this.idx=b;this.len=d}a.prototype[e.SymbolShim.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:
{done:!0,value:void 0}};return a}(),r=Math.pow(2,53)-1},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(1);var k=a(11),m=a(51);a=function(a){function b(e,c,d){void 0===c&&(c=0);void 0===d&&(d=k.asap);a.call(this);this.source=e;this.delayTime=c;this.scheduler=d;if(!m.isNumeric(c)||0>c)this.delayTime=0;d&&"function"===typeof d.schedule||(this.scheduler=k.asap)}
h(b,a);b.create=function(a,c,d){void 0===c&&(c=0);void 0===d&&(d=k.asap);return new b(a,c,d)};b.dispatch=function(a){return a.source.subscribe(a.subscriber)};b.prototype._subscribe=function(a){return this.scheduler.schedule(b.dispatch,this.delayTime,{source:this.source,subscriber:a})};return b}(b.Observable);g.SubscribeOnObservable=a},function(b,g,a){function h(a){var b=this,l=a.source;a=a.subscriber;var g=l.callbackFunc,h=l.args,t=l.scheduler,q=l.subject;if(!q){var q=l.subject=new c.AsyncSubject,
p=function y(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=y.source,c=d.selector,d=d.subject;c?(a=f.tryCatch(c).apply(this,a),a===e.errorObject?b.add(t.schedule(m,0,{err:e.errorObject.e,subject:d})):b.add(t.schedule(k,0,{value:a,subject:d}))):b.add(t.schedule(k,0,{value:1===a.length?a[0]:a,subject:d}))};p.source=l;f.tryCatch(g).apply(this,h.concat(p))===e.errorObject&&q.error(e.errorObject.e)}b.add(q.subscribe(a))}function k(a){var c=a.subject;c.next(a.value);c.complete()}function m(a){a.subject.error(a.err)}
var l=function(a,c){function b(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};b=a(1);var f=a(4),e=a(3),c=a(36);a=function(a){function b(c,e,f,n){a.call(this);this.callbackFunc=c;this.selector=e;this.args=f;this.scheduler=n}l(b,a);b.create=function(a,c,d){void 0===c&&(c=void 0);return function(){for(var e=[],f=0;f<arguments.length;f++)e[f-0]=arguments[f];return new b(a,c,e,d)}};b.prototype._subscribe=function(a){var b=
this.callbackFunc,d=this.args,n=this.scheduler,l=this.subject;if(n)return n.schedule(h,0,{source:this,subscriber:a});l||(l=this.subject=new c.AsyncSubject,n=function w(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var b=w.source,c=b.selector,b=b.subject;c?(a=f.tryCatch(c).apply(this,a),a===e.errorObject?b.error(e.errorObject.e):(b.next(a),b.complete())):(b.next(1===a.length?a[0]:a),b.complete())},n.source=this,f.tryCatch(b).apply(this,d.concat(n))===e.errorObject&&l.error(e.errorObject.e));
return l.subscribe(a)};return b}(b.Observable);g.BoundCallbackObservable=a},function(b,g,a){function h(a){var b=this,l=a.source;a=a.subscriber;var g=l.callbackFunc,h=l.args,t=l.scheduler,q=l.subject;if(!q){var q=l.subject=new c.AsyncSubject,p=function y(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=y.source,c=d.selector,d=d.subject,l=a.shift();l?d.error(l):c?(a=f.tryCatch(c).apply(this,a),a===e.errorObject?b.add(t.schedule(m,0,{err:e.errorObject.e,subject:d})):b.add(t.schedule(k,
0,{value:a,subject:d}))):b.add(t.schedule(k,0,{value:1===a.length?a[0]:a,subject:d}))};p.source=l;f.tryCatch(g).apply(this,h.concat(p))===e.errorObject&&q.error(e.errorObject.e)}b.add(q.subscribe(a))}function k(a){var c=a.subject;c.next(a.value);c.complete()}function m(a){a.subject.error(a.err)}var l=function(a,c){function b(){this.constructor=a}for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};b=a(1);var f=a(4),e=a(3),c=a(36);a=
function(a){function b(c,e,f,n){a.call(this);this.callbackFunc=c;this.selector=e;this.args=f;this.scheduler=n}l(b,a);b.create=function(a,c,d){void 0===c&&(c=void 0);return function(){for(var e=[],f=0;f<arguments.length;f++)e[f-0]=arguments[f];return new b(a,c,e,d)}};b.prototype._subscribe=function(a){var b=this.callbackFunc,d=this.args,n=this.scheduler,l=this.subject;if(n)return n.schedule(h,0,{source:this,subscriber:a});l||(l=this.subject=new c.AsyncSubject,n=function w(){for(var a=[],c=0;c<arguments.length;c++)a[c-
0]=arguments[c];var b=w.source,c=b.selector,b=b.subject,d=a.shift();d?b.error(d):c?(a=f.tryCatch(c).apply(this,a),a===e.errorObject?b.error(e.errorObject.e):(b.next(a),b.complete())):(b.next(1===a.length?a[0]:a),b.complete())},n.source=this,f.tryCatch(b).apply(this,d.concat(n))===e.errorObject&&l.error(e.errorObject.e));return l.subscribe(a)};return b}(b.Observable);g.BoundNodeCallbackObservable=a},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(1);var k=a(4),m=a(3);a=function(a){function b(e){a.call(this);this.observableFactory=e}h(b,a);b.create=function(a){return new b(a)};b.prototype._subscribe=function(a){var c=k.tryCatch(this.observableFactory)();c===m.errorObject?a.error(m.errorObject.e):c.subscribe(a)};return b}(b.Observable);g.DeferObservable=a},function(b,g,a){function h(a){return null!==a}var k=function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&
(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},m=a(1);b=a(2);var l=a(47),f=a(25),e=a(52),c=a(14);a=function(a){function b(c,d){a.call(this);this.sources=c;this.resultSelector=d}k(b,a);b.create=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];if(null===a||0===arguments.length)return new f.EmptyObservable;d=null;"function"===typeof a[a.length-1]&&(d=a.pop());1===a.length&&c.isArray(a[0])&&(a=a[0]);return new b(a,d)};b.prototype._subscribe=function(a){for(var c=
this.sources,b=c.length,f=[],n=0;n<b;n++)f.push(null);f={completed:0,total:b,values:f,selector:this.resultSelector};for(n=0;n<b;n++){var g=c[n];e.isPromise(g)&&(g=new l.PromiseObservable(g));g.subscribe(new d(a,n,f))}};return b}(m.Observable);g.ForkJoinObservable=a;var d=function(a){function c(b,d,e){a.call(this,b);this.index=d;this.context=e;this._value=null}k(c,a);c.prototype._next=function(a){this._value=a};c.prototype._complete=function(){var a=this.destination;null==this._value&&a.complete();
var c=this.context;c.completed++;c.values[this.index]=this._value;var b=c.values;c.completed===b.length&&(b.every(h)&&(c=c.selector?c.selector.apply(this,b):b,a.next(c)),a.complete())};return c}(b.Subscriber)},function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=
c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},m=a(14),l=a(52),f=a(47),e=a(238),c=a(12),d=a(27),n=a(1),r=a(49);b=function(a){function b(c,d){a.call(this,null);this.ish=c;this.scheduler=d}k(b,a);b.create=function(a,g){void 0===g&&(g=null);if(null!=a){if("function"===typeof a[d.SymbolShim.observable])return a instanceof n.Observable&&!g?a:new b(a,g);if(m.isArray(a))return new c.ArrayObservable(a,g);if(l.isPromise(a))return new f.PromiseObservable(a,g);if("function"===typeof a[d.SymbolShim.iterator]||
"string"===typeof a)return new e.IteratorObservable(a,null,null,g)}throw new TypeError((null!==a&&("undefined"===typeof a?"undefined":h(a))||a)+" is not observable");};b.prototype._subscribe=function(a){var c=this.ish,b=this.scheduler;return null==b?c[d.SymbolShim.observable]().subscribe(a):c[d.SymbolShim.observable]().subscribe(new r.ObserveOnSubscriber(a,b,0))};return b}(n.Observable);g.FromObservable=b},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(1);var k=a(4),m=a(3),l=a(9);a=function(a){function b(c,d,e){a.call(this);this.sourceObj=c;this.eventName=d;this.selector=e}h(b,a);b.create=function(a,d,f){return new b(a,d,f)};b.setupSubscription=function(a,d,f,g){var k,m=a.toString();if("[object NodeList]"===m||"[object HTMLCollection]"===m)for(var m=0,h=a.length;m<h;m++)b.setupSubscription(a[m],d,f,g);else"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener?
(a.addEventListener(d,f),k=function(){return a.removeEventListener(d,f)}):"function"===typeof a.on&&"function"===typeof a.off?(a.on(d,f),k=function(){return a.off(d,f)}):"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(d,f),k=function(){return a.removeListener(d,f)});g.add(new l.Subscription(k))};b.prototype._subscribe=function(a){var d=this.selector;b.setupSubscription(this.sourceObj,this.eventName,d?function(){for(var b=[],e=0;e<arguments.length;e++)b[e-0]=
arguments[e];b=k.tryCatch(d).apply(void 0,b);b===m.errorObject?a.error(m.errorObject.e):a.next(b)}:function(b){return a.next(b)},a)};return b}(b.Observable);g.FromEventObservable=a},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(1);var k=a(9),m=a(4),l=a(3);a=function(a){function b(c,d,e){a.call(this);this.addHandler=c;this.removeHandler=d;this.selector=e}
h(b,a);b.create=function(a,d,f){return new b(a,d,f)};b.prototype._subscribe=function(a){var b=this.removeHandler,e=this.selector,f=e?function(b){var d=m.tryCatch(e).apply(null,arguments);d===l.errorObject?a.error(d.e):a.next(d)}:function(b){a.next(b)},g=m.tryCatch(this.addHandler)(f);g===l.errorObject&&a.error(g.e);a.add(new k.Subscription(function(){b(f)}))};return b}(b.Observable);g.FromEventPatternObservable=a},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(51);b=a(1);var m=a(11);a=function(a){function b(e,c){void 0===e&&(e=0);void 0===c&&(c=m.asap);a.call(this);this.period=e;this.scheduler=c;if(!k.isNumeric(e)||0>e)this.period=0;c&&"function"===typeof c.schedule||(this.scheduler=m.asap)}h(b,a);b.create=function(a,c){void 0===a&&(a=0);void 0===c&&(c=m.asap);return new b(a,c)};b.dispatch=function(a){var c=a.subscriber,b=a.period;c.next(a.index);c.isUnsubscribed||(a.index+=
1,this.schedule(a,b))};b.prototype._subscribe=function(a){var c=this.period;a.add(this.scheduler.schedule(b.dispatch,c,{index:0,subscriber:a,period:c}))};return b}(b.Observable);g.IntervalObservable=a},function(b,g,a){var h=function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};b=a(1);var k=a(40);a=function(a){function b(){a.call(this)}h(b,a);b.create=function(){return new b};b.prototype._subscribe=
function(a){k.noop()};return b}(b.Observable);g.InfiniteObservable=a},function(b,g,a){var h=function(a,b){function l(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)};b=function(a){function b(l,f,e){a.call(this);this.start=l;this.end=f;this.scheduler=e}h(b,a);b.create=function(a,f,e){void 0===a&&(a=0);void 0===f&&(f=0);return new b(a,f,e)};b.dispatch=function(a){var b=a.start,e=a.index,c=a.subscriber;e>=a.end?
c.complete():(c.next(b),c.isUnsubscribed||(a.index=e+1,a.start=b+1,this.schedule(a)))};b.prototype._subscribe=function(a){var f=0,e=this.start,c=this.end,d=this.scheduler;if(d)return d.schedule(b.dispatch,0,{index:f,end:c,start:e,subscriber:a});do{if(f++>=c){a.complete();break}a.next(e++);if(a.isUnsubscribed)break}while(1)};return b}(a(1).Observable);g.RangeObservable=b},function(b,g,a){var h=function(a,c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=
null===c?Object.create(c):(b.prototype=c.prototype,new b)},k=a(51);b=a(1);var m=a(11),l=a(19),f=a(39);a=function(a){function c(c,b,g){void 0===c&&(c=0);a.call(this);this.period=-1;this.dueTime=0;k.isNumeric(b)?this.period=1>Number(b)&&1||Number(b):l.isScheduler(b)&&(g=b);l.isScheduler(g)||(g=m.asap);this.scheduler=g;this.dueTime=f.isDate(c)?+c-this.scheduler.now():c}h(c,a);c.create=function(a,b,e){void 0===a&&(a=0);return new c(a,b,e)};c.dispatch=function(a){var c=a.index,b=a.period,e=a.subscriber;
e.next(c);if(!e.isUnsubscribed){if(-1===b)return e.complete();a.index=c+1;this.schedule(a,b)}};c.prototype._subscribe=function(a){return this.scheduler.schedule(c.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return c}(b.Observable);g.TimerObservable=a},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(5);var k=a(6);g.buffer=function(a){return this.lift(new m(a))};
var m=function(){function a(b){this.closingNotifier=b}a.prototype.call=function(a){return new l(a,this.closingNotifier)};return a}(),l=function(a){function b(c,d){a.call(this,c);this.buffer=[];this.add(k.subscribeToResult(this,d))}h(b,a);b.prototype._next=function(a){this.buffer.push(a)};b.prototype.notifyNext=function(a,b,e,f){a=this.buffer;this.buffer=[];this.destination.next(a)};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);g.bufferCount=function(a,b){void 0===b&&(b=null);return this.lift(new k(a,b))};var k=function(){function a(b,e){this.bufferSize=b;this.startBufferEvery=e}a.prototype.call=function(a){return new m(a,this.bufferSize,this.startBufferEvery)};return a}(),m=function(a){function b(e,c,d){a.call(this,e);this.bufferSize=c;this.startBufferEvery=d;this.buffers=[[]];this.count=0}h(b,a);b.prototype._next=function(a){var b=
this.count+=1,d=this.destination,f=this.bufferSize,g=this.buffers,l=g.length,k=-1;0===b%(null==this.startBufferEvery?f:this.startBufferEvery)&&g.push([]);for(b=0;b<l;b++){var m=g[b];m.push(a);m.length===f&&(k=b,d.next(m))}-1!==k&&g.splice(k,1)};b.prototype._complete=function(){for(var b=this.destination,c=this.buffers;0<c.length;){var d=c.shift();0<d.length&&b.next(d)}a.prototype._complete.call(this)};return b}(b.Subscriber)},function(b,g,a){function h(a){var b=a.subscriber,c=a.buffer;c&&b.closeBuffer(c);
a.buffer=b.openBuffer();b.isUnsubscribed||this.schedule(a,a.bufferTimeSpan)}function k(a){var b=a.bufferCreationInterval,c=a.bufferTimeSpan,e=a.subscriber,f=a.scheduler,g=e.openBuffer();e.isUnsubscribed||(this.add(f.schedule(m,c,{subscriber:e,buffer:g})),this.schedule(a,b))}function m(a){a.subscriber.closeBuffer(a.buffer)}var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);
var f=a(11);g.bufferTime=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=f.asap);return this.lift(new e(a,b,c))};var e=function(){function a(b,c,d){this.bufferTimeSpan=b;this.bufferCreationInterval=c;this.scheduler=d}a.prototype.call=function(a){return new c(a,this.bufferTimeSpan,this.bufferCreationInterval,this.scheduler)};return a}(),c=function(a){function b(c,e,f,n){a.call(this,c);this.bufferTimeSpan=e;this.bufferCreationInterval=f;this.scheduler=n;this.buffers=[];c=this.openBuffer();if(null!==
f&&0<=f){var g={bufferTimeSpan:e,bufferCreationInterval:f,subscriber:this,scheduler:n};this.add(n.schedule(m,e,{subscriber:this,buffer:c}));this.add(n.schedule(k,f,g))}else this.add(n.schedule(h,e,{subscriber:this,buffer:c,bufferTimeSpan:e}))}l(b,a);b.prototype._next=function(a){for(var b=this.buffers,c=b.length,d=0;d<c;d++)b[d].push(a)};b.prototype._error=function(b){this.buffers.length=0;a.prototype._error.call(this,b)};b.prototype._complete=function(){for(var b=this.buffers,c=this.destination;0<
b.length;)c.next(b.shift());a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.buffers=null};b.prototype.openBuffer=function(){var a=[];this.buffers.push(a);return a};b.prototype.closeBuffer=function(a){this.destination.next(a);var b=this.buffers;b.splice(b.indexOf(a),1)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};b=a(2);var k=a(9),m=a(4),l=a(3);g.bufferToggle=function(a,b){return this.lift(new f(a,b))};var f=function(){function a(b,c){this.openings=b;this.closingSelector=c}a.prototype.call=function(a){return new e(a,this.openings,this.closingSelector)};return a}(),e=function(a){function b(d,e,f){a.call(this,d);this.openings=e;this.closingSelector=f;this.contexts=[];this.add(this.openings.subscribe(new c(this)))}h(b,a);b.prototype._next=function(a){for(var b=this.contexts,c=b.length,d=0;d<c;d++)b[d].buffer.push(a)};
b.prototype._error=function(b){for(var c=this.contexts;0<c.length;){var d=c.shift();d.subscription.unsubscribe();d.buffer=null;d.subscription=null}this.contexts=null;a.prototype._error.call(this,b)};b.prototype._complete=function(){for(var b=this.contexts;0<b.length;){var c=b.shift();this.destination.next(c.buffer);c.subscription.unsubscribe();c.buffer=null;c.subscription=null}this.contexts=null;a.prototype._complete.call(this)};b.prototype.openBuffer=function(a){var b=this.contexts,c=m.tryCatch(this.closingSelector)(a);
c===l.errorObject?this._error(l.errorObject.e):(a={buffer:[],subscription:new k.Subscription},b.push(a),b=new d(this,a),b=c.subscribe(b),a.subscription.add(b),this.add(b))};b.prototype.closeBuffer=function(a){var b=this.contexts;if(null!==b){var c=a.subscription;this.destination.next(a.buffer);b.splice(b.indexOf(a),1);this.remove(c);c.unsubscribe()}};return b}(b.Subscriber),c=function(a){function b(c){a.call(this,null);this.parent=c}h(b,a);b.prototype._next=function(a){this.parent.openBuffer(a)};
b.prototype._error=function(a){this.parent.error(a)};b.prototype._complete=function(){};return b}(b.Subscriber),d=function(a){function b(c,d){a.call(this,null);this.parent=c;this.context=d}h(b,a);b.prototype._next=function(){this.parent.closeBuffer(this.context)};b.prototype._error=function(a){this.parent.error(a)};b.prototype._complete=function(){this.parent.closeBuffer(this.context)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(9),m=a(4),l=a(3);b=a(5);var f=a(6);g.bufferWhen=function(a){return this.lift(new e(a))};var e=function(){function a(b){this.closingSelector=b}a.prototype.call=function(a){return new c(a,this.closingSelector)};return a}(),c=function(a){function b(c,e){a.call(this,c);this.closingSelector=e;this.subscribing=!1;this.openBuffer()}h(b,a);b.prototype._next=function(a){this.buffer.push(a)};b.prototype._complete=function(){var b=
this.buffer;b&&this.destination.next(b);a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.buffer=null;this.subscribing=!1};b.prototype.notifyNext=function(a,b,c,d){this.openBuffer()};b.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()};b.prototype.openBuffer=function(){var a=this.closingSubscription;a&&(this.remove(a),a.unsubscribe());(a=this.buffer)&&this.destination.next(a);this.buffer=[];var b=m.tryCatch(this.closingSelector)();b===
l.errorObject?this.error(l.errorObject.e):(this.closingSubscription=a=new k.Subscription,this.add(a),this.subscribing=!0,a.add(f.subscribeToResult(this,b)),this.subscribing=!1)};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(4),m=a(3);g._catch=function(a){a=new l(a);var b=this.lift(a);return a.caught=b};var l=function(){function a(b){this.selector=
b}a.prototype.call=function(a){return new f(a,this.selector,this.caught)};return a}(),f=function(a){function b(c,f,g){a.call(this,c);this.selector=f;this.caught=g}h(b,a);b.prototype.error=function(b){if(!this.isStopped)if(b=k.tryCatch(this.selector)(b,this.caught),b===m.errorObject)a.prototype.error.call(this,m.errorObject.e);else{var c=this.destination;this.unsubscribe();c.remove(this);b.subscribe(this.destination)}};return b}(b.Subscriber)},function(b,g,a){var h=a(48);g.combineAll=function(a){return this.lift(new h.CombineLatestOperator(a))}},
function(b,g,a){var h=a(12),k=a(48),m=a(19),l=a(14);g.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=b=null;m.isScheduler(a[a.length-1])&&(c=a.pop());"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&l.isArray(a[0])&&(a=a[0]);return(new h.ArrayObservable(a,c)).lift(new k.CombineLatestOperator(b))}},function(b,g,a){var h=a(12),k=a(48),m=a(14);g.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;"function"===
typeof a[a.length-1]&&(b=a.pop());1===a.length&&m.isArray(a[0])&&(a=a[0]);a.unshift(this);return(new h.ArrayObservable(a)).lift(new k.CombineLatestOperator(b))}},function(b,g,a){var h=a(19),k=a(12),m=a(31);g.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.unshift(this);b=null;h.isScheduler(a[a.length-1])&&(b=a.pop());return(new k.ArrayObservable(a,b)).lift(new m.MergeAllOperator(1))}},function(b,g,a){var h=a(31);g.concatAll=function(){return this.lift(new h.MergeAllOperator(1))}},
function(b,g,a){var h=a(78);g.concatMap=function(a,b){return this.lift(new h.MergeMapOperator(a,b,1))}},function(b,g,a){var h=a(79);g.concatMapTo=function(a,b){return this.lift(new h.MergeMapToOperator(a,b,1))}},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.count=function(a){return this.lift(new l(a,this))};var l=function(){function a(b,
d){this.predicate=b;this.source=d}a.prototype.call=function(a){return new f(a,this.predicate,this.source)};return a}(),f=function(a){function b(c,f,g){a.call(this,c);this.predicate=f;this.source=g;this.index=this.count=0}h(b,a);b.prototype._next=function(a){var b=this.predicate,c=!0;if(b&&(c=k.tryCatch(b)(a,this.index++,this.source),c===m.errorObject)){this.destination.error(c.e);return}c&&(this.count+=1)};b.prototype._complete=function(){this.destination.next(this.count);this.destination.complete()};
return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(4),m=a(3);b=a(5);var l=a(6);g.debounce=function(a){return this.lift(new f(a))};var f=function(){function a(b){this.durationSelector=b}a.prototype.call=function(a){return new e(a,this.durationSelector)};return a}(),e=function(a){function b(d,e){a.call(this,d);this.durationSelector=e;this.hasValue=
!1;this.durationSubscription=null}h(b,a);b.prototype._next=function(a){var b=this.durationSubscription,c=k.tryCatch(this.durationSelector)(a);c===m.errorObject?this.destination.error(m.errorObject.e):(this.value=a,this.hasValue=!0,b&&(b.unsubscribe(),this.remove(b)),b=l.subscribeToResult(this,c),b.isUnsubscribed||this.add(this.durationSubscription=b))};b.prototype._complete=function(){this.emitValue();this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d){this.emitValue()};b.prototype.notifyComplete=
function(){this.emitValue()};b.prototype.emitValue=function(){if(this.hasValue){var b=this.value,d=this.durationSubscription;d&&(this.durationSubscription=null,d.unsubscribe(),this.remove(d));this.value=null;this.hasValue=!1;a.prototype._next.call(this,b)}};return b}(b.OuterSubscriber)},function(b,g,a){function h(a){a.debouncedNext()}var k=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};
b=a(2);var m=a(11);g.debounceTime=function(a,b){void 0===b&&(b=m.asap);return this.lift(new l(a,b))};var l=function(){function a(b,d){this.dueTime=b;this.scheduler=d}a.prototype.call=function(a){return new f(a,this.dueTime,this.scheduler)};return a}(),f=function(a){function b(c,f,g){a.call(this,c);this.dueTime=f;this.scheduler=g;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}k(b,a);b.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=
this.scheduler.schedule(h,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=
a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);g.defaultIfEmpty=function(a){void 0===a&&(a=null);return this.lift(new k(a))};var k=function(){function a(b){this.defaultValue=b}a.prototype.call=function(a){return new m(a,this.defaultValue)};return a}(),m=function(a){function b(e,c){a.call(this,e);this.defaultValue=c;this.isEmpty=!0}h(b,a);b.prototype._next=function(a){this.isEmpty=!1;this.destination.next(a)};b.prototype._complete=
function(){this.isEmpty&&this.destination.next(this.defaultValue);this.destination.complete()};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(11),m=a(39);b=a(2);var l=a(35);g.delay=function(a,b){void 0===b&&(b=k.asap);var c=m.isDate(a)?+a-b.now():Math.abs(a);return this.lift(new f(c,b))};var f=function(){function a(b,c){this.delay=
b;this.scheduler=c}a.prototype.call=function(a){return new e(a,this.delay,this.scheduler)};return a}(),e=function(a){function b(c,e,f){a.call(this,c);this.delay=e;this.scheduler=f;this.queue=[];this.errored=this.active=!1}h(b,a);b.dispatch=function(a){for(var b=a.source,c=b.queue,d=a.scheduler,e=a.destination;0<c.length&&0>=c[0].time-d.now();)c.shift().notification.observe(e);0<c.length?(b=Math.max(0,c[0].time-d.now()),this.schedule(a,b)):b.active=!1};b.prototype._schedule=function(a){this.active=
!0;this.add(a.schedule(b.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))};b.prototype.scheduleNotification=function(a){if(!0!==this.errored){var b=this.scheduler;a=new c(b.now()+this.delay,a);this.queue.push(a);!1===this.active&&this._schedule(b)}};b.prototype._next=function(a){this.scheduleNotification(l.Notification.createNext(a))};b.prototype._error=function(a){this.errored=!0;this.queue=[];this.destination.error(a)};b.prototype._complete=function(){this.scheduleNotification(l.Notification.createComplete())};
return b}(b.Subscriber),c=function(){return function(a,b){this.time=a;this.notification=b}}()},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);g.dematerialize=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a){return new m(a)};return a}(),m=function(a){function b(e){a.call(this,e)}h(b,a);b.prototype._next=function(a){a.observe(this.destination)};
return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.distinctUntilChanged=function(a,b){return this.lift(new l(a,b))};var l=function(){function a(b,d){this.compare=b;this.keySelector=d}a.prototype.call=function(a){return new f(a,this.compare,this.keySelector)};return a}(),f=function(a){function b(c,f,g){a.call(this,
c);this.keySelector=g;this.hasKey=!1;"function"===typeof f&&(this.compare=f)}h(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=k.tryCatch(this.keySelector)(a),b===m.errorObject))return this.destination.error(m.errorObject.e);var c=!1;if(this.hasKey){if(c=k.tryCatch(this.compare)(this.key,b),c===m.errorObject)return this.destination.error(m.errorObject.e)}else this.hasKey=!0;!1===Boolean(c)&&(this.key=b,this.destination.next(a))};return b}(b.Subscriber)},
function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var m=a(40),l=a(4),f=a(3);g._do=function(a,b,c){var f;a&&"object"===("undefined"===typeof a?"undefined":h(a))?(f=a.next,b=
a.error,c=a.complete):f=a;return this.lift(new e(f||m.noop,b||m.noop,c||m.noop))};var e=function(){function a(b,c,d){this.next=b;this.error=c;this.complete=d}a.prototype.call=function(a){return new c(a,this.next,this.error,this.complete)};return a}(),c=function(a){function b(c,e,f,g){a.call(this,c);this.__next=e;this.__error=f;this.__complete=g}k(b,a);b.prototype._next=function(a){l.tryCatch(this.__next)(a)===f.errorObject?this.destination.error(f.errorObject.e):this.destination.next(a)};b.prototype._error=
function(a){l.tryCatch(this.__error)(a)===f.errorObject?this.destination.error(f.errorObject.e):this.destination.error(a)};b.prototype._complete=function(){l.tryCatch(this.__complete)()===f.errorObject?this.destination.error(f.errorObject.e):this.destination.complete()};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(46),m=a(12),l=
a(73);b=a(2);var f=a(4),e=a(3);g.every=function(a,b){if(this._isScalar){var d=f.tryCatch(a).call(b||this,this.value,0,this);return d===e.errorObject?new l.ErrorObservable(e.errorObject.e,this.scheduler):new k.ScalarObservable(d,this.scheduler)}return this instanceof m.ArrayObservable?(d=this.array,d=f.tryCatch(function(a,b,c){return a.every(b,c)})(d,a,b),d===e.errorObject?new l.ErrorObservable(e.errorObject.e,this.scheduler):new k.ScalarObservable(d,this.scheduler)):this.lift(new c(a,b,this))};var c=
function(){function a(b,c,d){this.predicate=b;this.thisArg=c;this.source=d}a.prototype.call=function(a){return new d(a,this.predicate,this.thisArg,this.source)};return a}(),d=function(a){function b(c,d,e,f){a.call(this,c);this.predicate=d;this.thisArg=e;this.source=f;this.index=0}h(b,a);b.prototype.notifyComplete=function(a){this.destination.next(a);this.destination.complete()};b.prototype._next=function(a){a=f.tryCatch(this.predicate).call(this.thisArg||this,a,this.index++,this.source);a===e.errorObject?
this.destination.error(a.e):a||this.notifyComplete(!1)};b.prototype._complete=function(){this.notifyComplete(!0)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},k=a(4),m=a(3);b=a(5);var l=a(6);a=function(){function a(b,d,e){this.project=b;this.concurrent=d;this.scheduler=e}a.prototype.call=function(a){return new f(a,this.project,this.concurrent,
this.scheduler)};return a}();g.ExpandOperator=a;var f=function(a){function b(c,f,g,l){a.call(this,c);this.project=f;this.concurrent=g;this.scheduler=l;this.active=this.index=0;this.hasCompleted=!1;g<Number.POSITIVE_INFINITY&&(this.buffer=[])}h(b,a);b.dispatch=function(a){a.subscriber.subscribeToProjection(a.result,a.value,a.index)};b.prototype._next=function(a){var e=this.destination;if(e.isUnsubscribed)this._complete();else{var f=this.index++;if(this.active<this.concurrent){e.next(a);var g=k.tryCatch(this.project)(a,
f);g===m.errorObject?e.error(m.errorObject.e):this.scheduler?this.add(this.scheduler.schedule(b.dispatch,0,{subscriber:this,result:g,value:a,index:f})):this.subscribeToProjection(g,a,f)}else this.buffer.push(a)}};b.prototype.subscribeToProjection=function(a,b,c){a._isScalar?this._next(a.value):(this.active++,this.add(l.subscribeToResult(this,a,b,c)))};b.prototype._complete=function(){(this.hasCompleted=!0,0===this.active)&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,e){this._next(b)};
b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;b&&0<b.length&&this._next(b.shift());this.hasCompleted&&0===this.active&&this.destination.complete()};return b}(b.OuterSubscriber);g.ExpandSubscriber=f},function(b,g,a){var h=a(273);g.expand=function(a,b,g){void 0===b&&(b=Number.POSITIVE_INFINITY);void 0===g&&(g=void 0);b=1>(b||0)?Number.POSITIVE_INFINITY:b;return this.lift(new h.ExpandOperator(a,b,g))}},function(b,g,a){var h=function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var k=a(9);g._finally=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.finallySelector=b}a.prototype.call=function(a){return new l(a,this.finallySelector)};return a}(),l=function(a){function b(c,d){a.call(this,c);this.add(new k.Subscription(d))}h(b,a);return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&
(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);var k=a(4),m=a(3),l=a(38);g.first=function(a,b,e){return this.lift(new f(a,b,e,this))};var f=function(){function a(b,c,e,f){this.predicate=b;this.resultSelector=c;this.defaultValue=e;this.source=f}a.prototype.call=function(a){return new e(a,this.predicate,this.resultSelector,this.defaultValue,this.source)};return a}(),e=function(a){function b(e,d,f,g,l){a.call(this,e);this.predicate=d;this.resultSelector=f;this.defaultValue=
g;this.source=l;this.index=0;this.hasCompleted=!1}h(b,a);b.prototype._next=function(a){var b=this.destination,c=this.predicate,e=this.resultSelector,d=this.index++,f=!0;if(c&&(f=k.tryCatch(c)(a,d,this.source),f===m.errorObject)){b.error(m.errorObject.e);return}if(f){if(e&&(a=k.tryCatch(e)(a,d),a===m.errorObject)){b.error(m.errorObject.e);return}b.next(a);b.complete();this.hasCompleted=!0}};b.prototype._complete=function(){var a=this.destination;this.hasCompleted||"undefined"===typeof this.defaultValue?
this.hasCompleted||a.error(new l.EmptyError):(a.next(this.defaultValue),a.complete())};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(9);b=a(1);a=function(a){function b(){a.call(this);this.attemptedToUnsubscribePrimary=!1;this.count=0}h(b,a);b.prototype.setPrimary=function(a){this.primary=a};b.prototype.unsubscribe=function(){this.isUnsubscribed||
this.attemptedToUnsubscribePrimary||(this.attemptedToUnsubscribePrimary=!0,0===this.count&&(a.prototype.unsubscribe.call(this),this.primary.unsubscribe()))};return b}(k.Subscription);g.RefCountSubscription=a;b=function(a){function b(e,c,d){a.call(this);this.key=e;this.groupSubject=c;this.refCountSubscription=d}h(b,a);b.prototype._subscribe=function(a){var b=new k.Subscription;this.refCountSubscription&&!this.refCountSubscription.isUnsubscribed&&b.add(new m(this.refCountSubscription));b.add(this.groupSubject.subscribe(a));
return b};return b}(b.Observable);g.GroupedObservable=b;var m=function(a){function b(e){a.call(this);this.parent=e;e.count++}h(b,a);b.prototype.unsubscribe=function(){this.parent.isUnsubscribed||this.isUnsubscribed||(a.prototype.unsubscribe.call(this),this.parent.count--,0===this.parent.count&&this.parent.attemptedToUnsubscribePrimary&&(this.parent.unsubscribe(),this.parent.primary.unsubscribe()))};return b}(k.Subscription);g.InnerRefCountSubscription=m},function(b,g,a){var h=function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var k=a(1),m=a(10),l=a(338),f=a(336),e=a(277),c=a(4),d=a(3);g.groupBy=function(a,b,c){return new n(this,a,b,c)};var n=function(a){function b(c,d,e,f){a.call(this);this.source=c;this.keySelector=d;this.elementSelector=e;this.durationSelector=f}h(b,a);b.prototype._subscribe=function(a){var b=new e.RefCountSubscription;a=new r(a,b,this.keySelector,this.elementSelector,this.durationSelector);
b.setPrimary(this.source.subscribe(a));return b};return b}(k.Observable);g.GroupByObservable=n;var r=function(a){function b(c,d,e,f,g){a.call(this);this.refCountSubscription=d;this.keySelector=e;this.elementSelector=f;this.durationSelector=g;this.groups=null;this.destination=c;this.add(c)}h(b,a);b.prototype._next=function(a){var b=c.tryCatch(this.keySelector)(a);if(b===d.errorObject)this.error(d.errorObject.e);else{var g=this.groups,k=this.elementSelector,n=this.durationSelector;g||(g=this.groups=
"string"===typeof b?new f.FastMap:new l.Map);var h=g.get(b);h||(g.set(b,h=new m.Subject),g=new e.GroupedObservable(b,h,this.refCountSubscription),n&&(n=c.tryCatch(n)(new e.GroupedObservable(b,h)),n===d.errorObject?this.error(d.errorObject.e):this.add(n.subscribe(new u(b,h,this)))),this.destination.next(g));k?(a=c.tryCatch(k)(a),a===d.errorObject?this.error(d.errorObject.e):h.next(a)):h.next(a)}};b.prototype._error=function(a){var b=this,c=this.groups;c&&c.forEach(function(c,d){c.error(a);b.removeGroup(d)});
this.destination.error(a)};b.prototype._complete=function(){var a=this,b=this.groups;b&&b.forEach(function(b,c){b.complete();a.removeGroup(c)});this.destination.complete()};b.prototype.removeGroup=function(a){this.groups["delete"](a)};return b}(b.Subscriber),u=function(a){function b(c,d,e){a.call(this);this.key=c;this.group=d;this.parent=e}h(b,a);b.prototype._next=function(a){this.group.complete();this.parent.removeGroup(this.key)};b.prototype._error=function(a){this.group.error(a);this.parent.removeGroup(this.key)};
b.prototype._complete=function(){this.group.complete();this.parent.removeGroup(this.key)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var k=a(40);g.ignoreElements=function(){return this.lift(new m)};var m=function(){function a(){}a.prototype.call=function(a){return new l(a)};return a}(),l=function(a){function b(){a.apply(this,
arguments)}h(b,a);b.prototype._next=function(a){k.noop()};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);var k=a(4),m=a(3),l=a(38);g.last=function(a,b,e){return this.lift(new f(a,b,e,this))};var f=function(){function a(b,c,e,f){this.predicate=b;this.resultSelector=c;this.defaultValue=e;this.source=f}a.prototype.call=function(a){return new e(a,
this.predicate,this.resultSelector,this.defaultValue,this.source)};return a}(),e=function(a){function b(e,d,f,g,k){a.call(this,e);this.predicate=d;this.resultSelector=f;this.defaultValue=g;this.source=k;this.hasValue=!1;this.index=0;"undefined"!==typeof g&&(this.lastValue=g,this.hasValue=!0)}h(b,a);b.prototype._next=function(a){var b=this.predicate,c=this.resultSelector,e=this.destination,d=this.index++;if(b)if(b=k.tryCatch(b)(a,d,this.source),b===m.errorObject)e.error(m.errorObject.e);else{if(b){if(c&&
(a=k.tryCatch(c)(a,d),a===m.errorObject)){e.error(m.errorObject.e);return}this.lastValue=a;this.hasValue=!0}}else this.lastValue=a,this.hasValue=!0};b.prototype._complete=function(){var a=this.destination;this.hasValue?(a.next(this.lastValue),a.complete()):a.error(new l.EmptyError)};return b}(b.Subscriber)},function(b,g){g.letProto=function(a){return a(this)}},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):
(e.prototype=b.prototype,new e)};b=a(2);g.mapTo=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.value=b}a.prototype.call=function(a){return new m(a,this.value)};return a}(),m=function(a){function b(e,c){a.call(this,e);this.value=c}h(b,a);b.prototype._next=function(a){this.destination.next(this.value)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};b=a(2);var k=a(35);g.materialize=function(){return this.lift(new m)};var m=function(){function a(){}a.prototype.call=function(a){return new l(a)};return a}(),l=function(a){function b(c){a.call(this,c)}h(b,a);b.prototype._next=function(a){this.destination.next(k.Notification.createNext(a))};b.prototype._error=function(a){var b=this.destination;b.next(k.Notification.createError(a));b.complete()};b.prototype._complete=function(){var a=this.destination;a.next(k.Notification.createComplete());
a.complete()};return b}(b.Subscriber)},function(b,g,a){var h=a(77);g.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.unshift(this);return h.merge.apply(this,a)}},function(b,g,a){var h=a(31);g.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return this.lift(new h.MergeAllOperator(a))}},function(b,g,a){var h=a(78);g.mergeMap=function(a,b,g){void 0===g&&(g=Number.POSITIVE_INFINITY);return this.lift(new h.MergeMapOperator(a,b,g))}},function(b,g,a){var h=a(79);
g.mergeMapTo=function(a,b,g){void 0===g&&(g=Number.POSITIVE_INFINITY);return this.lift(new h.MergeMapToOperator(a,b,g))}},function(b,g,a){var h=a(49);g.observeOn=function(a,b){void 0===b&&(b=0);return this.lift(new h.ObserveOnOperator(a,b))}},function(b,g,a){var h=a(340),k=a(75);g.partition=function(a,b){return[k.filter.call(this,a),k.filter.call(this,h.not(a,b))]}},function(b,g,a){function h(a,b){return function(f){var e=f;for(f=0;f<b;f++)if(e=e[a[f]],"undefined"===typeof e)return;return e}}var k=
a(76);g.pluck=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a.length;if(0===b)throw Error("List of properties cannot be empty.");return k.map.call(this,h(a,b))}},function(b,g,a){var h=a(10),k=a(26);g.publish=function(){return k.multicast.call(this,new h.Subject)}},function(b,g,a){var h=a(85),k=a(26);g.publishBehavior=function(a){return k.multicast.call(this,new h.BehaviorSubject(a))}},function(b,g,a){var h=a(36),k=a(26);g.publishLast=function(){return k.multicast.call(this,
new h.AsyncSubject)}},function(b,g,a){var h=a(86),k=a(26);g.publishReplay=function(a,b,f){void 0===a&&(a=Number.POSITIVE_INFINITY);void 0===b&&(b=Number.POSITIVE_INFINITY);return k.multicast.call(this,new h.ReplaySubject(a,b,f))}},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(5);var k=a(6);a=function(){function a(){}a.prototype.call=function(a){return new m(a)};
return a}();g.RaceOperator=a;var m=function(a){function b(e){a.call(this,e);this.hasFirst=!1;this.observables=[];this.subscriptions=[]}h(b,a);b.prototype._next=function(a){this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{for(var d=0;d<b;d++){var f=a[d],f=k.subscribeToResult(this,f,f,d);this.subscriptions.push(f);this.add(f)}this.observables=null}};b.prototype.notifyNext=function(a,b,d){if(!this.hasFirst){this.hasFirst=
!0;for(a=0;a<this.subscriptions.length;a++)if(a!==d){var f=this.subscriptions[a];f.unsubscribe();this.remove(f)}this.subscriptions=null}this.destination.next(b)};return b}(b.OuterSubscriber);g.RaceSubscriber=m},function(b,g,a){var h=a(80),k=a(14);g.race=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];1===a.length&&k.isArray(a[0])&&(a=a[0]);a.unshift(this);return h.race.apply(this,a)}},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var k=a(4),m=a(3);a=function(){function a(b,c){this.project=b;this.seed=c}a.prototype.call=function(a){return new l(a,this.project,this.seed)};return a}();g.ReduceOperator=a;var l=function(a){function b(c,d,e){a.call(this,c);this.hasValue=!1;this.acc=e;this.project=d;this.hasSeed="undefined"!==typeof e}h(b,a);b.prototype._next=function(a){this.hasValue||(this.hasValue=this.hasSeed)?(a=k.tryCatch(this.project).call(this,
this.acc,a),a===m.errorObject?this.destination.error(m.errorObject.e):this.acc=a):(this.acc=a,this.hasValue=!0)};b.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc);this.destination.complete()};return b}(b.Subscriber);g.ReduceSubscriber=l},function(b,g,a){var h=a(297);g.reduce=function(a,b){return this.lift(new h.ReduceOperator(a,b))}},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var k=a(25);g.repeat=function(a){void 0===a&&(a=-1);return 0===a?new k.EmptyObservable:0>a?this.lift(new m(-1,this)):this.lift(new m(a-1,this))};var m=function(){function a(b,c){this.count=b;this.source=c}a.prototype.call=function(a){return new l(a,this.count,this.source)};return a}(),l=function(a){function b(c,d,e){a.call(this,c);this.count=d;this.source=e}h(b,a);b.prototype.complete=function(){if(!this.isStopped){var b=this.source,
d=this.count;if(0===d)return a.prototype.complete.call(this);-1<d&&(this.count=d-1);this.unsubscribe();this.isUnsubscribed=this.isStopped=!1;b.subscribe(this)}};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);g.retry=function(a){void 0===a&&(a=-1);return this.lift(new k(a,this))};var k=function(){function a(b,e){this.count=b;this.source=
e}a.prototype.call=function(a){return new m(a,this.count,this.source)};return a}(),m=function(a){function b(e,c,d){a.call(this,e);this.count=c;this.source=d}h(b,a);b.prototype.error=function(b){if(!this.isStopped){var c=this.source,d=this.count;if(0===d)return a.prototype.error.call(this,b);-1<d&&(this.count=d-1);this.unsubscribe();this.isUnsubscribed=this.isStopped=!1;c.subscribe(this)}};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(10),m=a(4),l=a(3);b=a(5);var f=a(6);g.retryWhen=function(a){return this.lift(new e(a,this))};var e=function(){function a(b,c){this.notifier=b;this.source=c}a.prototype.call=function(a){return new c(a,this.notifier,this.source)};return a}(),c=function(a){function b(c,e,f){a.call(this,c);this.notifier=e;this.source=f}h(b,a);b.prototype.error=function(b){if(!this.isStopped){var c=this.errors,e=this.retries,g=this.retriesSubscription;
if(e)this.retriesSubscription=this.errors=null;else{c=new k.Subject;e=m.tryCatch(this.notifier)(c);if(e===l.errorObject)return a.prototype.error.call(this,l.errorObject.e);g=f.subscribeToResult(this,e)}this.unsubscribe();this.isUnsubscribed=!1;this.errors=c;this.retries=e;this.retriesSubscription=g;c.next(b)}};b.prototype._unsubscribe=function(){var a=this.errors,b=this.retriesSubscription;a&&(a.unsubscribe(),this.errors=null);b&&(b.unsubscribe(),this.retriesSubscription=null);this.retries=null};
b.prototype.notifyNext=function(a,b,c,d){a=this.errors;b=this.retries;c=this.retriesSubscription;this.retriesSubscription=this.retries=this.errors=null;this.unsubscribe();this.isUnsubscribed=this.isStopped=!1;this.errors=a;this.retries=b;this.retriesSubscription=c;this.source.subscribe(this)};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};b=a(5);var k=a(6);g.sample=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.notifier=b}a.prototype.call=function(a){return new l(a,this.notifier)};return a}(),l=function(a){function b(c,d){a.call(this,c);this.hasValue=!1;this.add(k.subscribeToResult(this,d))}h(b,a);b.prototype._next=function(a){this.value=a;this.hasValue=!0};b.prototype.notifyNext=function(a,b,e,f){this.emitValue()};b.prototype.notifyComplete=function(){this.emitValue()};b.prototype.emitValue=function(){this.hasValue&&
(this.hasValue=!1,this.destination.next(this.value))};return b}(b.OuterSubscriber)},function(b,g,a){function h(a){var b=a.delay;a.subscriber.notifyNext();this.schedule(a,b)}var k=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var m=a(11);g.sampleTime=function(a,b){void 0===b&&(b=m.asap);return this.lift(new l(a,b))};var l=function(){function a(b,d){this.delay=b;this.scheduler=
d}a.prototype.call=function(a){return new f(a,this.delay,this.scheduler)};return a}(),f=function(a){function b(c,f,g){a.call(this,c);this.delay=f;this.scheduler=g;this.hasValue=!1;this.add(g.schedule(h,f,{subscriber:this,delay:f}))}k(b,a);b.prototype._next=function(a){this.lastValue=a;this.hasValue=!0};b.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=
a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.scan=function(a,b){return this.lift(new l(a,b))};var l=function(){function a(b,d){this.accumulator=b;this.seed=d}a.prototype.call=function(a){return new f(a,this.accumulator,this.seed)};return a}(),f=function(a){function b(c,f,g){a.call(this,c);this.accumulator=f;this.accumulatorSet=!1;this.seed=g;this.accumulator=f;this.accumulatorSet="undefined"!==typeof g}
h(b,a);Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){this.accumulatorSet?(a=k.tryCatch(this.accumulator).call(this,this.seed,a),a===m.errorObject?this.destination.error(m.errorObject.e):(this.seed=a,this.destination.next(this.seed))):(this.seed=a,this.destination.next(a))};return b}(b.Subscriber)},function(b,g,a){function h(){return new m.Subject}var k=a(26),
m=a(10);g.share=function(){return k.multicast.call(this,h).refCount()}},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);var k=a(4),m=a(3),l=a(38);g.single=function(a){return this.lift(new f(a,this))};var f=function(){function a(b,c){this.predicate=b;this.source=c}a.prototype.call=function(a){return new e(a,this.predicate,this.source)};return a}(),e=function(a){function b(d,
e,f){a.call(this,d);this.predicate=e;this.source=f;this.seenValue=!1;this.index=0}h(b,a);b.prototype.applySingleValue=function(a){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=a)};b.prototype._next=function(a){var b=this.predicate,c=this.index++;b?(b=k.tryCatch(b)(a,c,this.source),b===m.errorObject?this.destination.error(m.errorObject.e):b&&this.applySingleValue(a)):this.applySingleValue(a)};b.prototype._complete=function(){var a=
this.destination;0<this.index?(a.next(this.seenValue?this.singleValue:void 0),a.complete()):a.error(new l.EmptyError)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);g.skip=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.total=b}a.prototype.call=function(a){return new m(a,this.total)};return a}(),m=function(a){function b(e,
c){a.call(this,e);this.total=c;this.count=0}h(b,a);b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(5);var k=a(6);g.skipUntil=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.notifier=b}a.prototype.call=function(a){return new l(a,
this.notifier)};return a}(),l=function(a){function b(c,d){a.call(this,c);this.isInnerStopped=this.hasValue=!1;this.add(k.subscribeToResult(this,d))}h(b,a);b.prototype._next=function(b){this.hasValue&&a.prototype._next.call(this,b)};b.prototype._complete=function(){this.isInnerStopped?a.prototype._complete.call(this):this.unsubscribe()};b.prototype.notifyNext=function(){this.hasValue=!0};b.prototype.notifyComplete=function(){this.isInnerStopped=!0;this.isStopped&&a.prototype._complete.call(this)};
return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.skipWhile=function(a){return this.lift(new l(a))};var l=function(){function a(b){this.predicate=b}a.prototype.call=function(a){return new f(a,this.predicate)};return a}(),f=function(a){function b(c,f){a.call(this,c);this.predicate=f;this.skipping=!0;this.index=
0}h(b,a);b.prototype._next=function(a){var b=this.destination;if(!0===this.skipping){var c=this.index++,c=k.tryCatch(this.predicate)(a,c);c===m.errorObject?b.error(m.errorObject.e):this.skipping=Boolean(c)}!1===this.skipping&&b.next(a)};return b}(b.Subscriber)},function(b,g,a){var h=a(12),k=a(46),m=a(25),l=a(74),f=a(19);g.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];f.isScheduler(b)?a.pop():b=null;var d=a.length;return 1===d?l.concat(new k.ScalarObservable(a[0],
b),this):1<d?l.concat(new h.ArrayObservable(a,b),this):l.concat(new m.EmptyObservable(b),this)}},function(b,g,a){var h=a(239);g.subscribeOn=function(a,b){void 0===b&&(b=0);return new h.SubscribeOnObservable(this,b,a)}},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(5);var k=a(6);g._switch=function(){return this.lift(new m)};var m=function(){function a(){}
a.prototype.call=function(a){return new l(a)};return a}(),l=function(a){function b(c){a.call(this,c);this.active=0;this.hasCompleted=!1}h(b,a);b.prototype._next=function(a){this.unsubscribeInner();this.active++;this.add(this.innerSubscription=k.subscribeToResult(this,a))};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&this.destination.complete()};b.prototype.unsubscribeInner=function(){this.active=0<this.active?this.active-1:0;var a=this.innerSubscription;a&&(a.unsubscribe(),
this.remove(a))};b.prototype.notifyNext=function(a,b){this.destination.next(b)};b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(){this.unsubscribeInner();this.hasCompleted&&0===this.active&&this.destination.complete()};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(4),m=a(3);
b=a(5);var l=a(6);g.switchMap=function(a,b){return this.lift(new f(a,b))};var f=function(){function a(b,c){this.project=b;this.resultSelector=c}a.prototype.call=function(a){return new e(a,this.project,this.resultSelector)};return a}(),e=function(a){function b(d,e,f){a.call(this,d);this.project=e;this.resultSelector=f;this.index=0}h(b,a);b.prototype._next=function(a){var b=this.index++,c=this.destination,d=k.tryCatch(this.project)(a,b);d===m.errorObject?c.error(m.errorObject.e):((c=this.innerSubscription)&&
c.unsubscribe(),this.add(this.innerSubscription=l.subscribeToResult(this,d,a,b)))};b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.isUnsubscribed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,d){var e=this.resultSelector,f=this.destination;e?(a=k.tryCatch(e)(a,
b,c,d),a===m.errorObject?f.error(m.errorObject.e):f.next(a)):f.next(b)};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(4),m=a(3);b=a(5);var l=a(6);g.switchMapTo=function(a,b){return this.lift(new f(a,b))};var f=function(){function a(b,c){this.observable=b;this.resultSelector=c}a.prototype.call=function(a){return new e(a,this.observable,
this.resultSelector)};return a}(),e=function(a){function b(d,e,f){a.call(this,d);this.inner=e;this.resultSelector=f;this.index=0}h(b,a);b.prototype._next=function(a){var b=this.innerSubscription;b&&b.unsubscribe();this.add(this.innerSubscription=l.subscribeToResult(this,this.inner,a,this.index++))};b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.isUnsubscribed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=
function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,d){var e=this.resultSelector,f=this.destination;e?(a=k.tryCatch(e)(a,b,c,d),a===m.errorObject?f.error(m.errorObject.e):f.next(a)):f.next(b)};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};
b=a(2);var k=a(87),m=a(25);g.take=function(a){return 0===a?new m.EmptyObservable:this.lift(new l(a))};var l=function(){function a(b){this.total=b;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a){return new f(a,this.total)};return a}(),f=function(a){function b(c,f){a.call(this,c);this.total=f;this.count=0}h(b,a);b.prototype._next=function(a){var b=this.total;++this.count<=b&&(this.destination.next(a),this.count===b&&this.destination.complete())};return b}(b.Subscriber)},
function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(5);var k=a(6);g.takeUntil=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.notifier=b}a.prototype.call=function(a){return new l(a,this.notifier)};return a}(),l=function(a){function b(c,d){a.call(this,c);this.notifier=d;this.add(k.subscribeToResult(this,d))}h(b,a);b.prototype.notifyNext=
function(a,b,e,f){this.complete()};b.prototype.notifyComplete=function(){};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(4),m=a(3);g.takeWhile=function(a){return this.lift(new l(a))};var l=function(){function a(b){this.predicate=b}a.prototype.call=function(a){return new f(a,this.predicate)};return a}(),f=function(a){function b(c,
f){a.call(this,c);this.predicate=f;this.index=0}h(b,a);b.prototype._next=function(a){var b=this.destination,c=k.tryCatch(this.predicate)(a,this.index++);c==m.errorObject?b.error(m.errorObject.e):Boolean(c)?b.next(a):b.complete()};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(4),m=a(3);b=a(5);var l=a(6);g.throttle=function(a){return this.lift(new f(a))};
var f=function(){function a(b){this.durationSelector=b}a.prototype.call=function(a){return new e(a,this.durationSelector)};return a}(),e=function(a){function b(d,e){a.call(this,d);this.durationSelector=e}h(b,a);b.prototype._next=function(a){if(!this.throttled){var b=k.tryCatch(this.durationSelector)(a);b===m.errorObject?this.destination.error(m.errorObject.e):(this.add(this.throttled=l.subscribeToResult(this,b)),this.destination.next(a))}};b.prototype._unsubscribe=function(){var a=this.throttled;
a&&(this.remove(a),this.throttled=null,a.unsubscribe())};b.prototype.notifyNext=function(a,b,c,d){this._unsubscribe()};b.prototype.notifyComplete=function(){this._unsubscribe()};return b}(b.OuterSubscriber)},function(b,g,a){function h(a){a.subscriber.clearThrottle()}var k=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var m=a(11);g.throttleTime=function(a,b){void 0===b&&(b=
m.asap);return this.lift(new l(a,b))};var l=function(){function a(b,d){this.delay=b;this.scheduler=d}a.prototype.call=function(a){return new f(a,this.delay,this.scheduler)};return a}(),f=function(a){function b(c,f,g){a.call(this,c);this.delay=f;this.scheduler=g}k(b,a);b.prototype._next=function(a){this.throttled||(this.add(this.throttled=this.scheduler.schedule(h,this.delay,{subscriber:this})),this.destination.next(a))};b.prototype.clearThrottle=function(){var a=this.throttled;a&&(a.unsubscribe(),
this.remove(a),this.throttled=null)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function d(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},k=a(11),m=a(39);b=a(2);g.timeout=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=k.asap);var f=m.isDate(a);a=f?+a-d.now():Math.abs(a);return this.lift(new l(a,f,b,d))};var l=function(){function a(b,d,e,f){this.waitFor=b;this.absoluteTimeout=d;this.errorToSend=
e;this.scheduler=f}a.prototype.call=function(a){return new f(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler)};return a}(),f=function(a){function b(c,f,g,k,l){a.call(this,c);this.absoluteTimeout=f;this.waitFor=g;this.errorToSend=k;this.scheduler=l;this._previousIndex=this.index=0;this._hasCompleted=!1;this.scheduleTimeout()}h(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.notifyTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);
this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.notifyTimeout=function(){this.error(this.errorToSend||Error("timeout"))};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(11),m=a(39);b=a(5);var l=a(6);g.timeoutWith=function(a,b,e){void 0===e&&(e=k.asap);var g=m.isDate(a);
a=g?+a-e.now():Math.abs(a);return this.lift(new f(a,g,b,e))};var f=function(){function a(b,c,e,f){this.waitFor=b;this.absoluteTimeout=c;this.withObservable=e;this.scheduler=f}a.prototype.call=function(a){return new e(a,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler)};return a}(),e=function(a){function b(d,e,f,g,k){a.call(this);this.destination=d;this.absoluteTimeout=e;this.waitFor=f;this.withObservable=g;this.scheduler=k;this.timeoutSubscription=void 0;this._previousIndex=this.index=
0;this._hasCompleted=!1;d.add(this);this.scheduleTimeout()}h(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.handleTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,
this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.handleTimeout=function(){if(!this.isUnsubscribed){var a=this.withObservable;this.unsubscribe();this.destination.add(this.timeoutSubscription=l.subscribeToResult(this,
a))}};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};b=a(2);g.toArray=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a){return new m(a)};return a}(),m=function(a){function b(e){a.call(this,e);this.array=[]}h(b,a);b.prototype._next=function(a){this.array.push(a)};b.prototype._complete=
function(){this.destination.next(this.array);this.destination.complete()};return b}(b.Subscriber)},function(b,g,a){var h=a(15);g.toPromise=function(a){var b=this;a||(h.root.Rx&&h.root.Rx.config&&h.root.Rx.config.Promise?a=h.root.Rx.config.Promise:h.root.Promise&&(a=h.root.Promise));if(!a)throw Error("no Promise impl found");return new a(function(a,f){var e;b.subscribe(function(a){return e=a},function(a){return f(a)},function(){return a(e)})})}},function(b,g,a){var h=function(a,b){function d(){this.constructor=
a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};b=a(2);var k=a(10);g.window=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.closingNotifier=b}a.prototype.call=function(a){return new l(a,this.closingNotifier)};return a}(),l=function(a){function b(c,g){a.call(this,c);this.destination=c;this.closingNotifier=g;this.add(g.subscribe(new f(this)));this.openWindow()}h(b,a);b.prototype._next=function(a){this.window.next(a)};
b.prototype._error=function(a){this.window.error(a);this.destination.error(a)};b.prototype._complete=function(){this.window.complete();this.destination.complete()};b.prototype.openWindow=function(){var a=this.window;a&&a.complete();var a=this.destination,b=this.window=new k.Subject;a.add(b);a.next(b)};b.prototype.errorWindow=function(a){this._error(a)};b.prototype.completeWindow=function(){this._complete()};return b}(b.Subscriber),f=function(a){function b(c){a.call(this);this.parent=c}h(b,a);b.prototype._next=
function(){this.parent.openWindow()};b.prototype._error=function(a){this.parent.errorWindow(a)};b.prototype._complete=function(){this.parent.completeWindow()};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var k=a(10);g.windowCount=function(a,b){void 0===b&&(b=0);return this.lift(new m(a,b))};var m=function(){function a(b,c){this.windowSize=
b;this.startWindowEvery=c}a.prototype.call=function(a){return new l(a,this.windowSize,this.startWindowEvery)};return a}(),l=function(a){function b(c,d,e){a.call(this,c);this.destination=c;this.windowSize=d;this.startWindowEvery=e;this.windows=[new k.Subject];this.count=0;d=this.windows[0];c.add(d);c.next(d)}h(b,a);b.prototype._next=function(a){for(var b=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,e=this.destination,f=this.windowSize,g=this.windows,l=g.length,m=0;m<l;m++)g[m].next(a);
a=this.count-f+1;0<=a&&0===a%b&&g.shift().complete();0===++this.count%b&&(b=new k.Subject,g.push(b),e.add(b),e.next(b))};b.prototype._error=function(a){for(var b=this.windows;0<b.length;)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){for(var a=this.windows;0<a.length;)a.shift().complete();this.destination.complete()};return b}(b.Subscriber)},function(b,g,a){function h(a){var b=a.subscriber,c=a.windowTimeSpan,d=a.window;d&&d.complete();a.window=b.openWindow();this.schedule(a,
c)}function k(a){var b=a.windowTimeSpan,c=a.subscriber,d=a.scheduler,e=a.windowCreationInterval,f=c.openWindow(),g={action:this,subscription:null};g.subscription=d.schedule(m,b,{subscriber:c,window:f,context:g});this.add(g.subscription);this.schedule(a,e)}function m(a){var b=a.subscriber,c=a.window;(a=a.context)&&a.action&&a.subscription&&a.action.remove(a.subscription);b.closeWindow(c)}var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a(2);var f=a(10),e=a(11);g.windowTime=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=e.asap);return this.lift(new c(a,b,d))};var c=function(){function a(b,c,d){this.windowTimeSpan=b;this.windowCreationInterval=c;this.scheduler=d}a.prototype.call=function(a){return new d(a,this.windowTimeSpan,this.windowCreationInterval,this.scheduler)};return a}(),d=function(a){function b(c,d,e,f){a.call(this,c);this.destination=c;this.windowTimeSpan=
d;this.windowCreationInterval=e;this.scheduler=f;this.windows=[];if(null!==e&&0<=e){c={subscriber:this,window:this.openWindow(),context:null};var g={windowTimeSpan:d,windowCreationInterval:e,subscriber:this,scheduler:f};this.add(f.schedule(m,d,c));this.add(f.schedule(k,e,g))}else e={subscriber:this,window:this.openWindow(),windowTimeSpan:d},this.add(f.schedule(h,d,e))}l(b,a);b.prototype._next=function(a){for(var b=this.windows,c=b.length,d=0;d<c;d++)b[d].next(a)};b.prototype._error=function(a){for(var b=
this.windows;0<b.length;)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){for(var a=this.windows;0<a.length;)a.shift().complete();this.destination.complete()};b.prototype.openWindow=function(){var a=new f.Subject;this.windows.push(a);var b=this.destination;b.add(a);b.next(a);return a};b.prototype.closeWindow=function(a){a.complete();var b=this.windows;b.splice(b.indexOf(a),1)};return b}(b.Subscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(10),m=a(9),l=a(4),f=a(3);b=a(5);var e=a(6);g.windowToggle=function(a,b){return this.lift(new c(a,b))};var c=function(){function a(b,c){this.openings=b;this.closingSelector=c}a.prototype.call=function(a){return new d(a,this.openings,this.closingSelector)};return a}(),d=function(a){function b(c,d,f){a.call(this,c);this.openings=d;this.closingSelector=f;this.contexts=[];this.add(this.openSubscription=
e.subscribeToResult(this,d,d))}h(b,a);b.prototype._next=function(a){var b=this.contexts;if(b)for(var c=b.length,d=0;d<c;d++)b[d].window.next(a)};b.prototype._error=function(b){var c=this.contexts;this.contexts=null;if(c)for(var d=c.length,e=-1;++e<d;){var f=c[e];f.window.error(b);f.subscription.unsubscribe()}a.prototype._error.call(this,b)};b.prototype._complete=function(){var b=this.contexts;this.contexts=null;if(b)for(var c=b.length,d=-1;++d<c;){var e=b[d];e.window.complete();e.subscription.unsubscribe()}a.prototype._complete.call(this)};
b.prototype._unsubscribe=function(){var a=this.contexts;this.contexts=null;if(a)for(var b=a.length,c=-1;++c<b;){var d=a[c];d.window.unsubscribe();d.subscription.unsubscribe()}};b.prototype.notifyNext=function(a,b,c,d){if(a===this.openings){d=l.tryCatch(this.closingSelector)(b);if(d===f.errorObject)return this.error(f.errorObject.e);a=new k.Subject;b=new m.Subscription;c={window:a,subscription:b};this.contexts.push(c);d=e.subscribeToResult(this,d,c);d.context=c;b.add(d);this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(a))};
b.prototype.notifyError=function(a){this.error(a)};b.prototype.notifyComplete=function(a){a!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(a.context))};b.prototype.closeWindow=function(a){var b=this.contexts,c=b[a],d=c.window,c=c.subscription;b.splice(a,1);d.complete();c.unsubscribe()};return b}(b.OuterSubscriber)},function(b,g,a){var h=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)};b=a(2);var k=a(10),m=a(9),l=a(4),f=a(3);g.windowWhen=function(a){return this.lift(new e(a))};var e=function(){function a(b){this.closingSelector=b}a.prototype.call=function(a){return new c(a,this.closingSelector)};return a}(),c=function(a){function b(c,d){a.call(this,c);this.destination=c;this.closingSelector=d;this.openWindow()}h(b,a);b.prototype._next=function(a){this.window.next(a)};b.prototype._error=function(a){this.window.error(a);this.destination.error(a);this._unsubscribeClosingNotification()};
b.prototype._complete=function(){this.window.complete();this.destination.complete();this._unsubscribeClosingNotification()};b.prototype.unsubscribe=function(){a.prototype.unsubscribe.call(this);this._unsubscribeClosingNotification()};b.prototype._unsubscribeClosingNotification=function(){var a=this.closingNotification;a&&a.unsubscribe()};b.prototype.openWindow=function(){var a=this.closingNotification;a&&(this.remove(a),a.unsubscribe());(a=this.window)&&a.complete();a=this.window=new k.Subject;this.destination.next(a);
var b=l.tryCatch(this.closingSelector)();if(b===f.errorObject)a=f.errorObject.e,this.destination.error(a),this.window.error(a);else{var c=this.closingNotification=new m.Subscription;c.add(b.subscribe(new d(this)));this.add(c);this.add(a)}};return b}(b.Subscriber),d=function(a){function b(c){a.call(this);this.parent=c}h(b,a);b.prototype._next=function(){this.parent.openWindow()};b.prototype._error=function(a){this.parent.error(a)};b.prototype._complete=function(){this.parent.openWindow()};return b}(b.Subscriber)},
function(b,g,a){var h=function(a,b){function e(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)},k=a(4),m=a(3);b=a(5);var l=a(6);g.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var e;"function"===typeof a[a.length-1]&&(e=a.pop());return this.lift(new f(a,e))};var f=function(){function a(b,c){this.observables=b;this.project=c}a.prototype.call=function(a){return new e(a,
this.observables,this.project)};return a}(),e=function(a){function b(d,e,f){a.call(this,d);this.observables=e;this.project=f;this.toRespond=[];d=e.length;this.values=Array(d);for(f=0;f<d;f++)this.toRespond.push(f);for(f=0;f<d;f++){var g=e[f];this.add(l.subscribeToResult(this,g,g,f))}}h(b,a);b.prototype.notifyNext=function(a,b,c,d){this.values[c]=b;a=this.toRespond;0<a.length&&(c=a.indexOf(c),-1!==c&&a.splice(c,1))};b.prototype.notifyComplete=function(){};b.prototype._next=function(a){if(0===this.toRespond.length){var b=
this.destination,c=this.project;a=[a].concat(this.values);c?(c=k.tryCatch(this.project).apply(this,a),c===m.errorObject?b.error(c.e):b.next(c)):b.next(a)}};return b}(b.OuterSubscriber)},function(b,g,a){var h=a(81);g.zipProto=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.unshift(this);return h.zip.apply(this,a)}},function(b,g,a){var h=a(82);g.zipAll=function(a){return this.lift(new h.ZipOperator(a))}},function(b,g,a){var h=function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)},k=a(337);b=function(a){function b(){a.apply(this,arguments)}h(b,a);b.prototype._schedule=function(b,e){void 0===e&&(e=0);if(0<e)return a.prototype._schedule.call(this,b,e);this.delay=e;this.state=b;var c=this.scheduler;c.actions.push(this);c.scheduledId||(c.scheduledId=k.Immediate.setImmediate(function(){c.scheduledId=null;c.flush()}));return this};b.prototype._unsubscribe=function(){var b=this.scheduler,e=b.scheduledId,
c=b.actions;a.prototype._unsubscribe.call(this);0===c.length&&(b.active=!1,null!=e&&(b.scheduledId=null,k.Immediate.clearImmediate(e)))};return b}(a(50).FutureAction);g.AsapAction=b},function(b,g,a){var h=function(a,b){function f(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)},k=a(332);b=function(a){function b(){a.apply(this,arguments)}h(b,a);b.prototype.scheduleNow=function(a,b){return(new k.AsapAction(this,
a)).schedule(b)};return b}(a(83).QueueScheduler);g.AsapScheduler=b},function(b,g,a){var h=function(a,b){function g(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};b=function(a){function b(){a.apply(this,arguments)}h(b,a);b.prototype._schedule=function(b,f){void 0===f&&(f=0);if(0<f)return a.prototype._schedule.call(this,b,f);this.delay=f;this.state=b;var e=this.scheduler;e.actions.push(this);e.flush();return this};
return b}(a(50).FutureAction);g.QueueAction=b},function(b,g,a){var h=function(a,b){function g(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)};b=function(a){function b(g,f){a.call(this);this.subject=g;this.observer=f;this.isUnsubscribed=!1}h(b,a);b.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var a=this.subject,b=a.observers;this.subject=null;b&&0!==b.length&&!a.isUnsubscribed&&
(a=b.indexOf(this.observer),-1!==a&&b.splice(a,1))}};return b}(a(9).Subscription);g.SubjectSubscription=b},function(b,g){var a=function(){function a(){this.values={}}a.prototype["delete"]=function(a){this.values[a]=null;return!0};a.prototype.set=function(a,b){this.values[a]=b;return this};a.prototype.get=function(a){return this.values[a]};a.prototype.forEach=function(a,b){var g=this.values,f;for(f in g)g.hasOwnProperty(f)&&null!==g[f]&&a.call(b,g[f],f)};a.prototype.clear=function(){this.values={}};
return a}();g.FastMap=a},function(b,g,a){b=a(15);a=function(){function a(b){this.root=b;b.setImmediate&&"function"===typeof b.setImmediate?(this.setImmediate=b.setImmediate.bind(b),this.clearImmediate=b.clearImmediate.bind(b)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=
this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate(),b=function l(a){delete l.instance.tasksByHandle[a]},b.instance=this,this.clearImmediate=b)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)};a.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)};
a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return Boolean(a&&"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var b=!0,g=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("","*");a.onmessage=g;return b}return!1};a.prototype.partiallyApplied=function(a){for(var b=[],g=1;g<arguments.length;g++)b[g-1]=arguments[g];g=function e(){var a=e.handler,b=e.args;"function"===typeof a?
a.apply(void 0,b):(new Function(""+a))()};g.handler=a;g.args=b;return g};a.prototype.addFromSetImmediateArguments=function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function l(){var a=l.instance,b=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,b));return b};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=
function(){var a=this.root,b="setImmediate$"+a.Math.random()+"$",g=function e(c){var d=e.instance;c.source===a&&"string"===typeof c.data&&0===c.data.indexOf(b)&&d.runIfPresent(+c.data.slice(b.length))};g.instance=this;a.addEventListener("message",g,!1);g=function c(){var a=c,b=a.messagePrefix,a=a.instance,g=a.addFromSetImmediateArguments(arguments);a.root.postMessage(b+g,"*");return g};g.instance=this;g.messagePrefix=b;return g};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,
a),0);else{var b=this.tasksByHandle[a];if(b){this.currentlyRunningATask=!0;try{b()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,b=new this.root.MessageChannel;b.port1.onmessage=function(b){a.runIfPresent(b.data)};var g=function e(){var a=e,b=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);b.port2.postMessage(a);return a};g.channel=b;g.instance=this;return g};a.prototype.createReadyStateChangeSetImmediate=
function(){var a=function l(){var a=l.instance,b=a.root.document,c=b.documentElement,d=a.addFromSetImmediateArguments(arguments),g=b.createElement("script");g.onreadystatechange=function(){a.runIfPresent(d);g.onreadystatechange=null;c.removeChild(g);g=null};c.appendChild(g);return d};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function l(){var a=l.instance,b=a.addFromSetImmediateArguments(arguments);a.root.setTimeout(a.partiallyApplied(a.runIfPresent,b),0);
return b};a.instance=this;return a};return a}();g.ImmediateDefinition=a;g.Immediate=new a(b.root)},function(b,g,a){b=a(15);a=a(339);g.Map=b.root.Map||a.MapPolyfill},function(b,g){var a=function(){function a(){this.size=0;this._values=[];this._keys=[]}a.prototype.get=function(a){a=this._keys.indexOf(a);return-1===a?void 0:this._values[a]};a.prototype.set=function(a,b){var g=this._keys.indexOf(a);-1===g?(this._keys.push(a),this._values.push(b),this.size++):this._values[g]=b;return this};a.prototype["delete"]=
function(a){a=this._keys.indexOf(a);if(-1===a)return!1;this._values.splice(a,1);this._keys.splice(a,1);this.size--;return!0};a.prototype.forEach=function(a,b){for(var g=0;g<this.size;g++)a.call(b,this._values[g],this._keys[g])};return a}();g.MapPolyfill=a},function(b,g){g.not=function(a,b){function g(){return!g.pred.apply(g.thisArg,arguments)}g.pred=a;g.thisArg=b;return g}},function(b,g,a){var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(2),m=a(37);g.toSubscriber=function(a,b,e){return a&&"object"===("undefined"===typeof a?"undefined":h(a))?a instanceof k.Subscriber?a:"function"===typeof a[m.rxSubscriber]?a[m.rxSubscriber]():new k.Subscriber(a):k.Subscriber.create(a,b,e)}},function(b,g){g.tryOrThrowError=function(a){function b(){try{b.target.apply(this,arguments)}catch(a){throw a;}}b.target=a;return b}},function(b,g){b.exports=function(a){a.webpackPolyfill||
(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1);return a}},function(b,g){function a(a){return function(b,g){return null==b?g:a*g+(1-a)*b}}b.exports=function(b,g){return b.map(function(a){return a.value.response}).filter(function(a){return 2E3<a.size}).map(function(a){return a.size/a.duration*8E3}).scan(a(g.alpha))}},function(b,g,a){function h(a,b){return"number"==typeof a&&0<a?a:b}function k(a,b){var c=2>=arguments.length||void 0===arguments[2]?0:arguments[2];return x(a,function(a){return a/
b<=1-c})||a[0]}function m(a,b){var c=u(a,function(a){return a.width>=b});return c?c.bitrate:Infinity}function l(a,b){return b?u(a,function(a){return a.lang===b}):null}function f(a,b){return a.filter(function(a){return a.type===b})}var e=a(13);g=a(8);var c=g.BehaviorSubject,d=g.Subscription,n=g.Observable.combineLatest,r=a(21).only,u=a(29),x=a(98),t=a(30),q=a(344),p={defaultLanguage:"fra",defaultSubtitle:"",defaultBufferSize:30,defaultBufferThreshold:.3};b.exports=function(a,b,g){function x(a){return I.distinctUntilChanged().map(function(b){return l(a,
b)||a[0]})}function A(a){return L.distinctUntilChanged().map(function(b){return l(a,b)})}var v=t(3>=arguments.length||void 0===arguments[3]?{}:arguments[3],p),B=v.defaultSubtitle,D=v.defaultBufferSize,J=v.defaultBufferThreshold,H=v.initVideoBitrate,G=v.initAudioBitrate,K=g.videoWidth,M=g.inBackground,I=new c(v.defaultLanguage),L=new c(B),T={audio:new c(G||0),video:new c(H||0)},v=[q(f(a,"audio"),{alpha:.6}).multicast(T.audio),q(f(a,"video"),{alpha:.6}).multicast(T.video)],R=new d;v.forEach(function(a){return R.add(a.connect())});
var S={audio:new c(Infinity),video:new c(Infinity)},P={audio:new c(Infinity),video:new c(Infinity)},F={audio:new c(D),video:new c(D),text:new c(D)};return{setLanguage:function(a){I.next(a)},setSubtitle:function(a){L.next(a)},getLanguage:function(){return I.value},getSubtitle:function(){return L.value},getAverageBitrates:function(){return T},getAudioMaxBitrate:function(){return P.audio.value},getVideoMaxBitrate:function(){return P.video.value},getAudioBufferSize:function(){return F.audio.value},getVideoBufferSize:function(){return F.video.value},
setAudioBitrate:function(a){S.audio.next(h(a,Infinity))},setVideoBitrate:function(a){S.video.next(h(a,Infinity))},setAudioMaxBitrate:function(a){P.audio.next(h(a,Infinity))},setVideoMaxBitrate:function(a){P.video.next(h(a,Infinity))},setAudioBufferSize:function(a){F.audio.next(h(a,D))},setVideoBufferSize:function(a){F.video.next(h(a,D))},getBufferAdapters:function(a){var b=a.type,d=a.bitrates,f=a.representations;a=f[0];var g=void 0;if(1<f.length){a=S[b];var g=P[b],h=T[b].map(function(a,b){var c=void 0,
c=0===b?0:J;return k(d,a,c)}).distinctUntilChanged().debounceTime(2E3).startWith(k(d,T[b].getValue(),0));"video"==b&&(g=n(g,K,M,function(a,b,c){if(c)return d[0];b=m(f,b);return b<a?b:a}));g=n(a,g,h,function(a,b,c){var e=void 0,e=Infinity>a?a:Infinity>b?Math.min(b,c):c;return u(f,function(a){return a.bitrate===k(d,e)})}).distinctUntilChanged(function(a,b){return a.id===b.id})["do"](function(a){return e.info("bitrate",b,a.bitrate)})}else g=r(a);return{representations:g,bufferSizes:F[b]||new c(D)}},
getAdaptationsChoice:function(a,b){if("audio"==a)return x(b);if("text"==a)return A(b);if(1==b.length)return r(b[0]);throw Error("adaptive: unknown type "+a+" for adaptation chooser");},unsubscribe:function(){R&&(R.unsubscribe(),R=null)}}}},function(b,g,a){var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=a(13);a(7);var m=a(32).BufferedRanges;g=a(8);var l=g.Observable,f=g.Subject,e=
l.combineLatest,c=l.defer,d=l.empty,n=l.from,r=l.merge,u=l.timer;g=a(21);var x=g.first,t=g.on,q=a(368).SimpleSet;a=a(93);var p=a.IndexHandler,w=a.OutOfIndexError;b.exports={Buffer:function(a){function b(a){return function(b){return c(function(){return J.updating?x(E).flatMap(function(){return a(b)}):a(b)})}}function g(a,b){for(var c=a.ts,d=a.buffered,e=d.getRange(c),d=d.getOuterRanges(c),f=[],h=0;h<d.length;h++){var l=d[h];c-b<l.end?f.push(l):c+b>l.start&&f.push(l)}e&&(k.debug("buffer: gc removing part of inner range",
f),c-b>e.start&&f.push({start:e.start,end:c-b}),c+b<e.end&&f.push({start:c+b,end:e.end}));return f}function A(){k.warn("buffer: running garbage collector");return M.take(1).flatMap(function(a){var b=g(a,240);0===b.length&&(b=g(a,30));k.debug("buffer: gc cleaning",b);return n(b.map(O)).concatAll()})}function v(a){var b=a.parsed.blob;return U(b)["catch"](function(a){if("QuotaExceededError"!==a.name)throw a;return A().flatMap(function(){return U(b)})})}function B(a){function b(a){if(f.test(a.getId()))return!1;
if(a.isInitSegment()||0>a.getTime())return!0;var d=c.scale(a.getTime()),e=c.scale(a.getDuration());return(d=F.hasRange(d,e))?1.5*d.bitrate<a.getRepresentation().bitrate:!0}var c=new p(H,a),f=new q,g=e(M,P,N).flatMap(function(e,g){var h=e[0],l=e[1],n=new m(J.buffered);I&&!F.equals(n)&&(k.debug("intersect new buffer",D),F.intersect(n));var u=void 0;try{var q=c,t=[];0===g&&(k.debug("add init segment",D),t.push(q.getInitSegment()));if(0===h.readyState)u=t;else{var r=h.ts,p=Math.max(0,Math.min(l,h.liveGap,
(h.duration||Infinity)-r)),h=void 0,x=n.getGap(r),h=x>T&&Infinity>x?Math.min(x,R):0,H=F.getRange(r);if(H&&H.bitrate===a.bitrate){var G=Math.floor(H.end-r);G>h&&(h=G)}var K=q.getSegments(r,h,p),u=t.concat(K)}u=u.filter(b)}catch(O){if(O instanceof w)return L.next({type:"out-of-index",value:O}),d();throw O;}for(n=0;n<u.length;n++)f.add(u[n].getId());return u}).concatMap(function(a){return G({segment:a})}).concatMap(v,function(b){var d=b.parsed;f.remove(b.segment.getId());var e=d.timescale;e&&c.setTimescale(e);
var e=d.nextSegments,d=d.currentSegment,g=void 0,g=e?c.insertNewSegments(e,d):[];d&&F.insert(a.bitrate,c.scale(d.ts),c.scale(d.ts+d.d));return{type:"pipeline",value:h({bufferType:D,addedSegments:g},b)}});return r(g,L)["catch"](function(b){if(412!==b.code)throw b;return l.of({type:"precondition-failed",value:b}).concat(u(2E3)).concat(B(a))}).startWith({type:"buffer",value:{bufferType:D,adaptation:H,representation:a}})}var D=a.bufferType,J=a.sourceBuffer,H=a.adaptation,G=a.pipeline,K=a.adapters,M=a.timings;
a=a.seekings;var I="audio"==D||"video"==D,L=new f,T="video"==D?4:1,R="video"==D?6:1,S=K.representations,P=K.bufferSizes,F=new m,E=r(t(J,"update"),t(J,"error").map(function(a){if(a.target&&a.target.error)throw a.target.error;k.error("buffer: error event",a);throw Error("buffer: error event");})).share(),N=E.ignoreElements().startWith(!0),U=b(function(a){J.appendBuffer(a);return x(E)}),O=b(function(a){J.remove(a.start,a.end);return x(E)});return e(S,a,function(a){return a}).switchMap(B)},EmptyBuffer:function(a){return l.of({type:"buffer",
value:{bufferType:a,adaptation:null,representation:null}})}}},function(b,g){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cache={}}a.prototype.add=function(a,b){var g=a.segment;g.isInitSegment()&&(this.cache[g.getId()]=b)};a.prototype.get=function(a){a=a.segment;return a.isInitSegment()&&(a=this.cache[a.getId()],null!=a)?a:null};return a}();b.exports={InitializationSegmentCache:a}},function(b,g,a){g=a(8).Observable;var h=g.merge,
k=g.interval;a=a(20);var m=a.visibilityChange,l=a.videoSizeChange,f=window.devicePixelRatio||1;b.exports=function(a){var b=m().filter(function(a){return!1===a}),d=m().debounceTime(6E4).filter(function(a){return!0===a}),b=h(b,d).startWith(!1);return{videoWidth:h(k(2E4),l().debounceTime(500)).startWith("init").map(function(){return a.clientWidth*f}).distinctUntilChanged(),inBackground:b}}},function(b,g,a){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g=function(a){function b(g){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");g=a.call(this,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==typeof g&&"function"!==typeof g?this:g}h(b,a);b.getLiveEdge=function(){throw Error("not implemented");
};b.prototype.addSegment=function(a){this.index.timeline.push(a);return!0};return b}(a(94));b.exports=g},function(b,g,a){var h=a(33).Segment;g=function(){function a(b,g,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=b;this.representation=g;this.index=f}a.getLiveEdge=function(){throw Error("not implemented");};a.prototype.checkRange=function(a){var b=this.index,f=b.list;a=Math.floor(a/b.duration);return 0<=a&&a<f.length};a.prototype.createSegment=
function(a,b){var f=this.index,e=f.list[a];return h.create(this.adaptation,this.representation,a,e.media,b,f.duration,0,e.range,null,!1)};a.prototype.getSegments=function(a,b){for(var f=this.index.duration,e=Math.floor(b/f),c=[],d=Math.floor(a/f);d<e;)c.push(this.createSegment(d,d*f)),d++;return c};a.prototype.addSegment=function(){return!1};return a}();b.exports=g},function(b,g,a){var h=a(33).Segment;g=function(){function a(b,g,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=b;this.representation=g;this.index=f}a.getLiveEdge=function(a,b){return Date.now()/1E3-b.availabilityStartTime-b.suggestedPresentationDelay};a.prototype.checkRange=function(){return!0};a.prototype.createSegment=function(a){var b=this.index,f=b.startNumber,b=b.duration;a=Math.floor(a/b)+(null==f?1:f);return h.create(this.adaptation,this.representation,a,this.index.media,a*b,this.index.duration,a,null,null,!1)};a.prototype.getSegments=function(a,b){for(var f=this.index.duration,e=[],
c=a;c<=b;c+=f)e.push(this.createSegment(c));return e};a.prototype.addSegment=function(){return!1};return a}();b.exports=g},function(b,g,a){function h(a,b,f){function g(a){f.next(a)}function h(a){var b=D.get(a);return null===b?c(C(a).timeout(B,d),J):b&&"function"==typeof b.subscribe?b["catch"](function(){return c(C(a).timeout(B,d),J)}):e.of(b)}function l(b,c){var d=k({response:c},b);D.add(b,c);r.schedule(g,0,{type:a,value:d});return d}function y(a,b){return k({parsed:b},a)}var z=b.resolver,C=b.loader,
A=b.parser,v=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];A||(A=e.of);C||(C=e.of);z||(z=e.of);var v=m(v,{totalRetry:3,timeout:1E4,cache:n}),B=v.timeout,D=v.cache,J={retryDelay:500,totalRetry:v.totalRetry,shouldRetry:function(a){return 500<=a.code||200>a.code||/timeout/.test(a.message)||/request: error event/.test(a.message)}};return function(a){return z(a).flatMap(h,l).flatMap(A,y)}}var k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,
d)&&(a[d]=c[d])}return a},m=a(30);g=a(8);var l=g.Subject,f=g.Scheduler,e=g.Observable,c=a(371).retryWithBackoff,d=Error("timeout"),n={add:function(){},get:function(){return null}},r=f.asap;b.exports=function(){var a=new l;return{createPipelines:function(b){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],d={requiresMediaSource:function(){return!0!==b.directFile}},e;for(e in b)d[e]=h(e,b[e],a,c[e]);return d},metrics:a}}},function(b,g,a){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){return b?"seeking"==b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"}function l(){}function f(a){w(a.man,"player: no manifest loaded")}
function e(a,b){return a.filter(function(a){return a.type==b}).map(function(a){return a.value})}var c=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},d=a(13),n=a(30);g=a(8);var r=g.Subscription,u=g.BehaviorSubject,x=g.Subject,t=g.Observable.combineLatest,q=a(21).on;g=a(41);var p=a(369),w=a(7),y=a(20),z=y.HTMLVideoElement_,C=y.exitFullscreen,A=y.requestFullscreen,v=y.isFullscreen,B=y.onFullscreenChange,
y=a(95),D=y.getEmptyTimings,J=y.timingsSampler,H=y.toWallClockTime,G=y.fromWallClockTime,K=y.getLiveGap,M=a(347).InitializationSegmentCache,I=a(32).BufferedRanges,L=a(357).parseTimeFragment,T=a(348),R=a(53),S=a(362),P=a(352),F=a(345),E=a(355),N=a(92);a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e=c.videoElement,f=c.transport,g=c.transportOptions,k=c.defaultLanguage,l=c.defaultSubtitle,m=c.initVideoBitrate;c=c.initAudioBitrate;var n=
h(this,a.call(this));n.defaultTransport=f;n.defaultTransportOptions=g||{};e||(e=document.createElement("video"));w(e instanceof z,"requires an actual HTMLVideoElement");e.preload="auto";n.version="2.0.0-alpha2";n.video=e;n.fullscreen=B(e).subscribe(function(){return n.trigger("fullscreenChange",n.isFullscreen())});n.playing=new u;n.stream=new x;var g=P(),f=g.createPipelines,g=g.metrics,q=J(e),e=T(e);n.createPipelines=f;n.metrics=g;n.timings=q;n.adaptive=F(g,q,e,{initVideoBitrate:m,initAudioBitrate:c,
defaultLanguage:k,defaultSubtitle:l});n.muted=.1;n._setPlayerState("STOPPED");n._resetStates();n.log=d;return n}k(b,a);b.prototype._resetStates=function(){this.man=null;this.reps={video:null,audio:null,text:null};this.adas={video:null,audio:null,text:null};this.evts={};this.frag={start:null,end:null}};b.prototype._unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=null)};b.prototype.stop=function(){"STOPPED"!==this.state&&(this._resetStates(),this._unsubscribe(),
this._setPlayerState("STOPPED"))};b.prototype.dispose=function(){this.stop();this.metrics.unsubscribe();this.adaptive.unsubscribe();this.fullscreen.unsubscribe();this.stream.unsubscribe();this.video=this.createPipelines=this.timings=this.stream=this.fullscreen=this.adaptive=this.metrics=null};b.prototype._recordState=function(a,b){this.evts[a]!==b&&(this.evts[a]=b,this.trigger(a+"Change",b))};b.prototype._parseOptions=function(a){var b=a=n(c({},a),{transport:this.defaultTransport,transportOptions:{},
keySystems:[],timeFragment:{},subtitles:[],autoPlay:!1,directFile:!1}),d=b.transport,e=b.url,f=b.keySystems,g=b.timeFragment,k=b.subtitles,h=a,b=h.transportOptions,l=h.manifests,m=h.autoPlay,h=h.directFile,g=L(g);h&&(d="directfile");w(!!l^!!e,"player: you have to pass either a url or a list of manifests");l&&(f=l[0],e=f.url,k=f.subtitles||[],f=l.map(function(a){return a.keySystem}).filter(Boolean));"string"==typeof d&&(d=S[d]);"function"==typeof d&&(d=d(n(b,this.defaultTransportOptions)));w(d,"player: transport "+
a.transport+" is not supported");return{url:e,keySystems:f,subtitles:k,timeFragment:g,autoPlay:m,transport:d}};b.prototype.loadVideo=function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],a=this._parseOptions(a);d.info("loadvideo",a);var b=a.url,c=a.keySystems,f=a.subtitles,g=a.timeFragment,k=a.autoPlay,a=a.transport;this.stop();this.frag=g;this.playing.next(k);var h=this.createPipelines(a,{audio:{cache:new M},video:{cache:new M}}),a=this.timings,n=this.video,b=E({url:b,keySystems:c,
subtitles:f,timings:a,timeFragment:g,adaptive:this.adaptive,pipelines:h,videoElement:n,autoPlay:k}).publish(),f=e(b,"stalled").startWith(null),c=e(b,"loaded").take(1).share(),f=c.mapTo("LOADED").concat(t(this.playing,f,m)).distinctUntilChanged().startWith("LOADING"),n=q(n,["play","pause"]),g=this.subscriptions=new r;g.add(n.subscribe(this._playPauseNext.bind(this),l));g.add(f.subscribe(this._setPlayerState.bind(this),l));g.add(a.subscribe(this._triggerTimeChange.bind(this),l));g.add(b.subscribe(this._streamNext.bind(this),
this._streamError.bind(this),this._streamComplete.bind(this)));g.add(b.connect());this.subscriptions?this._triggerTimeChange():g.unsubscribe();return c};b.prototype._streamNext=function(a){var b=a.type,c=a.value;"buffer"==b&&this._bufferNext(c);"manifest"==b&&this._manifestNext(c);"pipeline"==b&&this.trigger("progress",c.segment);this.stream.next(a)};b.prototype._streamError=function(a){this._resetStates();this.trigger("error",a);this._setPlayerState("STOPPED");this._unsubscribe();this.stream.next({type:"error",
value:a})};b.prototype._streamComplete=function(){this._resetStates();this._setPlayerState("ENDED");this._unsubscribe();this.stream.next({type:"ended",value:null})};b.prototype._manifestNext=function(a){this.man=a;this.trigger("manifestChange",a)};b.prototype._bufferNext=function(a){var b=a.bufferType,c=a.adaptation;a=a.representation;this.reps[b]=a;this.adas[b]=c;"text"==b&&this._recordState("subtitle",c&&c.lang||"");"video"==b&&this._recordState("videoBitrate",a&&a.bitrate||-1);"audio"==b&&(this._recordState("language",
c&&c.lang||""),this._recordState("audioBitrate",a&&a.bitrate||-1))};b.prototype._playPauseNext=function(a){this.playing.next("play"==a.type)};b.prototype._setPlayerState=function(a){this.state!==a&&(this.state=a,d.info("playerStateChange",a),this.trigger("playerStateChange",a))};b.prototype._triggerTimeChange=function(a){this.man&&a?(this.man.isLive&&0<a.ts&&(a.wallClockTime=H(a.ts,this.man),a.liveGap=K(a.ts,this.man)),this.trigger("currentTimeChange",a)):this.trigger("currentTimeChange",D())};b.prototype.getManifest=
function(){return this.man};b.prototype.getVideoElement=function(){return this.video};b.prototype.getNativeTextTrack=function(){return 0<this.video.textTracks.length?this.video.textTracks[0]:null};b.prototype.getPlayerState=function(){return this.state};b.prototype.isLive=function(){f(this);return this.man.isLive};b.prototype.getUrl=function(){f(this);return this.man.locations[0]};b.prototype.getVideoDuration=function(){return this.video.duration};b.prototype.getVideoLoadedTime=function(){return(new I(this.video.buffered)).getSize(this.video.currentTime)};
b.prototype.getVideoPlayedTime=function(){return(new I(this.video.buffered)).getLoaded(this.video.currentTime)};b.prototype.getCurrentTime=function(){if(!this.man)return 0;var a=this.video.currentTime;return this.man.isLive?H(a,this.man):a};b.prototype.getStartTime=function(){return this.frag.start};b.prototype.getEndTime=function(){return this.frag.end};b.prototype.getPlaybackRate=function(){return this.video.playbackRate};b.prototype.getVolume=function(){return this.video.volume};b.prototype.isFullscreen=
function(){return v()};b.prototype.getAvailableLanguages=function(){return this.man&&R.getAvailableLanguages(this.man)||[]};b.prototype.getAvailableSubtitles=function(){return this.man&&R.getAvailableSubtitles(this.man)||[]};b.prototype.getLanguage=function(){return this.adaptive.getLanguage()};b.prototype.getSubtitle=function(){return this.adaptive.getSubtitle()};b.prototype.getAvailableVideoBitrates=function(){var a=R.getAdaptationsByType(this.man,"video");return a[0]&&a[0].bitrates.slice()||[]};
b.prototype.getAvailableAudioBitrates=function(){var a=this.adas.audio;return a&&a.bitrates.slice()||[]};b.prototype.getVideoBitrate=function(){return this.evts.videoBitrate};b.prototype.getAudioBitrate=function(){return this.evts.audioBitrate};b.prototype.getVideoMaxBitrate=function(){return this.adaptive.getVideoMaxBitrate()};b.prototype.getAudioMaxBitrate=function(){return this.adaptive.getAudioMaxBitrate()};b.prototype.getVideoBufferSize=function(){return this.adaptive.getVideoBufferSize()};b.prototype.getAudioBufferSize=
function(){return this.adaptive.getAudioBufferSize()};b.prototype.getAverageBitrates=function(){return this.adaptive.getAverageBitrates()};b.prototype.getMetrics=function(){return this.metrics};b.prototype.getTimings=function(){return this.timings};b.prototype.play=function(){this.video.play()};b.prototype.pause=function(){this.video.pause()};b.prototype.setPlaybackRate=function(a){this.video.playbackRate=a};b.prototype.goToStart=function(){return this.seekTo(this.getStartTime())};b.prototype.seekTo=
function(a){w(this.man);var b=this.video.currentTime;this.man.isLive&&(a=G(a,this.man));return a!==b?(d.info("seek to",a),this.video.currentTime=a):b};b.prototype.setFullscreen=function(){!1===(0>=arguments.length||void 0===arguments[0]?!0:arguments[0])?C():A(this.video)};b.prototype.setVolume=function(a){a!==this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))};b.prototype.mute=function(){this.muted=this.getVolume()||.1;this.setVolume(0)};b.prototype.unMute=function(){0===this.getVolume()&&
this.setVolume(this.muted)};b.prototype.setLanguage=function(a){w(0<=this.getAvailableLanguages().indexOf(a),"player: unknown language");this.adaptive.setLanguage(a)};b.prototype.setSubtitle=function(a){w(!a||0<=this.getAvailableSubtitles().indexOf(a),"player: unknown subtitle");this.adaptive.setSubtitle(a||"");a||this._recordState("subtitle","")};b.prototype.setVideoBitrate=function(a){w(0===a||0<=this.getAvailableVideoBitrates().indexOf(a),"player: video bitrate unavailable");this.adaptive.setVideoBitrate(a)};
b.prototype.setAudioBitrate=function(a){w(0===a||0<=this.getAvailableAudioBitrates().indexOf(a),"player: audio bitrate unavailable");this.adaptive.setAudioBitrate(a)};b.prototype.setVideoMaxBitrate=function(a){this.adaptive.setVideoMaxBitrate(a)};b.prototype.setAudioMaxBitrate=function(a){this.adaptive.setAudioMaxBitrate(a)};b.prototype.setVideoBufferSize=function(a){this.adaptive.setVideoBufferSize(a)};b.prototype.setAudioBufferSize=function(a){this.adaptive.setAudioBufferSize(a)};b.prototype.asObservable=
function(){return this.stream};b.prototype.getDebug=function(){return p.getDebug(this)};b.prototype.showDebug=function(){p.showDebug(this,this.video)};b.prototype.hideDebug=function(){p.hideDebug()};b.prototype.toggleDebug=function(){p.toggleDebug(this,this.video)};b.prototype.getCurrentKeySystem=function(){return N.getCurrentKeySystem()};return b}(g);b.exports=a},function(b,g,a){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g=a(41);var k=a(8),m=k.Observable,l=k.Scheduler,f=a(32).BufferedRanges,e=a(7);a=function(a){function b(e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var g;g=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==
typeof g&&"function"!==typeof g?this:g;g.codec=e;g.updating=!1;g.readyState="opened";g.buffered=new f;return g}h(b,a);b.prototype.appendBuffer=function(a){var b=this;this._lock(function(){return b._append(a)})};b.prototype.remove=function(a,b){var c=this;this._lock(function(){return c._remove(a,b)})};b.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};b.prototype._append=function(){};b.prototype._remove=function(){};b.prototype._abort=function(){};
b.prototype._lock=function(a){var b=this;e(!this.updating,"text-buffer: cannot remove while updating");this.updating=!0;this.trigger("updatestart");(a=a())&&"function"==a.subscribe||(a=m.of(a));a.subscribeOn(l.asap).subscribe(function(){return b._unlock("update")},function(a){return b._unlock("error",a)})};b.prototype._unlock=function(a,b){this.trigger(a,b);this.updating=!1;this.trigger("updateend")};return b}(g);b.exports=a},function(b,g,a){function h(a){return"audio"==a||"video"==a}var k=a(13),
m=a(7),l=a(8).Observable;g=a(21);var f=g.first,e=g.on;g=a(95);var c=g.getLiveGap,d=g.seekingsSampler,n=g.fromWallClockTime,r=a(21).retryWithBackoff,u=l.empty,x=l.merge,t=l.combineLatest,q=Math.min;g=a(20);var p=g.MediaSource_,w=g.sourceOpen,y=g.canPlay,z=g.canSeek,C=g.clearVideoSrc,A=a(356),v=a(93).getLiveEdge,B=a(33).clearSegmentCache;g=a(346);var D=g.Buffer,J=g.EmptyBuffer,H=a(92);a=a(53);var G=a.normalizeManifest,K=a.mergeManifestsIndex,M=a.mutateManifestLiveGap,I=a.getAdaptations,L={retryDelay:3,
totalRetry:250,resetDelay:6E4,shouldRetry:function(a,b){if(/MEDIA_ERR/.test(a.message))return!1;k.warn("stream retry",a,b);return!0}};b.exports=function(a){function b(a,c,d){var e=d.type;d=d.codec;var f=void 0;if(h(e))Y[e]?f=Y[e]:(k.info("add sourcebuffer",d),f=c.addSourceBuffer(d),Y[e]=f);else{if(c=V[e])try{c.abort()}catch(g){k.warn(g)}finally{delete V[e]}if("text"==e)k.info("add text sourcebuffer",d),f=new A(a,d);else throw a="stream: unknown buffer type "+e,k.error(a),Error(a);V[e]=f}return f}
function g(a,b,c){a=c.type;c=void 0;var d=h(a);d?(c=Y[a],delete Y[a]):(c=V[a],delete V[a]);if(c)try{c.abort(),d&&b.removeSourceBuffer(c)}catch(e){k.warn(e)}}function P(a){var b=ca.map(function(b){var d=void 0;la?(d=b.clone(),d.ts=q(b.ts,X),d.duration=q(b.duration,X)):d=b;d.liveGap=c(b.ts,a);return d}),e=d(b);return{timings:b,seekings:e}}function F(a,c,d,e){var f=c.type;return ea.getAdaptationsChoice(f,c.adaptations).switchMap(function(l){if(!l)return g(Q,a,c),J(f);var m=ea.getBufferAdapters(l);l=
D({bufferType:f,sourceBuffer:b(Q,a,c),pipeline:aa[f],adaptation:l,timings:d,seekings:e,adapters:m});return h(f)?l:l["catch"](function(a){k.error("buffer",f,"has crashed",a);return u()})})}function E(a){var b=z(Q)["do"](function(){var b=a.duration,c=ka,d=X,e=/^\d*(\.\d+)? ?%$/;"string"==typeof c&&e.test(c)&&(c=parseFloat(c)/100*b);"string"==typeof d&&e.test(d)&&(X=parseFloat(d)/100*b);if(Infinity===d||"100%"===d)d=b;a.isLive?c=c?n(c,a):v(a):m(c<b&&d<=b,"stream: bad startTime and endTime");k.info("set initial time",
c);Q.playbackRate=1;Q.currentTime=c}),c=y(Q)["do"](function(){k.info("canplay event");fa&&Q.play();fa=!0});return f(t(b,c)).mapTo({type:"loaded",value:!0})}function N(){return ba&&ba.length?H(Q,ba):H.onEncrypted(Q).map(function(){k.error("eme: ciphered media and no keySystem passed");throw Error("eme: ciphered media and no keySystem passed");})}function U(a,b){var c=b.changePlaybackRate,d=void 0===c?!0:c;return a.distinctUntilChanged(function(a,b){var c=b.stalled,e=a.stalled,f=void 0,f=e||c?e&&c?
e.name==c.name:!1:!0;!f&&d&&(e?(k.info("resume playback",b.ts,b.name),Q.playbackRate=e.playback):(k.info("stop playback",b.ts,b.name),Q.playbackRate=0));c&&(c=b.buffered.getNextRangeGap(b.ts),1>c&&(e=b.ts+c+1/60,Q.currentTime=e,k.warn("discontinuity seek",b.ts,c,e)));return f}).map(function(a){return{type:"stalled",value:a.stalled}})}function O(a){return a&&"out-of-index"==a.type}function W(a,b){if(O(b))return k.info("out of index"),ga({url:a.locations[0]}).map(function(b){b=b.parsed;return{type:"manifest",
value:K(a,G(b.url,b.manifest,da))}});b&&"precondition-failed"==b.type&&(M(a,1),k.warn("precondition failed",a.presentationLiveGap));return l.of(b)}function ha(a,b,c,d){var e=I(b).map(function(b){return F(a,b,c,d)}),e=x.apply(null,e);return b.isLive?e.distinctUntilChanged(function(a,b){return O(b)&&O(a)}).concatMap(function(a){return W(b,a)}):e}function ia(){return e(Q,"error").flatMap(function(){var a="stream: video element MEDIA_ERR code "+Q.error.code;k.error(a);throw Error(a);})}var ja=a.url,ba=
a.keySystems,da=a.subtitles,ca=a.timings,Z=a.timeFragment,ea=a.adaptive,aa=a.pipelines,Q=a.videoElement,fa=a.autoPlay;B();var ka=Z.start,la=Infinity>X,X=Z.end,ga=aa.manifest,Y={},V={};a=ca.filter(function(a){var b=a.ts;a=a.duration;return 0<a&&.2>q(a,X)-b});Z=r(function(a){var b=a.url,c=a.mediaSource;a=c?w(c):l.of(null);return t(ga({url:b}),a).flatMap(function(a){a=a[0].parsed;a=G(a.url,a.manifest,da);if(c){var b=void 0,b=Infinity===a.duration?Number.MAX_VALUE:a.duration;c.duration!==b&&(c.duration=
b,k.info("set duration",c.duration))}var b=P(a),d=b.timings,e=b.seekings,b=l.of({type:"manifest",value:a}),f=N(),g=U(d,{changePlayback:aa.requiresMediaSource()}),g=E(a).concat(g);a=ha(c,a,d,e);d=ia();return x(b,g,f,a,d)})},L);return function(a,b){return l.create(function(c){m(p,"player: browser is required to support MediaSource");var d=void 0,e=void 0;aa.requiresMediaSource()?(d=new p,e=URL.createObjectURL(d)):(d=null,e=a);b.src=e;c.next({url:a,mediaSource:d});k.info("create mediasource object",
e);return function(){if(d&&"closed"!=d.readyState)for(var a=d,c=a.readyState,a=a.sourceBuffers,f=0;f<a.length;f++){var g=a[f];try{"open"==c&&g.abort(),d.removeSourceBuffer(g)}catch(h){k.warn("error while disposing souceBuffer",h)}}Object.keys(V).forEach(function(a){a=V[a];try{a.abort()}catch(b){k.warn("error while disposing souceBuffer",b)}});C(b);if(e)try{URL.revokeObjectURL(e)}catch(h){k.warn("error while revoking ObjectURL",h)}e=d=V=Y=null}})}(ja,Q).flatMap(Z).takeUntil(a)}},function(b,g,a){function h(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g=a(354);var k=a(20),m=k.addTextTrack,l=k.isVTTSupported,f=a(13),e=window.VTTCue||window.TextTrackCue;a=function(a){function b(e,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var g;g=a.call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.video=e;g.codec=f;g.isVTT=/^text\/vtt/.test(f);var h=m(e),k=h.trackElement;g.track=h.track;g.trackElement=k;return g}h(b,a);b.prototype.createCuesFromArray=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],f=d.start,g=d.end;(d=d.text)&&b.push(new e(f,g,d))}return b};b.prototype._append=function(a){var b=this;if(this.isVTT&&
l())a=new Blob([a],{type:"text/vtt"}),a=URL.createObjectURL(a),this.trackElement?(this.trackElement.src=a,this.buffered.insert(0,Infinity)):f.warn("vtt subtitles not supported");else if(a=this.createCuesFromArray(a),0<a.length){var c=a[0],d=a[a.length-1],e=this.track.cues;0<e.length&&c.startTime<e[e.length-1].endTime&&this._remove(0,Infinity);a.forEach(function(a){return b.track.addCue(a)});this.buffered.insert(0,c.startTime,d.endTime)}};b.prototype._remove=function(a,b){for(var c=this.track,d=c.cues,
e=0;e<d.length;e++){var f=d[e],g=f.startTime,h=f.endTime;g>=a&&g<=b&&h<=b&&c.removeCue(f)}this.buffered.remove(a,b)};b.prototype._abort=function(){var a=this.trackElement,b=this.video;a&&b&&b.hasChildNodes(a)&&b.removeChild(a);this.track.mode="disabled";this.size=0;this.video=this.track=this.trackElement=null};return b}(g);b.exports=a},function(b,g,a){function h(a){if(!a)return!1;a=a.replace(/^npt\:/,"").replace(/\.$/,"");var b=void 0,g=void 0,h=void 0;a=a.split(":");var k=a.length;switch(k){case 3:b=
parseInt(a[0],10);g=parseInt(a[1],10);h=parseFloat(a[2]);break;case 2:b=0;g=parseInt(a[0],10);h=parseFloat(a[1]);break;case 1:g=b=0;h=parseFloat(a[0]);break;default:return!1}f(23>=b,e);f(59>=g,e);f(1>=k||60>h,e);return 3600*b+60*g+h}function k(a){if(!a)return!1;var b=void 0,g=void 0,h=void 0,k=void 0,l=void 0;a=a.split(":");switch(a.length){case 3:b=parseInt(a[0],10);g=parseInt(a[1],10);h=parseInt(a[2],10);l=k=0;break;case 4:b=parseInt(a[0],10);g=parseInt(a[1],10);h=parseInt(a[2],10);-1===a[3].indexOf(".")?
(k=parseInt(a[3],10),l=0):(a=a[3].split("."),k=parseInt(a[0],10),l=parseInt(a[1],10));break;default:return!1}f(23>=b,e);f(59>=g,e);f(59>=h,e);return 3600*b+60*g+h+.001*k+1E-6*l}function m(a){return new Date(Date.parse(a))}function l(a){return a?a:!1}var f=a(7),e="Invalid MediaFragment";b.exports={parseTimeFragment:function(a){if("string"==typeof a){var b=a,g=b.split(",");f(2>=g.length,e);a=g[0]?g[0]:"";g=g[1]?g[1]:"";f((a||g)&&(!a||g||-1===b.indexOf(",")),e);a=a.replace(/^smpte(-25|-30|-30-drop)?\:/,
"").replace("clock:","");var b=/^((npt\:)?((\d+\:(\d\d)\:(\d\d))|((\d\d)\:(\d\d))|(\d+))(\.\d*)?)?$/,r=/^(\d+\:\d\d\:\d\d(\:\d\d(\.\d\d)?)?)?$/,u=/^((\d{4})(-(\d{2})(-(\d{2})(T(\d{2})\:(\d{2})(\:(\d{2})(\.(\d+))?)?(Z|(([-\+])(\d{2})\:(\d{2})))?)?)?)?)?$/,x=/^(\d*(\.\d+)? ?%)?$/,t=void 0;if(b.test(a)&&b.test(g))t=h;else if(r.test(a)&&r.test(g))t=k;else if(u.test(a)&&u.test(g))t=m;else if(x.test(a)&&x.test(g))t=l;else throw Error(e);a=t(a);g=t(g);f(!1!==a||!1!==g,e);a={start:!1===a?"":a,end:!1===g?
"":g}}else a={start:a.start,end:a.end};"string"==typeof a.start&&"string"==typeof a.end?(a.start||(a.start="0%"),a.end||(a.end="100%")):(a.start||(a.start=0),a.end||(a.end=Infinity));"string"==typeof a.start&&"string"==typeof a.end?(f(0<=parseFloat(a.start)&&100>=parseFloat(a.start),"player: startTime should be between 0% and 100%"),f(0<=parseFloat(a.end)&&100>=parseFloat(a.end),"player: endTime should be between 0% and 100%")):(f(("number"==typeof a.start||a.start instanceof Date)&&("number"==typeof a.end||
a.end instanceof Date),"player: timeFragment should have interface { start, end } where start and end are numbers or dates"),f(a.start<a.end,"player: startTime should be lower than endTime"),f(0<=a.start,"player: startTime should be greater than 0"));return a}}},function(b,g,a){function h(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+ +b+"-"}var k=a(8).Observable,m=k.empty,l=k.merge;a(7);var f=a(56),e=a(42).resolveURL;g=a(359);var c=g.parseSidx,d=g.patchPssh,n=a(360),r=
function(a){a.withMetadata=!0;return f(a)};b.exports=function(){var a=(0>=arguments.length||void 0===arguments[0]?{}:arguments[0]).contentProtectionParser;a||(a=function(){});var b={loader:function(a){var b=a.segment,c=b.getMedia(),d=b.getRange();a=b.getIndexRange();if(b.isInitSegment()&&!(c||d||a))return m();var f=void 0,f=d?{Range:h(d)}:null,d=void 0;c?-1===c.indexOf("$")?d=c:(d=b.getRepresentation(),d=c.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,d.id).replace(/\$Bandwidth\$/g,d.bitrate).replace(/\$Number\$/g,
b.getNumber()).replace(/\$Time\$/g,b.getTime())):d="";b=e(b.getResolvedURL(),d);f=r({url:b,format:"arraybuffer",headers:f});return a?(a=r({url:b,format:"arraybuffer",headers:{Range:h(a)}}),l(f,a)):f},parser:function(a){var b=a.segment;a=new Uint8Array(a.response.blob);var e=void 0,f=void 0,g=void 0,h=b.getIndexRange();if(h=c(a,h?h[0]:0))e=h.segments,f=h.timescale;b.isInitSegment()||(0<=b.getTime()&&0<=b.getDuration()?g={ts:b.getTime(),d:b.getDuration()}:h&&1===h.segments.length&&(g={ts:h.segments[0].ts,
d:h.segments[0].d}));b.isInitSegment()&&(b=b.getAdaptatation(),b.contentProtection&&(a=d(a,b.contentProtection)));return k.of({blob:a,currentSegment:g,nextSegments:e,timescale:f})}};return{directFile:!1,manifest:{loader:function(a){return r({url:a.url,format:"document"})},parser:function(b){b=b.response;return k.of({manifest:n(b.blob,a),url:b.url})}},audio:b,video:b,text:{loader:function(){}}}}},function(b,g,a){function h(a,b){for(var c=a.length,d=0,f=void 0,g=void 0;d+8<c&&(g=e(a,d),f=e(a,d+4),m(0<
g,"dash: out of range size"),f!==b);)d+=g;if(d>=c)return-1;m(d+g<=c,"dash: atom out of range");return d}function k(a){var b=a.systemId;a=a.privateData;b=b.replace(/-/g,"");m(32===b.length);b=r(4,d(b),l(a.length),a);return r(l(b.length+8),n("pssh"),b)}var m=a(7);g=a(28);var l=g.itobe4,f=g.be8toi,e=g.be4toi,c=g.be2toi,d=g.hexToBytes,n=g.strToBytes,r=g.concat;b.exports={parseSidx:function(a,b){var d=h(a,1936286840);if(-1==d)return null;var g=e(a,d),d=d+4+4,k=a[d],d=d+8,l=e(a,d),d=d+4,m=void 0;if(0===
k)m=e(a,d),d+=4,b+=e(a,d)+g,d+=4;else if(1===k)m=f(a,d),d+=8,b+=f(a,d)+g,d+=8;else return null;g=[];d+=2;k=c(a,d);for(d+=2;0<=--k;){var n=e(a,d),d=d+4,r=n&2147483647;if(1==(n&2147483648)>>>31)throw Error("not implemented");n=e(a,d);d+=4;d+=4;g.push({ts:m,d:n,r:0,range:[b,b+r-1]});m+=n;b+=r}return{segments:g,timescale:l}},patchPssh:function(a,b){if(!b||!b.length)return a;var c=h(a,1836019574);if(-1==c)return a;for(var d=e(a,c),f=[a.subarray(c,c+d)],g=0;g<b.length;g++)f.push(k(b[g]));f=r.apply(null,
f);f.set(l(f.length),0);return r(a.subarray(0,c),f,a.subarray(c+d))}}},function(b,g,a){function h(a){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function k(a,b){var c=L[a.nodeName];D(c,"parser: no attributes for "+a.nodeName);for(var d=b||{},e=0;e<c.length;e++){var f=c[e],g=f.k,h=f.fn,k=f.n,f=f.def;a.hasAttribute(g)?d[k||g]=h(a.getAttribute(g)):null!=f&&(d[k||g]=f)}return d}function m(a){return a}function l(a){return"true"==a}function f(a){return"true"==a?!0:"false"==
a?!1:parseInt(a)}function e(a){return new Date(Date.parse(a))}function c(a){if(!a)return 0;var b=G.exec(a);D(b,"parser: "+a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(b[2]||0)+2592E3*parseFloat(b[4]||0)+86400*parseFloat(b[6]||0)+3600*parseFloat(b[8]||0)+60*parseFloat(b[10]||0)+parseFloat(b[12]||0)}function d(a){var b=M.exec(a);if(!b)return-1;a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function n(a){return a}function r(a){return(a=K.exec(a))?[+a[1],+a[2]]:null}function u(a,
b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function x(a){var b=u(a,function(a,b,c){if("Initialization"==b){var d=b=void 0;c.hasAttribute("range")&&(b=r(c.getAttribute("range")));c.hasAttribute("sourceURL")&&(d=c.getAttribute("sourceURL"));a.initialization={range:b,media:d}}return a},k(a));"SegmentBase"==a.nodeName&&(b.indexType="base",b.timeline=[]);return b}function t(a){return u(a,function(a,b,c){"SegmentTimeline"==b&&(a.indexType="timeline",a.timeline=
q(c));return a},x(a))}function q(a){return u(a,function(a,b,c){b=a.length;c=k(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}function p(a){a=t(a);a.indexType||(a.indexType="template");return a}function w(a){var b=t(a);b.list=[];b.indexType="list";return u(a,function(a,b,c){"SegmentURL"==b&&a.list.push(k(c));return a},b)}function y(a){var b=u(a,function(a,b,c){switch(b){case "BaseURL":a.baseURL=c.textContent;break;case "SegmentBase":a.index=x(c);
break;case "SegmentList":a.index=w(c);break;case "SegmentTemplate":a.index=p(c)}return a},{});return k(a,b)}function z(a,b){var c=u(a,function(a,c,d){switch(c){case "ContentProtection":c=b(k(d),d);a.contentProtection=c;break;case "ContentComponent":a.contentComponent=k(d);break;case "BaseURL":a.baseURL=d.textContent;break;case "SegmentBase":a.index=x(d);break;case "SegmentList":a.index=w(d);break;case "SegmentTemplate":a.index=p(d);break;case "Representation":c=y(d),null==c.id&&(c.id=a.representations.length),
a.representations.push(c)}return a},{representations:[]});return k(a,c)}function C(a,b){var c=k(a,u(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":c=z(d,b),null==c.id&&(c.id=a.adaptations.length),a.adaptations.push(c)}return a},{adaptations:[]}));c.baseURL&&c.adaptations.forEach(function(a){return H(a,{baseURL:c.baseURL})});return c}function A(a,b){var c=a.documentElement;D.equal(c.nodeName,"MPD","parser: document root should be MPD");var d=u(c,function(a,
c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);break;case "Period":a.periods.push(C(d,b))}return a},{transportType:"dash",periods:[],locations:[]}),d=k(c,d);if(/isoff-live/.test(d.profiles)){var c=(c=J(d.periods[0].adaptations,function(a){return"video/mp4"==a.mimeType}))&&c.index,e=void 0,e=c.timeline?h(c):Date.now()/1E3-60;d.availabilityStartTime=d.availabilityStartTime.getTime()/1E3;d.presentationLiveGap=Date.now()/1E3-(e+d.availabilityStartTime)}return d}
function v(a,b){return A((new DOMParser).parseFromString(a,"application/xml"),b)}function B(a,b){return"string"==typeof a?v(a,b):A(a,b)}var D=a(7),J=a(29),H=a(30),G=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,K=/([0-9]+)-([0-9]+)/,M=/([0-9]+)(\/([0-9]+))?/;g=[{k:"profiles",fn:m},{k:"width",fn:parseInt},{k:"height",fn:parseInt},{k:"frameRate",fn:d},{k:"audioSamplingRate",fn:m},{k:"mimeType",fn:m},{k:"segmentProfiles",fn:m},{k:"codecs",fn:m},{k:"maximumSAPPeriod",
fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:l}];a=[{k:"timescale",fn:parseInt},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:r},{k:"indexRangeExact",fn:l},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:l}];var I=a.concat([{k:"duration",fn:parseInt},{k:"startNumber",fn:parseInt}]),L={ContentProtection:[{k:"schemeIdUri",fn:m},{k:"value",fn:m}],SegmentURL:[{k:"media",fn:m},{k:"mediaRange",fn:r},{k:"index",fn:m},{k:"indexRange",
fn:r}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:a,SegmentTemplate:I.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:m},{k:"media",fn:m},{k:"bitstreamSwitching",fn:m}]),SegmentList:I,ContentComponent:[{k:"id",fn:m},{k:"lang",fn:m},{k:"contentType",fn:m},{k:"par",fn:n}],Representation:g.concat([{k:"id",fn:m},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:g.concat([{k:"id",
fn:m},{k:"group",fn:parseInt},{k:"lang",fn:m},{k:"contentType",fn:m},{k:"par",fn:n},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:d},{k:"maxFrameRate",fn:d},{k:"segmentAlignment",fn:f},{k:"subsegmentAlignment",fn:f},{k:"bitstreamSwitching",fn:l}]),Period:[{k:"id",fn:m},{k:"start",fn:c},{k:"duration",fn:c},{k:"bitstreamSwitching",
fn:l}],MPD:[{k:"id",fn:m},{k:"profiles",fn:m},{k:"type",fn:m},{k:"availabilityStartTime",fn:e},{k:"availabilityEndTime",fn:e},{k:"publishTime",fn:e},{k:"mediaPresentationDuration",fn:c,n:"duration"},{k:"minimumUpdatePeriod",fn:c},{k:"minBufferTime",fn:c},{k:"timeShiftBufferDepth",fn:c},{k:"suggestedPresentationDelay",fn:c},{k:"maxSegmentDuration",fn:c},{k:"maxSubsegmentDuration",fn:c}]};B.parseFromString=v;B.parseFromDocument=A;b.exports=B},function(b,g,a){var h=a(8).Observable;b.exports={directFile:!0,
manifest:{parser:function(a){a=a.url;return h.of({manifest:{transportType:"directfile",locations:[a],periods:[],isLive:!1,duration:Infinity,adaptations:null},url:a})}}}},function(b,g,a){b.exports={smooth:a(363),dash:a(358),directfile:a(361)}},function(b,g,a){function h(a){return(a=a.match(A))&&a[1]||""}function k(a,b){return b?a.replace(A,"?token="+b):a.replace(A,"")}function m(a){return a.getResolvedURL().replace(/\{bitrate\}/g,a.getRepresentation().bitrate).replace(/\{start time\}/g,a.getTime())}
var l=a(8).Observable,f=l.empty,e=a(56),c=a(28).bytesToStr,d=a(13),n=a(365);g=a(364);var r=g.patchSegment,u=g.createVideoInitSegment,x=g.createAudioInitSegment,t=g.getMdat,q=g.getTraf,p=g.parseTfrf,w=g.parseTfxd;g=a(366).parseSami;a=a(367).parseTTML;var y={"application/x-sami":g,"application/smil":g,"application/ttml+xml":a,"application/ttml+xml+mp4":a,"text/vtt":function(a){return a}},z=/\.(isml?)(\?token=\S+)?$/,C=/\.wsx?(\?token=\S+)?/,A=/\?token=(\S+)/,v=function(a){a.withMetadata=!0;return e(a)};
b.exports=function(){function a(b,c){var e=void 0,f=void 0;if(c.getAdaptation().isLive){var g=q(b);g?(e=p(g),f=w(g)):d.warn("smooth: could not find traf atom")}else e=null;f||(f={d:c.getDuration(),ts:c.getTime()});return{nextSegments:e,currentSegment:f}}var b=n(0>=arguments.length||void 0===arguments[0]?{}:arguments[0]),e={loader:function(a){a=a.segment;if(a.isInitSegment()){var b=a.getAdaptation();a=a.getRepresentation();var c=void 0,d=b.smoothProtection||{};switch(b.type){case "video":c=u(a.index.timescale,
a.width,a.height,72,72,4,a.codecPrivateData,d.keyId,d.keySystems);break;case "audio":c=x(a.index.timescale,a.channels,a.bitsPerSample,a.packetSize,a.samplingRate,a.codecPrivateData,d.keyId,d.keySystems)}return l.of({blob:c,size:c.length,duration:100})}b=void 0;if(c=a.getRange())b=c[0],b=(c=c[1])&&Infinity!==c?"bytes="+ +b+"-"+ +c:"bytes="+ +b+"-",b={Range:b};a=m(a);return v({url:a,format:"arraybuffer",headers:b})},parser:function(b){var c=b.segment;b=b.response;if(c.isInitSegment())return l.of({blob:b.blob,
timings:null});b=new Uint8Array(b.blob);var d=a(b,c),c=d.nextSegments,d=d.currentSegment;return l.of({blob:r(b,d.ts),nextSegments:c,currentSegment:d})}};return{directFile:!1,manifest:{resolver:function(a){a=a.url;var b=void 0,c=h(a),b=C.test(a)?v({url:k(a,""),format:"document"}).map(function(a){return a.blob.getElementsByTagName("media")[0].getAttribute("src")}):l.of(a);return b.map(function(a){var b=a.match(z);a=b?a.replace(b[1],b[1]+"/manifest"):a;return{url:k(a,c)}})},loader:function(a){return v({url:a.url,
format:"document"})},parser:function(a){a=a.response;return l.of({manifest:b(a.blob),url:a.url})}},audio:e,video:e,text:{loader:function(a){var b=a.segment;if(b.isInitSegment())return f();a=b.getRepresentation().mimeType;b=m(b);return 0<=a.indexOf("mp4")?v({url:b,format:"arraybuffer"}):v({url:b,format:"text"})},parser:function(b){var d=b.response;b=b.segment;var e=b.getAdaptation().lang,f=b.getRepresentation(),g=f.mimeType,f=f.index,h=y[g];if(!h)throw Error("smooth: could not find a text-track parser for the type "+
g);var k=d.blob,d=void 0;0<=g.indexOf("mp4")?(k=new Uint8Array(k),d=c(t(k))):d=k;k=a(k,b);g=k.nextSegments;k=k.currentSegment;return l.of({blob:h(d,e,b.getTime()/f.timescale),currentSegment:k,nextSegments:g})}}}}},function(b,g,a){function h(a,b){var c=w(b.length+8),d;A[a]?d=A[a]:(d=r(a),A[a]=d);return n(c,d,b)}function k(a,b,c,d,e){for(var f=a.length,g=0,h=void 0;g<f;){h=p(a,g);if(1970628964===p(a,g+4)&&p(a,g+8)===b&&p(a,g+12)===c&&p(a,g+16)===d&&p(a,g+20)===e)return a.subarray(g+24,g+h);g+=h}}function m(a,
b){for(var d=a.length,e=0,f=void 0,g=void 0;e+8<d&&(g=p(a,e),f=p(a,e+4),c(0<g,"dash: out of range size"),f!==b);)e+=g;return e<d?a.subarray(e+8,e+g):null}function l(a,b,c,d){var e=[a,b,c];d.forEach(function(a){a=v.pssh(a.systemId,a.privateData,a.keyIds);e.push(a)});return e}function f(a,b,c,d){var e=a.length,f=b.length;c=c.length;a=a.subarray(c,e);e=new Uint8Array(f+(e-c));e.set(b,0);e.set(a,f);e.set(w(b.length+8),d+16);return e}function e(a,b,c,d,e,f,g){c=v.mult("stbl",[c,h("stts",new Uint8Array(8)),
h("stsc",new Uint8Array(8)),h("stsz",new Uint8Array(12)),h("stco",new Uint8Array(8))]);var k=h("url ",new Uint8Array([0,0,0,1])),k=v.dref(k),k=v.mult("dinf",[k]);d=v.mult("minf",[d,k,c]);b=v.hdlr(b);c=v.mdhd(a);b=v.mult("mdia",[c,b,d]);e=v.tkhd(e,f,1);e=v.mult("trak",[e,b]);f=v.trex(1);f=v.mult("mvex",[f]);a=v.mvhd(a,1);g=v.mult("moov",l(a,f,e,g));a=v.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return n(a,g)}var c=a(7),d=a(20).isIE;g=a(28);var n=g.concat,r=g.strToBytes,u=g.hexToBytes,x=g.bytesToHex,
t=g.be2toi,q=g.itobe2,p=g.be4toi,w=g.itobe4,y=g.be8toi,z=g.itobe8,C=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],A={},v={mult:function(a,b){return h(a,n.apply(null,b))},avc1encv:function(a,b,c,d,e,f,g,k,l,m){return h(a,n(6,q(b),16,q(c),q(d),q(e),2,q(f),6,[0,1,g.length],r(g),31-g.length,q(k),[255,255],l,"encv"===a?m:[]))},avcc:function(a,b,c){return h("avcC",n([1,a[1],a[2],a[3],252|(2===c?1:4===c?3:0),225],q(a.length),a,[1],q(b.length),b))},dref:function(a){return h("dref",
n(7,[1],a))},esds:function(a,b){return h("esds",n(4,[3,25],q(a),[0,4,17,64,21],11,[5,2],u(b),[6,1,2]))},frma:function(a){return h("frma",r(a))},free:function(a){return h("free",new Uint8Array(a-8))},ftyp:function(a,b){return h("ftyp",n.apply(null,[r(a),[0,0,0,1]].concat(b.map(r))))},hdlr:function(a){return h("hdlr",n(8,r("audio"===a?"soun":"vide"),12,r("Media Handler")))},mdhd:function(a){return h("mdhd",n(12,w(a),8))},moof:function(a,b){return v.mult("moof",[a,b])},mp4aenca:function(a,b,c,d,e,f,
g,k){return h(a,n(6,q(b),8,q(c),q(d),2,q(e),q(f),2,g,"enca"===a?k:[]))},mvhd:function(a,b){return h("mvhd",n(12,w(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,q(b+1)))},pssh:function(a){var b=1>=arguments.length||void 0===arguments[1]?[]:arguments[1],d=2>=arguments.length||void 0===arguments[2]?[]:arguments[2];a=a.replace(/-/g,"");c(32===a.length,"wrong system id length");var e=void 0,f=void 0,f=d.length;0<f?(e=1,f=n.apply(null,[w(f)].concat(d))):(e=0,f=[]);return h("pssh",n([e,0,0,0],u(a),
f,w(b.length),b))},saio:function(a,b,c,d){return h("saio",n(4,[0,0,0,1],w(a.length+b.length+c.length+d.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return h("saiz",new Uint8Array);var b=p(a,0),c=p(a,4),d=new Uint8Array(9+c);d.set(w(c),5);for(var c=9,e=8,f=void 0,g=void 0;e<a.length;)e+=8,2===(b&2)?(g=2,f=t(a,e),e+=2+6*f):g=f=0,d[c]=6*f+8+g,c++;return h("saiz",d)},schm:function(a,b){return h("schm",n(4,r(a),w(b)))},senc:function(a){return h("senc",a)},smhd:function(){return h("smhd",new Uint8Array(8))},
stsd:function(a){return h("stsd",n.apply(null,[7,[a.length]].concat(a)))},tkhd:function(a,b,c){return h("tkhd",n(w(7),8,w(c),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],q(a),2,q(b),2))},trex:function(a){return h("trex",n(4,w(a),[0,0,0,1],12))},tfdt:function(a){return h("tfdt",n([1,0,0,0],z(a)))},tenc:function(a,b,c){return h("tenc",n(6,[a,b],u(c)))},traf:function(a,b,c,d,e){var f=[a,b,c];d&&f.push(v.senc(d),v.saiz(d),v.saio(e,a,b,c));return v.mult("traf",f)},vmhd:function(){var a=new Uint8Array(12);
a[3]=1;return h("vmhd",a)}},B={traf:function(a){return(a=m(a,1836019558))?m(a,1953653094):null},senc:function(a){return k(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return k(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return k(a,3565190898,3392751253,2387879627,2655430559)},mdat:function(a){return m(a,1835295092)}};b.exports={getMdat:B.mdat,getTraf:B.traf,parseTfrf:function(a){a=B.tfrf(a);if(!a)return[];for(var b=[],c=a[0],d=a[4],e=0;e<d;e++){var f=void 0,
g=void 0;1==c?(g=y(a,16*e+5),f=y(a,16*e+13)):(g=p(a,8*e+5),f=p(a,8*e+9));b.push({ts:g,d:f})}return b},parseTfxd:function(a){if(a=B.tfxd(a))return{d:y(a,12),ts:y(a,4)}},createVideoInitSegment:function(a,b,c,d,f,g,h,k,l){l||(l=[]);var m=h.split("00000001");h=m[2];m=u(m[1]);h=u(h);g=v.avcc(m,h,g);h=void 0;l.length?(k=v.tenc(1,8,k),k=v.mult("schi",[k]),h=v.schm("cenc",65536),m=v.frma("avc1"),k=v.mult("sinf",[m,h,k]),d=v.avc1encv("encv",1,b,c,d,f,"AVC Coding",24,g,k)):d=v.avc1encv("avc1",1,b,c,d,f,"AVC Coding",
24,g);h=v.stsd([d]);return e(a,"video",h,v.vmhd(),b,c,l)},createAudioInitSegment:function(a,b,c,d,f,g,h,k){k||(k=[]);if(!g){g=C.indexOf(f);var l=void 0,l=((32|g&31)<<4|b&31)<<3;g=x(q(l))}g=v.esds(1,g);l=void 0;if(k.length){h=v.tenc(1,8,h);h=v.mult("schi",[h]);var l=v.schm("cenc",65536),m=v.frma("mp4a");h=v.mult("sinf",[m,l,h]);b=v.mp4aenca("enca",1,b,c,d,f,g,h)}else b=v.mp4aenca("mp4a",1,b,c,d,f,g);l=v.stsd([b]);return e(a,"audio",l,v.smhd(),0,0,k)},patchSegment:function(a,b){var c=a.subarray(0,p(a,
0)),e=v.tfdt(b),g=e.length,h=p(c,8),k=p(c,8+h),l=p(c,8+h+8),m=p(c,8+h+8+l),n=c.subarray(8,8+h),r=c.subarray(8+h+8,8+h+8+k-8),k=r.subarray(0,l),m=r.subarray(l,l+m);k.set([0,0,0,1],12);r=B.senc(r);e=v.traf(k,e,m,r,n);n=v.moof(n,e);g=8+h+8+l+g;return d?f(a,n,c,g):8<=c.length-n.length?(c=c.length-n.length,a.set(n,0),a.set(v.free(c),n.length),a.set(w(n.length+8+c),g+16),a):f(a,n,c,g)}}},function(b,g,a){function h(a){return"boolean"==typeof a?a:"string"==typeof a?"TRUE"===a.toUpperCase():!1}function k(a){var b=
a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function m(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:e.concat([8,1,18,16],a)}]}var l=a(7),f=a(29),e=a(28),c={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},d={audio:"mp4a.40.2",video:"avc1.4D401E"};g={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};a={AACL:"mp4a.40.5",AACH:"mp4a.40.5",AVC1:"avc1.4D401E",H264:"avc1.4D401E"};var n={audio:[["Bitrate",
"bitrate",parseInt],["AudioTag","audiotag",parseInt],["FourCC","mimeType",g],["FourCC","codecs",a],["Channels","channels",parseInt],["SamplingRate","samplingRate",parseInt],["BitsPerSample","bitsPerSample",parseInt],["PacketSize","packetSize",parseInt],["CodecPrivateData","codecPrivateData",String]],video:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",g],["FourCC","codecs",a],["MaxWidth","width",parseInt],["MaxHeight","height",parseInt],["CodecPrivateData","codecPrivateData",String]],text:[["Bitrate",
"bitrate",parseInt],["FourCC","mimeType",g]]};b.exports=function(){function a(b,c,d){for(b=b.firstElementChild;b;)d=c(d,b.nodeName,b),b=b.nextElementSibling;return d}function b(e,f){e.hasAttribute("Timescale")&&(f=+e.getAttribute("Timescale"));var g=e.getAttribute("Type"),h=e.getAttribute("Subtype"),k=n[g];l(k,"parser: unrecognized QualityLevel type "+g);var m=0,q=a(e,function(a,b,c){switch(b){case "QualityLevel":b={};for(var d=0;d<k.length;d++){var e=k[d],f=e[0],h=e[2];b[e[1]]="function"==typeof h?
h(c.getAttribute(f)):h[c.getAttribute(f)]}if("video"!=g||b.bitrate>z)b.id=m++,a.representations.push(b);break;case "c":b=a.index;var d=a.index.timeline,e=d.length,f=0<e?d[e-1]:{d:0,ts:0,r:0},h=+c.getAttribute("d"),l=c.getAttribute("t");(c=+c.getAttribute("r"))&&c--;0<e&&!f.d&&(f.d=l-f.ts,d[e-1]=f);0<e&&h==f.d&&null==l?f.r+=(c||0)+1:d.push({d:h,ts:null==l?f.ts+f.d*(f.r+1):+l,r:c});b.timeline=d}return a},{representations:[],index:{timeline:[],indexType:"timeline",timescale:f,initialization:{}}}),p=
q.representations,q=q.index;l(p.length,"parser: adaptation should have at least one representation");var u=p[0].codecs;u||(u=d[g],p.forEach(function(a){return a.codecs=u}));var x=p[0].mimeType;x||(x=c[g],p.forEach(function(a){return a.mimeType=x}));return"ADVT"==h?null:{type:g,index:q,representations:p,name:e.getAttribute("Name"),lang:e.getAttribute("Language"),baseURL:e.getAttribute("Url")}}function g(a){return t((new DOMParser).parseFromString(a,"application/xml"))}function t(c){c=c.documentElement;
l.equal(c.nodeName,"SmoothStreamingMedia","parser: document root should be SmoothStreamingMedia");l(/^[2]-[0-2]$/.test(c.getAttribute("MajorVersion")+"-"+c.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var d=+c.getAttribute("Timescale")||1E7,g=0,m=a(c,function(a,c,f){switch(c){case "Protection":f=f.firstElementChild;l.equal(f.nodeName,"ProtectionHeader","parser: Protection should have ProtectionHeader child");c=e.strToBytes(atob(f.textContent));var h;h=e.le2toi(c,8);h=e.bytesToUTF16Str(c.subarray(10,
10+h));h=(new DOMParser).parseFromString(h,"application/xml").querySelector("KID").textContent;h=e.guidToUuid(atob(h)).toLowerCase();var k=e.hexToBytes(h);f=f.getAttribute("SystemID").toLowerCase().replace(/\{|\}/g,"");c={keyId:h,keySystems:[{systemId:f,privateData:c}].concat(C(k))};a.protection=c;break;case "StreamIndex":if(c=b(f,d))c.id=g++,a.adaptations.push(c)}return a},{protection:null,adaptations:[]}),n=m.protection,m=m.adaptations;m.forEach(function(a){return a.smoothProtection=n});var q=void 0,
p=void 0,x=void 0,t=void 0,z=h(c.getAttribute("IsLive"));if(z)var q=w,x=+c.getAttribute("DVRWindowLength")/d,t=y,p=f(m,function(a){return"video"==a.type}),L=f(m,function(a){return"audio"==a.type}),p=Math.min(k(p.index),k(L.index)),p=Date.now()/1E3-(p+t);return{transportType:"smoothstreaming",profiles:"",type:z?"dynamic":"static",suggestedPresentationDelay:q,timeShiftBufferDepth:x,presentationLiveGap:p,availabilityStartTime:t,periods:[{duration:(+c.getAttribute("Duration")||Infinity)/d,adaptations:m,
laFragCount:+c.getAttribute("LookAheadFragmentCount")}]}}function q(a){return"string"==typeof a?g(a):t(a)}var p=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],w=p.suggestedPresentationDelay||20,y=p.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,z=p.minRepresentationBitrate||19E4,C=p.keySystems||m;q.parseFromString=g;q.parseFromDocument=t;return q}},function(b,g,a){function h(a){return a.replace(l,"\n").replace(m,function(a,b){return String.fromCharCode(b)})}var k=a(7),m=/&#([0-9]+);/g,
l=/<br>/gi,f=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,e=/\s*<p class=([^>]+)>(.*)/i,c=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.exports={parseSami:function(a,b){for(var g=/<sync[ >]/ig,l=/<sync[ >]|<\/body>/ig,m=[],t=a.match(f)[1],q=void 0,p=l.exec(a),q=/\.(\S+)\s*{([^}]*)}/gi,p={},w=void 0;w=q.exec(t);){var y=w[1],w=w[2].match(/\s*lang:\s*(\S+);/i)[1];y&&w&&(p[w]=y)}t=p[b];for(k(t,"sami: could not find lang "+b+" in CSS");;){q=g.exec(a);p=l.exec(a);if(!q&&!p)break;if(!q||!p||q.index>=p.index)throw Error("parse error");
p=a.slice(q.index,p.index);q=p.match(c);if(!q)throw Error("parse error: sync time attribute");y=+q[1];if(isNaN(y))throw Error("parse error: sync time attribute NaN");for(var q=m,p=p.split("\n"),y=y/1E3,w=p.length,z=void 0;0<=--w;)if(z=p[w].match(e)){var C=z[2];t===z[1]&&("&nbsp;"===C?q[q.length-1].end=y:q.push({text:h(C),start:y}))}}return m}}},function(b,g){function a(b,c){var f=0;b=b.firstChild;for(var g=[],l=void 0;b;){if(1===b.nodeType)switch(b.tagName.toUpperCase()){case "P":var l=b,t=c,q=h(l.getAttribute("begin"),
t),p=h(l.getAttribute("end"),t),w=h(l.getAttribute("dur"),0);if("number"==!("undefined"===typeof q||k(q))&&"number"==!("undefined"===typeof p||k(p))&&"number"==!("undefined"===typeof w||k(w)))throw Error("ttml: unsupported timestamp format");0<w?(null==q&&(q=f||t),null==p&&(p=q+w)):null==p&&(p=h(l.getAttribute("duration"),0),p=0<=p?p+q:Number.MAX_VALUE);l={id:l.getAttribute("xml:id")||l.getAttribute("id"),text:decodeURIComponent(e(l.innerHTML.replace(m,"\n"))),start:q,end:p};f=l.end;g.push(l);break;
case "DIV":l=h(b.getAttribute("begin"),0),null==l&&(l=c),g.push.apply(g,a(b,l))}b=b.nextSibling}return g}function h(a,b){if(!a)return null;var e=void 0;if(e=a.match(l)){var g=e[3],h=e[4],k=e[6];return 3600*parseInt(e[2]||0,10)+60*parseInt(g,10)+parseInt(h,10)+parseFloat("0."+k)}return(e=a.match(f))?(g=e[4],parseFloat(e[1])*c[g]+b):null}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===
Symbol?"symbol":typeof a},m=/<br[^>]+>/gm,l=/^(([0-9]+):)?([0-9]+):([0-9]+)(\.([0-9]+))?$/,f=/(([0-9]+)(\.[0-9]+)?)(ms|h|m|s)/,e=window.escape,c={h:3600,m:60,s:1,ms:.001};b.exports={parseTTML:function(b,c,e){c=void 0;c="string"==typeof b?(new DOMParser).parseFromString(b,"text/xml"):b;if(!(c instanceof window.Document||c instanceof window.HTMLElement))throw Error("ttml: needs a Document to parse");b=c.querySelector("tt");if(!b)throw Error("ttml: could not find <tt> tag");b=a(b.querySelector("body"),
0);for(c=0;c<b.length;c++){var f=b[c];f.start+=e;f.end+=e}return b}}},function(b,g){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.hash={}}a.prototype.add=function(a){this.hash[a]=!0};a.prototype.remove=function(a){delete this.hash[a]};a.prototype.test=function(a){return!0===this.hash[a]};return a}();b.exports={SimpleSet:a}},function(b,g,a){function h(a){return null==a?"":String(a).replace(n,function(a){return r[a]})}function k(a){var b=
a.getAverageBitrates(),c=void 0,d=void 0;b.video.take(1).subscribe(function(a){return d=a|0});b.audio.take(1).subscribe(function(a){return c=a|0});return{manifest:a.man,version:a.version,timeFragment:a.frag,currentTime:a.getCurrentTime(),state:a.getPlayerState(),buffer:e(a.video.buffered),volume:a.getVolume(),video:{adaptation:a.adas.video,representation:a.reps.video,maxBitrate:a.getVideoMaxBitrate(),bufferSize:a.getVideoBufferSize(),avrBitrate:d},audio:{adaptation:a.adas.audio,representation:a.reps.audio,
maxBitrate:a.getAudioMaxBitrate(),bufferSize:a.getAudioBufferSize(),avrBitrate:c}}}function m(a,b){var c=b.parentNode.querySelector("#cp--debug-infos-content");if(c){var d=void 0;try{d=k(a)}catch(e){return}var f=d,g=f.video,l=f.audio,f=f.manifest,d="<b>Player v"+d.version+"</b> ("+d.state+")<br>";f&&g&&l&&(d+=["Container: "+h(f.transportType),"Live: "+h(""+f.isLive),"Downloading bitrate (Kbit/s):\n          "+(g.representation.bitrate/1E3).toFixed(3)+"/"+(l.representation.bitrate/1E3).toFixed(3),
"Estimated bandwidth (Kbit/s):\n          "+(g.avrBitrate/1E3).toFixed(3)+"/"+(l.avrBitrate/1E3).toFixed(3),"Location: "+f.locations[0]].join("<br>"));c.innerHTML=d}}function l(a,b){var e="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+h(b.offsetTop+10)+"px;\n  left: "+h(b.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',
g=b.parentNode,k=g.querySelector("#cp--debug-infos-container");k||(k=document.createElement("div"),k.setAttribute("id","cp--debug-infos-container"),g.appendChild(k));k.innerHTML=e;d||(d=g.querySelector("#cp--debug-hide-infos"),d.addEventListener("click",function(){return f(b)}));c&&clearInterval(c);c=setInterval(function(){return m(a,b)},1E3);m(a,b)}function f(a){(a=a.parentNode.querySelector("#cp--debug-infos-container"))&&a.parentNode.removeChild(a);c&&(clearInterval(c),c=null);d&&(d.removeEventListener("click",
f),d=null)}var e=a(32).bufferedToArray,c=void 0,d=void 0,n=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};b.exports={getDebug:k,showDebug:l,hideDebug:f,toggleDebug:function(a,b){b.parentNode.querySelector("#cp--debug-infos-container")?f(b):l(a,b)}}},function(b,g){var a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=0;this.limit=b;this._keymap={};this.tail=this.head=null}a.prototype.set=function(a,b){var g=
{key:a,value:b,newer:null,older:null};this._keymap[a]=g;this.tail?(this.tail.newer=g,g.older=this.tail):this.head=g;this.tail=g;if(this.size===this.limit)return this.shift();this.size++;return null};a.prototype.shift=function(){var a=this.head;a&&(this.head.newer?(this.head=this.head.newer,this.head.older=null):this.head=null,a.newer=a.older=null,delete this._keymap[a.key]);return a};a.prototype.get=function(a){a=this._keymap[a];if(null!=a){if(a===this.tail)return a.value;a.newer&&(a===this.head&&
(this.head=a.newer),a.newer.older=a.older);a.older&&(a.older.newer=a.newer);a.newer=null;if(a.older=this.tail)this.tail.newer=a;this.tail=a;return a.value}};return a}();b.exports=a},function(b,g,a){var h=a(8).Observable.timer,k=a(54).getBackedoffDelay,m=a(55);b.exports={retryWithBackoff:function(a,b){var e=b.retryDelay,c=b.totalRetry,d=b.shouldRetry,g=b.resetDelay,r=0,u=void 0;0<g&&(u=m(function(){return r=0},g));return a["catch"](function(a,b){if(d&&!d(a,r)||r++>=c)throw a;var f=k(e,r);return h(f).flatMap(function(){u&&
u();return b})})}}}])});
