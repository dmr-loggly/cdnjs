(function(e,h){"object"===typeof exports&&"object"===typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):"object"===typeof exports?exports.RxPlayer=h():e.RxPlayer=h()})(this,function(){return function(e){function h(l){if(a[l])return a[l].exports;var k=a[l]={exports:{},id:l,loaded:!1};e[l].call(k.exports,k,k.exports,h);k.loaded=!0;return k.exports}var a={};h.m=e;h.c=a;h.p="";return h(0)}([function(e,h,a){a(130);a(131);a(67);a(132);a(133);a(134);a(135);a(136);a(137);
a(138);a(139);a(140);a(141);a(142);a(68);a(143);a(144);a(145);a(146);a(147);a(69);a(148);a(70);a(149);a(150);e.exports=a(197)},function(e,h,a){var l=a(13),k=a(27),d=a(185),g=a(30),b=a(20);e=function(){function a(f){this._isScalar=!1;f&&(this._subscribe=f)}a.prototype.lift=function(f){var b=new a;b.source=this;b.operator=f;return b};a.prototype.subscribe=function(a,b,c){var g=this.operator;a=d.toSubscriber(a,b,c);g?a.add(this._subscribe(g.call(a))):a.add(this._subscribe(a));if(a.syncErrorThrowable&&
(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a};a.prototype.forEach=function(a,c,d){d||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?d=l.root.Rx.config.Promise:l.root.Promise&&(d=l.root.Promise));if(!d)throw Error("no Promise impl found");var k=this;return new d(function(d,u){k.subscribe(function(d){g.tryCatch(a).call(c,d)===b.errorObject&&u(b.errorObject.e)},u,d)})};a.prototype._subscribe=function(a){return this.source.subscribe(a)};a.prototype[k.SymbolShim.observable]=
function(){return this};a.create=function(f){return new a(f)};return a}();h.Observable=e},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},d=a(34);e=a(5);var g=a(46),b=a(129);a=function(a){function m(g,
d,k){a.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=b.empty;break;case 1:if(!g){this.destination=b.empty;break}if("object"===("undefined"===typeof g?"undefined":l(g))){g instanceof m?this.destination=g:(this.syncErrorThrowable=!0,this.destination=new c(this,g));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,g,d,k)}}k(m,a);m.create=function(a,b,f){a=new m(a,b,f);a.syncErrorThrowable=
!1;return a};m.prototype.next=function(a){this.isStopped||this._next(a)};m.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))};m.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};m.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};m.prototype._next=function(a){this.destination.next(a)};m.prototype._error=function(a){this.destination.error(a);this.unsubscribe()};m.prototype._complete=
function(){this.destination.complete();this.unsubscribe()};m.prototype[g.rxSubscriber]=function(){return this};return m}(e.Subscription);h.Subscriber=a;var c=function(a){function b(c,g,m,k){a.call(this);this._parent=c;var l;c=this;d.isFunction(g)?l=g:g&&(c=g,l=g.next,m=g.error,k=g.complete);this._context=c;this._next=l;this._error=m;this._complete=k}k(b,a);b.prototype.next=function(a){if(!this.isStopped&&this._next){var b=this._parent;b.syncErrorThrowable?this.__tryOrSetError(b,this._next,a)&&this.unsubscribe():
this.__tryOrUnsub(this._next,a)}};b.prototype.error=function(a){if(!this.isStopped){var b=this._parent;if(this._error)b.syncErrorThrowable?this.__tryOrSetError(b,this._error,a):this.__tryOrUnsub(this._error,a),this.unsubscribe();else if(b.syncErrorThrowable)b.syncErrorValue=a,b.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),a;}};b.prototype.complete=function(){if(!this.isStopped){var a=this._parent;this._complete&&(a.syncErrorThrowable?this.__tryOrSetError(a,this._complete):this.__tryOrUnsub(this._complete));
this.unsubscribe()}};b.prototype.__tryOrUnsub=function(a,b){try{a.call(this._context,b)}catch(f){throw this.unsubscribe(),f;}};b.prototype.__tryOrSetError=function(a,b,f){try{b.call(this._context,f)}catch(c){return a.syncErrorValue=c,a.syncErrorThrown=!0}return!1};b.prototype._unsubscribe=function(){var a=this._parent;this._parent=this._context=null;a.unsubscribe()};return b}(a)},function(e,h){function a(d){this.name="AssertionError";this.message=d;Error.captureStackTrace&&Error.captureStackTrace(this,
a)}function l(d,g){if(!d)throw new a(g);}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};a.prototype=Error();l.equal=function(a,g,b){return l(a===g,b)};l.iface=function(a,g,b){l(a,g+" should be an object");for(var c in b)l.equal(k(a[c]),b[c],g+" should have property "+c+" as a "+b[c])};e.exports=l},function(e,h){function a(){}var l={NONE:0,ERROR:1,WARNING:2,
INFO:3,DEBUG:4},k=function(){};a.error=k;a.warn=k;a.info=k;a.debug=k;a.setLevel=function(d){"string"==typeof d&&(d=l[d]);a.error=d>=l.ERROR?console.error.bind(console):k;a.warn=d>=l.WARNING?console.warn.bind(console):k;a.info=d>=l.INFO?console.info.bind(console):k;a.debug=d>=l.DEBUG?console.log.bind(console):k};e.exports=a},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===
Symbol?"symbol":typeof a},k=function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)},d=a(28),g=a(79),b=a(34),c=a(30),f=a(20);e=function(){function a(b){this.isUnsubscribed=!1;b&&(this._unsubscribe=b)}a.prototype.unsubscribe=function(){var a=!1,k;if(!this.isUnsubscribed){this.isUnsubscribed=!0;var u=this._unsubscribe,l=this._subscriptions;this._subscriptions=null;if(b.isFunction(u)){var e=c.tryCatch(u).call(this);
e===f.errorObject&&(a=!0,(k=k||[]).push(f.errorObject.e))}if(d.isArray(l))for(var u=-1,h=l.length;++u<h;)e=l[u],g.isObject(e)&&(e=c.tryCatch(e.unsubscribe).call(e),e===f.errorObject&&(a=!0,k=k||[],e=f.errorObject.e,e instanceof m?k=k.concat(e.errors):k.push(e)));if(a)throw new m(k);}};a.prototype.add=function(b){if(b&&b!==this&&b!==a.EMPTY){var f=b;switch("undefined"===typeof b?"undefined":l(b)){case "function":f=new a(b);case "object":if(f.isUnsubscribed||"function"!==typeof f.unsubscribe)break;
else this.isUnsubscribed?f.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(f);break;default:throw Error("Unrecognized subscription "+b+" added to Subscription.");}}};a.prototype.remove=function(b){if(null!=b&&b!==this&&b!==a.EMPTY){var f=this._subscriptions;f&&(b=f.indexOf(b),-1!==b&&f.splice(b,1))}};a.EMPTY=function(a){a.isUnsubscribed=!0;return a}(new a);return a}();h.Subscription=e;var m=function(a){function b(f){a.call(this,"unsubscriptoin error(s)");this.errors=f;this.name=
"UnsubscriptionError"}k(b,a);return b}(Error);h.UnsubscriptionError=m},function(e,h,a){var l=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(g){a.call(this);this.scheduler=g}l(d,a);d.create=function(a){return new d(a)};d.dispatch=function(a){a.subscriber.complete()};d.prototype._subscribe=function(a){var b=this.scheduler;if(b)return b.schedule(d.dispatch,0,
{subscriber:a});a.complete()};return d}(a(1).Observable);h.EmptyObservable=e},function(e,h,a){var l=a(9);e.exports=function(a){return l(a)?a:Object(a)}},function(e,h,a){h=a(61);var l=a(16),k=a(17),d=Object.prototype.toString;a=h(Array,"isArray")||function(a){return k(a)&&l(a.length)&&"[object Array]"==d.call(a)};e.exports=a},function(e,h){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===
Symbol?"symbol":typeof a};e.exports=function(l){var k="undefined"===typeof l?"undefined":a(l);return!!l&&("object"==k||"function"==k)}},function(e,h,a){var l=function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=a(1);var k=a(2),d=a(5),g=a(182),b=a(46),c=a(81),f=a(76);a=function(a){function n(b,f){a.call(this);this.destination=b;this.source=f;this.observers=[];this.hasCompleted=this.dispatching=
this.hasErrored=this.isStopped=this.isUnsubscribed=!1}l(n,a);n.prototype.lift=function(a){var b=new n(this.destination||this,this);b.operator=a;return b};n.prototype.add=function(a){d.Subscription.prototype.add.call(this,a)};n.prototype.remove=function(a){d.Subscription.prototype.remove.call(this,a)};n.prototype.unsubscribe=function(){d.Subscription.prototype.unsubscribe.call(this)};n.prototype._subscribe=function(a){if(this.source)return this.source.subscribe(a);if(!a.isUnsubscribed){if(this.hasErrored)return a.error(this.errorValue);
if(this.hasCompleted)return a.complete();this.throwIfUnsubscribed();var b=new g.SubjectSubscription(this,a);this.observers.push(a);return b}};n.prototype._unsubscribe=function(){this.source=null;this.isStopped=!0;this.destination=this.observers=null};n.prototype.next=function(a){this.throwIfUnsubscribed();this.isStopped||(this.dispatching=!0,this._next(a),this.dispatching=!1,this.hasErrored?this._error(this.errorValue):this.hasCompleted&&this._complete())};n.prototype.error=function(a){this.throwIfUnsubscribed();
this.isStopped||(this.hasErrored=this.isStopped=!0,this.errorValue=a,this.dispatching||this._error(a))};n.prototype.complete=function(){this.throwIfUnsubscribed();this.isStopped||(this.hasCompleted=this.isStopped=!0,this.dispatching||this._complete())};n.prototype.asObservable=function(){return new m(this)};n.prototype._next=function(a){this.destination?this.destination.next(a):this._finalNext(a)};n.prototype._finalNext=function(a){for(var b=-1,f=this.observers.slice(0),c=f.length;++b<c;)f[b].next(a)};
n.prototype._error=function(a){this.destination?this.destination.error(a):this._finalError(a)};n.prototype._finalError=function(a){var b=-1,f=this.observers;this.observers=null;this.isUnsubscribed=!0;if(f)for(var c=f.length;++b<c;)f[b].error(a);this.isUnsubscribed=!1;this.unsubscribe()};n.prototype._complete=function(){this.destination?this.destination.complete():this._finalComplete()};n.prototype._finalComplete=function(){var a=-1,b=this.observers;this.observers=null;this.isUnsubscribed=!0;if(b)for(var f=
b.length;++a<f;)b[a].complete();this.isUnsubscribed=!1;this.unsubscribe()};n.prototype.throwIfUnsubscribed=function(){this.isUnsubscribed&&c.throwError(new f.ObjectUnsubscribedError)};n.prototype[b.rxSubscriber]=function(){return new k.Subscriber(this)};n.create=function(a,b){return new n(a,b)};return n}(e.Observable);h.Subject=a;var m=function(a){function b(f){a.call(this);this.source=f}l(b,a);return b}(e.Observable)},function(e,h,a){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];
var c=Number.POSITIVE_INFINITY,f=null,m=a[a.length-1];g.isScheduler(m)?(f=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(c=a.pop())):"number"===typeof m&&(c=a.pop());return 1===a.length?a[0]:(new k.ArrayObservable(a,f)).lift(new d.MergeAllOperator(c))}var k=a(19),d=a(42),g=a(12);h.merge=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];a.unshift(this);return l.apply(this,a)};h.mergeStatic=l},function(e,h){h.isScheduler=function(a){return a&&"function"===typeof a.schedule}},
function(e,h,a){(function(a,k){var d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},g={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};h.root=g["undefined"===typeof self?"undefined":d(self)]&&self||g["undefined"===typeof window?"undefined":d(window)]&&window;d(h);d(a);!(d=g["undefined"===typeof k?"undefined":d(k)]&&k)||d.global!==d&&d.window!==
d||(h.root=d)}).call(h,a(186)(e),function(){return this}())},function(e,h,a){function l(a,b){return u(a.map(function(a){return(b||A).map(function(b){return b+a})}))}function k(a,b){return D(b,function(b){var f;f=document.createElement(a.tagName);b="on"+b;b in f?f=!0:(f.setAttribute(b,"return;"),f="function"==typeof f[b]);return f})}function d(a,b){var f=void 0;a=l(a,b);return function(b){return b instanceof O?("undefined"==typeof f&&(f=k(b,a)||null),f?y(b,f):w()):z(b,a)}}function g(a,b){function f(){var a=
0>=arguments.length||void 0===arguments[0]?{}:arguments[0];a.errorCode&&(a={systemCode:a.systemCode,code:a.errorCode.code});this.name="KeySessionError";this.mediaKeyError=a;this.message="MediaKeyError code:"+a.code+" and systemCode:"+a.systemCode}f.prototype=Error();return function(c,g){var m="function"==typeof b?b.call(this):this,d=R(m),k=P(m).map(function(a){throw new f(m.error||a);});try{return a.call(this,c,g),r(d,k).take(1)}catch(u){return p["throw"](u)}}}function b(a,b){if(b instanceof L)return b._setVideo(a);
if(a.setMediaKeys)return a.setMediaKeys(b);if(null!==b){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);if(a.msSetMediaKeys)return a.msSetMediaKeys(b);throw Error("compat: cannot find setMediaKeys method");}}function c(){return!!(t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement)}var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var f=arguments[b],c;for(c in f)Object.prototype.hasOwnProperty.call(f,
c)&&(a[c]=f[c])}return a},m=function(){function a(b,f){for(var c=0;c<f.length;c++){var g=f[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,f,c){f&&a(b.prototype,f);c&&a(b,c);return b}}(),u=a(37);a(4);var n=a(35);h=a(21);var q=h.bytesToStr,x=h.strToBytes,v=a(3),p=a(1).Observable,r=a(11).mergeStatic,y=a(71).FromEventObservable.create,w=a(72).NeverObservable.create,z=a(15).on,D=a(22),C=a(86),t=document,B=window,A=["",
"webkit","moz","ms"],O=B.HTMLElement;a=B.HTMLVideoElement;var G=B.MediaSource||B.MozMediaSource||B.WebKitMediaSource||B.MSMediaSource,E=B.MediaKeys||B.MozMediaKeys||B.WebKitMediaKeys||B.MSMediaKeys,H="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),L=function(){},F=void 0;navigator.requestMediaKeySystemAccess&&(F=function(a,b){return C(navigator.requestMediaKeySystemAccess(a,b))});var J=function(){function a(b,f,c){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this._keyType=b;this._mediaKeys=f;this._configuration=c}a.prototype.createMediaKeys=function(){return p.of(this._mediaKeys)};a.prototype.getConfiguration=function(){return this._configuration};m(a,[{key:"keySystem",get:function(){return this._keyType}}]);return a}(),K=d(["loadedmetadata"]),I=d(["sourceopen","webkitsourceopen"]);h=d(["encrypted","needkey"]);var M=d(["keymessage","message"]),R=d(["keyadded","ready"]),P=d(["keyerror","error"]),
Q=d(["keystatuseschange"]);h={onEncrypted:h,onKeyMessage:M,onKeyStatusesChange:Q,onKeyError:P};!F&&a.prototype.webkitGenerateKeyRequest?function(){var a=function(a,b){var f=this;n.call(this);this.sessionId="";this._vid=a;this._key=b;this._con=r(M(a),R(a),P(a)).subscribe(function(a){return f.trigger(a.type,a)})};a.prototype=f({},n.prototype,{generateRequest:function(a,b){this._vid.webkitGenerateKeyRequest(this._key,b)},update:g(function(a,b){if(0<=this._key.indexOf("clearkey")){var f=JSON.parse(q(a)),
c=x(atob(f.keys[0].k)),f=x(atob(f.keys[0].kid));this._vid.webkitAddKey(this._key,c,f,b)}else this._vid.webkitAddKey(this._key,a,null,b);this.sessionId=b}),close:function(){this._con&&this._con.unsubscribe();this._vid=this._con=null}});L=function(a){this.ks_=a};L.prototype={_setVideo:function(a){this._vid=a},createSession:function(){return new a(this._vid,this.ks_)}};var b=function(a){var b=t.querySelector("video")||t.createElement("video");return b&&b.canPlayType?!!b.canPlayType("video/mp4",a):!1};
F=function(a,f){if(!b(a))return p["throw"]();for(var c=0;c<f.length;c++){var g=f[c],m=g.videoCapabilities,d=g.audioCapabilities,k=g.initDataTypes,u=g.sessionTypes,n=g.distinctiveIdentifier,g=g.persistentState,l=!0;if(l=(l=(l=(l=l&&(!k||!!D(k,function(a){return"cenc"===a})))&&(!u||u.filter(function(a){return"temporary"===a}).length===u.length))&&"required"!==n)&&"required"!==g)return c={videoCapabilities:m,audioCapabilities:d,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",
sessionTypes:["temporary"]},p.of(new J(a,new L(a),c))}return p["throw"]()}}():E&&!F&&function(){var a=function(a){n.call(this);this.sessionId="";this._mk=a};a.prototype=f({},n.prototype,{generateRequest:function(a,b){var f=this;this._ss=this._mk.memCreateSession("video/mp4",b);this._con=r(M(this._ss),R(this._ss),P(this._ss)).subscribe(function(a){return f.trigger(a.type,a)})},update:g(function(a,b){v(this._ss);this._ss.update(a,b);this.sessionId=b},function(){return this._ss}),close:function(){this._ss&&
(this._ss.close(),this._ss=null);this._con&&(this._con.unsubscribe(),this._con=null)}});E.prototype.alwaysRenew=!0;E.prototype.memCreateSession=E.prototype.createSession;E.prototype.createSession=function(){return new a(this)};F=function(a,b){if(!E.isTypeSupported(a))return p["throw"]();for(var f=0;f<b.length;f++){var c=b[f],g=c.videoCapabilities,m=c.audioCapabilities,d=c.initDataTypes,c=c.distinctiveIdentifier,k=!0;if(k=(k=k&&(!d||D(d,function(a){return"cenc"===a})))&&"required"!==c)return f={videoCapabilities:g,
audioCapabilities:m,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},p.of(new J(a,new E(a),f))}return p["throw"]()}}();E||(Q=function(){throw Error("eme: MediaKeys is not available");},E={create:Q,isTypeSupported:Q});if(B.WebKitSourceBuffer&&!B.WebKitSourceBuffer.prototype.addEventListener){var Q=B.WebKitSourceBuffer.prototype,T;for(T in n.prototype)Q[T]=n.prototype[T];Q.__listeners=[];Q.appendBuffer=function(a){if(this.updating)throw Error("SourceBuffer updating");
this.trigger("updatestart");this.updating=!0;try{this.append(a)}catch(b){this.__emitUpdate("error",b);return}this.__emitUpdate("update")};Q.__emitUpdate=function(a,b){var f=this;setTimeout(function(){f.trigger(a,b);f.updating=!1;f.trigger("updateend")},0)}}T=d(["fullscreenchange","FullscreenChange"],A.concat("MS"));e.exports={HTMLVideoElement_:a,MediaSource_:G,isCodecSupported:function(a){return!!G&&G.isTypeSupported(a)},sourceOpen:function(a){return"open"==a.readyState?p.of(null):I(a).take(1)},canSeek:function(a){return 1<=
a.readyState?p.of(null):K(a).take(1)},canPlay:function(a){return 4<=a.readyState?p.of(null):z(a,"canplay").take(1)},KeySystemAccess:J,requestMediaKeySystemAccess:F,setMediaKeys:function(a,f){return C(b(a,f))},emeEvents:h,shouldRenewMediaKeys:function(){return H},isFullscreen:c,onFullscreenChange:T,requestFullscreen:function(a){c()||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},
exitFullscreen:function(){c()&&(t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen())},videoSizeChange:function(){return z(B,"resize")},visibilityChange:function(){var a=void 0;null!=t.hidden?a="":null!=t.mozHidden?a="moz":null!=t.msHidden?a="ms":null!=t.webkitHidden&&(a="webkit");var b=a?a+"Hidden":"hidden";return z(t,a+"visibilitychange").map(function(){return t[b]})},clearVideoSrc:function(a){H?
a.removeAttribute("src"):a.src=""},addTextTrack:function(a){var b=void 0,f=void 0;H?(b=a.addTextTrack("subtitles"),b.mode=b.SHOWING):(f=document.createElement("track"),b=f.track,f.kind="subtitles",b.mode="showing",a.appendChild(f));return{track:b,trackElement:f}},isVTTSupported:function(){return!H},isIE:H}},function(e,h,a){a(69);a(70);a(67);a(68);h=a(1).Observable;var l=a(11).mergeStatic,k=a(71).FromEventObservable.create,d=a(41).TimerObservable.create,g=a(72).NeverObservable.create,b=a(49).getBackedoffDelay,
c=a(4),f=a(50);h.prototype.log=function(a,b){a||(a="");return this["do"](function(f){return c.debug(a,"next",b?b(f):f)},function(b){return c.debug(a,"error",b)},function(){return c.debug(a,"completed")})};e.exports={on:function(a,b){return Array.isArray(b)?l.apply(null,b.map(function(b){return k(a,b)})):k(a,b)},first:function(a){return a.take(1)},only:function(a){return g().startWith(a)},retryWithBackoff:function(a,c){var g=c.retryDelay,k=c.totalRetry,l=c.shouldRetry,e=c.resetDelay,h=0,r;0<e&&(r=
f(function(){return h=0},e));return function w(){for(var f=0,c=arguments.length,u=Array(c);f<c;f++)u[f]=arguments[f];return a.apply(null,u)["catch"](function(a){if(l&&!l(a,h)||h++>=k)throw a;a=b(g,h);return d(a).flatMap(function(){r&&r();return w.apply(null,u)})})}}}},function(e,h){e.exports=function(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}},function(e,h){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===
typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};e.exports=function(l){return!!l&&"object"==("undefined"===typeof l?"undefined":a(l))}},function(e,h,a){h=a(61);var l=a(33),k=a(9),d=a(119),g=h(Object,"keys");e.exports=g?function(a){var c=null==a?void 0:a.constructor;return"function"==typeof c&&c.prototype===a||"function"!=typeof a&&l(a)?d(a):k(a)?g(a):[]}:d},function(e,h,a){var l=function(a,c){function f(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===
c?Object.create(c):(f.prototype=c.prototype,new f)};e=a(1);var k=a(40),d=a(6),g=a(12);a=function(a){function c(f,c){a.call(this);this.array=f;this.scheduler=c;c||1!==f.length||(this._isScalar=!0,this.value=f[0])}l(c,a);c.create=function(a,b){return new c(a,b)};c.of=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];g.isScheduler(b)?a.pop():b=null;var u=a.length;return 1<u?new c(a,b):1===u?new k.ScalarObservable(a[0],b):new d.EmptyObservable(b)};c.dispatch=function(a){var b=
a.array,c=a.index,g=a.subscriber;c>=a.count?g.complete():(g.next(b[c]),g.isUnsubscribed||(a.index=c+1,this.schedule(a)))};c.prototype._subscribe=function(a){var b=this.array,g=b.length,d=this.scheduler;if(d)return d.schedule(c.dispatch,0,{array:b,index:0,count:g,subscriber:a});for(d=0;d<g&&!a.isUnsubscribed;d++)a.next(b[d]);a.complete()};return c}(e.Observable);h.ArrayObservable=a},function(e,h){h.errorObject={e:{}}},function(e,h,a){function l(a){for(var b=a.length,c=new Uint8Array(b),f=0;f<b;f++)c[f]=
a.charCodeAt(f)&255;return c}function k(a,b){b||(b="");for(var c="",f=0;f<a.byteLength;f++)c+=(a[f]>>>4).toString(16),c+=(a[f]&15).toString(16),b.length&&(c+=b);return c}var d=a(3);e.exports={totalBytes:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].byteLength;return b},strToBytes:l,bytesToStr:function(a){return String.fromCharCode.apply(null,a)},bytesToUTF16Str:function(a){for(var b="",c=a.length,f=0;f<c;f+=2)b+=String.fromCharCode(a[f]);return b},hexToBytes:function(a){for(var b=a.length,c=
new Uint8Array(b/2),f=0,m=0;f<b;f+=2,m++)c[m]=parseInt(a.substr(f,2),16)&255;return c},bytesToHex:k,concat:function(){for(var a=arguments.length,b=-1,c=0,f;++b<a;)f=arguments[b],c+="number"===typeof f?f:f.length;for(var c=new Uint8Array(c),m=0,b=-1;++b<a;)f=arguments[b],"number"===typeof f?m+=f:0<f.length&&(c.set(f,m),m+=f.length);return c},be2toi:function(a,b){return(a[0+b]<<8)+(a[1+b]<<0)},be4toi:function(a,b){return 16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b]},be8toi:function(a,b){return 4294967296*
(16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b])+16777216*a[4+b]+65536*a[5+b]+256*a[6+b]+a[7+b]},le2toi:function(a,b){return(a[0+b]<<0)+(a[1+b]<<8)},le4toi:function(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]},le8toi:function(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]+(a[4+b]+256*a[5+b]+65536*a[6+b]+16777216*a[7+b]*4294967296)},itobe2:function(a){return new Uint8Array([a>>>8&255,a&255])},itobe4:function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])},
itobe8:function(a){var b=a%4294967296;a=(a-b)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255])},itole2:function(a){return new Uint8Array([a&255,a>>>8&255])},itole4:function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])},itole8:function(a){var b=a%4294967296;a=(a-b)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,b&255,b>>>8&255,b>>>16&255,b>>>24&255])},guidToUuid:function(a){d.equal(a.length,
16,"UUID length should be 16");var b=l(a);a=b[0];var c=b[1],f=b[2],m=b[3],u=b[4],e=b[5],h=b[6],x=b[7],v=b.subarray(8,10),b=b.subarray(10,16),p=new Uint8Array(16);p[0]=m;p[1]=f;p[2]=c;p[3]=a;p[4]=e;p[5]=u;p[6]=x;p[7]=h;p.set(v,8);p.set(b,10);return k(p)},toBase64URL:function(a){return btoa(a).replace(/\=+$/,"")}}},function(e,h,a){h=a(97);a=a(59)(h);e.exports=a},function(e,h,a){h=a(123);var l=a(92);a=a(114)(h,l);e.exports=a},function(e,h,a){var l=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&
(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(){a.apply(this,arguments)}l(d,a);d.prototype.notifyNext=function(a,b,c,f,m){this.destination.next(b)};d.prototype.notifyError=function(a,b){this.destination.error(a)};d.prototype.notifyComplete=function(a){this.destination.complete()};return d}(a(2).Subscriber);h.OuterSubscriber=e},function(e,h,a){var l=function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=
b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)},k=a(19),d=a(28),g=a(12);e=a(24);var b=a(29);h.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&d.isArray(a[0])&&(a=a[0]);a.unshift(this);return(new k.ArrayObservable(a)).lift(new c(b))};h.combineLatestStatic=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var f=b=null;g.isScheduler(a[a.length-1])&&
(f=a.pop());"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&d.isArray(a[0])&&(a=a[0]);return(new k.ArrayObservable(a,f)).lift(new c(b))};var c=function(){function a(b){this.project=b}a.prototype.call=function(a){return new f(a,this.project)};return a}();h.CombineLatestOperator=c;var f=function(a){function f(b,c){a.call(this,b);this.project=c;this.active=0;this.values=[];this.observables=[];this.toRespond=[]}l(f,a);f.prototype._next=function(a){var b=this.toRespond;b.push(b.length);this.observables.push(a)};
f.prototype._complete=function(){var a=this.observables,f=a.length;if(0===f)this.destination.complete();else{this.active=f;for(var c=0;c<f;c++){var g=a[c];this.add(b.subscribeToResult(this,g,g,c))}}};f.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};f.prototype.notifyNext=function(a,b,f,c,g){a=this.values;a[f]=b;b=this.toRespond;0<b.length&&(f=b.indexOf(f),-1!==f&&b.splice(f,1));0===b.length&&(this.project?this._tryProject(a):this.destination.next(a))};f.prototype._tryProject=
function(a){var b;try{b=this.project.apply(this,a)}catch(f){this.destination.error(f);return}this.destination.next(b)};return f}(e.OuterSubscriber);h.CombineLatestSubscriber=f},function(e,h,a){e=a(179);h.asap=new e.AsapScheduler},function(e,h,a){function l(a){var f=d(a);b(f,a);c(f);k(f);return f}function k(a){a["for"]||(a["for"]=g)}function d(a){a.Symbol||(a.Symbol=function(a){return"@@Symbol("+a+"):"+f++});return a.Symbol}function g(a){return"@@"+a}function b(a,b){if(!a.iterator)if("function"===
typeof a["for"])a.iterator=a["for"]("iterator");else if(b.Set&&"function"===typeof(new b.Set)["@@iterator"])a.iterator="@@iterator";else if(b.Map)for(var f=Object.getOwnPropertyNames(b.Map.prototype),c=0;c<f.length;++c){var g=f[c];if("entries"!==g&&"size"!==g&&b.Map.prototype[g]===b.Map.prototype.entries){a.iterator=g;break}}else a.iterator="@@iterator"}function c(a){a.observable||(a.observable="function"===typeof a["for"]?a["for"]("observable"):"@@observable")}e=a(13);h.polyfillSymbol=l;h.ensureFor=
k;var f=0;h.ensureSymbol=d;h.symbolForPolyfill=g;h.ensureIterator=b;h.ensureObservable=c;h.SymbolShim=l(e.root)},function(e,h){h.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(e,h,a){var l=a(13),k=a(28),d=a(80),g=a(1),b=a(27),c=a(127);h.subscribeToResult=function(a,m,u,e){var h=new c.InnerSubscriber(a,u,e);if(!h.isUnsubscribed){if(m instanceof g.Observable){if(m._isScalar){h.next(m.value);h.complete();return}return m.subscribe(h)}if(k.isArray(m)){a=0;for(u=m.length;a<
u&&!h.isUnsubscribed;a++)h.next(m[a]);h.isUnsubscribed||h.complete()}else{if(d.isPromise(m))return m.then(function(a){h.isUnsubscribed||(h.next(a),h.complete())},function(a){return h.error(a)}).then(null,function(a){l.root.setTimeout(function(){throw a;})}),h;if("function"===typeof m[b.SymbolShim.iterator]){for(a=0;a<m.length&&(h.next(m[a]),!h.isUnsubscribed);a++);h.isUnsubscribed||h.complete()}else if("function"===typeof m[b.SymbolShim.observable])if(m=m[b.SymbolShim.observable](),"function"!==typeof m.subscribe)h.error("invalid observable");
else return m.subscribe(new c.InnerSubscriber(a,u,e));else h.error(new TypeError("unknown type returned"))}}}},function(e,h,a){function l(){try{return d.apply(this,arguments)}catch(a){return k.errorObject.e=a,k.errorObject}}var k=a(20),d;h.tryCatch=function(a){d=a;return l}},function(e,h,a){function l(a){if(Array.isArray(a))return a;for(var b=a.length,f=Array(b),c=-1;++c<b;)f[c]={start:a.start(c),end:a.end(c),bitrate:0};return f}function k(a,b){return a.start<=b&&b<a.end}function d(a,b){for(var f=
0;f<b.length;f++)if(g(a,b[f]))return b[f];return null}function g(a,b){return k(a,b.start)||k(a,b.end)||k(b,a.start)}function b(a,b){return k(a,b.start)&&k(a,b.end)}function c(a,b,f){return{start:Math.min(a.start,b.start),end:Math.max(a.end,b.end),bitrate:f}}var f=a(3),m=1/60;h=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ranges=b?l(b):[];this.length=this.ranges.length}a.prototype.start=function(a){return this.ranges[a].start};a.prototype.end=
function(a){return this.ranges[a].end};a.prototype.hasRange=function(a,b){for(var f=a+b,c=0;c<this.ranges.length;c++){var g=this.ranges[c],d=g.start,g=g.end;if(d-a<=m&&a-g<=m&&d-f<=m&&f-g<=m)return this.ranges[c]}return null};a.prototype.getRange=function(a){for(var b=0;b<this.ranges.length;b++)if(k(this.ranges[b],a))return this.ranges[b];return null};a.prototype.getOuterRanges=function(a){for(var b=[],f=0;f<this.ranges.length;f++)k(this.ranges[f],a)||b.push(this.ranges[f]);return b};a.prototype.getGap=
function(a){var b=this.getRange(a);return b?b.end-a:Infinity};a.prototype.getLoaded=function(a){var b=this.getRange(a);return b?a-b.start:0};a.prototype.getSize=function(a){return(a=this.getRange(a))?a.end-a.start:0};a.prototype.getNextRangeGap=function(a){for(var b=this.ranges,f=-1,c=void 0;++f<b.length;){var g=b[f].start;if(g>a){c=g;break}}return null!=c?c-a:Infinity};a.prototype.insert=function(a,d,k){var l=this.ranges;f(d<=k);if(d!=k){a={start:d,end:k,bitrate:a};for(d=0;d<l.length;d++){k=l[d];
var e=g(a,k),u=Math.abs(k.start-a.end)<m||Math.abs(k.end-a.start)<m;if(e||u)if(a.bitrate===k.bitrate)a=c(a,k,k.bitrate),l.splice(d--,1);else if(e)if(b(k,a))l.splice(++d,0,a),e=k.end,k.end=a.start,a={start:a.end,end:e,bitrate:k.bitrate};else if(b(a,k))l.splice(d--,1);else if(k.start<a.start)k.end=a.start;else{k.start=a.end;break}else break;else if(0===d){if(a.end<=l[0].start)break}else if(l[d-1].end<=a.start&&a.end<=k.start)break}l.splice(d,0,a);for(a=0;a<l.length;a++)d=l[a],d.start===d.end&&l.splice(a++,
1);for(a=1;a<l.length;a++)d=l[a-1],k=l[a],d.bitrate===k.bitrate&&(Math.abs(k.start-d.end)<m||Math.abs(k.end-d.start)<m)&&(d=c(d,k,k.bitrate),l.splice(--a,2,d))}this.length=this.ranges.length;return this.ranges};a.prototype.remove=function(b,f){this.intersect(new a([{start:0,end:b},{start:f,end:Infinity}]))};a.prototype.equals=function(a){var b;a:{b=this.ranges;a=a.ranges;for(var f=0;f<b.length;f++){var c=b[f],g=d(c,a);if(!g||g.start>c.start||g.end<c.end){b=!1;break a}}b=!0}return b};a.prototype.intersect=
function(a){var b=this.ranges;a=a.ranges;for(var f=0;f<b.length;f++){var c=b[f],g=d(c,a);g?(g.start>c.start&&(c.start=g.start),g.end<c.end&&(c.end=g.end)):b.splice(f--,1)}this.length=this.ranges.length;return this.ranges};return a}();e.exports={bufferedToArray:l,BufferedRanges:h}},function(e,h,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function d(a){return"number"==typeof a&&!isNaN(a)||!isNaN(+a)?!0:!1}var g=a(36).resolveURL,b=a(214),c=new b(100);h=function(){function a(b,c,g,l,e,h,p,r,y,w){k(this,a);this.id=g;this.ada=b;this.rep=c;this.time=d(e)?+e:-1;this.duration=d(h)?+h:-1;this.number=d(p)?+p:-1;this.media=l?""+l:"";this.range=
Array.isArray(r)?r:null;this.indexRange=Array.isArray(y)?y:null;this.init=!!w}a.create=function(b,g,d,k,l,e,h,r,y,w){d=b.id+"_"+g.id+"_"+d;var z=c.get(d);if(z)return z;b=new a(b,g,d,k,l,e,h,r,y,w);c.set(d,b);return b};a.prototype.getId=function(){return this.id};a.prototype.getAdaptation=function(){return this.ada};a.prototype.getRepresentation=function(){return this.rep};a.prototype.getTime=function(){return this.time};a.prototype.getDuration=function(){return this.duration};a.prototype.getNumber=
function(){return this.number};a.prototype.getMedia=function(){return this.media};a.prototype.getRange=function(){return this.range};a.prototype.getIndexRange=function(){return this.indexRange};a.prototype.isInitSegment=function(){return this.init};a.prototype.getResolvedURL=function(){return g(this.ada.rootURL,this.ada.baseURL,this.rep.baseURL)};return a}();a=function(a){function b(c,d,g,l,e){k(this,b);c=a.call(this,c,d,c.id+"_"+d.id+"_init",g,-1,-1,-1,l,e,!0);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!c||"object"!==typeof c&&"function"!==typeof c?this:c}l(b,a);return b}(h);e.exports={Segment:h,InitSegment:a,clearSegmentCache:function(){c=new b(100)}}},function(e,h,a){var l=a(60),k=a(16);e.exports=function(a){return null!=a&&k(l(a))}},function(e,h){h.isFunction=function(a){return"function"===typeof a}},function(e,h,a){function l(){this.__listeners={}}var k=a(3);l.prototype.addEventListener=function(a,g){k("function"==typeof g,"eventemitter: second argument should be a function");this.__listeners[a]||
(this.__listeners[a]=[]);this.__listeners[a].push(g)};l.prototype.removeEventListener=function(a,g){if(0===arguments.length)this.__listeners={};else if(this.__listeners.hasOwnProperty(a))if(1===arguments.length)delete this.__listeners[a];else{var b=this.__listeners[a],c=b.indexOf(g);~c&&b.splice(c,1);b.length||delete this.__listeners[a]}};l.prototype.trigger=function(a,g){this.__listeners.hasOwnProperty(a)&&this.__listeners[a].slice().forEach(function(a){try{a(g)}catch(c){console.error(c,c.stack)}})};
l.prototype.on=l.prototype.addEventListener;l.prototype.off=l.prototype.removeEventListener;e.exports=l},function(e,h){var a=/^(?:[a-z]+:)?\/\//i,l=/\/[\.]{1,2}\//;e.exports={resolveURL:function(){var k=arguments.length;if(0===k)return"";for(var d="",g=0;g<k;g++){var b=arguments[g];"string"===typeof b&&""!==b&&(a.test(b)?d=b:("/"===b[0]&&(b=b.substr(1)),"/"===d[d.length-1]&&(d=d.substr(0,d.length-1)),d=d+"/"+b))}if(l.test(d)){k=[];d=d.split("/");g=0;for(b=d.length;g<b;g++)".."==d[g]?k.pop():"."!=
d[g]&&k.push(d[g]);k=k.join("/")}else k=d;return k},parseBaseURL:function(a){var d=a.lastIndexOf("/");return 0<=d?a.substring(0,d+1):a}}},function(e,h,a){var l=a(101),k=a(62);e.exports=function(a,g,b){var c=a?a.length:0;b&&k(a,g,b)&&(g=!1);return c?l(a,g):[]}},function(e,h){var a=/^\d+$/;e.exports=function(l,k){l="number"==typeof l||a.test(l)?+l:-1;return-1<l&&0==l%1&&l<(null==k?9007199254740991:k)}},function(e,h,a){var l=a(33),k=a(17);h=Object.prototype;var d=h.hasOwnProperty,g=h.propertyIsEnumerable;
e.exports=function(a){return k(a)&&l(a)&&d.call(a,"callee")&&!g.call(a,"callee")}},function(e,h,a){var l=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(g,b){a.call(this);this.value=g;this.scheduler=b;this._isScalar=!0}l(d,a);d.create=function(a,b){return new d(a,b)};d.dispatch=function(a){var b=a.value,c=a.subscriber;a.done?c.complete():(c.next(b),c.isUnsubscribed||
(a.done=!0,this.schedule(a)))};d.prototype._subscribe=function(a){var b=this.value,c=this.scheduler;if(c)return c.schedule(d.dispatch,0,{done:!1,value:b,subscriber:a});a.next(b);a.isUnsubscribed||a.complete()};return d}(a(1).Observable);h.ScalarObservable=e},function(e,h,a){var l=function(a,b){function g(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)},k=a(78);e=a(1);var d=a(26),g=a(12),b=a(77);a=function(a){function f(f,
l,e){void 0===f&&(f=0);a.call(this);this.period=-1;this.dueTime=0;k.isNumeric(l)?this.period=1>Number(l)&&1||Number(l):g.isScheduler(l)&&(e=l);g.isScheduler(e)||(e=d.asap);this.scheduler=e;this.dueTime=b.isDate(f)?+f-this.scheduler.now():f}l(f,a);f.create=function(a,b,c){void 0===a&&(a=0);return new f(a,b,c)};f.dispatch=function(a){var b=a.index,f=a.period,c=a.subscriber;c.next(b);if(!c.isUnsubscribed){if(-1===f)return c.complete();a.index=b+1;this.schedule(a,f)}};f.prototype._subscribe=function(a){return this.scheduler.schedule(f.dispatch,
this.dueTime,{index:0,period:this.period,subscriber:a})};return f}(e.Observable);h.TimerObservable=a},function(e,h,a){var l=function(a,c){function f(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)};e=a(24);var k=a(29);h.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return this.lift(new d(a))};var d=function(){function a(b){this.concurrent=b}a.prototype.call=function(a){return new g(a,this.concurrent)};
return a}();h.MergeAllOperator=d;var g=function(a){function c(f,c){a.call(this,f);this.concurrent=c;this.hasCompleted=!1;this.buffer=[];this.active=0}l(c,a);c.prototype._next=function(a){this.active<this.concurrent?(this.active++,this.add(k.subscribeToResult(this,a))):this.buffer.push(a)};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<
b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);h.MergeAllSubscriber=g},function(e,h,a){var l=a(152);h.multicast=function(a){return new l.ConnectableObservable(this,"function"===typeof a?a:function(){return a})}},function(e,h,a){var l=function(a,g){function b(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(b.prototype=g.prototype,new b)},k=a(13);e=function(a){function g(b,
c){a.call(this);this.scheduler=b;this.work=c}l(g,a);g.prototype.execute=function(){if(this.isUnsubscribed)throw Error("How did did we execute a canceled Action?");this.work(this.state)};g.prototype.schedule=function(a,c){void 0===c&&(c=0);return this.isUnsubscribed?this:this._schedule(a,c)};g.prototype._schedule=function(a,c){var f=this;void 0===c&&(c=0);this.delay=c;this.state=a;var g=this.id;null!=g&&(this.id=void 0,k.root.clearTimeout(g));this.id=k.root.setTimeout(function(){f.id=null;var a=f.scheduler;
a.actions.push(f);a.flush()},c);return this};g.prototype._unsubscribe=function(){var a=this.id,c=this.scheduler.actions,f=c.indexOf(this);null!=a&&(this.id=null,k.root.clearTimeout(a));-1!==f&&c.splice(f,1);this.scheduler=this.state=this.work=null};return g}(a(5).Subscription);h.FutureAction=e},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(10);var k=a(81),
d=a(76);a=function(a){function b(b){a.call(this);this._value=b}l(b,a);b.prototype.getValue=function(){if(this.hasErrored)k.throwError(this.errorValue);else if(this.isUnsubscribed)k.throwError(new d.ObjectUnsubscribedError);else return this._value};Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});b.prototype._subscribe=function(b){var f=a.prototype._subscribe.call(this,b);f&&!f.isUnsubscribed&&b.next(this._value);return f};b.prototype._next=
function(b){a.prototype._next.call(this,this._value=b)};b.prototype._error=function(b){this.hasErrored=!0;a.prototype._error.call(this,this.errorValue=b)};return b}(e.Subject);h.BehaviorSubject=a},function(e,h,a){e=a(27);h.rxSubscriber=e.SymbolShim["for"]("rxSubscriber")},function(e,h){h.noop=function(){}},function(e,h,a){function l(a,b,f){a.id=a.id||y++;var c=a.adaptations,c=c.concat(f||[]),c=c.map(function(a){return k(a,b)}),c=c.filter(function(a){return 0>w.indexOf(a.type)?(u.info("not supported adaptation type",
a.type),!1):!0});n(0<c.length);f={};for(var g=0;g<c.length;g++){var d=c[g],m=d.type;f[m]=f[m]||[];f[m].push(d)}a.adaptations=f;return a}function k(a,f){n("undefined"!=typeof a.id);q(a,f);var c={};r.forEach(function(b){b in a&&(c[b]=a[b])});var g=a.representations.map(function(a){n("undefined"!=typeof a.id);q(a,c);var b=a.index;n(b);b.timescale||(b.timescale=1);a.bitrate||(a.bitrate=1);"mp4a.40.02"==a.codecs&&(a.codecs="mp4a.40.2");return a}).sort(function(a,b){return a.bitrate-b.bitrate}),d=a.type,
k=a.mimeType;k||(k=g[0].mimeType);n(k);a.mimeType=k;d||(d=a.type=k.split("/")[0]);if("video"==d||"audio"==d)g=g.filter(function(a){return p(b(a))});n(0<g.length,"manifest: no compatible representation for this adaptation");a.representations=g;a.bitrates=g.map(function(a){return a.bitrate});return a}function d(a){Array.isArray(a)||(a=[a]);return x(a.map(function(a){var b=a.mimeType,f=a.url,c=a.language;a=a.languages;c&&(a=[c]);return a.map(function(a){return{id:y++,type:"text",lang:a,mimeType:b,rootURL:f,
baseURL:"",representations:[{id:y++,mimeType:b,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})}))}function g(a,b){for(var c in a)if(b.hasOwnProperty(c)){var d=a[c],k=b[c];"string"==typeof d||"number"==typeof d||"object"==("undefined"===typeof d?"undefined":f(d))&&d instanceof Date?a[c]=k:Array.isArray(d)?(d.length=0,Array.prototype.push.apply(d,k)):a[c]=g(d,k)}return a}function b(a){return a.mimeType+';codecs="'+a.codecs+'"'}function c(a,b){var f=a.adaptations;
return(f=f&&f[b])?f:[]}var f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},m=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var f=arguments[b],c;for(c in f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c])}return a},u=a(4),n=a(3),q=a(23),x=a(37),v=a(36).parseBaseURL,p=a(14).isCodecSupported,r="profiles width height frameRate audioSamplingRate mimeType segmentProfiles codecs maximumSAPPeriod maxPlayoutRate codingDependency index".split(" "),
y=0,w=["audio","video","text"];e.exports={normalizeManifest:function(a,b,f){n(b.transportType);b.id=b.id||y++;b.type=b.type||"static";var c=b.locations;c&&c.length||(b.locations=[a]);b.isLive="dynamic"==b.type;var g={rootURL:v(b.locations[0]),baseURL:b.baseURL,isLive:b.isLive};f&&(f=d(f));a=b.periods.map(function(a){return l(a,g,f)});b=m({},b,a[0]);b.periods=null;b.duration||(b.duration=Infinity);b.isLive&&(b.suggestedPresentationDelay=b.suggestedPresentationDelay||15,b.availabilityStartTime=b.availabilityStartTime||
0);return b},mergeManifestsIndex:function(a,b){var f=a.adaptations,c=b.adaptations,d=function(a){var b=c[a];f[a].forEach(function(a,f){g(a.index,b[f].index)})},k;for(k in f)d(k);return a},mutateManifestLiveGap:function(a){var b=1>=arguments.length||void 0===arguments[1]?1:arguments[1];a.isLive&&(a.presentationLiveGap+=b)},getCodec:b,getAdaptations:function(a){a=a.adaptations;if(!a)return[];var f=[],c;for(c in a){var d=a[c];f.push({type:c,adaptations:d,codec:b(d[0].representations[0])})}return f},
getAdaptationsByType:c,getAvailableSubtitles:function(a){return c(a,"text").map(function(a){return a.lang})},getAvailableLanguages:function(a){return c(a,"audio").map(function(a){return a.lang})}}},function(e,h){function a(a){return a*(1+.3*(2*Math.random()-1))}e.exports={getFuzzedDelay:a,getBackedoffDelay:function(l){return a(l*Math.pow(2,(1>=arguments.length||void 0===arguments[1]?1:arguments[1])-1))}}},function(e,h){e.exports=function(a,l,k){function d(){var g=c-Date.now();if(0<g)b=setTimeout(d,
g);else switch(b=null,f.length){case 0:return a();case 1:return a(f[0]);case 2:return a(f[0],f[1]);case 3:return a(f[0],f[1],f[2]);default:return a.apply(null,f)}}function g(){var a=arguments.length,k=0;for(f=Array(a);k<a;k++)f[k]=arguments[k];if(m&&!e)return e=!0,c=Date.now(),d();a=c;c=Date.now()+l;if(!b||c<a)b&&clearTimeout(b),b=setTimeout(d,l);return g}var b=null,c=0,f=[],m=!(!k||!k.leading),e=!1;g.isWaiting=function(){return!!b};g.dispose=function(){b&&(clearTimeout(b),b=null)};return g}},function(e,
h,a){(function(l){function k(a,b,f){var c=3>=arguments.length||void 0===arguments[3]?null:arguments[3];this.name="RequestError";this.url=a;this.xhr=b;this.code=b.status;this.reason=c;this.message="request: "+f+" ("+a+")";Error.captureStackTrace&&Error.captureStackTrace(this,k)}function d(a,b){var f=b.code,c=b.method,g=b.message;this.name="RestCallMethodError";this.url=a;this.code=f;this.message="restmethodcall: webservice error status "+f+" ("+a+")"+(c?" ("+c+")":"")+(g?"\n"+g:"");Error.captureStackTrace&&
Error.captureStackTrace(this,d)}function g(a,b,f){a=a.querySelector("RestCallResult");var c=+a.querySelector("Status").textContent;if(0>c)throw new d(b,{code:c,method:f});return{output:a.querySelector("Output"),status:c}}function b(a){return"rest-call-method"==a.format?m(a):n.create(function(b){function f(a){var c=a.target,d=c.status;if(200>d||300<=d)return b.error(new k(g,c,c.statusText));var d=Date.now()-v,m;m="document"==e?(new l.DOMParser).parseFromString(c.responseText,"text/xml"):c.response;
if("json"==e&&"string"==typeof m)try{m=JSON.parse(m)}catch(n){m=null}if(null==m)return b.error(new k(g,c,'null response with format "'+e+'" (error while parsing or wrong content-type)'));if(h){var q;if(u){q=u;for(var p={},x,y=0;y<q.length;y++)x=q[y],p[x]=c.getResponseHeader(x);q=p}b.next({blob:m,size:a.total,duration:d,headers:q,url:c.responseURL||g,xhr:c})}else b.next(m);b.complete()}function c(a){b.error(new k(g,a,"error event"))}var g=a.url,d=a.data,m=a.headers,e=a.format,h=a.withMetadata,u=a.responseHeaders,
n=new XMLHttpRequest;n.open(a.method||"GET",g,!0);n.responseType="document"==e?"text":e||"text";if(m)for(var q in m)n.setRequestHeader(q,m[q]);n.addEventListener("load",f,!1);n.addEventListener("error",c,!1);var v=Date.now();n.send(d);return function(){var a=n.readyState;0<a&&4>a&&(n.removeEventListener("load",f),n.removeEventListener("error",c),n.abort());n=null}})}function c(a){return(a||"").toString().replace(q,function(a){return x[a]})}function f(a){var b="",g;for(g in a)var d=a[g],d="object"==
("undefined"===typeof d?"undefined":h(d))?f(d):c(d),b=b+("<"+g+">"+d+"</"+g+">");return b}function m(a){a.method="POST";a.headers={"Content-Type":"application/xml"};a.data=v.replace("{payload}",f(a.data));a.format="document";return b(a).map(function(b){return g(b,a.url,a.ScriptInfo)})}var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},n=a(1).Observable;k.prototype=
Error();d.prototype=Error();var q=/[&<>]/g,x={"&":"&amp;","<":"&lt;",">":"&gt;"},v='<RestCallMethod xmlns:i="http://www.w3.org/2001/XMLSchema-instance">{payload}</RestCallMethod>';b.escapeXml=c;b.RequestError=k;b.RestCallMethodError=d;b.RestCallResult=g;b.getNodeTextContent=function(a,b){var f=a.querySelector(b);return f&&f.textContent};e.exports=b}).call(h,function(){return this}())},function(e,h){var a=Math.max;e.exports=function(l,k){if("function"!=typeof l)throw new TypeError("Expected a function");
k=a(void 0===k?l.length-1:+k||0,0);return function(){for(var d=arguments,g=-1,b=a(d.length-k,0),c=Array(b);++g<b;)c[g]=d[k+g];switch(k){case 0:return l.call(this,c);case 1:return l.call(this,d[0],c);case 2:return l.call(this,d[0],d[1],c)}b=Array(k+1);for(g=-1;++g<k;)b[g]=d[g];b[k]=c;return l.apply(this,b)}}},function(e,h,a){var l=a(7);e.exports=function(a,d,g){if(null!=a){void 0!==g&&g in l(a)&&(d=[g]);g=0;for(var b=d.length;null!=a&&g<b;)a=a[d[g++]];return g&&g==b?a:void 0}}},function(e,h,a){function l(a,
c,f,m,e,h){return a===c?!0:null==a||null==c||!d(a)&&!g(c)?a!==a&&c!==c:k(a,c,l,f,m,e,h)}var k=a(106),d=a(9),g=a(17);e.exports=l},function(e,h){e.exports=function(a){return function(l){return null==l?void 0:l[a]}}},function(e,h,a){var l=a(66);e.exports=function(a,d,g){if("function"!=typeof a)return l;if(void 0===d)return a;switch(g){case 1:return function(b){return a.call(d,b)};case 3:return function(b,c,f){return a.call(d,b,c,f)};case 4:return function(b,c,f,g){return a.call(d,b,c,f,g)};case 5:return function(b,
c,f,g,l){return a.call(d,b,c,f,g,l)}}return function(){return a.apply(d,arguments)}}},function(e,h,a){var l=a(60),k=a(16),d=a(7);e.exports=function(a,b){return function(c,f){var m=c?l(c):0;if(!k(m))return a(c,f);for(var e=b?m:-1,h=d(c);(b?e--:++e<m)&&!1!==f(h[e],e,h););return c}}},function(e,h,a){var l=a(7);e.exports=function(a){return function(d,g,b){var c=l(d);b=b(d);for(var f=b.length,m=a?f:-1;a?m--:++m<f;){var e=b[m];if(!1===g(c[e],e,c))break}return d}}},function(e,h,a){var l=a(95),k=a(99),d=
a(100),g=a(8);e.exports=function(a,c){return function(f,m,e){m=l(m,e,3);return g(f)?(m=d(f,m,c),-1<m?f[m]:void 0):k(f,m,a)}}},function(e,h,a){h=a(55)("length");e.exports=h},function(e,h,a){var l=a(121);e.exports=function(a,d){var g=null==a?void 0:a[d];return l(g)?g:void 0}},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(33),d=a(38),g=a(9);
e.exports=function(a,c,f){if(!g(f))return!1;var m="undefined"===typeof c?"undefined":l(c);return("number"==m?k(f)&&d(c,f.length):"string"==m&&c in f)?(c=f[c],a===a?a===c:c!==c):!1}},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(8),d=a(7),g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,b=/^\w*$/;e.exports=function(a,f){var m="undefined"===
typeof a?"undefined":l(a);return"string"==m&&b.test(a)||"number"==m?!0:k(a)?!1:!g.test(a)||null!=f&&a in d(f)}},function(e,h,a){var l=a(9);e.exports=function(a){return a===a&&!l(a)}},function(e,h,a){var l=a(112),k=a(8),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,g=/\\(\\)?/g;e.exports=function(a){if(k(a))return a;var c=[];l(a).replace(d,function(a,b,d,k){c.push(d?k.replace(g,"$1"):b||a)});return c}},function(e,h){e.exports=function(a){return a}},function(e,h,a){e=a(1);
a=a(157);e.Observable.prototype["catch"]=a._catch},function(e,h,a){e=a(1);a=a(75);e.Observable.prototype.mergeMap=a.mergeMap;e.Observable.prototype.flatMap=a.mergeMap},function(e,h,a){e=a(1);a=a(173);e.Observable.prototype.startWith=a.startWith},function(e,h,a){e=a(1);a=a(175);e.Observable.prototype.take=a.take},function(e,h,a){var l=function(a,c){function f(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)};
e=a(1);var k=a(30),d=a(20),g=a(5);a=function(a){function c(f,c,d){a.call(this);this.sourceObj=f;this.eventName=c;this.selector=d}l(c,a);c.create=function(a,b,d){return new c(a,b,d)};c.setupSubscription=function(a,b,d,k){var e;if(a&&"[object NodeList]"===a.toString()||a&&"[object HTMLCollection]"===a.toString())for(var l=0,h=a.length;l<h;l++)c.setupSubscription(a[l],b,d,k);else a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener?(a.addEventListener(b,d),e=function(){return a.removeEventListener(b,
d)}):a&&"function"===typeof a.on&&"function"===typeof a.off?(a.on(b,d),e=function(){return a.off(b,d)}):a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(b,d),e=function(){return a.removeListener(b,d)});k.add(new g.Subscription(e))};c.prototype._subscribe=function(a){var b=this.selector;c.setupSubscription(this.sourceObj,this.eventName,b?function(){for(var c=[],g=0;g<arguments.length;g++)c[g-0]=arguments[g];c=k.tryCatch(b).apply(void 0,c);c===d.errorObject?
a.error(d.errorObject.e):a.next(c)}:function(b){return a.next(b)},a)};return c}(e.Observable);h.FromEventObservable=a},function(e,h,a){var l=function(a,g){function b(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(b.prototype=g.prototype,new b)};e=a(1);var k=a(47);a=function(a){function g(){a.call(this)}l(g,a);g.create=function(){return new g};g.prototype._subscribe=function(a){k.noop()};return g}(e.Observable);h.NeverObservable=a},function(e,
h,a){function l(a){var c=a.value;a=a.subscriber;a.isUnsubscribed||(a.next(c),a.complete())}function k(a){var c=a.err;a=a.subscriber;a.isUnsubscribed||a.error(c)}var d=function(a,c){function f(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)},g=a(13);e=function(a){function c(c,d){void 0===d&&(d=null);a.call(this);this.promise=c;this.scheduler=d}d(c,a);c.create=function(a,b){void 0===b&&(b=null);return new c(a,
b)};c.prototype._subscribe=function(a){var b=this,c=this.promise,d=this.scheduler;if(null==d)this._isScalar?a.isUnsubscribed||(a.next(this.value),a.complete()):c.then(function(c){b.value=c;b._isScalar=!0;a.isUnsubscribed||(a.next(c),a.complete())},function(b){a.isUnsubscribed||a.error(b)}).then(null,function(a){g.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.isUnsubscribed)return d.schedule(l,0,{value:this.value,subscriber:a})}else c.then(function(c){b.value=c;b._isScalar=
!0;a.isUnsubscribed||a.add(d.schedule(l,0,{value:c,subscriber:a}))},function(b){a.isUnsubscribed||a.add(d.schedule(k,0,{err:b,subscriber:a}))}).then(null,function(a){g.root.setTimeout(function(){throw a;})})};return c}(a(1).Observable);h.PromiseObservable=e},function(e,h,a){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];c=null;k.isScheduler(a[a.length-1])&&(c=a.pop());return(new d.ArrayObservable(a,c)).lift(new g.MergeAllOperator(1))}var k=a(12),d=a(19),g=a(42);h.concat=
function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return l.apply(void 0,[this].concat(a))};h.concatStatic=l},function(e,h,a){var l=function(a,c){function f(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)},k=a(29);e=a(24);h.mergeMap=function(a,c,f){void 0===f&&(f=Number.POSITIVE_INFINITY);return this.lift(new d(a,c,f))};var d=function(){function a(b,f,d){void 0===d&&(d=Number.POSITIVE_INFINITY);
this.project=b;this.resultSelector=f;this.concurrent=d}a.prototype.call=function(a){return new g(a,this.project,this.resultSelector,this.concurrent)};return a}();h.MergeMapOperator=d;var g=function(a){function c(c,d,g,k){void 0===k&&(k=Number.POSITIVE_INFINITY);a.call(this,c);this.project=d;this.resultSelector=g;this.concurrent=k;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}l(c,a);c.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=
function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(d){this.destination.error(d);return}this.active++;this._innerSub(b,a,c)};c.prototype._innerSub=function(a,b,c){this.add(k.subscribeToResult(this,a,b,c))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,b,c,d,g){this.resultSelector?this._notifyResultSelector(a,b,c,d):this.destination.next(b)};c.prototype._notifyResultSelector=function(a,
b,c,d){var g;try{g=this.resultSelector(a,b,c,d)}catch(k){this.destination.error(k);return}this.destination.next(g)};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);h.MergeMapSubscriber=g},function(e,h){var a=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):
(g.prototype=d.prototype,new g)},l=function(k){function d(){k.call(this,"object unsubscribed");this.name="ObjectUnsubscribedError"}a(d,k);return d}(Error);h.ObjectUnsubscribedError=l},function(e,h){h.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(e,h,a){var l=a(28);h.isNumeric=function(a){return!l.isArray(a)&&0<=a-parseFloat(a)+1}},function(e,h){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&
a.constructor===Symbol?"symbol":typeof a};h.isObject=function(e){return null!=e&&"object"===("undefined"===typeof e?"undefined":a(e))}},function(e,h){h.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(e,h){h.throwError=function(a){throw a;}},function(e,h,a){function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function k(a){this.name="EMEError";this.message=a&&a.message||"eme: unknown error";this.reason=
a&&a.reason||a;this.stack=Error().stack}function d(a){this.name="GenerateRequestError";this.message="";this.stack=Error().stack;this.session=a}function g(a){if("number"==typeof a)return a;for(var b=0,c=void 0,f=0;f<a.length;f++)c=a[f],b=(b<<5)-b+c,b&=b;return b}function b(a,b,c){return{type:"eme",value:y({name:a,session:b},c)}}function c(a){if(!U||!W||J())return null;var b=Y;return(a=D(a,function(a){return a.type!==U.type||a.persistentLicense&&"required"!=b.persistentState||a.distinctiveIdentifierRequired&&
"required"!=b.distinctiveIdentifier?!1:!0}))?{keySystem:a,keySystemAccess:new H(U,W,Y)}:null}function f(a){var b=["temporary"],c="optional",f="optional";a.persistentLicense&&(c="required",b.push("persistent-license"));a.persistentStateRequired&&(c="required");a.distinctiveIdentifierRequired&&(f="required");return{videoCapabilities:void 0,audioCapabilities:void 0,initDataTypes:["cenc"],distinctiveIdentifier:f,persistentState:c,sessionTypes:b}}function m(a){var b=c(a);if(b)return w.debug("eme: found compatible keySystem quickly",
b),A.of(b);var d=C(a.map(function(a){return P[a.type].map(function(b){return{keyType:b,keySystem:a}})}));return A.create(function(a){function b(k){if(!c)if(k>=d.length)a.onError(T());else{var m=d[k],e=m.keyType,l=m.keySystem,h=[f(l)];w.debug("eme: request keysystem access "+e+","+(k+1+" of "+d.length),h);g=L(e,h).subscribe(function(b){w.info("eme: found compatible keysystem",e,h);a.next({keySystem:l,keySystemAccess:b});a.complete()},function(){w.debug("eme: rejected access to keysystem",e,h);g=null;
b(k+1)})}}var c=!1,g=null;b(0);(function(){c=!0;g&&g.unsubscribe()})})}function u(a,b,c){var f=Z,d=W;return t(c.createMediaKeys()).flatMap(function(g){W=g;Y=c.getConfiguration();U=b;Z=a;if(a.mediaKeys===g)return A.of(g);d&&d!==W&&S.dispose();var k=void 0;f&&f!==Z?(w.debug("eme: unlink old video element and set mediakeys"),k=F(f,null).concat(F(Z,g))):(w.debug("eme: set mediakeys"),k=F(Z,g));return k.mapTo(g)})}function n(a,b,c,f){w.debug("eme: create a new "+b+" session");var d=a.createSession(b);
a=p(d,c)["finally"](function(){S.deleteAndClose(d);V["delete"](f)}).publish();return{session:d,sessionEvents:a}}function q(a,c,f,g,k){a=n(a,f,c,k);var m=a.session;a=a.sessionEvents;S.add(k,m,a);w.debug("eme: generate request",g,k);g=t(m.generateRequest(g,k))["catch"](function(){throw new d(m);})["do"](function(){"persistent-license"==f&&V.add(k,m)}).mapTo(b("generated-request",m,{initData:k,initDataType:g}));return E(a,g)}function x(a,b,c,f,g){return q(a,b,c,f,g)["catch"](function(k){if(!(k instanceof
d))throw k;var m=S.getFirst();if(!m)throw k;w.warn("eme: could not create a new session, retry after closing a currently loaded session",k);return S.deleteAndClose(m).flatMap(function(){return q(a,b,c,f,g)})})}function v(a,c,f,d,g){w.debug("eme: load persisted session",f);var k=n(a,"persistent-license",c,g),m=k.session,e=k.sessionEvents;return t(m.load(f))["catch"](function(){return A.of(!1)}).flatMap(function(k){if(k)return S.add(g,m,e),V.add(g,m),e.startWith(b("loaded-session",m,{storedSessionId:f}));
w.warn("eme: no data stored for the loaded session, do fallback",f);S.deleteById(f);V["delete"](g);m.sessionId&&m.remove();return x(a,c,"persistent-license",d,g).startWith(b("loaded-session-failed",m,{storedSessionId:f}))})}function p(a,c){w.debug("eme: handle message events",a);var f=void 0,d=M(a).map(function(a){return r("eme: keyerror event "+a.errorCode+" / "+a.systemCode,a)}),g=R(a).flatMap(function(b){f=b.sessionId;w.debug("eme: keystatuseschange event",f,a,b);a.keyStatuses.forEach(function(a,
b){var c=Q[b]||Q[a];c&&r(c)});if(!c.onKeyStatusesChange)return w.info("eme: keystatuseschange event not handled"),O();var d=void 0;try{d=c.onKeyStatusesChange(b,a)}catch(g){d=A["throw"](g)}return t(d)["catch"](function(a){return r("eme: onKeyStatusesChange has failed (reason:"+(a&&a.message||"unknown")+")",a)})}),k=I(a).flatMap(function(b){f=b.sessionId;var d=new Uint8Array(b.message),g=b.messageType||"license-request";w.debug("eme: event message type "+g,a,b);b=B(function(){return c.getLicense(d,
g)},{totalRetry:3,retryDelay:100});return t(b())["catch"](function(a){return r("eme: getLicense has failed (reason: "+(a&&a.message||"unknown")+")",a)})}),g=E(k,g).concatMap(function(c){w.debug("eme: update session",f,c);return t(a.update(c,f))["catch"](function(a){return r("eme: error on session update "+f,a)}).mapTo(b("session-update",a,{updatedWith:c}))}),d=E(g,d);return a.closed?d.takeUntil(t(a.closed)):d}function r(a,b){var c=Error(a);b&&(c.reason=b);w.error(a,b);throw c;}var y=Object.assign||
function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],f;for(f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])}return a},w=a(4),z=a(3),D=a(22),C=a(37),t=a(86),B=a(15).retryWithBackoff,A=a(1).Observable,O=a(6).EmptyObservable.create,G=a(25).combineLatestStatic,E=a(11).mergeStatic;h=a(14);var H=h.KeySystemAccess,L=h.requestMediaKeySystemAccess,F=h.setMediaKeys;a=h.emeEvents;var J=h.shouldRenewMediaKeys,K=a.onEncrypted,I=a.onKeyMessage,M=a.onKeyError,R=a.onKeyStatusesChange,P=
{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.youtube.playready","com.microsoft.playready"]},Q={expired:"eme: a required key has expired and the content cannot be decrypted.","internal-error":"eme: an unknown error has occurred in the CDM."};k.prototype=Error();d.prototype=Error();var T=function(){Error("eme: could not find a compatible key system")};h=function(){function a(){l(this,a);this._entries=[]}a.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};
a.prototype.get=function(a){a=g(a);var b=D(this._entries,function(b){return b.initData===a});return b?b.session:null};a.prototype.add=function(a,b,c){a=g(a);var f=this.get(a);f&&this.deleteAndClose(f);c=c.connect();a={session:b,initData:a,eventSubscription:c};w.debug("eme-mem-store: add session",a);this._entries.push(a)};a.prototype.deleteById=function(a){var b=D(this._entries,function(b){return b.session.sessionId===a});return b?this["delete"](b.session):null};a.prototype["delete"]=function(a){var b=
D(this._entries,function(b){return b.session===a});if(!b)return null;var c=b.session,f=b.eventSubscription;w.debug("eme-mem-store: delete session",b);b=this._entries.indexOf(b);this._entries.splice(b,1);f.unsubscribe();return c};a.prototype.deleteAndClose=function(a){return(a=this["delete"](a))?(w.debug("eme-mem-store: close session",a),t(a.close())["catch"](function(){return A.of(null)})):A.of(null)};a.prototype.dispose=function(){var a=this,b=this._entries.map(function(b){return a.deleteAndClose(b.session)});
this._entries=[];return E.apply(null,b)};return a}();var V=new (function(){function a(b){l(this,a);this.setStorage(b)}a.prototype.setStorage=function(a){if(this._storage!==a){z(a,"eme: no licenseStorage given for keySystem with persistentLicense");z.iface(a,"licenseStorage",{save:"function",load:"function"});this._storage=a;try{this._entries=this._storage.load(),z(Array.isArray(this._entries))}catch(b){w.warn("eme-persitent-store: could not get entries from license storage",b),this.dispose()}}};a.prototype.get=
function(a){a=g(a);return D(this._entries,function(b){return b.initData===a})||null};a.prototype.add=function(a,b){var c=b&&b.sessionId;if(c){a=g(a);var f=this.get(a);f&&f.sessionId===c||(f&&this["delete"](a),w.info("eme-persitent-store: add new session",c,b),this._entries.push({sessionId:c,initData:a}),this._save())}};a.prototype["delete"]=function(a){a=g(a);var b=D(this._entries,function(b){return b.initData===a});b&&(w.warn("eme-persitent-store: delete session from store",b),b=this._entries.indexOf(b),
this._entries.splice(b,1),this._save())};a.prototype.dispose=function(){this._entries=[];this._save()};a.prototype._save=function(){try{this._storage.save(this._entries)}catch(a){w.warn("eme-persitent-store: could not save licenses in localStorage")}};return a}())({load:function(){return[]},save:function(){}}),S=new h,W=void 0,Y=void 0,U=void 0,Z=void 0;e.exports={createEME:function(a,c){function f(c,d){var g=d.keySystem,k=d.keySystemAccess;g.persistentLicense&&V.setStorage(g.licenseStorage);w.info("eme: encrypted event",
c);return u(a,g,k).flatMap(function(a){a:{var f=k.getConfiguration(),d=c.initDataType,m=new Uint8Array(c.initData),e=S.get(m);if(e&&e.sessionId)w.debug("eme: reuse loaded session",e.sessionId),a=A.of(b("reuse-session",e));else{f=(e=(f=f.sessionTypes)&&0<=f.indexOf("persistent-license"))&&g.persistentLicense?"persistent-license":"temporary";if(e&&g.persistentLicense&&(e=V.get(m))){a=v(a,g,e.sessionId,d,m);break a}a=x(a,g,f,d,m)}}return a})}return G(K(a),m(c)).take(1).flatMap(function(a){return f(a[0],
a[1])})["catch"](function(a){throw new k(a);})},EMEError:k,getCurrentKeySystem:function(){return U&&U.type},onEncrypted:K,dispose:function(){U=W=null;S.dispose()}}},function(e,h,a){function l(a){this.name="OutOfIndexError";this.type=a;this.message="out of range in index "+a}function k(a){switch(a.indexType){case "template":return b;case "timeline":return c;case "list":return f;case "base":return m;default:throw Error("index-handler: unrecognized indexType "+a.indexType);}}a(3);var d=a(48).getAdaptationsByType,
g=a(32).InitSegment,b=a(195),c=a(84),f=a(194),m=a(193);l.prototype=Error();h=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=b;this.representation=c;this.index=c.index;this.handler=new (k(this.index))(b,c,this.index)}a.prototype.getInitSegment=function(){var a=this.index.initialization||{};return new g(this.adaptation,this.representation,a.media,a.range,this.index.indexRange)};a.prototype.normalizeRange=function(a,b,c){var f=
this.index.presentationTimeOffset||0,d=this.index.timescale||1;b||(b=0);c||(c=0);b=Math.min(b,c);return{time:a*d-f,up:(a+b)*d-f,to:(a+c)*d-f}};a.prototype.getSegments=function(a,b,c){a=this.normalizeRange(a,b,c);b=a.up;c=a.to;if(!this.handler.checkRange(a.time))throw new l(this.index.indexType);return this.handler.getSegments(b,c)};a.prototype.insertNewSegments=function(a,b){for(var c=[],f=0;f<a.length;f++)this.handler.addSegment(a[f],b)&&c.push(a[f]);return c};a.prototype.setTimescale=function(a){var b=
this.index;return b.timescale!==a?(b.timescale=a,!0):!1};a.prototype.scale=function(a){return a/this.index.timescale};return a}();e.exports={OutOfIndexError:l,IndexHandler:h,getLiveEdge:function(a){var b=d(a,"video")[0].representations[0].index;return k(b).getLiveEdge(b,a)}}},function(e,h,a){function l(a){var g=a.ts,b=a.d;a=a.r;return-1===b?g:g+(a+1)*b}var k=a(32).Segment;h=function(){function a(g,b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=
g;this.representation=b;this.index=c;this.timeline=c.timeline}a.getLiveEdge=function(a,b){var c=l(a.timeline[a.timeline.length-1])/a.timescale-b.suggestedPresentationDelay;return Math.max(a.timeline[0].ts/a.timescale+1,c)};a.prototype.createSegment=function(a,b,c){return k.create(this.adaptation,this.representation,a,this.index.media,a,c,0,b,null,!1)};a.prototype.calculateRepeat=function(a,b){var c=a.r||0;0>c&&(c=Math.ceil(((b?b.t:Infinity)-a.ts)/a.d)-1);return c};a.prototype.checkRange=function(a){var b=
this.timeline[this.timeline.length-1];if(!b)return!0;0>b.d&&(b={ts:b.ts,d:0,r:b.r});return a<=l(b)};a.prototype.getSegmentIndex=function(a){for(var b=this.timeline,c=0,f=b.length;c<f;){var d=c+f>>>1;b[d].ts<a?c=d+1:f=d}return 0<c?c-1:c};a.prototype.getSegmentNumber=function(a,b,c){a=b-a;return 0<a?Math.floor(a/c):0};a.prototype.getSegments=function(a,b){var c=this.index.timeline,f=[],d=c.length,k=this.getSegmentIndex(a)-1,e=c.length&&c[0].d||0;a:for(;!(++k>=d);){var l=c[k],h=l.d,v=l.ts,p=l.range,
e=Math.max(e,h);if(0>h){v+e<b&&f.push(this.createSegment(v,p,void 0));break}for(var l=this.calculateRepeat(l,c[k+1]),r=this.getSegmentNumber(v,a,h),y=void 0;(y=v+r*h)<b;)if(r++<=l)f.push(this.createSegment(y,p,h));else continue a;break}return f};a.prototype.addSegment=function(a,b){var c=this.timeline,f=c.length,d=c[f-1];if(b&&a.ts===b.ts){var k=a.ts+a.d,e=k-(d.ts+d.d*d.r);if(0>=e)return!1;-1===d.d&&((f=c[f-2])&&f.d===e?(f.r++,c.pop()):d.d=e);c.push({d:-1,ts:k,r:0});return!0}return a.ts>=l(d)?(d.d===
a.d?d.r++:c.push({d:a.d,ts:a.ts,r:0}),!0):!1};return a}();e.exports=h},function(e,h,a){function l(a,f){var d=a.currentTime,k=new g(a.buffered);return new b(d,k,a.duration,k.getGap(d),f,a.playbackRate,k.getRange(d),a.readyState,null)}var k=a(1).Observable,d=a(45).BehaviorSubject,g=a(31).BufferedRanges,b=function(){function a(b,d,g,k,e,l,h,p,r){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ts=b;this.buffered=d;this.duration=g;this.gap=k;this.name=e;this.playback=
l;this.range=h;this.readyState=p;this.stalled=r}a.prototype.clone=function(){return new a(this.ts,this.buffered,this.duration,this.gap,this.name,this.playback,this.range,this.readyState,this.stalled)};return a}();e.exports={getEmptyTimings:function(){return new b(0,new g,0,Infinity,"timeupdate",1,null,0,null)},getTimings:l,timingsSampler:function(a){return k.create(function(b){function d(k){var m=g,e=k&&k.type||"timeupdate";k=l(a,e);var m=m.stalled,h=k.gap;if(e="loadedmetadata"!=e&&!m)e=k.range,e=
!(e&&.5>=k.duration-(h+e.end));var n=void 0,n=e&&(.5>=h||Infinity===h)?{name:k.name,playback:k.playback}:m&&Infinity>h&&h>("seeking"==m.name?.5:5)?null:m;k.stalled=n;g=k;b.next(g)}var g=l(a,"init"),k=setInterval(d,1E3);a.addEventListener("play",d);a.addEventListener("progress",d);a.addEventListener("seeking",d);a.addEventListener("seeked",d);a.addEventListener("loadedmetadata",d);b.next(g);return function(){clearInterval(k);a.removeEventListener("play",d);a.removeEventListener("progress",d);a.removeEventListener("seeking",
d);a.removeEventListener("seeked",d);a.removeEventListener("loadedmetadata",d)}}).multicast(function(){return new d({name:"init",stalled:null})}).refCount()},seekingsSampler:function(a){return a.filter(function(a){return"seeking"==a.name&&(Infinity===a.gap||-2>a.gap)}).skip(1).startWith(!0)},getLiveGap:function(a,b){if(!b.isLive)return Infinity;var d=b.availabilityStartTime,g=b.presentationLiveGap;return Date.now()/1E3-a-(d+g+10)},toWallClockTime:function(a,b){return new Date(1E3*(a+b.availabilityStartTime))},
fromWallClockTime:function(a,b){var d=a,g=b.suggestedPresentationDelay,k=b.presentationLiveGap,e=b.timeShiftBufferDepth;"number"!=typeof d&&(d=d.getTime());var l=Date.now();return Math.max(Math.min(d,l-1E3*(k+g)),l-1E3*e)/1E3-b.availabilityStartTime}}},function(e,h,a){var l=a(1).Observable,k=a(73).PromiseObservable.create;e.exports=function(a){return a&&"function"==typeof a.subscribe?a:a&&"function"==typeof a.then?k(a):l.of(a)}},function(e,h){function a(a,b){for(var c=-1,f=a?a.length:0;++c<f;)if(a[c]===
b)return c;return-1}function l(a){return!!a&&"object"==("undefined"===typeof a?"undefined":q(a))&&"[object Date]"==v.call(a)||!1}function k(a){return!!a&&"function"==typeof a||!1}function d(a){return"number"==typeof a}function g(a){return!!a&&"object"==("undefined"===typeof a?"undefined":q(a))||!1}function b(a){return"string"==typeof a}function c(a){for(var b=arguments,c=1;c<b.length;c++){var f=b[c];if(g(f))for(var d=w(f),k=0,m=d.length;k<m;k++)a[d[k]]=f[d[k]]}return a}function f(a,b){for(var c=a?
a.length:0,f=-1,d=Array(c);++f<c;)d[f]=b(a[f],f);return d}function m(a,b,c){for(var f=a?a.length:0,d=-1;++d<f;)c=b(c,a[d],d);return c}function u(a,b){for(var c=a?a.length:0,f=-1,d=[];++f<c;)b(a[f],f)&&d.push(a[f]);return d}function n(a,c){for(var f in a)if(c.hasOwnProperty(f)){var g=a[f],k=c[f];b(g)||d(g)||l(g)?a[f]=k:r(g)?(g.length=0,y.apply(g,k)):a[f]=n(g,k)}return a}var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===
typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},x=Object.prototype,v=x.toString,p=x.hasOwnProperty,r=Array.isArray,y=Array.prototype.push,w=Object.keys||function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},x=function(){var a=0;return function(b){b||(b="");return""+b+a++}}();e.exports={chunk:function(a,b){for(var c=[],f=0,d=-1,g=a?a.length:0;++d<g;)c[f]?c[f].length===b?c[++f]=[a[d]]:c[f].push(a[d]):c[f]=[a[d]];return c},compact:function(a){return u(a,function(a){return null!=
a})},contains:function(b,c){return-1<a(b,c)},cloneArray:function(a){for(var b=a?a.length:0,c=-1,f=Array(b);++c<b;)f[c]=a[c];return f},cloneObject:function(a){return c({},a)},defaults:function(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a},each:function(a,b){for(var c=a?a.length:0,f=-1;++f<c;)b(a[f],f)},extend:c,values:function(a){for(var b=w(a),c=-1,f=b.length,d=Array(f);++c<f;)d[c]=a[b[c]];return d},filter:u,find:function(a,b){for(var c=-1,f=a?a.length:0;++c<f;)if(b(a[c],c))return a[c]},
between:function(a,b,c){for(var f=-1,d=a?a.length:0;++f<d;)if(a[f][b]<=c&&a[f+1]&&c<a[f+1][b])return a[f]},findLast:function(a,b){for(var c=a?a.length:0;0<=--c;)if(b(a[c],c))return a[c]},flatten:function(a,b){for(var c=b?f(a,b):a,d=-1,g=c?c.length:0,k=[];++d<g;){var m=c[d];if(m&&"object"==("undefined"===typeof m?"undefined":q(m))&&"number"==typeof m.length){var e=-1,l=m.length,h=k.length;for(k.length+=l;++e<l;)k[h++]=m[e]}else k.push(m)}return k},groupBy:function(a,b){var c;c=k(b)?b:function(a){return a[b]};
return m(a,function(a,b){var f=c(b);(r(a[f])?a[f]:a[f]=[]).push(b);return a},{})},identity:function(a){return a},indexOf:a,isArray:r,isDate:l,isFunction:k,isNumber:d,isObject:g,isString:b,isPromise:function(a){return!!a&&"function"==typeof a.then},isObservable:function(a){return!!a&&"function"==typeof a.subscribe},keys:w,last:function(a){return a[a.length-1]},map:f,memoize:function(a,b){var c=function B(){var c=B.cache,f=b?b.apply(this,arguments):arguments[0];return p.call(c,f)?c[f]:c[f]=a.apply(this,
arguments)};c.cache={};return c},noop:function(){},pad:function(a,b){a=a.toString();return a.length>=b?a:(Array(b+1).join("0")+a).slice(-b)},pick:function(a,b){return m(b,function(b,c){c in a&&(b[c]=a[c]);return b},{})},pluck:function(a,b){return f(a,function(a){return a[b]})},reduce:m,simpleMerge:n,sortedIndex:function(a,b,c){var f=0,d=a?a.length:f;for(b=c(b);f<d;){var g=f+d>>>1;c(a[g])<b?f=g+1:d=g}return f},sortedMerge:function(a,b,c){for(var f=0,d=0,g=0,k=a.length,m=b.length,e=[];f<k&&d<m;)a[f][c]<=
b[d][c]?(e[g]=a[f],f++,g++):0<g&&b[d][c]<=e[g-1][c]?d++:(e[g]=b[d],d++,g++);if(f<k)for(c=f;c<k;c++)e[g]=a[c],g++;else for(c=d;c<m;c++)e[g]=b[c],g++;return e},tryCatch:function(a){try{return a()}catch(b){return b}},uniqueId:x}},function(e,h){e.exports=function(a){var e=a?a.length:0;return e?a[e-1]:void 0}},function(e,h,a){h=a(98);a=a(59)(h,!0);e.exports=a},function(e,h){e.exports=function(a,e){for(var k=-1,d=e.length,g=a.length;++k<d;)a[g+k]=e[k];return a}},function(e,h){e.exports=function(a,e){for(var k=
-1,d=a.length;++k<d;)if(e(a[k],k,a))return!0;return!1}},function(e,h){e.exports=function(a,e){return void 0===a?e:a}},function(e,h,a){var l=a(18);e.exports=function(a,d,g){for(var b=-1,c=l(d),f=c.length;++b<f;){var e=c[b],h=a[e],n=g(h,d[e],e,a,d);(n===n?n===h:h!==h)&&(void 0!==h||e in a)||(a[e]=n)}return a}},function(e,h,a){var l=a(96),k=a(18);e.exports=function(a,g){return null==g?a:l(g,k(g),a)}},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(108),d=a(109),g=a(56),b=a(66),c=a(126);e.exports=function(a,e,h){var n="undefined"===typeof a?"undefined":l(a);return"function"==n?void 0===e?a:g(a,e,h):null==a?b:"object"==n?k(a):void 0===e?c(a):d(a,e)}},function(e,h){e.exports=function(a,e,k){k||(k={});for(var d=-1,g=e.length;++d<g;){var b=e[d];k[b]=a[b]}return k}},function(e,h,a){h=a(103);a=a(57)(h);e.exports=a},function(e,h,a){h=a(104);a=a(57)(h,!0);
e.exports=a},function(e,h){e.exports=function(a,e,k,d){var g;k(a,function(a,c,f){if(e(a,c,f))return g=d?c:a,!1});return g}},function(e,h){e.exports=function(a,e,k){for(var d=a.length,g=k?d:-1;k?g--:++g<d;)if(e(a[g],g,a))return g;return-1}},function(e,h,a){function l(a,e,h,n){n||(n=[]);for(var q=-1,x=a.length;++q<x;){var v=a[q];c(v)&&b(v)&&(h||g(v)||d(v))?e?l(v,e,h,n):k(n,v):h||(n[n.length]=v)}return n}var k=a(90),d=a(39),g=a(8),b=a(33),c=a(17);e.exports=l},function(e,h,a){h=a(58)();e.exports=h},function(e,
h,a){var l=a(102),k=a(18);e.exports=function(a,g){return l(a,g,k)}},function(e,h,a){var l=a(105),k=a(18);e.exports=function(a,g){return l(a,g,k)}},function(e,h,a){h=a(58)(!0);e.exports=h},function(e,h,a){var l=a(115),k=a(116),d=a(117),g=a(8),b=a(122);h=Object.prototype;var c=h.hasOwnProperty,f=h.toString;e.exports=function(a,e,h,q,x,v,p){var r=g(a),y=g(e),w="[object Array]",z="[object Array]";r||(w=f.call(a),"[object Arguments]"==w?w="[object Object]":"[object Object]"!=w&&(r=b(a)));y||(z=f.call(e),
"[object Arguments]"==z?z="[object Object]":"[object Object]"!=z&&b(e));var D="[object Object]"==w,y="[object Object]"==z;if((z=w==z)&&!r&&!D)return k(a,e,w);if(!x&&(w=D&&c.call(a,"__wrapped__"),y=y&&c.call(e,"__wrapped__"),w||y))return h(w?a.value():a,y?e.value():e,q,x,v,p);if(!z)return!1;v||(v=[]);p||(p=[]);for(w=v.length;w--;)if(v[w]==a)return p[w]==e;v.push(a);p.push(e);a=(r?l:d)(a,e,h,q,x,v,p);v.pop();p.pop();return a}},function(e,h,a){var l=a(54),k=a(7);e.exports=function(a,g,b){var c=g.length,
f=c,e=!b;if(null==a)return!f;for(a=k(a);c--;){var h=g[c];if(e&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<f;){var h=g[c],n=h[0],q=a[n],x=h[1];if(e&&h[2]){if(void 0===q&&!(n in a))return!1}else if(h=b?b(q,x,n):void 0,void 0===h?!l(x,q,b,!0):!h)return!1}return!0}},function(e,h,a){var l=a(107),k=a(118),d=a(7);e.exports=function(a){var b=k(a);if(1==b.length&&b[0][2]){var c=b[0][0],f=b[0][1];return function(a){return null==a?!1:a[c]===f&&(void 0!==f||c in d(a))}}return function(a){return l(a,b)}}},
function(e,h,a){var l=a(53),k=a(54),d=a(111),g=a(8),b=a(63),c=a(64),f=a(88),m=a(7),u=a(65);e.exports=function(a,e){var h=g(a),v=b(a)&&c(e),p=a+"";a=u(a);return function(b){if(null==b)return!1;var c=p;b=m(b);if(!(!h&&v||c in b)){b=1==a.length?b:l(b,d(a,0,-1));if(null==b)return!1;c=f(a);b=m(b)}return b[c]===e?void 0!==e||c in b:k(e,b[c],void 0,!0)}}},function(e,h,a){var l=a(53),k=a(65);e.exports=function(a){var g=a+"";a=k(a);return function(b){return l(b,a,g)}}},function(e,h){e.exports=function(a,e,
k){var d=-1,g=a.length;e=null==e?0:+e||0;0>e&&(e=-e>g?0:g+e);k=void 0===k||k>g?g:+k||0;0>k&&(k+=g);g=e>k?0:k-e>>>0;e>>>=0;for(k=Array(g);++d<g;)k[d]=a[d+e];return k}},function(e,h){e.exports=function(a){return null==a?"":a+""}},function(e,h,a){var l=a(56),k=a(62),d=a(52);e.exports=function(a){return d(function(b,c){var f=-1,d=null==b?0:c.length,e=2<d?c[d-2]:void 0,h=2<d?c[2]:void 0,q=1<d?c[d-1]:void 0;"function"==typeof e?(e=l(e,q,5),d-=2):(e="function"==typeof q?q:void 0,d-=e?1:0);h&&k(c[0],c[1],
h)&&(e=3>d?void 0:e,d=1);for(;++f<d;)(h=c[f])&&a(b,h,e);return b})}},function(e,h,a){var l=a(52);e.exports=function(a,d){return l(function(g){var b=g[0];if(null==b)return b;g.push(d);return a.apply(void 0,g)})}},function(e,h,a){var l=a(91);e.exports=function(a,d,g,b,c,f,e){var h=-1,n=a.length,q=d.length;if(n!=q&&!(c&&q>n))return!1;for(;++h<n;){var x=a[h],q=d[h],v=b?b(c?q:x,c?x:q,h):void 0;if(void 0!==v){if(v)continue;return!1}if(c){if(!l(d,function(a){return x===a||g(x,a,b,c,f,e)}))return!1}else if(x!==
q&&!g(x,q,b,c,f,e))return!1}return!0}},function(e,h){e.exports=function(a,e,k){switch(k){case "[object Boolean]":case "[object Date]":return+a==+e;case "[object Error]":return a.name==e.name&&a.message==e.message;case "[object Number]":return a!=+a?e!=+e:a==+e;case "[object RegExp]":case "[object String]":return a==e+""}return!1}},function(e,h,a){var l=a(18),k=Object.prototype.hasOwnProperty;e.exports=function(a,g,b,c,f,e,h){var n=l(a),q=n.length,x=l(g).length;if(q!=x&&!f)return!1;for(x=q;x--;){var v=
n[x];if(!(f?v in g:k.call(g,v)))return!1}for(var p=f;++x<q;){var v=n[x],r=a[v],y=g[v],w=c?c(f?y:r,f?r:y,v):void 0;if(void 0===w?!b(r,y,c,f,e,h):!w)return!1;p||(p="constructor"==v)}return p||(b=a.constructor,c=g.constructor,!(b!=c&&"constructor"in a&&"constructor"in g)||"function"==typeof b&&b instanceof b&&"function"==typeof c&&c instanceof c)?!0:!1}},function(e,h,a){var l=a(64),k=a(125);e.exports=function(a){a=k(a);for(var g=a.length;g--;)a[g][2]=l(a[g][1]);return a}},function(e,h,a){var l=a(39),
k=a(8),d=a(38),g=a(16),b=a(124),c=Object.prototype.hasOwnProperty;e.exports=function(a){for(var e=b(a),h=e.length,n=h&&a.length,q=!!n&&g(n)&&(k(a)||l(a)),x=-1,v=[];++x<h;){var p=e[x];(q&&d(p,n)||c.call(a,p))&&v.push(p)}return v}},function(e,h,a){var l=a(9),k=Object.prototype.toString;e.exports=function(a){return l(a)&&"[object Function]"==k.call(a)}},function(e,h,a){var l=a(120),k=a(17),d=/^\[object .+?Constructor\]$/,g=Function.prototype.toString,b=RegExp("^"+g.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(a){return null==a?!1:l(a)?b.test(g.call(a)):k(a)&&d.test(a)}},function(e,h,a){var l=a(16),k=a(17),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0;d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=
d["[object Boolean]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1;var g=Object.prototype.toString;e.exports=function(a){return k(a)&&l(a.length)&&!!d[g.call(a)]}},function(e,h,a){var l=a(93),k=a(94);h=a(113)(function(a,g,b){return b?l(a,g,b):k(a,g)});e.exports=h},function(e,h,a){var l=a(39),k=a(8),d=a(38),g=a(16),b=a(9),c=Object.prototype.hasOwnProperty;
e.exports=function(a){if(null==a)return[];b(a)||(a=Object(a));for(var e=a.length,e=e&&g(e)&&(k(a)||l(a))&&e||0,h=a.constructor,n=-1,h="function"==typeof h&&h.prototype===a,q=Array(e),x=0<e;++n<e;)q[n]=n+"";for(var v in a)x&&d(v,e)||"constructor"==v&&(h||!c.call(a,v))||q.push(v);return q}},function(e,h,a){var l=a(18),k=a(7);e.exports=function(a){a=k(a);for(var g=-1,b=l(a),c=b.length,f=Array(c);++g<c;){var e=b[g];f[g]=[e,a[e]]}return f}},function(e,h,a){var l=a(55),k=a(110),d=a(63);e.exports=function(a){return d(a)?
l(a):k(a)}},function(e,h,a){var l=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(d,b,c){a.call(this);this.parent=d;this.outerValue=b;this.outerIndex=c;this.index=0}l(d,a);d.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};d.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};
d.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return d}(a(2).Subscriber);h.InnerSubscriber=e},function(e,h,a){var l=a(1);e=function(){function a(d,g,b){this.kind=d;this.value=g;this.exception=b;this.hasValue="N"===d}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.exception);case "C":return a.complete&&a.complete()}};a.prototype["do"]=function(a,g,b){switch(this.kind){case "N":return a&&
a(this.value);case "E":return g&&g(this.exception);case "C":return b&&b()}};a.prototype.accept=function(a,g,b){return a&&"function"===typeof a.next?this.observe(a):this["do"](a,g,b)};a.prototype.toObservable=function(){switch(this.kind){case "N":return l.Observable.of(this.value);case "E":return l.Observable["throw"](this.exception);case "C":return l.Observable.empty()}};a.createNext=function(d){return"undefined"!==typeof d?new a("N",d):this.undefinedValueNotification};a.createError=function(d){return new a("E",
void 0,d)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();h.Notification=e},function(e,h){h.empty={isUnsubscribed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},function(e,h,a){e=a(1);a=a(19);e.Observable.of=a.ArrayObservable.of},function(e,h,a){e=a(1);a=a(153);e.Observable["throw"]=a.ErrorObservable.create},function(e,h,a){e=a(1);a=a(74);e.Observable.prototype.concat=
a.concat},function(e,h,a){e=a(1);a=a(158);e.Observable.prototype.concatAll=a.concatAll},function(e,h,a){e=a(1);a=a(159);e.Observable.prototype.concatMap=a.concatMap},function(e,h,a){e=a(1);a=a(160);e.Observable.prototype.debounceTime=a.debounceTime},function(e,h,a){e=a(1);a=a(161);e.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(e,h,a){e=a(1);a=a(162);e.Observable.prototype["do"]=a._do},function(e,h,a){e=a(1);a=a(163);e.Observable.prototype.filter=a.filter},function(e,
h,a){e=a(1);a=a(164);e.Observable.prototype["finally"]=a._finally},function(e,h,a){e=a(1);a=a(165);e.Observable.prototype.ignoreElements=a.ignoreElements},function(e,h,a){e=a(1);a=a(166);e.Observable.prototype.map=a.map},function(e,h,a){e=a(1);a=a(167);e.Observable.prototype.mapTo=a.mapTo},function(e,h,a){e=a(1);a=a(43);e.Observable.prototype.multicast=a.multicast},function(e,h,a){e=a(1);a=a(169);e.Observable.prototype.publish=a.publish},function(e,h,a){e=a(1);a=a(170);e.Observable.prototype.scan=
a.scan},function(e,h,a){e=a(1);a=a(171);e.Observable.prototype.share=a.share},function(e,h,a){e=a(1);a=a(172);e.Observable.prototype.skip=a.skip},function(e,h,a){e=a(1);a=a(174);e.Observable.prototype.switchMap=a.switchMap},function(e,h,a){e=a(1);a=a(176);e.Observable.prototype.takeUntil=a.takeUntil},function(e,h,a){e=a(1);a=a(177);e.Observable.prototype.timeout=a.timeout},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(1);var k=a(40),d=a(6);a=function(a){function b(b,f,d,k){a.call(this);this.arrayLike=b;this.scheduler=k;f||k||1!==b.length||(this._isScalar=!0,this.value=b[0]);f&&(this.mapFn=f.bind(d))}l(b,a);b.create=function(a,f,g,e){var h=a.length;return 0===h?new d.EmptyObservable:1!==h||f?new b(a,f,g,e):new k.ScalarObservable(a[0],e)};b.dispatch=function(a){var b=a.arrayLike,d=a.index,g=a.length,k=a.mapFn,e=a.subscriber;e.isUnsubscribed||(d>=g?e.complete():
(b=k?k(b[d],d):b[d],e.next(b),a.index=d+1,this.schedule(a)))};b.prototype._subscribe=function(a){var f=this.arrayLike,d=this.mapFn,g=this.scheduler,k=f.length;if(g)return g.schedule(b.dispatch,0,{arrayLike:f,index:0,length:k,mapFn:d,subscriber:a});for(g=0;g<k&&!a.isUnsubscribed;g++){var e=d?d(f[g],g):f[g];a.next(e)}a.complete()};return b}(e.Observable);h.ArrayLikeObservable=a},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(1);var k=a(2);a=a(5);var d=function(a){function c(b,d){a.call(this);this.source=b;this.subjectFactory=d}l(c,a);c.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};c.prototype.getSubject=function(){var a=this.subject;return a&&!a.isUnsubscribed?a:this.subject=this.subjectFactory()};c.prototype.connect=function(){var a=this.subscription;if(a&&!a.isUnsubscribed)return a;a=this.source.subscribe(this.getSubject());a.add(new g(this));
return this.subscription=a};c.prototype.refCount=function(){return new b(this)};c.prototype._closeSubscription=function(){this.subscription=this.subject=null};return c}(e.Observable);h.ConnectableObservable=d;var g=function(a){function b(c){a.call(this);this.connectable=c}l(b,a);b.prototype._unsubscribe=function(){this.connectable._closeSubscription();this.connectable=null};return b}(a.Subscription),b=function(a){function b(c,d){void 0===d&&(d=0);a.call(this);this.connectable=c;this.refCount=d}l(b,
a);b.prototype._subscribe=function(a){var b=this.connectable;a=new c(a,this);var f=b.subscribe(a);f.isUnsubscribed||1!==++this.refCount||(a.connection=this.connection=b.connect());return f};return b}(e.Observable),c=function(a){function b(c,d){a.call(this,null);this.destination=c;this.refCountObservable=d;this.connection=d.connection;c.add(this)}l(b,a);b.prototype._next=function(a){this.destination.next(a)};b.prototype._error=function(a){this._resetConnectable();this.destination.error(a)};b.prototype._complete=
function(){this._resetConnectable();this.destination.complete()};b.prototype._resetConnectable=function(){var a=this.refCountObservable,b=a.connection,c=this.connection;c&&c===b&&(a.refCount=0,b.unsubscribe(),a.connection=null,this.unsubscribe())};b.prototype._unsubscribe=function(){var a=this.refCountObservable;if(0!==a.refCount&&0===--a.refCount){var b=a.connection,c=this.connection;c&&c===b&&(b.unsubscribe(),a.connection=null)}};return b}(k.Subscriber)},function(e,h,a){var l=function(a,d){function g(){this.constructor=
a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(d,b){a.call(this);this.error=d;this.scheduler=b}l(d,a);d.create=function(a,b){return new d(a,b)};d.dispatch=function(a){a.subscriber.error(a.error)};d.prototype._subscribe=function(a){var b=this.error,c=this.scheduler;if(c)return c.schedule(d.dispatch,0,{error:b,subscriber:a});a.error(b)};return d}(a(1).Observable);h.ErrorObservable=e},function(e,h,a){var l=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},d=a(28),g=a(34),b=a(80),c=a(12),f=a(73),m=a(156),u=a(19),n=a(151),q=a(27),x=a(1),v=a(168);e=function(a){function e(b,c){a.call(this,null);this.ish=b;this.scheduler=
c}k(e,a);e.create=function(a,k,h,v){var p=null,t=null;g.isFunction(k)?(p=v||null,t=k):c.isScheduler(p)&&(p=k);if(null!=a){if("function"===typeof a[q.SymbolShim.observable])return a instanceof x.Observable&&!p?a:new e(a,p);if(d.isArray(a))return new u.ArrayObservable(a,p);if(b.isPromise(a))return new f.PromiseObservable(a,p);if("function"===typeof a[q.SymbolShim.iterator]||"string"===typeof a)return new m.IteratorObservable(a,null,null,p);if(a&&"number"===typeof a.length)return new n.ArrayLikeObservable(a,
t,h,p)}throw new TypeError((null!==a&&("undefined"===typeof a?"undefined":l(a))||a)+" is not observable");};e.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[q.SymbolShim.observable]().subscribe(a):b[q.SymbolShim.observable]().subscribe(new v.ObserveOnSubscriber(a,c,0))};return e}(x.Observable);h.FromObservable=e},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)},k=a(78);e=a(1);var d=a(26);a=function(a){function b(b,f){void 0===b&&(b=0);void 0===f&&(f=d.asap);a.call(this);this.period=b;this.scheduler=f;if(!k.isNumeric(b)||0>b)this.period=0;f&&"function"===typeof f.schedule||(this.scheduler=d.asap)}l(b,a);b.create=function(a,f){void 0===a&&(a=0);void 0===f&&(f=d.asap);return new b(a,f)};b.dispatch=function(a){var b=a.subscriber,d=a.period;b.next(a.index);b.isUnsubscribed||(a.index+=1,this.schedule(a,d))};b.prototype._subscribe=
function(a){var f=this.period;a.add(this.scheduler.schedule(b.dispatch,f,{index:0,subscriber:a,period:f}))};return b}(e.Observable);h.IntervalObservable=a},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(13),d=a(79),g=a(30);e=a(1);var b=a(34),c=a(27),f=a(20);a=function(a){function k(f,g,e,h){a.call(this);if(null==f)throw Error("iterator cannot be null.");if(d.isObject(g))this.thisArg=
g,this.scheduler=e;else if(b.isFunction(g))this.project=g,this.thisArg=e,this.scheduler=h;else if(null!=g)throw Error("When provided, `project` must be a function.");if((g=f[c.SymbolShim.iterator])||"string"!==typeof f)if(g||void 0===f.length){if(!g)throw new TypeError("Object is not iterable");f=f[c.SymbolShim.iterator]()}else f=new u(f);else f=new m(f);this.iterator=f}l(k,a);k.create=function(a,b,c,f){return new k(a,b,c,f)};k.dispatch=function(a){var b=a.index,c=a.thisArg,d=a.project,k=a.iterator,
e=a.subscriber;a.hasError?e.error(a.error):(k=k.next(),k.done?e.complete():(d?(k=g.tryCatch(d).call(c,k.value,b),k===f.errorObject?(a.error=f.errorObject.e,a.hasError=!0):(e.next(k),a.index=b+1)):(e.next(k.value),a.index=b+1),e.isUnsubscribed||this.schedule(a)))};k.prototype._subscribe=function(a){var b=0,c=this.iterator,d=this.project,e=this.thisArg,h=this.scheduler;if(h)return h.schedule(k.dispatch,0,{index:b,thisArg:e,project:d,iterator:c,subscriber:a});do{h=c.next();if(h.done){a.complete();break}else if(d){h=
g.tryCatch(d).call(e,h.value,b++);if(h===f.errorObject){a.error(f.errorObject.e);break}a.next(h)}else a.next(h.value);if(a.isUnsubscribed)break}while(1)};return k}(e.Observable);h.IteratorObservable=a;var m=function(){function a(b,c,f){void 0===c&&(c=0);void 0===f&&(f=b.length);this.str=b;this.idx=c;this.len=f}a.prototype[c.SymbolShim.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),
u=function(){function a(b,c,f){void 0===c&&(c=0);if(void 0===f)if(f=+b.length,isNaN(f))f=0;else if(0!==f&&"number"===typeof f&&k.root.isFinite(f)){var d;d=+f;d=0===d?d:isNaN(d)?d:0>d?-1:1;f=d*Math.floor(Math.abs(f));f=0>=f?0:f>n?n:f}this.arr=b;this.idx=c;this.len=f}a.prototype[c.SymbolShim.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),n=Math.pow(2,53)-1},function(e,h,a){var l=function(a,
b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);h._catch=function(a){a=new k(a);var b=this.lift(a);return a.caught=b};var k=function(){function a(b){this.selector=b}a.prototype.call=function(a){return new d(a,this.selector,this.caught)};return a}(),d=function(a){function b(b,f,d){a.call(this,b);this.selector=f;this.caught=d}l(b,a);b.prototype.error=function(a){if(!this.isStopped){var b=
void 0;try{b=this.selector(a,this.caught)}catch(d){this.destination.error(d);return}this._innerSub(b)}};b.prototype._innerSub=function(a){this.unsubscribe();this.destination.remove(this);a.subscribe(this.destination)};return b}(e.Subscriber)},function(e,h,a){var l=a(42);h.concatAll=function(){return this.lift(new l.MergeAllOperator(1))}},function(e,h,a){var l=a(75);h.concatMap=function(a,d){return this.lift(new l.MergeMapOperator(a,d,1))}},function(e,h,a){function l(a){a.debouncedNext()}var k=function(a,
b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};e=a(2);var d=a(26);h.debounceTime=function(a,b){void 0===b&&(b=d.asap);return this.lift(new g(a,b))};var g=function(){function a(b,c){this.dueTime=b;this.scheduler=c}a.prototype.call=function(a){return new b(a,this.dueTime,this.scheduler)};return a}(),b=function(a){function b(f,d,g){a.call(this,f);this.dueTime=d;this.scheduler=g;this.lastValue=this.debouncedSubscription=
null;this.hasValue=!1}k(b,a);b.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;
null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(e.Subscriber)},function(e,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};e=a(2);var k=a(30),d=a(20);h.distinctUntilChanged=function(a,b){return this.lift(new g(a,b))};var g=function(){function a(b,c){this.compare=b;this.keySelector=c}a.prototype.call=function(a){return new b(a,this.compare,
this.keySelector)};return a}(),b=function(a){function b(f,d,g){a.call(this,f);this.keySelector=g;this.hasKey=!1;"function"===typeof d&&(this.compare=d)}l(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=k.tryCatch(this.keySelector)(a),b===d.errorObject))return this.destination.error(d.errorObject.e);var c=!1;if(this.hasKey){if(c=k.tryCatch(this.compare)(this.key,b),c===d.errorObject)return this.destination.error(d.errorObject.e)}else this.hasKey=
!0;!1===Boolean(c)&&(this.key=b,this.destination.next(a))};return b}(e.Subscriber)},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};e=a(2);var d=a(47);h._do=function(a,b,k){var e;
a&&"object"===("undefined"===typeof a?"undefined":l(a))?(e=a.next,b=a.error,k=a.complete):e=a;return this.lift(new g(e||d.noop,b||d.noop,k||d.noop))};var g=function(){function a(b,c,d){this.next=b;this.error=c;this.complete=d}a.prototype.call=function(a){return new b(a,this.next,this.error,this.complete)};return a}(),b=function(a){function b(f,d,g,k){a.call(this,f);this.__next=d;this.__error=g;this.__complete=k}k(b,a);b.prototype._next=function(a){try{this.__next(a)}catch(b){this.destination.error(b);
return}this.destination.next(a)};b.prototype._error=function(a){try{this.__error(a)}catch(b){this.destination.error(b);return}this.destination.error(a)};b.prototype._complete=function(){try{this.__complete()}catch(a){this.destination.error(a);return}this.destination.complete()};return b}(e.Subscriber)},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);h.filter=
function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.select=b;this.thisArg=c}a.prototype.call=function(a){return new d(a,this.select,this.thisArg)};return a}(),d=function(a){function b(b,f,d){a.call(this,b);this.select=f;this.thisArg=d;this.count=0;this.select=f}l(b,a);b.prototype._next=function(a){var b;try{b=this.select.call(this.thisArg,a,this.count++)}catch(d){this.destination.error(d);return}b&&this.destination.next(a)};return b}(e.Subscriber)},function(e,h,a){var l=
function(a,c){function f(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)};e=a(2);var k=a(5);h._finally=function(a){return this.lift(new d(a))};var d=function(){function a(b){this.finallySelector=b}a.prototype.call=function(a){return new g(a,this.finallySelector)};return a}(),g=function(a){function c(c,d){a.call(this,c);this.add(new k.Subscription(d))}l(c,a);return c}(e.Subscriber)},function(e,h,a){var l=function(a,
c){function f(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)};e=a(2);var k=a(47);h.ignoreElements=function(){return this.lift(new d)};var d=function(){function a(){}a.prototype.call=function(a){return new g(a)};return a}(),g=function(a){function c(){a.apply(this,arguments)}l(c,a);c.prototype._next=function(a){k.noop()};return c}(e.Subscriber)},function(e,h,a){var l=function(a,b){function c(){this.constructor=
a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);h.map=function(a,b){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new k(a,b))};var k=function(){function a(b,c){this.project=b;this.thisArg=c}a.prototype.call=function(a){return new d(a,this.project,this.thisArg)};return a}(),d=function(a){function b(b,f,d){a.call(this,b);this.project=f;this.count=
0;this.thisArg=d||this}l(b,a);b.prototype._next=function(a){var b;try{b=this.project.call(this.thisArg,a,this.count++)}catch(d){this.destination.error(d);return}this.destination.next(b)};return b}(e.Subscriber)},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);h.mapTo=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.value=b}a.prototype.call=
function(a){return new d(a,this.value)};return a}(),d=function(a){function b(b,f){a.call(this,b);this.value=f}l(b,a);b.prototype._next=function(a){this.destination.next(this.value)};return b}(e.Subscriber)},function(e,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};e=a(2);var k=a(128);h.observeOn=function(a,b){void 0===b&&(b=0);return this.lift(new d(a,b))};var d=function(){function a(b,
c){void 0===c&&(c=0);this.scheduler=b;this.delay=c}a.prototype.call=function(a){return new g(a,this.scheduler,this.delay)};return a}();h.ObserveOnOperator=d;var g=function(a){function f(b,f,d){void 0===d&&(d=0);a.call(this,b);this.scheduler=f;this.delay=d}l(f,a);f.dispatch=function(a){a.notification.observe(a.destination)};f.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(f.dispatch,this.delay,new b(a,this.destination)))};f.prototype._next=function(a){this.scheduleMessage(k.Notification.createNext(a))};
f.prototype._error=function(a){this.scheduleMessage(k.Notification.createError(a))};f.prototype._complete=function(){this.scheduleMessage(k.Notification.createComplete())};return f}(e.Subscriber);h.ObserveOnSubscriber=g;var b=function(){return function(a,b){this.notification=a;this.destination=b}}()},function(e,h,a){var l=a(10),k=a(43);h.publish=function(){return k.multicast.call(this,new l.Subject)}},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&
(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);h.scan=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.accumulator=b;this.seed=c}a.prototype.call=function(a){return new d(a,this.accumulator,this.seed)};return a}(),d=function(a){function b(b,f,d){a.call(this,b);this.accumulator=f;this.accumulatorSet=!1;this.seed=d;this.accumulator=f;this.accumulatorSet="undefined"!==typeof d}l(b,a);Object.defineProperty(b.prototype,"seed",
{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(this.accumulatorSet)return this._tryNext(a);this.seed=a;this.destination.next(a)};b.prototype._tryNext=function(a){var b;try{b=this.accumulator(this.seed,a)}catch(d){this.destination.error(d)}this.seed=b;this.destination.next(b)};return b}(e.Subscriber)},function(e,h,a){function l(){return new d.Subject}var k=a(43),d=a(10);h.share=function(){return k.multicast.call(this,
l).refCount()}},function(e,h,a){var l=function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);h.skip=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.total=b}a.prototype.call=function(a){return new d(a,this.total)};return a}(),d=function(a){function b(b,f){a.call(this,b);this.total=f;this.count=0}l(b,a);b.prototype._next=function(a){++this.count>this.total&&
this.destination.next(a)};return b}(e.Subscriber)},function(e,h,a){var l=a(19),k=a(40),d=a(6),g=a(74),b=a(12);h.startWith=function(){for(var a=[],f=0;f<arguments.length;f++)a[f-0]=arguments[f];f=a[a.length-1];b.isScheduler(f)?a.pop():f=null;var e=a.length;return 1===e?g.concatStatic(new k.ScalarObservable(a[0],f),this):1<e?g.concatStatic(new l.ArrayObservable(a,f),this):g.concatStatic(new d.EmptyObservable(f),this)}},function(e,h,a){var l=function(a,c){function f(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&
(a[d]=c[d]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)};e=a(24);var k=a(29);h.switchMap=function(a,c){return this.lift(new d(a,c))};var d=function(){function a(b,f){this.project=b;this.resultSelector=f}a.prototype.call=function(a){return new g(a,this.project,this.resultSelector)};return a}(),g=function(a){function c(c,d,g){a.call(this,c);this.project=d;this.resultSelector=g;this.index=0}l(c,a);c.prototype._next=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(d){this.destination.error(d);
return}this._innerSub(b,a,c)};c.prototype._innerSub=function(a,b,c){var d=this.innerSubscription;d&&d.unsubscribe();this.add(this.innerSubscription=k.subscribeToResult(this,a,b,c))};c.prototype._complete=function(){var c=this.innerSubscription;c&&!c.isUnsubscribed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=
function(a,b,c,d,g){this.resultSelector?this._tryNotifyNext(a,b,c,d):this.destination.next(b)};c.prototype._tryNotifyNext=function(a,b,c,d){var g;try{g=this.resultSelector(a,b,c,d)}catch(k){this.destination.error(k);return}this.destination.next(g)};return c}(e.OuterSubscriber)},function(e,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};e=a(2);var k=a(183),d=a(6);h.take=function(a){return 0===
a?new d.EmptyObservable:this.lift(new g(a))};var g=function(){function a(b){this.total=b;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a){return new b(a,this.total)};return a}(),b=function(a){function b(d,f){a.call(this,d);this.total=f;this.count=0}l(b,a);b.prototype._next=function(a){var b=this.total;++this.count<=b&&(this.destination.next(a),this.count===b&&this.destination.complete())};return b}(e.Subscriber)},function(e,h,a){var l=function(a,c){function d(){this.constructor=
a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(24);var k=a(29);h.takeUntil=function(a){return this.lift(new d(a))};var d=function(){function a(b){this.notifier=b}a.prototype.call=function(a){return new g(a,this.notifier)};return a}(),g=function(a){function c(c,d){a.call(this,c);this.notifier=d;this.add(k.subscribeToResult(this,d))}l(c,a);c.prototype.notifyNext=function(a,b,c,d,g){this.complete()};c.prototype.notifyComplete=
function(){};return c}(e.OuterSubscriber)},function(e,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},k=a(26),d=a(77);e=a(2);h.timeout=function(a,b,e){void 0===b&&(b=null);void 0===e&&(e=k.asap);var h=d.isDate(a);a=h?+a-e.now():Math.abs(a);return this.lift(new g(a,h,b,e))};var g=function(){function a(b,c,d,g){this.waitFor=b;this.absoluteTimeout=c;this.errorToSend=d;this.scheduler=
g}a.prototype.call=function(a){return new b(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler)};return a}(),b=function(a){function b(d,f,g,e,k){a.call(this,d);this.absoluteTimeout=f;this.waitFor=g;this.errorToSend=e;this.scheduler=k;this._previousIndex=this.index=0;this._hasCompleted=!1;this.scheduleTimeout()}l(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",
{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.notifyTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);
this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.notifyTimeout=function(){this.error(this.errorToSend||Error("timeout"))};return b}(e.Subscriber)},function(e,h,a){var l=function(a,g){function b(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(b.prototype=g.prototype,new b)},k=a(184);e=function(a){function g(){a.apply(this,arguments)}l(g,a);g.prototype._schedule=function(b,
c){void 0===c&&(c=0);if(0<c)return a.prototype._schedule.call(this,b,c);this.delay=c;this.state=b;var f=this.scheduler;f.actions.push(this);f.scheduledId||(f.scheduledId=k.Immediate.setImmediate(function(){f.scheduledId=null;f.flush()}));return this};g.prototype._unsubscribe=function(){var b=this.scheduler,c=b.scheduledId,f=b.actions;a.prototype._unsubscribe.call(this);0===f.length&&(b.active=!1,null!=c&&(b.scheduledId=null,k.Immediate.clearImmediate(c)))};return g}(a(44).FutureAction);h.AsapAction=
e},function(e,h,a){var l=function(a,g){function b(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(b.prototype=g.prototype,new b)},k=a(178);e=function(a){function g(){a.apply(this,arguments)}l(g,a);g.prototype.scheduleNow=function(a,c){return(new k.AsapAction(this,a)).schedule(c)};return g}(a(181).QueueScheduler);h.AsapScheduler=e},function(e,h,a){var l=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=
d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(){a.apply(this,arguments)}l(d,a);d.prototype._schedule=function(d,b){void 0===b&&(b=0);if(0<b)return a.prototype._schedule.call(this,d,b);this.delay=b;this.state=d;var c=this.scheduler;c.actions.push(this);c.flush();return this};return d}(a(44).FutureAction);h.QueueAction=e},function(e,h,a){var l=a(180),k=a(44);e=function(){function a(){this.active=!1;this.actions=[];this.scheduledId=null}a.prototype.now=
function(){return Date.now()};a.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var a=this.actions,b=void 0;b=a.shift();)b.execute();this.active=!1}};a.prototype.schedule=function(a,b,c){void 0===b&&(b=0);return 0>=b?this.scheduleNow(a,c):this.scheduleLater(a,b,c)};a.prototype.scheduleNow=function(a,b){return(new l.QueueAction(this,a)).schedule(b)};a.prototype.scheduleLater=function(a,b,c){return(new k.FutureAction(this,a)).schedule(c,b)};return a}();h.QueueScheduler=
e},function(e,h,a){var l=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)};e=function(a){function d(d,b){a.call(this);this.subject=d;this.observer=b;this.isUnsubscribed=!1}l(d,a);d.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var a=this.subject,b=a.observers;this.subject=null;b&&0!==b.length&&!a.isUnsubscribed&&(a=b.indexOf(this.observer),-1!==a&&b.splice(a,
1))}};return d}(a(5).Subscription);h.SubjectSubscription=e},function(e,h){var a=function(a,d){function g(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)},l=function(e){function d(){e.call(this,"argument out of range");this.name="ArgumentOutOfRangeError"}a(d,e);return d}(Error);h.ArgumentOutOfRangeError=l},function(e,h,a){e=a(13);a=function(){function a(e){this.root=e;e.setImmediate&&"function"===typeof e.setImmediate?
(this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():
this.setImmediate=this.createSetTimeoutSetImmediate(),e=function g(a){delete g.instance.tasksByHandle[a]},e.instance=this,this.clearImmediate=e)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)};a.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return Boolean(a&&
"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var d=!0,g=a.onmessage;a.onmessage=function(){d=!1};a.postMessage("","*");a.onmessage=g;return d}return!1};a.prototype.partiallyApplied=function(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];g=function c(){var a=c.handler,d=c.args;"function"===typeof a?a.apply(void 0,d):(new Function(""+a))()};g.handler=a;g.args=d;return g};a.prototype.addFromSetImmediateArguments=
function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function g(){var a=g.instance,c=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,c));return c};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,d="setImmediate$"+a.Math.random()+"$",g=function c(f){var g=c.instance;f.source===a&&
"string"===typeof f.data&&0===f.data.indexOf(d)&&g.runIfPresent(+f.data.slice(d.length))};g.instance=this;a.addEventListener("message",g,!1);g=function f(){var a=f,d=a.messagePrefix,a=a.instance,g=a.addFromSetImmediateArguments(arguments);a.root.postMessage(d+g,"*");return g};g.instance=this;g.messagePrefix=d;return g};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var d=this.tasksByHandle[a];if(d){this.currentlyRunningATask=
!0;try{d()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,d=new this.root.MessageChannel;d.port1.onmessage=function(b){a.runIfPresent(b.data)};var g=function c(){var a=c,d=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);d.port2.postMessage(a);return a};g.channel=d;g.instance=this;return g};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function g(){var a=g.instance,c=a.root.document,
f=c.documentElement,e=a.addFromSetImmediateArguments(arguments),k=c.createElement("script");k.onreadystatechange=function(){a.runIfPresent(e);k.onreadystatechange=null;f.removeChild(k);k=null};f.appendChild(k);return e};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function g(){var a=g.instance,c=a.addFromSetImmediateArguments(arguments);a.root.setTimeout(a.partiallyApplied(a.runIfPresent,c),0);return c};a.instance=this;return a};return a}();h.ImmediateDefinition=
a;h.Immediate=new a(e.root)},function(e,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=a(2),d=a(46);h.toSubscriber=function(a,b,c){if(a&&"object"===("undefined"===typeof a?"undefined":l(a))){if(a instanceof k.Subscriber)return a;if("function"===typeof a[d.rxSubscriber])return a[d.rxSubscriber]()}return new k.Subscriber(a,b,c)}},function(e,h){e.exports=
function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1);return a}},function(e,h){function a(a){return function(e,d){return null==e?d:a*d+(1-a)*e}}e.exports=function(e,k){return e.map(function(a){return a.value.response}).filter(function(a){return 2E3<a.size}).map(function(a){return a.size/a.duration*8E3}).scan(a(k.alpha))}},function(e,h,a){function l(a,b){return"number"==typeof a&&0<a?a:b}function k(a,b){var c=2>=arguments.length||void 0===arguments[2]?
0:arguments[2];return x(a,function(a){return a/b<=1-c})||a[0]}function d(a,b){var c=q(a,function(a){return a.width>=b});return c?c.bitrate:Infinity}function g(a,b){return b?q(a,function(a){return a.lang===b}):null}function b(a,b){return a.filter(function(a){return a.type===b})}var c=a(4),f=a(5).Subscription,m=a(45).BehaviorSubject,u=a(25).combineLatestStatic,n=a(15).only,q=a(22),x=a(89),v=a(23),p=a(187),r={defaultLanguage:"fra",defaultSubtitle:"",defaultBufferSize:30,defaultBufferThreshold:.3};e.exports=
function(a,e,h){function x(a){return F.distinctUntilChanged().map(function(b){return g(a,b)||a[0]})}function C(a){return J.distinctUntilChanged().map(function(b){return g(a,b)})}var t=v(3>=arguments.length||void 0===arguments[3]?{}:arguments[3],r),B=t.defaultSubtitle,A=t.defaultBufferSize,O=t.defaultBufferThreshold,G=t.initVideoBitrate,E=t.initAudioBitrate,H=h.videoWidth,L=h.inBackground,F=new m(t.defaultLanguage),J=new m(B),K={audio:new m(E||0),video:new m(G||0)},t=[p(b(a,"audio"),{alpha:.6}).multicast(K.audio),
p(b(a,"video"),{alpha:.6}).multicast(K.video)],I=new f;t.forEach(function(a){return I.add(a.connect())});var M={audio:new m(Infinity),video:new m(Infinity)},R={audio:new m(Infinity),video:new m(Infinity)},P={audio:new m(A),video:new m(A),text:new m(A)};return{setLanguage:function(a){F.next(a)},setSubtitle:function(a){J.next(a)},getLanguage:function(){return F.value},getSubtitle:function(){return J.value},getAverageBitrates:function(){return K},getAudioMaxBitrate:function(){return R.audio.value},getVideoMaxBitrate:function(){return R.video.value},
getAudioBufferSize:function(){return P.audio.value},getVideoBufferSize:function(){return P.video.value},setAudioBitrate:function(a){M.audio.next(l(a,Infinity))},setVideoBitrate:function(a){M.video.next(l(a,Infinity))},setAudioMaxBitrate:function(a){R.audio.next(l(a,Infinity))},setVideoMaxBitrate:function(a){R.video.next(l(a,Infinity))},setAudioBufferSize:function(a){P.audio.next(l(a,A))},setVideoBufferSize:function(a){P.video.next(l(a,A))},getBufferAdapters:function(a){var b=a.type,f=a.bitrates,g=
a.representations;a=g[0];var e=void 0;if(1<g.length){a=M[b];var e=R[b],h=K[b].map(function(a,b){var c=void 0,c=0===b?0:O;return k(f,a,c)}).distinctUntilChanged().debounceTime(2E3).startWith(k(f,K[b].getValue(),0));"video"==b&&(e=u(e,H,L,function(a,b,c){if(c)return f[0];b=d(g,b);return b<a?b:a}));e=u(a,e,h,function(a,b,c){var d=void 0,d=Infinity>a?a:Infinity>b?Math.min(b,c):c;return q(g,function(a){return a.bitrate===k(f,d)})}).distinctUntilChanged(function(a,b){return a.id===b.id})["do"](function(a){return c.info("bitrate",
b,a.bitrate)})}else e=n(a);return{representations:e,bufferSizes:P[b]||new m(A)}},getAdaptationsChoice:function(a,b){if("audio"==a)return x(b);if("text"==a)return C(b);if(1==b.length)return n(b[0]);throw Error("adaptive: unknown type "+a+" for adaptation chooser");},unsubscribe:function(){I&&(I.unsubscribe(),I=null)}}}},function(e,h,a){var l=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},
k=a(4);a(3);var d=a(190).BufferingQueue,g=a(31).BufferedRanges,b=a(1).Observable,c=a(10).Subject,f=a(25).combineLatestStatic,m=a(11).mergeStatic,u=a(6).EmptyObservable.create,n=a(154).FromObservable.create,q=a(41).TimerObservable.create,x=a(212).SimpleSet;h=a(83);var v=h.IndexHandler,p=h.OutOfIndexError;e.exports={Buffer:function(a){function e(a,b){for(var c=a.ts,d=a.buffered,f=d.getRange(c),d=d.getOuterRanges(c),g=[],h=0;h<d.length;h++){var l=d[h];c-b<l.end?g.push(l):c+b>l.start&&g.push(l)}f&&(k.debug("buffer: gc removing part of inner range",
g),c-b>f.start&&g.push({start:f.start,end:c-b}),c+b<f.end&&g.push({start:c+b,end:f.end}));return g}function h(){k.warn("buffer: running garbage collector");return G.take(1).flatMap(function(a){var b=e(a,240);0===b.length&&(b=e(a,30));k.debug("buffer: gc cleaning",b);return n(b.map(function(a){return M.removeBuffer(a)})).concatAll()})}function z(a){var b=a.parsed.blob;return M.appendBuffer(b)["catch"](function(a){if("QuotaExceededError"!==a.name)throw a;return h().flatMap(function(){return M.appendBuffer(b)})})}
function D(a){function c(a){if(e.test(a.getId()))return!1;if(a.isInitSegment()||0>a.getTime())return!0;var b=d.scale(a.getTime()),f=d.scale(a.getDuration());return(b=I.hasRange(b,f))?1.5*b.bitrate<a.getRepresentation().bitrate:!0}var d=new v(B,a),e=new x,h=f(G,K).flatMap(function(b,f){var h=b[0],l=b[1],m=new g(t.buffered);E&&!I.equals(m)&&(k.debug("intersect new buffer",C),I.intersect(m));var q=void 0;try{var n=d,v=[];0===f&&(k.debug("add init segment",C),v.push(n.getInitSegment()));if(0===h.readyState)q=
v;else{var A=h.ts,x=Math.max(0,Math.min(l,h.liveGap,(h.duration||Infinity)-A)),h=void 0,r=m.getGap(A),h=r>L&&Infinity>r?Math.min(r,F):0,G=I.getRange(A);if(G&&G.bitrate===a.bitrate){var K=Math.floor(G.end-A);K>h&&(h=K)}var y=n.getSegments(A,h,x),q=v.concat(y)}q=q.filter(c)}catch(w){if(w instanceof p)return H.next({type:"out-of-index",value:w}),u();throw w;}for(m=0;m<q.length;m++)e.add(q[m].getId());return q}).concatMap(function(a){return A({segment:a})}).concatMap(z,function(b){var c=b.parsed;e.remove(b.segment.getId());
var f=c.timescale;f&&d.setTimescale(f);var f=c.nextSegments,c=c.currentSegment,g=void 0,g=f?d.insertNewSegments(f,c):[];c&&I.insert(a.bitrate,d.scale(c.ts),d.scale(c.ts+c.d));return{type:"pipeline",value:l({bufferType:C,addedSegments:g},b)}});return m(h,H)["catch"](function(c){if(412!==c.code)throw c;return b.of({type:"precondition-failed",value:c}).concat(q(2E3)).concat(D(a))}).startWith({type:"buffer",value:{bufferType:C,adaptation:B,representation:a}})}var C=a.bufferType,t=a.sourceBuffer,B=a.adaptation,
A=a.pipeline,O=a.adapters,G=a.timings;a=a.seekings;var E="audio"==C||"video"==C,H=new c,L="video"==C?4:1,F="video"==C?6:1,J=O.representations,K=O.bufferSizes,I=new g,M=new d(t);return f(J,a,function(a){return a}).switchMap(D)["finally"](function(){return M.dispose()})},EmptyBuffer:function(a){return b.of({type:"buffer",value:{bufferType:a,adaptation:null,representation:null}})}}},function(e,h,a){var l=a(10).Subject;h=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.buffer=d;this.queue=[];this.flushing=null;this._onUpdate=this.onUpdate.bind(this);this._onError=this.onError.bind(this);this._flush=this.flush.bind(this);this.buffer.addEventListener("update",this._onUpdate);this.buffer.addEventListener("error",this._onError);this.buffer.addEventListener("updateend",this._flush)}a.prototype.dispose=function(){this.buffer.removeEventListener("update",this._onUpdate);this.buffer.removeEventListener("error",this._onError);this.buffer.removeEventListener("updateend",
this._flush);this.buffer=null;this.queue.length=0;this.flushing=null};a.prototype.onUpdate=function(a){this.flushing&&(this.flushing.next(a),this.flushing.complete(),this.flushing=null)};a.prototype.onError=function(a){if(this.flushing){var g=void 0,g=a.target&&a.target.error?a.target.error:Error("buffer: error event");this.flushing.error(g);this.flushing=null}};a.prototype.queueAction=function(a,g){var b=new l;1===this.queue.unshift({type:a,args:g,subj:b})&&this.flush();return b};a.prototype.appendBuffer=
function(a){return this.queueAction("append",a)};a.prototype.removeBuffer=function(a){return this.queueAction("remove",{start:a.start,end:a.end})};a.prototype.appendStream=function(a){return this.queueAction("stream",a)};a.prototype.flush=function(){if(!this.flushing&&0!==this.queue.length&&!this.buffer.updating){var a=this.queue.pop(),g=a.type,b=a.args;this.flushing=a.subj;switch(g){case "append":this.buffer.appendBuffer(b);break;case "stream":this.buffer.appendStream(b);break;case "remove":this.buffer.removeBuffer(b.start,
b.end)}}};return a}();e.exports={BufferingQueue:h}},function(e,h){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cache={}}a.prototype.add=function(a,d){var g=a.segment;g.isInitSegment()&&(this.cache[g.getId()]=d)};a.prototype.get=function(a){a=a.segment;return a.isInitSegment()&&(a=this.cache[a.getId()],null!=a)?a:null};return a}();e.exports={InitializationSegmentCache:a}},function(e,h,a){var l=a(11).mergeStatic,k=a(155).IntervalObservable.create;
h=a(14);var d=h.visibilityChange,g=h.videoSizeChange,b=window.devicePixelRatio||1;e.exports=function(a){var f=d().filter(function(a){return!1===a}),e=d().debounceTime(6E4).filter(function(a){return!0===a}),f=l(f,e).startWith(!1);return{videoWidth:l(k(2E4),g().debounceTime(500)).startWith("init").map(function(){return a.clientWidth*b}).distinctUntilChanged(),inBackground:f}}},function(e,h,a){function l(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+
typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}h=function(a){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var g=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==typeof g&&"function"!==typeof g?this:g}l(d,a);d.getLiveEdge=function(){throw Error("not implemented");
};d.prototype.addSegment=function(a){this.index.timeline.push(a);return!0};return d}(a(84));e.exports=h},function(e,h,a){var l=a(32).Segment;h=function(){function a(d,g,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=d;this.representation=g;this.index=b}a.getLiveEdge=function(){throw Error("not implemented");};a.prototype.checkRange=function(a){var g=this.index,b=g.list;a=Math.floor(a/g.duration);return 0<=a&&a<b.length};a.prototype.createSegment=
function(a,g){var b=this.index,c=b.list[a];return l.create(this.adaptation,this.representation,a,c.media,g,b.duration,0,c.range,null,!1)};a.prototype.getSegments=function(a,g){for(var b=this.index.duration,c=Math.floor(g/b),f=[],e=Math.floor(a/b);e<c;)f.push(this.createSegment(e,e*b)),e++;return f};a.prototype.addSegment=function(){return!1};return a}();e.exports=h},function(e,h,a){var l=a(32).Segment;h=function(){function a(d,g,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=d;this.representation=g;this.index=b}a.getLiveEdge=function(a,g){return Date.now()/1E3-g.availabilityStartTime-g.suggestedPresentationDelay};a.prototype.checkRange=function(){return!0};a.prototype.createSegment=function(a){var g=this.index,b=g.startNumber,g=g.duration;a=Math.floor(a/g)+(null==b?1:b);return l.create(this.adaptation,this.representation,a,this.index.media,a*g,this.index.duration,a,null,null,!1)};a.prototype.getSegments=function(a,g){for(var b=this.index.duration,c=[],
f=a;f<=g;f+=b)c.push(this.createSegment(f));return c};a.prototype.addSegment=function(){return!1};return a}();e.exports=h},function(e,h,a){function l(a,g,e){function h(a){e.next(a)}function l(a){var d=B.get(a);return null===d?c(z(a).timeout(t,f),A):d&&"function"==typeof d.subscribe?d["catch"](function(){return c(z(a).timeout(t,f),A)}):b.of(d)}function r(b,c){var d=k({response:c},b);B.add(b,c);u.schedule(h,0,{type:a,value:d});return d}function y(a,b){return k({parsed:b},a)}var w=g.resolver,z=g.loader,
D=g.parser,C=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];D||(D=b.of);z||(z=b.of);w||(w=b.of);var C=d(C,{totalRetry:3,timeout:1E4,cache:m}),t=C.timeout,B=C.cache,A={retryDelay:500,totalRetry:C.totalRetry,shouldRetry:function(a){return 500<=a.code||200>a.code||/timeout/.test(a.message)||/request: error event/.test(a.message)}};return function(a){return w(a).flatMap(l,r).flatMap(D,y)}}var k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,
d)&&(a[d]=c[d])}return a},d=a(23),g=a(10).Subject;h=a(26).asap;var b=a(1).Observable,c=a(215).retryWithBackoff,f=Error("timeout"),m={add:function(){},get:function(){return null}},u=h;e.exports=function(){var a=new g;return{createPipelines:function(b){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],d={requiresMediaSource:function(){return!0!==b.directFile}},f;for(f in b)d[f]=l(f,b[f],a,c[f]);return d},metrics:a}}},function(e,h,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function d(a,b){return b?"seeking"==b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"}function g(){}function b(a){y(a.man,"player: no manifest loaded")}
function c(a,b){return a.filter(function(a){return a.type==b}).map(function(a){return a.value})}var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},m=a(4),u=a(23),n=a(5).Subscription,q=a(10).Subject,x=a(45).BehaviorSubject,v=a(25).combineLatestStatic,p=a(15).on;h=a(35);var r=a(213),y=a(3),w=a(14),z=w.HTMLVideoElement_,D=w.exitFullscreen,C=w.requestFullscreen,t=w.isFullscreen,B=w.onFullscreenChange,
w=a(85),A=w.getEmptyTimings,O=w.timingsSampler,G=w.toWallClockTime,E=w.fromWallClockTime,H=w.getLiveGap,L=a(191).InitializationSegmentCache,F=a(31).BufferedRanges,J=a(201).parseTimeFragment,K=a(192),I=a(48),M=a(206),R=a(196),P=a(188),Q=a(199),T=a(82);a=function(a){function e(b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var c=b.videoElement,d=b.transport,f=b.transportOptions,g=b.defaultLanguage,k=b.defaultSubtitle,h=b.initVideoBitrate;b=b.initAudioBitrate;var n=
l(this,a.call(this));n.defaultTransport=d;n.defaultTransportOptions=f||{};c||(c=document.createElement("video"));y(c instanceof z,"requires an actual HTMLVideoElement");c.preload="auto";n.version="2.0.0-alpha3";n.video=c;n.fullscreen=B(c).subscribe(function(){return n.trigger("fullscreenChange",n.isFullscreen())});n.playing=new x;n.stream=new q;var f=R(),d=f.createPipelines,f=f.metrics,A=O(c),c=K(c);n.createPipelines=d;n.metrics=f;n.timings=A;n.adaptive=P(f,A,c,{initVideoBitrate:h,initAudioBitrate:b,
defaultLanguage:g,defaultSubtitle:k});n.muted=.1;n._setPlayerState("STOPPED");n._resetStates();n.log=m;return n}k(e,a);e.prototype._resetStates=function(){this.man=null;this.reps={video:null,audio:null,text:null};this.adas={video:null,audio:null,text:null};this.evts={};this.frag={start:null,end:null}};e.prototype._unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=null)};e.prototype.stop=function(){"STOPPED"!==this.state&&(this._resetStates(),this._unsubscribe(),
this._setPlayerState("STOPPED"))};e.prototype.dispose=function(){this.stop();this.metrics.unsubscribe();this.adaptive.unsubscribe();this.fullscreen.unsubscribe();this.stream.unsubscribe();this.video=this.createPipelines=this.timings=this.stream=this.fullscreen=this.adaptive=this.metrics=null};e.prototype._recordState=function(a,b){this.evts[a]!==b&&(this.evts[a]=b,this.trigger(a+"Change",b))};e.prototype._parseOptions=function(a){var b=a=u(f({},a),{transport:this.defaultTransport,transportOptions:{},
keySystems:[],timeFragment:{},subtitles:[],autoPlay:!1,directFile:!1}),c=b.transport,d=b.url,e=b.keySystems,g=b.timeFragment,k=b.subtitles,h=a,b=h.transportOptions,l=h.manifests,m=h.autoPlay,h=h.directFile,g=J(g);h&&(c="directfile");y(!!l^!!d,"player: you have to pass either a url or a list of manifests");l&&(e=l[0],d=e.url,k=e.subtitles||[],e=l.map(function(a){return a.keySystem}).filter(Boolean));"string"==typeof c&&(c=M[c]);"function"==typeof c&&(c=c(u(b,this.defaultTransportOptions)));y(c,"player: transport "+
a.transport+" is not supported");return{url:d,keySystems:e,subtitles:k,timeFragment:g,autoPlay:m,transport:c}};e.prototype.loadVideo=function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],a=this._parseOptions(a);m.info("loadvideo",a);var b=a.url,f=a.keySystems,e=a.subtitles,k=a.timeFragment,h=a.autoPlay,a=a.transport;this.stop();this.frag=k;this.playing.next(h);var l=this.createPipelines(a,{audio:{cache:new L},video:{cache:new L}}),a=this.timings,q=this.video,b=Q({url:b,keySystems:f,
subtitles:e,timings:a,timeFragment:k,adaptive:this.adaptive,pipelines:l,videoElement:q,autoPlay:h}).publish(),e=c(b,"stalled").startWith(null),f=c(b,"loaded").take(1).share(),e=f.mapTo("LOADED").concat(v(this.playing,e,d)).distinctUntilChanged().startWith("LOADING"),q=p(q,["play","pause"]),k=this.subscriptions=new n;k.add(q.subscribe(this._playPauseNext.bind(this),g));k.add(e.subscribe(this._setPlayerState.bind(this),g));k.add(a.subscribe(this._triggerTimeChange.bind(this),g));k.add(b.subscribe(this._streamNext.bind(this),
this._streamError.bind(this),this._streamComplete.bind(this)));k.add(b.connect());this.subscriptions?this._triggerTimeChange():k.unsubscribe();return f};e.prototype._streamNext=function(a){var b=a.type,c=a.value;"buffer"==b&&this._bufferNext(c);"manifest"==b&&this._manifestNext(c);"pipeline"==b&&this.trigger("progress",c.segment);this.stream.next(a)};e.prototype._streamError=function(a){this._resetStates();this.trigger("error",a);this._setPlayerState("STOPPED");this._unsubscribe();this.stream.next({type:"error",
value:a})};e.prototype._streamComplete=function(){this._resetStates();this._setPlayerState("ENDED");this._unsubscribe();this.stream.next({type:"ended",value:null})};e.prototype._manifestNext=function(a){this.man=a;this.trigger("manifestChange",a)};e.prototype._bufferNext=function(a){var b=a.bufferType,c=a.adaptation;a=a.representation;this.reps[b]=a;this.adas[b]=c;"text"==b&&this._recordState("subtitle",c&&c.lang||"");"video"==b&&this._recordState("videoBitrate",a&&a.bitrate||-1);"audio"==b&&(this._recordState("language",
c&&c.lang||""),this._recordState("audioBitrate",a&&a.bitrate||-1))};e.prototype._playPauseNext=function(a){this.playing.next("play"==a.type)};e.prototype._setPlayerState=function(a){this.state!==a&&(this.state=a,m.info("playerStateChange",a),this.trigger("playerStateChange",a))};e.prototype._triggerTimeChange=function(a){this.man&&a?(this.man.isLive&&0<a.ts&&(a.wallClockTime=G(a.ts,this.man),a.liveGap=H(a.ts,this.man)),this.trigger("currentTimeChange",a)):this.trigger("currentTimeChange",A())};e.prototype.getManifest=
function(){return this.man};e.prototype.getVideoElement=function(){return this.video};e.prototype.getNativeTextTrack=function(){return 0<this.video.textTracks.length?this.video.textTracks[0]:null};e.prototype.getPlayerState=function(){return this.state};e.prototype.isLive=function(){b(this);return this.man.isLive};e.prototype.getUrl=function(){b(this);return this.man.locations[0]};e.prototype.getVideoDuration=function(){return this.video.duration};e.prototype.getVideoLoadedTime=function(){return(new F(this.video.buffered)).getSize(this.video.currentTime)};
e.prototype.getVideoPlayedTime=function(){return(new F(this.video.buffered)).getLoaded(this.video.currentTime)};e.prototype.getCurrentTime=function(){if(!this.man)return 0;var a=this.video.currentTime;return this.man.isLive?G(a,this.man):a};e.prototype.getStartTime=function(){return this.frag.start};e.prototype.getEndTime=function(){return this.frag.end};e.prototype.getPlaybackRate=function(){return this.video.playbackRate};e.prototype.getVolume=function(){return this.video.volume};e.prototype.isFullscreen=
function(){return t()};e.prototype.getAvailableLanguages=function(){return this.man&&I.getAvailableLanguages(this.man)||[]};e.prototype.getAvailableSubtitles=function(){return this.man&&I.getAvailableSubtitles(this.man)||[]};e.prototype.getLanguage=function(){return this.adaptive.getLanguage()};e.prototype.getSubtitle=function(){return this.adaptive.getSubtitle()};e.prototype.getAvailableVideoBitrates=function(){var a=I.getAdaptationsByType(this.man,"video");return a[0]&&a[0].bitrates.slice()||[]};
e.prototype.getAvailableAudioBitrates=function(){var a=this.adas.audio;return a&&a.bitrates.slice()||[]};e.prototype.getVideoBitrate=function(){return this.evts.videoBitrate};e.prototype.getAudioBitrate=function(){return this.evts.audioBitrate};e.prototype.getVideoMaxBitrate=function(){return this.adaptive.getVideoMaxBitrate()};e.prototype.getAudioMaxBitrate=function(){return this.adaptive.getAudioMaxBitrate()};e.prototype.getVideoBufferSize=function(){return this.adaptive.getVideoBufferSize()};e.prototype.getAudioBufferSize=
function(){return this.adaptive.getAudioBufferSize()};e.prototype.getAverageBitrates=function(){return this.adaptive.getAverageBitrates()};e.prototype.getMetrics=function(){return this.metrics};e.prototype.getTimings=function(){return this.timings};e.prototype.play=function(){this.video.play()};e.prototype.pause=function(){this.video.pause()};e.prototype.setPlaybackRate=function(a){this.video.playbackRate=a};e.prototype.goToStart=function(){return this.seekTo(this.getStartTime())};e.prototype.seekTo=
function(a){y(this.man);var b=this.video.currentTime;this.man.isLive&&(a=E(a,this.man));return a!==b?(m.info("seek to",a),this.video.currentTime=a):b};e.prototype.setFullscreen=function(){!1===(0>=arguments.length||void 0===arguments[0]?!0:arguments[0])?D():C(this.video)};e.prototype.setVolume=function(a){a!==this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))};e.prototype.mute=function(){this.muted=this.getVolume()||.1;this.setVolume(0)};e.prototype.unMute=function(){0===this.getVolume()&&
this.setVolume(this.muted)};e.prototype.setLanguage=function(a){y(0<=this.getAvailableLanguages().indexOf(a),"player: unknown language");this.adaptive.setLanguage(a)};e.prototype.setSubtitle=function(a){y(!a||0<=this.getAvailableSubtitles().indexOf(a),"player: unknown subtitle");this.adaptive.setSubtitle(a||"");a||this._recordState("subtitle","")};e.prototype.setVideoBitrate=function(a){y(0===a||0<=this.getAvailableVideoBitrates().indexOf(a),"player: video bitrate unavailable");this.adaptive.setVideoBitrate(a)};
e.prototype.setAudioBitrate=function(a){y(0===a||0<=this.getAvailableAudioBitrates().indexOf(a),"player: audio bitrate unavailable");this.adaptive.setAudioBitrate(a)};e.prototype.setVideoMaxBitrate=function(a){this.adaptive.setVideoMaxBitrate(a)};e.prototype.setAudioMaxBitrate=function(a){this.adaptive.setAudioMaxBitrate(a)};e.prototype.setVideoBufferSize=function(a){this.adaptive.setVideoBufferSize(a)};e.prototype.setAudioBufferSize=function(a){this.adaptive.setAudioBufferSize(a)};e.prototype.asObservable=
function(){return this.stream};e.prototype.getDebug=function(){return r.getDebug(this)};e.prototype.showDebug=function(){r.showDebug(this,this.video)};e.prototype.hideDebug=function(){r.hideDebug()};e.prototype.toggleDebug=function(){r.toggleDebug(this,this.video)};e.prototype.getCurrentKeySystem=function(){return T.getCurrentKeySystem()};return e}(h);e.exports=a},function(e,h,a){function l(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}h=a(35);var k=a(1).Observable,d=a(31).BufferedRanges,g=a(3);a=function(a){function c(f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var e;e=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==
typeof e?this:e;e.codec=f;e.updating=!1;e.readyState="opened";e.buffered=new d;return e}l(c,a);c.prototype.appendBuffer=function(a){var b=this;this._lock(function(){return b._append(a)})};c.prototype.remove=function(a,b){var c=this;this._lock(function(){return c._remove(a,b)})};c.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};c.prototype._append=function(){};c.prototype._remove=function(){};c.prototype._abort=function(){};c.prototype._lock=
function(a){var b=this;g(!this.updating,"text-buffer: cannot remove while updating");this.updating=!0;this.trigger("updatestart");(a=a())&&"function"==a.subscribe||(a=k.of(a));a.subscribe(function(){return b._unlock("update")},function(a){return b._unlock("error",a)})};c.prototype._unlock=function(a,b){this.updating=!1;this.trigger(a,b);this.trigger("updateend")};return c}(h);e.exports={AbstractSourceBuffer:a}},function(e,h,a){function l(a){return"audio"==a||"video"==a}var k=a(4),d=a(3);h=a(85);var g=
h.getLiveGap,b=h.seekingsSampler,c=h.fromWallClockTime,f=a(15).retryWithBackoff,m=a(1).Observable;h=a(15);var u=h.first,n=h.on,q=a(6).EmptyObservable.create,x=a(11).mergeStatic,v=a(25).combineLatestStatic,p=Math.min;h=a(14);var r=h.MediaSource_,y=h.sourceOpen,w=h.canPlay,z=h.canSeek,D=h.clearVideoSrc,C=a(200),t=a(83).getLiveEdge,B=a(32).clearSegmentCache;h=a(189);var A=h.Buffer,O=h.EmptyBuffer;h=a(82);var G=h.createEME,E=h.onEncrypted,H=h.EMEError;a=a(48);var L=a.normalizeManifest,F=a.mergeManifestsIndex,
J=a.mutateManifestLiveGap,K=a.getAdaptations,I={totalRetry:3,retryDelay:250,resetDelay:6E4,shouldRetry:function(a,b){if(/MEDIA_ERR/.test(a.message)||a instanceof H)return!1;k.warn("stream retry",a,b);return!0}};e.exports=function(a){function e(a,b,c){var d=c.type;c=c.codec;var f=void 0;if(l(d))ba[d]?f=ba[d]:(k.info("add sourcebuffer",c),f=b.addSourceBuffer(c),ba[d]=f);else{if(b=X[d])try{b.abort()}catch(g){k.warn(g)}finally{delete X[d]}if("text"==d)k.info("add text sourcebuffer",c),f=new C(a,c);else throw a=
"stream: unknown buffer type "+d,k.error(a),Error(a);X[d]=f}return f}function h(a,b,c){a=c.type;c=void 0;var d=l(a);d?(c=ba[a],delete ba[a]):(c=X[a],delete X[a]);if(c)try{c.abort(),d&&b.removeSourceBuffer(c)}catch(f){k.warn(f)}}function H(a){var c=ga.map(function(b){var c=void 0;na?(c=b.clone(),c.ts=p(b.ts,aa),c.duration=p(b.duration,aa)):c=b;c.liveGap=g(b.ts,a);return c}),d=b(c);return{timings:c,seekings:d}}function T(a,b,c,d){var f=b.type;return ha.getAdaptationsChoice(f,b.adaptations).switchMap(function(g){if(!g)return h(N,
a,b),O(f);var m=ha.getBufferAdapters(g);g=A({bufferType:f,sourceBuffer:e(N,a,b),pipeline:da[f],adaptation:g,timings:c,seekings:d,adapters:m});return l(f)?g:g["catch"](function(a){k.error("buffer",f,"has crashed",a);return q()})})}function V(a){var b=z(N)["do"](function(){var b=a.duration,f=ma,e=aa,g=/^\d*(\.\d+)? ?%$/;"string"==typeof f&&g.test(f)&&(f=parseFloat(f)/100*b);"string"==typeof e&&g.test(e)&&(aa=parseFloat(e)/100*b);if(Infinity===e||"100%"===e)e=b;a.isLive?f=f?c(f,a):t(a):d(f<b&&e<=b,"stream: bad startTime and endTime");
k.info("set initial time",f);N.playbackRate=1;N.currentTime=f}),f=w(N)["do"](function(){k.info("canplay event");ia&&N.play();ia=!0});return u(v(b,f)).mapTo({type:"loaded",value:!0})}function S(){return ea&&ea.length?G(N,ea):E(N).map(function(){k.error("eme: ciphered media and no keySystem passed");throw Error("eme: ciphered media and no keySystem passed");})}function W(a,b){var c=b.changePlaybackRate,d=void 0===c?!0:c;return a.distinctUntilChanged(function(a,b){var c=b.stalled,f=a.stalled,e=void 0,
e=f||c?f&&c?f.name==c.name:!1:!0;!e&&d&&(f?(k.info("resume playback",b.ts,b.name),N.playbackRate=f.playback):(k.info("stop playback",b.ts,b.name),N.playbackRate=0));c&&(c=b.buffered.getNextRangeGap(b.ts),1>c&&(f=b.ts+c+1/60,N.currentTime=f,k.warn("discontinuity seek",b.ts,c,f)));return e}).map(function(a){return{type:"stalled",value:a.stalled}})}function Y(a){return a&&"out-of-index"==a.type}function U(a,b){if(Y(b))return k.info("out of index"),ja({url:a.locations[0]}).map(function(b){b=b.parsed;
return{type:"manifest",value:F(a,L(b.url,b.manifest,fa))}});b&&"precondition-failed"==b.type&&(J(a,1),k.warn("precondition failed",a.presentationLiveGap));return m.of(b)}function Z(a,b,c,d){var f=K(b).map(function(b){return T(a,b,c,d)}),f=x.apply(null,f);return b.isLive?f.distinctUntilChanged(function(a,b){return Y(b)&&Y(a)}).concatMap(function(a){return U(b,a)}):f}function ka(){return n(N,"error").flatMap(function(){var a="stream: video element MEDIA_ERR code "+N.error.code;k.error(a);throw Error(a);
})}var la=a.url,ea=a.keySystems,fa=a.subtitles,ga=a.timings,ca=a.timeFragment,ha=a.adaptive,da=a.pipelines,N=a.videoElement,ia=a.autoPlay;B();var ma=ca.start,na=Infinity>aa,aa=ca.end,ja=da.manifest,ba={},X={};a=ga.filter(function(a){var b=a.ts;a=a.duration;return 0<a&&.2>p(a,aa)-b});ca=f(function(a){var b=a.url,c=a.mediaSource;a=c?y(c):m.of(null);return v(ja({url:b}),a).flatMap(function(a){a=a[0].parsed;a=L(a.url,a.manifest,fa);if(c){var b=void 0,b=Infinity===a.duration?Number.MAX_VALUE:a.duration;
c.duration!==b&&(c.duration=b,k.info("set duration",c.duration))}var b=H(a),d=b.timings,f=b.seekings,b=m.of({type:"manifest",value:a}),e=S(),g=W(d,{changePlayback:da.requiresMediaSource()}),g=V(a).concat(g);a=Z(c,a,d,f);d=ka();return x(b,g,e,a,d)})},I);return function(a,b){return m.create(function(c){d(r,"player: browser is required to support MediaSource");var f=void 0,e=void 0;da.requiresMediaSource()?(f=new r,e=URL.createObjectURL(f)):(f=null,e=a);b.src=e;c.next({url:a,mediaSource:f});k.info("create mediasource object",
e);return function(){if(f&&"closed"!=f.readyState)for(var a=f,c=a.readyState,a=a.sourceBuffers,d=0;d<a.length;d++){var g=a[d];try{"open"==c&&g.abort(),f.removeSourceBuffer(g)}catch(h){k.warn("error while disposing souceBuffer",h)}}Object.keys(X).forEach(function(a){a=X[a];try{a.abort()}catch(b){k.warn("error while disposing souceBuffer",b)}});D(b);if(e)try{URL.revokeObjectURL(e)}catch(h){k.warn("error while revoking ObjectURL",h)}e=f=X=ba=null}})}(la,N).flatMap(ca).takeUntil(a)}},function(e,h,a){function l(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}h=a(198).AbstractSourceBuffer;var k=a(14),d=k.addTextTrack,g=k.isVTTSupported,b=a(4),c=window.VTTCue||window.TextTrackCue;a=function(a){function e(b,c){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");
var g;g=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.video=b;g.codec=c;g.isVTT=/^text\/vtt/.test(c);var k=d(b),h=k.trackElement;g.track=k.track;g.trackElement=h;return g}l(e,a);e.prototype.createCuesFromArray=function(a){for(var b=[],d=0;d<a.length;d++){var f=a[d],e=f.start,g=f.end;(f=f.text)&&b.push(new c(e,g,f))}return b};e.prototype._append=function(a){var c=this;if(this.isVTT&&
g())a=new Blob([a],{type:"text/vtt"}),a=URL.createObjectURL(a),this.trackElement?(this.trackElement.src=a,this.buffered.insert(0,Infinity)):b.warn("vtt subtitles not supported");else if(a=this.createCuesFromArray(a),0<a.length){var d=a[0],f=a[a.length-1],e=this.track.cues;0<e.length&&d.startTime<e[e.length-1].endTime&&this._remove(0,Infinity);a.forEach(function(a){return c.track.addCue(a)});this.buffered.insert(0,d.startTime,f.endTime)}};e.prototype._remove=function(a,b){for(var c=this.track,d=c.cues,
f=0;f<d.length;f++){var e=d[f],g=e.startTime,k=e.endTime;g>=a&&g<=b&&k<=b&&c.removeCue(e)}this.buffered.remove(a,b)};e.prototype._abort=function(){var a=this.trackElement,b=this.video;a&&b&&b.hasChildNodes(a)&&b.removeChild(a);this.track.mode="disabled";this.size=0;this.video=this.track=this.trackElement=null};return e}(h);e.exports=a},function(e,h,a){function l(a){if(!a)return!1;a=a.replace(/^npt\:/,"").replace(/\.$/,"");var d=void 0,e=void 0,g=void 0;a=a.split(":");var k=a.length;switch(k){case 3:d=
parseInt(a[0],10);e=parseInt(a[1],10);g=parseFloat(a[2]);break;case 2:d=0;e=parseInt(a[0],10);g=parseFloat(a[1]);break;case 1:e=d=0;g=parseFloat(a[0]);break;default:return!1}b(23>=d,c);b(59>=e,c);b(1>=k||60>g,c);return 3600*d+60*e+g}function k(a){if(!a)return!1;var d=void 0,e=void 0,g=void 0,k=void 0,h=void 0;a=a.split(":");switch(a.length){case 3:d=parseInt(a[0],10);e=parseInt(a[1],10);g=parseInt(a[2],10);h=k=0;break;case 4:d=parseInt(a[0],10);e=parseInt(a[1],10);g=parseInt(a[2],10);-1===a[3].indexOf(".")?
(k=parseInt(a[3],10),h=0):(a=a[3].split("."),k=parseInt(a[0],10),h=parseInt(a[1],10));break;default:return!1}b(23>=d,c);b(59>=e,c);b(59>=g,c);return 3600*d+60*e+g+.001*k+1E-6*h}function d(a){return new Date(Date.parse(a))}function g(a){return a?a:!1}var b=a(3),c="Invalid MediaFragment";e.exports={parseTimeFragment:function(a){if("string"==typeof a){var e=a,h=e.split(",");b(2>=h.length,c);a=h[0]?h[0]:"";h=h[1]?h[1]:"";b((a||h)&&(!a||h||-1===e.indexOf(",")),c);a=a.replace(/^smpte(-25|-30|-30-drop)?\:/,
"").replace("clock:","");var e=/^((npt\:)?((\d+\:(\d\d)\:(\d\d))|((\d\d)\:(\d\d))|(\d+))(\.\d*)?)?$/,n=/^(\d+\:\d\d\:\d\d(\:\d\d(\.\d\d)?)?)?$/,q=/^((\d{4})(-(\d{2})(-(\d{2})(T(\d{2})\:(\d{2})(\:(\d{2})(\.(\d+))?)?(Z|(([-\+])(\d{2})\:(\d{2})))?)?)?)?)?$/,x=/^(\d*(\.\d+)? ?%)?$/,v=void 0;if(e.test(a)&&e.test(h))v=l;else if(n.test(a)&&n.test(h))v=k;else if(q.test(a)&&q.test(h))v=d;else if(x.test(a)&&x.test(h))v=g;else throw Error(c);a=v(a);h=v(h);b(!1!==a||!1!==h,c);a={start:!1===a?"":a,end:!1===h?
"":h}}else a={start:a.start,end:a.end};"string"==typeof a.start&&"string"==typeof a.end?(a.start||(a.start="0%"),a.end||(a.end="100%")):(a.start||(a.start=0),a.end||(a.end=Infinity));"string"==typeof a.start&&"string"==typeof a.end?(b(0<=parseFloat(a.start)&&100>=parseFloat(a.start),"player: startTime should be between 0% and 100%"),b(0<=parseFloat(a.end)&&100>=parseFloat(a.end),"player: endTime should be between 0% and 100%")):(b(("number"==typeof a.start||a.start instanceof Date)&&("number"==typeof a.end||
a.end instanceof Date),"player: timeFragment should have interface { start, end } where start and end are numbers or dates"),b(a.start<a.end,"player: startTime should be lower than endTime"),b(0<=a.start,"player: startTime should be greater than 0"));return a}}},function(e,h,a){function l(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+ +b+"-"}function k(a){return function(b,c,d){b=d?parseInt(d,10):1;return m(""+a,b)}}var d=a(1).Observable,g=a(6).EmptyObservable.create,b=
a(11).mergeStatic;a(3);var c=a(51),f=a(36).resolveURL,m=a(87).pad;h=a(203);var u=h.parseSidx,n=h.patchPssh,q=a(204),x=function(a){a.withMetadata=!0;return c(a)};e.exports=function(){var a=(0>=arguments.length||void 0===arguments[0]?{}:arguments[0]).contentProtectionParser;a||(a=function(){});var c={loader:function(a){var c=a.segment,d=c.getMedia(),e=c.getRange();a=c.getIndexRange();if(c.isInitSegment()&&!(d||e||a))return g();var h=void 0,h=e?{Range:l(e)}:null,e=void 0;d?-1===d.indexOf("$")?e=d:(e=
c.getRepresentation(),e=d.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,e.id).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,k(e.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,k(c.getNumber())).replace(/\$Time(|\%0(\d+)d)\$/g,k(c.getTime()))):e="";c=f(c.getResolvedURL(),e);h=x({url:c,format:"arraybuffer",headers:h});return a?(a=x({url:c,format:"arraybuffer",headers:{Range:l(a)}}),b(h,a)):h},parser:function(a){var b=a.segment;a=new Uint8Array(a.response.blob);var c=void 0,e=void 0,f=void 0,g=b.getIndexRange();
if(g=u(a,g?g[0]:0))c=g.segments,e=g.timescale;b.isInitSegment()||(0<=b.getTime()&&0<=b.getDuration()?f={ts:b.getTime(),d:b.getDuration()}:g&&1===g.segments.length&&(f={ts:g.segments[0].ts,d:g.segments[0].d}));b.isInitSegment()&&(b=b.getAdaptation(),b.contentProtection&&(a=n(a,b.contentProtection)));return d.of({blob:a,currentSegment:f,nextSegments:c,timescale:e})}};return{directFile:!1,manifest:{loader:function(a){return x({url:a.url,format:"document"})},parser:function(b){b=b.response;return d.of({manifest:q(b.blob,
a),url:b.url})}},audio:c,video:c,text:{loader:function(){}}}}},function(e,h,a){function l(a,b){for(var e=a.length,f=0,g=void 0,h=void 0;f+8<e&&(h=c(a,f),g=c(a,f+4),d(0<h,"dash: out of range size"),g!==b);)f+=h;if(f>=e)return-1;d(f+h<=e,"dash: atom out of range");return f}function k(a){var b=a.systemId;a=a.privateData;b=b.replace(/-/g,"");d(32===b.length);b=n(4,m(b),g(a.length),a);return n(g(b.length+8),u("pssh"),b)}var d=a(3);h=a(21);var g=h.itobe4,b=h.be8toi,c=h.be4toi,f=h.be2toi,m=h.hexToBytes,
u=h.strToBytes,n=h.concat;e.exports={parseSidx:function(a,d){var e=l(a,1936286840);if(-1==e)return null;var g=c(a,e),e=e+4+4,h=a[e],e=e+8,k=c(a,e),e=e+4,m=void 0;if(0===h)m=c(a,e),e+=4,d+=c(a,e)+g,e+=4;else if(1===h)m=b(a,e),e+=8,d+=b(a,e)+g,e+=8;else return null;g=[];e+=2;h=f(a,e);for(e+=2;0<=--h;){var n=c(a,e),e=e+4,u=n&2147483647;if(1==(n&2147483648)>>>31)throw Error("not implemented");n=c(a,e);e+=4;e+=4;g.push({ts:m,d:n,r:0,range:[d,d+u-1]});m+=n;d+=u}return{segments:g,timescale:k}},patchPssh:function(a,
b){if(!b||!b.length)return a;var d=l(a,1836019574);if(-1==d)return a;for(var e=c(a,d),f=[a.subarray(d,d+e)],h=0;h<b.length;h++)f.push(k(b[h]));f=n.apply(null,f);f.set(g(f.length),0);return n(a.subarray(0,d),f,a.subarray(d+e))}}},function(e,h,a){function l(a){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function k(a,b){var c=J[a.nodeName];A(c,"parser: no attributes for "+a.nodeName);for(var d=b||{},e=0;e<c.length;e++){var f=c[e],g=f.k,h=f.fn,k=f.n,f=f.def;a.hasAttribute(g)?
d[k||g]=h(a.getAttribute(g)):null!=f&&(d[k||g]=f)}return d}function d(a){return a}function g(a){return"true"==a}function b(a){return"true"==a?!0:"false"==a?!1:parseInt(a)}function c(a){return new Date(Date.parse(a))}function f(a){if(!a)return 0;var b=E.exec(a);A(b,"parser: "+a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(b[2]||0)+2592E3*parseFloat(b[4]||0)+86400*parseFloat(b[6]||0)+3600*parseFloat(b[8]||0)+60*parseFloat(b[10]||0)+parseFloat(b[12]||0)}function m(a){var b=L.exec(a);
if(!b)return-1;a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function u(a){return a}function n(a){return(a=H.exec(a))?[+a[1],+a[2]]:null}function q(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function x(a){var b=q(a,function(a,b,c){if("Initialization"==b){var d=b=void 0;c.hasAttribute("range")&&(b=n(c.getAttribute("range")));c.hasAttribute("sourceURL")&&(d=c.getAttribute("sourceURL"));a.initialization={range:b,media:d}}return a},k(a));"SegmentBase"==
a.nodeName&&(b.indexType="base",b.timeline=[]);return b}function v(a){return q(a,function(a,b,c){"SegmentTimeline"==b&&(a.indexType="timeline",a.timeline=p(c));return a},x(a))}function p(a){return q(a,function(a,b,c){b=a.length;c=k(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}function r(a){a=v(a);a.indexType||(a.indexType="template");return a}function y(a){var b=v(a);b.list=[];b.indexType="list";return q(a,function(a,b,c){"SegmentURL"==b&&a.list.push(k(c));
return a},b)}function w(a){var b=q(a,function(a,b,c){switch(b){case "BaseURL":a.baseURL=c.textContent;break;case "SegmentBase":a.index=x(c);break;case "SegmentList":a.index=y(c);break;case "SegmentTemplate":a.index=r(c)}return a},{});return k(a,b)}function z(a,b){var c=q(a,function(a,c,d){switch(c){case "ContentProtection":c=b(k(d),d);a.contentProtection=c;break;case "ContentComponent":a.contentComponent=k(d);break;case "BaseURL":a.baseURL=d.textContent;break;case "SegmentBase":a.index=x(d);break;
case "SegmentList":a.index=y(d);break;case "SegmentTemplate":a.index=r(d);break;case "Representation":c=w(d),null==c.id&&(c.id=a.representations.length),a.representations.push(c)}return a},{representations:[]});return k(a,c)}function D(a,b){var c=k(a,q(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":c=z(d,b),null==c.id&&(c.id=a.adaptations.length),a.adaptations.push(c)}return a},{adaptations:[]}));c.baseURL&&c.adaptations.forEach(function(a){return G(a,
{baseURL:c.baseURL})});return c}function C(a,b){var c=a.documentElement;A.equal(c.nodeName,"MPD","parser: document root should be MPD");var d=q(c,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);break;case "Period":a.periods.push(D(d,b))}return a},{transportType:"dash",periods:[],locations:[]}),d=k(c,d);if(/dynamic/.test(d.type)){var c=(c=O(d.periods[0].adaptations,function(a){return"video/mp4"==a.mimeType}))&&c.index,e=void 0,
e=c.timeline?l(c):Date.now()/1E3-60;d.availabilityStartTime=d.availabilityStartTime.getTime()/1E3;d.presentationLiveGap=Date.now()/1E3-(e+d.availabilityStartTime)}return d}function t(a,b){return C((new DOMParser).parseFromString(a,"application/xml"),b)}function B(a,b){return"string"==typeof a?t(a,b):C(a,b)}var A=a(3),O=a(22),G=a(23),E=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,H=/([0-9]+)-([0-9]+)/,L=/([0-9]+)(\/([0-9]+))?/;h=[{k:"profiles",fn:d},{k:"width",fn:parseInt},
{k:"height",fn:parseInt},{k:"frameRate",fn:m},{k:"audioSamplingRate",fn:d},{k:"mimeType",fn:d},{k:"segmentProfiles",fn:d},{k:"codecs",fn:d},{k:"maximumSAPPeriod",fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:g}];a=[{k:"timescale",fn:parseInt},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:n},{k:"indexRangeExact",fn:g},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:g}];var F=a.concat([{k:"duration",fn:parseInt},{k:"startNumber",
fn:parseInt}]),J={ContentProtection:[{k:"schemeIdUri",fn:d},{k:"value",fn:d}],SegmentURL:[{k:"media",fn:d},{k:"mediaRange",fn:n},{k:"index",fn:d},{k:"indexRange",fn:n}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:a,SegmentTemplate:F.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:d},{k:"media",fn:d},{k:"bitstreamSwitching",fn:d}]),SegmentList:F,ContentComponent:[{k:"id",fn:d},{k:"lang",fn:d},{k:"contentType",
fn:d},{k:"par",fn:u}],Representation:h.concat([{k:"id",fn:d},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:h.concat([{k:"id",fn:d},{k:"group",fn:parseInt},{k:"lang",fn:d},{k:"contentType",fn:d},{k:"par",fn:u},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:m},{k:"maxFrameRate",fn:m},
{k:"segmentAlignment",fn:b},{k:"subsegmentAlignment",fn:b},{k:"bitstreamSwitching",fn:g}]),Period:[{k:"id",fn:d},{k:"start",fn:f},{k:"duration",fn:f},{k:"bitstreamSwitching",fn:g}],MPD:[{k:"id",fn:d},{k:"profiles",fn:d},{k:"type",fn:d,def:"static"},{k:"availabilityStartTime",fn:c},{k:"availabilityEndTime",fn:c},{k:"publishTime",fn:c},{k:"mediaPresentationDuration",fn:f,n:"duration"},{k:"minimumUpdatePeriod",fn:f},{k:"minBufferTime",fn:f},{k:"timeShiftBufferDepth",fn:f},{k:"suggestedPresentationDelay",
fn:f},{k:"maxSegmentDuration",fn:f},{k:"maxSubsegmentDuration",fn:f}]};B.parseFromString=t;B.parseFromDocument=C;e.exports=B},function(e,h,a){var l=a(1).Observable;e.exports={directFile:!0,manifest:{parser:function(a){a=a.url;return l.of({manifest:{transportType:"directfile",locations:[a],periods:[],isLive:!1,duration:Infinity,adaptations:null},url:a})}}}},function(e,h,a){e.exports={smooth:a(207),dash:a(202),directfile:a(205)}},function(e,h,a){function l(a){return(a=a.match(C))&&a[1]||""}function k(a,
b){return b?a.replace(C,"?token="+b):a.replace(C,"")}function d(a){return a.getResolvedURL().replace(/\{bitrate\}/g,a.getRepresentation().bitrate).replace(/\{start time\}/g,a.getTime())}var g=a(1).Observable,b=a(6).EmptyObservable.create,c=a(51),f=a(21).bytesToStr,m=a(4),u=a(209);h=a(208);var n=h.patchSegment,q=h.createVideoInitSegment,x=h.createAudioInitSegment,v=h.getMdat,p=h.getTraf,r=h.parseTfrf,y=h.parseTfxd;h=a(210).parseSami;a=a(211).parseTTML;var w={"application/x-sami":h,"application/smil":h,
"application/ttml+xml":a,"application/ttml+xml+mp4":a,"text/vtt":function(a){return a}},z=/\.(isml?)(\?token=\S+)?$/,D=/\.wsx?(\?token=\S+)?/,C=/\?token=(\S+)/,t=function(a){a.withMetadata=!0;return c(a)};e.exports=function(){function a(b,c){var d=void 0,e=void 0;if(c.getAdaptation().isLive){var f=p(b);f?(d=r(f),e=y(f)):m.warn("smooth: could not find traf atom")}else d=null;e||(e={d:c.getDuration(),ts:c.getTime()});return{nextSegments:d,currentSegment:e}}var c=u(0>=arguments.length||void 0===arguments[0]?
{}:arguments[0]),e={loader:function(a){a=a.segment;if(a.isInitSegment()){var b=a.getAdaptation();a=a.getRepresentation();var c=void 0,e=b.smoothProtection||{};switch(b.type){case "video":c=q(a.index.timescale,a.width,a.height,72,72,4,a.codecPrivateData,e.keyId,e.keySystems);break;case "audio":c=x(a.index.timescale,a.channels,a.bitsPerSample,a.packetSize,a.samplingRate,a.codecPrivateData,e.keyId,e.keySystems)}return g.of({blob:c,size:c.length,duration:100})}b=void 0;if(c=a.getRange())b=c[0],b=(c=c[1])&&
Infinity!==c?"bytes="+ +b+"-"+ +c:"bytes="+ +b+"-",b={Range:b};a=d(a);return t({url:a,format:"arraybuffer",headers:b})},parser:function(b){var c=b.segment;b=b.response;if(c.isInitSegment())return g.of({blob:b.blob,timings:null});b=new Uint8Array(b.blob);var d=a(b,c),c=d.nextSegments,d=d.currentSegment;return g.of({blob:n(b,d.ts),nextSegments:c,currentSegment:d})}};return{directFile:!1,manifest:{resolver:function(a){a=a.url;var b=void 0,c=l(a),b=D.test(a)?t({url:k(a,""),format:"document"}).map(function(a){return a.blob.getElementsByTagName("media")[0].getAttribute("src")}):
g.of(a);return b.map(function(a){var b=a.match(z);a=b?a.replace(b[1],b[1]+"/manifest"):a;return{url:k(a,c)}})},loader:function(a){return t({url:a.url,format:"document"})},parser:function(a){a=a.response;return g.of({manifest:c(a.blob),url:a.url})}},audio:e,video:e,text:{loader:function(a){var c=a.segment;if(c.isInitSegment())return b();a=c.getRepresentation().mimeType;c=d(c);return 0<=a.indexOf("mp4")?t({url:c,format:"arraybuffer"}):t({url:c,format:"text"})},parser:function(b){var c=b.response;b=
b.segment;var d=b.getAdaptation().lang,e=b.getRepresentation(),h=e.mimeType,e=e.index,k=w[h];if(!k)throw Error("smooth: could not find a text-track parser for the type "+h);var l=c.blob,c=void 0;0<=h.indexOf("mp4")?(l=new Uint8Array(l),c=f(v(l))):c=l;l=a(l,b);h=l.nextSegments;l=l.currentSegment;return g.of({blob:k(c,d,b.getTime()/e.timescale),currentSegment:l,nextSegments:h})}}}}},function(e,h,a){function l(a,b){var c=y(b.length+8),d;C[a]?d=C[a]:(d=n(a),C[a]=d);return u(c,d,b)}function k(a,b,c,d,
e){for(var f=a.length,g=0,h=void 0;g<f;){h=r(a,g);if(1970628964===r(a,g+4)&&r(a,g+8)===b&&r(a,g+12)===c&&r(a,g+16)===d&&r(a,g+20)===e)return a.subarray(g+24,g+h);g+=h}}function d(a,b){for(var c=a.length,d=0,e=void 0,g=void 0;d+8<c&&(g=r(a,d),e=r(a,d+4),f(0<g,"dash: out of range size"),e!==b);)d+=g;return d<c?a.subarray(d+8,d+g):null}function g(a,b,c,d){var e=[a,b,c];d.forEach(function(a){a=t.pssh(a.systemId,a.privateData,a.keyIds);e.push(a)});return e}function b(a,b,c,d){var e=a.length,f=b.length;
c=c.length;a=a.subarray(c,e);e=new Uint8Array(f+(e-c));e.set(b,0);e.set(a,f);e.set(y(b.length+8),d+16);return e}function c(a,b,c,d,e,f,h){c=t.mult("stbl",[c,l("stts",new Uint8Array(8)),l("stsc",new Uint8Array(8)),l("stsz",new Uint8Array(12)),l("stco",new Uint8Array(8))]);var k=l("url ",new Uint8Array([0,0,0,1])),k=t.dref(k),k=t.mult("dinf",[k]);d=t.mult("minf",[d,k,c]);b=t.hdlr(b);c=t.mdhd(a);b=t.mult("mdia",[c,b,d]);e=t.tkhd(e,f,1);e=t.mult("trak",[e,b]);f=t.trex(1);f=t.mult("mvex",[f]);a=t.mvhd(a,
1);h=t.mult("moov",g(a,f,e,h));a=t.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return u(a,h)}var f=a(3),m=a(14).isIE;h=a(21);var u=h.concat,n=h.strToBytes,q=h.hexToBytes,x=h.bytesToHex,v=h.be2toi,p=h.itobe2,r=h.be4toi,y=h.itobe4,w=h.be8toi,z=h.itobe8,D=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],C={},t={mult:function(a,b){return l(a,u.apply(null,b))},avc1encv:function(a,b,c,d,e,f,g,h,k,m){return l(a,u(6,p(b),16,p(c),p(d),p(e),2,p(f),6,[0,1,g.length],n(g),31-g.length,
p(h),[255,255],k,"encv"===a?m:[]))},avcc:function(a,b,c){return l("avcC",u([1,a[1],a[2],a[3],252|(2===c?1:4===c?3:0),225],p(a.length),a,[1],p(b.length),b))},dref:function(a){return l("dref",u(7,[1],a))},esds:function(a,b){return l("esds",u(4,[3,25],p(a),[0,4,17,64,21],11,[5,2],q(b),[6,1,2]))},frma:function(a){return l("frma",n(a))},free:function(a){return l("free",new Uint8Array(a-8))},ftyp:function(a,b){return l("ftyp",u.apply(null,[n(a),[0,0,0,1]].concat(b.map(n))))},hdlr:function(a){return l("hdlr",
u(8,n("audio"===a?"soun":"vide"),12,n("Media Handler")))},mdhd:function(a){return l("mdhd",u(12,y(a),8))},moof:function(a,b){return t.mult("moof",[a,b])},mp4aenca:function(a,b,c,d,e,f,g,h){return l(a,u(6,p(b),8,p(c),p(d),2,p(e),p(f),2,g,"enca"===a?h:[]))},mvhd:function(a,b){return l("mvhd",u(12,y(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,p(b+1)))},pssh:function(a){var b=1>=arguments.length||void 0===arguments[1]?[]:arguments[1],c=2>=arguments.length||void 0===arguments[2]?[]:arguments[2];
a=a.replace(/-/g,"");f(32===a.length,"wrong system id length");var d=void 0,e=void 0,e=c.length;0<e?(d=1,e=u.apply(null,[y(e)].concat(c))):(d=0,e=[]);return l("pssh",u([d,0,0,0],q(a),e,y(b.length),b))},saio:function(a,b,c,d){return l("saio",u(4,[0,0,0,1],y(a.length+b.length+c.length+d.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return l("saiz",new Uint8Array);var b=r(a,0),c=r(a,4),d=new Uint8Array(9+c);d.set(y(c),5);for(var c=9,e=8,f=void 0,g=void 0;e<a.length;)e+=8,2===(b&2)?(g=2,f=v(a,e),
e+=2+6*f):g=f=0,d[c]=6*f+8+g,c++;return l("saiz",d)},schm:function(a,b){return l("schm",u(4,n(a),y(b)))},senc:function(a){return l("senc",a)},smhd:function(){return l("smhd",new Uint8Array(8))},stsd:function(a){return l("stsd",u.apply(null,[7,[a.length]].concat(a)))},tkhd:function(a,b,c){return l("tkhd",u(y(7),8,y(c),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],p(a),2,p(b),2))},trex:function(a){return l("trex",u(4,y(a),[0,0,0,1],12))},tfdt:function(a){return l("tfdt",u([1,0,0,0],z(a)))},tenc:function(a,
b,c){return l("tenc",u(6,[a,b],q(c)))},traf:function(a,b,c,d,e){var f=[a,b,c];d&&f.push(t.senc(d),t.saiz(d),t.saio(e,a,b,c));return t.mult("traf",f)},vmhd:function(){var a=new Uint8Array(12);a[3]=1;return l("vmhd",a)}},B={traf:function(a){return(a=d(a,1836019558))?d(a,1953653094):null},senc:function(a){return k(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return k(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return k(a,3565190898,3392751253,2387879627,2655430559)},
mdat:function(a){return d(a,1835295092)}};e.exports={getMdat:B.mdat,getTraf:B.traf,parseTfrf:function(a){a=B.tfrf(a);if(!a)return[];for(var b=[],c=a[0],d=a[4],e=0;e<d;e++){var f=void 0,g=void 0;1==c?(g=w(a,16*e+5),f=w(a,16*e+13)):(g=r(a,8*e+5),f=r(a,8*e+9));b.push({ts:g,d:f})}return b},parseTfxd:function(a){if(a=B.tfxd(a))return{d:w(a,12),ts:w(a,4)}},createVideoInitSegment:function(a,b,d,e,f,g,h,k,l){l||(l=[]);var m=h.split("00000001");h=m[2];m=q(m[1]);h=q(h);g=t.avcc(m,h,g);h=void 0;l.length?(k=
t.tenc(1,8,k),k=t.mult("schi",[k]),h=t.schm("cenc",65536),m=t.frma("avc1"),k=t.mult("sinf",[m,h,k]),e=t.avc1encv("encv",1,b,d,e,f,"AVC Coding",24,g,k)):e=t.avc1encv("avc1",1,b,d,e,f,"AVC Coding",24,g);h=t.stsd([e]);return c(a,"video",h,t.vmhd(),b,d,l)},createAudioInitSegment:function(a,b,d,e,f,g,h,k){k||(k=[]);if(!g){g=D.indexOf(f);var l=void 0,l=((32|g&31)<<4|b&31)<<3;g=x(p(l))}g=t.esds(1,g);l=void 0;if(k.length){h=t.tenc(1,8,h);h=t.mult("schi",[h]);var l=t.schm("cenc",65536),m=t.frma("mp4a");h=
t.mult("sinf",[m,l,h]);b=t.mp4aenca("enca",1,b,d,e,f,g,h)}else b=t.mp4aenca("mp4a",1,b,d,e,f,g);l=t.stsd([b]);return c(a,"audio",l,t.smhd(),0,0,k)},patchSegment:function(a,c){var d=a.subarray(0,r(a,0)),e=t.tfdt(c),f=e.length,g=r(d,8),h=r(d,8+g),k=r(d,8+g+8),l=r(d,8+g+8+k),n=d.subarray(8,8+g),q=d.subarray(8+g+8,8+g+8+h-8),h=q.subarray(0,k),l=q.subarray(k,k+l);h.set([0,0,0,1],12);q=B.senc(q);e=t.traf(h,e,l,q,n);n=t.moof(n,e);f=8+g+8+k+f;return m?b(a,n,d,f):8<=d.length-n.length?(d=d.length-n.length,
a.set(n,0),a.set(t.free(d),n.length),a.set(y(n.length+8+d),f+16),a):b(a,n,d,f)}}},function(e,h,a){function l(a){return"boolean"==typeof a?a:"string"==typeof a?"TRUE"===a.toUpperCase():!1}function k(a){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function d(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:c.concat([8,1,18,16],a)}]}var g=a(3),b=a(22),c=a(21),f={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},m={audio:"mp4a.40.2",video:"avc1.4D401E"};
h={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var u={audio:[["Bitrate","bitrate",parseInt],["AudioTag","audiotag",parseInt],["FourCC","mimeType",h],["Channels","channels",parseInt],["SamplingRate","samplingRate",parseInt],["BitsPerSample","bitsPerSample",parseInt],["PacketSize","packetSize",parseInt],["CodecPrivateData","codecPrivateData",String]],video:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",h],["CodecPrivateData","codecs",function(a){return(a=
(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1])?"avc1."+a:""}],["MaxWidth","width",parseInt],["MaxHeight","height",parseInt],["CodecPrivateData","codecPrivateData",String]],text:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",h]]};e.exports=function(){function a(b,c,d){for(b=b.firstElementChild;b;)d=c(d,b.nodeName,b),b=b.nextElementSibling;return d}function e(b,c){b.hasAttribute("Timescale")&&(c=+b.getAttribute("Timescale"));var d=b.getAttribute("Type"),h=b.getAttribute("Subtype"),k=u[d];g(k,
"parser: unrecognized QualityLevel type "+d);var l=0,q=a(b,function(a,b,c){switch(b){case "QualityLevel":b={};for(var e=0;e<k.length;e++){var f=k[e],g=f[0],h=f[2];b[f[1]]="function"==typeof h?h(c.getAttribute(g)):h[c.getAttribute(g)]}"audio"==d&&(c=c.getAttribute("FourCC")||"",e=b.codecPrivateData,f=void 0,f="AACH"==c?5:e?(parseInt(e.substr(0,2),16)&248)>>3:2,b.codecs=f?"mp4a.40."+f:"");if("video"!=d||b.bitrate>z)b.id=l++,a.representations.push(b);break;case "c":b=a.index;var e=a.index.timeline,f=
e.length,g=0<f?e[f-1]:{d:0,ts:0,r:0},h=+c.getAttribute("d"),m=c.getAttribute("t");(c=+c.getAttribute("r"))&&c--;0<f&&!g.d&&(g.d=m-g.ts,e[f-1]=g);0<f&&h==g.d&&null==m?g.r+=(c||0)+1:e.push({d:h,ts:null==m?g.ts+g.d*(g.r+1):+m,r:c});b.timeline=e}return a},{representations:[],index:{timeline:[],indexType:"timeline",timescale:c,initialization:{}}}),p=q.representations,q=q.index;g(p.length,"parser: adaptation should have at least one representation");p.forEach(function(a){return a.codecs=a.codecs||m[d]});
p.forEach(function(a){return a.mimeType=a.mimeType||f[d]});return"ADVT"==h?null:{type:d,index:q,representations:p,name:b.getAttribute("Name"),lang:b.getAttribute("Language"),baseURL:b.getAttribute("Url")}}function h(a){return v((new DOMParser).parseFromString(a,"application/xml"))}function v(d){d=d.documentElement;g.equal(d.nodeName,"SmoothStreamingMedia","parser: document root should be SmoothStreamingMedia");g(/^[2]-[0-2]$/.test(d.getAttribute("MajorVersion")+"-"+d.getAttribute("MinorVersion")),
"Version should be 2.0, 2.1 or 2.2");var f=+d.getAttribute("Timescale")||1E7,h=0,m=a(d,function(a,b,d){switch(b){case "Protection":d=d.firstElementChild;g.equal(d.nodeName,"ProtectionHeader","parser: Protection should have ProtectionHeader child");b=c.strToBytes(atob(d.textContent));var k;k=c.le2toi(b,8);k=c.bytesToUTF16Str(b.subarray(10,10+k));k=(new DOMParser).parseFromString(k,"application/xml").querySelector("KID").textContent;k=c.guidToUuid(atob(k)).toLowerCase();var l=c.hexToBytes(k);d=d.getAttribute("SystemID").toLowerCase().replace(/\{|\}/g,
"");b={keyId:k,keySystems:[{systemId:d,privateData:b}].concat(D(l))};a.protection=b;break;case "StreamIndex":if(b=e(d,f))b.id=h++,a.adaptations.push(b)}return a},{protection:null,adaptations:[]}),p=m.protection,m=m.adaptations;m.forEach(function(a){return a.smoothProtection=p});var r=void 0,x=void 0,u=void 0,v=void 0,z=l(d.getAttribute("IsLive"));if(z)var r=y,u=+d.getAttribute("DVRWindowLength")/f,v=w,x=b(m,function(a){return"video"==a.type}),J=b(m,function(a){return"audio"==a.type}),x=Math.min(k(x.index),
k(J.index)),x=Date.now()/1E3-(x+v);return{transportType:"smoothstreaming",profiles:"",type:z?"dynamic":"static",suggestedPresentationDelay:r,timeShiftBufferDepth:u,presentationLiveGap:x,availabilityStartTime:v,periods:[{duration:(+d.getAttribute("Duration")||Infinity)/f,adaptations:m,laFragCount:+d.getAttribute("LookAheadFragmentCount")}]}}function p(a){return"string"==typeof a?h(a):v(a)}var r=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],y=r.suggestedPresentationDelay||20,w=r.referenceDateTime||
Date.UTC(1970,0,1,0,0,0,0)/1E3,z=r.minRepresentationBitrate||19E4,D=r.keySystems||d;p.parseFromString=h;p.parseFromDocument=v;return p}},function(e,h,a){function l(a){return a.replace(g,"\n").replace(d,function(a,b){return String.fromCharCode(b)})}var k=a(3),d=/&#([0-9]+);/g,g=/<br>/gi,b=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,c=/\s*<p class=([^>]+)>(.*)/i,f=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;e.exports={parseSami:function(a,d){for(var e=/<sync[ >]/ig,g=/<sync[ >]|<\/body>/ig,h=[],v=a.match(b)[1],
p=void 0,r=g.exec(a),p=/\.(\S+)\s*{([^}]*)}/gi,r={},y=void 0;y=p.exec(v);){var w=y[1],y=y[2].match(/\s*lang:\s*(\S+);/i)[1];w&&y&&(r[y]=w)}v=r[d];for(k(v,"sami: could not find lang "+d+" in CSS");;){p=e.exec(a);r=g.exec(a);if(!p&&!r)break;if(!p||!r||p.index>=r.index)throw Error("parse error");r=a.slice(p.index,r.index);p=r.match(f);if(!p)throw Error("parse error: sync time attribute");w=+p[1];if(isNaN(w))throw Error("parse error: sync time attribute NaN");for(var p=h,r=r.split("\n"),w=w/1E3,y=r.length,
z=void 0;0<=--y;)if(z=r[y].match(c)){var D=z[2];v===z[1]&&("&nbsp;"===D?p[p.length-1].end=w:p.push({text:l(D),start:w}))}}return h}}},function(e,h){function a(b,e){var f=0;b=b.firstChild;for(var g=[],h=void 0;b;){if(1===b.nodeType)switch(b.tagName.toUpperCase()){case "P":var h=b,v=e,p=l(h.getAttribute("begin"),v),r=l(h.getAttribute("end"),v),y=l(h.getAttribute("dur"),0);if("number"==!("undefined"===typeof p||k(p))&&"number"==!("undefined"===typeof r||k(r))&&"number"==!("undefined"===typeof y||k(y)))throw Error("ttml: unsupported timestamp format");
0<y?(null==p&&(p=f||v),null==r&&(r=p+y)):null==r&&(r=l(h.getAttribute("duration"),0),r=0<=r?r+p:Number.MAX_VALUE);h={id:h.getAttribute("xml:id")||h.getAttribute("id"),text:decodeURIComponent(c(h.innerHTML.replace(d,"\n"))),start:p,end:r};f=h.end;g.push(h);break;case "DIV":h=l(b.getAttribute("begin"),0),null==h&&(h=e),g.push.apply(g,a(b,h))}b=b.nextSibling}return g}function l(a,c){if(!a)return null;var d=void 0;if(d=a.match(g)){var e=d[3],h=d[4],k=d[6];return 3600*parseInt(d[2]||0,10)+60*parseInt(e,
10)+parseInt(h,10)+parseFloat("0."+k)}return(d=a.match(b))?(e=d[4],parseFloat(d[1])*f[e]+c):null}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},d=/<br[^>]+>/gm,g=/^(([0-9]+):)?([0-9]+):([0-9]+)(\.([0-9]+))?$/,b=/(([0-9]+)(\.[0-9]+)?)(ms|h|m|s)/,c=window.escape,f={h:3600,m:60,s:1,ms:.001};e.exports={parseTTML:function(b,c,d){c=void 0;c="string"==typeof b?(new DOMParser).parseFromString(b,
"text/xml"):b;if(!(c instanceof window.Document||c instanceof window.HTMLElement))throw Error("ttml: needs a Document to parse");b=c.querySelector("tt");if(!b)throw Error("ttml: could not find <tt> tag");b=a(b.querySelector("body"),0);for(c=0;c<b.length;c++){var e=b[c];e.start+=d;e.end+=d}return b}}},function(e,h){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.hash={}}a.prototype.add=function(a){this.hash[a]=!0};a.prototype.remove=
function(a){delete this.hash[a]};a.prototype.test=function(a){return!0===this.hash[a]};return a}();e.exports={SimpleSet:a}},function(e,h,a){function l(a){return null==a?"":String(a).replace(u,function(a){return n[a]})}function k(a){var b=a.getAverageBitrates(),d=void 0,e=void 0;b.video.take(1).subscribe(function(a){return e=a|0});b.audio.take(1).subscribe(function(a){return d=a|0});return{manifest:a.man,version:a.version,timeFragment:a.frag,currentTime:a.getCurrentTime(),state:a.getPlayerState(),
buffer:c(a.video.buffered),volume:a.getVolume(),video:{adaptation:a.adas.video,representation:a.reps.video,maxBitrate:a.getVideoMaxBitrate(),bufferSize:a.getVideoBufferSize(),avrBitrate:e},audio:{adaptation:a.adas.audio,representation:a.reps.audio,maxBitrate:a.getAudioMaxBitrate(),bufferSize:a.getAudioBufferSize(),avrBitrate:d}}}function d(a,b){var c=b.parentNode.querySelector("#cp--debug-infos-content");if(c){var d=void 0;try{d=k(a)}catch(e){return}var f=d,g=f.video,h=f.audio,f=f.manifest,d="<b>Player v"+
d.version+"</b> ("+d.state+")<br>";f&&g&&h&&(d+=["Container: "+l(f.transportType),"Live: "+l(""+f.isLive),"Downloading bitrate (Kbit/s):\n          "+(g.representation.bitrate/1E3).toFixed(3)+"/"+(h.representation.bitrate/1E3).toFixed(3),"Estimated bandwidth (Kbit/s):\n          "+(g.avrBitrate/1E3).toFixed(3)+"/"+(h.avrBitrate/1E3).toFixed(3),"Location: "+f.locations[0]].join("<br>"));c.innerHTML=d}}function g(a,c){var e="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+l(c.offsetTop+
10)+"px;\n  left: "+l(c.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',g=c.parentNode,h=g.querySelector("#cp--debug-infos-container");h||(h=document.createElement("div"),
h.setAttribute("id","cp--debug-infos-container"),g.appendChild(h));h.innerHTML=e;m||(m=g.querySelector("#cp--debug-hide-infos"),m.addEventListener("click",function(){return b(c)}));f&&clearInterval(f);f=setInterval(function(){return d(a,c)},1E3);d(a,c)}function b(a){(a=a.parentNode.querySelector("#cp--debug-infos-container"))&&a.parentNode.removeChild(a);f&&(clearInterval(f),f=null);m&&(m.removeEventListener("click",b),m=null)}var c=a(31).bufferedToArray,f=void 0,m=void 0,u=/[&<>"']/g,n={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};e.exports={getDebug:k,showDebug:g,hideDebug:b,toggleDebug:function(a,c){c.parentNode.querySelector("#cp--debug-infos-container")?b(c):g(a,c)}}},function(e,h){var a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=0;this.limit=e;this._keymap={};this.tail=this.head=null}a.prototype.set=function(a,d){var e={key:a,value:d,newer:null,older:null};this._keymap[a]=e;this.tail?(this.tail.newer=
e,e.older=this.tail):this.head=e;this.tail=e;if(this.size===this.limit)return this.shift();this.size++;return null};a.prototype.shift=function(){var a=this.head;a&&(this.head.newer?(this.head=this.head.newer,this.head.older=null):this.head=null,a.newer=a.older=null,delete this._keymap[a.key]);return a};a.prototype.get=function(a){a=this._keymap[a];if(null!=a){if(a===this.tail)return a.value;a.newer&&(a===this.head&&(this.head=a.newer),a.newer.older=a.older);a.older&&(a.older.newer=a.newer);a.newer=
null;if(a.older=this.tail)this.tail.newer=a;this.tail=a;return a.value}};return a}();e.exports=a},function(e,h,a){var l=a(49).getBackedoffDelay,k=a(41).TimerObservable.create,d=a(50);e.exports={retryWithBackoff:function(a,b){var c=b.retryDelay,e=b.totalRetry,h=b.shouldRetry,u=b.resetDelay,n=0,q=void 0;0<u&&(q=d(function(){return n=0},u));return a["catch"](function(a,b){if(h&&!h(a,n)||n++>=e)throw a;var d=l(c,n);return k(d).flatMap(function(){q&&q();return b})})}}}])});
