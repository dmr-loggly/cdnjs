(function(h,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?exports.RxPlayer=f():h.RxPlayer=f()})(this,function(){return function(h){function f(l){if(a[l])return a[l].exports;var k=a[l]={exports:{},id:l,loaded:!1};h[l].call(k.exports,k,k.exports,f);k.loaded=!0;return k.exports}var a={};f.m=h;f.c=a;f.p="";return f(0)}([function(h,f,a){"function"!=typeof Object.assign&&function(){Object.assign=function(a){if(void 0===
a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(a),g=1;g<arguments.length;g++){var e=arguments[g];if(void 0!==e&&null!==e)for(var b in e)e.hasOwnProperty(b)&&(k[b]=e[b])}return k}}();a(62);a(63);a(64);a(65);a(66);a(67);a(68);a(69);a(70);a(71);a(72);a(73);a(74);a(75);a(76);a(77);a(78);a(79);a(80);a(81);a(82);a(83);a(84);a(85);a(86);h.exports=a(140)},function(h,f,a){var l=a(6),k=a(128),g=a(30);h=function(){function a(b){this._isScalar=!1;b&&(this._subscribe=
b)}a.prototype.lift=function(b){var d=new a;d.source=this;d.operator=b;return d};a.prototype.subscribe=function(b,a,c){var d=this.operator;b=k.toSubscriber(b,a,c);d?d.call(b,this):b.add(this._subscribe(b));if(b.syncErrorThrowable&&(b.syncErrorThrowable=!1,b.syncErrorThrown))throw b.syncErrorValue;return b};a.prototype.forEach=function(b,a){var c=this;a||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?a=l.root.Rx.config.Promise:l.root.Promise&&(a=l.root.Promise));if(!a)throw Error("no Promise impl found");
return new a(function(a,d){var e=c.subscribe(function(c){if(e)try{b(c)}catch(p){d(p),e.unsubscribe()}else b(c)},d,a)})};a.prototype._subscribe=function(b){return this.source.subscribe(b)};a.prototype[g.$$observable]=function(){return this};a.create=function(b){return new a(b)};return a}();f.Observable=h},function(h,f,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?
"symbol":typeof b},k=function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)},g=a(32);h=a(4);var e=a(38),b=a(31);a=function(c){function a(b,m,g){c.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=e.empty;break;case 1:if(!b){this.destination=e.empty;break}if("object"===("undefined"===typeof b?"undefined":
l(b))){b instanceof a?(this.destination=b,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new d(this,b));break}default:this.syncErrorThrowable=!0,this.destination=new d(this,b,m,g)}}k(a,c);a.prototype[b.$$rxSubscriber]=function(){return this};a.create=function(b,c,d){b=new a(b,c,d);b.syncErrorThrowable=!1;return b};a.prototype.next=function(b){this.isStopped||this._next(b)};a.prototype.error=function(b){this.isStopped||(this.isStopped=!0,this._error(b))};a.prototype.complete=
function(){this.isStopped||(this.isStopped=!0,this._complete())};a.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,c.prototype.unsubscribe.call(this))};a.prototype._next=function(b){this.destination.next(b)};a.prototype._error=function(b){this.destination.error(b);this.unsubscribe()};a.prototype._complete=function(){this.destination.complete();this.unsubscribe()};return a}(h.Subscription);f.Subscriber=a;var d=function(b){function c(c,a,d,e){b.call(this);this._parent=c;c=this;if(g.isFunction(a))var m=
a;else a&&(c=a,m=a.next,d=a.error,e=a.complete,g.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this));this._context=c;this._next=m;this._error=d;this._complete=e}k(c,b);c.prototype.next=function(b){if(!this.isStopped&&this._next){var c=this._parent;c.syncErrorThrowable?this.__tryOrSetError(c,this._next,b)&&this.unsubscribe():this.__tryOrUnsub(this._next,b)}};c.prototype.error=function(b){if(!this.isStopped){var c=this._parent;if(this._error)c.syncErrorThrowable?
this.__tryOrSetError(c,this._error,b):this.__tryOrUnsub(this._error,b),this.unsubscribe();else if(c.syncErrorThrowable)c.syncErrorValue=b,c.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),b;}};c.prototype.complete=function(){if(!this.isStopped){var b=this._parent;this._complete&&(b.syncErrorThrowable?this.__tryOrSetError(b,this._complete):this.__tryOrUnsub(this._complete));this.unsubscribe()}};c.prototype.__tryOrUnsub=function(b,c){try{b.call(this._context,c)}catch(u){throw this.unsubscribe(),
u;}};c.prototype.__tryOrSetError=function(b,c,a){try{c.call(this._context,a)}catch(p){return b.syncErrorValue=p,b.syncErrorThrown=!0}return!1};c.prototype._unsubscribe=function(){var b=this._parent;this._parent=this._context=null;b.unsubscribe()};return c}(a)},function(h,f){function a(g){this.name="AssertionError";this.message=g;Error.captureStackTrace&&Error.captureStackTrace(this,a)}function l(g,e){if(!g)throw new a(e);}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};a.prototype=Error();l.equal=function(a,e,b){return l(a===e,b)};l.iface=function(a,e,b){l(a,e+" should be an object");for(var d in b)l.equal(k(a[d]),b[d],e+" should have property "+d+" as a "+b[d])};h.exports=l},function(h,f,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===
Symbol&&b!==Symbol.prototype?"symbol":typeof b},k=a(16),g=a(127),e=a(32),b=a(33),d=a(23),c=a(126);h=function(){function a(b){this.closed=!1;b&&(this._unsubscribe=b)}a.prototype.unsubscribe=function(){var a=!1,m;if(!this.closed){this.closed=!0;var u=this._unsubscribe;var f=this._subscriptions;this._subscriptions=null;if(e.isFunction(u)){var l=b.tryCatch(u).call(this);l===d.errorObject&&(a=!0,(m=m||[]).push(d.errorObject.e))}if(k.isArray(f)){u=-1;for(var h=f.length;++u<h;)l=f[u],g.isObject(l)&&(l=b.tryCatch(l.unsubscribe).call(l),
l===d.errorObject&&(a=!0,m=m||[],l=d.errorObject.e,l instanceof c.UnsubscriptionError?m=m.concat(l.errors):m.push(l)))}if(a)throw new c.UnsubscriptionError(m);}};a.prototype.add=function(b){if(!b||b===a.EMPTY)return a.EMPTY;if(b===this)return this;var c=b;switch("undefined"===typeof b?"undefined":l(b)){case "function":c=new a(b);case "object":c.closed||"function"!==typeof c.unsubscribe||(this.closed?c.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(c));break;default:throw Error("unrecognized teardown "+
b+" added to Subscription.");}return c};a.prototype.remove=function(b){if(null!=b&&b!==this&&b!==a.EMPTY){var c=this._subscriptions;c&&(b=c.indexOf(b),-1!==b&&c.splice(b,1))}};a.EMPTY=function(b){b.closed=!0;return b}(new a);return a}();f.Subscription=h},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(e){a.call(this);this.scheduler=e}l(g,
a);g.create=function(a){return new g(a)};g.dispatch=function(a){a.subscriber.complete()};g.prototype._subscribe=function(a){var b=this.scheduler;if(b)return b.schedule(g.dispatch,0,{subscriber:a});a.complete()};return g}(a(1).Observable);f.EmptyObservable=h},function(h,f){(function(a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};f.root=
"object"==("undefined"===typeof window?"undefined":l(window))&&window.window===window&&window||"object"==("undefined"===typeof self?"undefined":l(self))&&self.self===self&&self||"object"==("undefined"===typeof a?"undefined":l(a))&&a.global===a&&a;if(!f.root)throw Error("RxJS could not find any global context (window, self, global)");}).call(f,function(){return this}())},function(h,f){function a(b){var c=b.reduce(function(b,c){b[c]=c;return b},{});c.keys=b;return c}function l(b,c,a){return b+"("+c+
")"+(a?": "+a.message:"")}function k(b,c,a){this.name="MediaError";this.type=m.MEDIA_ERROR;this.reason=c;this.code=r[b];this.fatal=a;this.message=l(this.name,this.code,this.reason)}function g(b,c,a){this.name="NetworkError";this.type=m.NETWORK_ERROR;this.xhr=c.xhr;this.url=c.url;this.status=c.status;this.reqType=c.type;this.reason=c;this.code=r[b];this.fatal=a;this.message=this.reason?l(this.name,this.code,this.reason):l(this.name,this.code,{message:""+this.reqType+(0<this.status?"("+this.status+
")":"")+" on "+this.url})}function e(b,c,a){this.name="EncryptedMediaError";this.type=m.ENCRYPTED_MEDIA_ERROR;this.reason=c;this.code=r[b];this.fatal=a;this.message=l(this.name,this.code,this.reason)}function b(b,c,a){this.name="IndexError";this.type=m.INDEX_ERROR;this.indexType=c;this.reason=null;this.code=r[b];this.fatal=a;this.message=l(this.name,this.code,null)}function d(b,c,a){this.name="OtherError";this.type=m.OTHER_ERROR;this.reason=c;this.code=r[b];this.fatal=a;this.message=l(this.name,this.code,
this.reason)}function c(b,c,a){this.name="RequestError";this.url=c.url;this.xhr=b;this.status=b.status;this.message=this.type=a}var m=a(["NETWORK_ERROR","MEDIA_ERROR","ENCRYPTED_MEDIA_ERROR","INDEX_ERROR","OTHER_ERROR"]),n=a(["TIMEOUT","ERROR_EVENT","ERROR_HTTP_CODE","PARSE_ERROR"]),r=a("PIPELINE_RESOLVE_ERROR PIPELINE_LOAD_ERROR PIPELINE_PARSING_ERROR MANIFEST_PARSE_ERROR MANIFEST_INCOMPATIBLE_CODECS_ERROR MEDIA_IS_ENCRYPTED_ERROR KEY_ERROR KEY_STATUS_CHANGE_ERROR KEY_UPDATE_ERROR KEY_LOAD_ERROR KEY_LOAD_TIMEOUT KEY_GENERATE_REQUEST_ERROR INCOMPATIBLE_KEYSYSTEMS BUFFER_APPEND_ERROR BUFFER_FULL_ERROR BUFFER_TYPE_UNKNOWN MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_SOURCE_NOT_SUPPORTED MEDIA_KEYS_NOT_SUPPORTED OUT_OF_INDEX_ERROR UNKNOWN_INDEX".split(" "));
k.prototype=Error();g.prototype=Error();g.prototype.isHttpError=function(b){return this.reqType==n.ERROR_HTTP_CODE&&this.status==b};e.prototype=Error();b.prototype=Error();d.prototype=Error();c.prototype=Error();h.exports={ErrorTypes:m,ErrorCodes:r,MediaError:k,NetworkError:g,EncryptedMediaError:e,IndexError:b,OtherError:d,RequestError:c,RequestErrorTypes:n,isKnownError:function(b){return!!b&&!!b.type&&0<=m.keys.indexOf(b.type)}}},function(h,f,a){var l=function(b,c){function a(){this.constructor=
b}for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);b.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)},k=a(1);h=a(2);var g=a(4),e=a(47),b=a(61),d=a(31),c=function(b){function c(c){b.call(this,c);this.destination=c}l(c,b);return c}(h.Subscriber);f.SubjectSubscriber=c;a=function(a){function n(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.closed=!1;this.thrownError=null}l(n,a);n.prototype[d.$$rxSubscriber]=function(){return new c(this)};n.prototype.lift=function(b){var c=
new m(this,this);c.operator=b;return c};n.prototype.next=function(b){if(this.closed)throw new e.ObjectUnsubscribedError;if(!this.isStopped)for(var c=this.observers,a=c.length,c=c.slice(),d=0;d<a;d++)c[d].next(b)};n.prototype.error=function(b){if(this.closed)throw new e.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=b;this.isStopped=!0;for(var c=this.observers,a=c.length,c=c.slice(),d=0;d<a;d++)c[d].error(b);this.observers.length=0};n.prototype.complete=function(){if(this.closed)throw new e.ObjectUnsubscribedError;
this.isStopped=!0;for(var b=this.observers,c=b.length,b=b.slice(),a=0;a<c;a++)b[a].complete();this.observers.length=0};n.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;this.observers=null};n.prototype._subscribe=function(c){if(this.closed)throw new e.ObjectUnsubscribedError;if(this.hasError)return c.error(this.thrownError),g.Subscription.EMPTY;if(this.isStopped)return c.complete(),g.Subscription.EMPTY;this.observers.push(c);return new b.SubjectSubscription(this,c)};n.prototype.asObservable=
function(){var b=new k.Observable;b.source=this;return b};n.create=function(b,c){return new m(b,c)};return n}(k.Observable);f.Subject=a;var m=function(b){function c(c,a){b.call(this);this.destination=c;this.source=a}l(c,b);c.prototype.next=function(b){var c=this.destination;c&&c.next&&c.next(b)};c.prototype.error=function(b){var c=this.destination;c&&c.error&&this.destination.error(b)};c.prototype.complete=function(){var b=this.destination;b&&b.complete&&this.destination.complete()};c.prototype._subscribe=
function(b){return this.source?this.source.subscribe(b):g.Subscription.EMPTY};return c}(a);f.AnonymousSubject=m},function(h,f){function a(){}var l={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},k=function(){};a.error=k;a.warn=k;a.info=k;a.debug=k;a.setLevel=function(g){"string"==typeof g&&(g=l[g]);a.error=g>=l.ERROR?console.error.bind(console):k;a.warn=g>=l.WARNING?console.warn.bind(console):k;a.info=g>=l.INFO?console.info.bind(console):k;a.debug=g>=l.DEBUG?console.log.bind(console):k};h.exports=a},function(h,
f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(){a.apply(this,arguments)}l(g,a);g.prototype.notifyNext=function(a,b,d,c,m){this.destination.next(b)};g.prototype.notifyError=function(a,b){this.destination.error(a)};g.prototype.notifyComplete=function(a){this.destination.complete()};return g}(a(2).Subscriber);f.OuterSubscriber=h},function(h,f,a){var l=
function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)};h=a(1);var k=a(26),g=a(5),e=a(17);a=function(b){function a(c,a){b.call(this);this.array=c;this.scheduler=a;a||1!==c.length||(this._isScalar=!0,this.value=c[0])}l(a,b);a.create=function(b,d){return new a(b,d)};a.of=function(){for(var b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];d=b[b.length-1];e.isScheduler(d)?b.pop():d=null;var n=
b.length;return 1<n?new a(b,d):1===n?new k.ScalarObservable(b[0],d):new g.EmptyObservable(d)};a.dispatch=function(b){var c=b.array,a=b.index,d=b.subscriber;a>=b.count?d.complete():(d.next(c[a]),d.closed||(b.index=a+1,this.schedule(b)))};a.prototype._subscribe=function(b){var c=this.array,d=c.length,e=this.scheduler;if(e)return e.schedule(a.dispatch,0,{array:c,index:0,count:d,subscriber:b});for(e=0;e<d&&!b.closed;e++)b.next(c[e]);b.complete()};return a}(h.Observable);f.ArrayObservable=a},function(h,
f,a){h=a(108);f.merge=h.mergeStatic},function(h,f,a){var l=a(6),k=a(16),g=a(50),e=a(1),b=a(29),d=a(58),c=a(30);f.subscribeToResult=function(a,n,r,f){var m=new d.InnerSubscriber(a,r,f);if(m.closed)return null;if(n instanceof e.Observable)return n._isScalar?(m.next(n.value),m.complete(),null):n.subscribe(m);if(k.isArray(n)){a=0;for(r=n.length;a<r&&!m.closed;a++)m.next(n[a]);m.closed||m.complete()}else{if(g.isPromise(n))return n.then(function(b){m.closed||(m.next(b),m.complete())},function(b){return m.error(b)}).then(null,
function(b){l.root.setTimeout(function(){throw b;})}),m;if("function"===typeof n[b.$$iterator]){n=n[b.$$iterator]();do{a=n.next();if(a.done){m.complete();break}m.next(a.value);if(m.closed)break}while(1)}else if("function"===typeof n[c.$$observable])if(n=n[c.$$observable](),"function"!==typeof n.subscribe)m.error(Error("invalid observable"));else return n.subscribe(new d.InnerSubscriber(a,r,f));else m.error(new TypeError("unknown type returned"))}return null}},function(h,f,a){function l(b,c){return b.reduce(function(b,
a){return b.concat((c||E).map(function(b){return b+a}))},[])}function k(b,c){return c.filter(function(c){var a=document.createElement(b.tagName);c="on"+c;c in a?a=!0:(a.setAttribute(c,"return;"),a="function"==typeof a[c]);return a})[0]}function g(b,c){var a=void 0;b=l(b,c);return function(c){return c instanceof A?("undefined"==typeof a&&(a=k(c,b)||null),a?t(c,a):q()):z(c,b)}}function e(b,c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b.errorCode&&(b={systemCode:b.systemCode,
code:b.errorCode.code});this.name="KeySessionError";this.mediaKeyError=b;this.message="MediaKeyError code:"+b.code+" and systemCode:"+b.systemCode}a.prototype=Error();return function(d,e){var m="function"==typeof c?c.call(this):this,g=M(m),n=Q(m).map(function(b){throw new a(m.error||b);});try{return b.call(this,d,e),w(g,n).take(1)}catch(aa){return p["throw"](aa)}}}function b(b,c){if(c instanceof D)return c._setVideo(b);if(b.setMediaKeys)return b.setMediaKeys(c);if(null!==c){if(b.WebkitSetMediaKeys)return b.WebkitSetMediaKeys(c);
if(b.mozSetMediaKeys)return b.mozSetMediaKeys(c);if(b.msSetMediaKeys)return b.msSetMediaKeys(c)}}function d(){return!!(y.fullscreenElement||y.mozFullScreenElement||y.webkitFullscreenElement||y.msFullscreenElement)}var c=function(){function b(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(c,a,d){a&&b(c.prototype,a);d&&b(c,d);return c}}();a(9);var m=a(35);f=a(18);var n=f.bytesToStr,
r=f.strToBytes,u=a(3),p=a(1).Observable,w=a(12).merge,t=a(40).FromEventObservable.create,q=a(93).NeverObservable.create,x=a(39).DeferObservable.create;f=a(15);var z=f.on,B=f.castToObservable,G=a(7).MediaError,y=document,v=window,E=["","webkit","moz","ms"],A=v.HTMLElement;a=v.HTMLVideoElement;var I=v.MediaSource||v.MozMediaSource||v.WebKitMediaSource||v.MSMediaSource,F=v.MediaKeys||v.MozMediaKeys||v.WebKitMediaKeys||v.MSMediaKeys,N="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&
/(Trident|Edge)\//.test(navigator.userAgent),P=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),D=function(){};f=void 0;navigator.requestMediaKeySystemAccess&&(f=function(b,c){return B(navigator.requestMediaKeySystemAccess(b,c))});var J=function(){function b(c,a,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._keyType=c;this._mediaKeys=a;this._configuration=d}b.prototype.createMediaKeys=function(){return p.of(this._mediaKeys)};b.prototype.getConfiguration=
function(){return this._configuration};c(b,[{key:"keySystem",get:function(){return this._keyType}}]);return b}(),L=g(["loadedmetadata"]),H=g(["sourceopen","webkitsourceopen"]),C=g(["encrypted","needkey"]),K=g(["keymessage","message"]),M=g(["keyadded","ready"]),Q=g(["keyerror","error"]),S=g(["keystatuseschange"]),C={onEncrypted:C,onKeyMessage:K,onKeyStatusesChange:S,onKeyError:Q};if(!f&&a.prototype.webkitGenerateKeyRequest){var ca=function(b,c){var a=this;m.call(this);this.sessionId="";this._vid=b;
this._key=c;this._con=w(K(b),M(b),Q(b)).subscribe(function(b){return a.trigger(b.type,b)})};ca.prototype=Object.assign({generateRequest:function(b,c){this._vid.webkitGenerateKeyRequest(this._key,c)},update:e(function(b,c){if(0<=this._key.indexOf("clearkey")){var a=JSON.parse(n(b)),d=r(atob(a.keys[0].k)),a=r(atob(a.keys[0].kid));this._vid.webkitAddKey(this._key,d,a,c)}else this._vid.webkitAddKey(this._key,b,null,c);this.sessionId=c}),close:function(){this._con&&this._con.unsubscribe();this._vid=this._con=
null}},m.prototype);D=function(b){this.ks_=b};D.prototype={_setVideo:function(b){this._vid=b},createSession:function(){return new ca(this._vid,this.ks_)}};var Y=function(b){var c=y.querySelector("video")||y.createElement("video");return c&&c.canPlayType?!!c.canPlayType("video/mp4",b):!1};f=function(b,c){if(!Y(b))return p["throw"]();for(var a=0;a<c.length;a++){var d=c[a],e=d.videoCapabilities,m=d.audioCapabilities,g=d.initDataTypes,n=d.sessionTypes,k=d.distinctiveIdentifier,d=d.persistentState,r=!0;
if(r=(r=(r=(r=r&&(!g||!!g.filter(function(b){return"cenc"===b})[0]))&&(!n||n.filter(function(b){return"temporary"===b}).length===n.length))&&"required"!==k)&&"required"!==d)return a={videoCapabilities:e,audioCapabilities:m,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]},p.of(new J(b,new D(b),a))}return p["throw"]()}}else if(F&&!f){var ba=function(b){m.call(this);this.sessionId="";this._mk=b};ba.prototype=Object.assign({generateRequest:function(b,
c){var a=this;this._ss=this._mk.memCreateSession("video/mp4",c);this._con=w(K(this._ss),M(this._ss),Q(this._ss)).subscribe(function(b){return a.trigger(b.type,b)})},update:e(function(b,c){u(this._ss);this._ss.update(b,c);this.sessionId=c},function(){return this._ss}),close:function(){this._ss&&(this._ss.close(),this._ss=null);this._con&&(this._con.unsubscribe(),this._con=null)}},m.prototype);F.prototype.alwaysRenew=!0;F.prototype.memCreateSession=F.prototype.createSession;F.prototype.createSession=
function(){return new ba(this)};f=function(b,c){if(!F.isTypeSupported(b))return p["throw"]();for(var a=0;a<c.length;a++){var d=c[a],e=d.videoCapabilities,m=d.audioCapabilities,g=d.initDataTypes,d=d.distinctiveIdentifier,n=!0;if(n=(n=n&&(!g||!!g.filter(function(b){return"cenc"===b})[0]))&&"required"!==d)return a={videoCapabilities:e,audioCapabilities:m,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},p.of(new J(b,
new F(b),a))}return p["throw"]()}}F||(S=function(){throw new G("MEDIA_KEYS_NOT_SUPPORTED",null,!0);},F={create:S,isTypeSupported:S});if(v.WebKitSourceBuffer&&!v.WebKitSourceBuffer.prototype.addEventListener){var S=v.WebKitSourceBuffer.prototype;for(T in m.prototype)S[T]=m.prototype[T];S.__listeners=[];S.appendBuffer=function(b){if(this.updating)throw Error("updating");this.trigger("updatestart");this.updating=!0;try{this.append(b)}catch(U){this.__emitUpdate("error",U);return}this.__emitUpdate("update")};
S.__emitUpdate=function(b,c){var a=this;setTimeout(function(){a.trigger(b,c);a.updating=!1;a.trigger("updateend")},0)}}var T=g(["fullscreenchange","FullscreenChange"],E.concat("MS"));h.exports={HTMLVideoElement_:a,MediaSource_:I,isCodecSupported:function(b){return!!I&&I.isTypeSupported(b)},sourceOpen:function(b){return"open"==b.readyState?p.of(null):H(b).take(1)},canSeek:function(b){return 1<=b.readyState?p.of(null):L(b).take(1)},canPlay:function(b){return 4<=b.readyState?p.of(null):z(b,"canplay").take(1)},
KeySystemAccess:J,requestMediaKeySystemAccess:f,setMediaKeys:function(c,a){return x(function(){return B(b(c,a))})},emeEvents:C,shouldRenewMediaKeys:function(){return N},isFullscreen:d,onFullscreenChange:T,requestFullscreen:function(b){d()||(b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullscreen:function(){d()&&(y.exitFullscreen?
y.exitFullscreen():y.msExitFullscreen?y.msExitFullscreen():y.mozCancelFullScreen?y.mozCancelFullScreen():y.webkitExitFullscreen&&y.webkitExitFullscreen())},videoSizeChange:function(){return z(v,"resize")},visibilityChange:function(){var b=void 0;null!=y.hidden?b="":null!=y.mozHidden?b="moz":null!=y.msHidden?b="ms":null!=y.webkitHidden&&(b="webkit");var c=b?b+"Hidden":"hidden";return z(y,b+"visibilitychange").map(function(){return y[c]})},addTextTrack:function(b,c){var a=void 0;if(N){var d=b.textTracks.length;
d=0<d?b.textTracks[d-1]:b.addTextTrack("subtitles");d.mode=c?d.HIDDEN:d.SHOWING}else a=document.createElement("track"),b.appendChild(a),d=a.track,a.kind="subtitles",d.mode=c?"hidden":"showing";return{track:d,trackElement:a}},isVTTSupported:function(){return!N},isPlaybackStuck:function(b){return P&&"timeupdate"===b.name&&b.range&&10<b.range.end-b.ts},isIE:N,isFirefox:P}},function(h,f,a){function l(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+
typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var k=a(1).Observable,g=a(12).merge,e=a(40).FromEventObservable.create,b=a(41).PromiseObservable.create,d=function(b){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var d=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.value=a;return d}l(c,b);c.prototype._subscribe=function(b){b.next(this.value)};return c}(k);h.exports={on:function(b,a){return Array.isArray(a)?g.apply(null,a.map(function(c){return e(b,c)})):e(b,a)},only:function(b){return new d(b)},tryCatch:function(b,a){try{return b(a)}catch(n){return k["throw"](n)}},castToObservable:function(c){return c instanceof k?c:c&&"function"==typeof c.subscribe?new k(function(b){var a=c.subscribe(function(c){return b.next(c)},
function(c){return b.error(c)},function(){return b.complete()});return function(){a&&a.dispose?a.dispose():a&&a.unsubscribe&&a.unsubscribe()}}):c&&"function"==typeof c.then?b(c):k.of(c)}}},function(h,f){f.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(h,f){f.isScheduler=function(a){return a&&"function"===typeof a.schedule}},function(h,f,a){function l(a){for(var b=a.length,d=new Uint8Array(b),c=0;c<b;c++)d[c]=a.charCodeAt(c)&255;return d}function k(a,b){b||(b="");
for(var d="",c=0;c<a.byteLength;c++)d+=(a[c]>>>4).toString(16),d+=(a[c]&15).toString(16),b.length&&(d+=b);return d}var g=a(3);h.exports={totalBytes:function(a){for(var b=0,d=0;d<a.length;d++)b+=a[d].byteLength;return b},strToBytes:l,bytesToStr:function(a){return String.fromCharCode.apply(null,a)},bytesToUTF16Str:function(a){for(var b="",d=a.length,c=0;c<d;c+=2)b+=String.fromCharCode(a[c]);return b},hexToBytes:function(a){for(var b=a.length,d=new Uint8Array(b/2),c=0,e=0;c<b;c+=2,e++)d[e]=parseInt(a.substr(c,
2),16)&255;return d},bytesToHex:k,concat:function(){for(var a=arguments.length,b=-1,d=0,c;++b<a;)c=arguments[b],d+="number"===typeof c?c:c.length;for(var d=new Uint8Array(d),m=0,b=-1;++b<a;)c=arguments[b],"number"===typeof c?m+=c:0<c.length&&(d.set(c,m),m+=c.length);return d},be2toi:function(a,b){return(a[0+b]<<8)+(a[1+b]<<0)},be4toi:function(a,b){return 16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b]},be8toi:function(a,b){return 4294967296*(16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b])+16777216*
a[4+b]+65536*a[5+b]+256*a[6+b]+a[7+b]},le2toi:function(a,b){return(a[0+b]<<0)+(a[1+b]<<8)},le4toi:function(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]},le8toi:function(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]+(a[4+b]+256*a[5+b]+65536*a[6+b]+16777216*a[7+b]*4294967296)},itobe2:function(a){return new Uint8Array([a>>>8&255,a&255])},itobe4:function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])},itobe8:function(a){var b=a%4294967296;a=(a-b)/4294967296;
return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255])},itole2:function(a){return new Uint8Array([a&255,a>>>8&255])},itole4:function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])},itole8:function(a){var b=a%4294967296;a=(a-b)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,b&255,b>>>8&255,b>>>16&255,b>>>24&255])},guidToUuid:function(a){g.equal(a.length,16,"UUID length should be 16");var b=l(a);a=b[0];var d=b[1],
c=b[2],m=b[3],e=b[4],r=b[5],f=b[6],h=b[7],w=b.subarray(8,10),b=b.subarray(10,16),t=new Uint8Array(16);t[0]=m;t[1]=c;t[2]=d;t[3]=a;t[4]=r;t[5]=e;t[6]=h;t[7]=f;t.set(w,8);t.set(b,10);return k(t)},toBase64URL:function(a){return btoa(a).replace(/\=+$/,"")}}},function(h,f,a){var l=a(17),k=a(16),g=a(11),e=a(97);f.combineLatest=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];var c=a=null;l.isScheduler(b[b.length-1])&&(c=b.pop());"function"===typeof b[b.length-1]&&(a=b.pop());1===b.length&&
k.isArray(b[0])&&(b=b[0]);return(new g.ArrayObservable(b,c)).lift(new e.CombineLatestOperator(a))}},function(h,f,a){function l(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");}function k(b){for(var a=b.length,c=[],d=0;d<a;d++)c.push(new u(b.start(d),b.end(d),0));return c}function g(b){for(var a=b.length,c=[],d=0;d<a;d++)c.push(b[d].clone());return c}function e(b,a){return b.start<=a&&a<b.end}function b(b,a){for(var c=0;c<a.length;c++)if(d(b,a[c]))return a[c];return null}
function d(b,a){return e(b,a.start)||e(b,a.end)||e(a,b.start)}function c(b,a){return e(b,a.start)&&e(b,a.end)}function m(b){for(var a=1;a<b.length;a++){var c=b[a-1],d=b[a];c.bitrate===d.bitrate&&(Math.abs(d.start-c.end)<r||Math.abs(d.end-c.start)<r)&&(c=new u(Math.min(c.start,d.start),Math.max(c.end,d.end),d.bitrate),b.splice(--a,2,c))}return b}function n(b){b=g(b);for(var a=0;a<b.length;a++)b[a].bitrate=0;return m(b)}a(3);var r=1/60,u=function(){function b(a,c,d){l(this,b);this.start=a;this.end=
c;this.bitrate=d}b.prototype.isNil=function(){return this.start===this.end};b.prototype.clone=function(){return new b(this.start,this.end,this.bitrate)};return b}();f=function(){function a(b){l(this,a);this.ranges=b=b?Array.isArray(b)?g(b):k(b):[];this.length=b.length}a.prototype.start=function(b){return this.ranges[b].start};a.prototype.end=function(b){return this.ranges[b].end};a.prototype.hasRange=function(b,a){for(var c=b+a,d=0;d<this.ranges.length;d++){var m=this.ranges[d],e=m.start,m=m.end;
if(e-b<=r&&b-m<=r&&e-c<=r&&c-m<=r)return this.ranges[d]}return null};a.prototype.getRange=function(b){for(var a=0;a<this.ranges.length;a++)if(e(this.ranges[a],b))return this.ranges[a];return null};a.prototype.getOuterRanges=function(b){for(var a=[],c=0;c<this.ranges.length;c++)e(this.ranges[c],b)||a.push(this.ranges[c]);return a};a.prototype.getGap=function(b){var a=this.getRange(b);return a?a.end-b:Infinity};a.prototype.getLoaded=function(b){var a=this.getRange(b);return a?b-a.start:0};a.prototype.getSize=
function(b){return(b=this.getRange(b))?b.end-b.start:0};a.prototype.getNextRangeGap=function(b){for(var a=this.ranges,c=-1,d=void 0;++c<a.length;){var m=a[c].start;if(m>b){d=m;break}}return null!=d?d-b:Infinity};a.prototype.insert=function(b,a,e){var g=this.ranges;b=new u(a,e,b);if(!b.isNil()){for(a=0;a<g.length;a++){e=g[a];var n=d(b,e),k=Math.abs(e.start-b.end)<r||Math.abs(e.end-b.start)<r;if(n||k)if(b.bitrate===e.bitrate)b=new u(Math.min(b.start,e.start),Math.max(b.end,e.end),e.bitrate),g.splice(a--,
1);else if(n)if(c(e,b))g.splice(++a,0,b),n=e.end,e.end=b.start,b=new u(b.end,n,e.bitrate);else if(c(b,e))g.splice(a--,1);else if(e.start<b.start)e.end=b.start;else{e.start=b.end;break}else break;else if(0===a){if(b.end<=g[0].start)break}else if(g[a-1].end<=b.start&&b.end<=e.start)break}g.splice(a,0,b);for(b=0;b<g.length;b++)g[b].isNil()&&g.splice(b++,1);m(g)}this.length=this.ranges.length;return this.ranges};a.prototype.remove=function(b,c){this.intersect(new a([new u(0,b,0),new u(c,Infinity,0)]))};
a.prototype.equals=function(a){a:{a=this.ranges;a=n(a);var c=n(a);for(var d=0;d<a.length;d++){var e=a[d],m=b(e,c);if(!(m&&Math.abs(m.start-e.start)<r&&Math.abs(m.end-e.end)<r)){a=!1;break a}}a=!0}return a};a.prototype.intersect=function(a){var c=this.ranges;a=a.ranges;for(var d=0;d<c.length;d++){var e=c[d],m=b(e,a);m?(m.start>e.start&&(e.start=m.start),m.end<e.end&&(e.end=m.end)):c.splice(d--,1)}this.length=this.ranges.length;return this.ranges};return a}();h.exports={bufferedToRanges:k,BufferedRanges:f}},
function(h,f){function a(b,a,d){if(b===a)return!0;var c=b.split("-")[0];a=a.split("-")[0];return d>=k.BASE_LANG_MATCH&&b===a||d>=k.OTHER_SUBLANG_MATCH&&c===a?!0:!1}function l(a){if(null===a||""===a)return"";a=(""+a).toLowerCase().split("-");var c=a[0],e=void 0;2===c.length&&(e=b[c]);3===c.length&&(e=d[c]);(c=e||c)&&(a[0]=c);return a.join("-")}var k={PERFECT_MATCH:0,BASE_LANG_MATCH:1,OTHER_SUBLANG_MATCH:2},g=k.PERFECT_MATCH,e=k.OTHER_SUBLANG_MATCH,b={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",
an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bh:"bih",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"baq",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fre",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",
hy:"arm",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"ice",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"geo",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mao",mk:"mac",ml:"mal",mn:"mon",mr:"mar",ms:"may",mt:"mlt",my:"bur",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"dut",nn:"nno",no:"nor",
nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"alb",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",
vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"chi",zu:"zul"},d={tib:"bod",cze:"ces",wel:"cym",ger:"deu",gre:"ell",eus:"baq",per:"fas",fra:"fre",hye:"arm",isl:"ice",kat:"geo",mri:"mao",mkd:"mac",msa:"may",mya:"bur",nld:"dut",rum:"ron",slo:"slk",sqi:"alb",zho:"chi"};h.exports={match:a,normalize:l,findBetterMatchIndex:function(b,d){if(!d)return-1;d=l(d);for(var c=g;c<=e;c++)for(var m=0;m<b.length;m++)if(a(l(b[m]),d,c))return m;return-1}}},function(h,f,a){h=a(45);a=a(46);
f.async=new a.AsyncScheduler(h.AsyncAction)},function(h,f){f.errorObject={e:{}}},function(h,f,a){function l(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function k(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");
}function g(b){return"number"==typeof b&&!isNaN(b)||!isNaN(+b)?!0:!1}var e=a(37).resolveURL;f=function(){function b(a,c,e,n,r,f,l,h,t,q){k(this,b);this.id=e;this.ada=a;this.rep=c;this.time=g(r)?+r:-1;this.duration=g(f)?+f:-1;this.number=g(l)?+l:-1;this.media=n?""+n:"";this.range=Array.isArray(h)?h:null;this.indexRange=Array.isArray(t)?t:null;this.init=!!q}b.create=function(a,c,e,g,k,f,l,h,t,q){return new b(a,c,a.id+"_"+c.id+"_"+e,g,k,f,l,h,t,q)};b.prototype.getId=function(){return this.id};b.prototype.getAdaptation=
function(){return this.ada};b.prototype.getRepresentation=function(){return this.rep};b.prototype.getTime=function(){return this.time};b.prototype.getDuration=function(){return this.duration};b.prototype.getNumber=function(){return this.number};b.prototype.getMedia=function(){return this.media};b.prototype.getRange=function(){return this.range};b.prototype.getIndexRange=function(){return this.indexRange};b.prototype.isInitSegment=function(){return this.init};b.prototype.getResolvedURL=function(){return e(this.ada.rootURL,
this.ada.baseURL,this.rep.baseURL)};return b}();a=function(b){function a(c,d,e,g,f){k(this,a);c=b.call(this,c,d,c.id+"_"+d.id+"_init",e,-1,-1,-1,g,f,!0);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?this:c}l(a,b);return a}(f);h.exports={Segment:f,InitSegment:a}},function(h,f,a){var l=function(a,e){function b(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?
Object.create(e):(b.prototype=e.prototype,new b)};h=a(8);var k=a(47);a=function(a){function e(b){a.call(this);this._value=b}l(e,a);Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});e.prototype._subscribe=function(b){var d=a.prototype._subscribe.call(this,b);d&&!d.closed&&b.next(this._value);return d};e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k.ObjectUnsubscribedError;return this._value};
e.prototype.next=function(b){a.prototype.next.call(this,this._value=b)};return e}(h.Subject);f.BehaviorSubject=a},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(e,b){a.call(this);this.value=e;this.scheduler=b;this._isScalar=!0;b&&(this._isScalar=!1)}l(g,a);g.create=function(a,b){return new g(a,b)};g.dispatch=function(a){var b=a.value,
d=a.subscriber;a.done?d.complete():(d.next(b),d.closed||(a.done=!0,this.schedule(a)))};g.prototype._subscribe=function(a){var b=this.value,d=this.scheduler;if(d)return d.schedule(g.dispatch,0,{done:!1,value:b,subscriber:a});a.next(b);a.closed||a.complete()};return g}(a(1).Observable);f.ScalarObservable=h},function(h,f,a){var l=function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)};h=a(10);
var k=a(13);f.mergeAll=function(b){void 0===b&&(b=Number.POSITIVE_INFINITY);return this.lift(new g(b))};var g=function(){function b(b){this.concurrent=b}b.prototype.call=function(b,a){return a._subscribe(new e(b,this.concurrent))};return b}();f.MergeAllOperator=g;var e=function(b){function a(a,d){b.call(this,a);this.concurrent=d;this.hasCompleted=!1;this.buffer=[];this.active=0}l(a,b);a.prototype._next=function(b){this.active<this.concurrent?(this.active++,this.add(k.subscribeToResult(this,b))):this.buffer.push(b)};
a.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};a.prototype.notifyComplete=function(b){var a=this.buffer;this.remove(b);this.active--;0<a.length?this._next(a.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return a}(h.OuterSubscriber);f.MergeAllSubscriber=e},function(h,f,a){var l=a(88);f.multicast=function(a,e){var b="function"===typeof a?a:function(){return a};if("function"===typeof e)return this.lift(new k(b,
e));var d=Object.create(this,l.connectableObservableDescriptor);d.source=this;d.subjectFactory=b;return d};var k=function(){function a(a,b){this.subjectFactory=a;this.selector=b}a.prototype.call=function(a,b){var d=this.selector,c=new l.ConnectableObservable(b.source,this.subjectFactory),d=d(c).subscribe(a);d.add(c.connect());return d};return a}();f.MulticastOperator=k},function(h,f,a){h=a(6);a=h.root.Symbol;if("function"===typeof a)a.iterator?f.$$iterator=a.iterator:"function"===typeof a["for"]&&
(f.$$iterator=a["for"]("iterator"));else if(h.root.Set&&"function"===typeof(new h.root.Set)["@@iterator"])f.$$iterator="@@iterator";else if(h.root.Map){a=Object.getOwnPropertyNames(h.root.Map.prototype);for(var l=0;l<a.length;++l){var k=a[l];if("entries"!==k&&"size"!==k&&h.root.Map.prototype[k]===h.root.Map.prototype.entries){f.$$iterator=k;break}}}else f.$$iterator="@@iterator"},function(h,f,a){function l(a){var g=a.Symbol;"function"===typeof g?g.observable?a=g.observable:(a=g("observable"),g.observable=
a):a="@@observable";return a}h=a(6);f.getSymbolObservable=l;f.$$observable=l(h.root)},function(h,f,a){h=a(6).root.Symbol;f.$$rxSubscriber="function"===typeof h&&"function"===typeof h["for"]?h["for"]("rxSubscriber"):"@@rxSubscriber"},function(h,f){f.isFunction=function(a){return"function"===typeof a}},function(h,f,a){function l(){try{return g.apply(this,arguments)}catch(e){return k.errorObject.e=e,k.errorObject}}var k=a(23),g;f.tryCatch=function(a){g=a;return l}},function(h,f,a){function l(b){var a=
u(b.locations[0]);(b=b.periods[0])&&b.baseURL&&(a+=""+b.baseURL);return a}function k(b,a,c,d){b.id=b.id||x++;var e=b.adaptations,e=e.concat(c||[]),e=e.concat(d||[]),e=e.map(function(b){return g(b,a)}),e=e.filter(function(b){return 0>z.indexOf(b.type)?(r.info("not supported adaptation type",b.type),!1):!0});if(0===e.length)throw new w("MANIFEST_PARSE_ERROR",null,!0);c={};for(d=0;d<e.length;d++){var m=e[d],n=m.type,k=m.representations;c[n]=c[n]||[];0<k.length&&c[n].push(m)}for(var f in c)if(0===c[f].length)throw new w("MANIFEST_INCOMPATIBLE_CODECS_ERROR",
null,!0);b.adaptations=c;return b}function g(b,a){if("undefined"==typeof b.id)throw new w("MANIFEST_PARSE_ERROR",null,!0);b=Object.assign({},a,b);var d={};q.forEach(function(a){a in b&&(d[a]=b[a])});var e=b.representations.map(function(b){if("undefined"==typeof b.id)throw new w("MANIFEST_PARSE_ERROR",null,!0);b=Object.assign({},d,b);var a=b.index;if(!a)throw new w("MANIFEST_PARSE_ERROR",null,!0);a.timescale||(a.timescale=1);b.bitrate||(b.bitrate=1);"mp4a.40.02"==b.codecs&&(b.codecs="mp4a.40.2");return b}).sort(function(b,
a){return b.bitrate-a.bitrate}),m=b,g=m.type,m=m.mimeType;m||(m=e[0].mimeType);if(!m)throw new w("MANIFEST_PARSE_ERROR",null,!0);b.mimeType=m;g||(g=b.type=m.split("/")[0]);if("video"==g||"audio"==g)e=e.filter(function(b){return p(c(b))});b.representations=e;b.bitrates=e.map(function(b){return b.bitrate});return b}function e(b){Array.isArray(b)||(b=[b]);return b.reduce(function(b,a){var c=a.mimeType,d=a.url,e=a.language,m=a.languages;e&&(m=[e]);return b.concat(m.map(function(b){return{id:x++,type:"text",
lang:b,mimeType:c,rootURL:d,baseURL:"",representations:[{id:x++,mimeType:c,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}}))},[])}function b(b){Array.isArray(b)||(b=[b]);return b.map(function(b){var a=b.mimeType;b=b.url;return{id:x++,type:"image",mimeType:a,rootURL:b,baseURL:"",representations:[{id:x++,mimeType:a,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})}function d(b,a){for(var c in b)if(a.hasOwnProperty(c)){var e=b[c],
m=a[c];"string"==typeof e||"number"==typeof e||"object"==("undefined"===typeof e?"undefined":n(e))&&e instanceof Date?b[c]=m:Array.isArray(e)?(e.length=0,Array.prototype.push.apply(e,m)):b[c]=d(e,m)}return b}function c(b){return b.mimeType+';codecs="'+b.codecs+'"'}function m(b,a){var c=b.adaptations;return(c=c&&c[a])?c:[]}var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?
"symbol":typeof b},r=a(9),u=a(37).normalizeBaseURL,p=a(14).isCodecSupported,w=a(7).MediaError,t=a(21).normalize,q="profiles width height frameRate audioSamplingRate mimeType segmentProfiles codecs maximumSAPPeriod maxPlayoutRate codingDependency index".split(" "),x=0,z=["audio","video","text","image"];h.exports={normalizeManifest:function(a,c,d,m){if(!c.transportType)throw new w("MANIFEST_PARSE_ERROR",null,!0);c.id=c.id||x++;c.type=c.type||"static";var g=c.locations;g&&g.length||(c.locations=[a]);
c.isLive="dynamic"==c.type;var n={rootURL:l(c),baseURL:c.baseURL,isLive:c.isLive};d&&(d=e(d));m&&(m=b(m));a=c.periods.map(function(b){return k(b,n,d,m)});c=Object.assign({},c,a[0]);c.periods=null;c.duration||(c.duration=Infinity);c.isLive&&(c.suggestedPresentationDelay=c.suggestedPresentationDelay||15,c.availabilityStartTime=c.availabilityStartTime||0);return c},mergeManifestsIndex:function(b,a){var c=b.adaptations,e=a.adaptations,m=function(b){var a=e[b];c[b].forEach(function(b,c){d(b.index,a[c].index)})},
g;for(g in c)m(g);return b},mutateManifestLiveGap:function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;b.isLive&&(b.presentationLiveGap+=a)},getCodec:c,getAdaptations:function(b){b=b.adaptations;if(!b)return[];var a=[],d;for(d in b){var e=b[d];a.push({type:d,adaptations:e,codec:c(e[0].representations[0])})}return a},getAdaptationsByType:m,getAvailableSubtitles:function(b){return m(b,"text").map(function(b){return t(b.lang)})},getAvailableLanguages:function(b){return m(b,"audio").map(function(b){return t(b.lang)})}}},
function(h,f,a){function l(){this.__listeners={}}var k=a(3);l.prototype.addEventListener=function(a,e){k("function"==typeof e,"eventemitter: second argument should be a function");this.__listeners[a]||(this.__listeners[a]=[]);this.__listeners[a].push(e)};l.prototype.removeEventListener=function(a,e){if(0===arguments.length)this.__listeners={};else if(this.__listeners.hasOwnProperty(a))if(1===arguments.length)delete this.__listeners[a];else{var b=this.__listeners[a],d=b.indexOf(e);~d&&b.splice(d,1);
b.length||delete this.__listeners[a]}};l.prototype.trigger=function(a,e){this.__listeners.hasOwnProperty(a)&&this.__listeners[a].slice().forEach(function(b){try{b(e)}catch(d){console.error(d,d.stack)}})};l.prototype.on=l.prototype.addEventListener;l.prototype.off=l.prototype.removeEventListener;h.exports=l},function(h,f,a){function l(a,b){var d=0;return function(){d&&clearTimeout(d);d=setTimeout(a,b)}}var k=a(155).getBackedoffDelay,g=a(42).TimerObservable.create;h.exports={retryWithBackoff:function(a,
b){var d=b.retryDelay,c=b.totalRetry,e=b.shouldRetry,n=b.resetDelay,f=b.errorSelector,h=b.onRetry,p=0,w=void 0;0<n&&(w=l(function(){return p=0},n));return a["catch"](function(b,a){if(e&&!e(b)||p++>=c){if(f)throw f(b,p);throw b;}h&&h(b,p);var m=k(d,p);return g(m).mergeMap(function(){w&&w();return a})})},retryableFuncWithBackoff:function(a,b){var d=b.retryDelay,c=b.totalRetry,e=b.shouldRetry,n=b.resetDelay,f=b.errorSelector,h=b.onRetry,p=0,w=void 0;0<n&&(w=l(function(){return p=0},n));return function q(){for(var b=
arguments.length,m=Array(b),n=0;n<b;n++)m[n]=arguments[n];return a.apply(void 0,m)["catch"](function(b){if(e&&!e(b)||p++>=c){if(f)throw f(b,p);throw b;}h&&h(b,p);b=k(d,p);return g(b).mergeMap(function(){w&&w();return q.apply(void 0,m)})})}}}},function(h,f){var a=/^(?:[a-z]+:)?\/\//i,l=/\/[\.]{1,2}\//;h.exports={resolveURL:function(){var k=arguments.length;if(0===k)return"";for(var g="",e=0;e<k;e++){var b=arguments[e];"string"===typeof b&&""!==b&&(a.test(b)?g=b:("/"===b[0]&&(b=b.substr(1)),"/"===g[g.length-
1]&&(g=g.substr(0,g.length-1)),g=g+"/"+b))}if(l.test(g)){k=[];g=g.split("/");e=0;for(b=g.length;e<b;e++)".."==g[e]?k.pop():"."!=g[e]&&k.push(g[e]);k=k.join("/")}else k=g;return k},normalizeBaseURL:function(a){var g=a.lastIndexOf("/");return 0<=g?a.substring(0,g+1):a}}},function(h,f){f.empty={closed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},function(h,f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=
null===b?Object.create(b):(d.prototype=b.prototype,new d)};h=a(1);var k=a(13);a=a(10);h=function(a){function b(b){a.call(this);this.observableFactory=b}l(b,a);b.create=function(a){return new b(a)};b.prototype._subscribe=function(b){return new g(b,this.observableFactory)};return b}(h.Observable);f.DeferObservable=h;var g=function(a){function b(b,c){a.call(this,b);this.factory=c;this.tryDefer()}l(b,a);b.prototype.tryDefer=function(){try{this._callFactory()}catch(d){this._error(d)}};b.prototype._callFactory=
function(){var b=this.factory();b&&this.add(k.subscribeToResult(this,b))};return b}(a.OuterSubscriber)},function(h,f,a){var l=function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)};h=a(1);var k=a(33),g=a(32),e=a(23),b=a(4);a=function(a){function c(b,c,d,e){a.call(this);this.sourceObj=b;this.eventName=c;this.selector=d;this.options=e}l(c,a);c.create=function(b,a,d,e){g.isFunction(d)&&(e=d,
d=void 0);return new c(b,a,e,d)};c.setupSubscription=function(a,d,e,g,k){if(a&&"[object NodeList]"===a.toString()||a&&"[object HTMLCollection]"===a.toString())for(var m=0,n=a.length;m<n;m++)c.setupSubscription(a[m],d,e,g,k);else if(a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener){a.addEventListener(d,e,k);var f=function(){return a.removeEventListener(d,e)}}else a&&"function"===typeof a.on&&"function"===typeof a.off?(a.on(d,e),f=function(){return a.off(d,e)}):a&&
"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(d,e),f=function(){return a.removeListener(d,e)});g.add(new b.Subscription(f))};c.prototype._subscribe=function(b){var a=this.selector;c.setupSubscription(this.sourceObj,this.eventName,a?function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];c=k.tryCatch(a).apply(void 0,c);c===e.errorObject?b.error(e.errorObject.e):b.next(c)}:function(a){return b.next(a)},b,this.options)};return c}(h.Observable);
f.FromEventObservable=a},function(h,f,a){function l(b){var a=b.value;b=b.subscriber;b.closed||(b.next(a),b.complete())}function k(b){var a=b.err;b=b.subscriber;b.closed||b.error(a)}var g=function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)},e=a(6);h=function(b){function a(a,d){b.call(this);this.promise=a;this.scheduler=d}g(a,b);a.create=function(b,d){return new a(b,d)};a.prototype._subscribe=
function(b){var a=this,c=this.promise,d=this.scheduler;if(null==d)this._isScalar?b.closed||(b.next(this.value),b.complete()):c.then(function(c){a.value=c;a._isScalar=!0;b.closed||(b.next(c),b.complete())},function(a){b.closed||b.error(a)}).then(null,function(b){e.root.setTimeout(function(){throw b;})});else if(this._isScalar){if(!b.closed)return d.schedule(l,0,{value:this.value,subscriber:b})}else c.then(function(c){a.value=c;a._isScalar=!0;b.closed||b.add(d.schedule(l,0,{value:c,subscriber:b}))},
function(a){b.closed||b.add(d.schedule(k,0,{err:a,subscriber:b}))}).then(null,function(b){e.root.setTimeout(function(){throw b;})})};return a}(a(1).Observable);f.PromiseObservable=h},function(h,f,a){var l=function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)},k=a(49);h=a(1);var g=a(22),e=a(17),b=a(48);a=function(a){function c(c,d,f){void 0===c&&(c=0);a.call(this);this.period=-1;this.dueTime=
0;k.isNumeric(d)?this.period=1>Number(d)&&1||Number(d):e.isScheduler(d)&&(f=d);e.isScheduler(f)||(f=g.async);this.scheduler=f;this.dueTime=b.isDate(c)?+c-this.scheduler.now():c}l(c,a);c.create=function(b,a,d){void 0===b&&(b=0);return new c(b,a,d)};c.dispatch=function(b){var a=b.index,c=b.period,d=b.subscriber;d.next(a);if(!d.closed){if(-1===c)return d.complete();b.index=a+1;this.schedule(b,c)}};c.prototype._subscribe=function(b){return this.scheduler.schedule(c.dispatch,this.dueTime,{index:0,period:this.period,
subscriber:b})};return c}(h.Observable);f.TimerObservable=a},function(h,f,a){function l(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];a=null;k.isScheduler(b[b.length-1])&&(a=b.pop());return null===a&&1===b.length?b[0]:(new g.ArrayObservable(b,a)).lift(new e.MergeAllOperator(1))}var k=a(17),g=a(11),e=a(27);f.concat=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];return this.lift.call(l.apply(void 0,[this].concat(b)))};f.concatStatic=l},function(h,f,a){var l=function(b,
a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)},k=a(13);h=a(10);f.mergeMap=function(b,a,c){void 0===c&&(c=Number.POSITIVE_INFINITY);"number"===typeof a&&(c=a,a=null);return this.lift(new g(b,a,c))};var g=function(){function b(b,a,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.project=b;this.resultSelector=a;this.concurrent=e}b.prototype.call=function(b,a){return a._subscribe(new e(b,this.project,
this.resultSelector,this.concurrent))};return b}();f.MergeMapOperator=g;var e=function(b){function a(a,d,e,g){void 0===g&&(g=Number.POSITIVE_INFINITY);b.call(this,a);this.project=d;this.resultSelector=e;this.concurrent=g;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}l(a,b);a.prototype._next=function(b){this.active<this.concurrent?this._tryNext(b):this.buffer.push(b)};a.prototype._tryNext=function(b){var a=this.index++;try{var c=this.project(b,a)}catch(r){this.destination.error(r);return}this.active++;
this._innerSub(c,b,a)};a.prototype._innerSub=function(b,a,d){this.add(k.subscribeToResult(this,b,a,d))};a.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};a.prototype.notifyNext=function(b,a,d,e,g){this.resultSelector?this._notifyResultSelector(b,a,d,e):this.destination.next(a)};a.prototype._notifyResultSelector=function(b,a,d,e){try{var c=this.resultSelector(b,a,d,e)}catch(p){this.destination.error(p);return}this.destination.next(c)};
a.prototype.notifyComplete=function(b){var a=this.buffer;this.remove(b);this.active--;0<a.length?this._next(a.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return a}(h.OuterSubscriber);f.MergeMapSubscriber=e},function(h,f,a){var l=function(a,e){function b(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(b.prototype=e.prototype,new b)},k=a(6);h=function(a){function e(b,d){a.call(this,b,d);this.scheduler=b;this.work=
d;this.pending=!1}l(e,a);e.prototype.schedule=function(b,a){void 0===a&&(a=0);if(this.closed)return this;this.state=b;this.pending=!0;var c=this.id,d=this.scheduler;null!=c&&(this.id=this.recycleAsyncId(d,c,a));this.delay=a;this.id=this.id||this.requestAsyncId(d,this.id,a);return this};e.prototype.requestAsyncId=function(b,a,c){void 0===c&&(c=0);return k.root.setInterval(b.flush.bind(b,this),c)};e.prototype.recycleAsyncId=function(b,a,c){void 0===c&&(c=0);return null!==c&&this.delay===c?a:(k.root.clearInterval(a),
void 0)};e.prototype.execute=function(b,a){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var c=this._execute(b,a);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};e.prototype._execute=function(b,a){var c=!1,d=void 0;try{this.work(b)}catch(n){c=!0,d=!!n&&n||Error(n)}if(c)return this.unsubscribe(),d};e.prototype._unsubscribe=function(){var b=this.id,a=this.scheduler,c=a.actions,e=c.indexOf(this);this.state=this.delay=
this.work=null;this.pending=!1;this.scheduler=null;-1!==e&&c.splice(e,1);null!=b&&(this.id=this.recycleAsyncId(a,b,null))};return e}(a(119).Action);f.AsyncAction=h},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}l(g,a);g.prototype.flush=function(a){var b=this.actions;
if(this.active)b.push(a);else{var d;this.active=!0;do if(d=a.execute(a.state,a.delay))break;while(a=b.shift());this.active=!1;if(d){for(;a=b.shift();)a.unsubscribe();throw d;}}};return g}(a(60).Scheduler);f.AsyncScheduler=h},function(h,f){var a=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)},l=function(k){function g(){var a=k.call(this,"object unsubscribed");this.name=a.name="ObjectUnsubscribedError";
this.stack=a.stack;this.message=a.message}a(g,k);return g}(Error);f.ObjectUnsubscribedError=l},function(h,f){f.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(h,f,a){var l=a(16);f.isNumeric=function(a){return!l.isArray(a)&&0<=a-parseFloat(a)+1}},function(h,f){f.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(h,f){f.noop=function(){}},function(h,f,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a){if("number"==typeof a)return a;
for(var b=0,c,d=0;d<a.length;d++)c=a[d],b=(b<<5)-b+c,b&=b;return b}function b(a,b,c){return{type:"eme",value:Object.assign({name:a,session:b},c)}}function d(a){if(!V||!U||J())return null;var b=fa;return(a=a.filter(function(a){return a.type!==V.type||a.persistentLicense&&"required"!=b.persistentState||a.distinctiveIdentifierRequired&&"required"!=b.distinctiveIdentifier?!1:!0})[0])?{keySystem:a,keySystemAccess:new N(V,U,fa)}:null}function c(a){var b=["temporary"],c="optional",d="optional";a.persistentLicense&&
(c="required",b.push("persistent-license"));a.persistentStateRequired&&(c="required");a.distinctiveIdentifierRequired&&(d="required");var e=[],g=[];Y.forEach(function(a){e.push({contentType:'video/mp4;codecs="avc1.4d401e"',robustness:a});g.push({contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:a})});return{initDataTypes:["cenc"],videoCapabilities:e,audioCapabilities:g,distinctiveIdentifier:d,persistentState:c,sessionTypes:b}}function m(a){var b=d(a);if(b)return q.debug("eme: found compatible keySystem quickly",
b),y.of(b);var e=a.reduce(function(a,b){return a.concat((ca[b.type]||[]).map(function(a){return{keyType:a,keySystem:b}}))},[]);return y.create(function(a){function b(m){if(!d)if(m>=e.length)a.error(new C("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var n=e[m],k=n.keyType,f=n.keySystem,l=[c(f)];q.debug("eme: request keysystem access "+k+","+(m+1+" of "+e.length),l);g=P(k,l).subscribe(function(b){q.info("eme: found compatible keysystem",k,l);a.next({keySystem:f,keySystemAccess:b});a.complete()},function(){q.debug("eme: rejected access to keysystem",
k,l);g=null;b(m+1)})}}var d=!1,g=null;b(0);return function(){d=!0;g&&g.unsubscribe()}})}function n(a,b,c){var d=W,e=U;return B(c.createMediaKeys()).mergeMap(function(g){U=g;fa=c.getConfiguration();V=b;W=a;if(a.mediaKeys===g)return y.of(g);e&&e!==U&&R.dispose();if(d&&d!==W){q.debug("eme: unlink old video element and set mediakeys");var m=D(d,null).concat(D(W,g))}else q.debug("eme: set mediakeys"),m=D(W,g);return m.mapTo(g)})}function r(a,b,c,d,e){q.debug("eme: create a new "+b+" session");var g=a.createSession(b);
a=t(g,c,e)["finally"](function(){R.deleteAndClose(g);T["delete"](d)}).publish();return{session:g,sessionEvents:a}}function u(a,c,d,e,g,m){a=r(a,d,c,g,m);var n=a.session;a=a.sessionEvents;R.add(g,n,a);q.debug("eme: generate request",e,g);e=B(n.generateRequest(e,g))["catch"](function(a){throw new C("KEY_GENERATE_REQUEST_ERROR",a,!1);})["do"](function(){"persistent-license"==d&&T.add(g,n)}).mapTo(b("generated-request",n,{initData:g,initDataType:e}));return I(a,e)}function p(a,b,c,d,e,g){return u(a,b,
c,d,e,g)["catch"](function(m){if(m.code!==H.KEY_GENERATE_REQUEST_ERROR)throw m;var n=R.getFirst();if(!n)throw m;q.warn("eme: could not create a new session, retry after closing a currently loaded session",m);return R.deleteAndClose(n).mergeMap(function(){return u(a,b,c,d,e,g)})})}function w(a,c,d,e,g,m){q.debug("eme: load persisted session",d);var n=r(a,"persistent-license",c,g,m),k=n.session,f=n.sessionEvents;return B(k.load(d))["catch"](function(){return y.of(!1)}).mergeMap(function(n){if(n)return R.add(g,
k,f),T.add(g,k),f.startWith(b("loaded-session",k,{storedSessionId:d}));q.warn("eme: no data stored for the loaded session, do fallback",d);R.deleteById(d);T["delete"](g);k.sessionId&&k.remove();return p(a,c,"persistent-license",e,g,m).startWith(b("loaded-session-failed",k,{storedSessionId:d}))})}function t(a,c,d){function e(a,b){return a.type===L.ENCRYPTED_MEDIA_ERROR?(a.fatal=b,a):new C("KEY_LOAD_ERROR",a,b)}q.debug("eme: handle message events",a);var g=void 0,m={totalRetry:2,retryDelay:200,errorSelector:function(a){return e(a,
!0)},onRetry:function(a){return d.next(e(a,!1))}},n=Q(a).map(function(a){throw new C("KEY_ERROR",a,!0);}),k=S(a).mergeMap(function(b){g=b.sessionId;q.debug("eme: keystatuseschange event",g,a,b);a.keyStatuses.forEach(function(a,b){if(ba[b]||ba[a])throw new C("KEY_STATUS_CHANGE_ERROR",b,!0);});return c.onKeyStatusesChange?z(function(){return B(c.onKeyStatusesChange(b,a))})["catch"](function(a){throw new C("KEY_STATUS_CHANGE_ERROR",a,!0);}):(q.info("eme: keystatuseschange event not handled"),v())}),
f=M(a).mergeMap(function(b){g=b.sessionId;var d=new Uint8Array(b.message),e=b.messageType||"license-request";q.debug("eme: event message type "+e,a,b);b=E(function(){return B(c.getLicense(d,e)).timeout(1E4,new C("KEY_LOAD_TIMEOUT",null,!1))});return G(b,m)}),k=I(f,k).concatMap(function(c){q.debug("eme: update session",g,c);return B(a.update(c,g))["catch"](function(a){throw new C("KEY_UPDATE_ERROR",a,!0);}).mapTo(b("session-update",a,{updatedWith:c}))}),n=I(k,n);return a.closed?n.takeUntil(B(a.closed)):
n}var q=a(9),x=a(3);f=a(15);var z=f.tryCatch,B=f.castToObservable,G=a(36).retryWithBackoff,y=a(1).Observable,v=a(5).EmptyObservable.create,E=a(39).DeferObservable.create,A=a(19).combineLatest,I=a(12).merge,F=a(14),N=F.KeySystemAccess,P=F.requestMediaKeySystemAccess,D=F.setMediaKeys;f=F.emeEvents;var J=F.shouldRenewMediaKeys;a=a(7);var L=a.ErrorTypes,H=a.ErrorCodes,C=a.EncryptedMediaError,K=f.onEncrypted,M=f.onKeyMessage,Q=f.onKeyError,S=f.onKeyStatusesChange,ca={clearkey:["webkit-org.w3.clearkey",
"org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},Y=["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],ba={expired:!0,"internal-error":!0};a=function(){function a(){g(this,a);this._entries=[]}a.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(!0===a(this._entries[b]))return this._entries[b];return null};return a}();f=function(a){function b(){g(this,
b);return l(this,a.apply(this,arguments))}k(b,a);b.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};b.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(!0===a(this._entries[b]))return this._entries[b];return null};b.prototype.get=function(a){a=e(a);var b=this.find(function(b){return b.initData===a});return b?b.session:null};b.prototype.add=function(a,b,c){a=e(a);var d=this.get(a);d&&this.deleteAndClose(d);c=c.connect();a={session:b,initData:a,
eventSubscription:c};q.debug("eme-mem-store: add session",a);this._entries.push(a)};b.prototype.deleteById=function(a){var b=this.find(function(b){return b.session.sessionId===a});return b?this["delete"](b.session):null};b.prototype["delete"]=function(a){var b=this.find(function(b){return b.session===a});if(!b)return null;var c=b.session,d=b.eventSubscription;q.debug("eme-mem-store: delete session",b);b=this._entries.indexOf(b);this._entries.splice(b,1);d.unsubscribe();return c};b.prototype.deleteAndClose=
function(a){return(a=this["delete"](a))?(q.debug("eme-mem-store: close session",a),B(a.close())["catch"](function(){return y.of(null)})):y.of(null)};b.prototype.dispose=function(){var a=this,b=this._entries.map(function(b){return a.deleteAndClose(b.session)});this._entries=[];return I.apply(null,b)};return b}(a);var T=new (function(a){function b(c){g(this,b);var d=l(this,a.call(this));d.setStorage(c);return d}k(b,a);b.prototype.setStorage=function(a){if(this._storage!==a){x(a,"no licenseStorage given for keySystem with persistentLicense");
x.iface(a,"licenseStorage",{save:"function",load:"function"});this._storage=a;try{this._entries=this._storage.load(),x(Array.isArray(this._entries))}catch(aa){q.warn("eme-persitent-store: could not get entries from license storage",aa),this.dispose()}}};b.prototype.get=function(a){a=e(a);return this.find(function(b){return b.initData===a})||null};b.prototype.add=function(a,b){var c=b&&b.sessionId;if(c){a=e(a);var d=this.get(a);d&&d.sessionId===c||(d&&this["delete"](a),q.info("eme-persitent-store: add new session",
c,b),this._entries.push({sessionId:c,initData:a}),this._save())}};b.prototype["delete"]=function(a){a=e(a);var b=this.find(function(b){return b.initData===a});b&&(q.warn("eme-persitent-store: delete session from store",b),b=this._entries.indexOf(b),this._entries.splice(b,1),this._save())};b.prototype.dispose=function(){this._entries=[];this._save()};b.prototype._save=function(){try{this._storage.save(this._entries)}catch(ga){q.warn("eme-persitent-store: could not save licenses in localStorage")}};
return b}(a))({load:function(){return[]},save:function(){}}),R=new f,U=void 0,fa=void 0,V=void 0,W=void 0;h.exports={createEME:function(a,c,d){function e(c,e){var g=e.keySystem,m=e.keySystemAccess;g.persistentLicense&&T.setStorage(g.licenseStorage);q.info("eme: encrypted event",c);return n(a,g,m).mergeMap(function(a){a:{var e=m.getConfiguration(),n=c.initDataType,k=new Uint8Array(c.initData),f=R.get(k);if(f&&f.sessionId)q.debug("eme: reuse loaded session",f.sessionId),a=y.of(b("reuse-session",f));
else{e=(f=(e=e.sessionTypes)&&0<=e.indexOf("persistent-license"))&&g.persistentLicense?"persistent-license":"temporary";if(f&&g.persistentLicense&&(f=T.get(k))){a=w(a,g,f.sessionId,n,k,d);break a}a=p(a,g,e,n,k,d)}}return a})}return A(K(a),m(c)).take(1).mergeMap(function(a){return e(a[0],a[1])})},getCurrentKeySystem:function(){return V&&V.type},onEncrypted:K,dispose:function(){W&&D(W,null).subscribe(function(){});W=V=U=null;R.dispose()}}},function(h,f,a){function l(a){a=a.indexType;switch(a){case "template":return e;
case "timeline":return b;case "list":return d;case "base":return c;default:throw new m("UNKNOWN_INDEX",a,!0);}}a(3);var k=a(34).getAdaptationsByType,g=a(24).InitSegment,e=a(138),b=a(54),d=a(137),c=a(136),m=a(7).IndexError;f=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=b;this.representation=c;this.index=c.index;this.handler=new (l(this.index))(b,c,this.index)}a.prototype.getInitSegment=function(){var a=this.index.initialization||
{};return new g(this.adaptation,this.representation,a.media,a.range,this.index.indexRange)};a.prototype.normalizeRange=function(a,b,c){var d=this.index.presentationTimeOffset||0,e=this.index.timescale||1;b||(b=0);c||(c=0);b=Math.min(b,c);return{time:a*e-d,up:(a+b)*e-d,to:(a+c)*e-d}};a.prototype.checkDiscontinuity=function(a){if(!this.adaptation.isLive)return null;var b=this.index.timescale||1;a=this.handler.checkDiscontinuity(a*b);return 0<a?{ts:a/b+1}:null};a.prototype.getSegments=function(a,b,c){a=
this.normalizeRange(a,b,c);b=a.up;c=a.to;if(!this.handler.checkRange(a.time))throw new m("OUT_OF_INDEX_ERROR",this.index.indexType,!1);return this.handler.getSegments(b,c)};a.prototype.insertNewSegments=function(a,b){for(var c=[],d=0;d<a.length;d++)this.handler.addSegment(a[d],b)&&c.push(a[d]);return c};a.prototype.setTimescale=function(a){var b=this.index;return b.timescale!==a?(b.timescale=a,!0):!1};a.prototype.scale=function(a){return a/this.index.timescale};return a}();h.exports={IndexHandler:f,
getLiveEdge:function(a){var b=k(a,"video")[0].representations[0].index;return l(b).getLiveEdge(b,a)}}},function(h,f,a){function l(a){var e=a.ts,b=a.d;a=a.r;return-1===b?e:e+(a+1)*b}var k=a(24).Segment;f=function(){function a(e,b,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=e;this.representation=b;this.index=d;this.timeline=d.timeline}a.getLiveEdge=function(a,b){var d=l(a.timeline[a.timeline.length-1])/a.timescale-b.suggestedPresentationDelay;
return Math.max(a.timeline[0].ts/a.timescale+1,d)};a.prototype.createSegment=function(a,b,d){return k.create(this.adaptation,this.representation,a,this.index.media,a,d,0,b,null,!1)};a.prototype.calculateRepeat=function(a,b){var d=a.r||0;0>d&&(d=Math.ceil(((b?b.t:Infinity)-a.ts)/a.d)-1);return d};a.prototype.checkDiscontinuity=function(a){if(0>=a)return-1;var b=this.getSegmentIndex(a);if(0>b||b>=this.timeline.length-1)return-1;var d=this.timeline[b];if(-1===d.d)return-1;var c=d.ts,d=l(d),b=this.timeline[b+
1],e=this.index.timescale||1;return d!==b.ts&&a>=c&&a<=d&&d-a<e?b.ts:-1};a.prototype.checkRange=function(a){var b=this.timeline[this.timeline.length-1];if(!b)return!0;0>b.d&&(b={ts:b.ts,d:0,r:b.r});return a<=l(b)};a.prototype.getSegmentIndex=function(a){for(var b=this.timeline,d=0,c=b.length;d<c;){var e=d+c>>>1;b[e].ts<a?d=e+1:c=e}return 0<d?d-1:d};a.prototype.getSegmentNumber=function(a,b,d){a=b-a;return 0<a?Math.floor(a/d):0};a.prototype.getSegments=function(a,b){var d=this.index.timeline,c=[],
e=d.length,g=this.getSegmentIndex(a)-1,k=d.length&&d[0].d||0;a:for(;!(++g>=e);){var f=d[g],l=f.d,h=f.ts,t=f.range,k=Math.max(k,l);if(0>l){h+k<b&&c.push(this.createSegment(h,t,void 0));break}for(var f=this.calculateRepeat(f,d[g+1]),q=this.getSegmentNumber(h,a,l),x;(x=h+q*l)<b;)if(q++<=f)c.push(this.createSegment(x,t,l));else continue a;break}return c};a.prototype.addSegment=function(a,b){var d=this.timeline,c=d.length,e=d[c-1];if(b&&a.ts===b.ts){var g=a.ts+a.d,k=g-(e.ts+e.d*e.r);if(0>=k)return!1;-1===
e.d&&((c=d[c-2])&&c.d===k?(c.r++,d.pop()):e.d=k);d.push({d:-1,ts:g,r:0});return!0}return a.ts>=l(e)?(e.d===a.d?e.r++:d.push({d:a.d,ts:a.ts,r:0}),!0):!1};return a}();h.exports=f},function(h,f,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}f=a(35);var k=a(20).BufferedRanges,g=a(3);a=a(15);var e=a.tryCatch,b=a.castToObservable;a=function(a){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var d=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.codec=b;d.updating=!1;d.readyState="opened";d.buffered=new k;return d}l(c,a);c.prototype.appendBuffer=function(a){var b=this;this._lock(function(){return b._append(a)})};
c.prototype.remove=function(a,b){var c=this;this._lock(function(){return c._remove(a,b)})};c.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};c.prototype._append=function(){};c.prototype._remove=function(){};c.prototype._abort=function(){};c.prototype._lock=function(a){var c=this;g(!this.updating,"updating");this.updating=!0;this.trigger("updatestart");e(function(){return b(a())}).subscribe(function(){return setTimeout(function(){return c._unlock("update")},
0)},function(a){return setTimeout(function(){return c._unlock("error",a)},0)})};c.prototype._unlock=function(a,b){this.updating=!1;this.trigger(a,b);this.trigger("updateend")};return c}(f);h.exports={AbstractSourceBuffer:a}},function(h,f,a){function l(a,b){var c=a.currentTime,g=a.paused,m=new e(a.buffered);return new d(c,m,a.duration,m.getGap(c),b,a.playbackRate,m.getRange(c),a.readyState,null,g)}var k=a(1).Observable,g=a(25).BehaviorSubject,e=a(20).BufferedRanges,b="canplay play progress seeking seeked loadedmetadata".split(" "),
d=function(){function a(b,c,d,e,g,k,f,l,h,z){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ts=b;this.buffered=c;this.duration=d;this.gap=e;this.name=g;this.playback=k;this.range=f;this.readyState=l;this.stalled=h;this.paused=z}a.prototype.clone=function(){return new a(this.ts,this.buffered,this.duration,this.gap,this.name,this.playback,this.range,this.readyState,this.stalled,this.paused)};return a}();h.exports={getEmptyTimings:function(){return new d(0,new e,
0,Infinity,"timeupdate",1,null,0,null,null)},getTimings:l,createTimingsSampler:function(a,d){var c=d.requiresMediaSource;return k.create(function(d){function e(b){b=l(a,b&&b.type||"timeupdate");var e=b.name,m=b.ts,k=b.gap,f=b.paused,n=b.readyState,h=b.playback,r=g.stalled,u=g.name,t=g.ts;var p=(p=b.range)?.5>=b.duration-(k+p.end):!1;var w=1<=n&&"loadedmetadata"!=e&&!r&&!p;c?(f=w&&(.5>=k||Infinity===k||1===n),m=r&&1<n&&Infinity>k&&(k>("seeking"==r.name?.5:5)||p)):(f=w&&(!f&&"timeupdate"==e&&"timeupdate"==
u&&m===t||"seeking"==e&&Infinity===k),m=r&&("seeking"!=e&&m!==t||"canplay"==e||Infinity>k&&(k>("seeking"==r.name?.5:5)||p)));b.stalled=f?{name:e,playback:h}:m?null:r;g=b;d.next(g)}var g=l(a,"init"),m=setInterval(e,c?1E3:500);b.forEach(function(b){return a.addEventListener(b,e)});d.next(g);return function(){clearInterval(m);b.forEach(function(b){return a.removeEventListener(b,e)})}}).multicast(function(){return new g({name:"init",stalled:null})}).refCount()},seekingsSampler:function(a){return a.filter(function(a){return"seeking"==
a.name&&(Infinity===a.gap||-2>a.gap)}).skip(1).startWith(!0)},getLiveGap:function(a,b){if(!b.isLive)return Infinity;var c=b.availabilityStartTime,d=b.presentationLiveGap;return Date.now()/1E3-a-(c+d+10)},toWallClockTime:function(a,b){return new Date(1E3*(a+b.availabilityStartTime))},fromWallClockTime:function(a,b){var c=a,d=b.suggestedPresentationDelay,e=b.presentationLiveGap,g=b.timeShiftBufferDepth;"number"!=typeof c&&(c=c.getTime());var m=Date.now();return Math.max(Math.min(c,m-1E3*(e+d)),m-1E3*
g)/1E3-b.availabilityStartTime}}},function(h,f,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(){return new XMLHttpRequest}function b(a){return new r(a)}f=a(1).Observable;var d=a(2).Subscriber;a=a(7);var c=a.RequestError,m=a.RequestErrorTypes,n=function w(a,b,c,d,e,m,k){g(this,w);this.status=a;this.url=b;this.responseType=c;this.sentTime=d;this.receivedTime=e;this.duration=this.receivedTime-this.sentTime;this.size=m;this.responseData=k},r=function(a){function b(c){g(this,
b);var d=l(this,a.call(this)),m={url:"",createXHR:e,headers:null,method:"GET",responseType:"json",timeout:1E4,resultSelector:null,body:null},k;for(k in c)m[k]=c[k];d.request=m;return d}k(b,a);b.prototype._subscribe=function(a){return new u(a,this.request)};return b}(f),u=function(a){function b(c,d){g(this,b);var e=l(this,a.call(this,c));e.request=d;e.sentTime=Date.now();e.receivedTime=0;e.xhr=null;e.done=!1;e.resultSelector=d.resultSelector;e.send();return e}k(b,a);b.prototype.next=function(){this.done=
!0;var a=this.resultSelector,b=this.xhr,d=this.request,e=this.destination,g=b.status,k=this.responseType,f=this.totalSize,l=this.sentTime,h=this.receivedTime,r=b.responseURL||d.url,u=void 0;if("json"==d.responseType)if("string"!=typeof b.response)u=b.response;else try{u=JSON.parse(b.responseText)}catch(N){u=null}else u=b.response;null==u?e.error(new c(this,d,m.PARSE_ERROR)):(b=new n(g,r,k,l,h,f,u),a?e.next(a(b)):e.next(b))};b.prototype.setHeaders=function(a,b){for(var c in b)a.setRequestHeader(c,
b[c])};b.prototype.setupEvents=function(a,b){a.ontimeout=function B(){B.subscriber.error(new c(this,B.request,m.TIMEOUT))};a.ontimeout.request=b;a.ontimeout.subscriber=this;a.onerror=function G(){G.subscriber.error(new c(this,G.request,m.ERROR_EVENT))};a.onerror.request=b;a.onerror.subscriber=this;a.onload=function y(a){if(4===this.readyState){var b=y.subscriber,d=y.request;b.receivedTime=Date.now();b.totalSize=a.total;var e=this.status;200<=e&&300>e?(b.next(a),b.complete()):b.error(new c(this,d,
m.ERROR_HTTP_CODE))}};a.onload.subscriber=this;a.onload.request=b};b.prototype.send=function(){var a=this.request,b=this.request,c=b.method,d=b.url,g=b.headers,m=b.body,k=b.responseType,b=b.timeout,f=(a.createXHR||e)(a);this.xhr=f;f.open(c,d,!0);f.timeout=b;f.responseType=k;"document"==k&&f.overrideMimeType("text/xml");g&&this.setHeaders(f,g);this.setupEvents(f,a);m?f.send(m):f.send()};b.prototype.unsubscribe=function(){var b=this.xhr;!this.done&&b&&4!==b.readyState&&b.abort();b.ontimeout=null;b.onerror=
null;b.onload=null;a.prototype.unsubscribe.call(this)};return b}(d);b.RequestObservable=r;b.RequestError=c;b.RequestResponse=n;b.RequestErrorTypes=m;h.exports=b},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(e,b,d){a.call(this);this.parent=e;this.outerValue=b;this.outerIndex=d;this.index=0}l(g,a);g.prototype._next=function(a){this.parent.notifyNext(this.outerValue,
a,this.outerIndex,this.index++,this)};g.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};g.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return g}(a(2).Subscriber);f.InnerSubscriber=h},function(h,f,a){var l=a(1);h=function(){function a(a,e,b){this.kind=a;this.value=e;this.exception=b;this.hasValue="N"===a}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.exception);
case "C":return a.complete&&a.complete()}};a.prototype["do"]=function(a,e,b){switch(this.kind){case "N":return a&&a(this.value);case "E":return e&&e(this.exception);case "C":return b&&b()}};a.prototype.accept=function(a,e,b){return a&&"function"===typeof a.next?this.observe(a):this["do"](a,e,b)};a.prototype.toObservable=function(){switch(this.kind){case "N":return l.Observable.of(this.value);case "E":return l.Observable["throw"](this.exception);case "C":return l.Observable.empty()}throw Error("unexpected notification kind value");
};a.createNext=function(g){return"undefined"!==typeof g?new a("N",g):this.undefinedValueNotification};a.createError=function(g){return new a("E",void 0,g)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();f.Notification=h},function(h,f){var a=function(){function a(k,g){void 0===g&&(g=a.now);this.SchedulerAction=k;this.now=g}a.prototype.schedule=function(a,g,e){void 0===g&&(g=0);return(new this.SchedulerAction(this,
a)).schedule(e,g)};a.now=Date.now?Date.now:function(){return+new Date};return a}();f.Scheduler=a},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(e,b){a.call(this);this.subject=e;this.subscriber=b;this.closed=!1}l(g,a);g.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,b=a.observers;this.subject=null;
!b||0===b.length||a.isStopped||a.closed||(a=b.indexOf(this.subscriber),-1!==a&&b.splice(a,1))}};return g}(a(4).Subscription);f.SubjectSubscription=h},function(h,f,a){h=a(1);a=a(94);h.Observable.of=a.of},function(h,f,a){h=a(1);a=a(95);h.Observable["throw"]=a._throw},function(h,f,a){h=a(1);a=a(96);h.Observable.prototype["catch"]=a._catch;h.Observable.prototype._catch=a._catch},function(h,f,a){h=a(1);a=a(43);h.Observable.prototype.concat=a.concat},function(h,f,a){h=a(1);a=a(98);h.Observable.prototype.concatAll=
a.concatAll},function(h,f,a){h=a(1);a=a(99);h.Observable.prototype.concatMap=a.concatMap},function(h,f,a){h=a(1);a=a(100);h.Observable.prototype.debounceTime=a.debounceTime},function(h,f,a){h=a(1);a=a(101);h.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(h,f,a){h=a(1);a=a(102);h.Observable.prototype["do"]=a._do;h.Observable.prototype._do=a._do},function(h,f,a){h=a(1);a=a(103);h.Observable.prototype.filter=a.filter},function(h,f,a){h=a(1);a=a(104);h.Observable.prototype["finally"]=
a._finally;h.Observable.prototype._finally=a._finally},function(h,f,a){h=a(1);a=a(105);h.Observable.prototype.ignoreElements=a.ignoreElements},function(h,f,a){h=a(1);a=a(106);h.Observable.prototype.map=a.map},function(h,f,a){h=a(1);a=a(107);h.Observable.prototype.mapTo=a.mapTo},function(h,f,a){h=a(1);a=a(44);h.Observable.prototype.mergeMap=a.mergeMap;h.Observable.prototype.flatMap=a.mergeMap},function(h,f,a){h=a(1);a=a(28);h.Observable.prototype.multicast=a.multicast},function(h,f,a){h=a(1);a=a(110);
h.Observable.prototype.publish=a.publish},function(h,f,a){h=a(1);a=a(111);h.Observable.prototype.scan=a.scan},function(h,f,a){h=a(1);a=a(112);h.Observable.prototype.share=a.share},function(h,f,a){h=a(1);a=a(113);h.Observable.prototype.skip=a.skip},function(h,f,a){h=a(1);a=a(114);h.Observable.prototype.startWith=a.startWith},function(h,f,a){h=a(1);a=a(115);h.Observable.prototype.switchMap=a.switchMap},function(h,f,a){h=a(1);a=a(116);h.Observable.prototype.take=a.take},function(h,f,a){h=a(1);a=a(117);
h.Observable.prototype.takeUntil=a.takeUntil},function(h,f,a){h=a(1);a=a(118);h.Observable.prototype.timeout=a.timeout},function(h,f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};h=a(1);var k=a(26),g=a(5);a=function(a){function b(b,c){a.call(this);this.arrayLike=b;this.scheduler=c;c||1!==b.length||(this._isScalar=!0,this.value=b[0])}l(b,a);b.create=function(a,c){var d=a.length;
return 0===d?new g.EmptyObservable:1===d?new k.ScalarObservable(a[0],c):new b(a,c)};b.dispatch=function(a){var b=a.arrayLike,d=a.index,e=a.subscriber;e.closed||(d>=a.length?e.complete():(e.next(b[d]),a.index=d+1,this.schedule(a)))};b.prototype._subscribe=function(a){var c=this.arrayLike,d=this.scheduler,e=c.length;if(d)return d.schedule(b.dispatch,0,{arrayLike:c,index:0,length:e,subscriber:a});for(d=0;d<e&&!a.closed;d++)a.next(c[d]);a.complete()};return b}(h.Observable);f.ArrayLikeObservable=a},function(h,
f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};h=a(8);var k=a(1),g=a(2),e=a(4);a=function(a){function c(b,c){a.call(this);this.source=b;this.subjectFactory=c;this._refCount=0}l(c,a);c.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};c.prototype.getSubject=function(){var a=this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};
c.prototype.connect=function(){var a=this._connection;a||(a=this._connection=new e.Subscription,a.add(this.source.subscribe(new b(this.getSubject(),this))),a.closed?(this._connection=null,a=e.Subscription.EMPTY):this._connection=a);return a};c.prototype.refCount=function(){return this.lift(new d(this))};return c}(k.Observable);f.ConnectableObservable=a;f.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subscribe:{value:a.prototype._subscribe},getSubject:{value:a.prototype.getSubject},
connect:{value:a.prototype.connect},refCount:{value:a.prototype.refCount}};var b=function(a){function b(b,c){a.call(this,b);this.connectable=c}l(b,a);b.prototype._error=function(b){this._unsubscribe();a.prototype._error.call(this,b)};b.prototype._complete=function(){this._unsubscribe();a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0;a._subject=null;a._connection=null;b&&b.unsubscribe()}};return b}(h.SubjectSubscriber),
d=function(){function a(a){this.connectable=a}a.prototype.call=function(a,b){var d=this.connectable;d._refCount++;var e=new c(a,d),g=b._subscribe(e);e.closed||(e.connection=d.connect());return g};return a}(),c=function(a){function b(b,c){a.call(this,b);this.connectable=c}l(b,a);b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;0>=b?this.connection=null:(a._refCount=b-1,1<b?this.connection=null:(b=this.connection,a=a._connection,this.connection=
null,!a||b&&a!==b||a.unsubscribe()))}else this.connection=null};return b}(g.Subscriber)},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(e,b){a.call(this);this.error=e;this.scheduler=b}l(g,a);g.create=function(a,b){return new g(a,b)};g.dispatch=function(a){a.subscriber.error(a.error)};g.prototype._subscribe=function(a){var b=this.error,
d=this.scheduler;if(d)return d.schedule(g.dispatch,0,{error:b,subscriber:a});a.error(b)};return g}(a(1).Observable);f.ErrorObservable=h},function(h,f,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},k=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)},g=a(16),e=a(50),b=a(41),d=a(92),c=a(11),m=a(87),n=a(29),r=a(1),u=a(109),p=a(30);h=function(a){function f(b,c){a.call(this,null);this.ish=b;this.scheduler=c}k(f,a);f.create=function(a,k){if(null!=a){if("function"===typeof a[p.$$observable])return a instanceof r.Observable&&!k?a:new f(a,k);if(g.isArray(a))return new c.ArrayObservable(a,k);if(e.isPromise(a))return new b.PromiseObservable(a,k);if("function"===typeof a[n.$$iterator]||"string"===typeof a)return new d.IteratorObservable(a,
k);if(a&&"number"===typeof a.length)return new m.ArrayLikeObservable(a,k)}throw new TypeError((null!==a&&("undefined"===typeof a?"undefined":l(a))||a)+" is not observable");};f.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[p.$$observable]().subscribe(a):b[p.$$observable]().subscribe(new u.ObserveOnSubscriber(a,c,0))};return f}(r.Observable);f.FromObservable=h},function(h,f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},k=a(49);h=a(1);var g=a(22);a=function(a){function b(b,c){void 0===b&&(b=0);void 0===c&&(c=g.async);a.call(this);this.period=b;this.scheduler=c;if(!k.isNumeric(b)||0>b)this.period=0;c&&"function"===typeof c.schedule||(this.scheduler=g.async)}l(b,a);b.create=function(a,c){void 0===a&&(a=0);void 0===c&&(c=g.async);return new b(a,c)};b.dispatch=function(a){var b=a.subscriber,d=a.period;b.next(a.index);b.closed||(a.index+=
1,this.schedule(a,d))};b.prototype._subscribe=function(a){var c=this.period;a.add(this.scheduler.schedule(b.dispatch,c,{index:0,subscriber:a,period:c}))};return b}(h.Observable);f.IntervalObservable=a},function(h,f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(6);h=a(1);var g=a(29);a=function(a){function c(c,d){a.call(this);this.scheduler=d;if(null==c)throw Error("iterator cannot be null.");
var m;if((m=c[g.$$iterator])||"string"!==typeof c)if(m||void 0===c.length){if(!m)throw new TypeError("object is not iterable");m=c[g.$$iterator]()}else m=new b(c);else m=new e(c);this.iterator=m}l(c,a);c.create=function(a,b){return new c(a,b)};c.dispatch=function(a){var b=a.index,c=a.iterator,d=a.subscriber;a.hasError?d.error(a.error):(c=c.next(),c.done?d.complete():(d.next(c.value),a.index=b+1,d.closed||this.schedule(a)))};c.prototype._subscribe=function(a){var b=this.iterator,d=this.scheduler;if(d)return d.schedule(c.dispatch,
0,{index:0,iterator:b,subscriber:a});do{d=b.next();if(d.done){a.complete();break}else a.next(d.value);if(a.closed)break}while(1)};return c}(h.Observable);f.IteratorObservable=a;var e=function(){function a(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);this.str=a;this.idx=b;this.len=c}a.prototype[g.$$iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),b=function(){function a(a,b,c){void 0===
b&&(b=0);if(void 0===c)if(c=+a.length,isNaN(c))c=0;else if(0!==c&&"number"===typeof c&&k.root.isFinite(c)){var e=+c;e=0===e?e:isNaN(e)?e:0>e?-1:1;c=e*Math.floor(Math.abs(c));c=0>=c?0:c>d?d:c}this.arr=a;this.idx=b;this.len=c}a.prototype[g.$$iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),d=Math.pow(2,53)-1},function(h,f,a){var l=function(a,e){function b(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&
(a[d]=e[d]);a.prototype=null===e?Object.create(e):(b.prototype=e.prototype,new b)};h=a(1);var k=a(51);a=function(a){function e(){a.call(this)}l(e,a);e.create=function(){return new e};e.prototype._subscribe=function(a){k.noop()};return e}(h.Observable);f.NeverObservable=a},function(h,f,a){h=a(11);f.of=h.ArrayObservable.of},function(h,f,a){h=a(89);f._throw=h.ErrorObservable.create},function(h,f,a){var l=function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=
null===d?Object.create(d):(b.prototype=d.prototype,new b)};h=a(10);var k=a(13);f._catch=function(a){a=new g(a);var b=this.lift(a);return a.caught=b};var g=function(){function a(a){this.selector=a}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.selector,this.caught))};return a}(),e=function(a){function b(b,d,e){a.call(this,b);this.selector=d;this.caught=e}l(b,a);b.prototype.error=function(a){if(!this.isStopped){var b=void 0;try{b=this.selector(a,this.caught)}catch(n){this.destination.error(n);
return}this.unsubscribe();this.destination.remove(this);k.subscribeToResult(this,b)}};return b}(h.OuterSubscriber)},function(h,f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(11),g=a(16);h=a(10);var e=a(13),b={};f.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&g.isArray(a[0])&&
(a=a[0]);a.unshift(this);return this.lift.call(new k.ArrayObservable(a),new d(b))};var d=function(){function a(a){this.project=a}a.prototype.call=function(a,b){return b._subscribe(new c(a,this.project))};return a}();f.CombineLatestOperator=d;var c=function(a){function c(b,c){a.call(this,b);this.project=c;this.active=0;this.values=[];this.observables=[]}l(c,a);c.prototype._next=function(a){this.values.push(b);this.observables.push(a)};c.prototype._complete=function(){var a=this.observables,b=a.length;
if(0===b)this.destination.complete();else{this.toRespond=this.active=b;for(var c=0;c<b;c++){var d=a[c];this.add(e.subscribeToResult(this,d,d,c))}}};c.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};c.prototype.notifyNext=function(a,c,d,e,g){a=this.values;e=a[d];e=this.toRespond?e===b?--this.toRespond:this.toRespond:0;a[d]=c;0===e&&(this.project?this._tryProject(a):this.destination.next(a.slice()))};c.prototype._tryProject=function(a){try{var b=this.project.apply(this,
a)}catch(p){this.destination.error(p);return}this.destination.next(b)};return c}(h.OuterSubscriber);f.CombineLatestSubscriber=c},function(h,f,a){var l=a(27);f.concatAll=function(){return this.lift(new l.MergeAllOperator(1))}},function(h,f,a){var l=a(44);f.concatMap=function(a,g){return this.lift(new l.MergeMapOperator(a,g,1))}},function(h,f,a){function l(a){a.debouncedNext()}var k=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};h=a(2);var g=a(22);f.debounceTime=function(a,b){void 0===b&&(b=g.async);return this.lift(new e(a,b))};var e=function(){function a(a,b){this.dueTime=a;this.scheduler=b}a.prototype.call=function(a,d){return d._subscribe(new b(a,this.dueTime,this.scheduler))};return a}(),b=function(a){function b(b,c,d){a.call(this,b);this.dueTime=c;this.scheduler=d;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}k(b,a);b.prototype._next=function(a){this.clearDebounce();
this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(h.Subscriber)},
function(h,f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};h=a(2);var k=a(33),g=a(23);f.distinctUntilChanged=function(a,b){return this.lift(new e(a,b))};var e=function(){function a(a,b){this.compare=a;this.keySelector=b}a.prototype.call=function(a,d){return d._subscribe(new b(a,this.compare,this.keySelector))};return a}(),b=function(a){function b(b,c,d){a.call(this,b);this.keySelector=
d;this.hasKey=!1;"function"===typeof c&&(this.compare=c)}l(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=k.tryCatch(this.keySelector)(a),b===g.errorObject))return this.destination.error(g.errorObject.e);var c=!1;if(this.hasKey){if(c=k.tryCatch(this.compare)(this.key,b),c===g.errorObject)return this.destination.error(g.errorObject.e)}else this.hasKey=!0;!1===!!c&&(this.key=b,this.destination.next(a))};return b}(h.Subscriber)},function(h,
f,a){var l=function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(2);f._do=function(a,d,c){return this.lift(new g(a,d,c))};var g=function(){function a(a,b,e){this.nextOrObserver=a;this.error=b;this.complete=e}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.nextOrObserver,this.error,this.complete))};return a}(),e=function(a){function b(b,d,e,g){a.call(this,b);b=new k.Subscriber(d,
e,g);b.syncErrorThrowable=!0;this.add(b);this.safeSubscriber=b}l(b,a);b.prototype._next=function(a){var b=this.safeSubscriber;b.next(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.next(a)};b.prototype._error=function(a){var b=this.safeSubscriber;b.error(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)};b.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):
this.destination.complete()};return b}(k.Subscriber)},function(h,f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};h=a(2);f.filter=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(a,d){this.predicate=a;this.thisArg=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.predicate,this.thisArg))};return a}(),g=function(a){function b(b,c,e){a.call(this,
b);this.predicate=c;this.thisArg=e;this.count=0;this.predicate=c}l(b,a);b.prototype._next=function(a){try{var b=this.predicate.call(this.thisArg,a,this.count++)}catch(m){this.destination.error(m);return}b&&this.destination.next(a)};return b}(h.Subscriber)},function(h,f,a){var l=function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};h=a(2);var k=a(4);f._finally=function(a){return this.lift(new g(a))};
var g=function(){function a(a){this.callback=a}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.callback))};return a}(),e=function(a){function b(b,d){a.call(this,b);this.add(new k.Subscription(d))}l(b,a);return b}(h.Subscriber)},function(h,f,a){var l=function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};h=a(2);var k=a(51);f.ignoreElements=function(){return this.lift(new g)};
var g=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new e(a))};return a}(),e=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype._next=function(a){k.noop()};return b}(h.Subscriber)},function(h,f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};h=a(2);f.map=function(a,b){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
return this.lift(new k(a,b))};var k=function(){function a(a,d){this.project=a;this.thisArg=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.project,this.thisArg))};return a}();f.MapOperator=k;var g=function(a){function b(b,c,e){a.call(this,b);this.project=c;this.count=0;this.thisArg=e||this}l(b,a);b.prototype._next=function(a){try{var b=this.project.call(this.thisArg,a,this.count++)}catch(m){this.destination.error(m);return}this.destination.next(b)};return b}(h.Subscriber)},function(h,
f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};h=a(2);f.mapTo=function(a){return this.lift(new k(a))};var k=function(){function a(a){this.value=a}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.value))};return a}(),g=function(a){function b(b,c){a.call(this,b);this.value=c}l(b,a);b.prototype._next=function(a){this.destination.next(this.value)};return b}(h.Subscriber)},
function(h,f,a){function l(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var d=Number.POSITIVE_INFINITY,c=null,f=a[a.length-1];e.isScheduler(f)?(c=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(d=a.pop())):"number"===typeof f&&(d=a.pop());return null===c&&1===a.length?a[0]:(new k.ArrayObservable(a,c)).lift(new g.MergeAllOperator(d))}var k=a(11),g=a(27),e=a(17);f.merge=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return this.lift.call(l.apply(void 0,
[this].concat(a)))};f.mergeStatic=l},function(h,f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};h=a(2);var k=a(59);f.observeOn=function(a,b){void 0===b&&(b=0);return this.lift(new g(a,b))};var g=function(){function a(a,b){void 0===b&&(b=0);this.scheduler=a;this.delay=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.scheduler,this.delay))};return a}();f.ObserveOnOperator=
g;var e=function(a){function c(b,c,d){void 0===d&&(d=0);a.call(this,b);this.scheduler=c;this.delay=d}l(c,a);c.dispatch=function(a){a.notification.observe(a.destination)};c.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(c.dispatch,this.delay,new b(a,this.destination)))};c.prototype._next=function(a){this.scheduleMessage(k.Notification.createNext(a))};c.prototype._error=function(a){this.scheduleMessage(k.Notification.createError(a))};c.prototype._complete=function(){this.scheduleMessage(k.Notification.createComplete())};
return c}(h.Subscriber);f.ObserveOnSubscriber=e;var b=function(){return function(a,b){this.notification=a;this.destination=b}}();f.ObserveOnMessage=b},function(h,f,a){var l=a(8),k=a(28);f.publish=function(a){return a?k.multicast.call(this,function(){return new l.Subject},a):k.multicast.call(this,new l.Subject)}},function(h,f,a){var l=function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};
h=a(2);f.scan=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(a,d){this.accumulator=a;this.seed=d}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.accumulator,this.seed))};return a}(),g=function(a){function b(b,c,e){a.call(this,b);this.accumulator=c;this.index=0;this.accumulatorSet=!1;this.seed=e;this.accumulatorSet="undefined"!==typeof e}l(b,a);Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;
this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(this.accumulatorSet)return this._tryNext(a);this.seed=a;this.destination.next(a)};b.prototype._tryNext=function(a){var b=this.index++;try{var d=this.accumulator(this.seed,a,b)}catch(n){this.destination.error(n)}this.seed=d;this.destination.next(d)};return b}(h.Subscriber)},function(h,f,a){function l(){return new g.Subject}var k=a(28),g=a(8);f.share=function(){return k.multicast.call(this,l).refCount()}},function(h,f,a){var l=
function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};h=a(2);f.skip=function(a){return this.lift(new k(a))};var k=function(){function a(a){this.total=a}a.prototype.call=function(a,d){return d._subscribe(new g(a,this.total))};return a}(),g=function(a){function b(b,c){a.call(this,b);this.total=c;this.count=0}l(b,a);b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};
return b}(h.Subscriber)},function(h,f,a){var l=a(11),k=a(26),g=a(5),e=a(43),b=a(17);f.startWith=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];c=a[a.length-1];b.isScheduler(c)?a.pop():c=null;var f=a.length;return 1===f?e.concatStatic(new k.ScalarObservable(a[0],c),this):1<f?e.concatStatic(new l.ArrayObservable(a,c),this):e.concatStatic(new g.EmptyObservable(c),this)}},function(h,f,a){var l=function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=
d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};h=a(10);var k=a(13);f.switchMap=function(a,d){return this.lift(new g(a,d))};var g=function(){function a(a,b){this.project=a;this.resultSelector=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.project,this.resultSelector))};return a}(),e=function(a){function b(b,d,e){a.call(this,b);this.project=d;this.resultSelector=e;this.index=0}l(b,a);b.prototype._next=function(a){var b=this.index++;try{var c=this.project(a,
b)}catch(r){this.destination.error(r);return}this._innerSub(c,a,b)};b.prototype._innerSub=function(a,b,d){var c=this.innerSubscription;c&&c.unsubscribe();this.add(this.innerSubscription=k.subscribeToResult(this,a,b,d))};b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.closed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};
b.prototype.notifyNext=function(a,b,d,e,g){this.resultSelector?this._tryNotifyNext(a,b,d,e):this.destination.next(b)};b.prototype._tryNotifyNext=function(a,b,d,e){try{var c=this.resultSelector(a,b,d,e)}catch(p){this.destination.error(p);return}this.destination.next(c)};return b}(h.OuterSubscriber)},function(h,f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};h=a(2);var k=a(123),
g=a(5);f.take=function(a){return 0===a?new g.EmptyObservable:this.lift(new e(a))};var e=function(){function a(a){this.total=a;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a,d){return d._subscribe(new b(a,this.total))};return a}(),b=function(a){function b(b,c){a.call(this,b);this.total=c;this.count=0}l(b,a);b.prototype._next=function(a){var b=this.total,c=++this.count;c<=b&&(this.destination.next(a),c===b&&(this.destination.complete(),this.unsubscribe()))};return b}(h.Subscriber)},
function(h,f,a){var l=function(a,d){function b(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};h=a(10);var k=a(13);f.takeUntil=function(a){return this.lift(new g(a))};var g=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.notifier))};return a}(),e=function(a){function b(b,d){a.call(this,b);this.notifier=d;this.add(k.subscribeToResult(this,d))}l(b,a);b.prototype.notifyNext=
function(a,b,d,e,g){this.complete()};b.prototype.notifyComplete=function(){};return b}(h.OuterSubscriber)},function(h,f,a){var l=function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(22),g=a(48);h=a(2);var e=a(125);f.timeout=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=k.async);var c=g.isDate(a);a=c?+a-e.now():Math.abs(a);return this.lift(new b(a,c,d,e))};var b=function(){function a(a,
b,c,d){this.waitFor=a;this.absoluteTimeout=b;this.errorToSend=c;this.scheduler=d}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))};return a}(),d=function(a){function b(b,c,d,e,g){a.call(this,b);this.absoluteTimeout=c;this.waitFor=d;this.errorToSend=e;this.scheduler=g;this._previousIndex=this.index=0;this._hasCompleted=!1;this.scheduleTimeout()}l(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.notifyTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||
this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.notifyTimeout=function(){this.error(this.errorToSend||new e.TimeoutError)};return b}(h.Subscriber)},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(e,
b){a.call(this)}l(g,a);g.prototype.schedule=function(a,b){return this};return g}(a(4).Subscription);f.Action=h},function(h,f,a){var l=function(a,e){function b(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(b.prototype=e.prototype,new b)},k=a(124);h=function(a){function e(b,d){a.call(this,b,d);this.scheduler=b;this.work=d}l(e,a);e.prototype.requestAsyncId=function(b,d,c){void 0===c&&(c=0);if(null!==c&&0<c)return a.prototype.requestAsyncId.call(this,
b,d,c);b.actions.push(this);return b.scheduled||(b.scheduled=k.Immediate.setImmediate(b.flush.bind(b,null)))};e.prototype.recycleAsyncId=function(b,d,c){void 0===c&&(c=0);if(null!==c&&0<c||null===c&&0<this.delay)return a.prototype.recycleAsyncId.call(this,b,d,c);0===b.actions.length&&(k.Immediate.clearImmediate(d),b.scheduled=void 0)};return e}(a(45).AsyncAction);f.AsapAction=h},function(h,f,a){var l=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=
null===g?Object.create(g):(e.prototype=g.prototype,new e)};h=function(a){function g(){a.apply(this,arguments)}l(g,a);g.prototype.flush=function(a){this.active=!0;this.scheduled=void 0;var b=this.actions,d,c=-1,e=b.length;a=a||b.shift();do if(d=a.execute(a.state,a.delay))break;while(++c<e&&(a=b.shift()));this.active=!1;if(d){for(;++c<e&&(a=b.shift());)a.unsubscribe();throw d;}};return g}(a(46).AsyncScheduler);f.AsapScheduler=h},function(h,f,a){h=a(120);a=a(121);f.asap=new a.AsapScheduler(h.AsapAction)},
function(h,f){var a=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)},l=function(f){function g(){var a=f.call(this,"argument out of range");this.name=a.name="ArgumentOutOfRangeError";this.stack=a.stack;this.message=a.message}a(g,f);return g}(Error);f.ArgumentOutOfRangeError=l},function(h,f,a){h=a(6);a=function(){function a(a){this.root=a;a.setImmediate&&"function"===typeof a.setImmediate?
(this.setImmediate=a.setImmediate.bind(a),this.clearImmediate=a.clearImmediate.bind(a)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():
this.setImmediate=this.createSetTimeoutSetImmediate(),a=function e(a){delete e.instance.tasksByHandle[a]},a.instance=this,this.clearImmediate=a)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)};a.prototype.canUseMessageChannel=function(){return!!this.root.MessageChannel};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return!!(a&&"onreadystatechange"in
a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var g=!0,e=a.onmessage;a.onmessage=function(){g=!1};a.postMessage("","*");a.onmessage=e;return g}return!1};a.prototype.partiallyApplied=function(a){for(var g=[],e=1;e<arguments.length;e++)g[e-1]=arguments[e];e=function d(){var a=d.handler,e=d.args;"function"===typeof a?a.apply(void 0,e):(new Function(""+a))()};e.handler=a;e.args=g;return e};a.prototype.addFromSetImmediateArguments=
function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function e(){var a=e.instance,d=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,d));return d};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,g="setImmediate$"+a.Math.random()+"$",e=function d(c){var e=d.instance;c.source===a&&
"string"===typeof c.data&&0===c.data.indexOf(g)&&e.runIfPresent(+c.data.slice(g.length))};e.instance=this;a.addEventListener("message",e,!1);e=function c(){var a=c,e=a.messagePrefix,a=a.instance,g=a.addFromSetImmediateArguments(arguments);a.root.postMessage(e+g,"*");return g};e.instance=this;e.messagePrefix=g;return e};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var g=this.tasksByHandle[a];if(g){this.currentlyRunningATask=
!0;try{g()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,g=new this.root.MessageChannel;g.port1.onmessage=function(b){a.runIfPresent(b.data)};var e=function d(){var a=d,e=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);e.port2.postMessage(a);return a};e.channel=g;e.instance=this;return e};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function e(){var a=e.instance,d=a.root.document,
c=d.documentElement,f=a.addFromSetImmediateArguments(arguments),k=d.createElement("script");k.onreadystatechange=function(){a.runIfPresent(f);k.onreadystatechange=null;c.removeChild(k);k=null};c.appendChild(k);return f};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function e(){var a=e.instance,d=a.addFromSetImmediateArguments(arguments);a.root.setTimeout(a.partiallyApplied(a.runIfPresent,d),0);return d};a.instance=this;return a};return a}();f.ImmediateDefinition=
a;f.Immediate=new a(h.root)},function(h,f){var a=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)},l=function(f){function g(){var a=f.call(this,"Timeout has occurred");this.name=a.name="TimeoutError";this.stack=a.stack;this.message=a.message}a(g,f);return g}(Error);f.TimeoutError=l},function(h,f){var a=function(a,g){function e(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&
(a[b]=g[b]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)},l=function(f){function g(a){f.call(this);this.errors=a;a=Error.call(this,a?a.length+" errors occurred during unsubscription:\n  "+a.map(function(a,d){return d+1+") "+a.toString()}).join("\n  "):"");this.name=a.name="UnsubscriptionError";this.stack=a.stack;this.message=a.message}a(g,f);return g}(Error);f.UnsubscriptionError=l},function(h,f){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};f.isObject=function(f){return null!=f&&"object"===("undefined"===typeof f?"undefined":a(f))}},function(h,f,a){var l=a(2),k=a(31),g=a(38);f.toSubscriber=function(a,b,d){if(a){if(a instanceof l.Subscriber)return a;if(a[k.$$rxSubscriber])return a[k.$$rxSubscriber]()}return a||b||d?new l.Subscriber(a,b,d):new l.Subscriber(g.empty)}},function(h,f){function a(a){return function(f,g){return null==
f?g:a*g+(1-a)*f}}h.exports=function(f,k){return f.map(function(a){return a.value.response}).filter(function(a){return!a||2E3<a.size}).map(function(a){return a?a.size/a.duration*8E3:0}).scan(a(k.alpha))}},function(h,f,a){function l(a,b){for(var c=0;c<a.length;c++)if(!0===b(a[c],c,a))return a[c];return null}function k(a,b){return"number"==typeof a&&0<a?a:b}function g(a,b){for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=a.length-1;0<=d;d--)if(a[d]/b<=1-c)return a[d];return a[0]}
function e(a,b){var c=l(a,function(a){return a.width>=b});return c?c.bitrate:Infinity}function b(a,b){var c=u(a.map(function(a){return a.lang}),b);return 0<=c?a[c]:null}function d(a,b){return a.filter(function(a){return a.type===b})}var c=a(4).Subscription,m=a(25).BehaviorSubject,n=a(19).combineLatest,r=a(15).only,u=a(21).findBetterMatchIndex,p=a(129),w={defaultLanguage:"fra",defaultSubtitle:"",defaultBufferSize:30,defaultBufferThreshold:.3,initVideoBitrate:0,initAudioBitrate:0,maxVideoBitrate:Infinity,
maxAudioBitrate:Infinity};h.exports=function(a,f){function h(a){return J.distinctUntilChanged().map(function(c){return b(a,c)||a[0]})}function u(a){return L.distinctUntilChanged().map(function(c){return b(a,c)})}var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Object.keys(q).forEach(function(a){return void 0===q[a]&&delete q[a]});var t=Object.assign({},w,q),y=t.defaultSubtitle,v=t.defaultBufferSize,E=t.defaultBufferThreshold,A=t.initVideoBitrate,I=t.initAudioBitrate,F=t.maxVideoBitrate,
N=t.maxAudioBitrate,P=f.videoWidth,D=f.inBackground,J=new m(t.defaultLanguage),L=new m(y),H={audio:new m(I),video:new m(A)},t=[p(d(a,"audio"),{alpha:.6}).multicast(H.audio),p(d(a,"video"),{alpha:.6}).multicast(H.video)],C=new c;t.forEach(function(a){return C.add(a.connect())});var K={audio:new m(Infinity),video:new m(Infinity)},M={audio:new m(N),video:new m(F)},Q={audio:new m(v),video:new m(v),text:new m(v)};return{setLanguage:function(a){J.next(a)},setSubtitle:function(a){L.next(a)},getLanguage:function(){return J.getValue()},
getSubtitle:function(){return L.getValue()},getAverageBitrates:function(){return H},getAudioMaxBitrate:function(){return M.audio.getValue()},getVideoMaxBitrate:function(){return M.video.getValue()},getAudioBufferSize:function(){return Q.audio.getValue()},getVideoBufferSize:function(){return Q.video.getValue()},setAudioBitrate:function(a){K.audio.next(k(a,Infinity))},setVideoBitrate:function(a){K.video.next(k(a,Infinity))},setAudioMaxBitrate:function(a){M.audio.next(k(a,Infinity))},setVideoMaxBitrate:function(a){M.video.next(k(a,
Infinity))},setAudioBufferSize:function(a){Q.audio.next(k(a,v))},setVideoBufferSize:function(a){Q.video.next(k(a,v))},getBufferAdapters:function(a){var b=a.type,c=a.bitrates,d=a.representations;a=d[0];var f=void 0;if(1<d.length){a=K[b];var f=M[b],k=H[b].map(function(a,b){return g(c,a,0===b?0:E)}).distinctUntilChanged().debounceTime(2E3).startWith(g(c,H[b].getValue(),0));"video"==b&&(f=n(f,P,D,function(a,b,g){if(g)return c[0];b=e(d,b);return b<a?b:a}));f=n(a,f,k,function(a,b,e){var f=void 0,f=Infinity>
a?a:Infinity>b?Math.min(b,e):e;return l(d,function(a){return a.bitrate===g(c,f)})}).distinctUntilChanged(function(a,b){return a.id===b.id})}else f=r(a);return{representations:f,bufferSizes:Q[b]||new m(v)}},getAdaptationsChoice:function(a,b){return"audio"==a?h(b):"text"==a?u(b):r(b[0])},unsubscribe:function(){C&&(C.unsubscribe(),C=null)}}}},function(h,f,a){var l=a(9),k=a(132).BufferingQueue,g=a(20).BufferedRanges,e=a(1).Observable,b=a(8).Subject,d=a(19).combineLatest,c=a(12).merge,m=a(5).EmptyObservable.create,
n=a(90).FromObservable.create,r=a(42).TimerObservable.create,u=a(156).SimpleSet,p=a(53).IndexHandler;f=a(7);var w=f.MediaError,t=f.ErrorTypes,q=f.ErrorCodes;h.exports={Buffer:function(a){function f(a,b){for(var c=a.ts,d=a.buffered,e=d.getRange(c),d=d.getOuterRanges(c),g=[],f=0;f<d.length;f++){var k=d[f];c-b<k.end?g.push(k):c+b>k.start&&g.push(k)}e&&(l.debug("buffer: gc removing part of inner range",g),c-b>e.start&&g.push({start:e.start,end:c-b}),c+b<e.end&&g.push({start:c+b,end:e.end}));return g}
function h(){l.warn("buffer: running garbage collector");return N.take(1).mergeMap(function(a){var b=f(a,240);0===b.length&&(b=f(a,30));l.debug("buffer: gc cleaning",b);return n(b.map(function(a){return M.removeBuffer(a)})).concatAll()})}function x(a){var b=a.parsed.segmentData;return M.appendBuffer(b)["catch"](function(a){if("QuotaExceededError"!=a.name)throw new w("BUFFER_APPEND_ERROR",a,!1);return h().mergeMap(function(){return M.appendBuffer(b)})["catch"](function(a){throw new w("BUFFER_FULL_ERROR",
a,!0);})})}function y(a){function b(a){if(k.test(a.getId()))return!1;if(a.isInitSegment()||0>a.getTime())return!0;var b=f.scale(a.getTime()),c=f.scale(a.getDuration());return(b=K.hasRange(b,c))?1.5*b.bitrate<a.getRepresentation().bitrate:!0}l.info("bitrate",v,a.bitrate);var f=new p(A,a),k=new u,h=d(N,C).mergeMap(function(c,d){var e=c[0],h=c[1],n=new g(E.buffered);P&&!K.equals(n)&&(l.debug("intersect new buffer",v),K.intersect(n));if(e.stalled){var u=f.checkDiscontinuity(e.ts);u&&D.next({type:"index-discontinuity",
value:u})}u=void 0;try{var A=f,r=null;0===d&&(l.debug("add init segment",v),r=A.getInitSegment());if(0===e.readyState)u=r?[r]:[];else{var p=e.ts,R=Math.max(0,Math.min(h,e.liveGap,(e.duration||Infinity)-p)),e=void 0,w=n.getGap(p),e=w>J&&Infinity>w?Math.min(w,L):0,C=K.getRange(p);if(C&&C.bitrate===a.bitrate){var H=Math.floor(C.end-p);H>e&&(e=H)}var I=A.getSegments(p,e,R);r&&I.unshift(r);u=I}u=u.filter(b)}catch(X){if(X.type===t.INDEX_ERROR&&X.code===q.OUT_OF_INDEX_ERROR)return D.next({type:"out-of-index",
value:X}),m();throw X;}for(n=0;n<u.length;n++)k.add(u[n].getId());return u}).concatMap(function(a){return I({segment:a})}).concatMap(x,function(b){var c=b.parsed;k.remove(b.segment.getId());var d=c.timescale;d&&f.setTimescale(d);d=c.nextSegments;c=c.currentSegment;d=d?f.insertNewSegments(d,c):[];c&&K.insert(a.bitrate,f.scale(c.ts),f.scale(c.ts+c.d));return{type:"pipeline",value:Object.assign({bufferType:v,addedSegments:d},b)}});return c(h,D)["catch"](function(b){if(!A.isLive||b.type!=t.NETWORK_ERROR||
!b.isHttpError(412))throw b;return e.of({type:"precondition-failed",value:b}).concat(r(2E3)).concat(y(a))}).startWith({type:"buffer",value:{bufferType:v,adaptation:A,representation:a}})}var v=a.bufferType,E=a.sourceBuffer,A=a.adaptation,I=a.pipeline,F=a.adapters,N=a.timings;a=a.seekings;var P="audio"==v||"video"==v,D=new b,J="video"==v?4:1,L="video"==v?6:1,H=F.representations,C=F.bufferSizes,K=new g,M=new k(E);return d(H,a,function(a){return a}).switchMap(y)["finally"](function(){return M.dispose()})},
EmptyBuffer:function(a){return e.of({type:"buffer",value:{bufferType:a,adaptation:null,representation:null}})}}},function(h,f,a){var l=a(8).Subject;f=function(){function a(g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.buffer=g;this.queue=[];this.flushing=null;this._onUpdate=this.onUpdate.bind(this);this._onError=this.onError.bind(this);this._flush=this.flush.bind(this);this.buffer.addEventListener("update",this._onUpdate);this.buffer.addEventListener("error",
this._onError);this.buffer.addEventListener("updateend",this._flush)}a.prototype.dispose=function(){this.buffer.removeEventListener("update",this._onUpdate);this.buffer.removeEventListener("error",this._onError);this.buffer.removeEventListener("updateend",this._flush);this.buffer=null;this.queue.length=0;this.flushing=null};a.prototype.onUpdate=function(a){this.flushing&&(this.flushing.next(a),this.flushing.complete(),this.flushing=null)};a.prototype.onError=function(a){this.flushing&&(this.flushing.error(a),
this.flushing=null)};a.prototype.queueAction=function(a,e){var b=new l;1===this.queue.unshift({type:a,args:e,subj:b})&&this.flush();return b};a.prototype.appendBuffer=function(a){return this.queueAction("append",a)};a.prototype.removeBuffer=function(a){return this.queueAction("remove",{start:a.start,end:a.end})};a.prototype.appendStream=function(a){return this.queueAction("stream",a)};a.prototype.flush=function(){if(!this.flushing&&0!==this.queue.length&&!this.buffer.updating){var a=this.queue.pop(),
e=a.type,b=a.args;this.flushing=a.subj;try{switch(e){case "append":this.buffer.appendBuffer(b);break;case "stream":this.buffer.appendStream(b);break;case "remove":this.buffer.remove(b.start,b.end)}}catch(d){this.onError(d)}}};return a}();h.exports={BufferingQueue:f}},function(h,f){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cache={}}a.prototype.add=function(a,g){var e=a.segment;e.isInitSegment()&&(this.cache[e.getId()]=g)};a.prototype.get=
function(a){a=a.segment;return a.isInitSegment()&&(a=this.cache[a.getId()],null!=a)?a:null};return a}();h.exports={InitializationSegmentCache:a}},function(h,f,a){var l=a(12).merge,k=a(91).IntervalObservable.create;f=a(14);var g=f.visibilityChange,e=f.videoSizeChange,b=window.devicePixelRatio||1;h.exports=function(a){var c=g().filter(function(a){return!1===a}),d=g().debounceTime(6E4).filter(function(a){return!0===a}),c=l(c,d).startWith(!1);return{videoWidth:l(k(2E4),e().debounceTime(500)).startWith("init").map(function(){return a.clientWidth*
b}).distinctUntilChanged(),inBackground:c}}},function(h,f,a){function l(a,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}f=function(a){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var e=a.apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?this:e}l(g,a);g.prototype._append=function(){this.buffered.insert(0,0,Infinity)};return g}(a(55).AbstractSourceBuffer);h.exports=f},function(h,f,a){function l(a,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}f=function(a){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var e=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?this:e}l(g,a);g.getLiveEdge=function(){throw Error("not implemented");};g.prototype.addSegment=function(a){this.index.timeline.push(a);
return!0};return g}(a(54));h.exports=f},function(h,f,a){var l=a(24).Segment;f=function(){function a(g,e,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=g;this.representation=e;this.index=b}a.getLiveEdge=function(){throw Error("not implemented");};a.prototype.checkDiscontinuity=function(){return-1};a.prototype.checkRange=function(a){var e=this.index,b=e.list;a=Math.floor(a/e.duration);return 0<=a&&a<b.length};a.prototype.createSegment=function(a,
e){var b=this.index,d=b.list[a];return l.create(this.adaptation,this.representation,a,d.media,e,b.duration,0,d.range,null,!1)};a.prototype.getSegments=function(a,e){for(var b=this.index,d=b.duration,b=Math.min(b.list.length-1,Math.floor(e/d)),c=[],g=Math.floor(a/d);g<=b;)c.push(this.createSegment(g,g*d)),g++;return c};a.prototype.addSegment=function(){return!1};return a}();h.exports=f},function(h,f,a){var l=a(24).Segment;f=function(){function a(g,e,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=g;this.representation=e;this.index=b}a.getLiveEdge=function(a,e){return Date.now()/1E3-e.availabilityStartTime-e.suggestedPresentationDelay};a.prototype.checkDiscontinuity=function(){return-1};a.prototype.checkRange=function(){return!0};a.prototype.createSegment=function(a){var e=this.index,b=e.startNumber,e=e.duration;a=Math.floor(a/e)+(null==b?1:b);return l.create(this.adaptation,this.representation,a,this.index.media,a*e,this.index.duration,a,null,null,!1)};a.prototype.getSegments=
function(a,e){for(var b=this.index.duration,d=[],c=a;c<=e;c+=b)d.push(this.createSegment(c));return d};a.prototype.addSegment=function(){return!1};return a}();h.exports=f},function(h,f,a){function l(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0;t(c)||(c=new (c instanceof r?u:p)(a,c,d));c.pipelineType=b;return c}function k(a){return a instanceof r?a.type===w.ERROR_HTTP_CODE?500<=a.status||404==a.status:a.type===w.TIMEOUT||a.type===w.ERROR_EVENT:!1}function g(a,c,e,g){function f(b){throw l("PIPELINE_RESOLVE_ERROR",
a,b);}function h(b){throw l("PIPELINE_PARSING_ERROR",a,b);}function u(a){e.next(a)}function A(a){var b=H?H.get(a):null;return null===b?d(m(D,a),C):n(b)["catch"](function(){return d(m(D,a),C)})}function r(a){return m(J,a)["catch"](h)}function p(b,c){var d=Object.assign({response:c},b);H&&H.add(b,c);q.schedule(u,0,{type:a,value:d});return d}function t(a,b){return Object.assign({parsed:b},a)}var w=c.resolver,D=c.loader,J=c.parser,L=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};w||(w=b.of);
D||(D=b.of);J||(J=b.of);var H=L.cache,C={retryDelay:200,errorSelector:function(b){throw l("PIPELINE_LOAD_ERROR",a,b);},totalRetry:L.totalRetry||4,shouldRetry:k,onRetry:function(b){q.schedule(u,0,{type:a,value:b.xhr});g.next(l("PIPELINE_LOAD_ERROR",a,b,!1))}};return function(a){return m(w,a)["catch"](f).mergeMap(A,p).mergeMap(r,t)}}var e=a(8).Subject;f=a(122).asap;var b=a(1).Observable,d=a(36).retryWithBackoff,c=a(15),m=c.tryCatch,n=c.castToObservable;a=a(7);var r=a.RequestError,u=a.NetworkError,p=
a.OtherError,w=a.RequestErrorTypes,t=a.isKnownError,q=f;h.exports=function(){var a=new e;return{createPipelines:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d={requiresMediaSource:function(){return!0!==b.directFile}},e;for(e in b)d[e]=g(e,b[e],a,c.errorStream,c[e]);return d},metrics:a}}},function(h,f,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}
function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){return b?"seeking"==b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"}function e(){}function b(a){q(a.man,"player: no manifest loaded")}function d(a,b){return a.filter(function(a){return a.type==
b}).map(function(a){return a.value})}var c=a(9),m=a(4).Subscription,n=a(8).Subject,r=a(25).BehaviorSubject,u=a(19).combineLatest,p=a(15).on,w=a(21).normalize;f=a(35);var t=a(157),q=a(3),x=a(14),z=x.HTMLVideoElement_,B=x.exitFullscreen,G=x.requestFullscreen,y=x.isFullscreen,v=x.onFullscreenChange,x=a(56),E=x.getEmptyTimings,A=x.createTimingsSampler,I=x.toWallClockTime,F=x.fromWallClockTime,N=x.getLiveGap,x=a(7),P=x.ErrorTypes,D=x.ErrorCodes,J=a(133).InitializationSegmentCache,L=a(20).BufferedRanges,
H=a(143).parseTimeFragment,C=a(134),K=a(34),M=a(149),Q=a(139),S=a(130),ca=a(141),Y=a(52);a=function(a){function f(b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var d=b.videoElement,e=b.transport,g=b.transportOptions,h=b.defaultLanguage,k=b.defaultSubtitle,m=b.initVideoBitrate,u=b.initAudioBitrate,A=b.maxVideoBitrate;b=b.maxAudioBitrate;var p=l(this,a.call(this));p._playPauseNext$=p._playPauseNext.bind(p);p._textTrackChanges$=p._textTrackChanges.bind(p);p._setPlayerState$=
p._setPlayerState.bind(p);p._triggerTimeChange$=p._triggerTimeChange.bind(p);p._streamNext$=p._streamNext.bind(p);p._streamError$=p._streamError.bind(p);p._streamFatalError$=p._streamFatalError.bind(p);p._streamComplete$=p._streamComplete.bind(p);p.defaultTransport=e;p.defaultTransportOptions=g||{};d||(d=document.createElement("video"));q(d instanceof z,"requires an actual HTMLVideoElement");d.preload="auto";p.version="2.0.12";p.video=d;p.fullscreen=v(d).subscribe(function(){return p.trigger("fullscreenChange",
p.isFullscreen())});p.playing=new r;p.stream=new n;p.images=new n;p.errorStream=new n;g=Q();e=g.createPipelines;g=g.metrics;d=C(d);p.createPipelines=e;p.metrics=g;p.adaptive=S(g,d,{initVideoBitrate:m,initAudioBitrate:u,maxVideoBitrate:A,maxAudioBitrate:b,defaultLanguage:w(h),defaultSubtitle:w(k)});p.muted=.1;p._setPlayerState("STOPPED");p._resetStates();p.log=c;return p}k(f,a);f.getErrorTypes=function(){return P};f.getErrorCodes=function(){return D};f.prototype._resetStates=function(){this.man=null;
this.reps={video:null,audio:null,text:null,images:null};this.adas={video:null,audio:null,text:null,images:null};this.evts={};this.frag={start:null,end:null};this.error=null;this.images.next(null)};f.prototype._unsubscribe=function(){if(this.subscriptions){var a=this.subscriptions;this.subscriptions=null;a.unsubscribe()}};f.prototype.stop=function(){"STOPPED"!==this.state&&(this._resetStates(),this._unsubscribe(),this._setPlayerState("STOPPED"))};f.prototype.dispose=function(){this.stop();this.metrics.unsubscribe();
this.adaptive.unsubscribe();this.fullscreen.unsubscribe();this.stream.unsubscribe();Y.dispose();this.video=this.createPipelines=this.stream=this.fullscreen=this.adaptive=this.metrics=null};f.prototype._recordState=function(a,b){this.evts[a]!==b&&(this.evts[a]=b,this.trigger(a+"Change",b))};f.prototype._parseOptions=function(a){var b=a=Object.assign({transport:this.defaultTransport,transportOptions:{},keySystems:[],timeFragment:{},subtitles:[],images:[],autoPlay:!1,hideNativeSubtitle:!1,directFile:!1},
a),c=b.transport,d=b.url,e=b.keySystems,g=b.timeFragment,f=b.subtitles,h=b.images,k=a,b=k.transportOptions,l=k.manifests,m=k.autoPlay,n=k.directFile,p=k.defaultLanguage,u=k.defaultSubtitle,k=k.hideNativeSubtitle,g=H(g);n&&(c="directfile");q(!!l^!!d,"player: you have to pass either a url or a list of manifests");l&&(e=l[0],d=e.url,f=e.subtitles||[],h=e.images||[],e=l.map(function(a){return a.keySystem}).filter(Boolean));"string"==typeof c&&(c=M[c]);"function"==typeof c&&(c=c(Object.assign({},this.defaultTransportOptions,
b)));q(c,"player: transport "+a.transport+" is not supported");return{url:d,keySystems:e,subtitles:f,hideNativeSubtitle:k,images:h,timeFragment:g,autoPlay:m,defaultLanguage:p,defaultSubtitle:u,transport:c}};f.prototype.loadVideo=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this._parseOptions(a);c.info("loadvideo",a);var b=a,f=b.url,h=b.keySystems,k=b.subtitles,l=b.hideNativeSubtitle,n=b.images,r=b.timeFragment,t=b.autoPlay,q=b.transport,a=b.defaultLanguage,b=b.defaultSubtitle;
this.stop();this.frag=r;this.playing.next(t);a&&this.adaptive.setLanguage(w(a));b&&this.adaptive.setSubtitle(w(b));var b=this.video,D=this.adaptive,a=this.errorStream,L=this.createPipelines(q,{errorStream:a,audio:{cache:new J},video:{cache:new J}}),q=A(b,{requiresMediaSource:L.requiresMediaSource()}),f=ca({url:f,errorStream:a,keySystems:h,subtitles:k,hideNativeSubtitle:l,timings:q,images:n,timeFragment:r,adaptive:D,pipelines:L,videoElement:b,autoPlay:t}).publish(),k=d(f,"stalled").startWith(null),
h=d(f,"loaded").take(1).share(),k=h.mapTo("LOADED").concat(u(this.playing,k,g)).distinctUntilChanged().startWith("LOADING"),l=p(b,["play","pause"]),b=p(b.textTracks,["addtrack"]),n=this.subscriptions=new m;n.add(l.subscribe(this._playPauseNext$,e));n.add(b.subscribe(this._textTrackChanges$,e));n.add(k.subscribe(this._setPlayerState$,e));n.add(q.subscribe(this._triggerTimeChange$,e));n.add(f.subscribe(this._streamNext$,this._streamFatalError$,this._streamComplete$));n.add(a.subscribe(this._streamError$));
n.add(f.connect());this.subscriptions?this._triggerTimeChange():n.unsubscribe();return h};f.prototype._streamNext=function(a){var b=a.type,c=a.value;"buffer"==b&&this._bufferNext(c);"manifest"==b&&this._manifestNext(c);"pipeline"==b&&(this.trigger("progress",c.segment),b=c.parsed,"image"===c.bufferType&&this.images.next(b.segmentData));this.stream.next(a)};f.prototype._streamError=function(a){this.trigger("warning",a);this.stream.next({type:"warning",value:a})};f.prototype._streamFatalError=function(a){this._resetStates();
this.error=a;this._setPlayerState("STOPPED");this._unsubscribe();this.trigger("error",a);this.stream.next({type:"error",value:a})};f.prototype._streamComplete=function(){this._resetStates();this._setPlayerState("ENDED");this._unsubscribe();this.stream.next({type:"ended",value:null})};f.prototype._manifestNext=function(a){this.man=a;this.trigger("manifestChange",a)};f.prototype._bufferNext=function(a){var b=a.bufferType,c=a.adaptation;a=a.representation;this.reps[b]=a;this.adas[b]=c;"text"==b&&this._recordState("subtitle",
c&&c.lang||"");"video"==b&&this._recordState("videoBitrate",a&&a.bitrate||-1);"audio"==b&&(this._recordState("language",c&&c.lang||""),this._recordState("audioBitrate",a&&a.bitrate||-1))};f.prototype._playPauseNext=function(a){!0!==this.video.ended&&this.playing.next("play"==a.type)};f.prototype._textTrackChanges=function(a){(a=a.target[0])&&this.trigger("nativeTextTrackChange",a)};f.prototype._setPlayerState=function(a){this.state!==a&&(this.state=a,c.info("playerStateChange",a),this.trigger("playerStateChange",
a))};f.prototype._triggerTimeChange=function(a){this.man&&a?(this.man.isLive&&0<a.ts&&(a.wallClockTime=I(a.ts,this.man),a.liveGap=N(a.ts,this.man)),this.trigger("currentTimeChange",a)):this.trigger("currentTimeChange",E())};f.prototype.getError=function(){return this.error};f.prototype.getManifest=function(){return this.man};f.prototype.getVideoElement=function(){return this.video};f.prototype.getNativeTextTrack=function(){return 0<this.video.textTracks.length?this.video.textTracks[0]:null};f.prototype.getImageTrack=
function(){return this.images.distinctUntilChanged()};f.prototype.getPlayerState=function(){return this.state};f.prototype.isLive=function(){b(this);return this.man.isLive};f.prototype.getUrl=function(){b(this);return this.man.locations[0]};f.prototype.getVideoDuration=function(){return this.video.duration};f.prototype.getVideoLoadedTime=function(){return(new L(this.video.buffered)).getSize(this.video.currentTime)};f.prototype.getVideoPlayedTime=function(){return(new L(this.video.buffered)).getLoaded(this.video.currentTime)};
f.prototype.getCurrentTime=function(){if(!this.man)return 0;var a=this.video.currentTime;return this.man.isLive?I(a,this.man):a};f.prototype.getStartTime=function(){return this.frag.start};f.prototype.getEndTime=function(){return this.frag.end};f.prototype.getPlaybackRate=function(){return this.video.playbackRate};f.prototype.getVolume=function(){return this.video.volume};f.prototype.isFullscreen=function(){return y()};f.prototype.getAvailableLanguages=function(){return this.man&&K.getAvailableLanguages(this.man)||
[]};f.prototype.getAvailableSubtitles=function(){return this.man&&K.getAvailableSubtitles(this.man)||[]};f.prototype.getLanguage=function(){return this.adaptive.getLanguage()};f.prototype.getSubtitle=function(){return this.adaptive.getSubtitle()};f.prototype.getAvailableVideoBitrates=function(){var a=K.getAdaptationsByType(this.man,"video");return a[0]&&a[0].bitrates.slice()||[]};f.prototype.getAvailableAudioBitrates=function(){var a=this.adas.audio;return a&&a.bitrates.slice()||[]};f.prototype.getVideoBitrate=
function(){return this.evts.videoBitrate};f.prototype.getAudioBitrate=function(){return this.evts.audioBitrate};f.prototype.getVideoMaxBitrate=function(){return this.adaptive.getVideoMaxBitrate()};f.prototype.getAudioMaxBitrate=function(){return this.adaptive.getAudioMaxBitrate()};f.prototype.getVideoBufferSize=function(){return this.adaptive.getVideoBufferSize()};f.prototype.getAudioBufferSize=function(){return this.adaptive.getAudioBufferSize()};f.prototype.getAverageBitrates=function(){return this.adaptive.getAverageBitrates()};
f.prototype.getMetrics=function(){return this.metrics};f.prototype.play=function(){this.video.play()};f.prototype.pause=function(){this.video.pause()};f.prototype.setPlaybackRate=function(a){this.video.playbackRate=a};f.prototype.goToStart=function(){return this.seekTo(this.getStartTime())};f.prototype.seekTo=function(a){q(this.man);var b=this.video.currentTime;this.man.isLive&&(a=F(a,this.man));return a!==b?(c.info("seek to",a),this.video.currentTime=a):b};f.prototype.setFullscreen=function(){!1===
(0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0)?B():G(this.video)};f.prototype.setVolume=function(a){a!==this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))};f.prototype.mute=function(){this.muted=this.getVolume()||.1;this.setVolume(0)};f.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this.muted)};f.prototype.normalizeLanguageCode=function(a){return w(a)};f.prototype.isLanguageAvailable=function(a){return 0<=this.getAvailableLanguages().indexOf(w(a))};
f.prototype.isSubtitleAvailable=function(a){return 0<=this.getAvailableSubtitles().indexOf(w(a))};f.prototype.setLanguage=function(a){a=w(a);q(this.isLanguageAvailable(a),"player: unknown language");this.adaptive.setLanguage(a)};f.prototype.setSubtitle=function(a){a=w(a);q(!a||this.isSubtitleAvailable(a),"player: unknown subtitle");this.adaptive.setSubtitle(a||"");a||this._recordState("subtitle","")};f.prototype.setVideoBitrate=function(a){q(0===a||0<=this.getAvailableVideoBitrates().indexOf(a),"player: video bitrate unavailable");
this.adaptive.setVideoBitrate(a)};f.prototype.setAudioBitrate=function(a){q(0===a||0<=this.getAvailableAudioBitrates().indexOf(a),"player: audio bitrate unavailable");this.adaptive.setAudioBitrate(a)};f.prototype.setVideoMaxBitrate=function(a){this.adaptive.setVideoMaxBitrate(a)};f.prototype.setAudioMaxBitrate=function(a){this.adaptive.setAudioMaxBitrate(a)};f.prototype.setVideoBufferSize=function(a){this.adaptive.setVideoBufferSize(a)};f.prototype.setAudioBufferSize=function(a){this.adaptive.setAudioBufferSize(a)};
f.prototype.asObservable=function(){return this.stream};f.prototype.getDebug=function(){return t.getDebug(this)};f.prototype.showDebug=function(){t.showDebug(this,this.video)};f.prototype.hideDebug=function(){t.hideDebug()};f.prototype.toggleDebug=function(){t.toggleDebug(this,this.video)};f.prototype.getCurrentKeySystem=function(){return Y.getCurrentKeySystem()};return f}(f);h.exports=a},function(h,f,a){function l(a){return"audio"==a||"video"==a}var k=a(9),g=a(3);f=a(56);var e=f.getLiveGap,b=f.seekingsSampler,
d=f.fromWallClockTime,c=a(36).retryableFuncWithBackoff,m=a(1).Observable,n=a(15).on,r=a(5).EmptyObservable.create,u=a(12).merge,p=a(19).combineLatest,w=Math.min;f=a(14);var t=f.MediaSource_,q=f.sourceOpen,x=f.canPlay,z=f.canSeek,B=f.isPlaybackStuck,G=a(142),y=a(135),v=a(53).getLiveEdge;f=a(131);var E=f.Buffer,A=f.EmptyBuffer;f=a(52);var I=f.createEME,F=f.onEncrypted;f=a(7);var N=f.MediaError,P=f.OtherError,D=f.EncryptedMediaError,J=f.isKnownError;a=a(34);var L=a.normalizeManifest,H=a.mergeManifestsIndex,
C=a.mutateManifestLiveGap,K=a.getAdaptations;h.exports=function(a){function f(a,b,c){da[b]||(k.info("add sourcebuffer",c),da[b]=a.addSourceBuffer(c));return da[b]}function h(a,b,c){var d=c.type;c=c.codec;if(l(d))a=f(b,d,c);else{if(b=Z[d])try{b.abort()}catch(ia){k.warn(ia)}finally{delete Z[d]}if("text"==d)k.info("add text sourcebuffer",c),a=new G(a,c,ra);else if("image"==d)k.info("add image sourcebuffer",c),a=new y(c);else throw k.error("unknown buffer type "+d),new N("BUFFER_TYPE_UNKNOWN",null,!0);
Z[d]=a}return a}function M(a,b,c){a=c.type;var d=l(a);d?(c=da[a],delete da[a]):(c=Z[a],delete Z[a]);if(c)try{c.abort(),d&&b.removeSourceBuffer(c)}catch(ia){k.warn(ia)}}function Y(a){var c=la.map(function(b){if(ta){var c=b.clone();c.ts=w(b.ts,ea);c.duration=w(b.duration,ea)}else c=b;c.liveGap=e(b.ts,a);return c}),d=b(c);return{timings:c,seekings:d}}function ba(a,b,c,d){var e=b.type;return ma.getAdaptationsChoice(e,b.adaptations).switchMap(function(g){if(!g)return M(O,a,b),A(e);var f=ma.getBufferAdapters(g);
g=E({bufferType:e,sourceBuffer:h(O,a,b),pipeline:ha[e],adaptation:g,timings:c,seekings:d,adapters:f});return l(e)?g:g["catch"](function(a){k.error("buffer",e,"has crashed",a);ga.next(a);return r()})})}function T(a){var b=z(O)["do"](function(){var b=a.duration,c=ua,e=ea,f=/^\d*(\.\d+)? ?%$/;"string"==typeof c&&f.test(c)&&(c=parseFloat(c)/100*b);"string"==typeof e&&f.test(e)&&(ea=parseFloat(e)/100*b);if(Infinity===e||"100%"===e)e=b;a.isLive?c=c?d(c,a):v(a):g(c<b&&e<=b,"stream: bad startTime and endTime");
k.info("set initial time",c);O.playbackRate=1;O.currentTime=c}),c=x(O)["do"](function(){k.info("canplay event");na&&O.play();na=!0});return p(b,c).take(1).mapTo({type:"loaded",value:!0})}function R(){return aa&&aa.length?I(O,aa,ga):F(O).map(function(){k.error("eme: ciphered media and no keySystem passed");throw new D("MEDIA_IS_ENCRYPTED_ERROR",null,!0);})}function U(a,b){var c=b.changePlaybackRate,d=void 0===c?!0:c;return a.distinctUntilChanged(function(a,b){var c=b.stalled,e=a.stalled;var g=e||c?
e&&c?e.name==c.name:!1:!0;!g&&d&&(e?(k.info("resume playback",b.ts,b.name),O.playbackRate=e.playback):(k.info("stop playback",b.ts,b.name),O.playbackRate=0));c&&(c=b.buffered.getNextRangeGap(b.ts),B(b)?(O.currentTime=b.ts,k.warn("after freeze seek",b.ts,b.range)):1>c&&(e=b.ts+c+1/60,O.currentTime=e,k.warn("discontinuity seek",b.ts,c,e)));return g}).map(function(a){return{type:"stalled",value:a.stalled}})}function fa(a,b){switch(a.type){case "index-discontinuity":k.warn("explicit discontinuity seek",
a.value.ts);O.currentTime=a.value.ts;break;case "precondition-failed":C(b,1);k.warn("precondition failed",b.presentationLiveGap);break;case "out-of-index":return k.info("out of index"),oa({url:b.locations[0]}).map(function(a){a=a.parsed;return{type:"manifest",value:H(b,L(a.url,a.manifest,ka))}})}return m.of(a)}function V(a){return"out-of-index"==a.type||"index-discontinuity"==a.type}function W(a,b,c,d){var e=K(b);e.forEach(function(b){var c=b.type;b=b.codec;l(c)&&f(a,c,b)});e=e.map(function(b){return ba(a,
b,c,d)});e=u.apply(null,e);return b.isLive?e.distinctUntilChanged(function(a,b){return V(b)&&V(a)}).concatMap(function(a){return fa(a,b)}):e}function pa(){return n(O,"error").mergeMap(function(){var a=void 0;switch(O.error.code){case 1:a="MEDIA_ERR_ABORTED";break;case 2:a="MEDIA_ERR_NETWORK";break;case 3:a="MEDIA_ERR_DECODE";break;case 4:a="MEDIA_ERR_SRC_NOT_SUPPORTED"}k.error("stream: video element MEDIA_ERR("+a+")");throw new N(a,null,!0);})}var qa=a.url,ga=a.errorStream,aa=a.keySystems,ka=a.subtitles,
ra=a.hideNativeSubtitle,sa=a.images,la=a.timings,X=a.timeFragment,ma=a.adaptive,ha=a.pipelines,O=a.videoElement,na=a.autoPlay,ua=X.start,ta=Infinity>ea,ea=X.end,oa=ha.manifest,da={},Z={};a=la.filter(function(a){var b=a.ts;a=a.duration;return 0<a&&.5>w(a,ea)-b});X=c(function(a){var b=a.url,c=a.mediaSource;a=c?q(c):m.of(null);return p(oa({url:b}),a).mergeMap(function(a){a=a[0].parsed;a=L(a.url,a.manifest,ka,sa);if(c){var b=Infinity===a.duration?Number.MAX_VALUE:a.duration;c.duration!==b&&(c.duration=
b,k.info("set duration",c.duration))}b=Y(a);var d=b.timings,e=b.seekings;b=m.of({type:"manifest",value:a});var g=R(),f=U(d,{changePlaybackRate:ha.requiresMediaSource()}),h=T(a);a=W(c,a,d,e);d=pa();return u(b,h,f,g,a,d)})},{totalRetry:3,retryDelay:250,resetDelay:6E4,shouldRetry:function(a){return!0!==a.fatal},errorSelector:function(a){J(a)||(a=new P("NONE",a,!0));a.fatal=!0;return a},onRetry:function(a,b){k.warn("stream retry",a,b);ga.next(a)}});return function(a,b){return m.create(function(c){function d(){if(e&&
"closed"!=e.readyState)for(var a=e,c=a.readyState,a=a.sourceBuffers,d=0;d<a.length;d++){var f=a[d];try{"open"==c&&f.abort(),e.removeSourceBuffer(f)}catch(ja){k.warn("error while disposing souceBuffer",ja)}}Object.keys(Z).forEach(function(a){a=Z[a];try{a.abort()}catch(va){k.warn("error while disposing souceBuffer",va)}});b.src="";b.removeAttribute("src");if(g)try{URL.revokeObjectURL(g)}catch(ja){k.warn("error while revoking ObjectURL",ja)}da={};Z={};g=e=null}var e=void 0,g=void 0;d();if(ha.requiresMediaSource()){if(!t)throw new N("MEDIA_SOURCE_NOT_SUPPORTED",
null,!0);e=new t;g=URL.createObjectURL(e)}else e=null,g=a;b.src=g;c.next({url:a,mediaSource:e});k.info("create mediasource object",g);return d})}(qa,O).mergeMap(X).takeUntil(a)}},function(h,f,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}f=a(55).AbstractSourceBuffer;var k=a(14),g=k.addTextTrack,e=k.isVTTSupported,b=a(9),d=window.VTTCue||window.TextTrackCue;a=function(a){function c(b,d,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=a.call(this,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.video=b;f.codec=d;f.isVTT=/^text\/vtt/.test(d);b=g(b,e);d=b.trackElement;f.track=b.track;f.trackElement=
d;return f}l(c,a);c.prototype.createCuesFromArray=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c],g=e.start,f=e.end;(e=e.text)&&b.push(new d(g,f,e))}return b};c.prototype._append=function(a){var c=this;if(this.isVTT&&e())a=new Blob([a],{type:"text/vtt"}),a=URL.createObjectURL(a),this.trackElement?(this.trackElement.src=a,this.buffered.insert(0,Infinity)):b.warn("vtt subtitles not supported");else if(a=this.createCuesFromArray(a),0<a.length){var d=a[0],g=a[a.length-1],f=this.track.cues;0<f.length&&
d.startTime<f[f.length-1].startTime&&this._remove(d.startTime,Infinity);a.forEach(function(a){return c.track.addCue(a)});this.buffered.insert(0,d.startTime,g.endTime)}};c.prototype._remove=function(a,b){for(var c=this.track,d=c.cues,e=d.length-1;0<=e;e--){var f=d[e],g=f.startTime,h=f.endTime;g>=a&&g<=b&&h<=b&&c.removeCue(f)}this.buffered.remove(a,b)};c.prototype._abort=function(){var a=this.trackElement,b=this.video;a&&b&&b.hasChildNodes(a)&&b.removeChild(a);this.track.mode="disabled";this.size=0;
this.video=this.track=this.trackElement=null};return c}(f);h.exports=a},function(h,f,a){function l(a){if(!a)return!1;a=a.replace(/^npt\:/,"").replace(/\.$/,"");a=a.split(":");var c=a.length;switch(c){case 3:var e=parseInt(a[0],10);var f=parseInt(a[1],10);a=parseFloat(a[2]);break;case 2:e=0;f=parseInt(a[0],10);a=parseFloat(a[1]);break;case 1:f=e=0;a=parseFloat(a[0]);break;default:return!1}b(23>=e,d);b(59>=f,d);b(1>=c||60>a,d);return 3600*e+60*f+a}function k(a){if(!a)return!1;a=a.split(":");switch(a.length){case 3:var c=
parseInt(a[0],10);var e=parseInt(a[1],10);var f=parseInt(a[2],10);var g=a=0;break;case 4:c=parseInt(a[0],10);e=parseInt(a[1],10);f=parseInt(a[2],10);-1===a[3].indexOf(".")?(a=parseInt(a[3],10),g=0):(g=a[3].split("."),a=parseInt(g[0],10),g=parseInt(g[1],10));break;default:return!1}b(23>=c,d);b(59>=e,d);b(59>=f,d);return 3600*c+60*e+f+.001*a+1E-6*g}function g(a){return new Date(Date.parse(a))}function e(a){return a?a:!1}var b=a(3),d="invalid MediaFragment";h.exports={parseTimeFragment:function(a){if("string"==
typeof a){var c=a,f=c.split(",");b(2>=f.length,d);a=f[0]?f[0]:"";f=f[1]?f[1]:"";b((a||f)&&(!a||f||-1===c.indexOf(",")),d);a=a.replace(/^smpte(-25|-30|-30-drop)?\:/,"").replace("clock:","");var c=/^((npt\:)?((\d+\:(\d\d)\:(\d\d))|((\d\d)\:(\d\d))|(\d+))(\.\d*)?)?$/,h=/^(\d+\:\d\d\:\d\d(\:\d\d(\.\d\d)?)?)?$/,u=/^((\d{4})(-(\d{2})(-(\d{2})(T(\d{2})\:(\d{2})(\:(\d{2})(\.(\d+))?)?(Z|(([-\+])(\d{2})\:(\d{2})))?)?)?)?)?$/,p=/^(\d*(\.\d+)? ?%)?$/;if(c.test(a)&&c.test(f))c=l;else if(h.test(a)&&h.test(f))c=
k;else if(u.test(a)&&u.test(f))c=g;else if(p.test(a)&&p.test(f))c=e;else throw Error(d);a=c(a);f=c(f);b(!1!==a||!1!==f,d);a={start:!1===a?"":a,end:!1===f?"":f}}else a||(a={});"string"==typeof a.start&&"string"==typeof a.end?(a.start||(a.start="0%"),a.end||(a.end="100%")):(a.start||(a.start=0),a.end||(a.end=Infinity));"string"==typeof a.start&&"string"==typeof a.end?(b(0<=parseFloat(a.start)&&100>=parseFloat(a.start),"player: startTime should be between 0% and 100%"),b(0<=parseFloat(a.end)&&100>=parseFloat(a.end),
"player: endTime should be between 0% and 100%")):(b(("number"==typeof a.start||a.start instanceof Date)&&("number"==typeof a.end||a.end instanceof Date),"player: timeFragment should have interface { start, end } where start and end are numbers or dates"),b(a.start<a.end,"player: startTime should be lower than endTime"),b(0<=a.start,"player: startTime should be greater than 0"));return a}}},function(h,f,a){f=a(18);var l=f.le2toi,k=f.le4toi,g=f.bytesToStr;h.exports={parseBif:function(a){var b=0,d=
a.length,c=g(a.subarray(b,b+8)),b=b+8,e=a[b],b=b+1,f=a[b],b=b+1,h=a[b],b=b+1,u=a[b],b=b+1,e=[e,f,h,u].join("."),f=a[b]+k(a,b+1),b=b+4,h=k(a,b),b=b+4,u=g(a.subarray(b,b+4)),b=b+4,p=l(a,b),b=b+2,w=l(a,b),b=b+2,t=[a[b],a[b+1]].join(":"),q=1===a[b+2],b=64,x=[],z=void 0,B=0;if(!f)throw Error("bif: no images to parse");for(;b<d;){var G=k(a,b),b=b+4,y=k(a,b),b=b+4;if(z){var v=z.index,E=h,A=B,z=a.subarray(z.offset,y);x.push({index:v,duration:E,ts:A,data:z});B+=h}if(4294967295===G)break;z={index:G,offset:y}}return{fileFormat:c,
version:e,imageCount:f,timescale:h,format:u,width:p,height:w,aspectRatio:t,isVod:q,thumbs:x}}}},function(h,f,a){function l(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+ +b+"-"}function k(a){return function(b,c,d){b=d?parseInt(d,10):1;c=""+a;c=c.toString();b=c.length>=b?c:(Array(b+1).join("0")+c).slice(-b);return b}}var g=a(1).Observable,e=a(5).EmptyObservable.create,b=a(12).merge;a(3);var d=a(37).resolveURL;f=a(146);var c=f.parseSidx,m=f.patchPssh,n=a(57),r=a(147);h.exports=
function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},f=a.contentProtectionParser;f||(f=function(){});var h=a.createXHR,a={loader:function(a){var c=a.segment,f=c.getMedia(),g=c.getRange();a=c.getIndexRange();if(c.isInitSegment()&&!(f||g||a))return e();g=g?{Range:l(g)}:null;if(f){if(-1!==f.indexOf("$"))var m=c.getRepresentation(),f=f.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,m.id).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,k(m.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,k(c.getNumber())).replace(/\$Time(|\%0(\d+)d)\$/g,
k(c.getTime()))}else f="";c=d(c.getResolvedURL(),f);g=n({url:c,responseType:"arraybuffer",headers:g,createXHR:h});return a?(a=n({url:c,responseType:"arraybuffer",headers:{Range:l(a)},createXHR:h}),b(g,a)):g},parser:function(a){var b=a.segment;a=new Uint8Array(a.response.responseData);var d=void 0,e=void 0,f=void 0,h=b.getIndexRange();if(h=c(a,h?h[0]:0))d=h.segments,e=h.timescale;b.isInitSegment()||(0<=b.getTime()&&0<=b.getDuration()?f={ts:b.getTime(),d:b.getDuration()}:h&&1===h.segments.length&&(f=
{ts:h.segments[0].ts,d:h.segments[0].d}));h=a;b.isInitSegment()&&(b=b.getAdaptation(),b.contentProtection&&(h=m(a,b.contentProtection)));return g.of({segmentData:h,currentSegment:f,nextSegments:d,timescale:e})}};return{directFile:!1,manifest:{loader:function(a){return n({url:a.url,responseType:"document",createXHR:h})},parser:function(a){a=a.response;return g.of({manifest:r(a.responseData,f),url:a.url})}},audio:a,video:a,text:{loader:function(){}}}}},function(h,f,a){function l(a,b){for(var c=a.length,
e=0,f,h=void 0;e+8<c&&(h=d(a,e),f=d(a,e+4),g(0<h,"dash: out of range size"),f!==b);)e+=h;if(e>=c)return-1;g(e+h<=c,"dash: atom out of range");return e}function k(a){var b=a.systemId;a=a.privateData;b=b.replace(/-/g,"");g(32===b.length);b=r(4,m(b),e(a.length),a);return r(e(b.length+8),n("pssh"),b)}var g=a(3);f=a(18);var e=f.itobe4,b=f.be8toi,d=f.be4toi,c=f.be2toi,m=f.hexToBytes,n=f.strToBytes,r=f.concat;h.exports={parseSidx:function(a,e){var f=l(a,1936286840);if(-1==f)return null;var g=d(a,f),f=f+
4+4,h=a[f],f=f+8,k=d(a,f),f=f+4;if(0===h)h=d(a,f),f+=4,e+=d(a,f)+g,f+=4;else if(1===h)h=b(a,f),f+=8,e+=b(a,f)+g,f+=8;else return null;for(var g=[],f=f+2,m=c(a,f),f=f+2;0<=--m;){var n=d(a,f),f=f+4,p=n&2147483647;if(1==(n&2147483648)>>>31)throw Error("not implemented");n=d(a,f);f+=4;f+=4;g.push({ts:h,d:n,r:0,range:[e,e+p-1]});h+=n;e+=p}return{segments:g,timescale:k}},patchPssh:function(a,b){if(!b||!b.length)return a;var c=l(a,1836019574);if(-1==c)return a;for(var f=d(a,c),g=[a.subarray(c,c+f)],h=0;h<
b.length;h++)g.push(k(b[h]));g=r.apply(null,g);g.set(e(g.length),0);return r(a.subarray(0,c),g,a.subarray(c+f))}}},function(h,f,a){function l(a){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function k(a,b){var c=J[a.nodeName];A(c,"no attributes for "+a.nodeName);for(var d=b||{},e=0;e<c.length;e++){var f=c[e],g=f.k,h=f.fn,k=f.n,f=f.def;a.hasAttribute(g)?d[k||g]=h(a.getAttribute(g)):null!=f&&(d[k||g]=f)}return d}function g(a){return a}function e(a){return"true"==a}function b(a){return"true"==
a?!0:"false"==a?!1:parseInt(a)}function d(a){return new Date(Date.parse(a))}function c(a){if(!a)return 0;var b=I.exec(a);A(b,a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(b[2]||0)+2592E3*parseFloat(b[4]||0)+86400*parseFloat(b[6]||0)+3600*parseFloat(b[8]||0)+60*parseFloat(b[10]||0)+parseFloat(b[12]||0)}function m(a){var b=N.exec(a);if(!b)return-1;a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function n(a){return a}function r(a){return(a=F.exec(a))?[+a[1],+a[2]]:null}function u(a,
b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function p(a){var b=u(a,function(a,b,c){if("Initialization"==b){var d=b=void 0;c.hasAttribute("range")&&(b=r(c.getAttribute("range")));c.hasAttribute("sourceURL")&&(d=c.getAttribute("sourceURL"));a.initialization={range:b,media:d}}return a},k(a));"SegmentBase"==a.nodeName&&(b.indexType="base",b.timeline=[]);return b}function w(a){return u(a,function(a,b,c){"SegmentTimeline"==b&&(a.indexType="timeline",a.timeline=
t(c));return a},p(a))}function t(a){return u(a,function(a,b,c){b=a.length;c=k(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}function q(a){a=w(a);a.indexType||(a.indexType="template");return a}function x(a){var b=w(a);b.list=[];b.indexType="list";return u(a,function(a,b,c){"SegmentURL"==b&&a.list.push(k(c));return a},b)}function z(a){var b=u(a,function(a,b,c){switch(b){case "BaseURL":a.baseURL=c.textContent;break;case "SegmentBase":a.index=p(c);
break;case "SegmentList":a.index=x(c);break;case "SegmentTemplate":a.index=q(c)}return a},{});return k(a,b)}function B(a,b){var c=u(a,function(a,c,d){switch(c){case "ContentProtection":c=b(k(d),d);a.contentProtection=c;break;case "ContentComponent":a.contentComponent=k(d);break;case "BaseURL":a.baseURL=d.textContent;break;case "SegmentBase":a.index=p(d);break;case "SegmentList":a.index=x(d);break;case "SegmentTemplate":a.index=q(d);break;case "Representation":c=z(d),null==c.id&&(c.id=a.representations.length),
a.representations.push(c)}return a},{representations:[]});return k(a,c)}function G(a,b){var c=k(a,u(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":c=B(d,b),null==c.id&&(c.id=a.adaptations.length),a.adaptations.push(c)}return a},{adaptations:[]}));c.baseURL&&c.adaptations.forEach(function(a){return Object.assign({baseURL:c.baseURL},a)});return c}function y(a,b){var c=a.documentElement;A.equal(c.nodeName,"MPD","document root should be MPD");var d=u(c,function(a,
c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);break;case "Period":a.periods.push(G(d,b))}return a},{transportType:"dash",periods:[],locations:[]}),d=k(c,d);if(/dynamic/.test(d.type)){var c=(c=d.periods[0].adaptations.filter(function(a){return"video/mp4"==a.mimeType})[0])&&c.index,e=void 0,e=c.timeline?l(c):Date.now()/1E3-60;d.availabilityStartTime=d.availabilityStartTime.getTime()/1E3;d.presentationLiveGap=Date.now()/1E3-(e+d.availabilityStartTime)}return d}
function v(a,b){return y((new DOMParser).parseFromString(a,"application/xml"),b)}function E(a,b){return"string"==typeof a?v(a,b):y(a,b)}var A=a(3);f=a(21).normalize;var I=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,F=/([0-9]+)-([0-9]+)/,N=/([0-9]+)(\/([0-9]+))?/;a=[{k:"profiles",fn:g},{k:"width",fn:parseInt},{k:"height",fn:parseInt},{k:"frameRate",fn:m},{k:"audioSamplingRate",fn:g},{k:"mimeType",fn:g},{k:"segmentProfiles",fn:g},{k:"codecs",fn:g},{k:"maximumSAPPeriod",
fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:e}];var P=[{k:"timescale",fn:parseInt},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:r},{k:"indexRangeExact",fn:e},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:e}],D=P.concat([{k:"duration",fn:parseInt},{k:"startNumber",fn:parseInt}]),J={ContentProtection:[{k:"schemeIdUri",fn:g},{k:"value",fn:g}],SegmentURL:[{k:"media",fn:g},{k:"mediaRange",fn:r},{k:"index",fn:g},{k:"indexRange",
fn:r}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:P,SegmentTemplate:D.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:g},{k:"media",fn:g},{k:"bitstreamSwitching",fn:g}]),SegmentList:D,ContentComponent:[{k:"id",fn:g},{k:"lang",fn:f},{k:"contentType",fn:g},{k:"par",fn:n}],Representation:a.concat([{k:"id",fn:g},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:a.concat([{k:"id",
fn:g},{k:"group",fn:parseInt},{k:"lang",fn:f},{k:"contentType",fn:g},{k:"par",fn:n},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:m},{k:"maxFrameRate",fn:m},{k:"segmentAlignment",fn:b},{k:"subsegmentAlignment",fn:b},{k:"bitstreamSwitching",fn:e}]),Period:[{k:"id",fn:g},{k:"start",fn:c},{k:"duration",fn:c},{k:"bitstreamSwitching",
fn:e}],MPD:[{k:"id",fn:g},{k:"profiles",fn:g},{k:"type",fn:g,def:"static"},{k:"availabilityStartTime",fn:d},{k:"availabilityEndTime",fn:d},{k:"publishTime",fn:d},{k:"mediaPresentationDuration",fn:c,n:"duration"},{k:"minimumUpdatePeriod",fn:c},{k:"minBufferTime",fn:c},{k:"timeShiftBufferDepth",fn:c},{k:"suggestedPresentationDelay",fn:c},{k:"maxSegmentDuration",fn:c},{k:"maxSubsegmentDuration",fn:c}]};E.parseFromString=v;E.parseFromDocument=y;h.exports=E},function(h,f,a){var l=a(1).Observable;h.exports=
{directFile:!0,manifest:{parser:function(a){a=a.url;return l.of({manifest:{transportType:"directfile",locations:[a],periods:[],isLive:!1,duration:Infinity,adaptations:null},url:a})}}}},function(h,f,a){h.exports={smooth:a(150),dash:a(145),directfile:a(148)}},function(h,f,a){function l(a){return a.responseData.getElementsByTagName("media")[0].getAttribute("src")}function k(a){return(a=a.match(A))&&a[1]||""}function g(a,b){return b?a.replace(A,"?token="+b):a.replace(A,"")}function e(a){return a.getResolvedURL().replace(/\{bitrate\}/g,
a.getRepresentation().bitrate).replace(/\{start time\}/g,a.getTime())}var b=a(1).Observable,d=a(5).EmptyObservable.create,c=a(18).bytesToStr,m=a(9),n=a(57),r=n.RequestResponse,u=a(152);f=a(151);var p=f.patchSegment,w=f.createVideoInitSegment,t=f.createAudioInitSegment,q=f.getMdat,x=f.getTraf,z=f.parseTfrf,B=f.parseTfxd,G=a(144).parseBif;f=a(153).parseSami;a=a(154).parseTTML;var y={"application/x-sami":f,"application/smil":f,"application/ttml+xml":a,"application/ttml+xml+mp4":a,"text/vtt":function(a){return a}},
v=/\.(isml?)(\?token=\S+)?$/,E=/\.wsx?(\?token=\S+)?/,A=/\?token=(\S+)/;h.exports=function(){function a(a,b){var c=void 0,d=void 0;if(b.getAdaptation().isLive){var e=x(a);e?(c=z(e),d=B(e)):m.warn("smooth: could not find traf atom")}else c=null;d||(d={d:b.getDuration(),ts:b.getTime()});return{nextSegments:c,currentSegment:d}}var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=u(f),A=f.createXHR,f={loader:function(a){a=a.segment;if(a.isInitSegment()){var c=a.getAdaptation();a=a.getRepresentation();
var d=void 0,f=c.smoothProtection||{};switch(c.type){case "video":d=w(a.index.timescale,a.width,a.height,72,72,4,a.codecPrivateData,f.keyId,f.keySystems);break;case "audio":d=t(a.index.timescale,a.channels,a.bitsPerSample,a.packetSize,a.samplingRate,a.codecPrivateData,f.keyId,f.keySystems)}return b.of(new r(200,"","arraybuffer",Date.now()-100,Date.now(),d.length,d))}c=void 0;if(d=a.getRange())c=d[0],c=(d=d[1])&&Infinity!==d?"bytes="+ +c+"-"+ +d:"bytes="+ +c+"-",c={Range:c};a=e(a);return n({url:a,
responseType:"arraybuffer",headers:c,createXHR:A})},parser:function(c){var d=c.segment;c=c.response.responseData;if(d.isInitSegment())return b.of({segmentData:c,timings:null});c=new Uint8Array(c);var e=a(c,d),d=e.nextSegments,e=e.currentSegment;c=p(c,e.ts);return b.of({segmentData:c,nextSegments:d,currentSegment:e})}};return{directFile:!1,manifest:{resolver:function(a){a=a.url;var c=void 0,d=k(a),c=E.test(a)?n({url:g(a,""),responseType:"document",resultSelector:l,createXHR:A}):b.of(a);return c.map(function(a){var b=
a.match(v);a=b?a.replace(b[1],b[1]+"/manifest"):a;return{url:g(a,d)}})},loader:function(a){return n({url:a.url,responseType:"document",createXHR:A})},parser:function(a){a=a.response;return b.of({manifest:h(a.responseData),url:a.url})}},audio:f,video:f,text:{loader:function(a){var b=a.segment;if(b.isInitSegment())return d();a=b.getRepresentation().mimeType;b=e(b);return 0<=a.indexOf("mp4")?n({url:b,responseType:"arraybuffer",createXHR:A}):n({url:b,responseType:"text",createXHR:A})},parser:function(d){var e=
d.response;d=d.segment;var f=d.getAdaptation().lang,g=d.getRepresentation(),h=g.mimeType,g=g.index,k=y[h];if(!k)throw Error("could not find a text-track parser for the type "+h);var l=e.responseData;0<=h.indexOf("mp4")?(l=new Uint8Array(l),e=c(q(l))):e=l;l=a(l,d);h=l.nextSegments;l=l.currentSegment;d=k(e,f,d.getTime()/g.timescale);return b.of({segmentData:d,currentSegment:l,nextSegments:h})}},image:{loader:function(a){a=a.segment;if(a.init)return d();a=e(a);return n({url:a,responseType:"arraybuffer",
createXHR:A})},parser:function(a){var c=new Uint8Array(a.response.responseData),d=a=void 0;c&&(c=G(c),a=c.thumbs,d=c.timescale);return b.of({segmentData:a,currentSegment:{ts:0,d:Infinity},timescale:d})}}}}},function(h,f,a){function l(a,b){var c=x(b.length+8);if(y[a])var d=y[a];else d=r(a),y[a]=d;return n(c,d,b)}function k(a,b,c,d,e){for(var f=a.length,g=0,h;g<f;){h=q(a,g);if(1970628964===q(a,g+4)&&q(a,g+8)===b&&q(a,g+12)===c&&q(a,g+16)===d&&q(a,g+20)===e)return a.subarray(g+24,g+h);g+=h}}function g(a,
b){for(var d=a.length,e=0,f,g=void 0;e+8<d&&(g=q(a,e),f=q(a,e+4),c(0<g,"dash: out of range size"),f!==b);)e+=g;return e<d?a.subarray(e+8,e+g):null}function e(a,b,c,d){var e=[a,b,c];d.forEach(function(a){a=v.pssh(a.systemId,a.privateData,a.keyIds);e.push(a)});return e}function b(a,b,c,d){var e=a.length,f=b.length;c=c.length;a=a.subarray(c,e);e=new Uint8Array(f+(e-c));e.set(b,0);e.set(a,f);e.set(x(b.length+8),d+16);return e}function d(a,b,c,d,f,g,h){c=v.mult("stbl",[c,l("stts",new Uint8Array(8)),l("stsc",
new Uint8Array(8)),l("stsz",new Uint8Array(12)),l("stco",new Uint8Array(8))]);var k=l("url ",new Uint8Array([0,0,0,1])),k=v.dref(k),k=v.mult("dinf",[k]);d=v.mult("minf",[d,k,c]);b=v.hdlr(b);c=v.mdhd(a);b=v.mult("mdia",[c,b,d]);f=v.tkhd(f,g,1);f=v.mult("trak",[f,b]);g=v.trex(1);g=v.mult("mvex",[g]);a=v.mvhd(a,1);h=v.mult("moov",e(a,g,f,h));a=v.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return n(a,h)}var c=a(3),m=a(14).isIE;f=a(18);var n=f.concat,r=f.strToBytes,u=f.hexToBytes,p=f.bytesToHex,
w=f.be2toi,t=f.itobe2,q=f.be4toi,x=f.itobe4,z=f.be8toi,B=f.itobe8,G=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],y={},v={mult:function(a,b){return l(a,n.apply(null,b))},avc1encv:function(a,b,c,d,e,f,g,h,k,m){return l(a,n(6,t(b),16,t(c),t(d),t(e),2,t(f),6,[0,1,g.length],r(g),31-g.length,t(h),[255,255],k,"encv"===a?m:[]))},avcc:function(a,b,c){return l("avcC",n([1,a[1],a[2],a[3],252|(2===c?1:4===c?3:0),225],t(a.length),a,[1],t(b.length),b))},dref:function(a){return l("dref",
n(7,[1],a))},esds:function(a,b){return l("esds",n(4,[3,25],t(a),[0,4,17,64,21],11,[5,2],u(b),[6,1,2]))},frma:function(a){return l("frma",r(a))},free:function(a){return l("free",new Uint8Array(a-8))},ftyp:function(a,b){return l("ftyp",n.apply(null,[r(a),[0,0,0,1]].concat(b.map(r))))},hdlr:function(a){switch(a){case "video":a="vide";var b="VideoHandler";break;case "audio":a="soun";b="SoundHandler";break;default:a="hint",b=""}return l("hdlr",n(8,r(a),12,r(b),1))},mdhd:function(a){return l("mdhd",n(12,
x(a),8))},moof:function(a,b){return v.mult("moof",[a,b])},mp4aenca:function(a,b,c,d,e,f,g,h){return l(a,n(6,t(b),8,t(c),t(d),2,t(e),t(f),2,g,"enca"===a?h:[]))},mvhd:function(a,b){return l("mvhd",n(12,x(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,t(b+1)))},pssh:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];a=a.replace(/-/g,"");c(32===a.length,"wrong system id length");var e=d.length;if(0<e){var f=1;
d=n.apply(null,[x(e)].concat(d))}else f=0,d=[];return l("pssh",n([f,0,0,0],u(a),d,x(b.length),b))},saio:function(a,b,c,d){return l("saio",n(4,[0,0,0,1],x(a.length+b.length+c.length+d.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return l("saiz",new Uint8Array);var b=q(a,0),c=q(a,4),d=new Uint8Array(9+c);d.set(x(c),5);for(var c=9,e=8,f,g;e<a.length;)e+=8,2===(b&2)?(g=2,f=w(a,e),e+=2+6*f):g=f=0,d[c]=6*f+8+g,c++;return l("saiz",d)},schm:function(a,b){return l("schm",n(4,r(a),x(b)))},senc:function(a){return l("senc",
a)},smhd:function(){return l("smhd",new Uint8Array(8))},stsd:function(a){return l("stsd",n.apply(null,[7,[a.length]].concat(a)))},tkhd:function(a,b,c){return l("tkhd",n(x(7),8,x(c),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],t(a),2,t(b),2))},trex:function(a){return l("trex",n(4,x(a),[0,0,0,1],12))},tfdt:function(a){return l("tfdt",n([1,0,0,0],B(a)))},tenc:function(a,b,c){return l("tenc",n(6,[a,b],u(c)))},traf:function(a,b,c,d,e){var f=[a,b,c];d&&f.push(v.senc(d),v.saiz(d),v.saio(e,a,b,c));return v.mult("traf",
f)},trun:function(a){if(a[11]&1)return a;var b=new Uint8Array(a.length+4);b.set(x(a.length+4),0);b.set(a.subarray(4,16),4);b[11]|=1;b.set([0,0,0,0],16);b.set(a.subarray(16,a.length),20);return b},vmhd:function(){var a=new Uint8Array(12);a[3]=1;return l("vmhd",a)}},E={traf:function(a){return(a=g(a,1836019558))?g(a,1953653094):null},senc:function(a){return k(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return k(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return k(a,
3565190898,3392751253,2387879627,2655430559)},mdat:function(a){return g(a,1835295092)}};h.exports={getMdat:E.mdat,getTraf:E.traf,parseTfrf:function(a){a=E.tfrf(a);if(!a)return[];for(var b=[],c=a[0],d=a[4],e=0;e<d;e++){if(1==c){var f=z(a,16*e+5);var g=z(a,16*e+13)}else f=q(a,8*e+5),g=q(a,8*e+9);b.push({ts:f,d:g})}return b},parseTfxd:function(a){if(a=E.tfxd(a))return{d:z(a,12),ts:z(a,4)}},createVideoInitSegment:function(a,b,c,e,f,g,h,k,l){l||(l=[]);var m=h.split("00000001");h=m[2];m=u(m[1]);h=u(h);
g=v.avcc(m,h,g);l.length?(k=v.tenc(1,8,k),k=v.mult("schi",[k]),h=v.schm("cenc",65536),m=v.frma("avc1"),k=v.mult("sinf",[m,h,k]),e=v.avc1encv("encv",1,b,c,e,f,"AVC Coding",24,g,k)):e=v.avc1encv("avc1",1,b,c,e,f,"AVC Coding",24,g);e=v.stsd([e]);return d(a,"video",e,v.vmhd(),b,c,l)},createAudioInitSegment:function(a,b,c,e,f,g,h,k){k||(k=[]);g||(g=(32|G.indexOf(f)&31)<<4,g=p(t((g|b&31)<<3)));g=v.esds(1,g);if(k.length){h=v.tenc(1,8,h);h=v.mult("schi",[h]);var l=v.schm("cenc",65536),m=v.frma("mp4a");h=
v.mult("sinf",[m,l,h]);b=v.mp4aenca("enca",1,b,c,e,f,g,h)}else b=v.mp4aenca("mp4a",1,b,c,e,f,g);b=v.stsd([b]);return d(a,"audio",b,v.smhd(),0,0,k)},patchSegment:function(a,c){var d=a.subarray(0,q(a,0)),e=v.tfdt(c),f=e.length,g=q(d,8),h=q(d,8+g),k=q(d,8+g+8),l=q(d,8+g+8+k),n=d.subarray(8,8+g),p=d.subarray(8+g+8,8+g+8+h-8),h=p.subarray(0,k),l=p.subarray(k,k+l);h.set([0,0,0,1],12);p=E.senc(p);l=v.trun(l);e=v.traf(h,e,l,p,n);n=v.moof(n,e);f=8+g+8+k+f;return m?b(a,n,d,f):8<=d.length-n.length?(d=d.length-
n.length,a.set(n,0),a.set(v.free(d),n.length),a.set(x(n.length+8+d),f+16),a):b(a,n,d,f)}}},function(h,f,a){function l(a){return"boolean"==typeof a?a:"string"==typeof a?"TRUE"===a.toUpperCase():!1}function k(a){if(!a)return Infinity;a=a.index;var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function g(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:b.concat([8,1,18,16],a)}]}var e=a(3),b=a(18),d=a(21).normalize,c={audio:"audio/mp4",video:"video/mp4",
text:"application/ttml+xml"},m={audio:"mp4a.40.2",video:"avc1.4D401E"};f={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var n={audio:[["Bitrate","bitrate",parseInt],["AudioTag","audiotag",parseInt],["FourCC","mimeType",f],["Channels","channels",parseInt],["SamplingRate","samplingRate",parseInt],["BitsPerSample","bitsPerSample",parseInt],["PacketSize","packetSize",parseInt],["CodecPrivateData","codecPrivateData",String]],video:[["Bitrate","bitrate",parseInt],["FourCC",
"mimeType",f],["CodecPrivateData","codecs",function(a){return(a=(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1])?"avc1."+a:""}],["MaxWidth","width",parseInt],["MaxHeight","height",parseInt],["CodecPrivateData","codecPrivateData",String]],text:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",f]]};h.exports=function(){function a(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function f(b,f){b.hasAttribute("Timescale")&&(f=+b.getAttribute("Timescale"));var g=
b.getAttribute("Type"),h=b.getAttribute("Subtype"),k=b.getAttribute("Name"),l=d(b.getAttribute("Language")),p=b.getAttribute("Url"),u=n[g];e(u,"unrecognized QualityLevel type "+g);var q=0,t=a(b,function(a,b,c){switch(b){case "QualityLevel":b={};for(var d=0;d<u.length;d++){var e=u[d],f=e[0],h=e[2];b[e[1]]="function"==typeof h?h(c.getAttribute(f)):h[c.getAttribute(f)]}"audio"==g&&(c=c.getAttribute("FourCC")||"",d=b.codecPrivateData,c="AACH"==c?5:d?(parseInt(d.substr(0,2),16)&248)>>3:2,b.codecs=c?"mp4a.40."+
c:"");if("video"!=g||b.bitrate>B)b.id=q++,a.representations.push(b);break;case "c":b=a.index;var d=a.index.timeline,e=d.length,f=0<e?d[e-1]:{d:0,ts:0,r:0},h=+c.getAttribute("d"),k=c.getAttribute("t");(c=+c.getAttribute("r"))&&c--;0<e&&!f.d&&(f.d=k-f.ts,d[e-1]=f);0<e&&h==f.d&&null==k?f.r+=(c||0)+1:d.push({d:h,ts:null==k?f.ts+f.d*(f.r+1):+k,r:c});b.timeline=d}return a},{representations:[],index:{timeline:[],indexType:"timeline",timescale:f,initialization:{}}}),r=t.representations,t=t.index;e(r.length,
"adaptation should have at least one representation");r.forEach(function(a){return a.codecs=a.codecs||m[g]});r.forEach(function(a){return a.mimeType=a.mimeType||c[g]});return"ADVT"==h?null:{type:g,index:t,representations:r,name:k,lang:l,baseURL:p}}function h(a){return w((new DOMParser).parseFromString(a,"application/xml"))}function w(c){c=c.documentElement;e.equal(c.nodeName,"SmoothStreamingMedia","document root should be SmoothStreamingMedia");e(/^[2]-[0-2]$/.test(c.getAttribute("MajorVersion")+
"-"+c.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var d=+c.getAttribute("Timescale")||1E7,g=0,h=a(c,function(a,c,h){switch(c){case "Protection":h=h.firstElementChild;e.equal(h.nodeName,"ProtectionHeader","Protection should have ProtectionHeader child");c=b.strToBytes(atob(h.textContent));var k=b.le2toi(c,8);k=b.bytesToUTF16Str(c.subarray(10,10+k));k=(new DOMParser).parseFromString(k,"application/xml").querySelector("KID").textContent;k=b.guidToUuid(atob(k)).toLowerCase();var l=
b.hexToBytes(k);h=h.getAttribute("SystemID").toLowerCase().replace(/\{|\}/g,"");c={keyId:k,keySystems:[{systemId:h,privateData:c}].concat(G(l))};a.protection=c;break;case "StreamIndex":if(c=f(h,d))c.id=g++,a.adaptations.push(c)}return a},{protection:null,adaptations:[]}),m=h.protection,h=h.adaptations;h.forEach(function(a){return a.smoothProtection=m});var n=void 0,p=void 0,u=void 0,q=void 0,t=l(c.getAttribute("IsLive"));if(t)var n=x,u=+c.getAttribute("DVRWindowLength")/d,q=z,p=h.filter(function(a){return"video"==
a.type})[0],r=h.filter(function(a){return"audio"==a.type})[0],p=Math.min(k(p),k(r)),p=Date.now()/1E3-(p+q);return{transportType:"smoothstreaming",profiles:"",type:t?"dynamic":"static",suggestedPresentationDelay:n,timeShiftBufferDepth:u,presentationLiveGap:p,availabilityStartTime:q,periods:[{duration:(+c.getAttribute("Duration")||Infinity)/d,adaptations:h,laFragCount:+c.getAttribute("LookAheadFragmentCount")}]}}function t(a){return"string"==typeof a?h(a):w(a)}var q=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{},x=q.suggestedPresentationDelay||20,z=q.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,B=q.minRepresentationBitrate||19E4,G=q.keySystems||g;t.parseFromString=h;t.parseFromDocument=w;return t}},function(h,f,a){function l(a){return a.replace(e,"\n").replace(g,function(a,b){return String.fromCharCode(b)})}var k=a(3),g=/&#([0-9]+);/g,e=/<br>/gi,b=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,d=/\s*<p class=([^>]+)>(.*)/i,c=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;h.exports={parseSami:function(a,
e){var f=/<sync[ >]/ig,g=/<sync[ >]|<\/body>/ig,h=[],m=a.match(b)[1];g.exec(a);var n=/\.(\S+)\s*{([^}]*)}/gi;var q={};for(var x;x=n.exec(m);){var z=x[1];x=x[2].match(/\s*lang:\s*(\S+);/i)[1];z&&x&&(q[x]=z)}m=q[e];for(k(m,"sami: could not find lang "+e+" in CSS");;){n=f.exec(a);q=g.exec(a);if(!n&&!q)break;if(!n||!q||n.index>=q.index)throw Error("parse error");q=a.slice(n.index,q.index);n=q.match(c);if(!n)throw Error("parse error (sync time attribute)");z=+n[1];if(isNaN(z))throw Error("parse error (sync time attribute NaN)");
n=h;q=q.split("\n");z/=1E3;x=q.length;for(var B;0<=--x;)if(B=q[x].match(d)){var G=B[2];m===B[1]&&("&nbsp;"===G?n[n.length-1].end=z:n.push({text:l(G),start:z}))}}return h}}},function(h,f){function a(b,d){var c=0;b=b.firstChild;for(var e=[],f;b;){if(1===b.nodeType)switch(b.tagName.toUpperCase()){case "P":f=b;var h=d,m=c,c=l(f.getAttribute("begin"),h),t=l(f.getAttribute("end"),h),q=l(f.getAttribute("dur"),0);if("number"==!("undefined"===typeof c||k(c))&&"number"==!("undefined"===typeof t||k(t))&&"number"==
!("undefined"===typeof q||k(q)))throw Error("ttml unsupported timestamp format");0<q?(null==c&&(c=m||h),null==t&&(t=c+q)):null==t&&(t=l(f.getAttribute("duration"),0),t=0<=t?t+c:Number.MAX_VALUE);h=f.innerHTML;if(void 0===h||null===h)h=(new XMLSerializer).serializeToString(f),h=(new DOMParser).parseFromString(h,"text/html").body.firstChild.innerHTML;h=window.escape(h.replace(g,"\r\n"));h=h.replace(/%C3%26nbsp%3B/gm,"%C3%A0");f={id:f.getAttribute("xml:id")||f.getAttribute("id"),text:decodeURIComponent(h),
start:c,end:t};c=f.end;e.push(f);break;case "DIV":f=l(b.getAttribute("begin"),0),null==f&&(f=d),e.push.apply(e,a(b,f))}b=b.nextSibling}return e}function l(a,f){if(!a)return null;var c;if(c=a.match(e)){var g=c[3],h=c[4],k=c[6];return 3600*parseInt(c[2]||0,10)+60*parseInt(g,10)+parseInt(h,10)+parseFloat("0."+k)}return(c=a.match(b))?(g=c[4],parseFloat(c[1])*d[g]+f):null}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===
typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=/<br.*?>/gm,e=/^(([0-9]+):)?([0-9]+):([0-9]+)(\.([0-9]+))?$/,b=/(([0-9]+)(\.[0-9]+)?)(ms|h|m|s)/,d={h:3600,m:60,s:1,ms:.001};h.exports={parseTTML:function(b,d,e){b="string"==typeof b?(new DOMParser).parseFromString(b,"text/xml"):b;if(!(b instanceof window.Document||b instanceof window.HTMLElement))throw Error("ttml needs a Document to parse");b=b.querySelector("tt");if(!b)throw Error("ttml could not find <tt> tag");b=
a(b.querySelector("body"),0);for(d=0;d<b.length;d++){var c=b[d];c.start+=e;c.end+=e}return b}}},function(h,f){function a(a){return a*(1+.3*(2*Math.random()-1))}h.exports={getFuzzedDelay:a,getBackedoffDelay:function(f){return a(f*Math.pow(2,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)-1))}}},function(h,f){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.hash={}}a.prototype.add=function(a){this.hash[a]=!0};a.prototype.remove=
function(a){delete this.hash[a]};a.prototype.test=function(a){return!0===this.hash[a]};return a}();h.exports={SimpleSet:a}},function(h,f,a){function l(a){return null==a?"":String(a).replace(n,function(a){return r[a]})}function k(a){var b=a.getAverageBitrates(),c=void 0,e=void 0;b.video.take(1).subscribe(function(a){return e=a|0});b.audio.take(1).subscribe(function(a){return c=a|0});return{manifest:a.man,version:a.version,timeFragment:a.frag,currentTime:a.getCurrentTime(),state:a.getPlayerState(),
buffer:d(a.video.buffered),volume:a.getVolume(),video:{adaptation:a.adas.video,representation:a.reps.video,maxBitrate:a.getVideoMaxBitrate(),bufferSize:a.getVideoBufferSize(),avrBitrate:e},audio:{adaptation:a.adas.audio,representation:a.reps.audio,maxBitrate:a.getAudioMaxBitrate(),bufferSize:a.getAudioBufferSize(),avrBitrate:c}}}function g(a,b){var c=b.parentNode.querySelector("#cp--debug-infos-content");if(c){var d=void 0;try{d=k(a)}catch(B){return}var e=d,f=e.video,g=e.audio,e=e.manifest,d="<b>Player v"+
d.version+"</b> ("+d.state+")<br>";e&&f&&g&&(d+=["Container: "+l(e.transportType),"Live: "+l(""+e.isLive),"Downloading bitrate (Kbit/s):\n          "+(f.representation.bitrate/1E3).toFixed(3)+"/"+(g.representation.bitrate/1E3).toFixed(3),"Estimated bandwidth (Kbit/s):\n          "+(f.avrBitrate/1E3).toFixed(3)+"/"+(g.avrBitrate/1E3).toFixed(3),"Location: "+e.locations[0]].join("<br>"));c.innerHTML=d}}function e(a,d){var e="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+l(d.offsetTop+
10)+"px;\n  left: "+l(d.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',f=d.parentNode,h=f.querySelector("#cp--debug-infos-container");h||(h=document.createElement("div"),
h.setAttribute("id","cp--debug-infos-container"),f.appendChild(h));h.innerHTML=e;m||(m=f.querySelector("#cp--debug-hide-infos"),m.addEventListener("click",function(){return b(d)}));c&&clearInterval(c);c=setInterval(function(){return g(a,d)},1E3);g(a,d)}function b(a){(a=a.parentNode.querySelector("#cp--debug-infos-container"))&&a.parentNode.removeChild(a);c&&(clearInterval(c),c=null);m&&(m.removeEventListener("click",b),m=null)}var d=a(20).bufferedToRanges,c=void 0,m=void 0,n=/[&<>"']/g,r={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};h.exports={getDebug:k,showDebug:e,hideDebug:b,toggleDebug:function(a,c){c.parentNode.querySelector("#cp--debug-infos-container")?b(c):e(a,c)}}}])});
