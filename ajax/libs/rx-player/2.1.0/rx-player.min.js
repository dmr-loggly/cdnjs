var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[g]=a.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var g=0;return $jscomp.iteratorPrototype(function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(e,g){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var a=0,l={next:function(){if(a<e.length){var k=a++;return{value:g(k,e[k]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.polyfill=function(e,g,a,l){if(g){a=$jscomp.global;e=e.split(".");for(l=0;l<e.length-1;l++){var k=e[l];k in a||(a[k]={});a=a[k]}e=e[e.length-1];l=a[e];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");$jscomp.owns=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)};
$jscomp.polyfill("Object.assign",function(e){return e?e:function(e,a){for(var g=1;g<arguments.length;g++){var k=arguments[g];if(k)for(var h in k)$jscomp.owns(k,h)&&(e[h]=k[h])}return e}},"es6-impl","es3");$jscomp.checkStringArgs=function(e,g,a){if(null==e)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return e+""};
$jscomp.polyfill("String.prototype.includes",function(e){return e?e:function(e,a){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,a||0)}},"es6-impl","es3");$jscomp.findInternal=function(e,g,a){e instanceof String&&(e=String(e));for(var l=e.length,k=0;k<l;k++){var h=e[k];if(g.call(a,h,k,e))return{i:k,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(e,a){return $jscomp.findInternal(this,e,a).v}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e,a){return a})}},"es6","es3");
(function(e,g){"object"===typeof exports&&"object"===typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):"object"===typeof exports?exports.RxPlayer=g():e.RxPlayer=g()})(this,function(){return function(e){function g(l){if(a[l])return a[l].exports;var k=a[l]={i:l,l:!1,exports:{}};e[l].call(k.exports,k,k.exports,g);k.l=!0;return k.exports}var a={};g.m=e;g.c=a;g.i=function(a){return a};g.d=function(a,k,h){g.o(a,k)||Object.defineProperty(a,k,{configurable:!1,enumerable:!0,
get:h})};g.n=function(a){var k=a&&a.__esModule?function(){return a["default"]}:function(){return a};g.d(k,"a",k);return k};g.o=function(a,k){return Object.prototype.hasOwnProperty.call(a,k)};g.p="";return g(g.s=108)}([function(e,g,a){var l=a(7),k=a(176),h=a(40);e=function(){function a(a){this._isScalar=!1;a&&(this._subscribe=a)}a.prototype.lift=function(c){var d=new a;d.source=this;d.operator=c;return d};a.prototype.subscribe=function(a,d,b){var c=this.operator;a=k.toSubscriber(a,d,b);c?c.call(a,
this):a.add(this._subscribe(a));if(a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a};a.prototype.forEach=function(a,d){var b=this;d||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?d=l.root.Rx.config.Promise:l.root.Promise&&(d=l.root.Promise));if(!d)throw Error("no Promise impl found");return new d(function(c,d){var m=b.subscribe(function(b){if(m)try{a(b)}catch(q){d(q),m.unsubscribe()}else a(b)},d,c)})};a.prototype._subscribe=function(a){return this.source.subscribe(a)};
a.prototype[h.$$observable]=function(){return this};a.create=function(c){return new a(c)};return a}();g.Observable=e},function(e,g,a){function l(a){this.name="AssertionError";this.message=a;Error.captureStackTrace&&Error.captureStackTrace(this,l)}function k(a,c){if(!a)throw new l(c);}var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};l.prototype=
Error();k.equal=function(a,c,d){return k(a===c,d)};k.iface=function(a,c,d){k(a,c+" should be an object");for(var b in d)k.equal(h(a[b]),d[b],c+" should have property "+b+" as a "+d[b])};g.a=k},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(42);e=a(5);var h=a(52),f=a(41);a=function(a){function b(m,d,f){a.call(this);this.syncErrorValue=
null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=h.empty;break;case 1:if(!m){this.destination=h.empty;break}if("object"===typeof m){m instanceof b?(this.destination=m,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,m));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,m,d,f)}}l(b,a);b.prototype[f.$$rxSubscriber]=function(){return this};b.create=function(a,c,d){a=new b(a,c,d);
a.syncErrorThrowable=!1;return a};b.prototype.next=function(a){this.isStopped||this._next(a)};b.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))};b.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};b.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};b.prototype._next=function(a){this.destination.next(a)};b.prototype._error=function(a){this.destination.error(a);this.unsubscribe()};b.prototype._complete=
function(){this.destination.complete();this.unsubscribe()};return b}(e.Subscription);g.Subscriber=a;var c=function(a){function b(b,c,d,f){a.call(this);this._parent=b;var m;b=this;k.isFunction(c)?m=c:c&&(b=c,m=c.next,d=c.error,f=c.complete,k.isFunction(b.unsubscribe)&&this.add(b.unsubscribe.bind(b)),b.unsubscribe=this.unsubscribe.bind(this));this._context=b;this._next=m;this._error=d;this._complete=f}l(b,a);b.prototype.next=function(a){if(!this.isStopped&&this._next){var b=this._parent;b.syncErrorThrowable?
this.__tryOrSetError(b,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}};b.prototype.error=function(a){if(!this.isStopped){var b=this._parent;if(this._error)b.syncErrorThrowable?this.__tryOrSetError(b,this._error,a):this.__tryOrUnsub(this._error,a),this.unsubscribe();else if(b.syncErrorThrowable)b.syncErrorValue=a,b.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),a;}};b.prototype.complete=function(){if(!this.isStopped){var a=this._parent;this._complete&&(a.syncErrorThrowable?
this.__tryOrSetError(a,this._complete):this.__tryOrUnsub(this._complete));this.unsubscribe()}};b.prototype.__tryOrUnsub=function(a,b){try{a.call(this._context,b)}catch(p){throw this.unsubscribe(),p;}};b.prototype.__tryOrSetError=function(a,b,c){try{b.call(this._context,c)}catch(r){return a.syncErrorValue=r,a.syncErrorThrown=!0}return!1};b.prototype._unsubscribe=function(){var a=this._parent;this._parent=this._context=null;a.unsubscribe()};return b}(a)},function(e,g,a){function l(){}var k={NONE:0,
ERROR:1,WARNING:2,INFO:3,DEBUG:4},h=function(){};l.error=h;l.warn=h;l.info=h;l.debug=h;l.setLevel=function(a){"string"==typeof a&&(a=k[a]);l.error=a>=k.ERROR?console.error.bind(console):h;l.warn=a>=k.WARNING?console.warn.bind(console):h;l.info=a>=k.INFO?console.info.bind(console):h;l.debug=a>=k.DEBUG?console.log.bind(console):h};g.a=l},function(e,g,a){function l(a){var b=a.reduce(function(a,b){a[b]=b;return a},{});b.keys=a;return b}function k(a,b,c){return a+"("+b+")"+(c?": "+c.message:"")}function h(a,
b,c){this.name="MediaError";this.type=p.MEDIA_ERROR;this.reason=b;this.code=q[a];this.fatal=c;this.message=k(this.name,this.code,this.reason)}function f(a,b,c){this.name="NetworkError";this.type=p.NETWORK_ERROR;this.xhr=b.xhr;this.url=b.url;this.status=b.status;this.reqType=b.type;this.reason=b;this.code=q[a];this.fatal=c;this.message=this.reason?k(this.name,this.code,this.reason):k(this.name,this.code,{message:""+this.reqType+(0<this.status?"("+this.status+")":"")+" on "+this.url})}function c(a,
b,c){this.name="EncryptedMediaError";this.type=p.ENCRYPTED_MEDIA_ERROR;this.reason=b;this.code=q[a];this.fatal=c;this.message=k(this.name,this.code,this.reason)}function d(a,b,c){this.name="IndexError";this.type=p.INDEX_ERROR;this.indexType=b;this.reason=null;this.code=q[a];this.fatal=c;this.message=k(this.name,this.code,null)}function b(a,b,c){this.name="OtherError";this.type=p.OTHER_ERROR;this.reason=b;this.code=q[a];this.fatal=c;this.message=k(this.name,this.code,this.reason)}function m(a,b,c){this.name=
"RequestError";this.url=b.url;this.xhr=a;this.status=a.status;this.message=this.type=c}function n(a){return!!a&&!!a.type&&0<=p.keys.indexOf(a.type)}a.d(g,"a",function(){return p});a.d(g,"b",function(){return q});a.d(g,"d",function(){return h});a.d(g,"j",function(){return f});a.d(g,"c",function(){return c});a.d(g,"g",function(){return d});a.d(g,"f",function(){return b});a.d(g,"h",function(){return m});a.d(g,"i",function(){return r});a.d(g,"e",function(){return n});var p=l(["NETWORK_ERROR","MEDIA_ERROR",
"ENCRYPTED_MEDIA_ERROR","INDEX_ERROR","OTHER_ERROR"]),r=l(["TIMEOUT","ERROR_EVENT","ERROR_HTTP_CODE","PARSE_ERROR"]),q=l("PIPELINE_RESOLVE_ERROR PIPELINE_LOAD_ERROR PIPELINE_PARSING_ERROR MANIFEST_PARSE_ERROR MANIFEST_INCOMPATIBLE_CODECS_ERROR MEDIA_IS_ENCRYPTED_ERROR KEY_ERROR KEY_STATUS_CHANGE_ERROR KEY_UPDATE_ERROR KEY_LOAD_ERROR KEY_LOAD_TIMEOUT KEY_GENERATE_REQUEST_ERROR INCOMPATIBLE_KEYSYSTEMS BUFFER_APPEND_ERROR BUFFER_FULL_ERROR BUFFER_TYPE_UNKNOWN MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_SOURCE_NOT_SUPPORTED MEDIA_KEYS_NOT_SUPPORTED OUT_OF_INDEX_ERROR UNKNOWN_INDEX".split(" "));
h.prototype=Error();f.prototype=Error();f.prototype.isHttpError=function(a){return this.reqType==r.ERROR_HTTP_CODE&&this.status==a};c.prototype=Error();d.prototype=Error();b.prototype=Error();m.prototype=Error()},function(e,g,a){var l=a(17),k=a(175),h=a(42),f=a(43),c=a(27),d=a(174);e=function(){function a(a){this.closed=!1;a&&(this._unsubscribe=a)}a.prototype.unsubscribe=function(){var a=!1,b;if(!this.closed){this.closed=!0;var e=this._unsubscribe,g=this._subscriptions;this._subscriptions=null;if(h.isFunction(e)){var q=
f.tryCatch(e).call(this);q===c.errorObject&&(a=!0,(b=b||[]).push(c.errorObject.e))}if(l.isArray(g))for(var e=-1,x=g.length;++e<x;)q=g[e],k.isObject(q)&&(q=f.tryCatch(q.unsubscribe).call(q),q===c.errorObject&&(a=!0,b=b||[],q=c.errorObject.e,q instanceof d.UnsubscriptionError?b=b.concat(q.errors):b.push(q)));if(a)throw new d.UnsubscriptionError(b);}};a.prototype.add=function(b){if(!b||b===a.EMPTY)return a.EMPTY;if(b===this)return this;var c=b;switch(typeof b){case "function":c=new a(b);case "object":c.closed||
"function"!==typeof c.unsubscribe||(this.closed?c.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(c));break;default:throw Error("unrecognized teardown "+b+" added to Subscription.");}return c};a.prototype.remove=function(b){if(null!=b&&b!==this&&b!==a.EMPTY){var c=this._subscriptions;c&&(b=c.indexOf(b),-1!==b&&c.splice(b,1))}};a.EMPTY=function(a){a.closed=!0;return a}(new a);return a}();g.Subscription=e},function(e,g,a){var l=this&&this.__extends||function(a,h){function f(){this.constructor=
a}for(var c in h)h.hasOwnProperty(c)&&(a[c]=h[c]);a.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)};e=function(a){function h(f){a.call(this);this.scheduler=f}l(h,a);h.create=function(a){return new h(a)};h.dispatch=function(a){a.subscriber.complete()};h.prototype._subscribe=function(a){var c=this.scheduler;if(c)return c.schedule(h.dispatch,0,{subscriber:a});a.complete()};return h}(a(0).Observable);g.EmptyObservable=e},function(e,g,a){(function(a){g.root="object"==typeof window&&
window.window===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof a&&a.global===a&&a;if(!g.root)throw Error("RxJS could not find any global context (window, self, global)");}).call(g,a(177))},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(0);e=a(2);var h=a(5),f=a(61),c=a(134),d=a(41),b=function(a){function b(b){a.call(this,
b);this.destination=b}l(b,a);return b}(e.Subscriber);g.SubjectSubscriber=b;a=function(a){function n(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.closed=!1;this.thrownError=null}l(n,a);n.prototype[d.$$rxSubscriber]=function(){return new b(this)};n.prototype.lift=function(a){var b=new m(this,this);b.operator=a;return b};n.prototype.next=function(a){if(this.closed)throw new f.ObjectUnsubscribedError;if(!this.isStopped)for(var b=this.observers,c=b.length,b=b.slice(),d=0;d<c;d++)b[d].next(a)};
n.prototype.error=function(a){if(this.closed)throw new f.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=a;this.isStopped=!0;for(var b=this.observers,c=b.length,b=b.slice(),d=0;d<c;d++)b[d].error(a);this.observers.length=0};n.prototype.complete=function(){if(this.closed)throw new f.ObjectUnsubscribedError;this.isStopped=!0;for(var a=this.observers,b=a.length,a=a.slice(),c=0;c<b;c++)a[c].complete();this.observers.length=0};n.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;
this.observers=null};n.prototype._subscribe=function(a){if(this.closed)throw new f.ObjectUnsubscribedError;if(this.hasError)return a.error(this.thrownError),h.Subscription.EMPTY;if(this.isStopped)return a.complete(),h.Subscription.EMPTY;this.observers.push(a);return new c.SubjectSubscription(this,a)};n.prototype.asObservable=function(){var a=new k.Observable;a.source=this;return a};n.create=function(a,b){return new m(a,b)};return n}(k.Observable);g.Subject=a;var m=function(a){function b(b,c){a.call(this);
this.destination=b;this.source=c}l(b,a);b.prototype.next=function(a){var b=this.destination;b&&b.next&&b.next(a)};b.prototype.error=function(a){var b=this.destination;b&&b.error&&this.destination.error(a)};b.prototype.complete=function(){var a=this.destination;a&&a.complete&&this.destination.complete()};b.prototype._subscribe=function(a){return this.source?this.source.subscribe(a):h.Subscription.EMPTY};return b}(a);g.AnonymousSubject=m},function(e,g,a){function l(a,b){return a.reduce(function(a,c){return a.concat((b||
R).map(function(a){return a+c}))},[])}function k(a,b){return b.filter(function(b){var c;c=document.createElement(a.tagName);b="on"+b;b in c?c=!0:(c.setAttribute(b,"return;"),c="function"==typeof c[b]);return c})[0]}function h(b,c){var d=void 0;b=l(b,c);return function(c){return c instanceof N?("undefined"==typeof d&&(d=k(c,b)||null),d?S(c,d):V()):a.i(E.a)(c,b)}}function f(a){return!!M&&M.isTypeSupported(a)}function c(){return O}function d(a){return"open"==a.readyState?C.Observable.of(null):ha(a).take(1)}
function b(a){return a.readyState>=U?C.Observable.of(null):ba(a).take(1)}function m(b){return b.readyState>=P?C.Observable.of(null):a.i(E.a)(b,"canplay").take(1)}function n(b,c){function d(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a.errorCode&&(a={systemCode:a.systemCode,code:a.errorCode.code});this.name="KeySessionError";this.mediaKeyError=a;this.message="MediaKeyError code:"+a.code+" and systemCode:"+a.systemCode}d.prototype=Error();return function(f,m){var h="function"==
typeof c?c.call(this):this,k=Z(h),n=W(h).map(function(a){throw new d(h.error||a);});try{return b.call(this,f,m),a.i(H.merge)(k,n).take(1)}catch(ma){return C.Observable["throw"](ma)}}}function p(a,b){if(b instanceof da)return b._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(b);if(null!==b){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);if(a.msSetMediaKeys)return a.msSetMediaKeys(b)}}function r(a){x()||(a.requestFullscreen?a.requestFullscreen():
a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))}function q(){x()&&(F.exitFullscreen?F.exitFullscreen():F.msExitFullscreen?F.msExitFullscreen():F.mozCancelFullScreen?F.mozCancelFullScreen():F.webkitExitFullscreen&&F.webkitExitFullscreen())}function x(){return!!(F.fullscreenElement||F.mozFullScreenElement||F.webkitFullscreenElement||F.msFullscreenElement)}function t(){var b=
void 0;null!=F.hidden?b="":null!=F.mozHidden?b="moz":null!=F.msHidden?b="ms":null!=F.webkitHidden&&(b="webkit");var c=b?b+"Hidden":"hidden",b=b+"visibilitychange";return a.i(E.a)(F,b).map(function(){return F[c]})}function w(){return a.i(E.a)(I,"resize")}function v(a,b){var c,d=void 0;O?(c=a.textTracks.length,c=0<c?a.textTracks[c-1]:a.addTextTrack("subtitles"),c.mode=b?c.HIDDEN:c.SHOWING):(d=document.createElement("track"),a.appendChild(d),c=d.track,d.kind="subtitles",c.mode=b?"hidden":"showing");
return{track:c,trackElement:d}}function y(){return!O}function u(a){return X&&"timeupdate"===a.name&&a.range&&10<a.range.end-a.ts}function B(a){a.src="";a.removeAttribute("src")}a.d(g,"a",function(){return K});a.d(g,"m",function(){return M});a.d(g,"k",function(){return f});a.d(g,"n",function(){return d});a.d(g,"o",function(){return b});a.d(g,"p",function(){return m});a.d(g,"h",function(){return ea});a.d(g,"i",function(){return Q});a.d(g,"j",function(){return ca});a.d(g,"f",function(){return na});a.d(g,
"g",function(){return c});a.d(g,"c",function(){return x});a.d(g,"b",function(){return oa});a.d(g,"e",function(){return r});a.d(g,"d",function(){return q});a.d(g,"v",function(){return w});a.d(g,"u",function(){return t});a.d(g,"r",function(){return v});a.d(g,"l",function(){return B});a.d(g,"s",function(){return y});a.d(g,"q",function(){return u});a.d(g,"t",function(){return O});a(3);var A=a(31),z=a(10),G=a(1),C=a(0);a.n(C);var H=a(14);a.n(H);e=a(54);a.n(e);g=a(141);a.n(g);var D=a(53);a.n(D);var E=a(11),
L=a(4),T=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),S=e.FromEventObservable.create,V=g.NeverObservable.create,Y=D.DeferObservable.create,F=document,I=window,R=["","webkit","moz","ms"],N=I.HTMLElement,K=I.HTMLVideoElement,M=I.MediaSource||I.MozMediaSource||I.WebKitMediaSource||I.MSMediaSource,J=I.MediaKeys||
I.MozMediaKeys||I.WebKitMediaKeys||I.MSMediaKeys,O="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),X=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),U=1,P=4,da=function(){},Q=void 0;navigator.requestMediaKeySystemAccess&&(Q=function(b,c){return a.i(E.b)(navigator.requestMediaKeySystemAccess(b,c))});var ea=function(){function a(b,c,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this._keyType=b;this._mediaKeys=c;this._configuration=d}a.prototype.createMediaKeys=function(){return C.Observable.of(this._mediaKeys)};a.prototype.getConfiguration=function(){return this._configuration};T(a,[{key:"keySystem",get:function(){return this._keyType}}]);return a}(),ba=h(["loadedmetadata"]),ha=h(["sourceopen","webkitsourceopen"]);e=h(["encrypted","needkey"]);var fa=h(["keymessage","message"]),Z=h(["keyadded","ready"]),W=h(["keyerror","error"]);g=h(["keystatuseschange"]);var na={onEncrypted:e,
onKeyMessage:fa,onKeyStatusesChange:g,onKeyError:W};if(!Q&&K.prototype.webkitGenerateKeyRequest){var ia=function(b,c){var d=this;A.a.call(this);this.sessionId="";this._vid=b;this._key=c;this._con=a.i(H.merge)(fa(b),Z(b),W(b)).subscribe(function(a){return d.trigger(a.type,a)})};ia.prototype=Object.assign({generateRequest:function(a,b){this._vid.webkitGenerateKeyRequest(this._key,b)},update:n(function(b,c){if(0<=this._key.indexOf("clearkey")){var d=JSON.parse(a.i(z.a)(b)),f=a.i(z.b)(atob(d.keys[0].k)),
d=a.i(z.b)(atob(d.keys[0].kid));this._vid.webkitAddKey(this._key,f,d,c)}else this._vid.webkitAddKey(this._key,b,null,c);this.sessionId=c}),close:function(){this._con&&this._con.unsubscribe();this._vid=this._con=null}},A.a.prototype);da=function(a){this.ks_=a};da.prototype={_setVideo:function(a){this._vid=a},createSession:function(){return new ia(this._vid,this.ks_)}};var pa=function(a){var b=F.querySelector("video")||F.createElement("video");return b&&b.canPlayType?!!b.canPlayType("video/mp4",a):
!1},Q=function(a,b){if(!pa(a))return C.Observable["throw"]();for(var c=0;c<b.length;c++){var d=b[c],f=d.videoCapabilities,m=d.audioCapabilities,h=d.initDataTypes,k=d.sessionTypes,n=d.distinctiveIdentifier,d=d.persistentState,e=!0;if(e=(e=(e=(e=e&&(!h||!!h.filter(function(a){return"cenc"===a})[0]))&&(!k||k.filter(function(a){return"temporary"===a}).length===k.length))&&"required"!==n)&&"required"!==d)return c={videoCapabilities:f,audioCapabilities:m,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",
persistentState:"not-allowed",sessionTypes:["temporary"]},C.Observable.of(new ea(a,new da(a),c))}return C.Observable["throw"]()}}else if(J&&!Q){var ja=function(a){A.a.call(this);this.sessionId="";this._mk=a};ja.prototype=Object.assign({generateRequest:function(b,c){var d=this;this._ss=this._mk.memCreateSession("video/mp4",c);this._con=a.i(H.merge)(fa(this._ss),Z(this._ss),W(this._ss)).subscribe(function(a){return d.trigger(a.type,a)})},update:n(function(b,c){a.i(G.a)(this._ss);this._ss.update(b,c);
this.sessionId=c},function(){return this._ss}),close:function(){this._ss&&(this._ss.close(),this._ss=null);this._con&&(this._con.unsubscribe(),this._con=null)}},A.a.prototype);J.prototype.alwaysRenew=!0;J.prototype.memCreateSession=J.prototype.createSession;J.prototype.createSession=function(){return new ja(this)};Q=function(a,b){if(!J.isTypeSupported(a))return C.Observable["throw"]();for(var c=0;c<b.length;c++){var d=b[c],f=d.videoCapabilities,m=d.audioCapabilities,h=d.initDataTypes,d=d.distinctiveIdentifier,
k=!0;if(k=(k=k&&(!h||!!h.filter(function(a){return"cenc"===a})[0]))&&"required"!==d)return c={videoCapabilities:f,audioCapabilities:m,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},C.Observable.of(new ea(a,new J(a),c))}return C.Observable["throw"]()}}J||(e=function(){throw new L.d("MEDIA_KEYS_NOT_SUPPORTED",null,!0);},J={create:e,isTypeSupported:e});var ca=function(b,c){return Y(function(){return a.i(E.b)(p(b,
c))})};if(I.WebKitSourceBuffer&&!I.WebKitSourceBuffer.prototype.addEventListener){e=I.WebKitSourceBuffer.prototype;for(var aa in A.a.prototype)e[aa]=A.a.prototype[aa];e.__listeners=[];e.appendBuffer=function(a){if(this.updating)throw Error("updating");this.trigger("updatestart");this.updating=!0;try{this.append(a)}catch(ka){this.__emitUpdate("error",ka);return}this.__emitUpdate("update")};e.__emitUpdate=function(a,b){var c=this;setTimeout(function(){c.trigger(a,b);c.updating=!1;c.trigger("updateend")},
0)}}var oa=h(["fullscreenchange","FullscreenChange"],R.concat("MS"))},function(e,g,a){function l(a){for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d)&255;return c}function k(a){return String.fromCharCode.apply(null,a)}function h(a){for(var b="",c=a.length,d=0;d<c;d+=2)b+=String.fromCharCode(a[d]);return b}function f(a){for(var b=a.length,c=new Uint8Array(b/2),d=0,f=0;d<b;d+=2,f++)c[f]=parseInt(a.substr(d,2),16)&255;return c}function c(a,b){b||(b="");for(var c="",d=0;d<a.byteLength;d++)c+=
(a[d]>>>4).toString(16),c+=(a[d]&15).toString(16),b.length&&d<a.byteLength-1&&(c+=b);return c}function d(){for(var a=arguments.length,b=-1,c=0,d;++b<a;)d=arguments[b],c+="number"===typeof d?d:d.length;for(var c=new Uint8Array(c),f=0,b=-1;++b<a;)d=arguments[b],"number"===typeof d?f+=d:0<d.length&&(c.set(d,f),f+=d.length);return c}function b(a,b){return(a[0+b]<<8)+(a[1+b]<<0)}function m(a,b){return 16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b]}function n(a,b){return 4294967296*(16777216*a[0+b]+65536*
a[1+b]+256*a[2+b]+a[3+b])+16777216*a[4+b]+65536*a[5+b]+256*a[6+b]+a[7+b]}function p(a){return new Uint8Array([a>>>8&255,a&255])}function r(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])}function q(a){var b=a%4294967296;a=(a-b)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255])}function x(a,b){return(a[0+b]<<0)+(a[1+b]<<8)}function t(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]}function w(a){v.a.equal(a.length,
16,"UUID length should be 16");var b=l(a);a=b[0];var d=b[1],f=b[2],m=b[3],h=b[4],k=b[5],n=b[6],e=b[7],p=b.subarray(8,10),b=b.subarray(10,16),t=new Uint8Array(16);t[0]=m;t[1]=f;t[2]=d;t[3]=a;t[4]=k;t[5]=h;t[6]=e;t[7]=n;t.set(p,8);t.set(b,10);return c(t)}a.d(g,"b",function(){return l});a.d(g,"a",function(){return k});a.d(g,"k",function(){return h});a.d(g,"j",function(){return f});a.d(g,"o",function(){return c});a.d(g,"h",function(){return d});a.d(g,"g",function(){return b});a.d(g,"e",function(){return m});
a.d(g,"f",function(){return n});a.d(g,"d",function(){return x});a.d(g,"c",function(){return t});a.d(g,"m",function(){return p});a.d(g,"i",function(){return r});a.d(g,"n",function(){return q});a.d(g,"l",function(){return w});var v=a(1)},function(e,g,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&
(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function k(a,c){return Array.isArray(c)?b.merge.apply(null,c.map(function(b){return m(a,b)})):m(a,c)}function h(a){return a instanceof d.Observable?a:a&&"function"==typeof a.subscribe?new d.Observable(function(b){var c=a.subscribe(function(a){return b.next(a)},function(a){return b.error(a)},function(){return b.complete()});return function(){c&&c.dispose?c.dispose():c&&c.unsubscribe&&c.unsubscribe()}}):a&&"function"==typeof a.then?n(a):
d.Observable.of(a)}function f(a){return new p(a)}function c(a,b){try{return a(b)}catch(t){return d.Observable["throw"](t)}}a.d(g,"a",function(){return k});a.d(g,"e",function(){return f});a.d(g,"c",function(){return c});a.d(g,"b",function(){return h});a.d(g,"d",function(){return r});var d=a(0);a.n(d);var b=a(14);a.n(b);e=a(54);a.n(e);g=a(55);a.n(g);var m=e.FromEventObservable.create,n=g.PromiseObservable.create,p=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var d;d=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.value=c;return d}l(b,a);b.prototype._subscribe=function(a){a.next(this.value)};return b}(d.Observable),r=function(a){var b=!1;return function(){if(b)return d.Observable.empty();b=!0;return h(a.apply(void 0,arguments))["do"](null,function(){return b=!1},function(){return b=!1})}}},function(e,g,a){var l=this&&this.__extends||function(a,
h){function f(){this.constructor=a}for(var c in h)h.hasOwnProperty(c)&&(a[c]=h[c]);a.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)};e=function(a){function h(){a.apply(this,arguments)}l(h,a);h.prototype.notifyNext=function(a,c,d,b,m){this.destination.next(c)};h.prototype.notifyError=function(a,c){this.destination.error(a)};h.prototype.notifyComplete=function(a){this.destination.complete()};return h}(a(2).Subscriber);g.OuterSubscriber=e},function(e,g,a){var l=this&&this.__extends||
function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(0);var k=a(36),h=a(6),f=a(18);a=function(a){function c(b,c){a.call(this);this.array=b;this.scheduler=c;c||1!==b.length||(this._isScalar=!0,this.value=b[0])}l(c,a);c.create=function(a,d){return new c(a,d)};c.of=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=a[a.length-1];f.isScheduler(d)?a.pop():d=null;var n=
a.length;return 1<n?new c(a,d):1===n?new k.ScalarObservable(a[0],d):new h.EmptyObservable(d)};c.dispatch=function(a){var b=a.array,c=a.index,d=a.subscriber;c>=a.count?d.complete():(d.next(b[c]),d.closed||(a.index=c+1,this.schedule(a)))};c.prototype._subscribe=function(a){var b=this.array,d=b.length,f=this.scheduler;if(f)return f.schedule(c.dispatch,0,{array:b,index:0,count:d,subscriber:a});for(f=0;f<d&&!a.closed;f++)a.next(b[f]);a.complete()};return c}(e.Observable);g.ArrayObservable=a},function(e,
g,a){e=a(156);g.merge=e.mergeStatic},function(e,g,a){var l=a(7),k=a(17),h=a(64),f=a(0),c=a(39),d=a(131),b=a(40);g.subscribeToResult=function(a,n,e,g){var m=new d.InnerSubscriber(a,e,g);if(m.closed)return null;if(n instanceof f.Observable)return n._isScalar?(m.next(n.value),m.complete(),null):n.subscribe(m);if(k.isArray(n)){a=0;for(e=n.length;a<e&&!m.closed;a++)m.next(n[a]);m.closed||m.complete()}else{if(h.isPromise(n))return n.then(function(a){m.closed||(m.next(a),m.complete())},function(a){return m.error(a)}).then(null,
function(a){l.root.setTimeout(function(){throw a;})}),m;if("function"===typeof n[c.$$iterator]){n=n[c.$$iterator]();do{a=n.next();if(a.done){m.complete();break}m.next(a.value);if(m.closed)break}while(1)}else if("function"===typeof n[b.$$observable])if(n=n[b.$$observable](),"function"!==typeof n.subscribe)m.error(Error("invalid observable"));else return n.subscribe(new d.InnerSubscriber(a,e,g));else m.error(new TypeError("unknown type returned"))}return null}},function(e,g,a){g.a=function k(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");this.id=a.id;this.duration=a.duration;this.isInit=!!a.init;this.range=a.range;this.time=a.time;this.indexRange=a.indexRange;this.number=a.number;this.timescale=a.timescale;this.media=a.media}},function(e,g,a){g.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(e,g,a){g.isScheduler=function(a){return a&&"function"===typeof a.schedule}},
function(e,g,a){function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function k(a){for(var b=a.length,c=[],d=0;d<b;d++)c.push(new r(a.start(d),a.end(d),0));return c}function h(a){for(var b=a.length,c=[],d=0;d<b;d++)c.push(a[d].clone());return c}function f(a,b){return a.start<=b&&b<a.end}function c(a,b){for(var c=0;c<b.length;c++)if(d(a,b[c]))return b[c];return null}function d(a,b){return f(a,b.start)||f(a,b.end)||f(b,a.start)}function b(a,b){return f(a,b.start)&&
f(a,b.end)}function m(a){for(var b=1;b<a.length;b++){var c=a[b-1],d=a[b];c.bitrate===d.bitrate&&(Math.abs(d.start-c.end)<p||Math.abs(d.end-c.start)<p)&&(c=new r(Math.min(c.start,d.start),Math.max(c.end,d.end),d.bitrate),a.splice(--b,2,c))}return a}function n(a){a=h(a);for(var b=0;b<a.length;b++)a[b].bitrate=0;return m(a)}a.d(g,"b",function(){return k});a.d(g,"a",function(){return q});a(1);var p=1/60,r=function(){function a(b,c,d){l(this,a);this.start=b;this.end=c;this.bitrate=d}a.prototype.isNil=
function(){return this.start===this.end};a.prototype.clone=function(){return new a(this.start,this.end,this.bitrate)};return a}(),q=function(){function a(b){l(this,a);this.ranges=b=b?Array.isArray(b)?h(b):k(b):[];this.length=b.length}a.prototype.start=function(a){return this.ranges[a].start};a.prototype.end=function(a){return this.ranges[a].end};a.prototype.hasRange=function(a,b){for(var c=a+b,d=0;d<this.ranges.length;d++){var f=this.ranges[d],m=f.start,f=f.end;if(m-a<=p&&a-f<=p&&m-c<=p&&c-f<=p)return this.ranges[d]}return null};
a.prototype.getRange=function(a){for(var b=0;b<this.ranges.length;b++)if(f(this.ranges[b],a))return this.ranges[b];return null};a.prototype.getOuterRanges=function(a){for(var b=[],c=0;c<this.ranges.length;c++)f(this.ranges[c],a)||b.push(this.ranges[c]);return b};a.prototype.getGap=function(a){var b=this.getRange(a);return b?b.end-a:Infinity};a.prototype.getLoaded=function(a){var b=this.getRange(a);return b?a-b.start:0};a.prototype.getSize=function(a){return(a=this.getRange(a))?a.end-a.start:0};a.prototype.getNextRangeGap=
function(a){for(var b=this.ranges,c=-1,d=void 0;++c<b.length;){var f=b[c].start;if(f>a){d=f;break}}return null!=d?d-a:Infinity};a.prototype.insert=function(a,c,f){var h=this.ranges;a=new r(c,f,a);if(!a.isNil()){for(c=0;c<h.length;c++){f=h[c];var k=d(a,f),n=Math.abs(f.start-a.end)<p||Math.abs(f.end-a.start)<p;if(k||n)if(a.bitrate===f.bitrate)a=new r(Math.min(a.start,f.start),Math.max(a.end,f.end),f.bitrate),h.splice(c--,1);else if(k)if(b(f,a))h.splice(++c,0,a),k=f.end,f.end=a.start,a=new r(a.end,k,
f.bitrate);else if(b(a,f))h.splice(c--,1);else if(f.start<a.start)f.end=a.start;else{f.start=a.end;break}else break;else if(0===c){if(a.end<=h[0].start)break}else if(h[c-1].end<=a.start&&a.end<=f.start)break}h.splice(c,0,a);for(a=0;a<h.length;a++)h[a].isNil()&&h.splice(a++,1);m(h)}this.length=this.ranges.length;return this.ranges};a.prototype.remove=function(b,c){this.intersect(new a([new r(0,b,0),new r(c,Infinity,0)]))};a.prototype.equals=function(a){a:{var b=a.ranges;a=n(this.ranges);for(var b=
n(b),d=0;d<a.length;d++){var f=a[d],m=c(f,b);if(!(m&&Math.abs(m.start-f.start)<p&&Math.abs(m.end-f.end)<p)){a=!1;break a}}a=!0}return a};a.prototype.intersect=function(a){var b=this.ranges;a=a.ranges;for(var d=0;d<b.length;d++){var f=b[d],m=c(f,a);m?(m.start>f.start&&(f.start=m.start),m.end<f.end&&(f.end=m.end)):b.splice(d--,1)}this.length=this.ranges.length;return this.ranges};return a}()},function(e,g,a){a.d(g,"e",function(){return k});a.d(g,"d",function(){return h});a.d(g,"a",function(){return f});
a.d(g,"b",function(){return c});a.d(g,"c",function(){return d});a(1);var l=a(16),k=function(a,c,d){var b=a.presentationTimeOffset||0;a=a.timescale||1;return{up:c*a-b,to:(c+d)*a-b}},h=function(a){var b=a.ts,c=a.d;a=a.r;return-1===c?b:b+(a+1)*c},f=function(a,c){var b=c.initialization,b=void 0===b?{}:b;return new l.a({id:""+a+"_init",init:!0,range:b.range||null,indexRange:c.indexRage||null,media:b.media})},c=function(a,c){a.timescale!==c&&(a.timescale=c);return a},d=function(a,c){return c/a.timescale}},
function(e,g,a){function l(a){if(null!=a){var b;"string"===typeof a?(b=a,a=!1):(b=f(a.language),a=!!a.closedCaption);return{language:b,closedCaption:a}}}function k(a){if(null!=a){var b;"string"===typeof a?(b=a,a=!1):(b=f(a.language),a=!!a.audioDescription);return{language:b,audioDescription:a}}}function h(a,m){if(!m)return-1;m=f(m);for(var h=d;h<=b;h++)for(var k=0;k<a.length;k++){var n;n=f(a[k]);var e=m,g=h;if(n===e)n=!0;else{var p=n.split("-")[0],e=e.split("-")[0];n=g>=c.BASE_LANG_MATCH&&n===e?!0:
g>=c.OTHER_SUBLANG_MATCH&&p===e?!0:!1}if(n)return k}return-1}function f(a){if(null==a||""===a)return"";a=(""+a).toLowerCase().split("-");var b=a[0],c=void 0;2===b.length?c=m[b]:3===b.length&&(c=n[b]);(b=c||b)&&(a[0]=b);return a.join("-")}a.d(g,"c",function(){return f});a.d(g,"a",function(){return k});a.d(g,"b",function(){return l});a.d(g,"d",function(){return h});var c={PERFECT_MATCH:0,BASE_LANG_MATCH:1,OTHER_SUBLANG_MATCH:2},d=c.PERFECT_MATCH,b=c.OTHER_SUBLANG_MATCH,m={aa:"aar",ab:"abk",ae:"ave",
af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bh:"bih",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"baq",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fre",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",
hr:"hrv",ht:"hat",hu:"hun",hy:"arm",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"ice",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"geo",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mao",mk:"mac",ml:"mal",mn:"mon",mr:"mar",ms:"may",mt:"mlt",my:"bur",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",
nl:"dut",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"alb",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",
ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"chi",zu:"zul"},n={tib:"bod",cze:"ces",wel:"cym",ger:"deu",gre:"ell",eus:"baq",per:"fas",fra:"fre",hye:"arm",isl:"ice",kat:"geo",mri:"mao",mkd:"mac",msa:"may",mya:"bur",nld:"dut",rum:"ron",slo:"slk",sqi:"alb",zho:"chi"}},function(e,g,a){var l=a(18),k=a(17),h=a(13),f=a(145);g.combineLatest=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var b=d=null;l.isScheduler(a[a.length-
1])&&(b=a.pop());"function"===typeof a[a.length-1]&&(d=a.pop());1===a.length&&k.isArray(a[0])&&(a=a[0]);return(new h.ArrayObservable(a,b)).lift(new f.CombineLatestOperator(d))}},function(e,g,a){function l(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=
c)}function k(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}function h(a){return"number"==typeof a&&!isNaN(a)||!isNaN(+a)?!0:!1}a.d(g,"b",function(){return c});a.d(g,"a",function(){return d});var f=a(34),c=function(){function b(a,c,d,f,e,g,l,w,v,y){k(this,b);this.id=d;this.ada=a;this.rep=c;this.time=h(e)?+e:-1;this.duration=h(g)?+g:-1;this.number=h(l)?+l:-1;this.media=f?""+f:"";this.range=Array.isArray(w)?w:null;this.indexRange=Array.isArray(v)?v:null;this.init=
!!y}b.create=function(a,c,d,f,h,k,e,g,l,y){return new b(a,c,a.id+"_"+c.id+"_"+d,f,h,k,e,g,l,y)};b.prototype.getId=function(){return this.id};b.prototype.getAdaptation=function(){return this.ada};b.prototype.getRepresentation=function(){return this.rep};b.prototype.getTime=function(){return this.time};b.prototype.getDuration=function(){return this.duration};b.prototype.getNumber=function(){return this.number};b.prototype.getMedia=function(){return this.media};b.prototype.getRange=function(){return this.range};
b.prototype.getIndexRange=function(){return this.indexRange};b.prototype.isInitSegment=function(){return this.init};b.prototype.getResolvedURL=function(){return a.i(f.b)(this.ada.rootURL,this.ada.baseURL,this.rep.baseURL)};return b}(),d=function(a){function b(c,d,f,h,m){k(this,b);c=a.call(this,c,d,c.id+"_"+d.id+"_init",f,-1,-1,-1,h,m,!0);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?this:c}l(b,a);
return b}(c)},function(e,g,a){var l=a(25),k=a(32);e=function(){function h(){var f=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");var d=a.i(k.a)();this.id=null==c.id?d:""+c.id;this.type=c.type||"";this.representations=Array.isArray(c.representations)?c.representations.map(function(a){return new l.a(Object.assign({rootId:f.id},a))}).sort(function(a,c){return a.bitrate-c.bitrate}):[];null!=c.lang?this.language=
c.lang:null!=c.language&&(this.language=c.language);d=c.accessibility;Array.isArray(d)&&(d.includes("audioDescription")&&(this.isAudioDescription=!0),d.includes("closedCaption")&&(this.isClosedCaption=!0));this.manual=c.manual}h.prototype.getAvailableBitrates=function(){return this.representations.map(function(a){return a.bitrate})};h.prototype.getRepresentationsForBitrate=function(a){return this.representations.filter(function(c){return c.bitrate===a})||null};return h}();g.a=e},function(e,g,a){var l=
a(32),k=a(115);g.a=function f(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var d=a.i(l.a)();this.id=null==c.id?d:c.id;this.bitrate=c.bitrate;this.codec=c.codecs;null!=c.height&&(this.height=c.height);null!=c.width&&(this.width=c.width);null!=c.mimeType&&(this.mimeType=c.mimeType);this.index=new k.a({index:c.index,rootId:(null==c.rootId?"":c.rootId+"_")+this.id})}},function(e,g,a){e=a(59);a=a(60);
g.async=new a.AsyncScheduler(e.AsyncAction)},function(e,g,a){g.errorObject={e:{}}},function(e,g,a){var l=a(23);e=function(){function a(h,f,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=h;this.representation=f;this.index=c}a.getRangeEnd=function(a){var f=a.ts,c=a.d;a=a.r;return-1===c?f:f+(a+1)*c};a.getLiveEdge=function(h,f){var c=a.getRangeEnd(h.timeline[h.timeline.length-1])/h.timescale-f.suggestedPresentationDelay;return Math.max(h.timeline[0].ts/
h.timescale+1,c)};a.prototype.createSegment=function(a,f,c){return l.b.create(this.adaptation,this.representation,a,this.index.media,a,c,0,f,null,!1)};a.prototype.calculateRepeat=function(a,f){var c=a.r||0;0>c&&(c=Math.ceil(((f?f.t:Infinity)-a.ts)/a.d)-1);return c};a.prototype.checkDiscontinuity=function(h){var f=this.index.timeline;if(0>=h)return-1;var c=this.getSegmentIndex(h);if(0>c||c>=f.length-1)return-1;var d=f[c];if(-1===d.d)return-1;var b=d.ts,d=a.getRangeEnd(d),f=f[c+1],c=this.index.timescale||
1;return d!==f.ts&&h>=b&&h<=d&&d-h<c?f.ts:-1};a.prototype.checkRange=function(h,f,c){h=this.index.timeline;h=h[h.length-1];if(!h)return!0;0>h.d&&(h={ts:h.ts,d:0,r:h.r});return c<=a.getRangeEnd(h)};a.prototype.getSegmentIndex=function(a){for(var f=this.index.timeline,c=0,d=f.length;c<d;){var b=c+d>>>1;f[b].ts<a?c=b+1:d=b}return 0<c?c-1:c};a.prototype.getSegmentNumber=function(a,f,c){a=f-a;return 0<a?Math.floor(a/c):0};a.prototype.getSegments=function(a,f){var c=this.index.timeline,d=[],b=c.length,
m=this.getSegmentIndex(a)-1,h=c.length&&c[0].d||0;a:for(;!(++m>=b);){var k=c[m],e=k.d,g=k.ts,l=k.range,h=Math.max(h,e);if(0>e){g+h<f&&d.push(this.createSegment(g,l,void 0));break}for(var k=this.calculateRepeat(k,c[m+1]),t=this.getSegmentNumber(g,a,e),w;(w=g+t*e)<f;)if(t++<=k)d.push(this.createSegment(w,l,e));else continue a;break}return d};a.prototype.addSegment=function(h,f){var c=this.index.timeline,d=c.length,b=c[d-1];if(f&&h.ts===f.ts){var m=h.ts+h.d,k=m-(b.ts+b.d*b.r);if(0>=k)return!1;-1===b.d&&
((d=c[d-2])&&d.d===k?(d.r++,c.pop()):b.d=k);c.push({d:-1,ts:m,r:0});return!0}return h.ts>=a.getRangeEnd(b)?(b.d===h.d?b.r++:c.push({d:h.d,ts:h.ts,r:0}),!0):!1};return a}();g.a=e},function(e,g,a){function l(b){var c=a.i(y.a)(b.locations[0]);(b=b.periods[0])&&b.baseURL&&(c+=""+b.baseURL);return c}function k(a,b,f,k){if(!b.transportType)throw new B.d("MANIFEST_PARSE_ERROR",null,!0);b.id=b.id||C++;b.type=b.type||"static";var e=b.locations;e&&e.length||(b.locations=[a]);b.isLive="dynamic"==b.type;var n=
{rootURL:l(b),baseURL:b.baseURL,isLive:b.isLive};f&&(f=c(f));k&&(k=d(k));a=b.periods.map(function(a){return h(a,n,f,k)});b=m(b,a[0]);b.periods=null;b.duration||(b.duration=Infinity);b.isLive&&(b.suggestedPresentationDelay=b.suggestedPresentationDelay||D,b.availabilityStartTime=b.availabilityStartTime||0);return b}function h(a,b,c,d){a.id=a.id||C++;var m=a.adaptations,m=m.concat(c||[]),m=m.concat(d||[]),m=m.map(function(a){return f(a,b)}),m=m.filter(function(a){return 0>H.indexOf(a.type)?(v.a.info("not supported adaptation type",
a.type),!1):!0});if(0===m.length)throw new B.d("MANIFEST_PARSE_ERROR",null,!0);c={};for(d=0;d<m.length;d++){var h=m[d],k=h.type,e=h.representations;c[k]=c[k]||[];0<e.length&&c[k].push(h)}for(var n in c)if(0===c[n].length)throw new B.d("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!0);a.adaptations=c;return a}function f(b,c){if("undefined"==typeof b.id)throw new B.d("MANIFEST_PARSE_ERROR",null,!0);var d=m(c,b),f={};G.forEach(function(a){a in d&&(f[a]=d[a])});var h=d.representations.map(function(a){if("undefined"==
typeof a.id)throw new B.d("MANIFEST_PARSE_ERROR",null,!0);a=m(f,a);a.index=a.index||{};a.index.timescale||(a.index.timescale=1);a.bitrate||(a.bitrate=1);"mp4a.40.02"==a.codecs&&(a.codecs="mp4a.40.2");return a}).sort(function(a,b){return a.bitrate-b.bitrate}),k=d.type,e=d.accessibility,e=void 0===e?[]:e;if(!k)throw new B.d("MANIFEST_PARSE_ERROR",null,!0);"video"==k||"audio"==k?(h=h.filter(function(b){return a.i(u.k)(r(b))}),"audio"===k&&(k=e.includes("visuallyImpaired"),d.audioDescription=k)):"text"===
k&&(k=e.includes("hardOfHearing"),d.closedCaption=k);d.representations=h;d.bitrates=h.map(function(a){return a.bitrate});return d}function c(a){Array.isArray(a)||(a=[a]);return a.reduce(function(a,b){var c=b.mimeType,d=b.url,f=b.language,m=b.languages,h=b.closedCaption;f&&(m=[f]);return a.concat(m.map(function(a){return{id:C++,type:"text",lang:a,closedCaption:!!h,baseURL:d,representations:[{id:C++,mimeType:c,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}}))},[])}
function d(a){Array.isArray(a)||(a=[a]);return a.map(function(a){var b=a.mimeType;a=a.url;return{id:C++,type:"image",baseURL:a,representations:[{id:C++,mimeType:b,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})}function b(a,c){for(var d in a)if(c.hasOwnProperty(d)){var f=a[d],m=c[d];"string"==typeof f||"number"==typeof f||"object"==("undefined"===typeof f?"undefined":z(f))&&f instanceof Date?a[d]=m:Array.isArray(f)?(f.length=0,Array.prototype.push.apply(f,m)):
a[d]=b(f,m)}return a}function m(){for(var a={},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];for(b=c.length-1;0<=b;b--){var d=c[b],f;for(f in d)if(!a.hasOwnProperty(f)){var h=d[f];h&&"object"===("undefined"===typeof h?"undefined":z(h))?h instanceof Date?a[f]=new Date(h.getTime()):Array.isArray(h)?a[f]=h.slice(0):a[f]=m(h):a[f]=h}}return a}function n(a,c){var d=a.adaptations,f=c.adaptations,m=function(a){var c=f[a];d[a].forEach(function(a,d){a.representations.forEach(function(a,f){b(a.index,
c[d].representations[f].index)})})},h;for(h in d)m(h);return a}function p(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;a.isLive&&(a.presentationLiveGap+=b)}function r(a){return a.mimeType+';codecs="'+a.codecs+'"'}function q(a){a=a.adaptations;if(!a)return[];var b=[],c;for(c in a){var d=a[c];b.push({type:c,adaptations:d,codec:r(d[0].representations[0])})}return b}function x(a,b){var c=a.adaptations;return(c=c&&c[b])?c:[]}function t(b){return x(b,"audio").map(function(b){return{language:a.i(A.c)(b.lang),
audioDescription:b.audioDescription,id:b.id}})}function w(b){return x(b,"text").map(function(b){return{language:a.i(A.c)(b.lang),closedCaption:b.closedCaption,id:b.id}})}a.d(g,"d",function(){return k});a.d(g,"e",function(){return n});a.d(g,"f",function(){return p});a.d(g,"g",function(){return q});a.d(g,"c",function(){return x});a.d(g,"b",function(){return w});a.d(g,"a",function(){return t});var v=a(3),y=a(34),u=a(9),B=a(4),A=a(21),z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},G="audioSamplingRate codecs codingDependency frameRate height index maxPlayoutRate maximumSAPPeriod mimeType profiles segmentProfiles width".split(" "),C=0,H=["audio","video","text","image"],D=15},function(e,g,a){var l=a(16),k=a(20),h=function(a,c){for(var d=a.timeline,b=0,f=d.length;b<f;){var h=b+f>>>1;d[h].ts<c?b=h+1:f=h}return 0<b?b-1:b};g.a={getInitSegment:k.a,setTimescale:k.b,scale:k.c,
getSegments:function(f,c,d,b){b=a.i(k.e)(c,d,b);d=b.up;b=b.to;var m=c.timeline,e=c.timescale,g=[],r=m.length;c=h(c,d)-1;var q=m.length&&m[0].d||0;a:for(;!(++c>=r);){var x=m[c],t=x.d,w=x.ts,v=x.range,q=Math.max(q,t);if(0>t){w+q<b&&g.push(new l.a({id:""+f+"_"+w,time:w,init:!1,range:v,duration:void 0,indexRange:null,timescale:e}));break}var y=m[c+1],u=x.r||0;0>u&&(u=Math.ceil(((y?y.t:Infinity)-x.ts)/x.d)-1);x=u;y=d-w;y=0<y?Math.floor(y/t):0;for(;(u=w+y*t)<b;)if(y++<=x)g.push(new l.a({id:""+f+"_"+u,time:u,
init:!1,range:v,duration:t,indexRange:null,timescale:e}));else continue a;break}return g},shouldRefresh:function(f,c,d,b){f=f.timeline;f=f[f.length-1];if(!f)return!0;0>f.d&&(f={ts:f.ts,d:0,r:f.r});return!(b<=a.i(k.d)(f))},getFirstPosition:function(a){if(a.timeline.length)return a.timeline[0].ts/a.timescale},getLastPosition:function(f){if(f.timeline.length){var c=f.timeline[f.timeline.length-1];return a.i(k.d)(c)/f.timescale}},checkDiscontinuity:function(f,c){var d=f.timeline,b=f.timescale,b=void 0===
b?1:b,m=c*b;if(0>=m)return-1;var e=h(m);if(0>e||e>=d.length-1)return-1;var g=d[e];if(-1===g.d)return-1;var l=g.ts,g=a.i(k.d)(g),d=d[e+1];return g!==d.ts&&m>=l&&m<=g&&g-m<b?d.ts/b:-1},_addSegmentInfos:function(f,c,d){var b=f.timeline,m=b.length,h=b[m-1];if(d&&c.time===d.time){if(c=c.time+c.duration,d=c-(h.ts+h.d*h.r),!(0>=d))return-1===h.d&&((m=b[m-2])&&m.d===d?(m.r++,b.pop()):h.d=d),f.timeline.push({d:-1,ts:c,r:0}),f}else if(c.time>=a.i(k.d)(h))return h.d===c.duration?h.r++:f.timeline.push({d:c.duration,
ts:c.time,r:0}),f}}},function(e,g,a){function l(){this.__listeners={}}var k=a(1);l.prototype.addEventListener=function(h,f){a.i(k.a)("function"==typeof f,"eventemitter: second argument should be a function");this.__listeners[h]||(this.__listeners[h]=[]);this.__listeners[h].push(f)};l.prototype.removeEventListener=function(a,f){if(0===arguments.length)this.__listeners={};else if(this.__listeners.hasOwnProperty(a))if(1===arguments.length)delete this.__listeners[a];else{var c=this.__listeners[a],d=c.indexOf(f);
~d&&c.splice(d,1);c.length||delete this.__listeners[a]}};l.prototype.trigger=function(a,f){this.__listeners.hasOwnProperty(a)&&this.__listeners[a].slice().forEach(function(a){try{a(f)}catch(d){console.error(d,d.stack)}})};l.prototype.on=l.prototype.addEventListener;l.prototype.off=l.prototype.removeEventListener;g.a=l},function(e,g,a){var l=0;g.a=function(){var a=0;l<Number.MAX_VALUE&&(a=l+1);l=a;return""+a}},function(e,g,a){function l(a,b){var c=0;return function(){c&&clearTimeout(c);c=setTimeout(a,
b)}}function k(d,b){var h=b.retryDelay,k=b.totalRetry,e=b.shouldRetry,g=b.resetDelay,q=b.errorSelector,x=b.onRetry,t=0,w=void 0;0<g&&(w=l(function(){return t=0},g));return d["catch"](function(b,d){if(e&&!e(b)||t++>=k){if(q)throw q(b,t);throw b;}x&&x(b,t);var m=a.i(f.a)(h,t);return c(m).mergeMap(function(){w&&w();return d})})}function h(d,b){var h=b.retryDelay,k=b.totalRetry,e=b.shouldRetry,g=b.resetDelay,q=b.errorSelector,x=b.onRetry,t=0,w=void 0;0<g&&(w=l(function(){return t=0},g));return function y(){for(var b=
arguments.length,m=Array(b),n=0;n<b;n++)m[n]=arguments[n];return d.apply(void 0,m)["catch"](function(b){if(e&&!e(b)||t++>=k){if(q)throw q(b,t);throw b;}x&&x(b,t);b=a.i(f.a)(h,t);return c(b).mergeMap(function(){w&&w();return y.apply(void 0,m)})})}}a.d(g,"a",function(){return k});a.d(g,"b",function(){return h});var f=a(128);e=a(56);a.n(e);var c=e.TimerObservable.create},function(e,g,a){function l(){for(var a=arguments.length,d=Array(a),b=0;b<a;b++)d[b]=arguments[b];a=d.length;if(0===a)return"";for(var b=
"",m=0;m<a;m++){var k=d[m];"string"===typeof k&&""!==k&&(h.test(k)?b=k:("/"===k[0]&&(k=k.substr(1)),"/"===b[b.length-1]&&(b=b.substr(0,b.length-1)),b=b+"/"+k))}a=b;if(f.test(a)){d=[];a=a.split("/");b=0;for(m=a.length;b<m;b++)".."==a[b]?d.pop():"."!=a[b]&&d.push(a[b]);d=d.join("/")}else d=a;return d}function k(a){var c=a.lastIndexOf("/");return 0<=c?a.substring(0,c+1):a}a.d(g,"b",function(){return l});a.d(g,"a",function(){return k});var h=/^(?:[a-z]+:)?\/\//i,f=/\/\.{1,2}\//},function(e,g,a){var l=
this&&this.__extends||function(a,f){function c(){this.constructor=a}for(var d in f)f.hasOwnProperty(d)&&(a[d]=f[d]);a.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)};e=a(8);var k=a(61);a=function(a){function f(c){a.call(this);this._value=c}l(f,a);Object.defineProperty(f.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});f.prototype._subscribe=function(c){var d=a.prototype._subscribe.call(this,c);d&&!d.closed&&c.next(this._value);return d};
f.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k.ObjectUnsubscribedError;return this._value};f.prototype.next=function(c){a.prototype.next.call(this,this._value=c)};return f}(e.Subject);g.BehaviorSubject=a},function(e,g,a){var l=this&&this.__extends||function(a,h){function f(){this.constructor=a}for(var c in h)h.hasOwnProperty(c)&&(a[c]=h[c]);a.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)};e=function(a){function h(f,c){a.call(this);
this.value=f;this.scheduler=c;this._isScalar=!0;c&&(this._isScalar=!1)}l(h,a);h.create=function(a,c){return new h(a,c)};h.dispatch=function(a){var c=a.value,d=a.subscriber;a.done?d.complete():(d.next(c),d.closed||(a.done=!0,this.schedule(a)))};h.prototype._subscribe=function(a){var c=this.value,d=this.scheduler;if(d)return d.schedule(h.dispatch,0,{done:!1,value:c,subscriber:a});a.next(c);a.closed||a.complete()};return h}(a(0).Observable);g.ScalarObservable=e},function(e,g,a){var l=this&&this.__extends||
function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(12);var k=a(15);g.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return this.lift(new h(a))};var h=function(){function a(a){this.concurrent=a}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.concurrent))};return a}();g.MergeAllOperator=h;var f=function(a){function c(b,c){a.call(this,b);this.concurrent=
c;this.hasCompleted=!1;this.buffer=[];this.active=0}l(c,a);c.prototype._next=function(a){this.active<this.concurrent?(this.active++,this.add(k.subscribeToResult(this,a))):this.buffer.push(a)};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);
g.MergeAllSubscriber=f},function(e,g,a){var l=a(136);g.multicast=function(a,f){var c;c="function"===typeof a?a:function(){return a};if("function"===typeof f)return this.lift(new k(c,f));var d=Object.create(this,l.connectableObservableDescriptor);d.source=this;d.subjectFactory=c;return d};var k=function(){function a(a,c){this.subjectFactory=a;this.selector=c}a.prototype.call=function(a,c){var d=this.selector,b=new l.ConnectableObservable(c.source,this.subjectFactory),d=d(b).subscribe(a);d.add(b.connect());
return d};return a}();g.MulticastOperator=k},function(e,g,a){e=a(7);a=e.root.Symbol;if("function"===typeof a)a.iterator?g.$$iterator=a.iterator:"function"===typeof a["for"]&&(g.$$iterator=a["for"]("iterator"));else if(e.root.Set&&"function"===typeof(new e.root.Set)["@@iterator"])g.$$iterator="@@iterator";else if(e.root.Map){a=Object.getOwnPropertyNames(e.root.Map.prototype);for(var l=0;l<a.length;++l){var k=a[l];if("entries"!==k&&"size"!==k&&e.root.Map.prototype[k]===e.root.Map.prototype.entries){g.$$iterator=
k;break}}}else g.$$iterator="@@iterator"},function(e,g,a){function l(a){var h=a.Symbol;"function"===typeof h?h.observable?a=h.observable:(a=h("observable"),h.observable=a):a="@@observable";return a}e=a(7);g.getSymbolObservable=l;g.$$observable=l(e.root)},function(e,g,a){e=a(7).root.Symbol;g.$$rxSubscriber="function"===typeof e&&"function"===typeof e["for"]?e["for"]("rxSubscriber"):"@@rxSubscriber"},function(e,g,a){g.isFunction=function(a){return"function"===typeof a}},function(e,g,a){function l(){try{return h.apply(this,
arguments)}catch(f){return k.errorObject.e=f,k.errorObject}}var k=a(27),h;g.tryCatch=function(a){h=a;return l}},function(e,g,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a){if("number"==typeof a)return a;for(var b=0,c,d=0;d<a.length;d++)c=a[d],b=(b<<5)-b+c,b&=b;return b}function c(a,b,c){return{type:"eme",value:Object.assign({name:a,session:b},c)}}function d(b){if(!X||!J||a.i(D.g)())return null;var c=O;return(b=b.filter(function(a){return a.type!==X.type||a.persistentLicense&&
"required"!=c.persistentState||a.distinctiveIdentifierRequired&&"required"!=c.distinctiveIdentifier?!1:!0})[0])?{keySystem:b,keySystemAccess:new D.h(X,J,O)}:null}function b(a){var b=["temporary"],c="optional",d="optional";a.persistentLicense&&(c="required",b.push("persistent-license"));a.persistentStateRequired&&(c="required");a.distinctiveIdentifierRequired&&(d="required");var f=[],m=[];R.forEach(function(a){f.push({contentType:'video/mp4;codecs="avc1.4d401e"',robustness:a});m.push({contentType:'audio/mp4;codecs="mp4a.40.2"',
robustness:a})});return{initDataTypes:["cenc"],videoCapabilities:f,audioCapabilities:m,distinctiveIdentifier:d,persistentState:c,sessionTypes:b}}function m(c){var f=d(c);if(f)return u.a.debug("eme: found compatible keySystem quickly",f),G.Observable.of(f);var m=c.reduce(function(a,b){return a.concat((I[b.type]||[]).map(function(a){return{keyType:a,keySystem:b}}))},[]);return G.Observable.create(function(c){function d(k){if(!f)if(k>=m.length)c.error(new E.c("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var e=
m[k],n=e.keyType,g=e.keySystem,p=[b(g)];u.a.debug("eme: request keysystem access "+n+","+(k+1+" of "+m.length),p);h=a.i(D.i)(n,p).subscribe(function(a){u.a.info("eme: found compatible keysystem",n,p);c.next({keySystem:g,keySystemAccess:a});c.complete()},function(){u.a.debug("eme: rejected access to keysystem",n,p);h=null;d(k+1)})}}var f=!1,h=null;d(0);return function(){f=!0;h&&h.unsubscribe()}})}function n(b,c,d){var f=U,m=J;return a.i(A.b)(d.createMediaKeys()).mergeMap(function(h){J=h;O=d.getConfiguration();
X=c;U=b;if(b.mediaKeys===h)return G.Observable.of(h);m&&m!==J&&M.dispose();var k;f&&f!==U?(u.a.debug("eme: unlink old video element and set mediakeys"),k=a.i(D.j)(f,null).concat(a.i(D.j)(U,h))):(u.a.debug("eme: set mediakeys"),k=a.i(D.j)(U,h));return k.mapTo(h)})}function p(a,b,c,d,f){u.a.debug("eme: create a new "+b+" session");var m=a.createSession(b);a=t(m,c,f)["finally"](function(){M.deleteAndClose(m);K["delete"](d)}).publish();return{session:m,sessionEvents:a}}function r(b,d,f,m,h,k){b=p(b,f,
d,h,k);var e=b.session;b=b.sessionEvents;M.add(h,e,b);u.a.debug("eme: generate request",m,h);m=a.i(A.b)(e.generateRequest(m,h))["catch"](function(a){throw new E.c("KEY_GENERATE_REQUEST_ERROR",a,!1);})["do"](function(){"persistent-license"==f&&K.add(h,e)}).mapTo(c("generated-request",e,{initData:h,initDataType:m}));return a.i(H.merge)(b,m)}function q(a,b,c,d,f,m){return r(a,b,c,d,f,m)["catch"](function(h){if(h.code!==E.b.KEY_GENERATE_REQUEST_ERROR)throw h;var k=M.getFirst();if(!k)throw h;u.a.warn("eme: could not create a new session, retry after closing a currently loaded session",
h);return M.deleteAndClose(k).mergeMap(function(){return r(a,b,c,d,f,m)})})}function x(b,d,f,m,h,k){u.a.debug("eme: load persisted session",f);var e=p(b,"persistent-license",d,h,k),n=e.session,g=e.sessionEvents;return a.i(A.b)(n.load(f))["catch"](function(){return G.Observable.of(!1)}).mergeMap(function(a){if(a)return M.add(h,n,g),K.add(h,n),g.startWith(c("loaded-session",n,{storedSessionId:f}));u.a.warn("eme: no data stored for the loaded session, do fallback",f);M.deleteById(f);K["delete"](h);n.sessionId&&
n.remove();return q(b,d,"persistent-license",m,h,k).startWith(c("loaded-session-failed",n,{storedSessionId:f}))})}function t(b,d,f){function h(a,b){return a.type===E.a.ENCRYPTED_MEDIA_ERROR?(a.fatal=b,a):new E.c("KEY_LOAD_ERROR",a,b)}u.a.debug("eme: handle message events",b);var m=void 0,k={totalRetry:2,retryDelay:200,errorSelector:function(a){return h(a,!0)},onRetry:function(a){return f.next(h(a,!1))}},e=S(b).map(function(a){throw new E.c("KEY_ERROR",a,!0);}),n=V(b).mergeMap(function(c){m=c.sessionId;
u.a.debug("eme: keystatuseschange event",m,b,c);b.keyStatuses.forEach(function(a,b){if(N[b]||N[a])throw new E.c("KEY_STATUS_CHANGE_ERROR",b,!0);});return d.onKeyStatusesChange?a.i(A.c)(function(){return a.i(A.b)(d.onKeyStatusesChange(c,b))})["catch"](function(a){throw new E.c("KEY_STATUS_CHANGE_ERROR",a,!0);}):(u.a.info("eme: keystatuseschange event not handled"),Y())}),g=T(b).mergeMap(function(c){m=c.sessionId;var f=new Uint8Array(c.message),h=c.messageType||"license-request";u.a.debug("eme: event message type "+
h,b,c);c=F(function(){return a.i(A.b)(d.getLicense(f,h)).timeout(1E4,new E.c("KEY_LOAD_TIMEOUT",null,!1))});return a.i(z.a)(c,k)}),n=a.i(H.merge)(g,n).concatMap(function(d){u.a.debug("eme: update session",m,d);return a.i(A.b)(b.update(d,m))["catch"](function(a){throw new E.c("KEY_UPDATE_ERROR",a,!0);}).mapTo(c("session-update",b,{updatedWith:d}))}),e=a.i(H.merge)(n,e);return b.closed?e.takeUntil(a.i(A.b)(b.closed)):e}function w(b,d,f){function h(a,d){var h=d.keySystem,m=d.keySystemAccess;h.persistentLicense&&
K.setStorage(h.licenseStorage);u.a.info("eme: encrypted event",a);return n(b,h,m).mergeMap(function(b){a:{var d=m.getConfiguration(),k=a.initDataType,e=new Uint8Array(a.initData),n=M.get(e);if(n&&n.sessionId)u.a.debug("eme: reuse loaded session",n.sessionId),b=G.Observable.of(c("reuse-session",n));else{d=(n=(d=d.sessionTypes)&&0<=d.indexOf("persistent-license"))&&h.persistentLicense?"persistent-license":"temporary";if(n&&h.persistentLicense&&(n=K.get(e))){b=x(b,h,n.sessionId,k,e,f);break a}b=q(b,
h,d,k,e,f)}}return b})}return a.i(C.combineLatest)(L(b),m(d)).take(1).mergeMap(function(a){return h(a[0],a[1])})}function v(){return X&&X.type}function y(){U&&a.i(D.j)(U,null).subscribe(function(){});U=X=J=null;M.dispose()}a.d(g,"c",function(){return w});a.d(g,"b",function(){return v});a.d(g,"d",function(){return L});a.d(g,"a",function(){return y});var u=a(3),B=a(1),A=a(11),z=a(33),G=a(0);a.n(G);e=a(6);a.n(e);g=a(53);a.n(g);var C=a(22);a.n(C);var H=a(14);a.n(H);var D=a(9),E=a(4),L=D.f.onEncrypted,
T=D.f.onKeyMessage,S=D.f.onKeyError,V=D.f.onKeyStatusesChange,Y=e.EmptyObservable.create,F=g.DeferObservable.create,I={clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},R=["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],N={expired:!0,"internal-error":!0};e=function(){function a(){h(this,a);this._entries=[]}a.prototype.find=function(a){for(var b=
0;b<this._entries.length;b++)if(!0===a(this._entries[b]))return this._entries[b];return null};return a}();g=function(b){function c(){h(this,c);return l(this,b.apply(this,arguments))}k(c,b);c.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};c.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(!0===a(this._entries[b]))return this._entries[b];return null};c.prototype.get=function(a){a=f(a);var b=this.find(function(b){return b.initData===a});return b?
b.session:null};c.prototype.add=function(a,b,c){a=f(a);var d=this.get(a);d&&this.deleteAndClose(d);c=c.connect();a={session:b,initData:a,eventSubscription:c};u.a.debug("eme-mem-store: add session",a);this._entries.push(a)};c.prototype.deleteById=function(a){var b=this.find(function(b){return b.session.sessionId===a});return b?this["delete"](b.session):null};c.prototype["delete"]=function(a){var b=this.find(function(b){return b.session===a});if(!b)return null;var c=b.session,d=b.eventSubscription;
u.a.debug("eme-mem-store: delete session",b);b=this._entries.indexOf(b);this._entries.splice(b,1);d.unsubscribe();return c};c.prototype.deleteAndClose=function(b){return(b=this["delete"](b))?(u.a.debug("eme-mem-store: close session",b),a.i(A.b)(b.close())["catch"](function(){return G.Observable.of(null)})):G.Observable.of(null)};c.prototype.dispose=function(){var a=this,b=this._entries.map(function(b){return a.deleteAndClose(b.session)});this._entries=[];return H.merge.apply(null,b)};return c}(e);
var K=new (function(b){function c(a){h(this,c);var d=l(this,b.call(this));d.setStorage(a);return d}k(c,b);c.prototype.setStorage=function(b){if(this._storage!==b){a.i(B.a)(b,"no licenseStorage given for keySystem with persistentLicense");B.a.iface(b,"licenseStorage",{save:"function",load:"function"});this._storage=b;try{this._entries=this._storage.load(),a.i(B.a)(Array.isArray(this._entries))}catch(ea){u.a.warn("eme-persitent-store: could not get entries from license storage",ea),this.dispose()}}};
c.prototype.get=function(a){a=f(a);return this.find(function(b){return b.initData===a})||null};c.prototype.add=function(a,b){var c=b&&b.sessionId;if(c){a=f(a);var d=this.get(a);d&&d.sessionId===c||(d&&this["delete"](a),u.a.info("eme-persitent-store: add new session",c,b),this._entries.push({sessionId:c,initData:a}),this._save())}};c.prototype["delete"]=function(a){a=f(a);var b=this.find(function(b){return b.initData===a});b&&(u.a.warn("eme-persitent-store: delete session from store",b),b=this._entries.indexOf(b),
this._entries.splice(b,1),this._save())};c.prototype.dispose=function(){this._entries=[];this._save()};c.prototype._save=function(){try{this._storage.save(this._entries)}catch(Q){u.a.warn("eme-persitent-store: could not save licenses in localStorage")}};return c}(e))({load:function(){return[]},save:function(){}}),M=new g,J=void 0,O=void 0,X=void 0,U=void 0},function(e,g,a){function l(a){a=a.indexType;switch(a){case "template":return c.a;case "timeline":return d.a;case "list":return b.a;case "base":return m.a;
case "smooth":return n.a;default:throw new p.g("UNKNOWN_INDEX",a,!0);}}function k(b){var c=a.i(h.c)(b,"video")[0].representations[0].index;return l(c).getLiveEdge(c,b)}a.d(g,"b",function(){return r});a.d(g,"a",function(){return k});a(1);var h=a(29),f=a(23),c=a(103),d=a(28),b=a(101),m=a(100),n=a(102),p=a(4),r=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=b;this.representation=c;this.index=c.index;this.handler=new (l(this.index))(b,
c,this.index)}a.prototype.getInitSegment=function(){var a=this.index.initialization||{};return new f.a(this.adaptation,this.representation,a.media,a.range,this.index.indexRange)};a.prototype._normalizeRange=function(a,b,c){var d=this.index.presentationTimeOffset||0,f=this.index.timescale||1;b||(b=0);c||(c=0);b=Math.min(b,c);return{time:a*f-d,up:(a+b)*f-d,to:(a+c)*f-d}};a.prototype.checkDiscontinuity=function(a){if(!this.adaptation.isLive)return null;var b=this.index.timescale||1;a=this.handler.checkDiscontinuity(a*
b);return 0<a?{ts:a/b+1}:null};a.prototype.getSegments=function(a,b,c){a=this._normalizeRange(a,b,c);b=a.up;c=a.to;if(!this.handler.checkRange(a.time,b,c))throw new p.g("OUT_OF_INDEX_ERROR",this.index.indexType,!1);return this.handler.getSegments(b,c)};a.prototype.insertNewSegments=function(a,b){for(var c=[],d=0;d<a.length;d++)this.handler.addSegment(a[d],b)&&c.push(a[d]);return c};a.prototype.setTimescale=function(a){var b=this.index;return b.timescale!==a?(b.timescale=a,!0):!1};a.prototype.scale=
function(a){return a/this.index.timescale};return a}()},function(e,g,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}a.d(g,"a",function(){return c});e=a(31);var k=a(19),h=a(1),f=a(11),c=function(c){function b(a){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var d;d=c.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.codec=a;d.updating=!1;d.readyState="opened";d.buffered=new k.a;return d}l(b,c);b.prototype.appendBuffer=function(a){var b=this;this._lock(function(){return b._append(a)})};b.prototype.remove=function(a,b){var c=this;this._lock(function(){return c._remove(a,b)})};b.prototype.abort=
function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};b.prototype._append=function(){};b.prototype._remove=function(){};b.prototype._abort=function(){};b.prototype._lock=function(b){var c=this;a.i(h.a)(!this.updating,"updating");this.updating=!0;this.trigger("updatestart");a.i(f.c)(function(){return a.i(f.b)(b())}).subscribe(function(){return setTimeout(function(){return c._unlock("update")},0)},function(a){return setTimeout(function(){return c._unlock("error",
a)},0)})};b.prototype._unlock=function(a,b){this.updating=!1;this.trigger(a,b);this.trigger("updateend")};return b}(e.a)},function(e,g,a){function l(){return new z(0,new x.a,0,Infinity,"timeupdate",1,null,0,null,null)}function k(a,b){var c=a.currentTime,d=a.paused,f=new x.a(a.buffered);return new z(c,f,a.duration,f.getGap(c),b,a.playbackRate,f.getRange(c),a.readyState,null,d)}function h(a,b){var c=b.requiresMediaSource;return r.Observable.create(function(b){function d(d){d=k(a,d&&d.type||"timeupdate");
var h=d.name,m=d.ts,e=d.gap,n=d.paused,g=d.readyState,p=d.playback,l=f.stalled,t=f.name,r=f.ts,q;q=(q=d.range)?d.duration-(e+q.end)<=y:!1;var A=1<=g&&"loadedmetadata"!=h&&!l&&!q;c?(n=A&&(e<=y||Infinity===e||1===g),m=l&&1<g&&Infinity>e&&(e>("seeking"==l.name?y:u)||q)):(n=A&&(!n&&"timeupdate"==h&&"timeupdate"==t&&m===r||"seeking"==h&&Infinity===e),m=l&&("seeking"!=h&&m!==r||"canplay"==h||Infinity>e&&(e>("seeking"==l.name?y:u)||q)));d.stalled=n?{name:h,playback:p}:m?null:l;f=d;b.next(f)}var f=k(a,"init"),
h=setInterval(d,c?t:w);A.forEach(function(b){return a.addEventListener(b,d)});b.next(f);return function(){clearInterval(h);A.forEach(function(b){return a.removeEventListener(b,d)})}}).multicast(function(){return new q.BehaviorSubject({name:"init",stalled:null})}).refCount()}function f(a){return a.filter(function(a){return"seeking"==a.name&&(Infinity===a.gap||a.gap<-B)}).skip(1).startWith(!0)}function c(a,b){return new Date(1E3*(a+b.availabilityStartTime))}function d(a,b){var c=a,d=b.suggestedPresentationDelay,
f=b.presentationLiveGap,h=b.timeShiftBufferDepth;"number"!=typeof c&&(c=c.getTime());var m=Date.now();return Math.max(Math.min(c,m-1E3*(f+d)),m-1E3*h)/1E3-b.availabilityStartTime}function b(a){return n(a)[0]}function m(a){if(!a.isLive)return a.duration;var b=a.availabilityStartTime;a=a.presentationLiveGap;return Date.now()/1E3-b-a}function n(a){if(!a.isLive)return[0,a.duration];var b=a.availabilityStartTime,c=a.presentationLiveGap;a=a.timeShiftBufferDepth;b=Date.now()/1E3-b-c;return[Math.min(b,b-
a+5),b]}function p(a,b){if(!b.isLive)return Infinity;var c=b.availabilityStartTime,d=b.presentationLiveGap;return Date.now()/1E3-a-(c+d+v)}a.d(g,"b",function(){return l});a.d(g,"a",function(){return h});a.d(g,"h",function(){return f});a.d(g,"d",function(){return p});a.d(g,"c",function(){return c});a.d(g,"e",function(){return d});a.d(g,"f",function(){return b});a.d(g,"g",function(){return m});a.d(g,"i",function(){return n});var r=a(0);a.n(r);var q=a(35);a.n(q);var x=a(19),t=1E3,w=500,v=10,y=.5,u=5,
B=2,A="canplay play progress seeking seeked loadedmetadata".split(" "),z=function(){function a(b,c,d,f,h,m,k,e,n,g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ts=b;this.buffered=c;this.duration=d;this.gap=f;this.name=h;this.playback=m;this.range=k;this.readyState=e;this.stalled=n;this.paused=g}a.prototype.clone=function(){return new a(this.ts,this.buffered,this.duration,this.gap,this.name,this.playback,this.range,this.readyState,this.stalled,this.paused)};
return a}()},function(e,g,a){function l(a){if("timeline"===a.indexType){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}return Date.now()/1E3}function k(a){return a}function h(a){return"true"==a}function f(a){return"true"==a?!0:"false"==a?!1:parseInt(a)}function c(a){return new Date(Date.parse(a))}function d(b){if(!b)return 0;var c=w.exec(b);a.i(t.a)(c,b+" is not a valid ISO8601 duration");return 31536E3*parseFloat(c[2]||0)+2592E3*parseFloat(c[4]||0)+86400*parseFloat(c[6]||
0)+3600*parseFloat(c[8]||0)+60*parseFloat(c[10]||0)+parseFloat(c[12]||0)}function b(a){var b=y.exec(a);if(!b)return-1;a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function m(a){return a}function n(a){return(a=v.exec(a))?[+a[1],+a[2]]:null}function p(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function r(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&1===a.value:!1}function q(a){var b=a.mimeType,b=void 0===b?"":b,c=b.split("/")[0];
if(u.includes(c))return c;if("application/bif"===b)return"image";if("application/ttml+xml"===b)return"text";if("application/mp4"===b)return(a=a.role)&&"urn:mpeg:dash:role:2011"===a.schemeIdUri&&"subtitle"===a.value?"text":"metadata";a=a.representations;a=void 0===a?[]:a;return a.length&&(a=a[0].mimeType.split("/")[0],u.includes(a))?a:"unknown"}function x(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&2===a.value:!1}a.d(g,"g",function(){return k});a.d(g,"h",function(){return b});
a.d(g,"f",function(){return n});a.d(g,"i",function(){return h});a.d(g,"m",function(){return c});a.d(g,"j",function(){return d});a.d(g,"l",function(){return f});a.d(g,"k",function(){return m});a.d(g,"a",function(){return p});a.d(g,"b",function(){return B});a.d(g,"d",function(){return x});a.d(g,"e",function(){return r});a.d(g,"c",function(){return q});var t=a(1),w=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,v=/([0-9]+)-([0-9]+)/,y=/([0-9]+)(\/([0-9]+))?/,u=["audio",
"video","text","image"],B=function(a){if(a){var b=a.representations||[],c=b.filter(function(a){return a&&a.index});if(!b.length)return l(a.index);var d=Math.min.apply(Math,c.map(function(a){return l(a.index)}));if(!isNaN(d)){if(b.length===c.length)return d;if(a.index)return a=l(a.index),Math.min(d,a)}}}},function(e,g,a){function l(h){var f=0,c=h.length,d=a.i(k.a)(h.subarray(f,f+8)),f=f+8,b=h[f],f=f+1,m=h[f],f=f+1,e=h[f],f=f+1,g=h[f],f=f+1,b=[b,m,e,g].join("."),m=h[f]+a.i(k.c)(h,f+1),f=f+4,e=a.i(k.c)(h,
f),f=f+4,g=a.i(k.a)(h.subarray(f,f+4)),f=f+4,l=a.i(k.d)(h,f),f=f+2,q=a.i(k.d)(h,f),f=f+2,x=[h[f],h[f+1]].join(":"),t=1===h[f+2],f=64,w=[],v=void 0,y=0;if(!m)throw Error("bif: no images to parse");for(;f<c;){var u=a.i(k.c)(h,f),f=f+4,B=a.i(k.c)(h,f),f=f+4;if(v){var A=v.index,z=e,G=y,v=h.subarray(v.offset,B);w.push({index:A,duration:z,ts:G,data:v});y+=e}if(4294967295===u)break;v={index:u,offset:B}}return{fileFormat:d,version:b,imageCount:m,timescale:e,format:g,width:l,height:q,aspectRatio:x,isVod:t,
thumbs:w}}a.d(g,"a",function(){return l});var k=a(10)},function(e,g,a){function l(a,b,c){a="string"==typeof a?(new DOMParser).parseFromString(a,"text/xml"):a;if(!(a instanceof window.Document||a instanceof window.HTMLElement))throw Error("ttml needs a Document to parse");a=a.querySelector("tt");if(!a)throw Error("ttml could not find <tt> tag");a=k(a.querySelector("body"),0);for(b=0;b<a.length;b++){var d=a[b];d.start+=c;d.end+=c}return a}function k(a,b){var d=0;a=a.firstChild;for(var m=[],e;a;){if(1===
a.nodeType)switch(a.tagName.toUpperCase()){case "P":e=a;var n=b,g=d,d=h(e.getAttribute("begin"),n),l=h(e.getAttribute("end"),n),p=h(e.getAttribute("dur"),0);if("number"==!("undefined"===typeof d||f(d))&&"number"==!("undefined"===typeof l||f(l))&&"number"==!("undefined"===typeof p||f(p)))throw Error("ttml unsupported timestamp format");0<p?(null==d&&(d=g||n),null==l&&(l=d+p)):null==l&&(l=h(e.getAttribute("duration"),0),l=0<=l?l+d:Number.MAX_VALUE);n=e.innerHTML;null==n&&(n=(new XMLSerializer).serializeToString(e),
n=(new DOMParser).parseFromString(n,"text/html").body.firstChild.innerHTML);n=window.escape(n.replace(c,"\r\n"));n=n.replace(/%C3%26nbsp%3B/gm,"%C3%A0");e={id:e.getAttribute("xml:id")||e.getAttribute("id"),text:decodeURIComponent(n),start:d,end:l};d=e.end;m.push(e);break;case "DIV":e=h(a.getAttribute("begin"),0),null==e&&(e=b),m.push.apply(m,k(a,e))}a=a.nextSibling}return m}function h(a,c){if(!a)return null;var f;if(f=a.match(d)){var h=f[3],e=f[4],k=f[6];return 3600*parseInt(f[2]||0,10)+60*parseInt(h,
10)+parseInt(e,10)+parseFloat("0."+k)}return(f=a.match(b))?(h=f[4],parseFloat(f[1])*m[h]+c):null}a.d(g,"a",function(){return l});var f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=/<br.*?>/gm,d=/^(([0-9]+):)?([0-9]+):([0-9]+)(\.([0-9]+))?$/,b=/(([0-9]+)(\.[0-9]+)?)(ms|h|m|s)/,m={h:3600,m:60,s:1,ms:.001}},function(e,g,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(){return new XMLHttpRequest}
function c(a){return new n(a)}e=a(0);a.n(e);var d=a(2);a.n(d);var b=a(4),m=function q(a,b,c,d,f,m,e){h(this,q);this.status=a;this.url=b;this.responseType=c;this.sentTime=d;this.receivedTime=f;this.duration=this.receivedTime-this.sentTime;this.size=m;this.responseData=e},n=function(a){function b(c){h(this,b);var d=l(this,a.call(this)),m={url:"",createXHR:f,headers:null,method:"GET",responseType:"json",timeout:1E4,resultSelector:null,body:null},e;for(e in c)m[e]=c[e];d.request=m;return d}k(b,a);b.prototype._subscribe=
function(a){return new p(a,this.request)};return b}(e.Observable),p=function(a){function c(b,d){h(this,c);var f=l(this,a.call(this,b));f.request=d;f.sentTime=Date.now();f.receivedTime=0;f.xhr=null;f.done=!1;f.resultSelector=d.resultSelector;f.send();return f}k(c,a);c.prototype.next=function(){this.done=!0;var a=this.resultSelector,c=this.xhr,d=this.request,f=this.destination,h=c.status,e=this.responseType,k=this.totalSize,n=this.sentTime,g=this.receivedTime,l=c.responseURL||d.url,p=void 0;if("json"==
d.responseType)if("string"!=typeof c.response)p=c.response;else try{p=JSON.parse(c.responseText)}catch(D){p=null}else p=c.response;null==p?f.error(new b.h(this,d,b.i.PARSE_ERROR)):(c=new m(h,l,e,n,g,k,p),a?f.next(a(c)):f.next(c))};c.prototype.setHeaders=function(a,b){for(var c in b)a.setRequestHeader(c,b[c])};c.prototype.setupEvents=function(a,c){a.ontimeout=function y(){y.subscriber.error(new b.h(this,y.request,b.i.TIMEOUT))};a.ontimeout.request=c;a.ontimeout.subscriber=this;a.onerror=function u(){u.subscriber.error(new b.h(this,
u.request,b.i.ERROR_EVENT))};a.onerror.request=c;a.onerror.subscriber=this;a.onload=function B(a){if(4===this.readyState){var c=B.subscriber,d=B.request;c.receivedTime=Date.now();c.totalSize=a.total;var f=this.status;200<=f&&300>f?(c.next(a),c.complete()):c.error(new b.h(this,d,b.i.ERROR_HTTP_CODE))}};a.onload.subscriber=this;a.onload.request=c};c.prototype.send=function(){var a=this.request,b=this.request,c=b.method,d=b.url,h=b.headers,m=b.body,e=b.responseType,b=b.timeout,k=(a.createXHR||f)(a);
this.xhr=k;k.open(c,d,!0);k.timeout=b;k.responseType=e;"document"==e&&k.overrideMimeType("text/xml");h&&this.setHeaders(k,h);this.setupEvents(k,a);m?k.send(m):k.send()};c.prototype.unsubscribe=function(){var b=this.xhr;!this.done&&b&&4!==b.readyState&&b.abort();b.ontimeout=null;b.onerror=null;b.onload=null;a.prototype.unsubscribe.call(this)};return c}(d.Subscriber);c.RequestObservable=n;c.RequestError=b.h;c.RequestResponse=m;c.RequestErrorTypes=b.i;g.a=c},function(e,g,a){g.empty={closed:!0,next:function(a){},
error:function(a){throw a;},complete:function(){}}},function(e,g,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(0);var k=a(15);a=a(12);e=function(a){function c(c){a.call(this);this.observableFactory=c}l(c,a);c.create=function(a){return new c(a)};c.prototype._subscribe=function(a){return new h(a,this.observableFactory)};return c}(e.Observable);g.DeferObservable=
e;var h=function(a){function c(c,b){a.call(this,c);this.factory=b;this.tryDefer()}l(c,a);c.prototype.tryDefer=function(){try{this._callFactory()}catch(d){this._error(d)}};c.prototype._callFactory=function(){var a=this.factory();a&&this.add(k.subscribeToResult(this,a))};return c}(a.OuterSubscriber)},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};e=a(0);var k=a(43),h=a(42),f=a(27),c=a(5);a=function(a){function b(b,c,d,f){a.call(this);this.sourceObj=b;this.eventName=c;this.selector=d;this.options=f}l(b,a);b.create=function(a,c,d,f){h.isFunction(d)&&(f=d,d=void 0);return new b(a,c,f,d)};b.setupSubscription=function(a,d,f,h,e){var m;if(a&&"[object NodeList]"===a.toString()||a&&"[object HTMLCollection]"===a.toString())for(var k=0,g=a.length;k<g;k++)b.setupSubscription(a[k],d,f,h,e);else a&&"function"===typeof a.addEventListener&&"function"===
typeof a.removeEventListener?(a.addEventListener(d,f,e),m=function(){return a.removeEventListener(d,f)}):a&&"function"===typeof a.on&&"function"===typeof a.off?(a.on(d,f),m=function(){return a.off(d,f)}):a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(d,f),m=function(){return a.removeListener(d,f)});h.add(new c.Subscription(m))};b.prototype._subscribe=function(a){var c=this.selector;b.setupSubscription(this.sourceObj,this.eventName,c?function(){for(var b=
[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];b=k.tryCatch(c).apply(void 0,b);b===f.errorObject?a.error(f.errorObject.e):a.next(b)}:function(b){return a.next(b)},a,this.options)};return b}(e.Observable);g.FromEventObservable=a},function(e,g,a){function l(a){var c=a.value;a=a.subscriber;a.closed||(a.next(c),a.complete())}function k(a){var c=a.err;a=a.subscriber;a.closed||a.error(c)}var h=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=
d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},f=a(7);e=function(a){function c(b,c){a.call(this);this.promise=b;this.scheduler=c}h(c,a);c.create=function(a,d){return new c(a,d)};c.prototype._subscribe=function(a){var b=this,c=this.promise,d=this.scheduler;if(null==d)this._isScalar?a.closed||(a.next(this.value),a.complete()):c.then(function(c){b.value=c;b._isScalar=!0;a.closed||(a.next(c),a.complete())},function(b){a.closed||a.error(b)}).then(null,function(a){f.root.setTimeout(function(){throw a;
})});else if(this._isScalar){if(!a.closed)return d.schedule(l,0,{value:this.value,subscriber:a})}else c.then(function(c){b.value=c;b._isScalar=!0;a.closed||a.add(d.schedule(l,0,{value:c,subscriber:a}))},function(b){a.closed||a.add(d.schedule(k,0,{err:b,subscriber:a}))}).then(null,function(a){f.root.setTimeout(function(){throw a;})})};return c}(a(0).Observable);g.PromiseObservable=e},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(63);e=a(0);var h=a(26),f=a(18),c=a(62);a=function(a){function b(b,d,e){void 0===b&&(b=0);a.call(this);this.period=-1;this.dueTime=0;k.isNumeric(d)?this.period=1>Number(d)&&1||Number(d):f.isScheduler(d)&&(e=d);f.isScheduler(e)||(e=h.async);this.scheduler=e;this.dueTime=c.isDate(b)?+b-this.scheduler.now():b}l(b,a);b.create=function(a,c,d){void 0===a&&(a=0);return new b(a,c,d)};b.dispatch=function(a){var b=a.index,
c=a.period,d=a.subscriber;d.next(b);if(!d.closed){if(-1===c)return d.complete();a.index=b+1;this.schedule(a,c)}};b.prototype._subscribe=function(a){return this.scheduler.schedule(b.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return b}(e.Observable);g.TimerObservable=a},function(e,g,a){function l(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=null;k.isScheduler(a[a.length-1])&&(d=a.pop());return null===d&&1===a.length?a[0]:(new h.ArrayObservable(a,d)).lift(new f.MergeAllOperator(1))}
var k=a(18),h=a(13),f=a(37);g.concat=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return this.lift.call(l.apply(void 0,[this].concat(a)))};g.concatStatic=l},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(15);e=a(12);g.mergeMap=function(a,d,b){void 0===b&&(b=Number.POSITIVE_INFINITY);"number"===typeof d&&(b=d,
d=null);return this.lift(new h(a,d,b))};var h=function(){function a(a,b,c){void 0===c&&(c=Number.POSITIVE_INFINITY);this.project=a;this.resultSelector=b;this.concurrent=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.project,this.resultSelector,this.concurrent))};return a}();g.MergeMapOperator=h;var f=function(a){function c(b,c,d,f){void 0===f&&(f=Number.POSITIVE_INFINITY);a.call(this,b);this.project=c;this.resultSelector=d;this.concurrent=f;this.hasCompleted=!1;this.buffer=[];this.index=
this.active=0}l(c,a);c.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(p){this.destination.error(p);return}this.active++;this._innerSub(b,a,c)};c.prototype._innerSub=function(a,c,d){this.add(k.subscribeToResult(this,a,c,d))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=
function(a,c,d,f,h){this.resultSelector?this._notifyResultSelector(a,c,d,f):this.destination.next(c)};c.prototype._notifyResultSelector=function(a,c,d,f){var b;try{b=this.resultSelector(a,c,d,f)}catch(q){this.destination.error(q);return}this.destination.next(b)};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);g.MergeMapSubscriber=f},function(e,
g,a){var l=this&&this.__extends||function(a,f){function c(){this.constructor=a}for(var d in f)f.hasOwnProperty(d)&&(a[d]=f[d]);a.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)},k=a(7);e=function(a){function f(c,d){a.call(this,c,d);this.scheduler=c;this.work=d;this.pending=!1}l(f,a);f.prototype.schedule=function(a,d){void 0===d&&(d=0);if(this.closed)return this;this.state=a;this.pending=!0;var b=this.id,c=this.scheduler;null!=b&&(this.id=this.recycleAsyncId(c,b,d));this.delay=
d;this.id=this.id||this.requestAsyncId(c,this.id,d);return this};f.prototype.requestAsyncId=function(a,d,b){void 0===b&&(b=0);return k.root.setInterval(a.flush.bind(a,this),b)};f.prototype.recycleAsyncId=function(a,d,b){void 0===b&&(b=0);return null!==b&&this.delay===b?d:(k.root.clearInterval(d),void 0)};f.prototype.execute=function(a,d){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var b=this._execute(a,d);if(b)return b;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,
this.id,null))};f.prototype._execute=function(a,d){var b=!1,c=void 0;try{this.work(a)}catch(n){b=!0,c=!!n&&n||Error(n)}if(b)return this.unsubscribe(),c};f.prototype._unsubscribe=function(){var a=this.id,d=this.scheduler,b=d.actions,f=b.indexOf(this);this.state=this.delay=this.work=null;this.pending=!1;this.scheduler=null;-1!==f&&b.splice(f,1);null!=a&&(this.id=this.recycleAsyncId(d,a,null))};return f}(a(167).Action);g.AsyncAction=e},function(e,g,a){var l=this&&this.__extends||function(a,h){function f(){this.constructor=
a}for(var c in h)h.hasOwnProperty(c)&&(a[c]=h[c]);a.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)};e=function(a){function h(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}l(h,a);h.prototype.flush=function(a){var c=this.actions;if(this.active)c.push(a);else{var d;this.active=!0;do if(d=a.execute(a.state,a.delay))break;while(a=c.shift());this.active=!1;if(d){for(;a=c.shift();)a.unsubscribe();throw d;}}};return h}(a(133).Scheduler);g.AsyncScheduler=
e},function(e,g,a){var l=this&&this.__extends||function(a,h){function f(){this.constructor=a}for(var c in h)h.hasOwnProperty(c)&&(a[c]=h[c]);a.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)};e=function(a){function h(){var f=a.call(this,"object unsubscribed");this.name=f.name="ObjectUnsubscribedError";this.stack=f.stack;this.message=f.message}l(h,a);return h}(Error);g.ObjectUnsubscribedError=e},function(e,g,a){g.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(e,
g,a){var l=a(17);g.isNumeric=function(a){return!l.isArray(a)&&0<=a-parseFloat(a)+1}},function(e,g,a){g.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(e,g,a){g.noop=function(){}},function(e,g,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){if(a===b)return!0;if("object"===("undefined"===typeof a?"undefined":R(a))&&"object"===("undefined"===typeof b?"undefined":R(b))){if(null===a||null===b)return!1;var c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(var d=Array.isArray(c),f=0,c=d?c:c[Symbol.iterator]();;){var e;if(d){if(f>=
c.length)break;e=c[f++]}else{f=c.next();if(f.done)break;e=f.value}if(!b.hasOwnProperty(e)||!h(a[e],b[e]))return!1}return!0}return!1}function f(a,b){return b?"seeking"==b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"}function c(){}function d(b){a.i(v.a)(b.man,"player: no manifest loaded")}function b(a,b){return a.filter(function(a){return a.type==b}).map(function(a){return a.value})}var m=a(3),n=a(5);a.n(n);var p=a(8);a.n(p);var r=a(35);a.n(r);var q=a(22);a.n(q);var x=a(11),t=a(21);e=a(31);var w=
a(130),v=a(1),y=a(114),u=a(24),B=a(25),A=a(9),z=a(47),G=a(4),C=a(97),H=a(19),D=a(107),E=a(98),L=a(29),T=a(123),S=a(104),V=a(94),Y=a(105),F=a(44),I=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};e=function(e){function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var c=b.videoElement,d=b.transport,f=b.transportOptions,h=b.defaultLanguage,k=b.defaultAudioTrack,n=b.defaultSubtitle,q=b.defaultTextTrack,w=b.initVideoBitrate,u=b.initialVideoBitrate,y=b.initAudioBitrate,B=b.initialAudioBitrate,C=b.maxVideoBitrate,
x=b.maxAudioBitrate,H=b.limitVideoWidth,H=void 0===H?!0:H,b=b.throttleWhenHidden,b=void 0===b?!0:b,z=l(this,e.call(this)),D=u,G=B,ca=k,aa=q;null!=w&&null==u&&(console.warn("initVideoBitrate is deprecated. Use initialVideoBitrate instead"),D=w);null!=y&&null==B&&(console.warn("initAudioBitrate is deprecated. Use initialAudioBitrate instead"),G=y);null!=h&&null==k&&(console.warn("defaultLanguage is deprecated. Use defaultAudioTrack instead"),ca=h);null!=n&&null==q&&(console.warn("defaultSubtitle is deprecated. Use defaultTextTrack instead"),
aa=n);z._playPauseNext$=z._playPauseNext.bind(z);z._textTrackChanges$=z._textTrackChanges.bind(z);z._setPlayerState$=z._setPlayerState.bind(z);z._triggerTimeChange$=z._triggerTimeChange.bind(z);z._streamNext$=z._streamNext.bind(z);z._streamError$=z._streamError.bind(z);z._streamFatalError$=z._streamFatalError.bind(z);z._streamComplete$=z._streamComplete.bind(z);z.defaultTransport=d;z.defaultTransportOptions=f||{};c||(c=document.createElement("video"));a.i(v.a)(c instanceof A.a,"requires an actual HTMLVideoElement");
c.preload="auto";z.version="2.1.0";z.video=c;z.fullscreen=a.i(A.b)(c).subscribe(function(){return z.trigger("fullscreenChange",z.isFullscreen())});z.playing=new r.BehaviorSubject;z.stream=new p.Subject;z.images=new p.Subject;z.errorStream=new p.Subject;f=a.i(S.a)();d=f.createPipelines;f=f.metrics;c=a.i(E.a)(c);z.createPipelines=d;z.metrics=f;z.adaptive=a.i(V.a)(f,c,{initialVideoBitrate:D,initialAudioBitrate:G,maxVideoBitrate:C,maxAudioBitrate:x,defaultAudioTrack:a.i(t.a)(ca),defaultTextTrack:a.i(t.b)(aa),
limitVideoWidth:H,throttleWhenHidden:b});z.muted=.1;z._setPlayerState("STOPPED");z._resetStates();z.log=m.a;return z}k(g,e);g.getErrorTypes=function(){console.warn("getErrorTypes is deprecated. Use the ErrorTypes property instead");return G.a};g.getErrorCodes=function(){console.warn("getErrorCodes is deprecated. Use the ErrorCodes property instead");return G.b};I(g,null,[{key:"ErrorTypes",get:function(){return G.a}},{key:"ErrorCodes",get:function(){return G.b}}]);g.prototype._resetStates=function(){this.man=
null;this.reps={video:null,audio:null,text:null,images:null};this.adas={video:null,audio:null,text:null,images:null};this.evts={};this.frag={start:null,end:null};this.error=null;this.images.next(null);this._currentImagePlaylist=null};g.prototype._unsubscribe=function(){if(this.subscriptions){var a=this.subscriptions;this.subscriptions=null;a.unsubscribe()}};g.prototype.stop=function(){"STOPPED"!==this.state&&(this._resetStates(),this._unsubscribe(),this._setPlayerState("STOPPED"))};g.prototype.dispose=
function(){this.stop();this.metrics.unsubscribe();this.adaptive.unsubscribe();this.fullscreen.unsubscribe();this.stream.unsubscribe();a.i(F.a)();this.video=this.createPipelines=this.stream=this.fullscreen=this.adaptive=this.metrics=null};g.prototype._recordState=function(a,b){h(this.evts[a],b)||(this.evts[a]=b,this.trigger(a+"Change",b))};g.prototype._parseOptions=function(b){var c=b=Object.assign({transport:this.defaultTransport,transportOptions:{},keySystems:[],timeFragment:{},textTracks:[],imageTracks:[],
autoPlay:!1,hideNativeSubtitle:!1,directFile:!1},b),d=c.transport,f=c.url,h=c.keySystems,e=c.timeFragment,k=c.supplementaryTextTracks,m=c.supplementaryImageTracks,g=b,n=g.subtitles,l=g.images,c=g.transportOptions,p=g.manifests,t=g.autoPlay,M=g.directFile,q=g.defaultLanguage,r=g.defaultAudioTrack,w=g.defaultSubtitle,u=g.defaultTextTrack,A=g.hideNativeSubtitle,g=g.startAt,y=r,B=u;null!=q&&null==r&&(console.warn("defaultLanguage is deprecated. Use defaultAudioTrack instead"),y=q);null!=w&&null==u&&(console.warn("defaultSubtitle is deprecated. Use defaultTextTrack instead"),
B=w);void 0!==n&&void 0===k&&(console.warn("the subtitles option is deprecated. Use supplementaryTextTracks instead"),k=n);void 0!==l&&void 0===m&&(console.warn("the images option is deprecated. Use supplementaryImageTracks instead"),m=l);e=a.i(D.a)(e);M&&(d="directfile");a.i(v.a)(!!p^!!f,"player: you have to pass either a url or a list of manifests");p&&(console.warn("the manifests options is deprecated, use url instead"),h=p[0],f=h.url,k=h.subtitles||[],m=h.images||[],h=p.map(function(a){return a.keySystem}).filter(Boolean));
"string"==typeof d&&(d=T.a[d]);"function"==typeof d&&(d=d(Object.assign({},this.defaultTransportOptions,c)));a.i(v.a)(d,"player: transport "+b.transport+" is not supported");return{url:f,keySystems:h,supplementaryTextTracks:k,hideNativeSubtitle:A,supplementaryImageTracks:m,timeFragment:e,autoPlay:t,defaultAudioTrack:y,defaultTextTrack:B,transport:d,startAt:g}};g.prototype.loadVideo=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=this._parseOptions(d);m.a.info("loadvideo",
d);var h=d,e=h.url,k=h.keySystems,g=h.supplementaryTextTracks,l=h.hideNativeSubtitle,p=h.supplementaryImageTracks,r=h.timeFragment,w=h.autoPlay,v=h.transport,d=h.defaultAudioTrack,u=h.defaultTextTrack,h=h.startAt;this.stop();this.frag=r;this.playing.next(w);null!=d&&this.adaptive.setAudioTrack(a.i(t.a)(d));null!=u&&this.adaptive.setTextTrack(a.i(t.b)(u));var u=this.video,A=this.adaptive,d=this.errorStream,y=this.createPipelines(v,{errorStream:d,audio:{cache:new C.a},video:{cache:new C.a},image:{maxRetry:0}}),
v=a.i(z.a)(u,{requiresMediaSource:y.requiresMediaSource()}),e=a.i(Y.a)({url:e,errorStream:d,keySystems:k,supplementaryTextTracks:g,hideNativeSubtitle:l,timings:v,supplementaryImageTracks:p,timeFragment:r,adaptive:A,pipelines:y,videoElement:u,autoPlay:w,startAt:h}).publish(),g=b(e,"stalled").startWith(null),k=b(e,"loaded").take(1).share(),g=k.mapTo("LOADED").concat(a.i(q.combineLatest)(this.playing,g,f)).distinctUntilChanged().startWith("LOADING"),l=a.i(x.a)(u,["play","pause"]),u=a.i(x.a)(u.textTracks,
["addtrack"]),p=this.subscriptions=new n.Subscription;p.add(l.subscribe(this._playPauseNext$,c));p.add(u.subscribe(this._textTrackChanges$,c));p.add(g.subscribe(this._setPlayerState$,c));p.add(v.subscribe(this._triggerTimeChange$,c));p.add(e.subscribe(this._streamNext$,this._streamFatalError$,this._streamComplete$));p.add(d.subscribe(this._streamError$));p.add(e.connect());this.subscriptions?this._triggerTimeChange():p.unsubscribe();return k};g.prototype._streamNext=function(a){var b=a.type,c=a.value;
"buffer"==b&&this._bufferNext(c);"manifest"==b&&this._manifestNext(c);"pipeline"==b&&(this.trigger("progress",c.segment),b=c.parsed,"image"===c.bufferType&&(this._currentImagePlaylist=c=b.segmentData,this.trigger("imageTrackUpdate",{data:this._currentImagePlaylist}),this.images.next(c)));this.stream.next(a)};g.prototype._streamError=function(a){this.trigger("warning",a);this.stream.next({type:"warning",value:a})};g.prototype._streamFatalError=function(a){this._resetStates();this.error=a;this._setPlayerState("STOPPED");
this._unsubscribe();this.trigger("error",a);this.stream.next({type:"error",value:a})};g.prototype._streamComplete=function(){this._resetStates();this._setPlayerState("ENDED");this._unsubscribe();this.stream.next({type:"ended",value:null})};g.prototype._manifestNext=function(a){this.man=a;this.trigger("manifestChange",a)};g.prototype._bufferNext=function(a){var b=a.bufferType,c=a.adaptation;a=a.representation;this.reps[b]=a;this.adas[b]=c;if("text"==b){var d=c&&c.lang?{language:c.lang,closedCaption:!!c.closedCaption,
id:c.id}:null;this._recordState("subtitle",d&&d.language);this._recordState("textTrack",d)}"video"==b&&this._recordState("videoBitrate",a&&a.bitrate||-1);"audio"==b&&(b={language:c&&c.lang||"",audioDescription:!(!c||!c.audioDescription),id:c.id},this._recordState("language",b.language),this._recordState("audioTrack",b),this._recordState("audioBitrate",a&&a.bitrate||-1))};g.prototype._playPauseNext=function(a){!0!==this.video.ended&&this.playing.next("play"==a.type)};g.prototype._textTrackChanges=
function(a){(a=a.target[0])&&this.trigger("nativeTextTrackChange",a)};g.prototype._setPlayerState=function(a){this.state!==a&&(this.state=a,m.a.info("playerStateChange",a),this.trigger("playerStateChange",a))};g.prototype._triggerTimeChange=function(b){if(this.man&&b){this.man.isLive&&0<b.ts&&(b.wallClockTime=a.i(z.c)(b.ts,this.man),b.liveGap=a.i(z.d)(b.ts,this.man));var c={position:b.ts,duration:b.duration,bufferGap:isFinite(b.gap)?b.gap:0,liveGap:b.liveGap,playbackRate:b.playback,wallClockTime:b.wallClockTime&&
b.wallClockTime.getTime()/1E3};this.trigger("positionUpdate",c);this.trigger("currentTimeChange",b)}else this.trigger("currentTimeChange",a.i(z.b)())};g.prototype.getError=function(){return this.error};g.prototype.getManifest=function(){return this.man?new y.a(this.man):null};g.prototype.getCurrentAdaptations=function(){if(!this.man)return null;var a=this.adas||[];return Object.keys(a).reduce(function(b,c){a[c]&&(b[c]=new u.a(a[c]));return b},{})};g.prototype.getCurrentRepresentations=function(){if(!this.man)return null;
var a=this.reps||[];return Object.keys(a).reduce(function(b,c){a[c]&&(b[c]=new B.a(a[c]));return b},{})};g.prototype.getVideoElement=function(){return this.video};g.prototype.getNativeTextTrack=function(){return 0<this.video.textTracks.length?this.video.textTracks[0]:null};g.prototype.getImageTrack=function(){return this.images.distinctUntilChanged()};g.prototype.getPlayerState=function(){return this.state};g.prototype.isLive=function(){d(this);return this.man.isLive};g.prototype.getUrl=function(){d(this);
return this.man.locations[0]};g.prototype.getVideoDuration=function(){return this.video.duration};g.prototype.getVideoLoadedTime=function(){return(new H.a(this.video.buffered)).getSize(this.video.currentTime)};g.prototype.getVideoPlayedTime=function(){return(new H.a(this.video.buffered)).getLoaded(this.video.currentTime)};g.prototype.getCurrentTime=function(){if(!this.man)return 0;var b=this.video.currentTime;return this.man.isLive?a.i(z.c)(b,this.man):b};g.prototype.getWallClockTime=function(){if(!this.man)return 0;
var b=this.video.currentTime;return this.isLive()?+a.i(z.c)(b,this.man)/1E3:b};g.prototype.getPosition=function(){return this.video.currentTime};g.prototype.getStartTime=function(){return this.frag.start};g.prototype.getEndTime=function(){return this.frag.end};g.prototype.getPlaybackRate=function(){return this.video.playbackRate};g.prototype.getVolume=function(){return this.video.volume};g.prototype.isFullscreen=function(){return a.i(A.c)()};g.prototype.getAvailableLanguages=function(){console.warn("getAvailableLanguages is deprecated and won't be available in the next major version. Use getAvailableAudioTracks instead.");
return this.man&&a.i(L.a)(this.man).map(function(a){return a.language})||[]};g.prototype.getAvailableSubtitles=function(){console.warn("getAvailableSubtitles is deprecated and won't be available in the next major version. Use getAvailableTextTracks instead.");return this.man&&a.i(L.b)(this.man).map(function(a){return a.language})||[]};g.prototype.getLanguage=function(){console.warn("getLanguage is deprecated and won't be available in the next major version. Use getAudioTrack instead.");return this.evts.language};
g.prototype.getSubtitle=function(){console.warn("getSubtitle is deprecated and won't be available in the next major version. Use getTextTrack instead.");return this.evts.subtitle};g.prototype.getAvailableVideoBitrates=function(){var b=a.i(L.c)(this.man,"video");return b[0]&&b[0].bitrates.slice()||[]};g.prototype.getAvailableAudioBitrates=function(){var a=this.adas.audio;return a&&a.bitrates.slice()||[]};g.prototype.getVideoBitrate=function(){return this.evts.videoBitrate};g.prototype.getAudioBitrate=
function(){return this.evts.audioBitrate};g.prototype.getVideoMaxBitrate=function(){console.warn("getVideoMaxBitrate is deprecated. Use getMaxVideoBitrate instead");return this.getMaxVideoBitrate()};g.prototype.getMaxVideoBitrate=function(){return this.adaptive.getVideoMaxBitrate()};g.prototype.getAudioMaxBitrate=function(){console.warn("getAudioMaxBitrate is deprecated. Use getMaxAudioBitrate instead");return this.getMaxAudioBitrate()};g.prototype.getMaxAudioBitrate=function(){return this.adaptive.getAudioMaxBitrate()};
g.prototype.getVideoBufferSize=function(){return this.adaptive.getVideoBufferSize()};g.prototype.getAudioBufferSize=function(){return this.adaptive.getAudioBufferSize()};g.prototype.getAverageBitrates=function(){return this.adaptive.getAverageBitrates()};g.prototype.getMetrics=function(){return this.metrics};g.prototype.play=function(){this.video.play()};g.prototype.pause=function(){this.video.pause()};g.prototype.setPlaybackRate=function(a){this.video.playbackRate=a};g.prototype.goToStart=function(){return this.seekTo(this.getStartTime())};
g.prototype.seekTo=function(b){a.i(v.a)(this.man);var c=this.video.currentTime;if(b){if(b.relative){this.video.currentTime=c+b.relative;return}if(b.position){this.video.currentTime=b.relative;return}if(b.wallClockTime){this.video.currentTime=a.i(z.e)(1E3*b.wallClockTime,this.man);return}}this.man.isLive&&(b=a.i(z.e)(b,this.man));return b!==c?(m.a.info("seek to",b),this.video.currentTime=b):c};g.prototype.exitFullscreen=function(){a.i(A.d)()};g.prototype.setFullscreen=function(){!1===(0<arguments.length&&
void 0!==arguments[0]?arguments[0]:!0)?(console.warn("setFullscreen(false) is deprecated. Use exitFullscreen instead"),a.i(A.d)()):a.i(A.e)(this.video)};g.prototype.setVolume=function(a){a!==this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))};g.prototype.mute=function(){this.muted=this.getVolume()||.1;this.setVolume(0)};g.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this.muted)};g.prototype.normalizeLanguageCode=function(b){return a.i(t.c)(b)};g.prototype.isLanguageAvailable=
function(b){var c=a.i(t.a)(b);return c?!!this.getAvailableAudioTracks().find(function(a){return a.language===c.language}):!1};g.prototype.isSubtitleAvailable=function(b){var c=a.i(t.b)(b);return c?!!this.getAvailableTextTracks().find(function(a){return a.language===c.language}):!1};g.prototype.setLanguage=function(b){console.warn("setLanguage is deprecated and won't be available in the next major version. Use setAudioTrack instead.");b=a.i(t.a)(b);a.i(v.a)(this.isLanguageAvailable(b),"player: unknown language");
this.adaptive.setAudioTrack(b)};g.prototype.setSubtitle=function(b){console.warn("setSubtitle is deprecated and won't be available in the next major version. Use setTextTrack instead.");null==b?(this.adaptive.setTextTrack(null),this._recordState("subtitle",null)):(b=a.i(t.b)(b),a.i(v.a)(this.isSubtitleAvailable(b),"player: unknown subtitle"),this.adaptive.setTextTrack(b))};g.prototype.setVideoBitrate=function(b){a.i(v.a)(0===b||0<=this.getAvailableVideoBitrates().indexOf(b),"player: video bitrate unavailable");
this.adaptive.setVideoBitrate(b)};g.prototype.setAudioBitrate=function(b){a.i(v.a)(0===b||0<=this.getAvailableAudioBitrates().indexOf(b),"player: audio bitrate unavailable");this.adaptive.setAudioBitrate(b)};g.prototype.setVideoMaxBitrate=function(a){console.warn("setVideoMaxBitrate is deprecated. Use setMaxVideoBitrate instead");return this.setMaxVideoBitrate(a)};g.prototype.setMaxVideoBitrate=function(a){this.adaptive.setVideoMaxBitrate(a)};g.prototype.setAudioMaxBitrate=function(a){console.warn("setAudioMaxBitrate is deprecated. Use setMaxAudioBitrate instead");
return this.setMaxAudioBitrate(a)};g.prototype.setMaxAudioBitrate=function(a){this.adaptive.setAudioMaxBitrate(a)};g.prototype.setVideoBufferSize=function(a){this.adaptive.setVideoBufferSize(a)};g.prototype.setAudioBufferSize=function(a){this.adaptive.setAudioBufferSize(a)};g.prototype.asObservable=function(){return this.stream};g.prototype.getDebug=function(){return w.a.getDebug(this)};g.prototype.showDebug=function(){w.a.showDebug(this,this.video)};g.prototype.hideDebug=function(){w.a.hideDebug()};
g.prototype.toggleDebug=function(){w.a.toggleDebug(this,this.video)};g.prototype.getCurrentKeySystem=function(){return a.i(F.b)()};g.prototype.getAvailableAudioTracks=function(){var b=this.getAudioTrack();return this.man?a.i(L.a)(this.man).map(function(a){return Object.assign({},a,{active:b.id===a.id})}):null};g.prototype.getAvailableTextTracks=function(){var b=this.getTextTrack();return this.man?a.i(L.b)(this.man).map(function(a){return Object.assign({},a,{active:!!b&&b.id===a.id})}):null};g.prototype.getAudioTrack=
function(){return this.evts.audioTrack};g.prototype.getTextTrack=function(){return this.evts.textTrack};g.prototype.setAudioTrack=function(b){var c=this.getAvailableAudioTracks().find(function(a){return a.id===b});a.i(v.a)(c,"player: unknown audio track");this.adaptive.setAudioTrack(c)};g.prototype.setTextTrack=function(b){var c=this.getAvailableTextTracks().find(function(a){return a.id===b});a.i(v.a)(c,"player: unknown text track");this.adaptive.setTextTrack(c)};g.prototype.disableTextTrack=function(){this.adaptive.setTextTrack(null);
this._recordState("subtitle",null)};g.prototype.getImageTrackData=function(){return this.man?this._currentImagePlaylist:null};g.prototype.getMinimumPosition=function(){return this.man?a.i(z.f)(this.man):null};g.prototype.getMaximumPosition=function(){return this.man?a.i(z.g)(this.man):null};return g}(e.a);g.a=e},function(e,g,a){g.a=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(a),h=1;h<arguments.length;h++){var f=arguments[h];
if(void 0!==f&&null!==f)for(var c in f)f.hasOwnProperty(c)&&(e[c]=f[c])}return e}},function(e,g,a){e=a(0);a=a(142);e.Observable.of=a.of},function(e,g,a){e=a(0);a=a(143);e.Observable["throw"]=a._throw},function(e,g,a){e=a(0);a=a(144);e.Observable.prototype["catch"]=a._catch;e.Observable.prototype._catch=a._catch},function(e,g,a){e=a(0);a=a(57);e.Observable.prototype.concat=a.concat},function(e,g,a){e=a(0);a=a(146);e.Observable.prototype.concatAll=a.concatAll},function(e,g,a){e=a(0);a=a(147);e.Observable.prototype.concatMap=
a.concatMap},function(e,g,a){e=a(0);a=a(148);e.Observable.prototype.debounceTime=a.debounceTime},function(e,g,a){e=a(0);a=a(149);e.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(e,g,a){e=a(0);a=a(150);e.Observable.prototype["do"]=a._do;e.Observable.prototype._do=a._do},function(e,g,a){e=a(0);a=a(151);e.Observable.prototype.filter=a.filter},function(e,g,a){e=a(0);a=a(152);e.Observable.prototype["finally"]=a._finally;e.Observable.prototype._finally=a._finally},function(e,
g,a){e=a(0);a=a(153);e.Observable.prototype.ignoreElements=a.ignoreElements},function(e,g,a){e=a(0);a=a(154);e.Observable.prototype.map=a.map},function(e,g,a){e=a(0);a=a(155);e.Observable.prototype.mapTo=a.mapTo},function(e,g,a){e=a(0);a=a(58);e.Observable.prototype.mergeMap=a.mergeMap;e.Observable.prototype.flatMap=a.mergeMap},function(e,g,a){e=a(0);a=a(38);e.Observable.prototype.multicast=a.multicast},function(e,g,a){e=a(0);a=a(158);e.Observable.prototype.publish=a.publish},function(e,g,a){e=a(0);
a=a(159);e.Observable.prototype.scan=a.scan},function(e,g,a){e=a(0);a=a(160);e.Observable.prototype.share=a.share},function(e,g,a){e=a(0);a=a(161);e.Observable.prototype.skip=a.skip},function(e,g,a){e=a(0);a=a(162);e.Observable.prototype.startWith=a.startWith},function(e,g,a){e=a(0);a=a(163);e.Observable.prototype.switchMap=a.switchMap},function(e,g,a){e=a(0);a=a(164);e.Observable.prototype.take=a.take},function(e,g,a){e=a(0);a=a(165);e.Observable.prototype.takeUntil=a.takeUntil},function(e,g,a){e=
a(0);a=a(166);e.Observable.prototype.timeout=a.timeout},function(e,g,a){function l(a){return function(h,f){return null==h?f:a*f+(1-a)*h}}g.a=function(a,h){return a.map(function(a){return a.value.response}).filter(function(a){return!a||2E3<a.size}).map(function(a){return a?a.size/a.duration*8E3:0}).scan(l(h.alpha))}},function(e,g,a){function l(a,b){for(var c=0;c<a.length;c++)if(!0===b(a[c],c,a))return a[c];return null}function k(a,b){return"number"==typeof a&&0<a?a:b}function h(a,b){for(var c=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,d=a.length-1;0<=d;d--)if(a[d]/b<=1-c)return a[d];return a[0]}function f(a,b){var c=a.sort(function(a,b){return a.width-b.width}).find(function(a){return a.width>=b});if(c){var d=a.filter(function(a){return a.width<=c});return d[d.length-1].bitrate}return Infinity}function c(b,c){var d=b.map(function(a){return a.lang}),d=a.i(x.d)(d,c);return 0<=d?b[d]:null}function d(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,f=a.filter(function(a){return a.audioDescription==
d});return c(f,b)}function b(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,f=a.filter(function(a){return a.closedCaption==d});return c(f,b)}function m(a,b){return a.filter(function(a){return a.type===b})}var n=a(5);a.n(n);var p=a(35);a.n(p);var r=a(22);a.n(r);var q=a(11),x=a(21),t=a(93),w={defaultAudioTrack:{language:"fra",audioDescription:!1},defaultTextTrack:null,defaultBufferSize:30,defaultBufferThreshold:.3,initialVideoBitrate:0,initialAudioBitrate:0,maxVideoBitrate:Infinity,
maxAudioBitrate:Infinity};g.a=function(c,e){function g(a){return I.distinctUntilChanged().map(function(b){return d(a,b.language,b.audioDescription)||a[0]})}function v(a){return R.distinctUntilChanged().map(function(c){return c?b(a,c.language,c.closedCaption):null})}var A=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Object.keys(A).forEach(function(a){return void 0===A[a]&&delete A[a]});var y=Object.assign({},w,A),x=y.defaultTextTrack,C=y.defaultBufferSize,H=y.defaultBufferThreshold,D=
y.initialVideoBitrate,E=y.initialAudioBitrate,L=y.maxVideoBitrate,T=y.maxAudioBitrate,S=y.limitVideoWidth,V=y.throttleWhenHidden,Y=e.videoWidth,F=e.inBackground,I=new p.BehaviorSubject(y.defaultAudioTrack),R=new p.BehaviorSubject(x),N={audio:new p.BehaviorSubject(E),video:new p.BehaviorSubject(D)},y=[a.i(t.a)(m(c,"audio"),{alpha:.6}).multicast(N.audio),a.i(t.a)(m(c,"video"),{alpha:.6}).multicast(N.video)],K=new n.Subscription;y.forEach(function(a){return K.add(a.connect())});var M={audio:new p.BehaviorSubject(Infinity),
video:new p.BehaviorSubject(Infinity)},J={audio:new p.BehaviorSubject(T),video:new p.BehaviorSubject(L)},O={audio:new p.BehaviorSubject(C),video:new p.BehaviorSubject(C),text:new p.BehaviorSubject(C)};return{setAudioTrack:function(a){I.next(a)},setTextTrack:function(a){R.next(a)},getAudioTrack:function(){return I.getValue()},getTextTrack:function(){return R.getValue()},getAverageBitrates:function(){return N},getAudioMaxBitrate:function(){return J.audio.getValue()},getVideoMaxBitrate:function(){return J.video.getValue()},
getAudioBufferSize:function(){return O.audio.getValue()},getVideoBufferSize:function(){return O.video.getValue()},setAudioBitrate:function(a){M.audio.next(k(a,Infinity))},setVideoBitrate:function(a){M.video.next(k(a,Infinity))},setAudioMaxBitrate:function(a){J.audio.next(k(a,Infinity))},setVideoMaxBitrate:function(a){J.video.next(k(a,Infinity))},setAudioBufferSize:function(a){O.audio.next(k(a,C))},setVideoBufferSize:function(a){O.video.next(k(a,C))},getBufferAdapters:function(b){var c=b.type,d=b.bitrates,
e=b.representations;b=void 0;if(1<e.length){b=M[c];var m=J[c],k=N[c].map(function(a,b){return h(d,a,0===b?0:H)}).distinctUntilChanged().debounceTime(2E3).startWith(h(d,N[c].getValue(),0));"video"==c&&(m=a.i(r.combineLatest)([m,Y,F]).map(function(a){var b=a[0],c=a[1];a=a[2];if(V&&a)return d[0];c=S?f(e,c):d[d.length-1];return Math.min(c,b)}));b=a.i(r.combineLatest)(b,m,k,function(a,b,c){var f=void 0,f=Infinity>a?a:Infinity>b?Math.min(b,c):c;return l(e,function(a){return a.bitrate===h(d,f)})}).distinctUntilChanged(function(a,
b){return a.id===b.id})}else b=a.i(q.e)(e[0]);return{representations:b,bufferSizes:O[c]||new p.BehaviorSubject(C)}},getAdaptationsChoice:function(b,c){return"audio"==b?g(c):"text"==b?v(c):a.i(q.e)(c[0])},unsubscribe:function(){K&&(K.unsubscribe(),K=null)}}}},function(e,g,a){function l(e){function k(a,b){for(var c=a.ts,d=a.buffered,f=d.getRange(c),d=d.getOuterRanges(c),e=[],m=0;m<d.length;m++){var k=d[m];c-b<k.end?e.push(k):c+b>k.start&&e.push(k)}f&&(h.a.debug("buffer: gc removing part of inner range",
e),c-b>f.start&&e.push({start:f.start,end:c-b}),c+b<f.end&&e.push({start:c+b,end:f.end}));return e}function g(){h.a.warn("buffer: running garbage collector");return S.take(1).mergeMap(function(a){var b=k(a,u);0===b.length&&(b=k(a,B));h.a.debug("buffer: gc cleaning",b);return w(b.map(function(a){return K.removeBuffer(a)})).concatAll()})}function l(b){function f(a){if(k.test(a.getId()))return!1;if(a.isInitSegment()||0>a.getTime())return!0;var b=e.scale(a.getTime()),c=e.scale(a.getDuration());return(b=
N.hasRange(b,c))?(a=a.getRepresentation().bitrate,b.bitrate*y<a):!0}h.a.info("bitrate",p,b.bitrate);var e=new q.b(E,b),k=new r.a,w=a.i(m.combineLatest)(S,R).mergeMap(function(a,d){var m=a[0],g=a[1],n=new c.a(A.buffered);if(m.stalled){var l=e.checkDiscontinuity(m.ts);l&&V.next({type:"index-discontinuity",value:l})}l=void 0;try{var q=e,r=null;0===d&&(h.a.debug("add init segment",p),r=q.getInitSegment());if(0===m.readyState)l=r?[r]:[];else{var w=m.ts,v=Math.max(0,Math.min(g,m.liveGap,(m.duration||Infinity)-
w)),m=void 0,u=n.getGap(w),m=u>Y&&Infinity>u?Math.min(u,F):0,y=N.getRange(w);if(y&&y.bitrate===b.bitrate){var B=Math.floor(y.end-w);B>m&&(m=B)}var C=q.getSegments(w,m,v);r&&C.unshift(r);l=C}l=l.filter(f)}catch(aa){if(aa.type===x.a.INDEX_ERROR&&aa.code===x.b.OUT_OF_INDEX_ERROR)return V.next({type:"out-of-index",value:aa}),t();throw aa;}for(n=0;n<l.length;n++)k.add(l[n].getId());return l}).concatMap(function(a){return L({segment:a})}).concatMap(function(a){var c=a.segment,d=a.parsed,f=d.segmentData,
h=d.nextSegments,m=d.currentSegment;(d=d.timescale)&&e.setTimescale(d);var n=h?e.insertNewSegments(h,m):[];k.remove(c.getId());m&&N.insert(b.bitrate,e.scale(m.ts),e.scale(m.ts+m.d));return K.appendBuffer(f)["catch"](function(a){if("QuotaExceededError"!=a.name)throw new x.d("BUFFER_APPEND_ERROR",a,!1);return g().mergeMap(function(){return K.appendBuffer(f)})["catch"](function(a){throw new x.d("BUFFER_FULL_ERROR",a,!0);})}).map(function(){return{type:"pipeline",value:Object.assign({bufferType:p,addedSegments:n},
a)}})});return a.i(n.merge)(w,V)["catch"](function(a){if(!E.isLive||a.type!=x.a.NETWORK_ERROR||!a.isHttpError(412))throw a;return d.Observable.of({type:"precondition-failed",value:a}).concat(v(2E3)).concat(l(b))}).startWith({type:"buffer",value:{bufferType:p,adaptation:E,representation:b}})}var p=e.bufferType,A=e.sourceBuffer,E=e.adaptation,L=e.pipeline,T=e.adapters,S=e.timings;e=e.seekings;var V=new b.Subject,Y="video"==p?4:1,F="video"==p?6:1,I=T.representations,R=T.bufferSizes,N=new c.a,K=new f.a(A);
return a.i(m.combineLatest)(I,e,function(a){return a}).switchMap(l)["finally"](function(){return K.dispose()})}function k(a){return d.Observable.of({type:"buffer",value:{bufferType:a,adaptation:null,representation:null}})}a.d(g,"b",function(){return l});a.d(g,"a",function(){return k});var h=a(3),f=a(96),c=a(19),d=a(0);a.n(d);var b=a(8);a.n(b);var m=a(22);a.n(m);var n=a(14);a.n(n);e=a(6);a.n(e);g=a(138);a.n(g);var p=a(56);a.n(p);var r=a(129),q=a(45),x=a(4),t=e.EmptyObservable.create,w=g.FromObservable.create,
v=p.TimerObservable.create,y=1.5,u=240,B=30},function(e,g,a){a.d(g,"a",function(){return k});var l=a(8);a.n(l);var k=function(){function a(f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.buffer=f;this.queue=[];this.flushing=null;this._onUpdate=this.onUpdate.bind(this);this._onError=this.onError.bind(this);this._flush=this.flush.bind(this);this.buffer.addEventListener("update",this._onUpdate);this.buffer.addEventListener("error",this._onError);this.buffer.addEventListener("updateend",
this._flush)}a.prototype.dispose=function(){this.buffer.removeEventListener("update",this._onUpdate);this.buffer.removeEventListener("error",this._onError);this.buffer.removeEventListener("updateend",this._flush);this.buffer=null;this.queue.length=0;this.flushing=null};a.prototype.onUpdate=function(a){this.flushing&&(this.flushing.next(a),this.flushing.complete(),this.flushing=null)};a.prototype.onError=function(a){this.flushing&&(this.flushing.error(a),this.flushing=null)};a.prototype.queueAction=
function(a,c){var d=new l.Subject;1===this.queue.unshift({type:a,args:c,subj:d})&&this.flush();return d};a.prototype.appendBuffer=function(a){return this.queueAction("append",a)};a.prototype.removeBuffer=function(a){return this.queueAction("remove",{start:a.start,end:a.end})};a.prototype.appendStream=function(a){return this.queueAction("stream",a)};a.prototype.flush=function(){if(!this.flushing&&0!==this.queue.length&&!this.buffer.updating){var a=this.queue.pop(),c=a.type,d=a.args;this.flushing=a.subj;
try{switch(c){case "append":this.buffer.appendBuffer(d);break;case "stream":this.buffer.appendStream(d);break;case "remove":this.buffer.remove(d.start,d.end)}}catch(b){this.onError(b)}}};return a}()},function(e,g,a){a.d(g,"a",function(){return l});var l=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cache={}}a.prototype.add=function(a,f){var c=a.segment;c.isInitSegment()&&(this.cache[c.getId()]=f)};a.prototype.get=function(a){a=a.segment;
return a.isInitSegment()&&(a=this.cache[a.getId()],null!=a)?a:null};return a}()},function(e,g,a){var l=a(14);a.n(l);e=a(139);a.n(e);var k=a(9),h=e.IntervalObservable.create,f=window.devicePixelRatio||1;g.a=function(c){var d=a.i(k.u)().filter(function(a){return!1===a}),b=a.i(k.u)().debounceTime(6E4).filter(function(a){return!0===a}),d=a.i(l.merge)(d,b).startWith(!1);return{videoWidth:a.i(l.merge)(h(2E4),a.i(k.v)().debounceTime(500)).startWith("init").map(function(){return c.clientWidth*f}).distinctUntilChanged(),
inBackground:d}}},function(e,g,a){function l(a,h){if("function"!==typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);a.prototype=Object.create(h&&h.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});h&&(Object.setPrototypeOf?Object.setPrototypeOf(a,h):a.__proto__=h)}e=function(a){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");var f=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!f||"object"!==typeof f&&"function"!==typeof f?this:f}l(h,a);h.prototype._append=function(){this.buffered.insert(0,0,Infinity)};return h}(a(46).a);g.a=e},function(e,g,a){function l(a,h){if("function"!==typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);a.prototype=Object.create(h&&h.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});h&&(Object.setPrototypeOf?Object.setPrototypeOf(a,h):a.__proto__=h)}e=function(a){function h(){if(!(this instanceof
h))throw new TypeError("Cannot call a class as a function");var f=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}l(h,a);h.getLiveEdge=function(){throw Error("not implemented");};h.prototype.addSegment=function(a){this.index.timeline.push(a);return!0};return h}(a(28).a);g.a=e},function(e,g,a){var l=a(23);e=function(){function a(h,f,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=h;this.representation=f;this.index=c}a.getLiveEdge=function(){throw Error("not implemented");};a.prototype.checkDiscontinuity=function(){return-1};a.prototype.checkRange=function(a,f,c){f=this.index;a=f.list;c=Math.floor(c/f.duration);return 0<=c&&c<a.length};a.prototype.createSegment=function(a,f){var c=this.index,d=c.list[a];return l.b.create(this.adaptation,this.representation,a,d.media,f,c.duration,0,d.range,null,!1)};a.prototype.getSegments=function(a,f){for(var c=this.index,
d=c.duration,c=Math.min(c.list.length-1,Math.floor(f/d)),b=[],h=Math.floor(a/d);h<=c;)b.push(this.createSegment(h,h*d)),h++;return b};a.prototype.addSegment=function(){return!1};return a}();g.a=e},function(e,g,a){function l(a,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
f):a.__proto__=f)}var k=a(28);e=function(a){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var c=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?this:c}l(f,a);f.prototype.checkRange=function(a){var c=this.index.timeline,c=c[c.length-1];if(!c)return!0;0>c.d&&(c={ts:c.ts,d:0,r:c.r});return a<=k.a.getRangeEnd(c)};return f}(k.a);g.a=
e},function(e,g,a){var l=a(23);e=function(){function a(h,f,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=h;this.representation=f;this.index=c}a.getLiveEdge=function(a,f){return Date.now()/1E3-f.availabilityStartTime-f.suggestedPresentationDelay};a.prototype.checkDiscontinuity=function(){return-1};a.prototype.checkRange=function(){return!0};a.prototype.createSegment=function(a){var f=this.index,c=f.startNumber,f=f.duration;a=Math.floor(a/f)+(null==
c?1:c);return l.b.create(this.adaptation,this.representation,a,this.index.media,a*f,this.index.duration,a,null,null,!1)};a.prototype.getSegments=function(a,f){for(var c=this.index.duration,d=[],b=a;b<=f;b+=c)d.push(this.createSegment(b));return d};a.prototype.addSegment=function(){return!1};return a}();g.a=e},function(e,g,a){function l(b,c,d){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0;a.i(m.e)(d)||(d=new (d instanceof m.h?m.j:m.f)(b,d,f));d.pipelineType=c;return d}function k(a){return a instanceof
m.h?a.type===m.i.ERROR_HTTP_CODE?500<=a.status||404==a.status:a.type===m.i.TIMEOUT||a.type===m.i.ERROR_EVENT:!1}function h(f,h,e,m){function g(a){throw l("PIPELINE_RESOLVE_ERROR",f,a);}function p(a){throw l("PIPELINE_PARSING_ERROR",f,a);}function q(a){e.next(a)}function r(c){return a.i(d.a)(a.i(b.c)(C,c),T)}function u(c){var d=L?L.get(c):null;return null===d?r(c):a.i(b.b)(d)["catch"](function(){return r(c)})}function B(c){return a.i(b.c)(H,c)["catch"](p)}function A(a,b){var c=Object.assign({response:b},
a);L&&L.add(a,b);n.schedule(q,0,{type:f,value:c});return c}function x(a,b){return Object.assign({parsed:b},a)}var G=h.resolver,C=h.loader,H=h.parser,D=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};G||(G=c.Observable.of);C||(C=c.Observable.of);H||(H=c.Observable.of);var E=D.maxRetry,L=D.cache,D="number"===typeof E?E:4,T={retryDelay:200,errorSelector:function(a){throw l("PIPELINE_LOAD_ERROR",f,a);},totalRetry:D,shouldRetry:D&&k,onRetry:function(a){n.schedule(q,0,{type:f,value:a.xhr});m.next(l("PIPELINE_LOAD_ERROR",
f,a,!1))}};return function(c){return a.i(b.c)(G,c)["catch"](g).mergeMap(u,A).mergeMap(B,x)}}var f=a(8);a.n(f);e=a(170);a.n(e);var c=a(0);a.n(c);var d=a(33),b=a(11),m=a(4),n=e.asap;g.a=function(){var a=new f.Subject;return{createPipelines:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d={requiresMediaSource:function(){return!0!==b.directFile}},f;for(f in b)d[f]=h(f,b[f],a,c.errorStream,c[f]);return d},metrics:a}}},function(e,g,a){function l(a){return"audio"==a||"video"==
a}var k=a(3),h=a(1),f=a(47),c=a(33),d=a(0);a.n(d);var b=a(11);e=a(6);a.n(e);var m=a(14);a.n(m);var n=a(22);a.n(n);var p=a(9),r=a(106),q=a(99),x=a(45),t=a(95),w=a(44),v=a(4),y=a(29),u=Math.min,B=e.EmptyObservable.create;g.a=function(e){function g(a,b,c){Z[b]||(k.a.info("add sourcebuffer",c),Z[b]=a.addSourceBuffer(c));return Z[b]}function A(a,b,c){var d=c.type;c=c.codec;if(l(d))a=g(b,d,c);else{if(b=W[d])try{b.abort()}catch(ca){k.a.warn(ca)}finally{delete W[d]}if("text"==d)k.a.info("add text sourcebuffer",
c),a=new r.a(a,c,K);else if("image"==d)k.a.info("add image sourcebuffer",c),a=new q.a(c);else throw k.a.error("unknown buffer type "+d),new v.d("BUFFER_TYPE_UNKNOWN",null,!0);W[d]=a}return a}function C(a,b,c){a=c.type;var d=l(a);d?(c=Z[a],delete Z[a]):(c=W[a],delete W[a]);if(c)try{c.abort(),d&&b.removeSourceBuffer(c)}catch(ca){k.a.warn(ca)}}function H(b){var c=J.map(function(c){var d;ha?(d=c.clone(),d.ts=u(c.ts,ba),d.duration=u(c.duration,ba)):d=c;d.liveGap=a.i(f.d)(c.ts,b);return d}),d=a.i(f.h)(c);
return{timings:c,seekings:d}}function D(b,c,d,f){var e=c.type;return X.getAdaptationsChoice(e,c.adaptations).switchMap(function(h){if(!h)return C(P,b,c),a.i(t.a)(e);var m=X.getBufferAdapters(h);h=a.i(t.b)({bufferType:e,sourceBuffer:A(P,b,c),pipeline:U[e],adaptation:h,timings:d,seekings:f,adapters:m});return l(e)?h:h["catch"](function(a){k.a.error("buffer",e,"has crashed",a);I.next(a);return B()})})}function E(b){var c=a.i(p.o)(P)["do"](function(){var c=b.duration,d=ea,e=ba,m=/^\d*(\.\d+)? ?%$/;if(Q)e=
a.i(f.i)(b),c=e[0],e=e[1],null!=Q.position?d=Math.max(Math.min(Q.position,e),c):null!=Q.wallClockTime?d=Math.max(Math.min(b.isLive?Q.wallClockTime-b.availabilityStartTime:Q.wallClockTime,e),c):null!=Q.fromFirstPosition?(d=Q.fromFirstPosition,d=0>=d?c:Math.min(c+d,e)):null!=Q.fromLastPosition&&(d=Q.fromLastPosition,d=0<=d?e:Math.max(c,e+d));else{"string"==typeof d&&m.test(d)&&(d=parseFloat(d)/100*c);"string"==typeof e&&m.test(e)&&(ba=parseFloat(e)/100*c);if(Infinity===e||"100%"===e)e=c;b.isLive?d=
d?a.i(f.e)(d,b):a.i(x.a)(b):a.i(h.a)(d<c&&e<=c,"stream: bad startTime and endTime")}k.a.info("set initial time",d);P.playbackRate=1;P.currentTime=d}),d=a.i(p.p)(P)["do"](function(){k.a.info("canplay event");da&&P.play();da=!0});return a.i(n.combineLatest)(c,d).take(1).mapTo({type:"loaded",value:!0})}function L(){return R&&R.length?a.i(w.c)(P,R,I):a.i(w.d)(P).map(function(){k.a.error("eme: ciphered media and no keySystem passed");throw new v.c("MEDIA_IS_ENCRYPTED_ERROR",null,!0);})}function T(b,c){var d=
c.changePlaybackRate,f=void 0===d?!0:d;return b.distinctUntilChanged(function(b,c){var d=c.stalled,e=b.stalled,h;h=e||d?e&&d?e.name==d.name:!1:!0;!h&&f&&(e?(k.a.info("resume playback",c.ts,c.name),P.playbackRate=e.playback):(k.a.info("stop playback",c.ts,c.name),P.playbackRate=0));d&&(d=c.buffered.getNextRangeGap(c.ts),a.i(p.q)(c)?(P.currentTime=c.ts,k.a.warn("after freeze seek",c.ts,c.range)):1>d&&(e=c.ts+d+1/60,P.currentTime=e,k.a.warn("discontinuity seek",c.ts,d,e)));return h}).map(function(a){return{type:"stalled",
value:a.stalled}})}function S(b){return fa({url:b.locations[0]}).map(function(c){c=c.parsed;return{type:"manifest",value:a.i(y.e)(b,a.i(y.d)(c.url,c.manifest,N,M))}})}function V(b,c,f,e){var h=a.i(y.g)(c);h.forEach(function(a){var c=a.type;a=a.codec;l(c)&&g(b,c,a)});h=h.map(function(a){return D(b,a,f,e)});h=m.merge.apply(void 0,h);return c.isLive?h.concatMap(function(b){a:{switch(b.type){case "index-discontinuity":k.a.warn("explicit discontinuity seek",b.value.ts);P.currentTime=b.value.ts;break;case "precondition-failed":a.i(y.f)(c,
1);k.a.warn("precondition failed",c.presentationLiveGap);break;case "out-of-index":k.a.info("out of index");b=S(c);break a}b=d.Observable.of(b)}return b}):h}function Y(){return a.i(b.a)(P,"error").mergeMap(function(){var a=void 0;switch(P.error.code){case 1:a="MEDIA_ERR_ABORTED";break;case 2:a="MEDIA_ERR_NETWORK";break;case 3:a="MEDIA_ERR_DECODE";break;case 4:a="MEDIA_ERR_SRC_NOT_SUPPORTED"}k.a.error("stream: video element MEDIA_ERR("+a+")");throw new v.d(a,null,!0);})}var F=e.url,I=e.errorStream,
R=e.keySystems,N=e.supplementaryTextTracks,K=e.hideNativeSubtitle,M=e.supplementaryImageTracks,J=e.timings,O=e.timeFragment,X=e.adaptive,U=e.pipelines,P=e.videoElement,da=e.autoPlay,Q=e.startAt,ea=O.start,ba=O.end,ha=Infinity>ba,fa=a.i(b.d)(U.manifest),Z={},W={};e=J.filter(function(a){var b=a.ts;a=a.duration;return 0<a&&.5>u(a,ba)-b});O=a.i(c.b)(function(b){var c=b.url,f=b.mediaSource;b=f?a.i(p.n)(f):d.Observable.of(null);return a.i(n.combineLatest)(fa({url:c}),b).mergeMap(function(b){b=b[0].parsed;
b=a.i(y.d)(b.url,b.manifest,N,M);if(f){var c=b.duration,c=Infinity===c?Number.MAX_VALUE:c;f.duration!==c&&(f.duration=c,k.a.info("set duration",f.duration))}var c=H(b),e=c.timings,h=c.seekings,c=d.Observable.of({type:"manifest",value:b}),g=L(),n=T(e,{changePlaybackRate:U.requiresMediaSource()}),l=E(b);b=V(f,b,e,h);e=Y();return a.i(m.merge)(c,l,n,g,b,e)})},{totalRetry:3,retryDelay:250,resetDelay:6E4,shouldRetry:function(a){return!0!==a.fatal},errorSelector:function(b){a.i(v.e)(b)||(b=new v.f("NONE",
b,!0));b.fatal=!0;return b},onRetry:function(a,b){k.a.warn("stream retry",a,b);I.next(a)}});return function(b,c){return d.Observable.create(function(d){function f(){if(e&&"closed"!=e.readyState)for(var b=e,d=b.readyState,b=b.sourceBuffers,f=0;f<b.length;f++){var m=b[f];try{"open"==d&&m.abort(),e.removeSourceBuffer(m)}catch(ga){k.a.warn("error while disposing souceBuffer",ga)}}Object.keys(W).forEach(function(a){a=W[a];try{a.abort()}catch(la){k.a.warn("error while disposing souceBuffer",la)}});a.i(p.l)(c);
if(h)try{URL.revokeObjectURL(h)}catch(ga){k.a.warn("error while revoking ObjectURL",ga)}Z={};W={};h=e=null}var e=void 0,h=void 0;f();if(U.requiresMediaSource()){if(!p.m)throw new v.d("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);e=new p.m;h=URL.createObjectURL(e)}else e=null,h=b;c.src=h;d.next({url:b,mediaSource:e});k.a.info("create mediasource object",h);return f})}(F,P).mergeMap(O).takeUntil(e)}},function(e,g,a){function l(a,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+
typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}e=a(46);var k=a(9),h=a(3),f=window.VTTCue||window.TextTrackCue;e=function(c){function d(b,f,e){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var h;h=c.call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&
"function"!==typeof h?this:h;h.video=b;h.codec=f;h.isVTT=/^text\/vtt/.test(f);b=a.i(k.r)(b,e);f=b.trackElement;h.track=b.track;h.trackElement=f;return h}l(d,c);d.prototype.createCuesFromArray=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.start,h=d.end;(d=d.text)&&b.push(new f(e,h,d))}return b};d.prototype._append=function(b){var c=this;if(this.isVTT)a.i(k.s)()&&this.trackElement?(b=new Blob([b],{type:"text/vtt"}),b=URL.createObjectURL(b),this.trackElement.src=b,this.buffered.insert(0,
Infinity)):h.a.warn("vtt subtitles not supported");else if(b=this.createCuesFromArray(b),0<b.length){var d=b[0],f=b[b.length-1],e=this.track.cues;0<e.length&&d.startTime<e[e.length-1].startTime&&this._remove(d.startTime,Infinity);b.forEach(function(a){return c.track.addCue(a)});this.buffered.insert(0,d.startTime,f.endTime)}};d.prototype._remove=function(a,c){for(var b=this.track,d=b.cues,f=d.length-1;0<=f;f--){var e=d[f],h=e.startTime,m=e.endTime;h>=a&&h<=c&&m<=c&&b.removeCue(e)}this.buffered.remove(a,
c)};d.prototype._abort=function(){var a=this.trackElement,c=this.video;a&&c&&c.hasChildNodes(a)&&c.removeChild(a);this.track.mode="disabled";this.size=0;this.video=this.track=this.trackElement=null};return d}(e.a);g.a=e},function(e,g,a){function l(e){if("string"==typeof e){var g=e,m=g.split(",");a.i(d.a)(2>=m.length,b);e=m[0]?m[0]:"";m=m[1]?m[1]:"";a.i(d.a)((e||m)&&(!e||m||-1===g.indexOf(",")),b);e=e.replace(/^smpte(-25|-30|-30-drop)?:/,"").replace(/^npt[:=]/,"").replace("clock:","");var g=/(((\d+:)?(\d\d):(\d\d))|(\d+))(\.\d*)?$/,
l=/^\d+:\d\d:\d\d(:\d\d(\.\d\d)?)?$/,q=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|([-+]\d{2}:\d{2}))?$/,x=/^\d*(\.\d+)? ?%$/;if(g.test(e)&&g.test(m))g=k;else if(l.test(e)&&l.test(m))g=h;else if(q.test(e)&&q.test(m))g=f;else if(x.test(e)&&x.test(m))g=c;else throw Error(b);e=g(e);m=g(m);a.i(d.a)(!1!==e||!1!==m,b);e={start:!1===e?"":e,end:!1===m?"":m}}else e||(e={});"string"==typeof e.start&&"string"==typeof e.end?(e.start||(e.start="0%"),e.end||(e.end="100%")):(e.start||(e.start=0),e.end||(e.end=
Infinity));"string"==typeof e.start&&"string"==typeof e.end?(a.i(d.a)(0<=parseFloat(e.start)&&100>=parseFloat(e.start),"player: startTime should be between 0% and 100%"),a.i(d.a)(0<=parseFloat(e.end)&&100>=parseFloat(e.end),"player: endTime should be between 0% and 100%")):(a.i(d.a)(("number"==typeof e.start||e.start instanceof Date)&&("number"==typeof e.end||e.end instanceof Date),"player: timeFragment should have interface { start, end } where start and end are numbers or dates"),a.i(d.a)(e.start<
e.end,"player: startTime should be lower than endTime"),a.i(d.a)(0<=e.start,"player: startTime should be greater than 0"));return e}function k(c){if(!c)return!1;c=c.replace(/\.$/,"");var f,e;c=c.split(":");var h=c.length;switch(h){case 3:f=parseInt(c[0],10);e=parseInt(c[1],10);c=parseFloat(c[2]);break;case 2:f=0;e=parseInt(c[0],10);c=parseFloat(c[1]);break;case 1:e=f=0;c=parseFloat(c[0]);break;default:return!1}a.i(d.a)(23>=f,b);a.i(d.a)(59>=e,b);a.i(d.a)(1>=h||60>c,b);return 3600*f+60*e+c}function h(c){if(!c)return!1;
var f,e,h,g;c=c.split(":");switch(c.length){case 3:f=parseInt(c[0],10);e=parseInt(c[1],10);h=parseInt(c[2],10);g=c=0;break;case 4:f=parseInt(c[0],10);e=parseInt(c[1],10);h=parseInt(c[2],10);-1===c[3].indexOf(".")?(c=parseInt(c[3],10),g=0):(g=c[3].split("."),c=parseInt(g[0],10),g=parseInt(g[1],10));break;default:return!1}a.i(d.a)(23>=f,b);a.i(d.a)(59>=e,b);a.i(d.a)(59>=h,b);return 3600*f+60*e+h+.001*c+1E-6*g}function f(a){return new Date(Date.parse(a))}function c(a){return a?a:!1}a.d(g,"a",function(){return l});
var d=a(1),b="invalid MediaFragment"},function(e,g,a){Object.defineProperty(g,"__esModule",{value:!0});e=a(68);a.n(e);e=a(69);a.n(e);e=a(70);a.n(e);e=a(71);a.n(e);e=a(72);a.n(e);e=a(73);a.n(e);e=a(74);a.n(e);e=a(75);a.n(e);e=a(76);a.n(e);e=a(77);a.n(e);e=a(78);a.n(e);e=a(79);a.n(e);e=a(80);a.n(e);e=a(81);a.n(e);e=a(82);a.n(e);e=a(83);a.n(e);e=a(84);a.n(e);e=a(85);a.n(e);e=a(86);a.n(e);e=a(87);a.n(e);e=a(88);a.n(e);e=a(89);a.n(e);e=a(90);a.n(e);e=a(91);a.n(e);e=a(92);a.n(e);e=a(67);a(3);a=a(66);"function"!=
typeof Object.assign&&(Object.assign=e.a);g["default"]=a.a},function(e,g,a){e=a(30);a=a(20);g.a=Object.assign({},e.a,{getInitSegment:a.a,setTimescale:a.b,scale:a.c,_addSegmentInfos:function(a,e){a.timeline.push({ts:e.time,d:e.duration});return a}})},function(e,g,a){a.d(g,"a",function(){return d});var l=a(30),k=a(111),h=a(113),f=a(112),c=a(109),d=function(a){switch(a.indexType){case "timeline":return l.a;case "list":return k.a;case "template":return h.a;case "smooth":return f.a;case "base":return c.a;
default:return l.a}}},function(e,g,a){var l=a(16),k=a(20);g.a={getInitSegment:k.a,setTimescale:k.b,scale:k.c,getSegments:function(e,f,c,d){var b=a.i(k.e)(f,c,d);c=f.duration;d=f.list;f=f.timescale;for(var h=Math.min(d.length-1,Math.floor(b.to/c)),g=[],b=Math.floor(b.up/c);b<=h;)g.push(new l.a({id:""+e+"_"+b,time:b*c,init:!1,range:d[b].range,duration:c,indexRange:null,timescale:f})),b++;return g},getFirstPosition:function(){return 0},getLastPosition:function(a){return a.list.length*a.duration/a.timescale},
shouldRefresh:function(a,f,c,d){f=a.list;a=Math.floor(d/a.duration);return!(0<=a&&a<f.length)},_addSegmentInfos:function(){},checkDiscontinuity:function(){return-1}}},function(e,g,a){e=a(30);var l=a(20);g.a={getSegments:e.a.getSegments,getInitSegment:l.a,checkDiscontinuity:e.a.checkDiscontinuity,_addSegmentInfos:e.a._addSegmentInfos,setTimescale:l.b,scale:l.c,shouldRefresh:function(e,h){var f=e.timeline,f=f[f.length-1];if(!f)return!1;0>f.d&&(f={ts:f.ts,d:0,r:f.r});return h>=a.i(l.d)(f)},getFirstPosition:function(a){if(a.timeline.length)return a.timeline[0].ts/
a.timescale},getLastPosition:function(e){if(e.timeline.length){var h=e.timeline[e.timeline.length-1];return a.i(l.d)(h)/e.timescale}}}},function(e,g,a){var l=a(16),k=a(20);g.a={getInitSegment:k.a,setTimescale:k.b,scale:k.c,getSegments:function(e,f,c,d){var b=a.i(k.e)(f,c,d);c=b.to;d=f.duration;var h=f.startNumber;f=f.timescale;for(var g=[],b=b.up;b<=c;b+=d){var p=Math.floor(b/d)+(null==h?1:h),b=p*d;g.push(new l.a({id:""+e+"_"+p,number:p,time:b,init:!1,duration:d,range:null,indexRange:null,timescale:f}))}return g},
getFirstPosition:function(){},getLastPosition:function(){},shouldRefresh:function(){return!1},checkDiscontinuity:function(){return-1},_addSegmentInfos:function(){}}},function(e,g,a){var l=a(24),k=a(32);e=function(){function e(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var c=a.i(k.a)();this.id=null==f.id?c:""+f.id;this.transport=f.transportType||"";this.adaptations=f.adaptations?Object.keys(f.adaptations).reduce(function(a,
b){a[b]=f.adaptations[b].map(function(a){return new l.a(a)});return a},{}):[];this.periods=[{adaptations:this.adaptations}];this.isLive="dynamic"===f.type;this.uris=f.locations;this._duration=f.duration}e.prototype.getDuration=function(){return this._duration};return e}();g.a=e},function(e,g,a){var l=a(110);e=function(){function e(h){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._index=h.index;this._rootId=h.rootId;this._indexHelpers=a.i(l.a)(this._index)}e.prototype.getInitSegment=
function(){return this._indexHelpers.getInitSegment(this._rootId,this._index)};e.prototype.getSegments=function(a,f){return this._indexHelpers.getSegments(this._rootId,this._index,a,f)};e.prototype.shouldRefresh=function(a,f,c){return this._indexHelpers.shouldRefresh(this._index,a,f,c)};e.prototype.getFirstPosition=function(){return this._indexHelpers.getFirstPosition(this._index)};e.prototype.getLastPosition=function(){return this._indexHelpers.getLastPosition(this._index)};e.prototype.checkDiscontinuity=
function(a){return this._indexHelpers.checkDiscontinuity(this._index,a)};e.prototype.scale=function(a){return this._indexHelpers.scale(this._index,a)};e.prototype.setTimescale=function(a){return this._indexHelpers.setTimescale(this._index,a)};e.prototype._addSegments=function(a,f){for(var c=[],d=0;d<a.length;d++)this._indexHelpers._addSegmentInfos(a[d],f)&&c.push(a[d]);return c};return e}();g.a=e},function(e,g,a){function l(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+
+b+"-"}function k(a){return function(b,c,d){b=d?parseInt(d,10):1;c=""+a;c=c.toString();b=c.length>=b?c:(Array(b+1).join("0")+c).slice(-b);return b}}function h(a,b){if(-1===a.indexOf("$"))return a;var c=b.getRepresentation();return a.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,c.id).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,k(c.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,k(b.getNumber())).replace(/\$Time(|\%0(\d+)d)\$/g,k(b.getTime()))}var f=a(0);a.n(f);e=a(6);a.n(e);var c=a(14);a.n(c);a(1);var d=
a(34),b=a(121),m=a(10),n=a(24),p=a(25),r=a(16),q=a(51),x=a(119),t=a(50),w=a(49),v=e.EmptyObservable.create;g.a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=e.contentProtectionParser;g||(g=function(){});var k=e.createXHR,A=function(b){var d=b.url;b=b.segment;var f=b.range;b=b.indexRange;if(f&&b&&f[1]===b[0]-1)return a.i(q.a)({url:d,responseType:"arraybuffer",headers:{Range:l([f[0],b[1]])},createXHR:k});f=f?{Range:l(f)}:null;f=a.i(q.a)({url:d,responseType:"arraybuffer",
headers:f,createXHR:k});return b?(d=a.i(q.a)({url:d,responseType:"arraybuffer",headers:{Range:l(b)},createXHR:k}),a.i(c.merge)(f,d)):f},z=function(b){b=b.segment;var c=b.getMedia(),g=b.getRange(),k=b.getIndexRange();if(b.isInitSegment()&&!(c||g||k))return v();var m=e.segmentLoader,c=c?h(c,b):"",c=a.i(d.b)(b.getResolvedURL(),c),l={adaptation:new n.a(b.getAdaptation()),representation:new p.a(b.getRepresentation()),segment:new r.a(b),transport:"dash",url:c};return m?f.Observable.create(function(a){var b=
!1,c=!1,d=m(l,{reject:function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c||(b=!0,a.error(d))},resolve:function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c||(b=!0,a.next({responseData:d.data,size:d.size||0,duration:d.duration||0}),a.complete())},fallback:function(){c=!0;A(l).subscribe(a)}});return function(){b||c||"function"!==typeof d||d()}}):A(l)},G={loader:function(a){return z({segment:a.segment})},parser:function(c){var d=c.segment;c=new Uint8Array(c.response.responseData);
var e=void 0,h=void 0,g=void 0,k=d.getIndexRange();if(k=a.i(b.a)(c,k?k[0]:0))e=k.segments,h=k.timescale;d.isInitSegment()||(0<=d.getTime()&&0<=d.getDuration()?g={ts:d.getTime(),d:d.getDuration()}:k&&1===k.segments.length&&(g={ts:k.segments[0].ts,d:k.segments[0].d}));k=c;d.isInitSegment()&&(d=d.getAdaptation(),d.contentProtection&&(k=a.i(b.b)(c,d.contentProtection)));return f.Observable.of({segmentData:k,currentSegment:g,nextSegments:e,timescale:h})}};return{directFile:!1,manifest:{loader:function(b){b=
b.url;return a.i(q.a)({url:b,responseType:"document",createXHR:k})},parser:function(b){b=b.response;var c=b.responseData;return f.Observable.of({manifest:a.i(x.a)(c,g),url:b.url})}},audio:G,video:G,text:{loader:function(b){var f=b.segment,e=f.getMedia(),g=f.getRange();b=f.getIndexRange();var m=0<=("application/mp4"===f.getRepresentation().mimeType)?"arraybuffer":"text";if(f.isInitSegment()&&!(e||g||b))return v();e=e?h(e,f):"";f=a.i(d.b)(f.getResolvedURL(),e);if(g&&b&&g[1]===b[0]-1)return a.i(q.a)({url:f,
responseType:m,headers:{Range:l([g[0],b[1]])},createXHR:k});g=a.i(q.a)({url:f,responseType:m,headers:g?{Range:l(g)}:null,createXHR:k});return b?(b=a.i(q.a)({url:f,responseType:m,headers:{Range:l(b)},createXHR:k}),a.i(c.merge)(g,b)):g},parser:function(c){var d=c.segment,e=c.response;c=d.getAdaptation().lang;var h;"application/mp4"===d.getRepresentation().mimeType?(h=new Uint8Array(e.responseData),e=a.i(m.a)(a.i(b.c)(h))):e=h=e.responseData;var g=void 0,k=void 0,n=void 0,l=d.getIndexRange();if(l=a.i(b.a)(h,
l?l[0]:0))g=l.segments,k=l.timescale;h=[];if(!d.isInitSegment())switch(0<=d.getTime()&&0<=d.getDuration()?n={ts:d.getTime(),d:d.getDuration()}:l&&1===l.segments.length&&(n={ts:l.segments[0].ts,d:l.segments[0].d}),d=d.getRepresentation().codecs,(void 0===d?"":d).toLowerCase()){case "stpp":h=a.i(t.a)(e,c,0);break;default:console.warn("The codec used for the subtitle is not managed yet.")}return f.Observable.of({segmentData:h,currentSegment:n,nextSegments:g,timescale:k})}},image:{loader:function(b){b=
b.segment;if(b.init)return v();var c=b.getMedia(),c=c?h(c,b):"";b=a.i(d.b)(b.getResolvedURL(),c);return a.i(q.a)({url:b,responseType:"arraybuffer",createXHR:k})},parser:function(b){var c=new Uint8Array(b.response.responseData),d=b=void 0;c&&(c=a.i(w.a)(c),b=c.thumbs,d=c.timescale);return f.Observable.of({segmentData:b,currentSegment:{ts:0,d:Infinity},timescale:d})}}}}},function(e,g,a){var l=a(1);e=a(21);var k=a(48),h=[{k:"profiles",fn:k.g},{k:"width",fn:parseInt},{k:"height",fn:parseInt},{k:"frameRate",
fn:k.h},{k:"audioSamplingRate",fn:k.g},{k:"mimeType",fn:k.g},{k:"segmentProfiles",fn:k.g},{k:"codecs",fn:k.g},{k:"maximumSAPPeriod",fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:k.i}],f=[{k:"timescale",fn:parseInt,def:1},{k:"timeShiftBufferDepth",fn:k.j},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:k.f},{k:"indexRangeExact",fn:k.i,def:!1},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:k.i,def:!0}],c=f.concat([{k:"duration",
fn:parseInt},{k:"startNumber",fn:parseInt}]),d={ContentProtection:[{k:"schemeIdUri",fn:k.g},{k:"value",fn:k.g}],SegmentURL:[{k:"media",fn:k.g},{k:"mediaRange",fn:k.f},{k:"index",fn:k.g},{k:"indexRange",fn:k.f}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:f,SegmentTemplate:c.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:k.g},{k:"media",fn:k.g},{k:"bitstreamSwitching",fn:k.g}]),SegmentList:c,ContentComponent:[{k:"id",
fn:k.g},{k:"lang",fn:e.c},{k:"contentType",fn:k.g},{k:"par",fn:k.k}],Representation:h.concat([{k:"id",fn:k.g},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:h.concat([{k:"id",fn:k.g},{k:"group",fn:parseInt},{k:"lang",fn:e.c},{k:"contentType",fn:k.g},{k:"par",fn:k.k},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},
{k:"minFrameRate",fn:k.h},{k:"maxFrameRate",fn:k.h},{k:"segmentAlignment",fn:k.l},{k:"subsegmentAlignment",fn:k.l},{k:"bitstreamSwitching",fn:k.i}]),Period:[{k:"id",fn:k.g},{k:"start",fn:k.j},{k:"duration",fn:k.j},{k:"bitstreamSwitching",fn:k.i}],MPD:[{k:"id",fn:k.g},{k:"profiles",fn:k.g},{k:"type",fn:k.g,def:"static"},{k:"availabilityStartTime",fn:k.m},{k:"availabilityEndTime",fn:k.m},{k:"publishTime",fn:k.m},{k:"mediaPresentationDuration",fn:k.j,n:"duration"},{k:"minimumUpdatePeriod",fn:k.j},{k:"minBufferTime",
fn:k.j},{k:"timeShiftBufferDepth",fn:k.j},{k:"suggestedPresentationDelay",fn:k.j},{k:"maxSegmentDuration",fn:k.j},{k:"maxSubsegmentDuration",fn:k.j}],Role:[{k:"schemeIdUri",fn:k.g},{k:"value",fn:k.g}],Accessibility:[{k:"schemeIdUri",fn:k.g},{k:"value",fn:parseInt}]};g.a=function(b,c){var f=d[b.nodeName];a.i(l.a)(f,"no attributes for "+b.nodeName);for(var e=c||{},h=0;h<f.length;h++){var g=f[h],k=g.k,m=g.fn,w=g.n,g=g.def;b.hasAttribute(k)?e[w||k]=m(b.getAttribute(k)):null!=g&&(e[w||k]=g)}return e}},
function(e,g,a){a.d(g,"a",function(){return l});a.d(g,"b",function(){return k});a.d(g,"c",function(){return h});a.d(g,"d",function(){return f});e=function(a){return function(c){return a.reduce(function(a,d){c.hasOwnProperty(d)&&(a[d]=c[d]);return a},{})}};var l=e("availabilityStartTime baseURL duration id locations periods presentationLiveGap suggestedPresentationDelay timeShiftBufferDepth transportType type".split(" ")),k=e(["adaptations","baseURL","duration","id","start"]),h=e("accessibility baseURL contentProtection id lang representations type".split(" ")),
f=e("bitrate baseURL codecs height id index mimeType width".split(" "))},function(e,g,a){function l(a,c){return"string"==typeof a?l.parseFromString(a,c):l.parseFromDocument(a,c)}var k=a(1),h=a(120);l.parseFromString=function(a,c){return l.parseFromDocument((new DOMParser).parseFromString(a,"application/xml"),c)};l.parseFromDocument=function(f,c){var d=f.documentElement;k.a.equal(d.nodeName,"MPD","document root should be MPD");return a.i(h.a)(d,c)};g.a=l},function(e,g,a){function l(b,c){var d=a.i(p.a)(b,
function(a,b,d){switch(b){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);break;case "Period":a.periods.push(k(d,c))}return a},{transportType:"dash",periods:[],locations:[]}),d=a.i(q.a)(b,d);if(/dynamic/.test(d.type)){var f=d.periods[0].adaptations.filter(function(a){return"video"==a.type})[0],f=a.i(p.b)(f);f||(console.warn("Live edge not deduced from manifest, setting a default one"),f=Date.now()/1E3-60);d.availabilityStartTime=d.availabilityStartTime.getTime()/
1E3;d.presentationLiveGap=Date.now()/1E3-(f+d.availabilityStartTime)}return a.i(r.a)(d)}function k(b,c){var d=a.i(q.a)(b,a.i(p.a)(b,function(a,b,d){switch(b){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":b=h(d,c),null==b.id&&(b.id=a.adaptations.length),a.adaptations.push(b)}return a},{adaptations:[]}));return a.i(r.b)(d)}function h(e,h){var g=void 0,k=a.i(p.a)(e,function(e,k,m){switch(k){case "Accessibility":g=a.i(q.a)(m);break;case "BaseURL":e.baseURL=m.textContent;break;case "ContentComponent":k=
a.i(q.a)(m);e.contentComponent=k;break;case "ContentProtection":k=h(a.i(q.a)(m),m);e.contentProtection=k;break;case "Representation":k=f(m);null==k.id&&(k.id=e.representations.length);e.representations.push(k);break;case "Role":k=a.i(q.a)(m);e.role=k;break;case "SegmentBase":e.index=b(m);break;case "SegmentList":e.index=d(m);break;case "SegmentTemplate":e.index=c(m)}return e},{representations:[]}),m=a.i(q.a)(e,k);m.type=a.i(p.c)(m);m.accessibility=[];a.i(p.d)(g)&&m.accessibility.push("hardOfHearing");
a.i(p.e)(g)&&m.accessibility.push("visuallyImpaired");m.representations=m.representations.map(function(a){x.forEach(function(b){!a.hasOwnProperty(b)&&m.hasOwnProperty(b)&&(a[b]=m[b])});return a});return a.i(r.c)(m)}function f(f){var e=a.i(p.a)(f,function(a,f,e){switch(f){case "BaseURL":a.baseURL=e.textContent;break;case "SegmentBase":a.index=b(e);break;case "SegmentList":a.index=d(e);break;case "SegmentTemplate":a.index=c(e)}return a},{});f=a.i(q.a)(f,e);return a.i(r.d)(f)}function c(a){a=m(a);a.indexType||
(a.indexType="template");return a}function d(b){var c=m(b);c.list=[];c.indexType="list";return a.i(p.a)(b,function(b,c,d){"SegmentURL"==c&&b.list.push(a.i(q.a)(d));return b},c)}function b(b){var c=a.i(p.a)(b,function(b,c,d){if("Initialization"==c){var f=c=void 0;d.hasAttribute("range")&&(c=a.i(p.f)(d.getAttribute("range")));d.hasAttribute("sourceURL")&&(f=d.getAttribute("sourceURL"));b.initialization={range:c,media:f}}return b},a.i(q.a)(b));"SegmentBase"==b.nodeName&&(c.indexType="base",c.timeline=
[]);return c}function m(c){return a.i(p.a)(c,function(a,b,c){"SegmentTimeline"==b&&(a.indexType="timeline",a.timeline=n(c));return a},b(c))}function n(b){return a.i(p.a)(b,function(b,c,d){c=b.length;d=a.i(q.a)(d);null==d.ts&&(c=0<c&&b[c-1],d.ts=c?c.ts+c.d*(c.r+1):0);null==d.r&&(d.r=0);b.push(d);return b},[])}a.d(g,"a",function(){return l});a(1);var p=a(48),r=a(118),q=a(117),x=["codecs","height","index","mimeType","width"]},function(e,g,a){function l(c,f){for(var e=c.length,h=0,g,k=void 0;h+8<e&&(k=
a.i(b.e)(c,h),g=a.i(b.e)(c,h+4),a.i(d.a)(0<k,"dash: out of range size"),g!==f);)h+=k;if(h>=e)return-1;a.i(d.a)(h+k<=e,"dash: atom out of range");return h}function k(c){for(var f=c.length,e=0,h,g=void 0;e+8<f&&(g=a.i(b.e)(c,e),h=a.i(b.e)(c,e+4),a.i(d.a)(0<g,"dash: out of range size"),1835295092!==h);)e+=g;c=e<f?c.subarray(e+8,e+g):null;return c}function h(c,d){var f=l(c,1936286840);if(-1==f)return null;var e=a.i(b.e)(c,f),f=f+4+4,h=c[f],f=f+8,g=a.i(b.e)(c,f),f=f+4;if(0===h)h=a.i(b.e)(c,f),f+=4,d+=
a.i(b.e)(c,f)+e,f+=4;else if(1===h)h=a.i(b.f)(c,f),f+=8,d+=a.i(b.f)(c,f)+e,f+=8;else return null;for(var e=[],f=f+2,k=a.i(b.g)(c,f),f=f+2;0<=--k;){var m=a.i(b.e)(c,f),f=f+4,n=m&2147483647;if(1==(m&2147483648)>>>31)throw Error("not implemented");m=a.i(b.e)(c,f);f+=4;f+=4;e.push({ts:h,d:m,r:0,range:[d,d+n-1]});h+=m;d+=n}return{segments:e,timescale:g}}function f(c){var f=c.systemId;c=c.privateData;f=f.replace(/-/g,"");a.i(d.a)(32===f.length);f=a.i(b.h)(4,a.i(b.j)(f),a.i(b.i)(c.length),c);c=f.length+
8;return a.i(b.h)(a.i(b.i)(c),a.i(b.b)("pssh"),f)}function c(c,d){if(!d||!d.length)return c;var e=l(c,1836019574);if(-1==e)return c;for(var h=a.i(b.e)(c,e),g=[c.subarray(e,e+h)],k=0;k<d.length;k++)g.push(f(d[k]));g=b.h.apply(null,g);g.set(a.i(b.i)(g.length),0);return a.i(b.h)(c.subarray(0,e),g,c.subarray(e+h))}a.d(g,"a",function(){return h});a.d(g,"b",function(){return c});a.d(g,"c",function(){return k});var d=a(1),b=a(10)},function(e,g,a){var l=a(0);a.n(l);g.a={directFile:!0,manifest:{parser:function(a){a=
a.url;return l.Observable.of({manifest:{transportType:"directfile",locations:[a],periods:[],isLive:!1,duration:Infinity,adaptations:null},url:a})}}}},function(e,g,a){e=a(125);var l=a(116);a=a(122);g.a={smooth:e.a,dash:l.a,directfile:a.a}},function(e,g,a){function l(a){return a.replace(c,"\n").replace(f,function(a,b){return String.fromCharCode(b)})}function k(c,f){var e=/<sync[ >]/ig,g=/<sync[ >]|<\/body>/ig,k=[],n=c.match(d)[1],p,v;g.exec(c);p=/\.(\S+)\s*{([^}]*)}/gi;v={};for(var y;y=p.exec(n);){var u=
y[1];y=y[2].match(/\s*lang:\s*(\S+);/i)[1];u&&y&&(v[y]=u)}n=v[f];for(a.i(h.a)(n,"sami: could not find lang "+f+" in CSS");;){p=e.exec(c);v=g.exec(c);if(!p&&!v)break;if(!p||!v||p.index>=v.index)throw Error("parse error");v=c.slice(p.index,v.index);p=v.match(m);if(!p)throw Error("parse error (sync time attribute)");u=+p[1];if(isNaN(u))throw Error("parse error (sync time attribute NaN)");p=k;v=v.split("\n");u/=1E3;y=v.length;for(var B;0<=--y;)if(B=v[y].match(b)){var A=B[2];n===B[1]&&("&nbsp;"===A?p[p.length-
1].end=u:p.push({text:l(A),start:u}))}}return k}a.d(g,"a",function(){return k});var h=a(1),f=/&#([0-9]+);/g,c=/<br>/gi,d=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,b=/\s*<p class=([^>]+)>(.*)/i,m=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i},function(e,g,a){function l(a){return a.responseData.getElementsByTagName("media")[0].getAttribute("src")}function k(a){return(a=a.match(S))&&a[1]||""}function h(a,b){return b?a.replace(S,"?token="+b):a.replace(S,"")}function f(a){return a.getResolvedURL().replace(/\{bitrate\}/g,
a.getRepresentation().bitrate).replace(/\{start time\}/g,a.getTime())}var c=a(0);a.n(c);e=a(6);a.n(e);var d=a(10),b=a(3),m=a(24),n=a(25),p=a(16),r=a(51),q=a(127),x=a(126),t=a(49),w=a(124),v=a(50),y=x.a.patchSegment,u=x.a.createVideoInitSegment,B=x.a.createAudioInitSegment,A=x.a.getMdat,z=x.a.getTraf,G=x.a.parseTfrf,C=x.a.parseTfxd,H={"application/x-sami":w.a,"application/smil":w.a,"application/ttml+xml":v.a,"application/ttml+xml+mp4":v.a,"text/vtt":function(a){return a}},D=r.a.RequestResponse,E=e.EmptyObservable.create,
L=/\.(isml?)(\?token=\S+)?$/,T=/\.wsx?(\?token=\S+)?/,S=/\?token=(\S+)/;g.a=function(){function e(a,c){var d=void 0,f=void 0;if(c.getAdaptation().isLive){var e=z(a);e?(d=G(e),f=C(e)):b.a.warn("smooth: could not find traf atom")}else d=null;f||(f={d:c.getDuration(),ts:c.getTime()});return{nextSegments:d,currentSegment:f}}var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},w=a.i(q.a)(g),v=g.createXHR,x=function(a){var b=a.segment;if(b.isInitSegment()){a=b.getAdaptation();var b=b.getRepresentation(),
d={},e=a.smoothProtection||{};switch(a.type){case "video":d=u(b.index.timescale,b.width,b.height,72,72,4,b.codecPrivateData,e.keyId,e.keySystems);break;case "audio":d=B(b.index.timescale,b.channels,b.bitsPerSample,b.packetSize,b.samplingRate,b.codecPrivateData,e.keyId,e.keySystems)}return c.Observable.of(new D(200,"","arraybuffer",Date.now()-100,Date.now(),d.length,d))}var h=g.segmentLoader;a=f(b);var k={adaptation:new m.a(b.getAdaptation()),representation:new n.a(b.getRepresentation()),segment:new p.a(b),
transport:"smooth",url:a};return h?c.Observable.create(function(a){var b=!1,c=!1,d=h(k,{reject:function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c||(b=!0,a.error(d))},resolve:function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c||(b=!0,a.next({responseData:d.data,size:d.size||0,duration:d.duration||0}),a.complete())},fallback:function(){c=!0;N(k).subscribe(a)}});return function(){b||c||"function"!==typeof d||d()}}):N(k)},N=function(b){var c=b.url,d=
void 0;if(b=b.segment.range)d=b[0],d=(b=b[1])&&Infinity!==b?"bytes="+ +d+"-"+ +b:"bytes="+ +d+"-",d={Range:d};return a.i(r.a)({url:c,responseType:"arraybuffer",headers:d,createXHR:v})},K={loader:function(a){return x({segment:a.segment})},parser:function(a){var b=a.segment;a=a.response.responseData;if(b.isInitSegment())return c.Observable.of({segmentData:a,timings:null});a=new Uint8Array(a);var d=e(a,b),b=d.nextSegments,d=d.currentSegment;a=y(a,d.ts);return c.Observable.of({segmentData:a,nextSegments:b,
currentSegment:d})}};return{directFile:!1,manifest:{resolver:function(b){b=b.url;var d=void 0,f=k(b),d=T.test(b)?a.i(r.a)({url:h(b,""),responseType:"document",resultSelector:l,createXHR:v}):c.Observable.of(b);return d.map(function(a){var b=a.match(L);a=b?a.replace(b[1],b[1]+"/manifest"):a;return{url:h(a,f)}})},loader:function(b){b=b.url;return a.i(r.a)({url:b,responseType:"document",createXHR:v})},parser:function(a){a=a.response;return c.Observable.of({manifest:w(a.responseData),url:a.url})}},audio:K,
video:K,text:{loader:function(b){var c=b.segment;if(c.isInitSegment())return E();b=c.getRepresentation().mimeType;c=f(c);return 0<=b.indexOf("mp4")?a.i(r.a)({url:c,responseType:"arraybuffer",createXHR:v}):a.i(r.a)({url:c,responseType:"text",createXHR:v})},parser:function(b){var f=b.response;b=b.segment;var h=b.getAdaptation().lang,g=b.getRepresentation(),k=g.mimeType,g=g.index,m=H[k];if(!m)throw Error("could not find a text-track parser for the type "+k);var l=f.responseData;0<=k.indexOf("mp4")?(l=
new Uint8Array(l),f=a.i(d.a)(A(l))):f=l;l=e(l,b);k=l.nextSegments;l=l.currentSegment;b=m(f,h,b.getTime()/g.timescale);return c.Observable.of({segmentData:b,currentSegment:l,nextSegments:k})}},image:{loader:function(b){b=b.segment;if(b.init)return E();b=f(b);return a.i(r.a)({url:b,responseType:"arraybuffer",createXHR:v})},parser:function(b){var d=new Uint8Array(b.response.responseData),f=b=void 0;d&&(d=a.i(t.a)(d),b=d.thumbs,f=d.timescale);return c.Observable.of({segmentData:b,currentSegment:{ts:0,
d:Infinity},timescale:f})}}}}},function(e,g,a){function l(b,c){var d=c.length+8,f=a.i(n.h),d=a.i(n.i)(d),e;r[b]?e=r[b]:(e=a.i(n.b)(b),r[b]=e);return f(d,e,c)}function k(b,c,d,f,e){for(var h=b.length,g=0,k;g<h;){k=a.i(n.e)(b,g);if(1970628964===a.i(n.e)(b,g+4)&&a.i(n.e)(b,g+8)===c&&a.i(n.e)(b,g+12)===d&&a.i(n.e)(b,g+16)===f&&a.i(n.e)(b,g+20)===e)return b.subarray(g+24,g+k);g+=k}}function h(c,d){for(var f=c.length,e=0,h,g=void 0;e+8<f&&(g=a.i(n.e)(c,e),h=a.i(n.e)(c,e+4),a.i(b.a)(0<g,"smooth: out of range size"),
h!==d);)e+=g;return e<f?c.subarray(e+8,e+g):null}function f(a,b,c,d){var f=[a,b,c];d.forEach(function(a){a=q.pssh(a.systemId,a.privateData,a.keyIds);f.push(a)});return f}function c(b,c,d,f){var e=b.length,h=c.length;d=d.length;b=b.subarray(d,e);e=new Uint8Array(h+(e-d));e.set(c,0);e.set(b,h);c=c.length+8;e.set(a.i(n.i)(c),f+16);return e}function d(b,c,d,e,h,g,k){d=q.mult("stbl",[d,l("stts",new Uint8Array(8)),l("stsc",new Uint8Array(8)),l("stsz",new Uint8Array(12)),l("stco",new Uint8Array(8))]);var m=
l("url ",new Uint8Array([0,0,0,1])),m=q.dref(m),m=q.mult("dinf",[m]);e=q.mult("minf",[e,m,d]);c=q.hdlr(c);d=q.mdhd(b);c=q.mult("mdia",[d,c,e]);h=q.tkhd(h,g,1);h=q.mult("trak",[h,c]);g=q.trex(1);g=q.mult("mvex",[g]);b=q.mvhd(b,1);k=q.mult("moov",f(b,g,h,k));b=q.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return a.i(n.h)(b,k)}var b=a(1),m=a(9),n=a(10),p=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],r={},q={mult:function(a,b){return l(a,n.h.apply(null,b))},avc1encv:function(b,
c,d,f,e,h,g,k,m,p){return l(b,a.i(n.h)(6,a.i(n.m)(c),16,a.i(n.m)(d),a.i(n.m)(f),a.i(n.m)(e),2,a.i(n.m)(h),6,[0,1,g.length],a.i(n.b)(g),31-g.length,a.i(n.m)(k),[255,255],m,"encv"===b?p:[]))},avcc:function(b,c,d){d=2===d?1:4===d?3:0;var f=b[1],e=b[2],h=b[3];return l("avcC",a.i(n.h)([1,f,e,h,252|d,225],a.i(n.m)(b.length),b,[1],a.i(n.m)(c.length),c))},dref:function(b){return l("dref",a.i(n.h)(7,[1],b))},esds:function(b,c){return l("esds",a.i(n.h)(4,[3,25],a.i(n.m)(b),[0,4,17,64,21],11,[5,2],a.i(n.j)(c),
[6,1,2]))},frma:function(b){return l("frma",a.i(n.b)(b))},free:function(a){return l("free",new Uint8Array(a-8))},ftyp:function(b,c){return l("ftyp",n.h.apply(null,[a.i(n.b)(b),[0,0,0,1]].concat(c.map(n.b))))},hdlr:function(b){var c;switch(b){case "video":b="vide";c="VideoHandler";break;case "audio":b="soun";c="SoundHandler";break;default:b="hint",c=""}return l("hdlr",a.i(n.h)(8,a.i(n.b)(b),12,a.i(n.b)(c),1))},mdhd:function(b){return l("mdhd",a.i(n.h)(12,a.i(n.i)(b),8))},moof:function(a,b){return q.mult("moof",
[a,b])},mp4aenca:function(b,c,d,f,e,h,g,k){return l(b,a.i(n.h)(6,a.i(n.m)(c),8,a.i(n.m)(d),a.i(n.m)(f),2,a.i(n.m)(e),a.i(n.m)(h),2,g,"enca"===b?k:[]))},mvhd:function(b,c){return l("mvhd",a.i(n.h)(12,a.i(n.i)(b),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,a.i(n.m)(c+1)))},pssh:function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];c=c.replace(/-/g,"");a.i(b.a)(32===c.length,"wrong system id length");var e,h=f.length;
0<h?(e=1,f=n.h.apply(null,[a.i(n.i)(h)].concat(f))):(e=0,f=[]);return l("pssh",a.i(n.h)([e,0,0,0],a.i(n.j)(c),f,a.i(n.i)(d.length),d))},saio:function(b,c,d,f){return l("saio",a.i(n.h)(4,[0,0,0,1],a.i(n.i)(b.length+c.length+d.length+f.length+8+8+8+8)))},saiz:function(b){if(0===b.length)return l("saiz",new Uint8Array);var c=a.i(n.e)(b,0),d=a.i(n.e)(b,4),f=new Uint8Array(9+d);f.set(a.i(n.i)(d),5);for(var d=9,e=8,h,g;e<b.length;)e+=8,2===(c&2)?(g=2,h=a.i(n.g)(b,e),e+=2+6*h):g=h=0,f[d]=6*h+8+g,d++;return l("saiz",
f)},schm:function(b,c){return l("schm",a.i(n.h)(4,a.i(n.b)(b),a.i(n.i)(c)))},senc:function(a){return l("senc",a)},smhd:function(){return l("smhd",new Uint8Array(8))},stsd:function(a){return l("stsd",n.h.apply(null,[7,[a.length]].concat(a)))},tkhd:function(b,c,d){return l("tkhd",a.i(n.h)(a.i(n.i)(7),8,a.i(n.i)(d),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],a.i(n.m)(b),2,a.i(n.m)(c),2))},trex:function(b){return l("trex",a.i(n.h)(4,a.i(n.i)(b),[0,0,0,1],12))},tfdt:function(b){return l("tfdt",a.i(n.h)([1,
0,0,0],a.i(n.n)(b)))},tenc:function(b,c,d){return l("tenc",a.i(n.h)(6,[b,c],a.i(n.j)(d)))},traf:function(a,b,c,d,f){var e=[a,b,c];d&&e.push(q.senc(d),q.saiz(d),q.saio(f,a,b,c));return q.mult("traf",e)},trun:function(b){if(b[11]&1)return b;var c=new Uint8Array(b.length+4);c.set(a.i(n.i)(b.length+4),0);c.set(b.subarray(4,16),4);c[11]|=1;c.set([0,0,0,0],16);c.set(b.subarray(16,b.length),20);return c},vmhd:function(){var a=new Uint8Array(12);a[3]=1;return l("vmhd",a)}},x={traf:function(a){return(a=h(a,
1836019558))?h(a,1953653094):null},senc:function(a){return k(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return k(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return k(a,3565190898,3392751253,2387879627,2655430559)},mdat:function(a){return h(a,1835295092)}};g.a={getMdat:x.mdat,getTraf:x.traf,parseTfrf:function(b){b=x.tfrf(b);if(!b)return[];for(var c=[],d=b[0],f=b[4],e=0;e<f;e++){var h,g;1==d?(g=a.i(n.f)(b,16*e+5),h=a.i(n.f)(b,16*e+13)):(g=a.i(n.e)(b,8*e+5),
h=a.i(n.e)(b,8*e+9));c.push({ts:g,d:h})}return c},parseTfxd:function(b){if(b=x.tfxd(b))return{d:a.i(n.f)(b,12),ts:a.i(n.f)(b,4)}},createVideoInitSegment:function(b,c,f,e,h,g,k,m,l){l||(l=[]);var p=k.split("00000001");k=p[1];p=p[2];k=a.i(n.j)(k);p=a.i(n.j)(p);g=q.avcc(k,p,g);l.length?(m=q.tenc(1,8,m),m=q.mult("schi",[m]),k=q.schm("cenc",65536),p=q.frma("avc1"),m=q.mult("sinf",[p,k,m]),e=q.avc1encv("encv",1,c,f,e,h,"AVC Coding",24,g,m)):e=q.avc1encv("avc1",1,c,f,e,h,"AVC Coding",24,g);e=q.stsd([e]);
return d(b,"video",e,q.vmhd(),c,f,l)},createAudioInitSegment:function(b,c,f,e,h,g,k,m){m||(m=[]);g||(g=(32|p.indexOf(h)&31)<<4,g=(g|c&31)<<3,g=a.i(n.o)(a.i(n.m)(g)));g=q.esds(1,g);if(m.length){k=q.tenc(1,8,k);k=q.mult("schi",[k]);var l=q.schm("cenc",65536),r=q.frma("mp4a");k=q.mult("sinf",[r,l,k]);c=q.mp4aenca("enca",1,c,f,e,h,g,k)}else c=q.mp4aenca("mp4a",1,c,f,e,h,g);c=q.stsd([c]);return d(b,"audio",c,q.smhd(),0,0,m)},patchSegment:function(b,d){var f=b.subarray(0,a.i(n.e)(b,0)),e=q.tfdt(d),h=e.length,
g=a.i(n.e)(f,8),k=a.i(n.e)(f,8+g),l=a.i(n.e)(f,8+g+8),p=a.i(n.e)(f,8+g+8+l),r=f.subarray(8,8+g),t=f.subarray(8+g+8,8+g+8+k-8),k=t.subarray(0,l),p=t.subarray(l,l+p);k.set([0,0,0,1],12);t=x.senc(t);p=q.trun(p);e=q.traf(k,e,p,t,r);r=q.moof(r,e);h=8+g+8+l+h;return m.t?c(b,r,f,h):8<=f.length-r.length?(f=f.length-r.length,b.set(r,0),b.set(q.free(f),r.length),f=r.length+8+f,b.set(a.i(n.i)(f),h+16),b):c(b,r,f,h)}}},function(e,g,a){function l(a){return"boolean"==typeof a?a:"string"==typeof a?"TRUE"===a.toUpperCase():
!1}function k(a){if(!a)return Infinity;a=a.index;var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function h(b){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:a.i(f.h)([8,1,18,16],b)}]}var f=a(10),c=a(1),d=a(21),b={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},m={audio:"mp4a.40.2",video:"avc1.4D401E"};e={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var n={audio:[["Bitrate","bitrate",parseInt],
["AudioTag","audiotag",parseInt],["FourCC","mimeType",e],["Channels","channels",parseInt],["SamplingRate","samplingRate",parseInt],["BitsPerSample","bitsPerSample",parseInt],["PacketSize","packetSize",parseInt],["CodecPrivateData","codecPrivateData",String]],video:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",e],["CodecPrivateData","codecs",function(a){return(a=(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1])?"avc1."+a:""}],["MaxWidth","width",parseInt],["MaxHeight","height",parseInt],["CodecPrivateData",
"codecPrivateData",String]],text:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",e]]};g.a=function(){function e(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function g(f,h){f.hasAttribute("Timescale")&&(h=+f.getAttribute("Timescale"));var g=f.getAttribute("Type"),k=f.getAttribute("Subtype"),l=f.getAttribute("Name"),p=a.i(d.c)(f.getAttribute("Language")),r=f.getAttribute("Url"),q=n[g],t=[];a.i(c.a)(q,"unrecognized QualityLevel type "+g);var x=0,w=e(f,
function(a,b,c){switch(b){case "QualityLevel":b={};for(var d=0;d<q.length;d++){var f=q[d],e=f[0],h=f[2];b[f[1]]="function"==typeof h?h(c.getAttribute(e)):h[c.getAttribute(e)]}"audio"==g&&(c=c.getAttribute("FourCC")||"",d=b.codecPrivateData,c="AACH"==c?5:d?(parseInt(d.substr(0,2),16)&248)>>3:2,b.codecs=c?"mp4a.40."+c:"");if("video"!=g||b.bitrate>u)b.id=x++,a.representations.push(b);break;case "c":b=a.index;var d=a.index.timeline,f=d.length,e=0<f?d[f-1]:{d:0,ts:0,r:0},h=+c.getAttribute("d"),k=c.getAttribute("t");
(c=+c.getAttribute("r"))&&c--;0<f&&!e.d&&(e.d=k-e.ts,d[f-1]=e);0<f&&h==e.d&&null==k?e.r+=(c||0)+1:d.push({d:h,ts:null==k?e.ts+e.d*(e.r+1):+k,r:c});b.timeline=d}return a},{representations:[],index:{timeline:[],indexType:"smooth",timescale:h,initialization:{}}}),v=w.representations,w=w.index;a.i(c.a)(v.length,"adaptation should have at least one representation");v.forEach(function(a){return a.codecs=a.codecs||m[g]});v.forEach(function(a){return a.mimeType=a.mimeType||b[g]});if("ADVT"==k)return null;
"text"===g&&"DESC"===k&&t.push("hardOfHearing");return{type:g,accessibility:t,index:w,representations:v,name:l,lang:p,baseURL:r}}function q(a){return x((new DOMParser).parseFromString(a,"application/xml"))}function x(b){b=b.documentElement;c.a.equal(b.nodeName,"SmoothStreamingMedia","document root should be SmoothStreamingMedia");a.i(c.a)(/^[2]-[0-2]$/.test(b.getAttribute("MajorVersion")+"-"+b.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var d=+b.getAttribute("Timescale")||1E7,
h=0,m=e(b,function(b,e,k){switch(e){case "Protection":k=k.firstElementChild;c.a.equal(k.nodeName,"ProtectionHeader","Protection should have ProtectionHeader child");e=a.i(f.b)(atob(k.textContent));var m;m=a.i(f.d)(e,8);m=a.i(f.k)(e.subarray(10,10+m));m=(new DOMParser).parseFromString(m,"application/xml").querySelector("KID").textContent;m=a.i(f.l)(atob(m)).toLowerCase();var l=a.i(f.j)(m);k=k.getAttribute("SystemID").toLowerCase().replace(/\{|\}/g,"");e={keyId:m,keySystems:[{systemId:k,privateData:e}].concat(B(l))};
b.protection=e;break;case "StreamIndex":if(e=g(k,d))e.id=h++,b.adaptations.push(e)}return b},{protection:null,adaptations:[]}),n=m.protection,m=m.adaptations;m.forEach(function(a){return a.smoothProtection=n});var p=void 0,r=void 0,q=void 0,t=void 0,w=l(b.getAttribute("IsLive"));if(w)var p=v,q=+b.getAttribute("DVRWindowLength")/d,t=y,r=m.filter(function(a){return"video"==a.type})[0],x=m.filter(function(a){return"audio"==a.type})[0],r=Math.min(k(r),k(x)),r=Date.now()/1E3-(r+t);return{transportType:"smooth",
profiles:"",type:w?"dynamic":"static",suggestedPresentationDelay:p,timeShiftBufferDepth:q,presentationLiveGap:r,availabilityStartTime:t,periods:[{duration:(+b.getAttribute("Duration")||Infinity)/d,adaptations:m,laFragCount:+b.getAttribute("LookAheadFragmentCount")}]}}function t(a){return"string"==typeof a?q(a):x(a)}var w=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},v=w.suggestedPresentationDelay||20,y=w.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,u=w.minRepresentationBitrate||19E4,
B=w.keySystems||h;t.parseFromString=q;t.parseFromDocument=x;return t}},function(e,g,a){function l(a){return a*Math.pow(2,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)-1)*(1+(2*Math.random()-1)*k)}a.d(g,"a",function(){return l});var k=.3},function(e,g,a){a.d(g,"a",function(){return l});var l=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.hash={}}a.prototype.add=function(a){this.hash[a]=!0};a.prototype.remove=function(a){delete this.hash[a]};
a.prototype.test=function(a){return!0===this.hash[a]};return a}()},function(e,g,a){function l(a){return null==a?"":String(a).replace(n,function(a){return p[a]})}function k(b){var c=b.getAverageBitrates(),f=void 0,e=void 0;c.video.take(1).subscribe(function(a){return e=a|0});c.audio.take(1).subscribe(function(a){return f=a|0});return{manifest:b.man,version:b.version,timeFragment:b.frag,currentTime:b.getCurrentTime(),state:b.getPlayerState(),buffer:a.i(d.b)(b.video.buffered),volume:b.getVolume(),video:{adaptation:b.adas.video,
representation:b.reps.video,maxBitrate:b.getVideoMaxBitrate(),bufferSize:b.getVideoBufferSize(),avrBitrate:e},audio:{adaptation:b.adas.audio,representation:b.reps.audio,maxBitrate:b.getAudioMaxBitrate(),bufferSize:b.getAudioBufferSize(),avrBitrate:f}}}function h(a,b){var c=b.parentNode.querySelector("#cp--debug-infos-content");if(c){var d=void 0;try{d=k(a)}catch(u){return}var f=d,e=f.video,h=f.audio,f=f.manifest,d="<b>Player v"+d.version+"</b> ("+d.state+")<br>";f&&e&&h&&(d+=["Container: "+l(f.transportType),
"Live: "+l(""+f.isLive),"Downloading bitrate (Kbit/s):\n          "+(e.representation.bitrate/1E3).toFixed(3)+"/"+(h.representation.bitrate/1E3).toFixed(3),"Estimated bandwidth (Kbit/s):\n          "+(e.avrBitrate/1E3).toFixed(3)+"/"+(h.avrBitrate/1E3).toFixed(3),"Location: "+f.locations[0]].join("<br>"));c.innerHTML=d}}function f(a,d){var f="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+l(d.offsetTop+10)+"px;\n  left: "+l(d.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',
e=d.parentNode,g=e.querySelector("#cp--debug-infos-container");g||(g=document.createElement("div"),g.setAttribute("id","cp--debug-infos-container"),e.appendChild(g));g.innerHTML=f;m||(m=e.querySelector("#cp--debug-hide-infos"),m.addEventListener("click",function(){return c(d)}));b&&clearInterval(b);b=setInterval(function(){return h(a,d)},1E3);h(a,d)}function c(a){(a=a.parentNode.querySelector("#cp--debug-infos-container"))&&a.parentNode.removeChild(a);b&&(clearInterval(b),b=null);m&&(m.removeEventListener("click",
c),m=null)}var d=a(19),b=void 0,m=void 0,n=/[&<>"']/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};g.a={getDebug:k,showDebug:f,hideDebug:c,toggleDebug:function(a,b){b.parentNode.querySelector("#cp--debug-infos-container")?c(b):f(a,b)}}},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(f,c,d){a.call(this);
this.parent=f;this.outerValue=c;this.outerIndex=d;this.index=0}l(e,a);e.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};e.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};e.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return e}(a(2).Subscriber);g.InnerSubscriber=e},function(e,g,a){var l=a(0);e=function(){function a(a,f,c){this.kind=a;this.value=f;this.exception=c;this.hasValue=
"N"===a}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.exception);case "C":return a.complete&&a.complete()}};a.prototype["do"]=function(a,f,c){switch(this.kind){case "N":return a&&a(this.value);case "E":return f&&f(this.exception);case "C":return c&&c()}};a.prototype.accept=function(a,f,c){return a&&"function"===typeof a.next?this.observe(a):this["do"](a,f,c)};a.prototype.toObservable=function(){switch(this.kind){case "N":return l.Observable.of(this.value);
case "E":return l.Observable["throw"](this.exception);case "C":return l.Observable.empty()}throw Error("unexpected notification kind value");};a.createNext=function(e){return"undefined"!==typeof e?new a("N",e):this.undefinedValueNotification};a.createError=function(e){return new a("E",void 0,e)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();g.Notification=e},function(e,g,a){e=function(){function a(e,
h){void 0===h&&(h=a.now);this.SchedulerAction=e;this.now=h}a.prototype.schedule=function(a,e,f){void 0===e&&(e=0);return(new this.SchedulerAction(this,a)).schedule(f,e)};a.now=Date.now?Date.now:function(){return+new Date};return a}();g.Scheduler=e},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(f,c){a.call(this);
this.subject=f;this.subscriber=c;this.closed=!1}l(e,a);e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,c=a.observers;this.subject=null;!c||0===c.length||a.isStopped||a.closed||(a=c.indexOf(this.subscriber),-1!==a&&c.splice(a,1))}};return e}(a(5).Subscription);g.SubjectSubscription=e},function(e,g,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=
c.prototype,new d)};e=a(0);var k=a(36),h=a(6);a=function(a){function c(c,b){a.call(this);this.arrayLike=c;this.scheduler=b;b||1!==c.length||(this._isScalar=!0,this.value=c[0])}l(c,a);c.create=function(a,b){var d=a.length;return 0===d?new h.EmptyObservable:1===d?new k.ScalarObservable(a[0],b):new c(a,b)};c.dispatch=function(a){var b=a.arrayLike,c=a.index,d=a.subscriber;d.closed||(c>=a.length?d.complete():(d.next(b[c]),a.index=c+1,this.schedule(a)))};c.prototype._subscribe=function(a){var b=this.arrayLike,
d=this.scheduler,f=b.length;if(d)return d.schedule(c.dispatch,0,{arrayLike:b,index:0,length:f,subscriber:a});for(d=0;d<f&&!a.closed;d++)a.next(b[d]);a.complete()};return c}(e.Observable);g.ArrayLikeObservable=a},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(8);var k=a(0),h=a(2),f=a(5);a=function(a){function b(b,c){a.call(this);this.source=
b;this.subjectFactory=c;this._refCount=0}l(b,a);b.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};b.prototype.getSubject=function(){var a=this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};b.prototype.connect=function(){var a=this._connection;a||(a=this._connection=new f.Subscription,a.add(this.source.subscribe(new c(this.getSubject(),this))),a.closed?(this._connection=null,a=f.Subscription.EMPTY):this._connection=a);return a};b.prototype.refCount=
function(){return this.lift(new d(this))};return b}(k.Observable);g.ConnectableObservable=a;g.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subscribe:{value:a.prototype._subscribe},getSubject:{value:a.prototype.getSubject},connect:{value:a.prototype.connect},refCount:{value:a.prototype.refCount}};var c=function(a){function b(b,c){a.call(this,b);this.connectable=c}l(b,a);b.prototype._error=function(b){this._unsubscribe();a.prototype._error.call(this,b)};b.prototype._complete=
function(){this._unsubscribe();a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0;a._subject=null;a._connection=null;b&&b.unsubscribe()}};return b}(e.SubjectSubscriber),d=function(){function a(a){this.connectable=a}a.prototype.call=function(a,c){var d=this.connectable;d._refCount++;var f=new b(a,d),e=c._subscribe(f);f.closed||(f.connection=d.connect());return e};return a}(),b=function(a){function b(b,
c){a.call(this,b);this.connectable=c}l(b,a);b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;0>=b?this.connection=null:(a._refCount=b-1,1<b?this.connection=null:(b=this.connection,a=a._connection,this.connection=null,!a||b&&a!==b||a.unsubscribe()))}else this.connection=null};return b}(h.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=
null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(e,c){a.call(this);this.error=e;this.scheduler=c}l(e,a);e.create=function(a,c){return new e(a,c)};e.dispatch=function(a){a.subscriber.error(a.error)};e.prototype._subscribe=function(a){var c=this.error,d=this.scheduler;if(d)return d.schedule(e.dispatch,0,{error:c,subscriber:a});a.error(c)};return e}(a(0).Observable);g.ErrorObservable=e},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(17),h=a(64),f=a(55),c=a(140),d=a(13),b=a(135),m=a(39),n=a(0),p=a(157),r=a(40);e=function(a){function e(b,c){a.call(this,null);this.ish=b;this.scheduler=c}l(e,a);e.create=function(a,g){if(null!=a){if("function"===typeof a[r.$$observable])return a instanceof n.Observable&&!g?a:new e(a,g);if(k.isArray(a))return new d.ArrayObservable(a,g);if(h.isPromise(a))return new f.PromiseObservable(a,
g);if("function"===typeof a[m.$$iterator]||"string"===typeof a)return new c.IteratorObservable(a,g);if(a&&"number"===typeof a.length)return new b.ArrayLikeObservable(a,g)}throw new TypeError((null!==a&&typeof a||a)+" is not observable");};e.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[r.$$observable]().subscribe(a):b[r.$$observable]().subscribe(new p.ObserveOnSubscriber(a,c,0))};return e}(n.Observable);g.FromObservable=e},function(e,g,a){var l=this&&this.__extends||
function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},k=a(63);e=a(0);var h=a(26);a=function(a){function c(c,b){void 0===c&&(c=0);void 0===b&&(b=h.async);a.call(this);this.period=c;this.scheduler=b;if(!k.isNumeric(c)||0>c)this.period=0;b&&"function"===typeof b.schedule||(this.scheduler=h.async)}l(c,a);c.create=function(a,b){void 0===a&&(a=0);void 0===b&&(b=h.async);return new c(a,b)};c.dispatch=
function(a){var b=a.subscriber,c=a.period;b.next(a.index);b.closed||(a.index+=1,this.schedule(a,c))};c.prototype._subscribe=function(a){var b=this.period;a.add(this.scheduler.schedule(c.dispatch,b,{index:0,subscriber:a,period:b}))};return c}(e.Observable);g.IntervalObservable=a},function(e,g,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},k=a(7);e=a(0);
var h=a(39);a=function(a){function b(b,d){a.call(this);this.scheduler=d;if(null==b)throw Error("iterator cannot be null.");var e;if((e=b[h.$$iterator])||"string"!==typeof b)if(e||void 0===b.length){if(!e)throw new TypeError("object is not iterable");e=b[h.$$iterator]()}else e=new c(b);else e=new f(b);this.iterator=e}l(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){var b=a.index,c=a.iterator,d=a.subscriber;a.hasError?d.error(a.error):(c=c.next(),c.done?d.complete():(d.next(c.value),
a.index=b+1,d.closed||this.schedule(a)))};b.prototype._subscribe=function(a){var c=this.iterator,d=this.scheduler;if(d)return d.schedule(b.dispatch,0,{index:0,iterator:c,subscriber:a});do{d=c.next();if(d.done){a.complete();break}else a.next(d.value);if(a.closed)break}while(1)};return b}(e.Observable);g.IteratorObservable=a;var f=function(){function a(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);this.str=a;this.idx=b;this.len=c}a.prototype[h.$$iterator]=function(){return this};a.prototype.next=
function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),c=function(){function a(a,b,c){void 0===b&&(b=0);if(void 0===c)if(c=+a.length,isNaN(c))c=0;else if(0!==c&&"number"===typeof c&&k.root.isFinite(c)){var e;e=+c;e=0===e?e:isNaN(e)?e:0>e?-1:1;c=e*Math.floor(Math.abs(c));c=0>=c?0:c>d?d:c}this.arr=a;this.idx=b;this.len=c}a.prototype[h.$$iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:
{done:!0,value:void 0}};return a}(),d=Math.pow(2,53)-1},function(e,g,a){var l=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)};e=a(0);var k=a(65);a=function(a){function e(){a.call(this)}l(e,a);e.create=function(){return new e};e.prototype._subscribe=function(a){k.noop()};return e}(e.Observable);g.NeverObservable=a},function(e,g,a){e=a(13);g.of=e.ArrayObservable.of},
function(e,g,a){e=a(137);g._throw=e.ErrorObservable.create},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(12);var k=a(15);g._catch=function(a){a=new h(a);var c=this.lift(a);return a.caught=c};var h=function(){function a(a){this.selector=a}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.selector,this.caught))};return a}(),
f=function(a){function c(b,c,d){a.call(this,b);this.selector=c;this.caught=d}l(c,a);c.prototype.error=function(a){if(!this.isStopped){var b=void 0;try{b=this.selector(a,this.caught)}catch(n){this.destination.error(n);return}this.unsubscribe();this.destination.remove(this);k.subscribeToResult(this,b)}};return c}(e.OuterSubscriber)},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)},k=a(13),h=a(17);e=a(12);var f=a(15),c={};g.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&h.isArray(a[0])&&(a=a[0]);a.unshift(this);return this.lift.call(new k.ArrayObservable(a),new d(b))};var d=function(){function a(a){this.project=a}a.prototype.call=function(a,c){return c._subscribe(new b(a,this.project))};return a}();g.CombineLatestOperator=d;var b=function(a){function b(b,
c){a.call(this,b);this.project=c;this.active=0;this.values=[];this.observables=[]}l(b,a);b.prototype._next=function(a){this.values.push(c);this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{this.toRespond=this.active=b;for(var c=0;c<b;c++){var d=a[c];this.add(f.subscribeToResult(this,d,d,c))}}};b.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};b.prototype.notifyNext=function(a,
b,d,e,f){a=this.values;e=a[d];e=this.toRespond?e===c?--this.toRespond:this.toRespond:0;a[d]=b;0===e&&(this.project?this._tryProject(a):this.destination.next(a.slice()))};b.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,a)}catch(q){this.destination.error(q);return}this.destination.next(b)};return b}(e.OuterSubscriber);g.CombineLatestSubscriber=b},function(e,g,a){var l=a(37);g.concatAll=function(){return this.lift(new l.MergeAllOperator(1))}},function(e,g,a){var l=a(58);g.concatMap=
function(a,e){return this.lift(new l.MergeMapOperator(a,e,1))}},function(e,g,a){function l(a){a.debouncedNext()}var k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);var h=a(26);g.debounceTime=function(a,b){void 0===b&&(b=h.async);return this.lift(new f(a,b))};var f=function(){function a(a,c){this.dueTime=a;this.scheduler=c}a.prototype.call=function(a,d){return d._subscribe(new c(a,
this.dueTime,this.scheduler))};return a}(),c=function(a){function b(b,c,d){a.call(this,b);this.dueTime=c;this.scheduler=d;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}k(b,a);b.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();
this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);var k=a(43),h=a(27);g.distinctUntilChanged=
function(a,b){return this.lift(new f(a,b))};var f=function(){function a(a,c){this.compare=a;this.keySelector=c}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.compare,this.keySelector))};return a}(),c=function(a){function b(b,c,d){a.call(this,b);this.keySelector=d;this.hasKey=!1;"function"===typeof c&&(this.compare=c)}l(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=k.tryCatch(this.keySelector)(a),b===h.errorObject))return this.destination.error(h.errorObject.e);
var c=!1;if(this.hasKey){if(c=k.tryCatch(this.compare)(this.key,b),c===h.errorObject)return this.destination.error(h.errorObject.e)}else this.hasKey=!0;!1===!!c&&(this.key=b,this.destination.next(a))};return b}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(2);g._do=function(a,d,b){return this.lift(new h(a,d,b))};var h=
function(){function a(a,b,c){this.nextOrObserver=a;this.error=b;this.complete=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.nextOrObserver,this.error,this.complete))};return a}(),f=function(a){function c(b,c,d,e){a.call(this,b);b=new k.Subscriber(c,d,e);b.syncErrorThrowable=!0;this.add(b);this.safeSubscriber=b}l(c,a);c.prototype._next=function(a){var b=this.safeSubscriber;b.next(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.next(a)};c.prototype._error=
function(a){var b=this.safeSubscriber;b.error(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)};c.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return c}(k.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=
c.prototype,new d)};e=a(2);g.filter=function(a,c){return this.lift(new k(a,c))};var k=function(){function a(a,d){this.predicate=a;this.thisArg=d}a.prototype.call=function(a,d){return d._subscribe(new h(a,this.predicate,this.thisArg))};return a}(),h=function(a){function c(c,b,e){a.call(this,c);this.predicate=b;this.thisArg=e;this.count=0;this.predicate=b}l(c,a);c.prototype._next=function(a){var b;try{b=this.predicate.call(this.thisArg,a,this.count++)}catch(m){this.destination.error(m);return}b&&this.destination.next(a)};
return c}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(2);var k=a(5);g._finally=function(a){return this.lift(new h(a))};var h=function(){function a(a){this.callback=a}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.callback))};return a}(),f=function(a){function c(b,c){a.call(this,b);this.add(new k.Subscription(c))}
l(c,a);return c}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(2);var k=a(65);g.ignoreElements=function(){return this.lift(new h)};var h=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new f(a))};return a}(),f=function(a){function c(){a.apply(this,arguments)}l(c,a);c.prototype._next=function(a){k.noop()};
return c}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);g.map=function(a,c){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new k(a,c))};var k=function(){function a(a,d){this.project=a;this.thisArg=d}a.prototype.call=function(a,d){return d._subscribe(new h(a,
this.project,this.thisArg))};return a}();g.MapOperator=k;var h=function(a){function c(c,b,e){a.call(this,c);this.project=b;this.count=0;this.thisArg=e||this}l(c,a);c.prototype._next=function(a){var b;try{b=this.project.call(this.thisArg,a,this.count++)}catch(m){this.destination.error(m);return}this.destination.next(b)};return c}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===
c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);g.mapTo=function(a){return this.lift(new k(a))};var k=function(){function a(a){this.value=a}a.prototype.call=function(a,d){return d._subscribe(new h(a,this.value))};return a}(),h=function(a){function c(c,b){a.call(this,c);this.value=b}l(c,a);c.prototype._next=function(a){this.destination.next(this.value)};return c}(e.Subscriber)},function(e,g,a){function l(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var d=Number.POSITIVE_INFINITY,
b=null,e=a[a.length-1];f.isScheduler(e)?(b=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(d=a.pop())):"number"===typeof e&&(d=a.pop());return null===b&&1===a.length?a[0]:(new k.ArrayObservable(a,b)).lift(new h.MergeAllOperator(d))}var k=a(13),h=a(37),f=a(18);g.merge=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return this.lift.call(l.apply(void 0,[this].concat(a)))};g.mergeStatic=l},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(2);var k=a(132);g.observeOn=function(a,b){void 0===b&&(b=0);return this.lift(new h(a,b))};var h=function(){function a(a,c){void 0===c&&(c=0);this.scheduler=a;this.delay=c}a.prototype.call=function(a,c){return c._subscribe(new f(a,this.scheduler,this.delay))};return a}();g.ObserveOnOperator=h;var f=function(a){function b(b,c,d){void 0===d&&(d=0);a.call(this,b);this.scheduler=
c;this.delay=d}l(b,a);b.dispatch=function(a){a.notification.observe(a.destination)};b.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(b.dispatch,this.delay,new c(a,this.destination)))};b.prototype._next=function(a){this.scheduleMessage(k.Notification.createNext(a))};b.prototype._error=function(a){this.scheduleMessage(k.Notification.createError(a))};b.prototype._complete=function(){this.scheduleMessage(k.Notification.createComplete())};return b}(e.Subscriber);g.ObserveOnSubscriber=
f;var c=function(){return function(a,b){this.notification=a;this.destination=b}}();g.ObserveOnMessage=c},function(e,g,a){var l=a(8),k=a(38);g.publish=function(a){return a?k.multicast.call(this,function(){return new l.Subject},a):k.multicast.call(this,new l.Subject)}},function(e,g,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);g.scan=function(a,
c){return this.lift(new k(a,c))};var k=function(){function a(a,d){this.accumulator=a;this.seed=d}a.prototype.call=function(a,d){return d._subscribe(new h(a,this.accumulator,this.seed))};return a}(),h=function(a){function c(c,b,e){a.call(this,c);this.accumulator=b;this.index=0;this.accumulatorSet=!1;this.seed=e;this.accumulatorSet="undefined"!==typeof e}l(c,a);Object.defineProperty(c.prototype,"seed",{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;this._seed=a},enumerable:!0,
configurable:!0});c.prototype._next=function(a){if(this.accumulatorSet)return this._tryNext(a);this.seed=a;this.destination.next(a)};c.prototype._tryNext=function(a){var b=this.index++,c;try{c=this.accumulator(this.seed,a,b)}catch(n){this.destination.error(n)}this.seed=c;this.destination.next(c)};return c}(e.Subscriber)},function(e,g,a){function l(){return new h.Subject}var k=a(38),h=a(8);g.share=function(){return k.multicast.call(this,l).refCount()}},function(e,g,a){var l=this&&this.__extends||function(a,
c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);g.skip=function(a){return this.lift(new k(a))};var k=function(){function a(a){this.total=a}a.prototype.call=function(a,d){return d._subscribe(new h(a,this.total))};return a}(),h=function(a){function c(c,b){a.call(this,c);this.total=b;this.count=0}l(c,a);c.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return c}(e.Subscriber)},
function(e,g,a){var l=a(13),k=a(36),h=a(6),f=a(57),c=a(18);g.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];c.isScheduler(b)?a.pop():b=null;var e=a.length;return 1===e?f.concatStatic(new k.ScalarObservable(a[0],b),this):1<e?f.concatStatic(new l.ArrayObservable(a,b),this):f.concatStatic(new h.EmptyObservable(b),this)}},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=
d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(12);var k=a(15);g.switchMap=function(a,d){return this.lift(new h(a,d))};var h=function(){function a(a,b){this.project=a;this.resultSelector=b}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.project,this.resultSelector))};return a}(),f=function(a){function c(b,c,d){a.call(this,b);this.project=c;this.resultSelector=d;this.index=0}l(c,a);c.prototype._next=function(a){var b,c=this.index++;try{b=this.project(a,
c)}catch(p){this.destination.error(p);return}this._innerSub(b,a,c)};c.prototype._innerSub=function(a,c,d){var b=this.innerSubscription;b&&b.unsubscribe();this.add(this.innerSubscription=k.subscribeToResult(this,a,c,d))};c.prototype._complete=function(){var b=this.innerSubscription;b&&!b.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};
c.prototype.notifyNext=function(a,c,d,e,f){this.resultSelector?this._tryNotifyNext(a,c,d,e):this.destination.next(c)};c.prototype._tryNotifyNext=function(a,c,d,e){var b;try{b=this.resultSelector(a,c,d,e)}catch(q){this.destination.error(q);return}this.destination.next(b)};return c}(e.OuterSubscriber)},function(e,g,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};e=a(2);var k=a(171),h=a(6);g.take=function(a){return 0===a?new h.EmptyObservable:this.lift(new f(a))};var f=function(){function a(a){this.total=a;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a,d){return d._subscribe(new c(a,this.total))};return a}(),c=function(a){function b(b,c){a.call(this,b);this.total=c;this.count=0}l(b,a);b.prototype._next=function(a){var b=this.total,c=++this.count;c<=b&&(this.destination.next(a),c===b&&(this.destination.complete(),this.unsubscribe()))};
return b}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};e=a(12);var k=a(15);g.takeUntil=function(a){return this.lift(new h(a))};var h=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.notifier))};return a}(),f=function(a){function c(b,c){a.call(this,b);this.notifier=c;
this.add(k.subscribeToResult(this,c))}l(c,a);c.prototype.notifyNext=function(a,c,d,e,f){this.complete()};c.prototype.notifyComplete=function(){};return c}(e.OuterSubscriber)},function(e,g,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},k=a(26),h=a(62);e=a(2);var f=a(173);g.timeout=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=k.async);var b=h.isDate(a);
a=b?+a-e.now():Math.abs(a);return this.lift(new c(a,b,d,e))};var c=function(){function a(a,b,c,d){this.waitFor=a;this.absoluteTimeout=b;this.errorToSend=c;this.scheduler=d}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))};return a}(),d=function(a){function b(b,c,d,e,f){a.call(this,b);this.absoluteTimeout=c;this.waitFor=d;this.errorToSend=e;this.scheduler=f;this._previousIndex=this.index=0;this._hasCompleted=!1;this.scheduleTimeout()}
l(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.notifyTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,this.waitFor,{subscriber:this,index:a});
this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.notifyTimeout=function(){this.error(this.errorToSend||new f.TimeoutError)};return b}(e.Subscriber)},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=
a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(e,c){a.call(this)}l(e,a);e.prototype.schedule=function(a,c){return this};return e}(a(5).Subscription);g.Action=e},function(e,g,a){var l=this&&this.__extends||function(a,e){function c(){this.constructor=a}for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)},k=a(172);e=function(a){function e(c,
d){a.call(this,c,d);this.scheduler=c;this.work=d}l(e,a);e.prototype.requestAsyncId=function(c,d,b){void 0===b&&(b=0);if(null!==b&&0<b)return a.prototype.requestAsyncId.call(this,c,d,b);c.actions.push(this);return c.scheduled||(c.scheduled=k.Immediate.setImmediate(c.flush.bind(c,null)))};e.prototype.recycleAsyncId=function(c,d,b){void 0===b&&(b=0);if(null!==b&&0<b||null===b&&0<this.delay)return a.prototype.recycleAsyncId.call(this,c,d,b);0===c.actions.length&&(k.Immediate.clearImmediate(d),c.scheduled=
void 0)};return e}(a(59).AsyncAction);g.AsapAction=e},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(){a.apply(this,arguments)}l(e,a);e.prototype.flush=function(a){this.active=!0;this.scheduled=void 0;var c=this.actions,d,b=-1,e=c.length;a=a||c.shift();do if(d=a.execute(a.state,a.delay))break;while(++b<e&&(a=c.shift()));
this.active=!1;if(d){for(;++b<e&&(a=c.shift());)a.unsubscribe();throw d;}};return e}(a(60).AsyncScheduler);g.AsapScheduler=e},function(e,g,a){e=a(168);a=a(169);g.asap=new a.AsapScheduler(e.AsapAction)},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(){var e=a.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError";
this.stack=e.stack;this.message=e.message}l(e,a);return e}(Error);g.ArgumentOutOfRangeError=e},function(e,g,a){e=a(7);a=function(){function a(a){this.root=a;a.setImmediate&&"function"===typeof a.setImmediate?(this.setImmediate=a.setImmediate.bind(a),this.clearImmediate=a.clearImmediate.bind(a)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():
this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate(),a=function f(a){delete f.instance.tasksByHandle[a]},a.instance=this,this.clearImmediate=a)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)};
a.prototype.canUseMessageChannel=function(){return!!this.root.MessageChannel};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return!!(a&&"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var e=!0,f=a.onmessage;a.onmessage=function(){e=!1};a.postMessage("","*");a.onmessage=f;return e}return!1};a.prototype.partiallyApplied=function(a){for(var e=[],f=1;f<arguments.length;f++)e[f-1]=arguments[f];
f=function d(){var a=d.handler,e=d.args;"function"===typeof a?a.apply(void 0,e):(new Function(""+a))()};f.handler=a;f.args=e;return f};a.prototype.addFromSetImmediateArguments=function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function f(){var a=f.instance,d=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,d));return d};a.instance=
this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,e="setImmediate$"+a.Math.random()+"$",f=function d(b){var f=d.instance;b.source===a&&"string"===typeof b.data&&0===b.data.indexOf(e)&&f.runIfPresent(+b.data.slice(e.length))};f.instance=this;a.addEventListener("message",f,!1);f=function b(){var a=b,e=a.messagePrefix,a=a.instance,f=a.addFromSetImmediateArguments(arguments);a.root.postMessage(e+f,"*");return f};f.instance=this;f.messagePrefix=e;return f};a.prototype.runIfPresent=
function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var e=this.tasksByHandle[a];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,e=new this.root.MessageChannel;e.port1.onmessage=function(c){a.runIfPresent(c.data)};var f=function d(){var a=d,e=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);e.port2.postMessage(a);
return a};f.channel=e;f.instance=this;return f};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function f(){var a=f.instance,d=a.root.document,b=d.documentElement,e=a.addFromSetImmediateArguments(arguments),g=d.createElement("script");g.onreadystatechange=function(){a.runIfPresent(e);g.onreadystatechange=null;b.removeChild(g);g=null};b.appendChild(g);return e};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function f(){var a=f.instance,d=a.addFromSetImmediateArguments(arguments);
a.root.setTimeout(a.partiallyApplied(a.runIfPresent,d),0);return d};a.instance=this;return a};return a}();g.ImmediateDefinition=a;g.Immediate=new a(e.root)},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(){var e=a.call(this,"Timeout has occurred");this.name=e.name="TimeoutError";this.stack=e.stack;this.message=e.message}
l(e,a);return e}(Error);g.TimeoutError=e},function(e,g,a){var l=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)};e=function(a){function e(e){a.call(this);this.errors=e;e=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(a,d){return d+1+") "+a.toString()}).join("\n  "):"");this.name=e.name="UnsubscriptionError";this.stack=e.stack;
this.message=e.message}l(e,a);return e}(Error);g.UnsubscriptionError=e},function(e,g,a){g.isObject=function(a){return null!=a&&"object"===typeof a}},function(e,g,a){var l=a(2),k=a(41),h=a(52);g.toSubscriber=function(a,c,d){if(a){if(a instanceof l.Subscriber)return a;if(a[k.$$rxSubscriber])return a[k.$$rxSubscriber]()}return a||c||d?new l.Subscriber(a,c,d):new l.Subscriber(h.empty)}},function(e,g){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(l){"object"===
typeof window&&(a=window)}e.exports=a}])});
