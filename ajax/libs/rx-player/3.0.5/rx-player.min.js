var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,b,a){e!=Array.prototype&&e!=Object.prototype&&(e[b]=a.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var b=0;return $jscomp.iteratorPrototype(function(){return b<e.length?{done:!1,value:e[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,b){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var a=0,l={next:function(){if(a<e.length){var h=a++;return{value:b(h,e[h]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.polyfill=function(e,b,a,l){if(b){a=$jscomp.global;e=e.split(".");for(l=0;l<e.length-1;l++){var h=e[l];h in a||(a[h]={});a=a[h]}e=e[e.length-1];l=a[e];b=b(l);b!=l&&null!=b&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(e){return e?e:function(){return[]}},"es6","es5");
$jscomp.owns=function(e,b){return Object.prototype.hasOwnProperty.call(e,b)};$jscomp.polyfill("Object.assign",function(e){return e?e:function(b,a){for(var e=1;e<arguments.length;e++){var h=arguments[e];if(h)for(var f in h)$jscomp.owns(h,f)&&(b[f]=h[f])}return b}},"es6","es3");$jscomp.polyfill("Object.setPrototypeOf",function(e){return e?e:"object"!=typeof"".__proto__?null:function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}},"es6","es5");
$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var b=e[Symbol.iterator];return b?b.call(e):$jscomp.arrayIterator(e)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(e){function b(){this.batch_=null}function a(a){return a instanceof h?a:new h(function(c,d){c(a)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var l=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){l(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var d=a[c];delete a[c];try{d()}catch(g){this.asyncThrow_(g)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var h=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(d){c.reject(d)}};h.prototype.createResolveAndReject_=
function(){function a(a){return function(g){d||(d=!0,a.call(c,g))}}var c=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};h.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof h)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};h.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(d){this.reject_(d);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};h.prototype.reject_=function(a){this.settle_(2,a)};h.prototype.fulfill_=function(a){this.settle_(1,a)};h.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),a[c]=null;this.onSettledCallbacks_=null}};var f=new b;h.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};h.prototype.settleSameAsThenable_=function(a,c){var d=this.createResolveAndReject_();try{a.call(c,d.resolve,d.reject)}catch(g){d.reject(g)}};h.prototype.then=function(a,c){function d(c,a){return"function"==typeof c?function(a){try{g(c(a))}catch(r){k(r)}}:a}var g,k,f=new h(function(c,
a){g=c;k=a});this.callWhenSettled_(d(a,g),d(c,k));return f};h.prototype.catch=function(a){return this.then(void 0,a)};h.prototype.callWhenSettled_=function(a,c){function d(){switch(g.state_){case 1:a(g.result_);break;case 2:c(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?f.asyncExecute(d):this.onSettledCallbacks_.push(function(){f.asyncExecute(d)})};h.resolve=a;h.reject=function(a){return new h(function(c,d){d(a)})};h.race=function(k){return new h(function(c,
d){for(var g=$jscomp.makeIterator(k),n=g.next();!n.done;n=g.next())a(n.value).callWhenSettled_(c,d)})};h.all=function(k){var c=$jscomp.makeIterator(k),d=c.next();return d.done?a([]):new h(function(g,k){function f(c){return function(a){n[c]=a;h--;0==h&&g(n)}}var n=[],h=0;do n.push(void 0),h++,a(d.value).callWhenSettled_(f(n.length-1),k),d=c.next();while(!d.done)})};return h},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3");$jscomp.findInternal=function(e,b,a){e instanceof String&&(e=String(e));for(var l=e.length,h=0;h<l;h++){var f=e[h];if(b.call(a,f,h,e))return{i:h,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");
(function(e,b){"object"===typeof exports&&"object"===typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?exports.RxPlayer=b():e.RxPlayer=b()})(this,function(){return function(e){function b(l){if(a[l])return a[l].exports;var h=a[l]={i:l,l:!1,exports:{}};e[l].call(h.exports,h,h.exports,b);h.l=!0;return h.exports}var a={};b.m=e;b.c=a;b.d=function(a,h,f){b.o(a,h)||Object.defineProperty(a,h,{configurable:!1,enumerable:!0,get:f})};b.n=function(a){var h=
a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(h,"a",h);return h};b.o=function(a,h){return Object.prototype.hasOwnProperty.call(a,h)};b.p="";return b(b.s=102)}([function(e,b,a){var l=a(11),h=a(106),f=a(39),k=a(108);e=function(){function c(c){this._isScalar=!1;c&&(this._subscribe=c)}c.prototype.lift=function(a){var d=new c;d.source=this;d.operator=a;return d};c.prototype.subscribe=function(c,a,k){var d=this.operator;c=h.toSubscriber(c,a,k);d?d.call(c,this.source):c.add(this.source?
this._subscribe(c):this._trySubscribe(c));if(c.syncErrorThrowable&&(c.syncErrorThrowable=!1,c.syncErrorThrown))throw c.syncErrorValue;return c};c.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(g){c.syncErrorThrown=!0,c.syncErrorValue=g,c.error(g)}};c.prototype.forEach=function(c,a){var d=this;a||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?a=l.root.Rx.config.Promise:l.root.Promise&&(a=l.root.Promise));if(!a)throw Error("no Promise impl found");return new a(function(a,
g){var k=d.subscribe(function(a){if(k)try{c(a)}catch(r){g(r),k.unsubscribe()}else c(a)},g,a)})};c.prototype._subscribe=function(c){return this.source.subscribe(c)};c.prototype[f.observable]=function(){return this};c.prototype.pipe=function(){for(var c=[],a=0;a<arguments.length;a++)c[a-0]=arguments[a];return 0===c.length?this:k.pipeFromArray(c)(this)};c.prototype.toPromise=function(c){var a=this;c||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?c=l.root.Rx.config.Promise:l.root.Promise&&(c=
l.root.Promise));if(!c)throw Error("no Promise impl found");return new c(function(c,d){var g;a.subscribe(function(c){return g=c},function(c){return d(c)},function(){return c(g)})})};c.create=function(a){return new c(a)};return c}();b.Observable=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(18),h={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},f=Object.keys(h)[0];e={LEVELS:Object.keys(h),error:l.default,warn:l.default,info:l.default,debug:l.default,setLevel:function(a){var c;
(c=h[a])?f=a:(c=0,f="NONE");this.error=c>=h.ERROR?console.error.bind(console):l.default;this.warn=c>=h.WARNING?console.warn.bind(console):l.default;this.info=c>=h.INFO?console.info.bind(console):l.default;this.debug=c>=h.DEBUG?console.log.bind(console):l.default},getLevel:function(){return f}};b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(229),h=function(a,k){if(!a)throw new l.default(k||"invalid assertion");};h.equal=function(a,k,c){return h(a===k,c)};h.iface=
function(a,k,c){h(a,k+" should be an object");for(var d in c)c.hasOwnProperty(d)&&h.equal(typeof a[d],c[d],k+" should have property "+d+" as a "+c[d])};b.default=h},function(e,b,a){var l=this&&this.__extends||function(c,a){function d(){this.constructor=c}for(var g in a)a.hasOwnProperty(g)&&(c[g]=a[g]);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)},h=a(36);e=a(12);var f=a(61),k=a(38);a=function(a){function d(g,k,h){a.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=
this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=f.empty;break;case 1:if(!g){this.destination=f.empty;break}if("object"===typeof g){g instanceof d?(this.destination=g,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,g));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,g,k,h)}}l(d,a);d.prototype[k.rxSubscriber]=function(){return this};d.create=function(c,a,g){c=new d(c,a,g);c.syncErrorThrowable=!1;return c};d.prototype.next=
function(c){this.isStopped||this._next(c)};d.prototype.error=function(c){this.isStopped||(this.isStopped=!0,this._error(c))};d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};d.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};d.prototype._next=function(c){this.destination.next(c)};d.prototype._error=function(c){this.destination.error(c);this.unsubscribe()};d.prototype._complete=function(){this.destination.complete();
this.unsubscribe()};d.prototype._unsubscribeAndRecycle=function(){var c=this._parent,a=this._parents;this._parents=this._parent=null;this.unsubscribe();this.isStopped=this.closed=!1;this._parent=c;this._parents=a;return this};return d}(e.Subscription);b.Subscriber=a;var c=function(c){function a(a,d,g,k){c.call(this);this._parentSubscriber=a;a=this;if(h.isFunction(d))var n=d;else d&&(n=d.next,g=d.error,k=d.complete,d!==f.empty&&(a=Object.create(d),h.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),
a.unsubscribe=this.unsubscribe.bind(this)));this._context=a;this._next=n;this._error=g;this._complete=k}l(a,c);a.prototype.next=function(a){if(!this.isStopped&&this._next){var c=this._parentSubscriber;c.syncErrorThrowable?this.__tryOrSetError(c,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}};a.prototype.error=function(a){if(!this.isStopped){var c=this._parentSubscriber;if(this._error)c.syncErrorThrowable?this.__tryOrSetError(c,this._error,a):this.__tryOrUnsub(this._error,a),this.unsubscribe();
else if(c.syncErrorThrowable)c.syncErrorValue=a,c.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),a;}};a.prototype.complete=function(){var a=this;if(!this.isStopped){var c=this._parentSubscriber;if(this._complete){var d=function(){return a._complete.call(a._context)};c.syncErrorThrowable?this.__tryOrSetError(c,d):this.__tryOrUnsub(d)}this.unsubscribe()}};a.prototype.__tryOrUnsub=function(a,c){try{a.call(this._context,c)}catch(m){throw this.unsubscribe(),m;}};a.prototype.__tryOrSetError=
function(a,c,d){try{c.call(this._context,d)}catch(q){return a.syncErrorValue=q,a.syncErrorThrown=!0}return!1};a.prototype._unsubscribe=function(){var a=this._parentSubscriber;this._parentSubscriber=this._context=null;a.unsubscribe()};return a}(a)},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_AUTO_PLAY:!1,DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:Infinity,
DEFAULT_MAX_BUFFER_BEHIND:Infinity,DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:Infinity,video:Infinity,other:Infinity},DEFAULT_ADAPTIVE_BUFFER_THRESHOLD:.3,INACTIVITY_DELAY:6E4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:10,DEFAULT_SUGGESTED_PRESENTATION_DELAY:{SMOOTH:10,DASH:10},DISCONTINUITY_THRESHOLD:1,END_OF_PLAY:.5,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:Infinity,
INITIAL_BACKOFF_DELAY_BASE:200,MAX_BACKOFF_DELAY_BASE:3E3,SAMPLING_INTERVAL_MEDIASOURCE:1E3,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:35E4,ABR_MINIMUM_CHUNK_SIZE:16E3,ABR_STARVATION_FACTOR:.72,ABR_REGULAR_FACTOR:.9,ABR_STARVATION_GAP:5,OUT_OF_STARVATION_GAP:7,RESUME_AFTER_SEEKING_GAP:1.5,RESUME_AFTER_BUFFERING_GAP:5,STALL_GAP:.5,MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.12,MAX_BUFFERED_DISTANCE:.1,MINIMUM_SEGMENT_SIZE:.3,MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:100,EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL",
"HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0);e=a(32);var h=a(1),f=a(47),k=a(48);b.isFirefox=k.isFirefox;b.isIE=k.isIE;b.MediaSource_=k.MediaSource_;b.VTTCue_=k.VTTCue_;var c=a(16);b.events=c;var d=a(231);
b.exitFullscreen=d.exitFullscreen;b.isFullscreen=d.isFullscreen;b.requestFullscreen=d.requestFullscreen;a=a(232);b.KeySystemAccess=a.KeySystemAccess;b.requestMediaKeySystemAccess=a.requestMediaKeySystemAccess;b.setMediaKeys=a.setMediaKeys;b.isCodecSupported=function(a){return k.MediaSource_?"function"===typeof k.MediaSource_.isTypeSupported?k.MediaSource_.isTypeSupported(a):!0:!1};b.shouldRenewMediaKeys=function(){return k.isIE};b.shouldUnsetMediaKeys=function(){return k.isIE};b.onSourceOpen$=function(a){return"open"===
a.readyState?l.Observable.of(null):c.onSourceOpen$(a).take(1)};b.canSeek=function(a){return a.readyState>=k.READY_STATES.HAVE_METADATA?l.Observable.of(null):c.onLoadedMetadata$(a).take(1)};b.canPlay=function(a){return a.readyState>=k.READY_STATES.HAVE_ENOUGH_DATA?l.Observable.of(null):f.default(a,"canplay").take(1)};if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){a=window.WebKitSourceBuffer.prototype;for(var g in e.default.prototype)e.default.prototype.hasOwnProperty(g)&&
(a[g]=e.default.prototype[g]);a._listeners=[];a.__emitUpdate=function(a,c){var d=this;setTimeout(function(){d.trigger(a,c);d.updating=!1;d.trigger("updateend")},0)};a.appendBuffer=function(a){if(this.updating)throw Error("updating");this.trigger("updatestart");this.updating=!0;try{this.append(a)}catch(p){this.__emitUpdate("error",p);return}this.__emitUpdate("update")}}b.addTextTrack=function(a,c){if(k.isIE){var d=a.textTracks.length;a=0<d?a.textTracks[d-1]:a.addTextTrack("subtitles");a.mode=c?a.HIDDEN:
a.SHOWING}else{var g=document.createElement("track");a.appendChild(g);a=g.track;g.kind="subtitles";a.mode=c?"hidden":"showing"}return{track:a,trackElement:g}};b.isPlaybackStuck=function(a,c,d,g){return k.isFirefox&&g&&"timeupdate"===d&&!!c&&10<c.end-a};b.clearVideoSrc=function(a){a.src="";a.removeAttribute("src")};b.isOffline=function(){return!1===navigator.onLine};b.makeCue=function(a,c,d){if(!k.VTTCue_)throw Error("VTT cues not supported in your target");return a>=c?(h.default.warn("Invalid cue times: "+
a+" - "+c),null):new k.VTTCue_(a,c,d)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},h=a(0);e=a(3);var f=a(12),k=a(45),c=a(78),d=a(38),g=function(a){function c(c){a.call(this,c);this.destination=c}l(c,a);return c}(e.Subscriber);b.SubjectSubscriber=g;a=function(a){function b(){a.call(this);this.observers=[];this.hasError=this.isStopped=
this.closed=!1;this.thrownError=null}l(b,a);b.prototype[d.rxSubscriber]=function(){return new g(this)};b.prototype.lift=function(a){var c=new n(this,this);c.operator=a;return c};b.prototype.next=function(a){if(this.closed)throw new k.ObjectUnsubscribedError;if(!this.isStopped){var c=this.observers,d=c.length;c=c.slice();for(var g=0;g<d;g++)c[g].next(a)}};b.prototype.error=function(a){if(this.closed)throw new k.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=a;this.isStopped=!0;var c=this.observers,
d=c.length;c=c.slice();for(var g=0;g<d;g++)c[g].error(a);this.observers.length=0};b.prototype.complete=function(){if(this.closed)throw new k.ObjectUnsubscribedError;this.isStopped=!0;var a=this.observers,c=a.length;a=a.slice();for(var d=0;d<c;d++)a[d].complete();this.observers.length=0};b.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;this.observers=null};b.prototype._trySubscribe=function(c){if(this.closed)throw new k.ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,
c)};b.prototype._subscribe=function(a){if(this.closed)throw new k.ObjectUnsubscribedError;if(this.hasError)return a.error(this.thrownError),f.Subscription.EMPTY;if(this.isStopped)return a.complete(),f.Subscription.EMPTY;this.observers.push(a);return new c.SubjectSubscription(this,a)};b.prototype.asObservable=function(){var a=new h.Observable;a.source=this;return a};b.create=function(a,c){return new n(a,c)};return b}(h.Observable);b.Subject=a;var n=function(a){function c(c,d){a.call(this);this.destination=
c;this.source=d}l(c,a);c.prototype.next=function(a){var c=this.destination;c&&c.next&&c.next(a)};c.prototype.error=function(a){var c=this.destination;c&&c.error&&this.destination.error(a)};c.prototype.complete=function(){var a=this.destination;a&&a.complete&&this.destination.complete()};c.prototype._subscribe=function(a){return this.source?this.source.subscribe(a):f.Subscription.EMPTY};return c}(a);b.AnonymousSubject=n},function(e,b,a){var l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,
f=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var c={};for(a=0;10>a;a++)c["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(a){return c[a]}).join(""))return!1;var d={};"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?!1:!0}catch(g){return!1}}()?
Object.assign:function(a,c){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var d=Object(a);for(var g,k=1;k<arguments.length;k++){var b=Object(arguments[k]);for(var m in b)h.call(b,m)&&(d[m]=b[m]);if(l){g=l(b);for(var e=0;e<g.length;e++)f.call(b,g[e])&&(d[g[e]]=b[g[e]])}}return d}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(22);b.ErrorCodes=l.ErrorCodes;b.ErrorTypes=l.ErrorTypes;b.RequestErrorTypes=l.RequestErrorTypes;
e=a(84);b.EncryptedMediaError=e.default;e=a(236);b.IndexError=e.default;e=a(26);b.MediaError=e.default;e=a(237);b.OtherError=e.default;e=a(238);b.NetworkError=e.default;a=a(239);b.RequestError=a.default;b.isKnownError=function(a){return!!a&&!!a.type&&0<=Object.keys(l.ErrorTypes).indexOf(a.type)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,h,f){if("function"===typeof Array.prototype.includes)return a.includes(h,f);var k=a.length>>>0;if(0===k)return!1;f|=0;
for(f=Math.max(0<=f?f:k-Math.abs(f),0);f<k;){var c=a[f],d=h;if(c===d||"number"===typeof c&&"number"===typeof d&&isNaN(c)&&isNaN(d))return!0;f++}return!1}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0);a(67);b.default=function(a){return a instanceof l.Observable?a:a&&"function"===typeof a.subscribe?new l.Observable(function(f){var k=a.subscribe(function(a){f.next(a)},function(a){f.error(a)},function(){f.complete()});return function(){k&&k.dispose?k.dispose():k&&k.unsubscribe&&
k.unsubscribe()}}):a&&"function"===typeof a.then?l.Observable.fromPromise(a):l.Observable.of(a)}},function(e,b,a){e=a(105);a="undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self;e="undefined"!==typeof window&&window||"undefined"!==typeof e&&e||a;b.root=e;if(!e)throw Error("RxJS could not find any global context (window, self, global)");},function(e,b,a){function l(a){return a.reduce(function(a,c){return a.concat(c instanceof g.UnsubscriptionError?
c.errors:c)},[])}var h=a(24),f=a(60),k=a(36),c=a(37),d=a(31),g=a(107);e=function(){function a(a){this.closed=!1;this._subscriptions=this._parents=this._parent=null;a&&(this._unsubscribe=a)}a.prototype.unsubscribe=function(){var a=!1;if(!this.closed){var n=this._parent;var b=this._parents,e=this._unsubscribe,r=this._subscriptions;this.closed=!0;this._subscriptions=this._parents=this._parent=null;for(var u=-1,v=b?b.length:0;n;)n.remove(this),n=++u<v&&b[u]||null;if(k.isFunction(e)&&(n=c.tryCatch(e).call(this),
n===d.errorObject)){a=!0;var w=w||(d.errorObject.e instanceof g.UnsubscriptionError?l(d.errorObject.e.errors):[d.errorObject.e])}if(h.isArray(r))for(u=-1,v=r.length;++u<v;)n=r[u],f.isObject(n)&&(n=c.tryCatch(n.unsubscribe).call(n),n===d.errorObject&&(a=!0,w=w||[],n=d.errorObject.e,n instanceof g.UnsubscriptionError?w=w.concat(l(n.errors)):w.push(n)));if(a)throw new g.UnsubscriptionError(w);}};a.prototype.add=function(c){if(!c||c===a.EMPTY)return a.EMPTY;if(c===this)return this;var d=c;switch(typeof c){case "function":d=
new a(c);case "object":if(d.closed||"function"!==typeof d.unsubscribe)return d;if(this.closed)return d.unsubscribe(),d;"function"!==typeof d._addParent&&(c=d,d=new a,d._subscriptions=[c]);break;default:throw Error("unrecognized teardown "+c+" added to Subscription.");}(this._subscriptions||(this._subscriptions=[])).push(d);d._addParent(this);return d};a.prototype.remove=function(a){var c=this._subscriptions;c&&(a=c.indexOf(a),-1!==a&&c.splice(a,1))};a.prototype._addParent=function(a){var c=this._parent,
d=this._parents;c&&c!==a?d?-1===d.indexOf(a)&&d.push(a):this._parents=[a]:this._parent=a};a.EMPTY=function(a){a.closed=!0;return a}(new a);return a}();b.Subscription=e},function(e,b,a){var l=this&&this.__extends||function(a,f){function k(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(k.prototype=f.prototype,new k)};e=function(a){function f(){a.apply(this,arguments)}l(f,a);f.prototype.notifyNext=function(a,c,d,g,f){this.destination.next(c)};
f.prototype.notifyError=function(a,c){this.destination.error(a)};f.prototype.notifyComplete=function(a){this.destination.complete()};return f}(a(3).Subscriber);b.OuterSubscriber=e},function(e,b,a){var l=a(11),h=a(62),f=a(63),k=a(60),c=a(0),d=a(42),g=a(111),n=a(39);b.subscribeToResult=function(a,b,e,t){var p=new g.InnerSubscriber(a,e,t);if(p.closed)return null;if(b instanceof c.Observable)if(b._isScalar)p.next(b.value),p.complete();else return p.syncErrorThrowable=!0,b.subscribe(p);else if(h.isArrayLike(b)){a=
0;for(e=b.length;a<e&&!p.closed;a++)p.next(b[a]);p.closed||p.complete()}else{if(f.isPromise(b))return b.then(function(a){p.closed||(p.next(a),p.complete())},function(a){return p.error(a)}).then(null,function(a){l.root.setTimeout(function(){throw a;})}),p;if(b&&"function"===typeof b[d.iterator]){b=b[d.iterator]();do{a=b.next();if(a.done){p.complete();break}p.next(a.value);if(p.closed)break}while(1)}else if(b&&"function"===typeof b[n.observable])if(b=b[n.observable](),"function"!==typeof b.subscribe)p.error(new TypeError("Provided object does not correctly implement Symbol.observable"));
else return b.subscribe(new g.InnerSubscriber(a,e,t));else b=k.isObject(b)?"an invalid object":"'"+b+"'",p.error(new TypeError("You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}return null}},function(e,b,a){function l(a,c){return{start:Math.min(a.start,c.start),end:Math.max(a.end,c.end)}}function h(a){for(var c=0;c<a.length;c++){var d=a[c];d.start===d.end&&a.splice(c++,1)}return a}function f(a){for(var c=1;c<a.length;c++){var d=a[c-1],
g=a[c];if(Math.abs(g.start-d.end)<n||Math.abs(g.end-d.start)<n)d=l(d,g),a.splice(--c,2,d)}return a}function k(a,c){return a.end<=c.start}function c(a,c){var d=a.end;return a.start<=c&&c<d}function d(a,d){return c(a,d.start)||a.start<d.end&&d.end<a.end||c(d,a.start)}function g(a,c){for(var d=a.length-1;0<=d;d--){var g=a.start(d);if(c>=g){var k=a.end(d);if(c<k)return{start:g,end:k}}}return null}Object.defineProperty(b,"__esModule",{value:!0});var n=1/60;b.removeEmptyRanges=h;b.mergeContiguousRanges=
f;b.isAfter=function(a,c){return a.start>=c.end};b.isBefore=k;b.isTimeInRange=c;b.convertToRanges=function(a){for(var c=[],d=0;d<a.length;d++)c.push({start:a.start(d),end:a.end(d)});return c};b.getRange=g;b.getNextRangeGap=function(a,c){for(var d=a.length,g=0;g<d;g++){var k=a.start(g);if(c<k)return k-c}return Infinity};b.getInnerAndOuterTimeRanges=function(a,c){for(var d=null,g=[],k=0;k<a.length;k++){var f=a.start(k),n=a.end(k);c<f||c>=n?g.push({start:f,end:n}):d={start:f,end:n}}return{outerRanges:g,
innerRange:d}};b.getSizeOfRange=function(a,c){return(a=g(a,c))?a.end-a.start:0};b.getPlayedSizeOfRange=function(a,c){return(a=g(a,c))?c-a.start:0};b.getLeftSizeOfRange=function(a,c){return(a=g(a,c))?a.end-c:Infinity};b.insertInto=function(a,c){if(c.start===c.end)return a;for(var g=0;g<a.length;g++){var b=a[g],p=d(c,b),e=Math.abs(b.start-c.end)<n||Math.abs(b.end-c.start)<n;if(p||e)c=l(c,b),a.splice(g--,1);else if(0===g){if(k(c,a[0]))break}else if(k(a[g-1],c)&&k(c,b))break}a.splice(g,0,c);return f(h(a))};
b.keepRangeIntersection=function(a,c){for(var g=0;g<a.length;g++){var k=a[g];a:{var f=k;for(var n=c,b=0;b<n.length;b++)if(d(f,n[b])){f=n[b];break a}f=null}f?f.start>k.start?k.start=f.start:f.end<k.end&&(k.end=f.end):a.splice(g--,1)}return a}},function(e,b,a){function l(a,c){return c.filter(function(c){var d=document.createElement(a.tagName);c="on"+c;c in d?d=!0:(d.setAttribute(c,"return;"),d="function"===typeof d[c]);return d})[0]}function h(a,c){return a.reduce(function(a,d){return a.concat((c||
g.BROWSER_PREFIXES).map(function(a){return a+d}))},[])}function f(a,k){var f,n=h(a,k);return function(a){return a instanceof g.HTMLElement_?("undefined"===typeof f&&(f=l(a,n)),f?c.Observable.fromEvent(a,f):c.Observable.never()):d.default(a,n)}}function k(){var a;null!=document.hidden?a="":null!=document.mozHidden?a="moz":null!=document.msHidden?a="ms":null!=document.webkitHidden&&(a="webkit");var c=a?a+"Hidden":"hidden";return d.default(document,a+"visibilitychange").map(function(){return document[c]})}
Object.defineProperty(b,"__esModule",{value:!0});var c=a(0);e=a(4);a(1);var d=a(47),g=a(48);a=e.default.INACTIVITY_DELAY;var n=window.devicePixelRatio||1,p=k().filter(function(a){return!a}),m=k().debounceTime(a).filter(function(a){return a});b.isInBackground$=function(){return c.Observable.merge(p,m).startWith(!1)};b.videoWidth$=function(a){return c.Observable.merge(c.Observable.interval(2E4),d.default(window,"resize").debounceTime(500)).startWith(0).map(function(){return a.clientWidth*n}).distinctUntilChanged()};
a=f(["loadedmetadata"]);b.onLoadedMetadata$=a;a=f(["seeking"]);b.onSeeking$=a;a=f(["seeked"]);b.onSeeked$=a;a=f(["ended"]);b.onEnded$=a;a=f(["timeupdate"]);b.onTimeUpdate$=a;a=f(["fullscreenchange","FullscreenChange"],g.BROWSER_PREFIXES.concat("MS"));b.onFullscreenChange$=a;b.onPlayPause$=function(a){return c.Observable.merge(f(["play"])(a),f(["pause"])(a))};b.onTextTrackChanges$=function(a){return c.Observable.merge(f(["addtrack"])(a),f(["removetrack"])(a))};a=f(["sourceopen","webkitsourceopen"]);
b.onSourceOpen$=a;a=f(["encrypted","needkey"]);b.onEncrypted$=a;a=f(["keymessage","message"]);b.onKeyMessage$=a;a=f(["keyadded","ready"]);b.onKeyAdded$=a;a=f(["keyerror","error"]);b.onKeyError$=a;a=f(["keystatuseschange"]);b.onKeyStatusesChange$=a},function(e,b,a){e.exports=function(a,b,f){if("function"===typeof Array.prototype.find)return a.find(b,f);f=f||this;var k=a.length,c;if("function"!==typeof b)throw new TypeError(b+" is not a function");for(c=0;c<k;c++)if(b.call(f,a[c],c,a))return a[c]}},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(){}},function(e,b,a){b.isScheduler=function(a){return a&&"function"===typeof a.schedule}},function(e,b,a){var l=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var k in d)d.hasOwnProperty(k)&&(a[k]=d[k]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};e=a(0);var h=a(41),f=a(25),k=a(19);a=function(a){function c(c,d){a.call(this);this.array=c;this.scheduler=d;d||1!==c.length||
(this._isScalar=!0,this.value=c[0])}l(c,a);c.create=function(a,d){return new c(a,d)};c.of=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=a[a.length-1];k.isScheduler(d)?a.pop():d=null;var b=a.length;return 1<b?new c(a,d):1===b?new h.ScalarObservable(a[0],d):new f.EmptyObservable(d)};c.dispatch=function(a){var c=a.array,d=a.index,g=a.subscriber;d>=a.count?g.complete():(g.next(c[d]),g.closed||(a.index=d+1,this.schedule(a)))};c.prototype._subscribe=function(a){var d=this.array,
g=d.length,k=this.scheduler;if(k)return k.schedule(c.dispatch,0,{array:d,index:0,count:g,subscriber:a});for(k=0;k<g&&!a.closed;k++)a.next(d[k]);a.complete()};return c}(e.Observable);b.ArrayObservable=a},function(e,b,a){e=a(69);a=a(70);b.async=new a.AsyncScheduler(e.AsyncAction)},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(230);a=e.default(["NETWORK_ERROR","MEDIA_ERROR","ENCRYPTED_MEDIA_ERROR","INDEX_ERROR","OTHER_ERROR"]);b.ErrorTypes=a;a=e.default(["TIMEOUT","ERROR_EVENT",
"ERROR_HTTP_CODE","PARSE_ERROR"]);b.RequestErrorTypes=a;e=e.default("PIPELINE_RESOLVE_ERROR PIPELINE_LOAD_ERROR PIPELINE_PARSING_ERROR MANIFEST_PARSE_ERROR MANIFEST_INCOMPATIBLE_CODECS_ERROR MEDIA_IS_ENCRYPTED_ERROR KEY_ERROR KEY_STATUS_CHANGE_ERROR KEY_UPDATE_ERROR KEY_LOAD_ERROR KEY_LOAD_TIMEOUT KEY_GENERATE_REQUEST_ERROR INCOMPATIBLE_KEYSYSTEMS LICENSE_SERVER_CERTIFICATE_ERROR BUFFER_APPEND_ERROR BUFFER_FULL_ERROR BUFFER_TYPE_UNKNOWN MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_UNKNOWN MEDIA_SOURCE_NOT_SUPPORTED MEDIA_KEYS_NOT_SUPPORTED OUT_OF_INDEX_ERROR UNKNOWN_INDEX".split(" "));
b.ErrorCodes=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=/^(?:[a-z]+:)?\/\//i,h=/\/\.{1,2}\//;b.resolveURL=function(){for(var a=[],k=0;k<arguments.length;k++)a[k]=arguments[k];k=a.length;if(0===k)return"";for(var c="",d=0;d<k;d++){var g=a[d];"string"===typeof g&&""!==g&&(l.test(g)?c=g:("/"===g[0]&&(g=g.substr(1)),"/"===c[c.length-1]&&(c=c.substr(0,c.length-1)),c=c+"/"+g))}k=c;if(h.test(k)){a=[];k=k.split("/");c=0;for(d=k.length;c<d;c++)".."===k[c]?a.pop():"."!==k[c]&&
a.push(k[c]);a=a.join("/")}else a=k;return a};b.normalizeBaseURL=function(a){var k=a.lastIndexOf("/");return 0<=k?a.substring(0,k+1):a}},function(e,b,a){b.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(e,b,a){var l=this&&this.__extends||function(a,f){function k(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(k.prototype=f.prototype,new k)};e=function(a){function f(k){a.call(this);this.scheduler=k}l(f,a);
f.create=function(a){return new f(a)};f.dispatch=function(a){a.subscriber.complete()};f.prototype._subscribe=function(a){var c=this.scheduler;if(c)return c.schedule(f.dispatch,0,{subscriber:a});a.complete()};return f}(a(0).Observable);b.EmptyObservable=e},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(c,d){function g(){this.constructor=
c}a(c,d);c.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(22),f=a(27);e=function(a){function c(d,g,k){var b=a.call(this)||this;Object.setPrototypeOf(b,c.prototype);b.name="MediaError";b.type=h.ErrorTypes.MEDIA_ERROR;b.reason=g;b.code=h.ErrorCodes[d];b.fatal=!!k;b.message=f.default(b.name,b.code,b.reason);return b}l(c,a);return c}(Error);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=
function(a,b,f){return null==f?a+" ("+b+")":"string"===typeof f?a+" ("+b+") "+f:a+" ("+b+") "+f.message}},function(e,b,a){function l(a){for(var c=a.length,d=new Uint8Array(c),g=0;g<c;g++)d[g]=a.charCodeAt(g)&255;return d}function h(a,c){void 0===c&&(c="");for(var d="",g=0;g<a.byteLength;g++)d+=(a[g]>>>4).toString(16),d+=(a[g]&15).toString(16),c.length&&g<a.byteLength-1&&(d+=c);return d}Object.defineProperty(b,"__esModule",{value:!0});var f=a(2);b.strToBytes=l;b.bytesToStr=function(a){return String.fromCharCode.apply(null,
a)};b.bytesToUTF16Str=function(a){for(var c="",d=a.length,g=0;g<d;g+=2)c+=String.fromCharCode(a[g]);return c};b.hexToBytes=function(a){for(var c=a.length,d=new Uint8Array(c/2),g=0,k=0;g<c;g+=2,k++)d[k]=parseInt(a.substr(g,2),16)&255;return d};b.bytesToHex=h;b.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];c=a.length;for(var d=-1,g=0,f;++d<c;)f=a[d],g+="number"===typeof f?f:f.length;g=new Uint8Array(g);var b=0;for(d=-1;++d<c;)f=a[d],"number"===typeof f?b+=f:0<f.length&&
(g.set(f,b),b+=f.length);return g};b.be2toi=function(a,c){return(a[c+0]<<8)+(a[c+1]<<0)};b.be3toi=function(a,c){return 65536*a[c+0]+256*a[c+1]+a[c+2]};b.be4toi=function(a,c){return 16777216*a[c+0]+65536*a[c+1]+256*a[c+2]+a[c+3]};b.be8toi=function(a,c){return 4294967296*(16777216*a[c+0]+65536*a[c+1]+256*a[c+2]+a[c+3])+16777216*a[c+4]+65536*a[c+5]+256*a[c+6]+a[c+7]};b.itobe2=function(a){return new Uint8Array([a>>>8&255,a&255])};b.itobe4=function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&
255,a&255])};b.itobe8=function(a){var c=a%4294967296;a=(a-c)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255])};b.le2toi=function(a,c){return(a[c+0]<<0)+(a[c+1]<<8)};b.le4toi=function(a,c){return a[c+0]+256*a[c+1]+65536*a[c+2]+16777216*a[c+3]};b.le8toi=function(a,c){return a[c+0]+256*a[c+1]+65536*a[c+2]+16777216*a[c+3]+4294967296*(a[c+4]+256*a[c+5]+65536*a[c+6]+16777216*a[c+7])};b.itole2=function(a){return new Uint8Array([a&255,a>>>8&255])};
b.itole4=function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])};b.itole8=function(a){var c=a%4294967296;a=(a-c)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,c&255,c>>>8&255,c>>>16&255,c>>>24&255])};b.guidToUuid=function(a){f.default.equal(a.length,16,"UUID length should be 16");var c=l(a);a=c[0];var d=c[1],g=c[2],k=c[3],b=c[4],e=c[5],q=c[6],t=c[7],r=c.subarray(8,10);c=c.subarray(10,16);var u=new Uint8Array(16);u[0]=k;u[1]=g;u[2]=d;u[3]=a;u[4]=e;u[5]=
b;u[6]=t;u[7]=q;u.set(r,8);u.set(c,10);return h(u)};b.toBase64URL=function(a){return btoa(a).replace(/\=+$/,"")}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h=a(8);b.default=function(a){var f=a.url,c=a.body,d=a.headers,g=null==a.method?"GET":a.method,b=null==a.responseType?"json":a.responseType,p=null==a.timeout?3E4:a.timeout;return l.Observable.create(function(k){var n=new XMLHttpRequest;n.open(g,f,!0);0<=p&&(n.timeout=p);n.responseType=b;"document"===n.responseType&&
n.overrideMimeType("text/xml");if(d)for(var e in d)d.hasOwnProperty(e)&&n.setRequestHeader(e,d[e]);var m=Date.now();n.onerror=function(){k.error(new h.RequestError(n,f,h.RequestErrorTypes.ERROR_EVENT))};n.ontimeout=function(){k.error(new h.RequestError(n,f,h.RequestErrorTypes.TIMEOUT))};a.ignoreProgressEvents||(n.onprogress=function(a){var c=Date.now();k.next({type:"progress",value:{url:f,duration:c-m,sentTime:m,currentTime:c,size:a.loaded,totalSize:a.total}})});n.onload=function(a){if(4===n.readyState)if(200<=
n.status&&300>n.status){var c=Date.now();var d=a.total,g=n.status,b=n.responseType;a=n.responseURL||f;if("json"===b)if("string"!==n.response)var p=n.response;else try{p=JSON.parse(n.responseText)}catch(A){p=null}else p=n.response;null==p?(c=h.RequestErrorTypes.PARSE_ERROR,k.error(new h.RequestError(n,a,c))):(k.next({type:"response",value:{status:g,url:a,responseType:b,sentTime:m,receivedTime:c,duration:c-m,size:d,responseData:p}}),k.complete())}else c=h.RequestErrorTypes.ERROR_HTTP_CODE,k.error(new h.RequestError(n,
f,c))};void 0!==c?n.send(c):n.send();return function(){n&&4!==n.readyState&&n.abort()}})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(2);var l=a(35);b.calculateRepeat=function(a,f){var k=a.r||0;0>k&&(k=Math.ceil(((f?f.ts:Infinity)-a.ts)/a.d)-1);return k};b.normalizeRange=function(a,f,k){var c=a.presentationTimeOffset||0;a=a.timescale||1;return{up:f*a-c,to:(f+k)*a-c}};b.getTimelineRangeStart=function(a){var f=a.ts,k=a.d;a=a.r;return-1===k?f:f+a*k};b.getTimelineRangeEnd=function(a){var f=
a.ts,k=a.d;a=a.r;return-1===k?f:f+(a+1)*k};b.getInitSegment=function(a,f){var k=f.initialization;k=void 0===k?{}:k;return new l.default({id:""+a+"_init",init:!0,time:0,range:k.range||null,indexRange:f.indexRange||null,media:k.media,timescale:f.timescale})};b.setTimescale=function(a,f){a.timescale!==f&&(a.timescale=f);return{timescale:a.timescale===f?f:a.timescale}};b.scale=function(a,f){return f/a.timescale}},function(e,b,a){b.errorObject={e:{}}},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});var l=a(2),h=a(1);e=function(){function a(){this.on=this.addEventListener;this.off=this.removeEventListener;this._listeners={}}a.prototype.addEventListener=function(a,c){l.default("function"===typeof c,"eventemitter: second argument should be a function");this._listeners[a]||(this._listeners[a]=[]);this._listeners[a].push(c)};a.prototype.removeEventListener=function(a,c){if(0===arguments.length)this._listeners={};else if(this._listeners.hasOwnProperty(a))if(1===arguments.length)delete this._listeners[a];
else{var d=this._listeners[a],g=d.indexOf(c);~g&&d.splice(g,1);d.length||delete this._listeners[a]}};a.prototype.trigger=function(a,c){this._listeners.hasOwnProperty(a)&&this._listeners[a].slice().forEach(function(a){try{a(c)}catch(g){h.default.error(g,g.stack)}})};return a}();b.default=e},function(e,b,a){function l(a,g){for(var d=a.length,f=0,b,h=0;f+8<d&&(h=c.be4toi(a,f),b=c.be4toi(a,f+4),k.default(0<h,"out of range size"),b!==g);)f+=h;if(f>=d)return-1;k.default(f+h<=d,"atom out of range");return f}
function h(a,g){for(var d=a.length,f=0,b,h=0;f+8<d&&(h=c.be4toi(a,f),b=c.be4toi(a,f+4),k.default(0<h,"out of range size"),b!==g);)f+=h;return f<d?a.subarray(f+8,f+h):null}function f(a){var d=a.privateData;a=a.systemId.replace(/-/g,"");k.default(32===a.length);d=c.concat(4,c.hexToBytes(a),c.itobe4(d.length),d);return c.concat(c.itobe4(d.length+8),c.strToBytes("pssh"),d)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(2),c=a(28);b.parseSidx=function(a,g){var d=l(a,1936286840);if(-1===d)return null;
var f=c.be4toi(a,d);d=d+4+4;var k=a[d];d+=8;var b=c.be4toi(a,d);d+=4;if(0===k)k=c.be4toi(a,d),d+=4,g+=c.be4toi(a,d)+f,d+=4;else if(1===k)k=c.be8toi(a,d),d+=8,g+=c.be8toi(a,d)+f,d+=8;else return null;f=[];d+=2;var h=c.be2toi(a,d);for(d+=2;0<=--h;){var e=c.be4toi(a,d);d+=4;var u=e&2147483647;if(1===(e&2147483648)>>>31)throw Error("not implemented");e=c.be4toi(a,d);d+=4;d+=4;f.push({time:k,duration:e,count:0,timescale:b,range:[g,g+u-1]});k+=e;g+=u}return f};b.parseTfdt=function(a){a=h(a,1836019558);
if(!a)return-1;a=h(a,1953653094);if(!a)return-1;var d=l(a,1952867444);if(-1===d)return-1;d=d+4+4;var f=a[d];d+=4;return 1<f?-1:f?c.be8toi(a,d):c.be4toi(a,d)};b.getDurationFromTrun=function(a){a=h(a,1836019558);if(!a)return-1;a=h(a,1953653094);if(!a)return-1;var d=l(a,1953658222);if(-1===d)return-1;d=d+4+4;var f=a[d];d+=1;if(1<f)return-1;var k=c.be3toi(a,d);d+=3;f=k&256;var b=0;if(!f)return d=l(a,1952868452),-1===d?b=-1:(d=d+4+4+1,f=c.be3toi(a,d),f&8?(d+=4,f&1&&(d+=8),f&2&&(d+=4),b=c.be4toi(a,d)):
b=-1),0<=b?b:-1;var e=k&1,t=k&4,r=k&512,u=k&1024;k&=2048;var v=c.be4toi(a,d);d+=4;e&&(d+=4);t&&(d+=4);e=v;for(t=0;e--;)f?(t+=c.be4toi(a,d),d+=4):t+=b,r&&(d+=4),u&&(d+=4),k&&(d+=4);return t};b.getMDHDTimescale=function(a){a=h(a,1836019574);if(!a)return-1;a=h(a,1953653099);if(!a)return-1;a=h(a,1835297121);if(!a)return-1;var d=l(a,1835296868);if(-1===d)return-1;d=d+4+4;var f=a[d];d+=4;return 1===f?c.be4toi(a,d+16):0===f?c.be4toi(a,d+8):-1};b.getMdat=function(a){return h(a,1835295092)};b.patchPssh=function(a,
g){if(!g||!g.length)return a;var d=l(a,1836019574);if(-1===d)return a;for(var k=c.be4toi(a,d),b=[a.subarray(d,d+k)],h=0;h<g.length;h++)b.push(f(g[h]));g=c.concat.apply(void 0,b);g.set(c.itobe4(g.length),0);return c.concat(a.subarray(0,d),g,a.subarray(d+k))}},function(e,b,a){function l(a){if(null==a||""===a)return"";a=(""+a).toLowerCase().split("-");var c=a[0];switch(c.length){case 2:var d=h.default[c];break;case 3:d=f.default[c]}(d=d||c)&&(a[0]=d);return a.join("-")}Object.defineProperty(b,"__esModule",
{value:!0});var h=a(242),f=a(243);b.normalize=l;b.normalizeTextTrack=function(a){if(null!=a){if("string"===typeof a){var c=a;a=!1}else c=a.language,a=!!a.closedCaption;return{language:c,closedCaption:a,normalized:l(c)}}return a};b.normalizeAudioTrack=function(a){if(null!=a){if("string"===typeof a){var c=a;a=!1}else c=a.language,a=!!a.audioDescription;return{language:c,audioDescription:a,normalized:l(c)}}return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(2);e=function(){return function(a){this.id=
a.id;this.duration=a.duration;this.isInit=!!a.init;this.range=a.range||void 0;this.time=a.time||0;this.indexRange=a.indexRange||void 0;this.number=a.number;this.timescale=null==a.timescale?1:a.timescale;this.media=a.media||""}}();b.default=e},function(e,b,a){b.isFunction=function(a){return"function"===typeof a}},function(e,b,a){function l(){try{return f.apply(this,arguments)}catch(k){return h.errorObject.e=k,h.errorObject}}var h=a(31),f;b.tryCatch=function(a){f=a;return l}},function(e,b,a){e=a(11).root.Symbol;
b.rxSubscriber="function"===typeof e&&"function"===typeof e.for?e.for("rxSubscriber"):"@@rxSubscriber";b.$$rxSubscriber=b.rxSubscriber},function(e,b,a){function l(a){var f=a.Symbol;"function"===typeof f?f.observable?a=f.observable:(a=f("observable"),f.observable=a):a="@@observable";return a}e=a(11);b.getSymbolObservable=l;b.observable=l(e.root);b.$$observable=b.observable},function(e,b,a){b.noop=function(){}},function(e,b,a){var l=this&&this.__extends||function(a,f){function b(){this.constructor=
a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)};e=function(a){function f(f,c){a.call(this);this.value=f;this.scheduler=c;this._isScalar=!0;c&&(this._isScalar=!1)}l(f,a);f.create=function(a,c){return new f(a,c)};f.dispatch=function(a){var c=a.value,d=a.subscriber;a.done?d.complete():(d.next(c),d.closed||(a.done=!0,this.schedule(a)))};f.prototype._subscribe=function(a){var c=this.value,d=this.scheduler;if(d)return d.schedule(f.dispatch,
0,{done:!1,value:c,subscriber:a});a.next(c);a.closed||a.complete()};return f}(a(0).Observable);b.ScalarObservable=e},function(e,b,a){function l(a){var f=a.Symbol;if("function"===typeof f)return f.iterator||(f.iterator=f("iterator polyfill")),f.iterator;if((f=a.Set)&&"function"===typeof(new f)["@@iterator"])return"@@iterator";if(a=a.Map){f=Object.getOwnPropertyNames(a.prototype);for(var b=0;b<f.length;++b){var c=f[b];if("entries"!==c&&"size"!==c&&a.prototype[c]===a.prototype.entries)return c}}return"@@iterator"}
e=a(11);b.symbolIteratorPonyfill=l;b.iterator=l(e.root);b.$$iterator=b.iterator},function(e,b,a){var l=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},h=a(14);e=a(13);b.mergeMap=function(a,d,g){void 0===g&&(g=Number.POSITIVE_INFINITY);return function(c){"number"===typeof d&&(g=d,d=null);return c.lift(new f(a,d,g))}};var f=function(){function a(a,c,f){void 0===
f&&(f=Number.POSITIVE_INFINITY);this.project=a;this.resultSelector=c;this.concurrent=f}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.project,this.resultSelector,this.concurrent))};return a}();b.MergeMapOperator=f;var k=function(a){function c(c,d,f,b){void 0===b&&(b=Number.POSITIVE_INFINITY);a.call(this,c);this.project=d;this.resultSelector=f;this.concurrent=b;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}l(c,a);c.prototype._next=function(a){this.active<this.concurrent?
this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var c=this.index++;try{var d=this.project(a,c)}catch(m){this.destination.error(m);return}this.active++;this._innerSub(d,a,c)};c.prototype._innerSub=function(a,c,d){this.add(h.subscribeToResult(this,a,c,d))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,c,d,f,b){this.resultSelector?this._notifyResultSelector(a,c,d,f):
this.destination.next(c)};c.prototype._notifyResultSelector=function(a,c,d,f){try{var g=this.resultSelector(a,c,d,f)}catch(t){this.destination.error(t);return}this.destination.next(g)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);b.MergeMapSubscriber=k},function(e,b,a){var l=a(184);b.multicast=function(a,b){return function(c){var d=
"function"===typeof a?a:function(){return a};if("function"===typeof b)return c.lift(new h(d,b));var g=Object.create(c,l.connectableObservableDescriptor);g.source=c;g.subjectFactory=d;return g}};var h=function(){function a(a,c){this.subjectFactory=a;this.selector=c}a.prototype.call=function(a,c){var d=this.selector,g=this.subjectFactory();a=d(g).subscribe(a);a.add(c.subscribe(g));return a};return a}();b.MulticastOperator=h},function(e,b,a){var l=this&&this.__extends||function(a,f){function b(){this.constructor=
a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)};e=function(a){function f(){var f=a.call(this,"object unsubscribed");this.name=f.name="ObjectUnsubscribedError";this.stack=f.stack;this.message=f.message}l(f,a);return f}(Error);b.ObjectUnsubscribedError=e},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)};e=a(6);var h=a(226),f=a(12),k=a(66),c=a(45),d=a(78);a=function(a){function b(c,d,g){void 0===c&&(c=Number.POSITIVE_INFINITY);void 0===d&&(d=Number.POSITIVE_INFINITY);a.call(this);this.scheduler=g;this._events=[];this._bufferSize=1>c?1:c;this._windowTime=1>d?1:d}l(b,a);b.prototype.next=function(c){var d=this._getNow();this._events.push(new g(d,c));this._trimBufferThenGetEvents();a.prototype.next.call(this,c)};b.prototype._subscribe=function(a){var g=this._trimBufferThenGetEvents(),
b=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;if(this.hasError)var n=f.Subscription.EMPTY;else this.isStopped?n=f.Subscription.EMPTY:(this.observers.push(a),n=new d.SubjectSubscription(this,a));b&&a.add(a=new k.ObserveOnSubscriber(a,b));b=g.length;for(var h=0;h<b&&!a.closed;h++)a.next(g[h].value);this.hasError?a.error(this.thrownError):this.isStopped&&a.complete();return n};b.prototype._getNow=function(){return(this.scheduler||h.queue).now()};b.prototype._trimBufferThenGetEvents=
function(){for(var a=this._getNow(),c=this._bufferSize,d=this._windowTime,g=this._events,f=g.length,b=0;b<f&&!(a-g[b].time<d);)b++;f>c&&(b=Math.max(b,f-c));0<b&&g.splice(0,b);return g};return b}(e.Subject);b.ReplaySubject=a;var g=function(){return function(a,c){this.time=a;this.value=c}}()},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0);b.default=function(a,f){return Array.isArray(f)?(f=f.map(function(f){return l.Observable.fromEvent(a,f)}),l.Observable.merge.apply(l.Observable,
f)):l.Observable.fromEvent(a,f)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(26);b.BROWSER_PREFIXES=["","webkit","moz","ms"];e=window;b.HTMLElement_=e.HTMLElement;b.VTTCue_=e.VTTCue||e.TextTrackCue;b.MediaSource_=e.MediaSource||e.MozMediaSource||e.WebKitMediaSource||e.MSMediaSource;e=e.MediaKeys||e.MozMediaKeys||e.WebKitMediaKeys||e.MSMediaKeys;b.MediaKeys_=e;if(!e){var h=function(){throw new l.default("MEDIA_KEYS_NOT_SUPPORTED",null,!0);};b.MediaKeys_=e=function(){return function(){this.setServerCertificate=
this.isTypeSupported=this.createSession=this.create=h}}()}e="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent);b.isIE=e;e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");b.isFirefox=e;b.READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}},function(e,b,a){function l(a){if(t[a])return t[a];var c=m.strToBytes(a);return t[a]=c}function h(a,c){return m.concat(m.itobe4(c.length+
8),l(a),c)}function f(a,c,d,g,f){for(var b=a.length,k=0,n;k<b;){n=m.be4toi(a,k);if(1970628964===m.be4toi(a,k+4)&&m.be4toi(a,k+8)===c&&m.be4toi(a,k+12)===d&&m.be4toi(a,k+16)===g&&m.be4toi(a,k+20)===f)return a.subarray(k+24,k+n);k+=n}}function k(a,c){for(var d=a.length,g=0,f,b=0;g+8<d&&(b=m.be4toi(a,g),f=m.be4toi(a,g+4),p.default(0<b,"smooth: out of range size"),f!==c);)g+=b;return g<d?a.subarray(g+8,g+b):null}function c(a,c,d,g){var f=[a,c,d];g.forEach(function(a){a=r.pssh(a.systemId,a.privateData,
a.keyIds);f.push(a)});return f}function d(a,c,d,g){var f=a.length,b=c.length;d=d.length;a=a.subarray(d,f);f=new Uint8Array(b+(f-d));f.set(c,0);f.set(a,b);f.set(m.itobe4(c.length+8),g+16);return f}function g(a,d,g,f,b,k,n){g=r.mult("stbl",[g,h("stts",new Uint8Array(8)),h("stsc",new Uint8Array(8)),h("stsz",new Uint8Array(12)),h("stco",new Uint8Array(8))]);var e=h("url ",new Uint8Array([0,0,0,1]));e=r.dref(e);e=r.mult("dinf",[e]);f=r.mult("minf",[f,e,g]);d=r.hdlr(d);g=r.mdhd(a);d=r.mult("mdia",[g,d,
f]);b=r.tkhd(b,k,1);b=r.mult("trak",[b,d]);k=r.trex(1);k=r.mult("mvex",[k]);a=r.mvhd(a,1);n=r.mult("moov",c(a,k,b,n));a=r.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return m.concat(a,n)}Object.defineProperty(b,"__esModule",{value:!0});var n=a(5),p=a(2),m=a(28),q=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],t={},r={mult:function(a,c){return h(a,m.concat.apply(null,c))},avc1encv:function(a,c,d,g,f,b,k,n,e,p){return h(a,m.concat(6,m.itobe2(c),16,m.itobe2(d),m.itobe2(g),
m.itobe2(f),2,m.itobe2(b),6,[0,1,k.length],m.strToBytes(k),31-k.length,m.itobe2(n),[255,255],e,"encv"===a?p||[]:[]))},avcc:function(a,c,d){return h("avcC",m.concat([1,a[1],a[2],a[3],252|(2===d?1:4===d?3:0),225],m.itobe2(a.length),a,[1],m.itobe2(c.length),c))},dref:function(a){return h("dref",m.concat(7,[1],a))},esds:function(a,c){return h("esds",m.concat(4,[3,25],m.itobe2(a),[0,4,17,64,21],11,[5,2],m.hexToBytes(c),[6,1,2]))},frma:function(a){return h("frma",m.strToBytes(a))},free:function(a){return h("free",
new Uint8Array(a-8))},ftyp:function(a,c){return h("ftyp",m.concat.apply(null,[m.strToBytes(a),[0,0,0,1]].concat(c.map(m.strToBytes))))},hdlr:function(a){switch(a){case "video":a="vide";var c="VideoHandler";break;case "audio":a="soun";c="SoundHandler";break;default:a="hint",c=""}return h("hdlr",m.concat(8,m.strToBytes(a),12,m.strToBytes(c),1))},mdhd:function(a){return h("mdhd",m.concat(12,m.itobe4(a),8))},moof:function(a,c){return r.mult("moof",[a,c])},mp4aenca:function(a,c,d,g,f,b,k,n){return h(a,
m.concat(6,m.itobe2(c),8,m.itobe2(d),m.itobe2(g),2,m.itobe2(f),m.itobe2(b),2,k,"enca"===a?n||[]:[]))},mvhd:function(a,c){return h("mvhd",m.concat(12,m.itobe4(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,m.itobe2(c+1)))},pssh:function(a,c,d){void 0===c&&(c=new Uint8Array(0));void 0===d&&(d=new Uint8Array(0));a=a.replace(/-/g,"");p.default(32===a.length,"wrong system id length");var g=d.length;if(0<g){var f=1;d=m.concat.apply(void 0,[m.itobe4(g)].concat(d))}else f=0,d=[];return h("pssh",m.concat([f,
0,0,0],m.hexToBytes(a),d,m.itobe4(c.length),c))},saio:function(a,c,d,g){return h("saio",m.concat(4,[0,0,0,1],m.itobe4(a.length+c.length+d.length+g.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return h("saiz",new Uint8Array(0));var c=m.be4toi(a,0),d=m.be4toi(a,4),g=new Uint8Array(d+9);g.set(m.itobe4(d),5);d=9;for(var f=8,b,k;f<a.length;)f+=8,2===(c&2)?(k=2,b=m.be2toi(a,f),f+=6*b+2):k=b=0,g[d]=6*b+8+k,d++;return h("saiz",g)},schm:function(a,c){return h("schm",m.concat(4,m.strToBytes(a),m.itobe4(c)))},
senc:function(a){return h("senc",a)},smhd:function(){return h("smhd",new Uint8Array(8))},stsd:function(a){return h("stsd",m.concat.apply(void 0,[7,[a.length]].concat(a)))},tkhd:function(a,c,d){return h("tkhd",m.concat(m.itobe4(7),8,m.itobe4(d),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],m.itobe2(a),2,m.itobe2(c),2))},trex:function(a){return h("trex",m.concat(4,m.itobe4(a),[0,0,0,1],12))},tfdt:function(a){return h("tfdt",m.concat([1,0,0,0],m.itobe8(a)))},tenc:function(a,c,d){return h("tenc",
m.concat(6,[a,c],m.hexToBytes(d)))},traf:function(a,c,d,g,f){var b=[a,c,d];f&&b.push(r.senc(f),r.saiz(f),r.saio(g,a,c,d));return r.mult("traf",b)},trun:function(a){if(a[11]&1)return a;var c=new Uint8Array(a.length+4);c.set(m.itobe4(a.length+4),0);c.set(a.subarray(4,16),4);c[11]|=1;c.set([0,0,0,0],16);c.set(a.subarray(16,a.length),20);return c},vmhd:function(){var a=new Uint8Array(12);a[3]=1;return h("vmhd",a)}},u={traf:function(a){return(a=k(a,1836019558))?k(a,1953653094):null},senc:function(a){return f(a,
2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return f(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return f(a,3565190898,3392751253,2387879627,2655430559)},mdat:function(a){return k(a,1835295092)}};b.default={getMdat:u.mdat,getTraf:u.traf,parseTfrf:function(a){a=u.tfrf(a);if(!a)return[];for(var c=[],d=a[0],g=a[4],f=0;f<g;f++){if(1===d){var b=m.be8toi(a,16*f+5);var k=m.be8toi(a,16*f+13)}else b=m.be4toi(a,8*f+5),k=m.be4toi(a,8*f+9);c.push({time:b,duration:k})}return c},
parseTfxd:function(a){if(a=u.tfxd(a))return{duration:m.be8toi(a,12),time:m.be8toi(a,4)}},createVideoInitSegment:function(a,c,d,f,b,k,n,h,e){e=e||[];var p=n.split("00000001");n=p[2];p=m.hexToBytes(p[1]);n=m.hexToBytes(n);k=r.avcc(p,n,k);e.length&&null!=h?(h=r.tenc(1,8,h),h=r.mult("schi",[h]),n=r.schm("cenc",65536),p=r.frma("avc1"),h=r.mult("sinf",[p,n,h]),f=r.avc1encv("encv",1,c,d,f,b,"AVC Coding",24,k,h)):f=r.avc1encv("avc1",1,c,d,f,b,"AVC Coding",24,k);f=r.stsd([f]);return g(a,"video",f,r.vmhd(),
c,d,e)},createAudioInitSegment:function(a,c,d,f,b,k,n,h){h=h||[];k||(k=(32|q.indexOf(b)&31)<<4,k=m.bytesToHex(m.itobe2((k|c&31)<<3)));k=r.esds(1,k);if(h.length&&null!=n){n=r.tenc(1,8,n);n=r.mult("schi",[n]);var e=r.schm("cenc",65536),p=r.frma("mp4a");n=r.mult("sinf",[p,e,n]);c=r.mp4aenca("enca",1,c,d,f,b,k,n)}else c=r.mp4aenca("mp4a",1,c,d,f,b,k);c=r.stsd([c]);return g(a,"audio",c,r.smhd(),0,0,h)},patchSegment:function(a,c){var g=a.subarray(0,m.be4toi(a,0)),f=r.tfdt(c);c=f.length;var b=m.be4toi(g,
8),k=m.be4toi(g,b+8),h=m.be4toi(g,b+8+8),e=m.be4toi(g,b+8+8+h),p=g.subarray(8,b+8),l=g.subarray(b+8+8,b+8+8+k-8);k=l.subarray(0,h);e=l.subarray(h,h+e);k.set([0,0,0,1],12);l=u.senc(l);e=r.trun(e);f=r.traf(k,f,e,p,l);p=r.moof(p,f);c=b+8+8+h+c;return n.isIE?d(a,p,g,c):8<=g.length-p.length?(g=g.length-p.length,a.set(p,0),a.set(r.free(g),p.length),a.set(m.itobe4(p.length+8+g),c+16),a):d(a,p,g,c)}}},function(e,b,a){function l(a,b){a=a.toString();return a.length>=b?a:(Array(b+1).join("0")+a).slice(-b)}function h(a){return function(f,
c,d){f=d?parseInt(d,10):1;return l(""+a,f)}}Object.defineProperty(b,"__esModule",{value:!0});b.addNextSegments=function(a,b,c){null!=b.duration&&null!=b.timescale&&a.index._addSegments(c,b)};b.pad=l;b.processFormatedToken=h;b.replaceTokens=function(a,b,c){return-1===a.indexOf("$")?a:a.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(c.id)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,h(c.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,function(a,c,f){if(null==b.number)throw Error("Segment number not defined in a $Number$ scheme");
return h(b.number)(a,c,f)}).replace(/\$Time(|\%0(\d+)d)\$/g,function(a,c,f){if(null==b.time)throw Error("Segment time not defined in a $Time$ scheme");return h(b.time)(a,c,f)})};b.isMP4EmbeddedTrack=function(a){return"application/mp4"===a.mimeType};b.byteRange=function(a){var f=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +f+"-"+ +a:"bytes="+ +f+"-"}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=0;b.default=function(){var a=0;l<Number.MAX_VALUE&&(a=l+1);l=a;return""+a}},function(e,
b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(35),h=a(30);b.default={getInitSegment:h.getInitSegment,setTimescale:h.setTimescale,scale:h.scale,getSegments:function(a,b,c,d){d=h.normalizeRange(b,c,d);c=d.up;d=d.to;var g=b.timeline,f=b.timescale,k=b.media;b=b.startNumber;b=null!=b?b:void 0;for(var e=[],q=g.length,t=g.length&&g[0].d||0,r=0;r<q;r++){var u=g[r],v=u.d,w=u.ts,x=u.range;t=Math.max(t,v);if(0>v){if(w+t<d){var y=new l.default({id:""+a+"_"+w,time:w,init:!1,range:x,duration:void 0,
indexRange:null,timescale:f,media:k,number:null!=b?b:void 0});e.push(y)}break}u=h.calculateRepeat(u,g[r+1]);var z=c-w;z=0<z?Math.floor(z/v):0;for(y=w+z*v;y<d&&z<=u;)y=new l.default({id:""+a+"_"+y,time:y,init:!1,range:x,duration:v,indexRange:null,timescale:f,media:k,number:null!=b?b+z:void 0}),e.push(y),z++,y=w+z*v;if(y>=d)break;null!=b&&(b+=u+1)}return e},shouldRefresh:function(a,b,c,d){b=a.timeline;c=a.presentationTimeOffset;a=d*a.timescale-(void 0===c?0:c);d=b[b.length-1];if(!d)return!1;0>d.d&&
(d={ts:d.ts,d:0,r:d.r});return!(a<=h.getTimelineRangeEnd(d))},getFirstPosition:function(a){if(a.timeline.length)return a.timeline[0].ts/a.timescale},getLastPosition:function(a){if(a.timeline.length)return h.getTimelineRangeEnd(a.timeline[a.timeline.length-1])/a.timescale},checkDiscontinuity:function(a,b){var c=a.timeline,d=a.timescale;d=void 0===d?1:d;b*=d;if(0>=b)return-1;a=a.timeline;var g=0;for(var f=a.length;g<f;){var k=g+f>>>1;a[k].ts<b?g=k+1:f=k}g=0<g?g-1:g;if(0>g||g>=c.length-1)return-1;f=
c[g];if(-1===f.d)return-1;a=f.ts;f=h.getTimelineRangeEnd(f);c=c[g+1];return f!==c.ts&&b>=a&&b<=f&&f-b<d?c.ts/d:-1},_addSegmentInfos:function(a,b,c){var d=a.timeline,g=a.timescale,f=d.length,k=d[f-1];b=b.timescale===g?{time:b.time,duration:b.duration}:{time:b.time/b.timescale*g,duration:b.duration/b.timescale*g};var e;c&&(e=c.timescale===g?c.time:c.time/c.timescale*g);if(null!=e&&b.time===e){c=b.time+b.duration;g=c-(k.ts+k.d*k.r);if(0>=g)return!1;-1===k.d&&((f=d[f-2])&&f.d===g?(f.r++,d.pop()):k.d=
g);a.timeline.push({d:-1,ts:c,r:0});return!0}return b.time>=h.getTimelineRangeEnd(k)?(k.d===b.duration?k.r++:a.timeline.push({d:b.duration,ts:b.time,r:0}),!0):!1}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0);b.default=function(a,f){try{return a(f)}catch(k){return l.Observable.throw(k)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(18);a=a(281);e=new a.PersistedSessionsSet({load:function(){return[]},save:e.default});b.$storedSessions=e;a=new a.InMemorySessionsSet;
b.$loadedSessions=a},function(e,b,a){function l(a){if(!a.isLive)return[0,a.getDuration()];var f=a.availabilityStartTime||0,b=a.presentationLiveGap||0;a=a.timeShiftBufferDepth||0;f=Date.now()/1E3-f-b;return[Math.min(f,f-a+5),f]}Object.defineProperty(b,"__esModule",{value:!0});b.toWallClockTime=function(a,f){return new Date(1E3*(a+(f.availabilityStartTime||0)))};b.fromWallClockTime=function(a,f){if(f.isLive){var b=f.suggestedPresentationDelay||0;var c=f.presentationLiveGap||0,d=f.timeShiftBufferDepth||
0;a="number"===typeof a?a:+a;var g=Date.now();b=Math.max(Math.min(a,g-1E3*(c+b)),g-1E3*d)}else b=+a;return b/1E3-(f.availabilityStartTime||0)};b.getMinimumBufferPosition=function(a){return l(a)[0]};b.getMaximumBufferPosition=function(a){if(!a.isLive)return a.getDuration();var b=a.availabilityStartTime||0;a=a.presentationLiveGap||0;return Date.now()/1E3-b-a};b.getBufferLimits=l},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,
c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(c,d){function g(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(2),f=a(10);e=a(32);var k=a(53),c=a(97);a=function(a){function d(d){var g=a.call(this)||this;g.codec=d;g.updating=!1;g.readyState="opened";g.buffered=new c.default;return g}l(d,a);d.prototype.appendBuffer=function(a){var c=this;this._lock(function(){return c._append(a)})};
d.prototype.remove=function(a,c){var d=this;this._lock(function(){return d._remove(a,c)})};d.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};d.prototype._lock=function(a){var c=this;h.default(!this.updating,"updating");this.updating=!0;this.trigger("updatestart");k.default(function(){return f.default(a())}).subscribe(function(){return setTimeout(function(){c._unlock("update")},0)},function(a){return setTimeout(function(){c._unlock("error",
a)},0)})};d.prototype._unlock=function(a,c){this.updating=!1;this.trigger(a,c);this.trigger("updateend")};return d}(e.default);b.AbstractSourceBuffer=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){function f(a){var c=[];a.tagName.toLowerCase()===b.toLowerCase()&&c.push(a);a=a.parentNode;a instanceof Element&&c.push.apply(c,f(a));return c}return a.parentNode instanceof Element?f(a.parentNode):[]}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});
var l=a(17),h=a(9),f=a(301);b.getStylingAttributes=function(a,c,d,g){var b={},f=a.slice();a=function(a){var k=c[a];if(k){for(var n,e,p=0;p<=k.attributes.length-1;p++){a=k.attributes[p];var m=a.name;if("style"===m)n=a.value;else if("region"===m)e=a.value;else if(m=m.substr(4),h.default(f,m)&&(b[m]=a.value,f.splice(p,1),!f.length))return{value:b}}if(n&&(k=l(d,function(a){return a.id===n})))for(p=0;p<=f.length-1;p++)if(a=f[p],!b[a]&&k.style[a]){b[a]=k.style[a];f.splice(p,1);if(!f.length)return{value:b};
p--}if(e&&(k=l(g,function(a){return a.id===e})))for(p=0;p<=f.length-1;p++)if(a=f[p],!b[a]&&k.style[a]){b[a]=k.style[a];f.splice(p,1);if(!f.length)return{value:b};p--}}};for(var k=0;k<=c.length-1;k++){var e=a(k);if("object"===typeof e)return e.value}return b};b.getStylingFromElement=function(a){for(var c={},d=0;d<=a.attributes.length-1;d++){var g=a.attributes[d];if(f.default(g.name,"tts")){var b=g.name.substr(4);c[b]=g.value}}return c}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});
b.REGXP_TIME_COLON_FRAMES=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/;b.REGXP_TIME_COLON=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/;b.REGXP_TIME_COLON_MS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/;b.REGXP_TIME_FRAMES=/^(\d*\.?\d*)f$/;b.REGXP_TIME_TICK=/^(\d*\.?\d*)t$/;b.REGXP_TIME_HMS=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/;b.REGXP_PERCENT_VALUES=/^(\d{1,2}|100)% (\d{1,2}|100)%$/;b.REGXP_8_HEX_COLOR=/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/;b.REGXP_4_HEX_COLOR=
/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(e,b,a){b.isObject=function(a){return null!=a&&"object"===typeof a}},function(e,b,a){b.empty={closed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},function(e,b,a){b.isArrayLike=function(a){return a&&"number"===typeof a.length}},function(e,b,a){b.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(e,b,a){e=a(118);b.from=e.FromObservable.create},function(e,b,a){function l(a){var c=
a.value;a=a.subscriber;a.closed||(a.next(c),a.complete())}function h(a){var c=a.err;a=a.subscriber;a.closed||a.error(c)}var f=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},k=a(11);e=function(a){function c(c,d){a.call(this);this.promise=c;this.scheduler=d}f(c,a);c.create=function(a,d){return new c(a,d)};c.prototype._subscribe=function(a){var c=this,d=this.promise,
g=this.scheduler;if(null==g)this._isScalar?a.closed||(a.next(this.value),a.complete()):d.then(function(d){c.value=d;c._isScalar=!0;a.closed||(a.next(d),a.complete())},function(c){a.closed||a.error(c)}).then(null,function(a){k.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.closed)return g.schedule(l,0,{value:this.value,subscriber:a})}else d.then(function(d){c.value=d;c._isScalar=!0;a.closed||a.add(g.schedule(l,0,{value:d,subscriber:a}))},function(c){a.closed||a.add(g.schedule(h,
0,{err:c,subscriber:a}))}).then(null,function(a){k.root.setTimeout(function(){throw a;})})};return c}(a(0).Observable);b.PromiseObservable=e},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(3);var h=a(121);b.observeOn=function(a,c){void 0===c&&(c=0);return function(d){return d.lift(new f(a,c))}};var f=function(){function a(a,c){void 0===
c&&(c=0);this.scheduler=a;this.delay=c}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.scheduler,this.delay))};return a}();b.ObserveOnOperator=f;var k=function(a){function d(c,d,b){void 0===b&&(b=0);a.call(this,c);this.scheduler=d;this.delay=b}l(d,a);d.dispatch=function(a){a.notification.observe(a.destination);this.unsubscribe()};d.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(d.dispatch,this.delay,new c(a,this.destination)))};d.prototype._next=function(a){this.scheduleMessage(h.Notification.createNext(a))};
d.prototype._error=function(a){this.scheduleMessage(h.Notification.createError(a))};d.prototype._complete=function(){this.scheduleMessage(h.Notification.createComplete())};return d}(e.Subscriber);b.ObserveOnSubscriber=k;var c=function(){return function(a,c){this.notification=a;this.destination=c}}();b.ObserveOnMessage=c},function(e,b,a){e=a(0);a=a(125);e.Observable.fromPromise=a.fromPromise},function(e,b,a){var l=a(24);b.isNumeric=function(a){return!l.isArray(a)&&0<=a-parseFloat(a)+1}},function(e,
b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},h=a(11);e=function(a){function b(c,d){a.call(this,c,d);this.scheduler=c;this.work=d;this.pending=!1}l(b,a);b.prototype.schedule=function(a,d){void 0===d&&(d=0);if(this.closed)return this;this.state=a;this.pending=!0;a=this.id;var c=this.scheduler;null!=a&&(this.id=this.recycleAsyncId(c,a,d));this.delay=
d;this.id=this.id||this.requestAsyncId(c,this.id,d);return this};b.prototype.requestAsyncId=function(a,d,b){void 0===b&&(b=0);return h.root.setInterval(a.flush.bind(a,this),b)};b.prototype.recycleAsyncId=function(a,d,b){void 0===b&&(b=0);return null!==b&&this.delay===b&&!1===this.pending?d:(h.root.clearInterval(d),void 0)};b.prototype.execute=function(a,d){if(this.closed)return Error("executing a cancelled action");this.pending=!1;if(a=this._execute(a,d))return a;!1===this.pending&&null!=this.id&&
(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};b.prototype._execute=function(a,d){d=!1;var c=void 0;try{this.work(a)}catch(n){d=!0,c=!!n&&n||Error(n)}if(d)return this.unsubscribe(),c};b.prototype._unsubscribe=function(){var a=this.id,d=this.scheduler,b=d.actions,f=b.indexOf(this);this.state=this.work=null;this.pending=!1;this.scheduler=null;-1!==f&&b.splice(f,1);null!=a&&(this.id=this.recycleAsyncId(d,a,null));this.delay=null};return b}(a(129).Action);b.AsyncAction=e},function(e,b,a){var l=
this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}l(b,a);b.prototype.flush=function(a){var c=this.actions;if(this.active)c.push(a);else{var d;this.active=!0;do if(d=a.execute(a.state,a.delay))break;while(a=c.shift());this.active=!1;if(d){for(;a=c.shift();)a.unsubscribe();
throw d;}}};return b}(a(130).Scheduler);b.AsyncScheduler=e},function(e,b,a){var l=a(72);e=a(72);b.mergeStatic=e.mergeStatic;b.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return l.merge.apply(void 0,a)(this)}},function(e,b,a){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=Number.POSITIVE_INFINITY;var n=null,e=a[a.length-1];c.isScheduler(e)?(n=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(b=a.pop())):"number"===typeof e&&(b=a.pop());
return null===n&&1===a.length&&a[0]instanceof h.Observable?a[0]:k.mergeAll(b)(new f.ArrayObservable(a,n))}var h=a(0),f=a(20),k=a(73),c=a(19);b.merge=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return function(c){return c.lift.call(l.apply(void 0,[c].concat(a)))}};b.mergeStatic=l},function(e,b,a){var l=a(43),h=a(133);b.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return l.mergeMap(h.identity,null,a)}},function(e,b,a){e=a(20);b.of=e.ArrayObservable.of},function(e,
b,a){b.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(e,b,a){var l=a(19),h=a(74),f=a(64),k=a(77);b.concat=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return 1===a.length||2===a.length&&l.isScheduler(a[1])?f.from(a[0]):k.concatAll()(h.of.apply(void 0,a))}},function(e,b,a){var l=a(73);b.concatAll=function(){return l.mergeAll(1)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c){a.call(this);this.subject=b;this.subscriber=c;this.closed=!1}l(b,a);b.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,c=a.observers;this.subject=null;!c||0===c.length||a.isStopped||a.closed||(a=c.indexOf(this.subscriber),-1!==a&&c.splice(a,1))}};return b}(a(12).Subscription);b.SubjectSubscription=e},function(e,b,a){var l=this&&this.__extends||function(a,
c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(3);b.refCount=function(){return function(a){return a.lift(new h(a))}};var h=function(){function a(a){this.connectable=a}a.prototype.call=function(a,d){var c=this.connectable;c._refCount++;a=new f(a,c);d=d.subscribe(a);a.closed||(a.connection=c.connect());return d};return a}(),f=function(a){function c(c,b){a.call(this,c);this.connectable=b}l(c,
a);c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._refCount;0>=c?this.connection=null:(a._refCount=c-1,1<c?this.connection=null:(c=this.connection,a=a._connection,this.connection=null,!a||c&&a!==c||a.unsubscribe()))}else this.connection=null};return c}(e.Subscriber)},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=
b.prototype,new f)};e=function(a){function b(){var b=a.call(this,"Timeout has occurred");this.name=b.name="TimeoutError";this.stack=b.stack;this.message=b.message}l(b,a);return b}(Error);b.TimeoutError=e},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(6);var h=a(45);a=function(a){function b(c){a.call(this);this._value=c}l(b,a);Object.defineProperty(b.prototype,
"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});b.prototype._subscribe=function(c){var d=a.prototype._subscribe.call(this,c);d&&!d.closed&&c.next(this._value);return d};b.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new h.ObjectUnsubscribedError;return this._value};b.prototype.next=function(c){a.prototype.next.call(this,this._value=c)};return b}(e.Subject);b.BehaviorSubject=a},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});e=function(){function a(a,b,k){this._keyType=a;this._mediaKeys=b;this._configuration=k}Object.defineProperty(a.prototype,"keySystem",{get:function(){return this._keyType},enumerable:!0,configurable:!0});a.prototype.createMediaKeys=function(){var a=this;return new Promise(function(b){return b(a._mediaKeys)})};a.prototype.getConfiguration=function(){return this._configuration};return a}();b.default=e},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(c,d){function b(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);e=a(32);var f=a(28),k=a(10),c=a(48),d=a(16),g=a(82),n;b.requestMediaKeySystemAccess=n;var p=function(a){return function(c,d){var b=this;return new Promise(function(f,g){try{a.call(b,c,d),f()}catch(A){g(A)}})}},
m=function(a){function c(c,b){var g=a.call(this)||this;g.sessionId="";g._vid=c;g._key=b;g._con=h.Observable.merge(d.onKeyMessage$(c),d.onKeyAdded$(c),d.onKeyError$(c)).subscribe(function(a){return g.trigger(a.type,a)});g.update=p(function(a,c){if(0<=g._key.indexOf("clearkey")){var d=JSON.parse(f.bytesToStr(a));a=f.strToBytes(atob(d.keys[0].k));d=f.strToBytes(atob(d.keys[0].kid));g._vid.webkitAddKey(g._key,a,d,c)}else g._vid.webkitAddKey(g._key,a,null,c);g.sessionId=c});return g}l(c,a);c.prototype.generateRequest=
function(a,c){var d=this;return new Promise(function(a){if("function"!==typeof d._vid.webkitGenerateKeyRequest)throw Error("impossible to generate a key request");d._vid.webkitGenerateKeyRequest(d._key,c);a()})};c.prototype.close=function(){var a=this;return new Promise(function(c){a._con&&a._con.unsubscribe();c()})};return c}(e.default),q=function(a){function c(c){var d=a.call(this)||this;d.sessionId="";d._mk=c;d.update=p(function(a,c){if(!d._ss)throw Error("MediaKeySession not set");d._ss.update(a,
c);d.sessionId=c});return d}l(c,a);c.prototype.generateRequest=function(a,c){var b=this;return new Promise(function(a){b._ss=b._mk.memCreateSession("video/mp4",c);b._con=h.Observable.merge(d.onKeyMessage$(b._ss),d.onKeyAdded$(b._ss),d.onKeyError$(b._ss)).subscribe(function(a){return b.trigger(a.type,a)});a()})};c.prototype.close=function(){var a=this;return new Promise(function(c){a._ss&&(a._ss.close(),a._ss=void 0);a._con&&(a._con.unsubscribe(),a._con=void 0);c()})};return c}(e.default),t=function(){function a(){}
a.prototype._setVideo=function(){throw Error("MediaKeys is not implemented in your browser");};a.prototype.createSession=function(){throw Error("MediaKeys is not implemented in your browser");};a.prototype.setServerCertificate=function(){throw Error("MediaKeys is not implemented in your browser");};return a}();b.MockMediaKeys=t;if(navigator.requestMediaKeySystemAccess)b.requestMediaKeySystemAccess=n=function(a,c){return k.default(navigator.requestMediaKeySystemAccess(a,c))};else if(HTMLVideoElement.prototype.webkitGenerateKeyRequest){b.MockMediaKeys=
t=function(){function a(a){this.ks_=a}a.prototype._setVideo=function(a){this._vid=a};a.prototype.createSession=function(){if(!this._vid)throw Error("Video not attached to the MediaKeys");return new m(this._vid,this.ks_)};a.prototype.setServerCertificate=function(){throw Error("Server certificate is not implemented in your browser");};return a}();var r=function(a){var c=document.querySelector("video")||document.createElement("video");return c&&c.canPlayType?!!c.canPlayType("video/mp4",a):!1};b.requestMediaKeySystemAccess=
n=function(a,c){if(!r(a))return h.Observable.throw(void 0);for(var d=0;d<c.length;d++){var b=c[d],f=b.videoCapabilities,k=b.audioCapabilities,n=b.initDataTypes,e=b.sessionTypes,p=b.distinctiveIdentifier;b=b.persistentState;var m=!0;if(m=(m=(m=(m=m&&(!n||!!n.filter(function(a){return"cenc"===a})[0]))&&(!e||e.filter(function(a){return"temporary"===a}).length===e.length))&&"required"!==p)&&"required"!==b)return c={videoCapabilities:f,audioCapabilities:k,initDataTypes:["cenc"],sessionTypes:["temporary"],
distinctiveIdentifier:"not-allowed",persistentState:"not-allowed"},h.Observable.of(new g.default(a,new t(a),c))}return h.Observable.throw(void 0)}}else c.MediaKeys_?(c.MediaKeys_.prototype||(c.MediaKeys_.prototype={}),c.MediaKeys_.prototype.alwaysRenew=!0,c.MediaKeys_.prototype.memCreateSession=c.MediaKeys_.prototype.createSession,c.MediaKeys_.prototype.createSession=function(){return new q(this)},b.requestMediaKeySystemAccess=n=function(a,d){if(!c.MediaKeys_.isTypeSupported(a))return h.Observable.throw(void 0);
for(var b=0;b<d.length;b++){var f=d[b],k=f.videoCapabilities,n=f.audioCapabilities,e=f.initDataTypes;f=f.distinctiveIdentifier;var p=!0;if(p=(p=p&&(!e||!!e.filter(function(a){return"cenc"===a})[0]))&&"required"!==f)return d={videoCapabilities:k,audioCapabilities:n,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},h.Observable.of(new g.default(a,new MediaKeys(a),d))}return h.Observable.throw(void 0)}):b.requestMediaKeySystemAccess=
n=function(){throw Error("requestMediaKeySystemAccess is not implemented in your browser.");}},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(c,d){function b(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(22),f=
a(27);e=function(a){function c(d,b,k){var g=a.call(this)||this;Object.setPrototypeOf(g,c.prototype);g.name="EncryptedMediaError";g.type=h.ErrorTypes.ENCRYPTED_MEDIA_ERROR;g.reason=b;g.code=h.ErrorCodes[d];g.fatal=!!k;g.message=f.default(g.name,g.code,g.reason);return g}l(c,a);return c}(Error);b.default=e},function(e,b,a){function l(a){for(var b="",k=0;k<a.length;k+=16E3){var c=a.subarray(k,k+16E3);b+=String.fromCharCode.apply(null,c)}return b}Object.defineProperty(b,"__esModule",{value:!0});b.stringFromCharCode=
l;b.stringFromUTF8=function(a){if(!a)return"";a=new Uint8Array(a);239===a[0]&&187===a[1]&&191===a[2]&&(a=a.subarray(3));a=l(a);a=escape(a);return decodeURIComponent(a)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(28);b.default=function(a){var b=0,k=a.length,c=l.bytesToStr(a.subarray(b,b+8));b+=8;var d=a[b];b+=1;var g=a[b];b+=1;var n=a[b];b+=1;var e=a[b];b+=1;d=[d,g,n,e].join(".");g=a[b]+l.le4toi(a,b+1);b+=4;n=l.le4toi(a,b);b+=4;e=l.bytesToStr(a.subarray(b,b+4));b+=4;
var h=l.le2toi(a,b);b+=2;var q=l.le2toi(a,b);b+=2;var t=[a[b],a[b+1]].join(":"),r=1===a[b+2];b=64;var u=[],v=0;if(!g)throw Error("bif: no images to parse");for(;b<k;){var w=l.le4toi(a,b);b+=4;var x=l.le4toi(a,b);b+=4;if(B){var y=B.index,z=n,A=v;var B=a.subarray(B.offset,x);u.push({index:y,duration:z,ts:A,data:B});v+=n}if(4294967295===w)break;B={index:w,offset:x}}return{fileFormat:c,version:d,imageCount:g,timescale:n,format:e,width:h,height:q,aspectRatio:t,isVod:r,thumbs:u}}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var l=/\.(isml?)(\?token=\S+)?$/,h=/\?token=(\S+)/;b.byteRange=function(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+ +b+"-"};b.extractISML=function(a){return a.getElementsByTagName("media")[0].getAttribute("src")};b.extractToken=function(a){return(a=a.match(h))&&a[1]||""};b.replaceToken=function(a,b){return b?a.replace(h,"?token="+b):a.replace(h,"")};b.resolveManifest=function(a){var b=a.match(l);return b?a.replace(b[1],b[1]+"/manifest"):a};b.buildSegmentURL=
function(a,b,c){return a.replace(/\{bitrate\}/g,String(b.bitrate)).replace(/\{start time\}/g,String(c.time))}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(2);var l=a(33);b.default=function(a,b,k,c){k=k||[];var d,g;var f=l.parseTfdt(b);var e=l.getDurationFromTrun(b);c=c&&c.timescale?c.timescale:a.timescale;if(c===a.timescale){b=Math.min(.9*c,null!=a.duration?a.duration/4:.25);var h=a.time;a=a.duration}else b=Math.min(.9*c,null!=a.duration?a.duration/a.timescale*c/4:.25),h=(a.time||
0)/a.timescale*c,a=null!=a.duration?a.duration/a.timescale*c:void 0;0<=f&&(null==h||Math.abs(f-h)<=b)&&(d=f);0<=e&&(null==a||Math.abs(e-a)<=b)&&(g=e);null==d&&(1===k.length?(d=k[0].time,0<=d&&(null==h||Math.abs(h-d)<=b)?(f=k[0].timescale,d=null!=f&&f!==c?d/f*c:d):d=h):d=h);null==g&&(1===k.length?(g=k[0].duration,0<=g&&(null==a||Math.abs(a-g)<=b)?(f=k[0].timescale,g=null!=f&&f!==c?g/f*c:g):g=a):g=a);return{timescale:c,time:d||0,duration:g||0}}},function(e,b,a){function l(a){if("timeline"===a.indexType){var c=
a.timeline[a.timeline.length-1],d=c.d;return(c.ts+(c.r+1)*(d?d:0))/a.timescale-Math.min(Math.max(d?d:0/a.timescale,5),10)}}Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),f=a(2),k=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,c=/([0-9]+)-([0-9]+)/,d=/([0-9]+)(\/([0-9]+))?/,g=["audio","video","text","image"];b.parseString=function(a){return a};b.parseBoolean=function(a){return"true"===a};b.parseIntOrBoolean=function(a){return"true"===a?!0:"false"===a?!1:
parseInt(a,10)};b.parseDateTime=function(a){return new Date(Date.parse(a))};b.parseDuration=function(a){if(!a)return 0;var c=k.exec(a);f.default(c,a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(c[2]||"0")+2592E3*parseFloat(c[4]||"0")+86400*parseFloat(c[6]||"0")+3600*parseFloat(c[8]||"0")+60*parseFloat(c[10]||"0")+parseFloat(c[12]||"0")};b.parseFrameRate=function(a){var c=d.exec(a);if(!c)return-1;a=parseInt(c[1],10)||0;c=parseInt(c[2],10)||0;return 0<c?a/c:a};b.parseRatio=function(a){return a};
b.parseByteRange=function(a){return(a=c.exec(a))?[+a[1],+a[2]]:null};b.reduceChildren=function(a,c,d){for(a=a.firstElementChild;a;)d=c(d,a.nodeName,a),a=a.nextElementSibling;return d};b.isVisuallyImpaired=function(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&1===a.value:!1};b.inferAdaptationType=function(a){var c=a.mimeType,d=c?c.split("/")[0]:"";if(h.default(g,d))return d;if("application/bif"===c)return"image";if("application/ttml+xml"===c)return"text";if("application/mp4"===
c)return(a=a.role)&&"urn:mpeg:dash:role:2011"===a.schemeIdUri&&"subtitle"===a.value?"text":"metadata";a=a.representations;return a.length&&(a=(a[0].mimeType||"").split("/")[0],h.default(g,a))?a:"unknown"};b.isHardOfHearing=function(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&2===a.value:!1};b.getLastLiveTimeReference=function(a){if(a){var c=a.representations||[],d=c.filter(function(a){return a&&a.index});if(!c.length&&a.index)return l(a.index);var b=d.map(function(a){return a.index?
l(a.index):void 0});if(!b.some(function(a){return null==a})&&(b=Math.min.apply(Math,b),!isNaN(b))){if(c.length===d.length)return b;if(a.index&&(a=l(a.index)))return Math.min(b,a)}}}},function(e,b,a){function l(a,c){var d=0;return function(){d&&clearTimeout(d);d=window.setTimeout(a,c)}}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(91);b.retryWithBackoff=function(a,c){var d=c.retryDelay,b=c.totalRetry,k=c.shouldRetry,e=c.resetDelay,m=c.errorSelector,q=c.onRetry,t=0,r;null!=e&&0<e&&
(r=l(function(){t=0},e));return a.catch(function(a,c){if(k&&!k(a)||t++>=b){if(m)throw m(a,t);throw a;}q&&q(a,t);a=f.getBackedoffDelay(d,t);return h.Observable.timer(a).mergeMap(function(){r&&r();return c})})};b.retryableFuncWithBackoff=function(a,c){var d=c.retryDelay,b=c.totalRetry,k=c.shouldRetry,e=c.resetDelay,m=c.errorSelector,q=c.onRetry,t=0,r;null!=e&&0<e&&(r=l(function(){t=0},e));return function v(){for(var c=[],g=0;g<arguments.length;g++)c[g]=arguments[g];return a.apply(void 0,c).catch(function(a){if(k&&
!k(a)||t++>=b){if(m)throw m(a,t);throw a;}q&&q(a,t);a=f.getBackedoffDelay(d,t);return h.Observable.timer(a).mergeMap(function(){r&&r();return v.apply(void 0,c)})})}}},function(e,b,a){function l(a){return a*(.3*(2*Math.random()-1)+1)}Object.defineProperty(b,"__esModule",{value:!0});b.getFuzzedDelay=l;b.getBackedoffDelay=function(a,b){void 0===b&&(b=1);return l(a*Math.pow(2,b-1))}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(a){this._alpha=Math.exp(Math.log(.5)/
a);this._totalWeight=this._lastEstimate=0}a.prototype.addSample=function(a,b){var f=Math.pow(this._alpha,a);b=b*(1-f)+f*this._lastEstimate;isNaN(b)||(this._lastEstimate=b,this._totalWeight+=a)};a.prototype.getEstimate=function(){return this._lastEstimate/(1-Math.pow(this._alpha,this._totalWeight))};return a}();b.default=e},function(e,b,a){e.exports=function(a,b,f){if("function"===typeof Array.prototype.findIndex)return a.findIndex(b,f);if("function"!==typeof b)throw new TypeError("predicate must be a function");
a=Object(a);var k=a.length;if(0===k)return-1;for(var c=0;c<k;c++)if(b.call(f,a[c],c,a))return c;return-1}},function(e,b,a){function l(a,c,d,b){var g=c.keySystem,e=c.keySystemAccess;if(g.persistentLicense)if(g.licenseStorage)n.$storedSessions.setStorage(g.licenseStorage);else throw new r.EncryptedMediaError("INVALID_KEY_SYSTEM",Error("no license storage found for persistent license."),!0);k.default.info("eme: encrypted event",a);return f.default(e.createMediaKeys()).mergeMap(function(c){var f=g.serverCertificate;
f=f&&"function"===typeof c.setServerCertificate?m.trySettingServerCertificate(c,f,b):h.Observable.empty();var k=e.getConfiguration(),n=t.default(c,k,d,g,u);if(a.initData){var p=new Uint8Array(a.initData);c=q.default(c,k,g,a.initDataType,p,b);return f.concat(h.Observable.merge(n,c))}throw new r.EncryptedMediaError("INVALID_ENCRYPTED_EVENT",Error("no init data found on media encrypted event."),!0);})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);a(2);var f=a(10),k=a(1),c=a(18),d=a(5),
g=a(16),n=a(54),p=a(284),m=a(285),q=a(286),t=a(288),r=a(8),u={$mediaKeys:null,$mediaKeySystemConfiguration:null,$keySystem:null,$videoElement:null};b.createEME=function(a,c,d){return h.Observable.combineLatest(g.onEncrypted$(a),p.default(c,u)).take(1).mergeMap(function(c){return l(c[0],c[1],a,d)})};b.dispose=function(){t.disposeMediaKeys(u.$videoElement).subscribe(c.default);u.$mediaKeys=null;u.$keySystem=null;u.$videoElement=null;u.$mediaKeySystemConfiguration=null;n.$loadedSessions.dispose()};b.clearEME=
function(){return h.Observable.defer(function(){return u.$videoElement&&d.shouldUnsetMediaKeys()?t.disposeMediaKeys(u.$videoElement).finally(function(){u.$videoElement=null}):h.Observable.empty()})};b.getCurrentKeySystem=function(){return p.getKeySystem(u)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(){this._entries=[]}a.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(a(this._entries[b]))return this._entries[b];return null};return a}();
b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){if("number"===typeof a)return a;for(var b=0,f,k=0;k<a.length;k++)f=a[k],b=(b<<5)-b+f,b&=b;return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(2);var l=a(15);e=function(){function a(){this._ranges=[];this.length=0}a.prototype.insert=function(a,b){l.insertInto(this._ranges,{start:a,end:b});this.length=this._ranges.length};a.prototype.remove=function(a,b){var c=[];0<a&&c.push({start:0,
end:a});Infinity>b&&c.push({start:b,end:Infinity});l.keepRangeIntersection(this._ranges,c);this.length=this._ranges.length};a.prototype.start=function(a){if(a>=this._ranges.length)throw Error("INDEX_SIZE_ERROR");return this._ranges[a].start};a.prototype.end=function(a){if(a>=this._ranges.length)throw Error("INDEX_SIZE_ERROR");return this._ranges[a].end};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.getAttribute("ttp:frameRate"),
f=a.getAttribute("ttp:subFramRate"),k=a.getAttribute("ttp:tickRate"),c=a.getAttribute("ttp:frameRateMultiplier"),d=a.getAttribute("xml:space");if(d&&"default"!==d&&"preserve"!==d)throw Error("Invalid spacing style");a=Number(b)||30;f=Number(f)||1;var g=Number(k)||0;k=g;var e=a,p=null!=f?f:1;d=d||"default";0===g&&(k=b?a*f:1);c&&(b=/^(\d+) (\d+)$/g.exec(c))&&(e=Number(b[1])/Number(b[2])*a);return{tickRate:k,frameRate:e,subFrameRate:p,spaceStyle:d}}},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});b.getBodyNode=function(a){return a.getElementsByTagName("body")[0]};b.getStyleNodes=function(a){return a.getElementsByTagName("style")};b.getRegionNodes=function(a){return a.getElementsByTagName("region")};b.getTextNodes=function(a){return a.getElementsByTagName("p")}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(304);b.default=function(a,b){var f=a.getAttribute("begin"),c=a.getAttribute("dur");a=a.getAttribute("end");f=f?l.default(f,b):null;c=c?l.default(c,
b):null;b=a?l.default(a,b):null;if(null==f||null==b&&null==c)throw Error("Invalid text cue");return{start:f,end:null==b?f+c:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.split(":");if(b[2]){a=parseInt(b[0],10);var f=parseInt(b[1],10);b=parseFloat(b[2].replace(",","."));return isNaN(a)||isNaN(f)||isNaN(b)?void 0:3600*a+60*f+b}}},function(e,b,a){e.exports=a(103).default},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(104);a(112);
a(115);a(117);a(122);a(67);a(126);a(131);a(134);a(137);a(138);a(141);a(144);a(147);a(150);a(152);a(155);a(158);a(161);a(164);a(167);a(170);a(173);a(176);a(179);a(180);a(182);a(185);a(188);a(191);a(194);a(197);a(200);a(203);a(206);a(209);a(212);a(216);a(219);a(1);e=a(222);b.default=e.default},function(e,b,a){e=a(0);a=a(109);e.Observable.combineLatest=a.combineLatest},function(e,b){b=function(){return this}();try{b=b||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(b=
window)}e.exports=b},function(e,b,a){var l=a(3),h=a(38),f=a(61);b.toSubscriber=function(a,c,d){if(a){if(a instanceof l.Subscriber)return a;if(a[h.rxSubscriber])return a[h.rxSubscriber]()}return a||c||d?new l.Subscriber(a,c,d):new l.Subscriber(f.empty)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b){a.call(this);
this.errors=b;b=Error.call(this,b?b.length+" errors occurred during unsubscription:\n  "+b.map(function(a,d){return d+1+") "+a.toString()}).join("\n  "):"");this.name=b.name="UnsubscriptionError";this.stack=b.stack;this.message=b.message}l(b,a);return b}(Error);b.UnsubscriptionError=e},function(e,b,a){function l(a){return a?1===a.length?a[0]:function(b){return a.reduce(function(a,d){return d(a)},b)}:h.noop}var h=a(40);b.pipe=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return l(a)};
b.pipeFromArray=l},function(e,b,a){var l=a(19),h=a(24),f=a(20),k=a(110);b.combineLatest=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var b=d=null;l.isScheduler(a[a.length-1])&&(b=a.pop());"function"===typeof a[a.length-1]&&(d=a.pop());1===a.length&&h.isArray(a[0])&&(a=a[0]);return(new f.ArrayObservable(a,b)).lift(new k.CombineLatestOperator(d))}},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&
(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},h=a(20),f=a(24);e=a(13);var k=a(14),c={};b.combineLatest=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&f.isArray(a[0])&&(a=a[0].slice());return function(c){return c.lift.call(new h.ArrayObservable([c].concat(a)),new d(b))}};var d=function(){function a(a){this.project=a}a.prototype.call=function(a,c){return c.subscribe(new g(a,
this.project))};return a}();b.CombineLatestOperator=d;var g=function(a){function d(c,d){a.call(this,c);this.project=d;this.active=0;this.values=[];this.observables=[]}l(d,a);d.prototype._next=function(a){this.values.push(c);this.observables.push(a)};d.prototype._complete=function(){var a=this.observables,c=a.length;if(0===c)this.destination.complete();else{this.toRespond=this.active=c;for(var d=0;d<c;d++){var b=a[d];this.add(k.subscribeToResult(this,b,b,d))}}};d.prototype.notifyComplete=function(a){0===
--this.active&&this.destination.complete()};d.prototype.notifyNext=function(a,d,b,g,f){a=this.values;g=a[b];g=this.toRespond?g===c?--this.toRespond:this.toRespond:0;a[b]=d;0===g&&(this.project?this._tryProject(a):this.destination.next(a.slice()))};d.prototype._tryProject=function(a){try{var c=this.project.apply(this,a)}catch(t){this.destination.error(t);return}this.destination.next(c)};return d}(e.OuterSubscriber);b.CombineLatestSubscriber=g},function(e,b,a){var l=this&&this.__extends||function(a,
b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c,d){a.call(this);this.parent=b;this.outerValue=c;this.outerIndex=d;this.index=0}l(b,a);b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};b.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};b.prototype._complete=function(){this.parent.notifyComplete(this);
this.unsubscribe()};return b}(a(3).Subscriber);b.InnerSubscriber=e},function(e,b,a){e=a(0);a=a(113);e.Observable.defer=a.defer},function(e,b,a){e=a(114);b.defer=e.DeferObservable.create},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(0);var h=a(14);a=a(13);e=function(a){function c(c){a.call(this);this.observableFactory=c}l(c,a);c.create=
function(a){return new c(a)};c.prototype._subscribe=function(a){return new f(a,this.observableFactory)};return c}(e.Observable);b.DeferObservable=e;var f=function(a){function c(c,b){a.call(this,c);this.factory=b;this.tryDefer()}l(c,a);c.prototype.tryDefer=function(){try{this._callFactory()}catch(d){this._error(d)}};c.prototype._callFactory=function(){var a=this.factory();a&&this.add(h.subscribeToResult(this,a))};return c}(a.OuterSubscriber)},function(e,b,a){e=a(0);a=a(116);e.Observable.empty=a.empty},
function(e,b,a){e=a(25);b.empty=e.EmptyObservable.create},function(e,b,a){e=a(0);a=a(64);e.Observable.from=a.from},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},h=a(24),f=a(62),k=a(63),c=a(65),d=a(119),g=a(20),n=a(120),p=a(42),m=a(0),q=a(66),t=a(39);e=function(a){function b(c,d){a.call(this,null);this.ish=c;this.scheduler=d}l(b,a);b.create=
function(a,e){if(null!=a){if("function"===typeof a[t.observable])return a instanceof m.Observable&&!e?a:new b(a,e);if(h.isArray(a))return new g.ArrayObservable(a,e);if(k.isPromise(a))return new c.PromiseObservable(a,e);if("function"===typeof a[p.iterator]||"string"===typeof a)return new d.IteratorObservable(a,e);if(f.isArrayLike(a))return new n.ArrayLikeObservable(a,e)}throw new TypeError((null!==a&&typeof a||a)+" is not observable");};b.prototype._subscribe=function(a){var c=this.ish,d=this.scheduler;
return null==d?c[t.observable]().subscribe(a):c[t.observable]().subscribe(new q.ObserveOnSubscriber(a,d,0))};return b}(m.Observable);b.FromObservable=e},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},h=a(11);e=a(0);var f=a(42);a=function(a){function d(d,b){a.call(this);this.scheduler=b;if(null==d)throw Error("iterator cannot be null.");if((b=
d[f.iterator])||"string"!==typeof d)if(b||void 0===d.length){if(!b)throw new TypeError("object is not iterable");d=d[f.iterator]()}else d=new c(d);else d=new k(d);this.iterator=d}l(d,a);d.create=function(a,c){return new d(a,c)};d.dispatch=function(a){var c=a.index,d=a.iterator,b=a.subscriber;if(a.hasError)b.error(a.error);else{var g=d.next();g.done?b.complete():(b.next(g.value),a.index=c+1,b.closed?"function"===typeof d.return&&d.return():this.schedule(a))}};d.prototype._subscribe=function(a){var c=
this.iterator,b=this.scheduler;if(b)return b.schedule(d.dispatch,0,{index:0,iterator:c,subscriber:a});do{b=c.next();if(b.done){a.complete();break}else a.next(b.value);if(a.closed){"function"===typeof c.return&&c.return();break}}while(1)};return d}(e.Observable);b.IteratorObservable=a;var k=function(){function a(a,c,d){void 0===c&&(c=0);void 0===d&&(d=a.length);this.str=a;this.idx=c;this.len=d}a.prototype[f.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,
value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),c=function(){function a(a,c,b){void 0===c&&(c=0);if(void 0===b)if(b=+a.length,isNaN(b))b=0;else if(0!==b&&"number"===typeof b&&h.root.isFinite(b)){var g=+b;g=0===g?g:isNaN(g)?g:0>g?-1:1;b=g*Math.floor(Math.abs(b));b=0>=b?0:b>d?d:b}this.arr=a;this.idx=c;this.len=b}a.prototype[f.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),
d=Math.pow(2,53)-1},function(e,b,a){var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(0);var h=a(41),f=a(25);a=function(a){function c(c,b){a.call(this);this.arrayLike=c;this.scheduler=b;b||1!==c.length||(this._isScalar=!0,this.value=c[0])}l(c,a);c.create=function(a,b){var d=a.length;return 0===d?new f.EmptyObservable:1===d?new h.ScalarObservable(a[0],b):
new c(a,b)};c.dispatch=function(a){var c=a.arrayLike,b=a.index,d=a.subscriber;d.closed||(b>=a.length?d.complete():(d.next(c[b]),a.index=b+1,this.schedule(a)))};c.prototype._subscribe=function(a){var b=this.arrayLike,d=this.scheduler,f=b.length;if(d)return d.schedule(c.dispatch,0,{arrayLike:b,index:0,length:f,subscriber:a});for(d=0;d<f&&!a.closed;d++)a.next(b[d]);a.complete()};return c}(e.Observable);b.ArrayLikeObservable=a},function(e,b,a){var l=a(0);e=function(){function a(a,b,c){this.kind=a;this.value=
b;this.error=c;this.hasValue="N"===a}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.error);case "C":return a.complete&&a.complete()}};a.prototype.do=function(a,b,c){switch(this.kind){case "N":return a&&a(this.value);case "E":return b&&b(this.error);case "C":return c&&c()}};a.prototype.accept=function(a,b,c){return a&&"function"===typeof a.next?this.observe(a):this.do(a,b,c)};a.prototype.toObservable=function(){switch(this.kind){case "N":return l.Observable.of(this.value);
case "E":return l.Observable.throw(this.error);case "C":return l.Observable.empty()}throw Error("unexpected notification kind value");};a.createNext=function(b){return"undefined"!==typeof b?new a("N",b):a.undefinedValueNotification};a.createError=function(b){return new a("E",void 0,b)};a.createComplete=function(){return a.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();b.Notification=e},function(e,b,a){e=a(0);a=a(123);e.Observable.fromEvent=
a.fromEvent},function(e,b,a){e=a(124);b.fromEvent=e.FromEventObservable.create},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(0);var h=a(37),f=a(36),k=a(31),c=a(12),d=Object.prototype.toString;a=function(a){function b(c,b,d,g){a.call(this);this.sourceObj=c;this.eventName=b;this.selector=d;this.options=g}l(b,a);b.create=function(a,c,
d,g){f.isFunction(d)&&(g=d,d=void 0);return new b(a,c,g,d)};b.setupSubscription=function(a,g,f,e,k){if(a&&"[object NodeList]"===d.call(a)||a&&"[object HTMLCollection]"===d.call(a))for(var h=0,n=a.length;h<n;h++)b.setupSubscription(a[h],g,f,e,k);else if(a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener){a.addEventListener(g,f,k);var m=function(){return a.removeEventListener(g,f)}}else if(a&&"function"===typeof a.on&&"function"===typeof a.off)a.on(g,f),m=function(){return a.off(g,
f)};else if(a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener)a.addListener(g,f),m=function(){return a.removeListener(g,f)};else throw new TypeError("Invalid event target");e.add(new c.Subscription(m))};b.prototype._subscribe=function(a){var c=this.selector;b.setupSubscription(this.sourceObj,this.eventName,c?function(){for(var b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];b=h.tryCatch(c).apply(void 0,b);b===k.errorObject?a.error(k.errorObject.e):a.next(b)}:function(c){return a.next(c)},
a,this.options)};return b}(e.Observable);b.FromEventObservable=a},function(e,b,a){e=a(65);b.fromPromise=e.PromiseObservable.create},function(e,b,a){e=a(0);a=a(127);e.Observable.interval=a.interval},function(e,b,a){e=a(128);b.interval=e.IntervalObservable.create},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},h=a(68);e=a(0);var f=a(21);a=
function(a){function c(c,b){void 0===c&&(c=0);void 0===b&&(b=f.async);a.call(this);this.period=c;this.scheduler=b;if(!h.isNumeric(c)||0>c)this.period=0;b&&"function"===typeof b.schedule||(this.scheduler=f.async)}l(c,a);c.create=function(a,b){void 0===a&&(a=0);void 0===b&&(b=f.async);return new c(a,b)};c.dispatch=function(a){var c=a.subscriber,b=a.period;c.next(a.index);c.closed||(a.index+=1,this.schedule(a,b))};c.prototype._subscribe=function(a){var b=this.period;a.add(this.scheduler.schedule(c.dispatch,
b,{index:0,subscriber:a,period:b}))};return c}(e.Observable);b.IntervalObservable=a},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c){a.call(this)}l(b,a);b.prototype.schedule=function(a,c){return this};return b}(a(12).Subscription);b.Action=e},function(e,b,a){e=function(){function a(b,f){void 0===f&&(f=a.now);
this.SchedulerAction=b;this.now=f}a.prototype.schedule=function(a,b,e){void 0===b&&(b=0);return(new this.SchedulerAction(this,a)).schedule(e,b)};a.now=Date.now?Date.now:function(){return+new Date};return a}();b.Scheduler=e},function(e,b,a){e=a(0);a=a(132);e.Observable.merge=a.merge},function(e,b,a){e=a(71);b.merge=e.mergeStatic},function(e,b,a){b.identity=function(a){return a}},function(e,b,a){e=a(0);a=a(135);e.Observable.never=a.never},function(e,b,a){e=a(136);b.never=e.NeverObservable.create},function(e,
b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(0);var h=a(40);a=function(a){function b(){a.call(this)}l(b,a);b.create=function(){return new b};b.prototype._subscribe=function(a){h.noop()};return b}(e.Observable);b.NeverObservable=a},function(e,b,a){e=a(0);a=a(74);e.Observable.of=a.of},function(e,b,a){e=a(0);a=a(139);e.Observable.throw=a._throw},
function(e,b,a){e=a(140);b._throw=e.ErrorObservable.create},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c){a.call(this);this.error=b;this.scheduler=c}l(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){a.subscriber.error(a.error)};b.prototype._subscribe=function(a){var c=this.error,d=this.scheduler;
a.syncErrorThrowable=!0;if(d)return d.schedule(b.dispatch,0,{error:c,subscriber:a});a.error(c)};return b}(a(0).Observable);b.ErrorObservable=e},function(e,b,a){e=a(0);a=a(142);e.Observable.timer=a.timer},function(e,b,a){e=a(143);b.timer=e.TimerObservable.create},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},h=a(68);e=a(0);var f=a(21),k=
a(19),c=a(75);a=function(a){function b(b,d,g){void 0===b&&(b=0);a.call(this);this.period=-1;this.dueTime=0;h.isNumeric(d)?this.period=1>Number(d)&&1||Number(d):k.isScheduler(d)&&(g=d);k.isScheduler(g)||(g=f.async);this.scheduler=g;this.dueTime=c.isDate(b)?+b-this.scheduler.now():b}l(b,a);b.create=function(a,c,d){void 0===a&&(a=0);return new b(a,c,d)};b.dispatch=function(a){var c=a.index,b=a.period,d=a.subscriber;d.next(c);if(!d.closed){if(-1===b)return d.complete();a.index=c+1;this.schedule(a,b)}};
b.prototype._subscribe=function(a){return this.scheduler.schedule(b.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return b}(e.Observable);b.TimerObservable=a},function(e,b,a){e=a(0);a=a(145);e.Observable.prototype.catch=a._catch;e.Observable.prototype._catch=a._catch},function(e,b,a){var l=a(146);b._catch=function(a){return l.catchError(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=
b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(13);var h=a(14);b.catchError=function(a){return function(c){var b=new f(a);c=c.lift(b);return b.caught=c}};var f=function(){function a(a){this.selector=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.selector,this.caught))};return a}(),k=function(a){function c(c,b,d){a.call(this,c);this.selector=b;this.caught=d}l(c,a);c.prototype.error=function(c){if(!this.isStopped){var b=void 0;try{b=this.selector(c,
this.caught)}catch(p){a.prototype.error.call(this,p);return}this._unsubscribeAndRecycle();this.add(h.subscribeToResult(this,b))}};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(148);e.Observable.prototype.concat=a.concat},function(e,b,a){var l=a(149);b.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return l.concat.apply(void 0,a)(this)}},function(e,b,a){var l=a(76);b.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(l.concat.apply(void 0,
[b].concat(a)))}}},function(e,b,a){e=a(0);a=a(151);e.Observable.prototype.concatAll=a.concatAll},function(e,b,a){var l=a(77);b.concatAll=function(){return l.concatAll()(this)}},function(e,b,a){e=a(0);a=a(153);e.Observable.prototype.concatMap=a.concatMap},function(e,b,a){var l=a(154);b.concatMap=function(a,b){return l.concatMap(a,b)(this)}},function(e,b,a){var l=a(43);b.concatMap=function(a,b){return l.mergeMap(a,b,1)}},function(e,b,a){e=a(0);a=a(156);e.Observable.prototype.debounceTime=a.debounceTime},
function(e,b,a){var l=a(21),h=a(157);b.debounceTime=function(a,b){void 0===b&&(b=l.async);return h.debounceTime(a,b)(this)}},function(e,b,a){function l(a){a.debouncedNext()}var h=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);var f=a(21);b.debounceTime=function(a,c){void 0===c&&(c=f.async);return function(b){return b.lift(new k(a,c))}};var k=function(){function a(a,
c){this.dueTime=a;this.scheduler=c}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.dueTime,this.scheduler))};return a}(),c=function(a){function c(c,b,d){a.call(this,c);this.dueTime=b;this.scheduler=d;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}h(c,a);c.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))};c.prototype._complete=function(){this.debouncedNext();
this.destination.complete()};c.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};c.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(159);e.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(e,b,a){var l=a(160);b.distinctUntilChanged=
function(a,b){return l.distinctUntilChanged(a,b)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);var h=a(37),f=a(31);b.distinctUntilChanged=function(a,c){return function(b){return b.lift(new k(a,c))}};var k=function(){function a(a,c){this.compare=a;this.keySelector=c}a.prototype.call=function(a,b){return b.subscribe(new c(a,
this.compare,this.keySelector))};return a}(),c=function(a){function c(c,b,d){a.call(this,c);this.keySelector=d;this.hasKey=!1;"function"===typeof b&&(this.compare=b)}l(c,a);c.prototype.compare=function(a,c){return a===c};c.prototype._next=function(a){var c=a;if(this.keySelector&&(c=h.tryCatch(this.keySelector)(a),c===f.errorObject))return this.destination.error(f.errorObject.e);var b=!1;if(this.hasKey){if(b=h.tryCatch(this.compare)(this.key,c),b===f.errorObject)return this.destination.error(f.errorObject.e)}else this.hasKey=
!0;!1===!!b&&(this.key=c,this.destination.next(a))};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(162);e.Observable.prototype.do=a._do;e.Observable.prototype._do=a._do},function(e,b,a){var l=a(163);b._do=function(a,b,e){return l.tap(a,b,e)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},h=a(3);b.tap=function(a,b,g){return function(c){return c.lift(new f(a,
b,g))}};var f=function(){function a(a,c,b){this.nextOrObserver=a;this.error=c;this.complete=b}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.nextOrObserver,this.error,this.complete))};return a}(),k=function(a){function c(c,b,d,f){a.call(this,c);c=new h.Subscriber(b,d,f);c.syncErrorThrowable=!0;this.add(c);this.safeSubscriber=c}l(c,a);c.prototype._next=function(a){var c=this.safeSubscriber;c.next(a);c.syncErrorThrown?this.destination.error(c.syncErrorValue):this.destination.next(a)};
c.prototype._error=function(a){var c=this.safeSubscriber;c.error(a);c.syncErrorThrown?this.destination.error(c.syncErrorValue):this.destination.error(a)};c.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return c}(h.Subscriber)},function(e,b,a){e=a(0);a=a(165);e.Observable.prototype.filter=a.filter},function(e,b,a){var l=a(166);b.filter=function(a,b){return l.filter(a,b)(this)}},function(e,
b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);b.filter=function(a,c){return function(b){return b.lift(new h(a,c))}};var h=function(){function a(a,b){this.predicate=a;this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.predicate,this.thisArg))};return a}(),f=function(a){function c(c,b,f){a.call(this,c);this.predicate=
b;this.thisArg=f;this.count=0}l(c,a);c.prototype._next=function(a){try{var c=this.predicate.call(this.thisArg,a,this.count++)}catch(n){this.destination.error(n);return}c&&this.destination.next(a)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(168);e.Observable.prototype.finally=a._finally;e.Observable.prototype._finally=a._finally},function(e,b,a){var l=a(169);b._finally=function(a){return l.finalize(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(3);var h=a(12);b.finalize=function(a){return function(c){return c.lift(new f(a))}};var f=function(){function a(a){this.callback=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.callback))};return a}(),k=function(a){function c(c,b){a.call(this,c);this.add(new h.Subscription(b))}l(c,a);return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(171);e.Observable.prototype.ignoreElements=
a.ignoreElements},function(e,b,a){var l=a(172);b.ignoreElements=function(){return l.ignoreElements()(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(3);var h=a(40);b.ignoreElements=function(){return function(a){return a.lift(new f)}};var f=function(){function a(){}a.prototype.call=function(a,c){return c.subscribe(new k(a))};return a}(),
k=function(a){function c(){a.apply(this,arguments)}l(c,a);c.prototype._next=function(a){h.noop()};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(174);e.Observable.prototype.map=a.map},function(e,b,a){var l=a(175);b.map=function(a,b){return l.map(a,b)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);b.map=function(a,c){return function(b){if("function"!==
typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return b.lift(new h(a,c))}};var h=function(){function a(a,b){this.project=a;this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.project,this.thisArg))};return a}();b.MapOperator=h;var f=function(a){function c(c,b,f){a.call(this,c);this.project=b;this.count=0;this.thisArg=f||this}l(c,a);c.prototype._next=function(a){try{var c=this.project.call(this.thisArg,a,this.count++)}catch(n){this.destination.error(n);
return}this.destination.next(c)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(177);e.Observable.prototype.mapTo=a.mapTo},function(e,b,a){var l=a(178);b.mapTo=function(a){return l.mapTo(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);b.mapTo=function(a){return function(c){return c.lift(new h(a))}};var h=function(){function a(a){this.value=
a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.value))};return a}(),f=function(a){function c(c,b){a.call(this,c);this.value=b}l(c,a);c.prototype._next=function(a){this.destination.next(this.value)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(71);e.Observable.prototype.merge=a.merge},function(e,b,a){e=a(0);a=a(181);e.Observable.prototype.mergeMap=a.mergeMap;e.Observable.prototype.flatMap=a.mergeMap},function(e,b,a){var l=a(43);b.mergeMap=function(a,b,e){void 0===e&&(e=Number.POSITIVE_INFINITY);
return l.mergeMap(a,b,e)(this)}},function(e,b,a){e=a(0);a=a(183);e.Observable.prototype.multicast=a.multicast},function(e,b,a){var l=a(44);b.multicast=function(a,b){return l.multicast(a,b)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(6);var h=a(0),f=a(3),k=a(12),c=a(79);a=function(a){function b(c,b){a.call(this);this.source=
c;this.subjectFactory=b;this._refCount=0;this._isComplete=!1}l(b,a);b.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};b.prototype.getSubject=function(){var a=this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};b.prototype.connect=function(){var a=this._connection;a||(this._isComplete=!1,a=this._connection=new k.Subscription,a.add(this.source.subscribe(new d(this.getSubject(),this))),a.closed?(this._connection=null,a=k.Subscription.EMPTY):
this._connection=a);return a};b.prototype.refCount=function(){return c.refCount()(this)};return b}(h.Observable);b.ConnectableObservable=a;a=a.prototype;b.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}};var d=function(a){function c(c,
b){a.call(this,c);this.connectable=b}l(c,a);c.prototype._error=function(c){this._unsubscribe();a.prototype._error.call(this,c)};c.prototype._complete=function(){this.connectable._isComplete=!0;this._unsubscribe();a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._connection;a._refCount=0;a._subject=null;a._connection=null;c&&c.unsubscribe()}};return c}(e.SubjectSubscriber);(function(){function a(a){this.connectable=a}a.prototype.call=
function(a,c){var b=this.connectable;b._refCount++;a=new g(a,b);c=c.subscribe(a);a.closed||(a.connection=b.connect());return c};return a})();var g=function(a){function c(c,b){a.call(this,c);this.connectable=b}l(c,a);c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._refCount;0>=c?this.connection=null:(a._refCount=c-1,1<c?this.connection=null:(c=this.connection,a=a._connection,this.connection=null,!a||c&&a!==c||a.unsubscribe()))}else this.connection=null};
return c}(f.Subscriber)},function(e,b,a){e=a(0);a=a(186);e.Observable.prototype.pairwise=a.pairwise},function(e,b,a){var l=a(187);b.pairwise=function(){return l.pairwise()(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);b.pairwise=function(){return function(a){return a.lift(new h)}};var h=function(){function a(){}a.prototype.call=
function(a,b){return b.subscribe(new f(a))};return a}(),f=function(a){function c(c){a.call(this,c);this.hasPrev=!1}l(c,a);c.prototype._next=function(a){this.hasPrev?this.destination.next([this.prev,a]):this.hasPrev=!0;this.prev=a};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(189);e.Observable.prototype.publish=a.publish},function(e,b,a){var l=a(190);b.publish=function(a){return l.publish(a)(this)}},function(e,b,a){var l=a(6),h=a(44);b.publish=function(a){return a?h.multicast(function(){return new l.Subject},
a):h.multicast(new l.Subject)}},function(e,b,a){e=a(0);a=a(192);e.Observable.prototype.scan=a.scan},function(e,b,a){var l=a(193);b.scan=function(a,b){return 2<=arguments.length?l.scan(a,b)(this):l.scan(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);b.scan=function(a,c){var b=!1;2<=arguments.length&&(b=!0);return function(d){return d.lift(new h(a,
c,b))}};var h=function(){function a(a,b,g){void 0===g&&(g=!1);this.accumulator=a;this.seed=b;this.hasSeed=g}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.accumulator,this.seed,this.hasSeed))};return a}(),f=function(a){function c(c,b,f,e){a.call(this,c);this.accumulator=b;this._seed=f;this.hasSeed=e;this.index=0}l(c,a);Object.defineProperty(c.prototype,"seed",{get:function(){return this._seed},set:function(a){this.hasSeed=!0;this._seed=a},enumerable:!0,configurable:!0});c.prototype._next=
function(a){if(this.hasSeed)return this._tryNext(a);this.seed=a;this.destination.next(a)};c.prototype._tryNext=function(a){var c=this.index++;try{var b=this.accumulator(this.seed,a,c)}catch(p){this.destination.error(p)}this.seed=b;this.destination.next(b)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(195);e.Observable.prototype.share=a.share},function(e,b,a){var l=a(196);b.share=function(){return l.share()(this)}},function(e,b,a){function l(){return new k.Subject}var h=a(44),f=a(79),k=a(6);
b.share=function(){return function(a){return f.refCount()(h.multicast(l)(a))}}},function(e,b,a){e=a(0);a=a(198);e.Observable.prototype.skip=a.skip},function(e,b,a){var l=a(199);b.skip=function(a){return l.skip(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);b.skip=function(a){return function(c){return c.lift(new h(a))}};
var h=function(){function a(a){this.total=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.total))};return a}(),f=function(a){function c(c,b){a.call(this,c);this.total=b;this.count=0}l(c,a);c.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(201);e.Observable.prototype.skipUntil=a.skipUntil},function(e,b,a){var l=a(202);b.skipUntil=function(a){return l.skipUntil(a)(this)}},function(e,b,a){var l=this&&
this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(13);var h=a(14);b.skipUntil=function(a){return function(c){return c.lift(new f(a))}};var f=function(){function a(a){this.notifier=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.notifier))};return a}(),k=function(a){function c(c,b){a.call(this,c);this.isInnerStopped=this.hasValue=!1;this.add(h.subscribeToResult(this,
b))}l(c,a);c.prototype._next=function(c){this.hasValue&&a.prototype._next.call(this,c)};c.prototype._complete=function(){this.isInnerStopped?a.prototype._complete.call(this):this.unsubscribe()};c.prototype.notifyNext=function(a,c,b,d,f){this.hasValue=!0};c.prototype.notifyComplete=function(){this.isInnerStopped=!0;this.isStopped&&a.prototype._complete.call(this)};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(204);e.Observable.prototype.startWith=a.startWith},function(e,b,a){var l=a(205);
b.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return l.startWith.apply(void 0,a)(this)}},function(e,b,a){var l=a(20),h=a(41),f=a(25),k=a(76),c=a(19);b.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var d=a[a.length-1];c.isScheduler(d)?a.pop():d=null;var g=a.length;return 1===g?k.concat(new h.ScalarObservable(a[0],d),b):1<g?k.concat(new l.ArrayObservable(a,d),b):k.concat(new f.EmptyObservable(d),b)}}},function(e,
b,a){e=a(0);a=a(207);e.Observable.prototype.switchMap=a.switchMap},function(e,b,a){var l=a(208);b.switchMap=function(a,b){return l.switchMap(a,b)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(13);var h=a(14);b.switchMap=function(a,b){return function(c){return c.lift(new f(a,b))}};var f=function(){function a(a,c){this.project=
a;this.resultSelector=c}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.project,this.resultSelector))};return a}(),k=function(a){function c(c,b,d){a.call(this,c);this.project=b;this.resultSelector=d;this.index=0}l(c,a);c.prototype._next=function(a){var c=this.index++;try{var b=this.project(a,c)}catch(m){this.destination.error(m);return}this._innerSub(b,a,c)};c.prototype._innerSub=function(a,c,b){var d=this.innerSubscription;d&&d.unsubscribe();this.add(this.innerSubscription=h.subscribeToResult(this,
a,c,b))};c.prototype._complete=function(){var c=this.innerSubscription;c&&!c.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,c,b,d,f){this.resultSelector?this._tryNotifyNext(a,c,b,d):this.destination.next(c)};c.prototype._tryNotifyNext=function(a,c,b,d){try{var f=this.resultSelector(a,
c,b,d)}catch(t){this.destination.error(t);return}this.destination.next(f)};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(210);e.Observable.prototype.switchMapTo=a.switchMapTo},function(e,b,a){var l=a(211);b.switchMapTo=function(a,b){return l.switchMapTo(a,b)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(13);var h=
a(14);b.switchMapTo=function(a,b){return function(c){return c.lift(new f(a,b))}};var f=function(){function a(a,c){this.observable=a;this.resultSelector=c}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.observable,this.resultSelector))};return a}(),k=function(a){function c(c,b,d){a.call(this,c);this.inner=b;this.resultSelector=d;this.index=0}l(c,a);c.prototype._next=function(a){var c=this.innerSubscription;c&&c.unsubscribe();this.add(this.innerSubscription=h.subscribeToResult(this,this.inner,
a,this.index++))};c.prototype._complete=function(){var c=this.innerSubscription;c&&!c.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,c,b,d,f){f=this.destination;this.resultSelector?this.tryResultSelector(a,c,b,d):f.next(c)};c.prototype.tryResultSelector=function(a,c,b,d){var f=
this.resultSelector,g=this.destination;try{var e=f(a,c,b,d)}catch(u){g.error(u);return}g.next(e)};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(213);e.Observable.prototype.take=a.take},function(e,b,a){var l=a(214);b.take=function(a){return l.take(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(3);var h=a(215),f=a(25);
b.take=function(a){return function(c){return 0===a?new f.EmptyObservable:c.lift(new k(a))}};var k=function(){function a(a){this.total=a;if(0>this.total)throw new h.ArgumentOutOfRangeError;}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.total))};return a}(),c=function(a){function c(c,b){a.call(this,c);this.total=b;this.count=0}l(c,a);c.prototype._next=function(a){var c=this.total,b=++this.count;b<=c&&(this.destination.next(a),b===c&&(this.destination.complete(),this.unsubscribe()))};
return c}(e.Subscriber)},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(){var b=a.call(this,"argument out of range");this.name=b.name="ArgumentOutOfRangeError";this.stack=b.stack;this.message=b.message}l(b,a);return b}(Error);b.ArgumentOutOfRangeError=e},function(e,b,a){e=a(0);a=a(217);e.Observable.prototype.takeUntil=
a.takeUntil},function(e,b,a){var l=a(218);b.takeUntil=function(a){return l.takeUntil(a)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(13);var h=a(14);b.takeUntil=function(a){return function(c){return c.lift(new f(a))}};var f=function(){function a(a){this.notifier=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.notifier))};
return a}(),k=function(a){function c(c,b){a.call(this,c);this.notifier=b;this.add(h.subscribeToResult(this,b))}l(c,a);c.prototype.notifyNext=function(a,c,b,d,f){this.complete()};c.prototype.notifyComplete=function(){};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(220);e.Observable.prototype.timeout=a.timeout},function(e,b,a){var l=a(21),h=a(221);b.timeout=function(a,b){void 0===b&&(b=l.async);return h.timeout(a,b)(this)}},function(e,b,a){var l=this&&this.__extends||function(a,c){function b(){this.constructor=
a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},h=a(21),f=a(75);e=a(3);var k=a(80);b.timeout=function(a,b){void 0===b&&(b=h.async);var d=f.isDate(a),g=d?+a-b.now():Math.abs(a);return function(a){return a.lift(new c(g,d,b,new k.TimeoutError))}};var c=function(){function a(a,c,b,d){this.waitFor=a;this.absoluteTimeout=c;this.scheduler=b;this.errorInstance=d}a.prototype.call=function(a,c){return c.subscribe(new d(a,this.absoluteTimeout,
this.waitFor,this.scheduler,this.errorInstance))};return a}(),d=function(a){function c(c,b,d,f,g){a.call(this,c);this.absoluteTimeout=b;this.waitFor=d;this.scheduler=f;this.errorInstance=g;this.action=null;this.scheduleTimeout()}l(c,a);c.dispatchTimeout=function(a){a.error(a.errorInstance)};c.prototype.scheduleTimeout=function(){var a=this.action;a?this.action=a.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(c.dispatchTimeout,this.waitFor,this))};c.prototype._next=function(c){this.absoluteTimeout||
this.scheduleTimeout();a.prototype._next.call(this,c)};c.prototype._unsubscribe=function(){this.errorInstance=this.scheduler=this.action=null};return c}(e.Subscriber)},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();
Object.defineProperty(b,"__esModule",{value:!0});var h=a(223),f=a(81),k=a(0),c=a(46),d=a(6);e=a(4);a(2);var g=a(32),n=a(1),p=a(18),m=a(15),q=a(5),t=a(16),r=a(234),u=a(8),v=a(252),w=a(55),x=a(94),y=a(322),z=a(323),A=a(324),B=a(325),C=e.default.DEFAULT_UNMUTED_VOLUME;a=function(a){function b(b){void 0===b&&(b={});var g=a.call(this)||this,e=B.parseConstructorOptions(b);b=e.initialAudioBitrate;var k=e.initialVideoBitrate,h=e.limitVideoWidth,l=e.maxAudioBitrate,m=e.maxBufferAhead,p=e.maxBufferBehind,u=
e.maxVideoBitrate,q=e.throttleWhenHidden,r=e.videoElement;e=e.wantedBufferAhead;r.preload="auto";g.version="3.0.5";g.log=n.default;g.state="STOPPED";g.videoElement=r;g._priv_destroy$=new d.Subject;t.onFullscreenChange$(r).takeUntil(g._priv_destroy$).subscribe(function(){return g.trigger("fullscreenChange",g.isFullscreen())});t.onTextTrackChanges$(r.textTracks).takeUntil(g._priv_destroy$).map(function(a){a=a.target;for(var c=[],b=0;b<a.length;b++)c.push(a[b]);return c}).distinctUntilChanged(function(a,
c){if(a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!==c[b])return!1;return!0}).subscribe(function(a){return g._priv_onNativeTextTracksNext(a)});g._priv_errorStream$=new d.Subject;g._priv_playing$=new c.ReplaySubject(1);g._priv_speed$=new f.BehaviorSubject(r.playbackRate);g._priv_unsubscribeLoadedVideo$=new d.Subject;g._priv_streamLock$=new f.BehaviorSubject(!1);g._priv_wantedBufferAhead$=new f.BehaviorSubject(e);g._priv_maxBufferAhead$=new f.BehaviorSubject(m);g._priv_maxBufferBehind$=
new f.BehaviorSubject(p);g._priv_lastBitrates={audio:b,video:k};g._priv_initialMaxAutoBitrates={audio:l,video:u};g._priv_manualBitrates={audio:-1,video:-1};g._priv_throttleWhenHidden=q;g._priv_limitVideoWidth=h;g._priv_mutedMemory=C;g._priv_initialAudioTrack=void 0;g._priv_initialTextTrack=void 0;g._priv_languageManager=null;g._priv_abrManager=null;g._priv_manifest=null;g._priv_currentRepresentations={};g._priv_currentAdaptations={};g._priv_recordedEvents={};g._priv_fatalError=null;g._priv_currentImagePlaylist=
null;g._priv_setPlayerState(y.PLAYER_STATES.STOPPED);return g}l(b,a);Object.defineProperty(b,"ErrorTypes",{get:function(){return u.ErrorTypes},enumerable:!0,configurable:!0});Object.defineProperty(b,"ErrorCodes",{get:function(){return u.ErrorCodes},enumerable:!0,configurable:!0});Object.defineProperty(b,"LogLevel",{get:function(){return n.default.getLevel()},set:function(a){n.default.setLevel(a)},enumerable:!0,configurable:!0});b.prototype.stop=function(){this.state!==y.PLAYER_STATES.STOPPED&&(this._priv_unsubscribeLoadedVideo$.next(),
this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(y.PLAYER_STATES.STOPPED))};b.prototype.dispose=function(){this.stop();x.dispose();this._priv_destroy$.next();this._priv_destroy$.complete();this._priv_unsubscribeLoadedVideo$.complete();this._priv_errorStream$.complete();this._priv_playing$.complete();this._priv_speed$.complete();this._priv_streamLock$.complete();this._priv_wantedBufferAhead$.complete();this._priv_maxBufferAhead$.complete();this._priv_maxBufferBehind$.complete();this.videoElement=
null};b.prototype.loadVideo=function(a){var c=this;a=B.parseLoadVideoOptions(a);n.default.info("loadvideo",a);var b=a.autoPlay,d=a.defaultAudioTrack,f=a.defaultTextTrack,g=a.keySystems,e=a.startAt,h=a.supplementaryImageTracks,l=a.supplementaryTextTracks,m=a.transport,u=a.transportOptions,q=a.url;if(!this.videoElement)throw Error("the attached video element is disposed");var x=r.default[m];if(!x)throw Error('transport "'+m+'" not supported');m=x(u);this.stop();this._priv_initialAudioTrack=d;this._priv_initialTextTrack=
f;this._priv_playing$.next(!1);f=this.videoElement;d=A.default(f,{withMediaSource:!0});u={initialBitrates:this._priv_lastBitrates,manualBitrates:this._priv_manualBitrates,maxAutoBitrates:this._priv_initialMaxAutoBitrates,throttle:this._priv_throttleWhenHidden?{video:t.isInBackground$().map(function(a){return a?0:Infinity}).takeUntil(this._priv_unsubscribeLoadedVideo$)}:{},limitWidth:this._priv_limitVideoWidth?{video:t.videoWidth$(f).takeUntil(this._priv_unsubscribeLoadedVideo$)}:{}};var w=v.default({adaptiveOptions:u,
autoPlay:b,bufferOptions:{wantedBufferAhead$:this._priv_wantedBufferAhead$,maxBufferAhead$:this._priv_maxBufferAhead$,maxBufferBehind$:this._priv_maxBufferBehind$},errorStream:this._priv_errorStream$,keySystems:g,speed$:this._priv_speed$,startAt:e,textTrackOptions:"native"===a.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:a.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:a.textTrackElement},timings$:d,transport:m,url:q,videoElement:f,withMediaSource:!0,supplementaryImageTracks:h,
supplementaryTextTracks:l}).takeUntil(this._priv_unsubscribeLoadedVideo$).publish();a=w.filter(function(a){return"stalled"===a.type}).map(function(a){return a.value}).startWith(null);a=w.filter(function(a){return"loaded"===a.type}).take(1).share().mapTo(y.PLAYER_STATES.LOADED).concat(k.Observable.combineLatest(this._priv_playing$,a).takeUntil(this._priv_unsubscribeLoadedVideo$).map(function(a){var c=a[1];return c?"seeking"===c.state?y.PLAYER_STATES.SEEKING:y.PLAYER_STATES.BUFFERING:a[0]?y.PLAYER_STATES.PLAYING:
y.PLAYER_STATES.PAUSED}).skipUntil(this._priv_playing$.filter(function(a){return a}))).distinctUntilChanged().startWith(y.PLAYER_STATES.LOADING);b=t.onPlayPause$(f).map(function(a){return"play"===a.type});var H;this._priv_unsubscribeLoadedVideo$.take(1).subscribe(function(){H&&H.unsubscribe()});b.takeUntil(this._priv_unsubscribeLoadedVideo$).subscribe(function(a){return c._priv_onPlayPauseNext(a)},p.default);d.takeUntil(this._priv_unsubscribeLoadedVideo$).subscribe(function(a){return c._priv_triggerTimeChange(a)},
p.default);a.takeUntil(this._priv_unsubscribeLoadedVideo$).subscribe(function(a){return c._priv_setPlayerState(a)},p.default);w.subscribe(function(a){return c._priv_onStreamNext(a)},function(a){return c._priv_onStreamError(a)},function(){return c._priv_onStreamComplete()});this._priv_errorStream$.takeUntil(this._priv_unsubscribeLoadedVideo$).subscribe(function(a){return c._priv_onErrorStreamNext(a)});this._priv_streamLock$.filter(function(a){return!a}).take(1).takeUntil(this._priv_unsubscribeLoadedVideo$).subscribe(function(){H=
w.connect()})};b.prototype.getError=function(){return this._priv_fatalError};b.prototype.getManifest=function(){return this._priv_manifest||null};b.prototype.getCurrentAdaptations=function(){return this._priv_manifest?this._priv_currentAdaptations:null};b.prototype.getCurrentRepresentations=function(){return this._priv_manifest?this._priv_currentRepresentations:null};b.prototype.getVideoElement=function(){return this.videoElement};b.prototype.getNativeTextTrack=function(){if(!this.videoElement)throw Error("Disposed player");
var a=this.videoElement;return 0<a.textTracks.length?a.textTracks[0]:null};b.prototype.getPlayerState=function(){return this.state};b.prototype.isLive=function(){return this._priv_manifest?this._priv_manifest.isLive:!1};b.prototype.getUrl=function(){if(this._priv_manifest)return this._priv_manifest.getUrl()};b.prototype.getVideoDuration=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.duration};b.prototype.getVideoBufferGap=function(){if(!this.videoElement)throw Error("Disposed player");
var a=this.videoElement;return m.getLeftSizeOfRange(a.buffered,a.currentTime)};b.prototype.getVideoLoadedTime=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return m.getSizeOfRange(a.buffered,a.currentTime)};b.prototype.getVideoPlayedTime=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return m.getPlayedSizeOfRange(a.buffered,a.currentTime)};b.prototype.getWallClockTime=function(){if(!this.videoElement)throw Error("Disposed player");
if(!this._priv_manifest)return 0;var a=this.videoElement.currentTime;return this.isLive()?+w.toWallClockTime(a,this._priv_manifest)/1E3:a};b.prototype.getPosition=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.currentTime};b.prototype.getPlaybackRate=function(){return this._priv_speed$.getValue()};b.prototype.getVolume=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.volume};b.prototype.isFullscreen=function(){return q.isFullscreen()};
b.prototype.getAvailableVideoBitrates=function(){var a=this._priv_currentAdaptations.video;return a?a.representations.map(function(a){return a.bitrate}):[]};b.prototype.getAvailableAudioBitrates=function(){var a=this._priv_currentAdaptations.audio;return a?a.representations.map(function(a){return a.bitrate}):[]};b.prototype.getManualAudioBitrate=function(){return this._priv_manualBitrates.audio};b.prototype.getManualVideoBitrate=function(){return this._priv_manualBitrates.video};b.prototype.getVideoBitrate=
function(){return this._priv_recordedEvents.videoBitrate};b.prototype.getAudioBitrate=function(){return this._priv_recordedEvents.audioBitrate};b.prototype.getMaxVideoBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("video"):this._priv_initialMaxAutoBitrates.video};b.prototype.getMaxAudioBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("audio"):this._priv_initialMaxAutoBitrates.audio};b.prototype.play=function(){if(!this.videoElement)throw Error("Disposed player");
this.videoElement.play()};b.prototype.pause=function(){if(!this.videoElement)throw Error("Disposed player");this.videoElement.pause()};b.prototype.setPlaybackRate=function(a){this._priv_speed$.next(a)};b.prototype.seekTo=function(a){if(!this._priv_manifest)throw Error("player: no manifest loaded");if(!this.videoElement)throw Error("Disposed player");var c=typeof a;if("number"===c)var b=a;else if("object"===c)if(b=this.videoElement.currentTime,null!=a.relative)b+=a.relative;else if(null!=a.position)b=
a.position;else if(null!=a.wallClockTime)b=w.fromWallClockTime(1E3*a.wallClockTime,this._priv_manifest);else throw Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');if(void 0===b)throw Error("invalid time given");return this.videoElement.currentTime=b};b.prototype.exitFullscreen=function(){q.exitFullscreen()};b.prototype.setFullscreen=function(a){void 0===a&&(a=!0);if(!this.videoElement)throw Error("Disposed player");a?q.requestFullscreen(this.videoElement):
q.exitFullscreen()};b.prototype.setVolume=function(a){if(!this.videoElement)throw Error("Disposed player");var c=this.videoElement;a!==c.volume&&(c.volume=a,this.trigger("volumeChange",a))};b.prototype.isMute=function(){return!this.getVolume()};b.prototype.mute=function(){this._priv_mutedMemory=this.getVolume();this.setVolume(0)};b.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this._priv_mutedMemory||C)};b.prototype.setVideoBitrate=function(a){this._priv_manualBitrates.video=a;
this._priv_abrManager&&this._priv_abrManager.setManualBitrate("video",a)};b.prototype.setAudioBitrate=function(a){this._priv_manualBitrates.audio=a;this._priv_abrManager&&this._priv_abrManager.setManualBitrate("audio",a)};b.prototype.setMaxVideoBitrate=function(a){this._priv_initialMaxAutoBitrates.video=a;this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("video",a)};b.prototype.setMaxAudioBitrate=function(a){this._priv_initialMaxAutoBitrates.audio=a;this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("audio",
a)};b.prototype.setMaxBufferBehind=function(a){this._priv_maxBufferBehind$.next(a)};b.prototype.setMaxBufferAhead=function(a){this._priv_maxBufferAhead$.next(a)};b.prototype.setWantedBufferAhead=function(a){this._priv_wantedBufferAhead$.next(a)};b.prototype.getMaxBufferBehind=function(){return this._priv_maxBufferBehind$.getValue()};b.prototype.getMaxBufferAhead=function(){return this._priv_maxBufferAhead$.getValue()};b.prototype.getWantedBufferAhead=function(){return this._priv_wantedBufferAhead$.getValue()};
b.prototype.getCurrentKeySystem=function(){return x.getCurrentKeySystem()};b.prototype.getAvailableAudioTracks=function(){return this._priv_languageManager?this._priv_languageManager.getAvailableAudioTracks():null};b.prototype.getAvailableTextTracks=function(){return this._priv_languageManager?this._priv_languageManager.getAvailableTextTracks():null};b.prototype.getAudioTrack=function(){if(this._priv_languageManager)return this._priv_languageManager.getCurrentAudioTrack()};b.prototype.getTextTrack=
function(){if(this._priv_languageManager)return this._priv_languageManager.getCurrentTextTrack()};b.prototype.setAudioTrack=function(a){if(!this._priv_languageManager)throw Error("No compatible content launched.");try{this._priv_languageManager.setAudioTrackByID(a)}catch(E){throw Error("player: unknown audio track");}};b.prototype.setTextTrack=function(a){if(!this._priv_languageManager)throw Error("No compatible content launched.");try{this._priv_languageManager.setTextTrackByID(a)}catch(E){throw Error("player: unknown text track");
}};b.prototype.disableTextTrack=function(){if(this._priv_languageManager)return this._priv_languageManager.disableTextTrack()};b.prototype.getImageTrackData=function(){return this._priv_manifest?this._priv_currentImagePlaylist:null};b.prototype.getMinimumPosition=function(){return this._priv_manifest?w.getMinimumBufferPosition(this._priv_manifest):null};b.prototype.getMaximumPosition=function(){return this._priv_manifest?w.getMaximumBufferPosition(this._priv_manifest):null};b.prototype._priv_cleanUpCurrentContentState=
function(){var a=this;this._priv_streamLock$.next(!0);this._priv_initialTextTrack=this._priv_initialAudioTrack=void 0;this._priv_languageManager=null;this._priv_abrManager&&(this._priv_abrManager.dispose(),this._priv_abrManager=null);this._priv_manifest=null;this._priv_currentRepresentations={};this._priv_currentAdaptations={};this._priv_recordedEvents={};this._priv_currentImagePlaylist=this._priv_fatalError=null;var c=function(){a._priv_streamLock$.next(!1)};x.clearEME().catch(function(){return k.Observable.empty()}).subscribe(p.default,
c,c)};b.prototype._priv_recordState=function(a,c){h(this._priv_recordedEvents[a],c)||(this._priv_recordedEvents[a]=c,this.trigger(a+"Change",c))};b.prototype._priv_onStreamNext=function(a){switch(a.type){case "representationChange":this._priv_onRepresentationChange(a.value);break;case "manifestUpdate":this._priv_onManifestUpdate(a.value);break;case "adaptationChange":this._priv_onAdaptationChange(a.value);break;case "bitrateEstimationChange":this._priv_onBitrateEstimationChange(a.value);break;case "manifestChange":this._priv_onManifestChange(a.value);
break;case "pipeline":a=a.value;var c=a.parsed;"image"===a.bufferType&&(this._priv_currentImagePlaylist=c.segmentData,this.trigger("imageTrackUpdate",{data:this._priv_currentImagePlaylist}))}};b.prototype._priv_onErrorStreamNext=function(a){this.trigger("warning",a)};b.prototype._priv_onStreamError=function(a){this._priv_unsubscribeLoadedVideo$.next();this._priv_cleanUpCurrentContentState();this._priv_fatalError=a;this._priv_setPlayerState(y.PLAYER_STATES.STOPPED);this._priv_fatalError===a&&this.trigger("error",
a)};b.prototype._priv_onStreamComplete=function(){this._priv_unsubscribeLoadedVideo$.next();this._priv_cleanUpCurrentContentState();this._priv_setPlayerState(y.PLAYER_STATES.ENDED)};b.prototype._priv_onManifestChange=function(a){var c=a.manifest,b=a.adaptations$;this._priv_manifest=c;this._priv_languageManager=new z.default(c.adaptations,{audio$:b.audio,text$:b.text});for(var d=0,f=Object.keys(b);d<f.length;d++){var g=f[d],e=c.getAdaptationsForType(g);e.length&&("audio"===g&&this._priv_languageManager?
this._priv_languageManager.setInitialAudioTrack(this._priv_initialAudioTrack):"text"===g&&this._priv_languageManager?this._priv_languageManager.setInitialTextTrack(this._priv_initialTextTrack):b[g].next(e[0]))}this._priv_abrManager=a.abrManager;this.trigger("manifestChange",c)};b.prototype._priv_onManifestUpdate=function(a){this._priv_manifest=a=a.manifest;this._priv_languageManager&&this._priv_languageManager.updateAdaptations(a.adaptations);this.trigger("manifestUpdate",a)};b.prototype._priv_onAdaptationChange=
function(a){var c=a.type;this._priv_currentAdaptations[c]=a.adaptation;this._priv_languageManager&&("audio"===c?(a=this._priv_languageManager.getCurrentAudioTrack(),this._priv_recordState("audioTrack",a)):"text"===c&&(a=this._priv_languageManager.getCurrentTextTrack(),this._priv_recordState("textTrack",a)))};b.prototype._priv_onRepresentationChange=function(a){var c=a.type;a=a.representation;a=(this._priv_currentRepresentations[c]=a)&&a.bitrate;null!=a&&(this._priv_lastBitrates[c]=a);"video"===c?
this._priv_recordState("videoBitrate",null!=a?a:-1):"audio"===c&&this._priv_recordState("audioBitrate",null!=a?a:-1)};b.prototype._priv_onBitrateEstimationChange=function(a){this._priv_recordState("bitrateEstimation",{type:a.type,bitrate:a.bitrate})};b.prototype._priv_onPlayPauseNext=function(a){if(!this.videoElement)throw Error("Disposed player");this.videoElement.ended||this._priv_playing$.next(a)};b.prototype._priv_onNativeTextTracksNext=function(a){this.trigger("nativeTextTracksChange",a)};b.prototype._priv_setPlayerState=
function(a){this.state!==a&&(this.state=a,n.default.info("playerStateChange",a),this.trigger("playerStateChange",a))};b.prototype._priv_triggerTimeChange=function(a){if(this._priv_manifest&&a){var c={position:a.currentTime,duration:a.duration,playbackRate:a.playbackRate,bufferGap:isFinite(a.bufferGap)?a.bufferGap:0};this._priv_manifest.isLive&&0<a.currentTime&&(c.wallClockTime=w.toWallClockTime(a.currentTime,this._priv_manifest).getTime()/1E3,c.liveGap=w.getMaximumBufferPosition(this._priv_manifest)-
a.currentTime);this.trigger("positionUpdate",c)}};return b}(g.default);b.default=a},function(e,b,a){function l(a){return!a||"object"!==typeof a||"number"!==typeof a.length||"function"!==typeof a.copy||"function"!==typeof a.slice||0<a.length&&"number"!==typeof a[0]?!1:!0}function h(a,b,e){var g;if(null===a||void 0===a||null===b||void 0===b||a.prototype!==b.prototype)return!1;if(c(a)){if(!c(b))return!1;a=f.call(a);b=f.call(b);return d(a,b,e)}if(l(a)){if(!l(b)||a.length!==b.length)return!1;for(g=0;g<
a.length;g++)if(a[g]!==b[g])return!1;return!0}try{var h=k(a);var n=k(b)}catch(r){return!1}if(h.length!=n.length)return!1;h.sort();n.sort();for(g=h.length-1;0<=g;g--)if(h[g]!=n[g])return!1;for(g=h.length-1;0<=g;g--)if(n=h[g],!d(a[n],b[n],e))return!1;return typeof a===typeof b}var f=Array.prototype.slice,k=a(224),c=a(225),d=e.exports=function(a,c,b){b||(b={});return a===c?!0:a instanceof Date&&c instanceof Date?a.getTime()===c.getTime():!a||!c||"object"!=typeof a&&"object"!=typeof c?b.strict?a===c:
a==c:h(a,c,b)}},function(e,b){function a(a){var b=[],f;for(f in a)b.push(f);return b}b=e.exports="function"===typeof Object.keys?Object.keys:a;b.shim=a},function(e,b){function a(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function l(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}b="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();
b=e.exports=b?a:l;b.supported=a;b.unsupported=l},function(e,b,a){e=a(227);a=a(228);b.queue=new a.QueueScheduler(e.QueueAction)},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c){a.call(this,b,c);this.scheduler=b;this.work=c}l(b,a);b.prototype.schedule=function(b,c){void 0===c&&(c=0);if(0<c)return a.prototype.schedule.call(this,
b,c);this.delay=c;this.state=b;this.scheduler.flush(this);return this};b.prototype.execute=function(b,c){return 0<c||this.closed?a.prototype.execute.call(this,b,c):this._execute(b,c)};b.prototype.requestAsyncId=function(b,c,d){void 0===d&&(d=0);return null!==d&&0<d||null===d&&0<this.delay?a.prototype.requestAsyncId.call(this,b,c,d):b.flush(this)};return b}(a(69).AsyncAction);b.QueueAction=e},function(e,b,a){var l=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(){a.apply(this,arguments)}l(b,a);return b}(a(70).AsyncScheduler);b.QueueScheduler=e},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=
e.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});e=function(a){function b(f){var c=a.call(this)||this;Object.setPrototypeOf(c,b.prototype);c.name="AssertionError";c.message=f;Error.captureStackTrace&&Error.captureStackTrace(c,b);return c}l(b,a);return b}(Error);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){return a.reduce(function(a,b){a[b]=b;return a},{})}},function(e,b,a){function l(){return!!(document.fullscreenElement||
document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}Object.defineProperty(b,"__esModule",{value:!0});b.requestFullscreen=function(a){l()||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))};b.exitFullscreen=function(){l()&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?
document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())};b.isFullscreen=l},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(82);b.KeySystemAccess=e.default;e=a(83);b.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess;a=a(233);b.setMediaKeys=a.default},function(e,b,a){function l(a,b){if(b instanceof k.MockMediaKeys)return b._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(b);
if(null!==b){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);if(a.msSetMediaKeys)return a.msSetMediaKeys(b)}}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(10),k=a(83);b.default=function(a,b){return h.Observable.defer(function(){return f.default(l(a,b))})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e={};e.smooth=a(235).default;e.dash=a(245).default;e.directfile=a(251).default;b.default=e},function(e,b,
a){function l(a,c,b){a=a.representations;for(var d=0;d<a.length;d++){var f=a[d];null!=c.duration&&null!=c.timescale&&f.index._addSegments(b,c)}}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);a(2);var f=a(29),k=a(85),c=a(23),d=a(86),g=a(240);e=a(49);var n=a(241),p=a(244),m=a(87),q=e.default.patchSegment,t=e.default.getMdat,r=/\.wsx?(\?token=\S+)?/;b.default=function(a){void 0===a&&(a={});var b=n.default(a),e=p.default(a.segmentLoader);a={loader:function(a){return e({segment:a.segment,
representation:a.representation,adaptation:a.adaptation,manifest:a.manifest,init:a.init})},parser:function(a){var c=a.segment,b=a.adaptation,d=a.manifest;a=a.response.responseData;if(c.isInit)return h.Observable.of({segmentData:a,segmentInfos:{timescale:c.timescale,time:-1,duration:0}});a=new Uint8Array(a);d=g.default(a,c,d.isLive);c=d.nextSegments;d=d.segmentInfos;a=q(a,d.time);c&&l(b,d,c);return h.Observable.of({segmentData:a,segmentInfos:d})}};return{manifest:{resolver:function(a){a=a.url;var c=
m.extractToken(a);return(r.test(a)?f.default({url:m.replaceToken(a,""),responseType:"document",ignoreProgressEvents:!0}).map(function(a){a=m.extractISML(a.value.responseData);if(!a)throw Error("Invalid ISML");return a}):h.Observable.of(a)).map(function(a){return{url:m.replaceToken(m.resolveManifest(a),c)}})},loader:function(a){return f.default({url:a.url,responseType:"document",ignoreProgressEvents:!0})},parser:function(a){a=a.response;var c=b(a.responseData);return h.Observable.of({manifest:c,url:a.url})}},
audio:a,video:a,text:{loader:function(a){var b=a.segment,d=a.representation;if(b.isInit)return h.Observable.empty();a=d.mimeType;var g=c.resolveURL(d.baseURL);b=m.buildSegmentURL(g,d,b);return f.default({url:b,responseType:a&&0<=a.indexOf("mp4")?"arraybuffer":"text"})},parser:function(a){var c=a.segment,b=a.representation,d=a.adaptation,f=a.manifest,e=d.language,n=b.mimeType;n=void 0===n?"":n;b=b.codec;b=void 0===b?"":b;a=a.response.responseData;var m=0<=n.indexOf("mp4");if(m){var p=new Uint8Array(a);
var r=g.default(p,c,f.isLive);var q=r.nextSegments;r=r.segmentInfos;f=r.time;var u=null!=r.duration?r.time+r.duration:void 0;c=r.timescale}else p=a,f=u=c.time||0,u=null!=c.duration?u+c.duration:void 0,c=c.timescale;if(m){var v=b.toLowerCase();if("application/ttml+xml+mp4"===n||"stpp"===v)v="ttml";else if("wvtt"===v)v="vtt";else throw Error("could not find a text-track parser for the type "+n);n=t(p);n=k.stringFromUTF8(n)}else{switch(n){case "application/x-sami":case "application/smil":v="sami";break;
case "application/ttml+xml":v="ttml";break;case "text/vtt":v="vtt"}if(!v)if(v=b.toLowerCase(),"srt"===v)v="srt";else throw Error("could not find a text-track parser for the type "+n);n=a}null!=r&&q&&l(d,r,q);return h.Observable.of({segmentData:{type:v,data:n,language:e,timescale:c,start:f,end:u,timeOffset:f/c},segmentInfos:r})}},image:{loader:function(a){var b=a.segment;a=a.representation;if(b.isInit)return h.Observable.empty();var d=c.resolveURL(a.baseURL);b=m.buildSegmentURL(d,a,b);return f.default({url:b,
responseType:"arraybuffer"})},parser:function(a){a=new Uint8Array(a.response.responseData);a=d.default(a);return h.Observable.of({segmentData:a.thumbs,segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:a.timescale}})}}}}},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=
null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(22),f=a(27);e=function(a){function c(b,g,e){var d=a.call(this)||this;Object.setPrototypeOf(d,c.prototype);d.name="IndexError";d.type=h.ErrorTypes.INDEX_ERROR;d.indexType=g;d.reason=null;d.code=h.ErrorCodes[b];d.fatal=!!e;d.message=f.default(d.name,d.code,null);return d}l(c,a);return c}(Error);b.default=e},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(22),f=a(27);e=function(a){function b(c,g,e){var d=a.call(this)||this;Object.setPrototypeOf(d,b.prototype);d.name="OtherError";d.type=h.ErrorTypes.OTHER_ERROR;d.reason=g;d.code=h.ErrorCodes[c];
d.fatal=!!e;d.message=f.default(d.name,d.code,d.reason);return d}l(b,a);return b}(Error);b.default=e},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(22),
f=a(27);e=function(a){function b(c,g,e){var d=a.call(this)||this;Object.setPrototypeOf(d,b.prototype);d.name="NetworkError";d.type=h.ErrorTypes.NETWORK_ERROR;d.xhr=g.xhr;d.url=g.url;d.status=g.status;d.errorType=g.type;d.reason=g;d.code=h.ErrorCodes[c];d.fatal=!!e;d.message=f.default(d.name,d.code,d.reason);return d}l(b,a);b.prototype.isHttpError=function(a){return this.errorType===h.RequestErrorTypes.ERROR_HTTP_CODE&&this.status===a};return b}(Error);b.default=e},function(e,b,a){var l=this&&this.__extends||
function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});e=function(a){function b(f,c,d){var g=a.call(this)||this;Object.setPrototypeOf(g,b.prototype);g.name="RequestError";g.url=c;g.xhr=f;g.status=f.status;g.type=
d;g.message=d;return g}l(b,a);return b}(Error);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(1),h=a(33);e=a(49);var f=e.default.getTraf,k=e.default.parseTfrf,c=e.default.parseTfxd;b.default=function(a,b,e){var d=[];if(e)if(e=f(a)){var g=k(e);var n=c(e)}else l.default.warn("smooth: could not find traf atom");n?a={time:n.time,duration:n.duration,timescale:b.timescale}:(n=Math.min(.9*b.timescale,null!=b.duration?b.duration/4:.25),a=h.getDurationFromTrun(a),a=0<=
a&&(null==b.duration||Math.abs(a-b.duration)<=n)?{time:b.time,duration:a,timescale:b.timescale}:{time:b.time,duration:b.duration,timescale:b.timescale});if(g)for(n=0;n<g.length;n++)d.push({time:g[n].time,duration:g[n].duration,timescale:b.timescale});return{nextSegments:d,segmentInfos:a}}},function(e,b,a){function l(a){a=(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1];return(a=void 0===a?"":a)&&"avc1."+a}function h(a){return"boolean"===typeof a?a:"string"===typeof a?"TRUE"===a.toUpperCase():!1}function f(a){if(!a)return Infinity;
a=a.index;var b=a.timeline[a.timeline.length-1],c=b.d;return(b.ts+(b.r+1)*(c?c:0))/a.timescale}function k(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:n.concat([8,1,18,16],a)}]}Object.defineProperty(b,"__esModule",{value:!0});var c=a(4),d=a(9),g=a(2),n=a(28),p=a(34),m={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},q={audio:"mp4a.40.2",video:"avc1.4D401E"},t={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};b.default=function(a){function b(a,
b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function e(a,b){function c(b){b=a.getAttribute(b);return null==b?void 0:b}switch(b){case "audio":var d=c("AudioTag");var f=c("Bitrate");var g=c("BitsPerSample"),e=c("Channels");var k=c("CodecPrivateData");b=c("FourCC");var h=c("PacketSize"),n=c("SamplingRate");return{audiotag:void 0!==d?parseInt(d,10):d,bitrate:f?parseInt(f,10)||0:0,bitsPerSample:void 0!==g?parseInt(g,10):g,channels:void 0!==e?parseInt(e,10):e,codecPrivateData:k||
"",mimeType:void 0!==b?t[b]:b,packetSize:void 0!==h?parseInt(h,10):h,samplingRate:void 0!==n?parseInt(n,10):n};case "video":return f=c("Bitrate"),k=c("CodecPrivateData"),b=c("FourCC"),d=c("MaxWidth"),g=c("MaxHeight"),{bitrate:f?parseInt(f,10)||0:0,mimeType:void 0!==b?t[b]:b,codecPrivateData:k||"",codecs:l(k||""),width:void 0!==d?parseInt(d,10):void 0,height:void 0!==g?parseInt(g,10):void 0};case "text":return f=c("Bitrate"),k=c("CodecPrivateData"),b=c("FourCC"),{bitrate:f?parseInt(f,10)||0:0,mimeType:void 0!==
b?t[b]:b,codecPrivateData:k||""};default:throw Error("Unrecognized StreamIndex type: "+b);}}function r(a,c){var d=a.hasAttribute("Timescale")?+(a.getAttribute("Timescale")||0):c,f=a.getAttribute("Type");if(null==f)throw Error("StreamIndex without type.");c=a.getAttribute("Subtype");var k=a.getAttribute("Name"),h=a.getAttribute("Language"),l=null==h?h:p.normalize(h),n=a.getAttribute("Url"),u=[],r=0;d=b(a,function(a,b,c){switch(b){case "QualityLevel":b=e(c,f);if("audio"===f){var d=c.getAttribute("FourCC")||
"",g=b.codecPrivateData;d="AACH"===d?5:g?(parseInt(g.substr(0,2),16)&248)>>3:2;b.codecs=d?"mp4a.40."+d:""}if("video"!==f||b.bitrate>B)b.id=r++,a.representations.push(b);break;case "c":b=a.index;d=a.index.timeline;g=d.length;var k=0<g?d[g-1]:{d:0,ts:0,r:0},h=c.getAttribute("d"),l=c.getAttribute("t");c=(c=c.getAttribute("r"))?+c-1:0;l=l?+l:void 0;h=h?+h:void 0;0<g&&!k.d&&(k.d=null!=l?l-k.ts:0,d[g-1]=k);0<g&&h===k.d&&null==l?k.r+=(c||0)+1:d.push({d:h,ts:null==l?k.ts+(k.d||0)*(k.r+1):l,r:c});b.timeline=
d}return a},{representations:[],index:{timeline:[],indexType:"smooth",timescale:d,initialization:{}}});a=d.representations;d=d.index;g.default(a.length,"adaptation should have at least one representation");a.forEach(function(a){return a.codecs=a.codecs||q[f]});a.forEach(function(a){return a.mimeType=a.mimeType||m[f]});if("ADVT"===c)return null;"text"===f&&"DESC"===c&&u.push("hardOfHearing");return{type:f,accessibility:u,index:d,representations:a,name:k,language:h,normalizedLanguage:l,baseURL:n}}function x(a){return y((new DOMParser).parseFromString(a,
"application/xml"))}function y(a){a=a.documentElement;g.default.equal(a.nodeName,"SmoothStreamingMedia","document root should be SmoothStreamingMedia");g.default(/^[2]-[0-2]$/.test(a.getAttribute("MajorVersion")+"-"+a.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var c=+(a.getAttribute("Timescale")||1E7),e=[],k=b(a,function(a,b,f){switch(b){case "Protection":f=f.firstElementChild;g.default.equal(f.nodeName,"ProtectionHeader","Protection should have ProtectionHeader child");b=
n.strToBytes(atob(f.textContent||""));var k=n.le2toi(b,8);k=n.bytesToUTF16Str(b.subarray(10,k+10));k=(new DOMParser).parseFromString(k,"application/xml").querySelector("KID");if(!k)throw Error("invalid XML");k=n.guidToUuid(atob(k.textContent||"")).toLowerCase();var h=n.hexToBytes(k);f=(f.getAttribute("SystemID")||"").toLowerCase().replace(/\{|\}/g,"");b={keyId:k,keySystems:[{systemId:f,privateData:b}].concat(C(h))};a.protection=b;break;case "StreamIndex":if(b=r(f,c)){f=0;do k=b.type+"_"+(b.language?
b.language+"_":"")+f++;while(d.default(e,k));b.id=k;e.push(k);a.adaptations.push(b)}}return a},{protection:null,adaptations:[]}),l=k.protection;k=k.adaptations;k.forEach(function(a){return a.smoothProtection=l});var m=h(a.getAttribute("IsLive"));if(m){var p=z;var u=+(a.getAttribute("DVRWindowLength")||0)/c;var q=A;var t=k.filter(function(a){return"video"===a.type})[0];var v=k.filter(function(a){return"audio"===a.type})[0];t=Math.min(f(t),f(v));t=Date.now()/1E3-(t+q)}return{transportType:"smooth",
profiles:"",type:m?"dynamic":"static",suggestedPresentationDelay:p,timeShiftBufferDepth:u,presentationLiveGap:t,availabilityStartTime:q,periods:[{duration:+(a.getAttribute("Duration")||Infinity)/c,adaptations:k,laFragCount:+(a.getAttribute("LookAheadFragmentCount")||0)}]}}void 0===a&&(a={});var z=null==a.suggestedPresentationDelay?c.default.DEFAULT_SUGGESTED_PRESENTATION_DELAY.SMOOTH:a.suggestedPresentationDelay,A=a.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,B=a.minRepresentationBitrate||19E4,
C=a.keySystems||k;a=function(a){return"string"===typeof a?x(a):y(a)};a.parseFromString=x;a.parseFromDocument=y;return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",
ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",
la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",
so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",
ger:"deu",gre:"ell",ice:"isl",mac:"mkd",mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",wel:"cym"}},function(e,b,a){function l(a){var b=a.url,d;(a=a.segment.range)&&(d={Range:c.byteRange(a)});return f.default({url:b,responseType:"arraybuffer",headers:d})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);a(2);var f=a(29),k=a(23);e=a(49);var c=a(87),d=e.default.createVideoInitSegment,g=e.default.createAudioInitSegment;b.default=function(a){return function(b){var f=b.segment,e=
b.representation,n=b.adaptation,p=b.manifest;b=b.init;if(f.isInit){if(null==e._codecPrivateData)throw Error("Invalid request: A smooth init segment should have CodecPrivateData");p=void 0;p=n._smoothProtection;switch(n.type){case "video":p=d(f.timescale,e.width||0,e.height||0,72,72,4,e._codecPrivateData,p&&p.keyId,p&&p.keySystems);break;case "audio":p=g(f.timescale,e._channels||0,e._bitsPerSample||0,e._packetSize||0,e._samplingRate||0,e._codecPrivateData,p&&p.keyId,p&&p.keySystems);break;default:p=
new Uint8Array(0)}return h.Observable.of({type:"data",value:{responseData:p}})}var u=c.buildSegmentURL(k.resolveURL(e.baseURL),e,f),v={adaptation:n,representation:e,segment:f,transport:"smooth",url:u,manifest:p,init:b};return a?h.Observable.create(function(b){var c=!1,d=!1,f=a(v,{reject:function(a){void 0===a&&(a={});d||(c=!0,b.error(a))},resolve:function(a){d||(c=!0,b.next({type:"response",value:{responseData:a.data,size:a.size,duration:a.duration}}),b.complete())},fallback:function(){d=!0;l(v).subscribe(b)}});
return function(){c||d||"function"!==typeof f||f()}}):l(v)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h=a(29),f=a(23),k=a(33),c=a(86),d=a(88),g=a(246),n=a(249),p=a(250),m=a(50);b.default=function(a){void 0===a&&(a={});var b=n.default(a.segmentLoader),e=a.contentProtectionParser;a={loader:function(a){return b({segment:a.segment,representation:a.representation,adaptation:a.adaptation,manifest:a.manifest,init:a.init})},parser:function(a){var b=a.segment,c=a.representation,
f=a.response;a=a.init;f=f.responseData instanceof Uint8Array?f.responseData:new Uint8Array(f.responseData);var g,e=b.indexRange;(e=k.parseSidx(f,e?e[0]:0))&&(g=e);b.isInit?(b={time:-1,duration:0},a=k.getMDHDTimescale(f),0<a&&(b.timescale=a)):b=d.default(b,f,e,a);g&&m.addNextSegments(c,b,g);return l.Observable.of({segmentData:f,segmentInfos:b})}};return{manifest:{loader:function(a){return h.default({url:a.url,responseType:"document"})},parser:function(a){a=a.response;return l.Observable.of({manifest:g.default(a.responseData,
e),url:a.url})}},audio:a,video:a,text:{loader:p.loader,parser:p.parser},image:{loader:function(a){var b=a.segment;a=a.representation;if(b.isInit)return l.Observable.empty();var c=b.media;b=c?m.replaceTokens(c,b,a):"";b=f.resolveURL(a.baseURL,b);return h.default({url:b,responseType:"arraybuffer"})},parser:function(a){a=new Uint8Array(a.response.responseData);a=c.default(a);return l.Observable.of({segmentData:a.thumbs,segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:a.timescale}})}}}}},function(e,
b,a){function l(a,b){a=a.documentElement;if(!a||"MPD"!==a.nodeName)throw Error("document root should be MPD");return f.parseMPD(a,b)}function h(a,b){return l((new DOMParser).parseFromString(a,"application/xml"),b)}Object.defineProperty(b,"__esModule",{value:!0});var f=a(247);b.parseFromDocument=l;b.parseFromString=h;b.default=function(a,b){return"string"===typeof a?h(a,b):l(a,b)}},function(e,b,a){function l(a,b){return m.default(a,p.reduceChildren(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=
d.textContent;break;case "AdaptationSet":c=h(d,b),null==c.id&&(c.id=a.adaptations.length),a.adaptations.push(c)}return a},{id:null,adaptations:[]}))}function h(a,b){var g,e=p.reduceChildren(a,function(a,e,h){switch(e){case "Accessibility":g=m.default(h);break;case "BaseURL":a.baseURL=h.textContent;break;case "ContentComponent":a.contentComponent=m.default(h);break;case "ContentProtection":e=b?b(m.default(h),h):void 0;a.contentProtection=e;break;case "Representation":e=f(h);null==e.id&&(e.id=a.representations.length);
a.representations.push(e);break;case "Role":a.role=m.default(h);break;case "SegmentBase":a.index=d(h);break;case "SegmentList":a.index=c(h);break;case "SegmentTemplate":a.index=k(h)}return a},{index:null,id:null,representations:[],mimeType:null}),h=m.default(a,e);h.type=p.inferAdaptationType(h);h.accessibility=[];g&&p.isHardOfHearing(g)&&h.accessibility.push("hardOfHearing");g&&p.isVisuallyImpaired(g)&&h.accessibility.push("visuallyImpaired");h.representations&&(h.representations=h.representations.map(function(a){h.codecs&&
null==a.codecs&&(a.codecs=h.codecs);h.height&&null==a.height&&(a.height=h.height);h.index&&null==a.index&&(a.index=h.index);h.mimeType&&null==a.mimeType&&(a.mimeType=h.mimeType);h.width&&null==a.width&&(a.width=h.width);return a}));return h}function f(a){var b=p.reduceChildren(a,function(a,b,f){switch(b){case "BaseURL":a.baseURL=f.textContent;break;case "SegmentBase":a.index=d(f);break;case "SegmentList":a.index=c(f);break;case "SegmentTemplate":a.index=k(f)}return a},{id:null,index:null,mimeType:null});
return m.default(a,b)}function k(a){a=g(a);a.indexType||(a.indexType="template");return a}function c(a){var b=g(a);b.list=[];b.indexType="list";return p.reduceChildren(a,function(a,b,c){"SegmentURL"===b&&a.list.push(m.default(c));return a},b)}function d(a){var b=p.reduceChildren(a,function(a,b,c){if("Initialization"===b){var d,f;c.hasAttribute("range")&&(d=p.parseByteRange(c.getAttribute("range")));c.hasAttribute("sourceURL")&&(f=c.getAttribute("sourceURL"));a.initialization={range:d,media:f}}return a},
m.default(a));"SegmentBase"===a.nodeName&&(b.indexType="base",b.timeline=[]);return b}function g(a){return p.reduceChildren(a,function(a,b,c){"SegmentTimeline"===b&&(a.indexType="timeline",a.timeline=n(c));return a},d(a))}function n(a){return p.reduceChildren(a,function(a,b,c){b=a.length;c=m.default(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}Object.defineProperty(b,"__esModule",{value:!0});a(2);var p=a(89),m=a(248);b.parseMPD=function(a,b){var c=
p.reduceChildren(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations||(a.locations=[]);a.locations.push(d.textContent);break;case "Period":a.periods.push(l(d,b))}return a},{transportType:"dash",periods:[],locations:[]});a=m.default(a,c);a.type&&/dynamic/.test(a.type)&&(c=a.periods[0].adaptations.filter(function(a){return"video"===a.type})[0],c=p.getLastLiveTimeReference(c),a.availabilityStartTime&&"number"!==typeof a.availabilityStartTime&&(a.availabilityStartTime=
a.availabilityStartTime.getTime()/1E3,a.presentationLiveGap=null!=c?Date.now()/1E3-(c+a.availabilityStartTime):10));return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(4);var l=a(2),h=a(34);a=a(89);var f=[{k:"profiles",fn:a.parseString},{k:"width",fn:parseInt},{k:"height",fn:parseInt},{k:"frameRate",fn:a.parseFrameRate},{k:"audioSamplingRate",fn:a.parseString},{k:"mimeType",fn:a.parseString},{k:"segmentProfiles",fn:a.parseString},{k:"codecs",fn:a.parseString},{k:"maximumSAPPeriod",
fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:a.parseBoolean}],k=[{k:"timescale",fn:parseInt,def:1},{k:"timeShiftBufferDepth",fn:a.parseDuration},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:a.parseByteRange},{k:"indexRangeExact",fn:a.parseBoolean,def:!1},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:a.parseBoolean,def:!0}],c=k.concat([{k:"duration",fn:parseInt},{k:"startNumber",fn:parseInt}]),d={ContentProtection:[{k:"schemeIdUri",
fn:a.parseString},{k:"value",fn:a.parseString}],SegmentURL:[{k:"media",fn:a.parseString},{k:"mediaRange",fn:a.parseByteRange},{k:"index",fn:a.parseString},{k:"indexRange",fn:a.parseByteRange}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:k,SegmentTemplate:c.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:a.parseString},{k:"media",fn:a.parseString},{k:"bitstreamSwitching",fn:a.parseString}]),SegmentList:c,
ContentComponent:[{k:"id",fn:a.parseString},{k:"lang",fn:a.parseString,n:"language"},{k:"lang",fn:h.normalize,n:"normalizedLanguage"},{k:"contentType",fn:a.parseString},{k:"par",fn:a.parseRatio}],Representation:f.concat([{k:"id",fn:a.parseString},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:f.concat([{k:"id",fn:a.parseString},{k:"group",fn:parseInt},{k:"lang",fn:a.parseString,n:"language"},{k:"lang",fn:h.normalize,n:"normalizedLanguage"},{k:"contentType",
fn:a.parseString},{k:"par",fn:a.parseRatio},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:a.parseFrameRate},{k:"maxFrameRate",fn:a.parseFrameRate},{k:"segmentAlignment",fn:a.parseIntOrBoolean},{k:"subsegmentAlignment",fn:a.parseIntOrBoolean},{k:"bitstreamSwitching",fn:a.parseBoolean}]),Period:[{k:"id",fn:a.parseString},{k:"start",
fn:a.parseDuration},{k:"duration",fn:a.parseDuration},{k:"bitstreamSwitching",fn:a.parseBoolean}],MPD:[{k:"id",fn:a.parseString},{k:"profiles",fn:a.parseString},{k:"type",fn:a.parseString,def:"static"},{k:"availabilityStartTime",fn:a.parseDateTime},{k:"availabilityEndTime",fn:a.parseDateTime},{k:"publishTime",fn:a.parseDateTime},{k:"mediaPresentationDuration",fn:a.parseDuration,n:"duration"},{k:"minimumUpdatePeriod",fn:a.parseDuration},{k:"minBufferTime",fn:a.parseDuration},{k:"timeShiftBufferDepth",
fn:a.parseDuration},{k:"suggestedPresentationDelay",fn:a.parseDuration,def:e.default.DEFAULT_SUGGESTED_PRESENTATION_DELAY.DASH},{k:"maxSegmentDuration",fn:a.parseDuration},{k:"maxSubsegmentDuration",fn:a.parseDuration}],Role:[{k:"schemeIdUri",fn:a.parseString},{k:"value",fn:a.parseString}],Accessibility:[{k:"schemeIdUri",fn:a.parseString},{k:"value",fn:parseInt}]};b.default=function(a,b){var c=d[a.nodeName];l.default(c,"no attributes for "+a.nodeName);b=b||{};for(var f=0;f<c.length;f++){var e=c[f],
g=e.k,h=e.fn,k=e.n;e=e.def;a.hasAttribute(g)?b[k||g]=h(a.getAttribute(g)):null!=e&&(b[k||g]=e)}return b}},function(e,b,a){function l(a){var b=a.url;a=a.segment;var d=a.range;a=a.indexRange;if(d&&a&&d[1]===a[0]-1)return k.default({url:b,responseType:"arraybuffer",headers:{Range:c.byteRange([d[0],a[1]])}});d=d?{Range:c.byteRange(d)}:null;d=k.default({url:b,responseType:"arraybuffer",headers:d});return a?(b=k.default({url:b,responseType:"arraybuffer",headers:{Range:c.byteRange(a)}}),h.Observable.merge(d,
b)):d}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(23),k=a(29),c=a(50);b.default=function(a){return function(b){var d=b.segment,e=b.adaptation,g=b.representation;b=b.manifest;var k=d.media,t=d.range,r=d.indexRange;if(d.isInit&&!(k||t||r))return h.Observable.empty();k=k?c.replaceTokens(k,d,g):"";k=f.resolveURL(g.baseURL,k);var u={adaptation:e,representation:g,manifest:b,segment:d,transport:"dash",url:k};return a?h.Observable.create(function(b){var c=!1,d=!1,f=a(u,{reject:function(a){void 0===
a&&(a={});d||(c=!0,b.error(a))},resolve:function(a){d||(c=!0,b.next({type:"response",value:{responseData:a.data,size:a.size,duration:a.duration}}),b.complete())},fallback:function(){d=!0;l(u).subscribe(b)}});return function(){c||d||"function"!==typeof f||f()}}):l(u)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(7),h=a(0),f=a(2),k=a(85),c=a(23),d=a(33),g=a(29),n=a(88),p=a(50);b.loader=function(a){var b=a.segment,d=a.representation,f=b.media,e=b.range;a=b.indexRange;var k=
b.isInit,l=p.isMP4EmbeddedTrack(d)?"arraybuffer":"text";if(k&&!(f||e||a))return h.Observable.empty();b=f?p.replaceTokens(f,b,d):"";b=c.resolveURL(d.baseURL,b);if(e&&a&&e[1]===a[0]-1)return g.default({url:b,responseType:l,headers:{Range:p.byteRange([e[0],a[1]])}});e=g.default({url:b,responseType:l,headers:e?{Range:p.byteRange(e)}:null});return a?(a=g.default({url:b,responseType:l,headers:{Range:p.byteRange(a)}}),h.Observable.merge(e,a)):e};b.parser=function(a){var b=a.response,c=a.segment,e=a.representation,
g=a.manifest,m=a.init,w=a.adaptation.language,x=c.isInit,y=c.indexRange,z;(a=p.isMP4EmbeddedTrack(e))?(f.default(b.responseData instanceof ArrayBuffer),b=new Uint8Array(b.responseData),(y=d.parseSidx(b,y?y[0]:0))&&(z=y),c=x?{time:-1,duration:0,timescale:c.timescale}:n.default(c,b,y,m)):(f.default("string"===typeof b.responseData),b=b.responseData,c=x?{time:-1,duration:0,timescale:c.timescale}:{time:c.time||0,duration:c.duration,timescale:c.timescale});if(x)c={time:-1,duration:0},a&&(b=d.getMDHDTimescale(b),
0<b&&(c.timescale=b)),b=void 0;else if(f.default(c),g={start:c.time,end:c.time+(c.duration||0),language:w,timescale:c.timescale,timeOffset:g.availabilityStartTime||0},a){m=e.codec;a=void 0;switch((void 0===m?"":m).toLowerCase()){case "stpp":a="ttml";break;case "wvtt":a="vtt"}if(!a)throw Error("The codec used for the subtitle is not managed yet.");b=l({data:k.stringFromUTF8(d.getMdat(b)),type:a},{timescale:1},g)}else{a=void 0;m=e.mimeType;m=void 0===m?"":m;switch(e.mimeType){case "application/ttml+xml":a=
"ttml";break;case "application/x-sami":case "application/smil":a="sami";break;case "text/vtt":a="vtt"}if(!a)if(a=e.codec,"srt"===(void 0===a?"":a).toLowerCase())a="srt";else throw Error("could not find a text-track parser for the type "+m);b=l({data:b,type:a},{timescale:1},g)}z&&p.addNextSegments(e,c,z);return h.Observable.of({segmentData:b,segmentInfos:c})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h={loader:function(a){return l.Observable.of({url:a.url})},parser:function(a){a=
a.url;return l.Observable.of({manifest:{transportType:"directfile",locations:[a],periods:[],isLive:!1,duration:Infinity,adaptations:null},url:a})}};b.default=function(){return{manifest:h}}},function(e,b,a){function l(a){var b={};d.default(["audio","video"],a)?b.cache=new g.default:"image"===a&&(b.maxRetry=0);return b}Object.defineProperty(b,"__esModule",{value:!0});var h=a(7),f=a(0),k=a(46),c=a(6);e=a(4);var d=a(9),g=a(253),n=a(1),p=a(90),m=a(254),q=a(5),t=a(16),r=a(8),u=a(255),v=a(261),w=a(268),
x=a(278),y=a(280),z=a(289),A=a(290),B=a(291),C=a(292),D=a(293),G=a(319),H=a(320),E=a(321),I=e.default.END_OF_PLAY,J=["audio","video","text","image"];b.default=function(a){function b(a,b,c,d,e,g,k){var h=l(b);return g.switchMap(function(g){if(!g)return n.default.info("disposing "+b+" adaptation"),D.disposeSourceBuffer(F,a,b,P),f.Observable.of({type:"adaptationChange",value:{type:b,adaptation:null}}).concat(v.EmptyBuffer({bufferType:b}));n.default.info("updating "+b+" adaptation",g);var l=null,m=M.map(function(a){var b;
if(l){var c=l.bitrate;l.index&&(b=l.index.getLastPosition())}return{bitrate:c,bufferGap:a.bufferGap,duration:a.duration,isLive:e.isLive,lastIndexPosition:b,position:a.currentTime,speed:R.getValue()}});m=k.get$(b,m,g.representations);var p=m.map(function(a){return a.representation}).filter(function(a){return null!=a}).distinctUntilChanged(function(a,b){return(a&&a.bitrate)===(b&&b.bitrate)&&(a&&a.id)===(b&&b.id)}).do(function(a){l=a}),t=w.getCodec(g.representations[0]||{});t=D.createSourceBuffer(F,
a,b,t,P,"text"===b?ca:{});p=f.Observable.combineLatest(p,d).map(function(a){return a[0]});n.default.info("creating Buffer for ",b);p=v.Buffer({sourceBuffer:t,downloader:function(a){var c=a.segment,d=a.representation;a=a.init;c=x.default(T[b],h)({segment:c,representation:d,adaptation:g,manifest:e,init:a});return C.default(b,c,U,V,N)},switch$:p,clock$:c,wantedBufferAhead:da,maxBufferBehind:ea,maxBufferAhead:fa,bufferType:b,isLive:e.isLive});p=f.Observable.of({type:"adaptationChange",value:{type:b,adaptation:g}}).concat(p).catch(function(a){if(!D.shouldHaveNativeSourceBuffer(b))return n.default.error("custom buffer: ",
b,"has crashed. Aborting it.",a),N.next(a),f.Observable.empty();n.default.error("native buffer: ",b,"has crashed. Stopping playback.",a);throw a;});m=m.filter(function(a){return null!=a.bitrate}).map(function(a){return{type:"bitrateEstimationChange",value:{type:b,bitrate:a.bitrate}}});return f.Observable.merge(p,m)})}function d(a,b){n.default.debug("calculating initial time");var c=A.default(a,ba);n.default.debug("initial time calculated:",c);var d=c;a=q.canSeek(F).do(function(){n.default.info("set initial time",
c);F.playbackRate=1;F.currentTime=c;d=0});var e=q.canPlay(F).do(function(){n.default.info("canplay event");Z&&F.play()});return{clock$:b.map(function(a){return h({timeOffset:d},a)}),loaded$:f.Observable.combineLatest(a,e).take(1).mapTo({type:"loaded",value:!0})}}function e(a){return W(a.getUrl()).map(function(b){return{type:"manifestUpdate",value:{manifest:w.updateManifest(a,b)}}})}function g(a,c){if(!a)throw Error("No media source.");a&&(B.setDurationToMediaSource(a,c.getDuration()),Object.keys(c.adaptations).map(function(b){if(D.shouldHaveNativeSourceBuffer(b)){var d=
c.getAdaptationsForType(b);d=d?d[0].representations:[];d.length&&(d=w.getCodec(d[0]),D.addNativeSourceBuffer(a,b,d,P))}}));var g=E.default(c,M),h=g.seekings,l=d(c,g.timings);g=l.loaded$;var m=l.clock$,p=new u.default(V,U,Q),t={};l=J.map(function(d){var f=new k.ReplaySubject(1);t[d]=f;return b(a,d,m,h,c,f,p)});l=c.isLive?f.Observable.merge.apply(f.Observable,l).mergeMap(function(a){a:{switch(a.type){case "index-discontinuity":n.default.warn("explicit discontinuity seek",a.value.ts);F.currentTime=a.value.ts;
break;case "precondition-failed":c.updateLiveGap(1);n.default.warn("precondition failed",c.presentationLiveGap);break;case "out-of-index":n.default.info("out of index");a=e(c);break a}a=f.Observable.of(a)}return a}):f.Observable.merge.apply(f.Observable,l);var r=f.Observable.of({type:"manifestChange",value:{manifest:c,adaptations$:t,abrManager:p}}),q=y.default(F,aa,N),v=G.default(F,R,M,{pauseWhenStalled:X}).map(function(a){return{type:"speed",value:a}}),x=H.default(F,c,M).map(function(a){return{type:"stalled",
value:a}}),A=z.default(F);return f.Observable.merge(l,q,g,r,A,v,x)}var Q=a.adaptiveOptions,Z=a.autoPlay,L=a.bufferOptions,aa=a.keySystems,R=a.speed$,ba=a.startAt,S=a.url,F=a.videoElement,ha=a.supplementaryImageTracks,ia=a.supplementaryTextTracks,N=a.errorStream,ca=a.textTrackOptions,M=a.timings$,Y=a.withMediaSource,X=void 0===Y?!0:Y,T=a.transport,da=L.wantedBufferAhead$,fa=L.maxBufferAhead$,ea=L.maxBufferBehind$,U=new c.Subject,V=new c.Subject,ja=x.default(T.manifest),W=m.default(function(a){a=ja({url:a});
var b=new c.Subject;return C.default("manifest",a,b,b,N).map(function(a){a=a.parsed;return w.normalizeManifest(a.url,a.manifest,ia,ha)})}),P={native:{},custom:{}};a=M.filter(function(a){var b=a.currentTime;a=a.duration;return 0<a&&a-b<I});L=p.retryableFuncWithBackoff(function(a){var b=a.mediaSource;a=b?t.onSourceOpen$(b):f.Observable.of(null);return f.Observable.combineLatest(W(S),a).mergeMap(function(a){return g(b,a[0])})},{totalRetry:3,retryDelay:250,resetDelay:6E4,shouldRetry:function(a){return r.isKnownError(a)?
!a.fatal:!0},errorSelector:function(a){if(!r.isKnownError(a))return new r.OtherError("NONE",a,!0);a.fatal=!0;return a},onRetry:function(a,b){n.default.warn("stream retry",a,b);N.next(a)}});return B.createAndPlugMediaSource(S,F,X,P).mergeMap(L).takeUntil(a)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(){this._cache={}}a.prototype.add=function(a,b){a=a.segment;a.isInit&&(this._cache[a.id]=b)};a.prototype.get=function(a){a=a.segment;return a.isInit&&(a=this._cache[a.id],
null!=a)?a:null};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h=a(10),f=a(18);b.default=function(a){var b=!1;return function(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];if(b)return l.Observable.empty();b=!0;return h.default(a.apply(void 0,c)).do(f.default,function(){return b=!1},function(){return b=!1})}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(6),h=a(256),f={limitWidth:{},throttle:{},initialBitrates:{},
manualBitrates:{},maxAutoBitrates:{}};e=function(){function a(a,b,e){void 0===e&&(e=f);var c=this;this._dispose$=new l.Subject;this._choosers={};this._chooserInstanceOptions={initialBitrates:e.initialBitrates||{},manualBitrates:e.manualBitrates||{},maxAutoBitrates:e.maxAutoBitrates||{},throttle:e.throttle||{},limitWidth:e.limitWidth||{}};b.takeUntil(this._dispose$).subscribe(function(a){var b=a.type;a=a.value;c._lazilyCreateChooser(b);c._choosers[b].addEstimate(a.duration,a.size)});a.mergeMap(function(a){return a}).takeUntil(this._dispose$).subscribe(function(a){var b=
a.type,d=a.value;c._lazilyCreateChooser(b);switch(a.event){case "requestBegin":c._choosers[b].addPendingRequest(d.id,a);break;case "requestEnd":c._choosers[b].removePendingRequest(d.id);break;case "progress":c._choosers[b].addRequestProgress(d.id,a)}})}a.prototype.get$=function(a,b,f){void 0===f&&(f=[]);this._lazilyCreateChooser(a);return this._choosers[a].get$(b,f)};a.prototype.setManualBitrate=function(a,b){var c=this._choosers[a];c?c.manualBitrate$.next(b):this._chooserInstanceOptions.initialBitrates[a]=
b};a.prototype.setMaxAutoBitrate=function(a,b){var c=this._choosers[a];c?c.maxAutoBitrate$.next(b):this._chooserInstanceOptions.maxAutoBitrates[a]=b};a.prototype.getManualBitrate=function(a){var b=this._choosers[a];return b?b.manualBitrate$.getValue():this._chooserInstanceOptions.manualBitrates[a]};a.prototype.getMaxAutoBitrate=function(a){var b=this._choosers[a];return b?b.maxAutoBitrate$.getValue():this._chooserInstanceOptions.maxAutoBitrates[a]};a.prototype.dispose=function(){var a=this;Object.keys(this._choosers).forEach(function(b){a._choosers[b].dispose()});
this._chooserInstanceOptions=f;this._choosers={};this._dispose$.next();this._dispose$.complete()};a.prototype._lazilyCreateChooser=function(a){if(!this._choosers[a]){var b=this._choosers;var c=this._chooserInstanceOptions;c=new h.default({limitWidth$:c.limitWidth[a],throttle$:c.throttle[a],initialBitrate:c.initialBitrates[a],manualBitrate:c.manualBitrates[a],maxAutoBitrate:c.maxAutoBitrates[a]});b[a]=c}};return a}();b.default=e},function(e,b,a){function l(a,b){a=p.default(a,b)||a[0];return k.Observable.of({bitrate:void 0,
representation:a})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(7),f=a(81),k=a(0),c=a(6);e=a(4);a(2);var d=a(257),g=a(258),n=a(259),p=a(260),m=a(92),q=e.default.ABR_STARVATION_GAP,t=e.default.OUT_OF_STARVATION_GAP,r=e.default.ABR_STARVATION_FACTOR,u=e.default.ABR_REGULAR_FACTOR;a=function(){function a(a){this._dispose$=new c.Subject;this.manualBitrate$=new f.BehaviorSubject(null!=a.manualBitrate?a.manualBitrate:-1);this.maxAutoBitrate$=new f.BehaviorSubject(null!=a.maxAutoBitrate?a.maxAutoBitrate:
Infinity);this.estimator=new d.default;this._currentRequests={};this._initialBitrate=a.initialBitrate||0;this._limitWidth$=a.limitWidth$;this._throttle$=a.throttle$}a.prototype.get$=function(a,b){var c=this;if(2>b.length)return k.Observable.of({bitrate:void 0,representation:b.length?b[0]:null}).takeUntil(this._dispose$);var d=this.manualBitrate$,f=this.maxAutoBitrate$,e=this._initialBitrate,v=[];this._limitWidth$&&v.push(this._limitWidth$.map(function(a){return{width:a}}));this._throttle$&&v.push(this._throttle$.map(function(a){return{bitrate:a}}));
var w=v.length?k.Observable.combineLatest.apply(k.Observable,v).map(function(a){return h.apply(void 0,[{}].concat(a))}):k.Observable.of({}),x;return d.switchMap(function(d){if(0<=d)return l(b,d);var h=!1;return k.Observable.combineLatest(a,f,w).map(function(a){var d=a[0],f=a[1];a=a[2];var k=d.bufferGap;k<=q?h=!0:h&&k>=t&&(h=!1);if(h){var l=d.bitrate;a:{var v=c._currentRequests;k+=d.position;for(var w=Object.keys(v),A=w.length,z=0;z<A-1;z++){var B=v[w[z]];if(Math.abs(k-B.time)<B.duration){k=B;break a}}k=
void 0}if(k&&(w=k.duration,v=k.requestTimestamp,v=(Date.now()-v)/1E3,w&&v>1.2*w+1)){var y=k;if(2<=y.progress.length){var C=new m.default(2);k=y.progress;for(w=1;w<k.length;w++)A=k[w].timestamp-k[w-1].timestamp,C.addSample(A/1E3,8*(k[w].size-k[w-1].size)/(A/1E3));C=C.getEstimate()}!C&&l&&(C=y.duration*l/(5*v/4));y=C;if(null!=y){c.resetEstimate();var D=null!=l?Math.min(y,l,f):Math.min(y,f)}}}null==D&&(y=c.estimator.getEstimate(),D=Math.min(null!=y?h?y*r:y*u:null!=x?h?x*r:x*u:e,f));1<d.speed&&(D/=d.speed);
d=b;null!=a.bitrate&&(d=g.default(d,a.bitrate));null!=a.width&&(d=n.default(d,a.width));return{bitrate:y,representation:p.default(d,D)||b[0]}}).do(function(a){a=a.bitrate;null!=a&&(x=a)}).share()})};a.prototype.addEstimate=function(a,b){null!=a&&null!=b&&this.estimator.addSample(a,b)};a.prototype.resetEstimate=function(){this.estimator.reset()};a.prototype.addPendingRequest=function(a,b){b=b.value;this._currentRequests[a]={time:b.time,duration:b.duration,requestTimestamp:b.requestTimestamp,progress:[]};
this._currentRequests[a].progress=[]};a.prototype.addRequestProgress=function(a,b){this._currentRequests[a].progress.push(b.value)};a.prototype.removePendingRequest=function(a){delete this._currentRequests[a]};a.prototype.resetRequests=function(){this._currentRequests={}};a.prototype.dispose=function(){this._dispose$.next();this.manualBitrate$.complete();this.maxAutoBitrate$.complete()};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(4);var l=a(92),h=
e.default.ABR_MINIMUM_TOTAL_BYTES,f=e.default.ABR_MINIMUM_CHUNK_SIZE;a=function(){function a(){this._fast=new l.default(2);this._slow=new l.default(10);this._bytesSampled=0}a.prototype.addSample=function(a,b){if(!(b<f)){var c=8E3*b/a;a/=1E3;this._bytesSampled+=b;this._fast.addSample(a,c);this._slow.addSample(a,c)}};a.prototype.getEstimate=function(){if(!(this._bytesSampled<h))return Math.min(this._fast.getEstimate(),this._slow.getEstimate())};a.prototype.reset=function(){this._fast=new l.default(2);
this._slow=new l.default(10);this._bytesSampled=0};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(93);b.default=function(a,b){var f=l(a,function(a){return a.bitrate>b});return-1===f?a:a.slice(0,f)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(17);b.default=function(a,b){var f=a.sort(function(a,b){return(a.width||0)-(b.width||0)});if(f=l(f,function(a){return(a.width||0)>=b})){var c=f.width||0;return a.filter(function(a){return(a.width||
0)<=c})}return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(93);b.default=function(a,b){var f=l(a,function(a){return a.bitrate>b});return-1===f?a[a.length-1]:a[f-1]}},function(e,b,a){function l(a,b,c,d){var f=d.low;d=d.high;var e=b.currentTime+b.timeOffset,g=(b.duration||Infinity)-e;b=Math.max(0,null==b.liveGap?Math.min(c,g):Math.min(c,b.liveGap,g));a=n.getLeftSizeOfRange(a,e);return{start:e+(a>f&&Infinity>a?Math.min(a,d):0),end:e+b}}Object.defineProperty(b,"__esModule",
{value:!0});var h=a(7),f=a(0),k=a(6);e=a(4);var c=a(8),d=a(262),g=a(1),n=a(15),p=a(263),m=a(264),q=a(265),t=a(266),r=e.default.BITRATE_REBUFFERING_RATIO;b.Buffer=function(a){function b(a,b,d,f){var e=null;f&&(g.default.debug("add init segment",G),e=a.index.getInitSegment());if(0===d.readyState)return e?[e]:[];d=b.start;f=b.end;b=f-d;var k=O.inventory.map(function(a){return a.segment});a.index.shouldRefresh(k,d,f)&&(f=new c.IndexError("OUT_OF_INDEX_ERROR",a.index.getType(),!1),I.next({type:"out-of-index",
value:f}));a=a.index.getSegments(d,b);e&&a.unshift(e);return a}function e(a){function k(b,c){if(q.test(b.id))return!1;if(b.isInit||0>b.time)return!0;var d=b.duration;if(!d)return!0;b=O.hasPlayableSegment(c,b.time,d,b.timescale);return!b||b.bitrate*r<a.bitrate}function n(c,d,e){var h=K.getBuffered();O.addBufferedInfos(h);if(c.stalled&&H){var n=a.index.checkDiscontinuity(c.currentTime);0<n&&I.next({type:"index-discontinuity",value:{ts:n+1}})}e=0===e;var m=l(h,c,d,{low:J,high:Q});g.default.debug("calculating segments for wanted range",
m);c=b(a,m,c,e).filter(function(a){return k(a,m)});g.default.debug("segments needed:",!!c.length,c);for(d=0;d<c.length;d++)q.add(c[d].id);return f.Observable.of.apply(f.Observable,c)}function t(b){return u({segment:b,representation:a,init:E}).map(function(a){return h({segment:b},a)})}g.default.info("bitrate",G,a.bitrate);var q=new d.SimpleSet,v=f.Observable.combineLatest(A,B,C,D).mergeMap(function(a,b){var c=a[0],d=a[2],e=a[3];a=n(c,Math.min(a[1],e),b).concatMap(t);c=p.default(K,c.currentTime,d,e);
return f.Observable.merge(a,c)}).concatMap(function(b){function d(){q.remove(g.id);if(!g.isInit){var b=n?n:g,c=b.time,d=b.duration;b=b.timescale;O.insert(g,c/b,null!=d?(c+d)/b:void 0,a.bitrate)}}function e(){return(null!=l?K.appendBuffer(l):f.Observable.of(null)).do(d)}var g=b.segment,k=b.parsed,l=k.segmentData,n=k.segmentInfos;g.isInit&&(E=n);return e().catch(function(a){if(!a||"QuotaExceededError"!==a.name)throw q.remove(g.id),new c.MediaError("BUFFER_APPEND_ERROR",a,!0);return m.default(A,K).mergeMap(e).catch(function(a){q.remove(g.id);
throw new c.MediaError("BUFFER_FULL_ERROR",a,!0);})}).map(function(){return{type:"pipeline",value:h({bufferType:G},b)}})});return f.Observable.merge(v,I).catch(function(b){if(!H||b.type!==c.ErrorTypes.NETWORK_ERROR||!b.isHttpError(412))throw b;return f.Observable.of({type:"precondition-failed",value:b}).concat(f.Observable.timer(2E3).mergeMap(function(){return e(a)}))}).startWith({type:"representationChange",value:{type:G,representation:a}})}var n=a.sourceBuffer,u=a.downloader,z=a.switch$,A=a.clock$,
B=a.wantedBufferAhead,C=a.maxBufferBehind,D=a.maxBufferAhead,G=a.bufferType,H=a.isLive,E=null,I=new k.Subject,J="video"===G?4:1,Q="video"===G?6:1,O=new t.default,K=new q.default(n);return z.switchMap(e).finally(function(){return K.dispose()})};b.EmptyBuffer=function(a){return f.Observable.of({type:"representationChange",value:{type:a.bufferType,representation:null}})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(){this._hash={}}a.prototype.add=function(a){this._hash[a]=
!0};a.prototype.remove=function(a){delete this._hash[a]};a.prototype.test=function(a){return!!this._hash[a]};return a}();b.SimpleSet=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h=a(1),f=a(15);b.default=function(a,b,d,e){if(!isFinite(d)&&!isFinite(e))return l.Observable.empty();var c=[],g=f.getInnerAndOuterTimeRanges(a.getBuffered(),b),k=g.innerRange,q=g.outerRanges;(function(){if(isFinite(d)){for(var a=0;a<q.length;a++){var f=q[a];b-d>=f.end?c.push(f):b>=f.end&&
b-d>f.start&&b-d<f.end&&c.push({start:f.start,end:b-d})}k&&b-d>k.start&&c.push({start:k.start,end:b-d})}})();(function(){if(isFinite(e)){for(var a=0;a<q.length;a++){var d=q[a];b+e<=d.start?c.push(d):b<=d.start&&b+e<d.end&&b+e>d.start&&c.push({start:b+e,end:d.end})}k&&b+e<k.end&&c.push({start:b+e,end:k.end})}})();return l.Observable.from(c.map(function(b){h.default.info("cleaning range from source buffer",b);return a.removeBuffer(b)})).concatAll().ignoreElements()}},function(e,b,a){function l(a,b,
c){var d=k.getInnerAndOuterTimeRanges(b,a);b=d.innerRange;d=d.outerRanges;for(var e=[],g=0;g<d.length;g++){var h=d[g];a-c<h.end?e.push(h):a+c>h.start&&e.push(h)}b&&(f.default.debug("buffer: gc removing part of inner range",e),a-c>b.start&&e.push({start:b.start,end:a-c}),a+c<b.end&&e.push({start:a+c,end:b.end}));return e}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);e=a(4);var f=a(1),k=a(15),c=e.default.BUFFER_GC_GAPS.CALM,d=e.default.BUFFER_GC_GAPS.BEEFY;b.default=function(a,b){f.default.warn("buffer: running garbage collector");
return a.take(1).mergeMap(function(a){var e=b.getBuffered(),g=l(a.currentTime,e,c);0===g.length&&(g=l(a.currentTime,e,d));f.default.debug("buffer: gc cleaning",g);return h.Observable.from(g.map(function(a){return b.removeBuffer(a)})).concatAll()})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(7),h=a(6),f=a(1),k;(function(a){a[a.Append=0]="Append";a[a.Remove=1]="Remove"})(k||(k={}));e=function(){function a(a){this._buffer=a;this._queue=[];this._flushing=null;this.__onUpdate=
this._onUpdate.bind(this);this.__onError=this._onError.bind(this);this.__flush=this._flush.bind(this);this._buffer.addEventListener("update",this.__onUpdate);this._buffer.addEventListener("error",this.__onError);this._buffer.addEventListener("updateend",this.__flush)}a.prototype.appendBuffer=function(a){return this._queueAction({type:k.Append,args:a})};a.prototype.removeBuffer=function(a){return this._queueAction({type:k.Remove,args:{start:a.start,end:a.end}})};a.prototype.getBuffered=function(){return this._buffer.buffered};
a.prototype.dispose=function(){this._buffer.removeEventListener("update",this.__onUpdate);this._buffer.removeEventListener("error",this.__onError);this._buffer.removeEventListener("updateend",this.__flush);this._queue.length=0;this._flushing=null};a.prototype._onUpdate=function(a){this._flushing&&(this._flushing.next(a),this._flushing.complete(),this._flushing=null)};a.prototype._onError=function(a){this._flushing&&(this._flushing.error(a),this._flushing=null)};a.prototype._queueAction=function(a){var b=
new h.Subject;a=l({subj:b},a);1===this._queue.unshift(a)&&this._flush();return b};a.prototype._flush=function(){if(!this._flushing&&0!==this._queue.length&&!this._buffer.updating){var a=this._queue.pop();this._flushing=a.subj;try{switch(a.type){case k.Append:f.default.debug("pushing data to source buffer",a.args);this._buffer.appendBuffer(a.args);break;case k.Remove:var b=a.args,c=b.start,e=b.end;f.default.debug("removing data from source buffer",c,e);this._buffer.remove(c,e)}}catch(m){this._onError(m)}}};
return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(4);var l=a(1),h=a(15),f=a(267),k=e.default.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,c=e.default.MAX_BUFFERED_DISTANCE,d=e.default.MINIMUM_SEGMENT_SIZE;a=function(){function a(){this.inventory=[]}a.prototype.addBufferedInfos=function(a){var b=this.inventory;a=h.convertToRanges(a);for(var e=0,g=b[0],k=a.length,l=0;l<k;l++){if(null==g)return;var n=a[l],v=n.start;n=n.end;if(!(n-v<d)){for(var w=e;g&&f.default(g.bufferedEnd,
g.end)-v<d;)g=b[++e];var x=-1,y=e-w;0<y&&(e=b[w+y-1],x=f.default(e.bufferedEnd,e.end),b.splice(w,y),e=w);if(null==g)return;if(n-f.default(g.bufferedStart,g.start)>=d)for(null!=g.bufferedStart&&g.bufferedStart<v?g.bufferedStart=v:null==g.bufferedStart&&(g.bufferedStart=-1!==x&&x>v&&g.start-x<=c?x:g.start-v<=c?v:g.start),g=b[++e];g&&n-f.default(g.bufferedStart,g.start)>=d;)v=b[e-1],null==v.bufferedEnd&&(v.bufferedEnd=v.end),g.bufferedStart=v.bufferedEnd,g=b[++e];if(v=b[e-1])null!=v.bufferedEnd&&v.bufferedEnd>
n?v.bufferedEnd=n:null==v.bufferedEnd&&(v.bufferedEnd=n-v.end<=c?n:v.end)}}g&&b.splice(e,b.length-e)};a.prototype.insert=function(a,b,c,d){if(null!=c){var e=this.inventory;a={bitrate:d,start:b,end:c,bufferedStart:void 0,bufferedEnd:void 0,segment:a};for(d=e.length-1;0<=d;d--){var f=e[d];if(f.start<=b){f.end<=b?this.inventory.splice(d+1,0,a):f.start>=b?this.inventory.splice(d,1,a):(null!=f.end&&(f.end=b),this.inventory.splice(d+1,0,a));return}}(e=this.inventory[0])?null==c?e.start===b?this.inventory.splice(0,
1,a):this.inventory.splice(0,0,a):e.start>=c?this.inventory.splice(0,0,a):e.end<=c?this.inventory.splice(0,1,a):(e.start=c,this.inventory.splice(0,0,a)):this.inventory.push(a)}};a.prototype.hasPlayableSegment=function(a,b,c,d){function e(a,b,c,d){if(!c||null==c.bufferedEnd||null==b.bufferedStart||c.bufferedEnd<b.bufferedStart){if(null==b.bufferedStart)return!1;var e=b.bufferedStart-b.start;if(a.start>b.start){if(c=b.bufferedStart-a.start,0<c&&e>k)return l.default.debug("The wanted segment has been garbage collected",
b),!1}else if(e>k)return l.default.debug("The wanted segment has been garbage collected",b),!1}if(null===b.end)return!1;if(!d||null==d.bufferedStart||null==b.bufferedEnd||d.bufferedStart>b.bufferedEnd){if(null==b.bufferedEnd)return!1;e=b.end-b.bufferedEnd;if(a.end<b.end){if(c=a.end-b.bufferedEnd,0<c&&e>k)return l.default.debug("The wanted segment has been garbage collected",b),!1}else if(e>k)return l.default.debug("The wanted segment has been garbage collected",b),!1}return!0}for(var f=this.inventory,
g=f.length-1;0<=g;g--){var h=f[g],n=f[g-1],m=f[g+1],p=h.segment,q=b,A=c;p.timescale!==d&&(q=b*p.timescale/d,A=c*p.timescale/d);if(p.time===q&&p.duration===A&&(p=n&&null==n.bufferedEnd||null==h.bufferedStart?!1:m&&null==m.bufferedStart||null==h.bufferedEnd?!1:!0,p&&e(a,h,n,m)))return h}return null};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(var e=a.length;b<e;){if(null!=
a[b])return a[b];b++}}},function(e,b,a){function l(a){var b=v.normalizeBaseURL(a.locations[0]);return(a=a.periods[0])&&a.baseURL?v.resolveURL(b,a.baseURL):b}function h(a,b,d,e){"undefined"===typeof a.id&&(a.id="gen-period-"+x++);var g=a.adaptations.map(function(a){return f(a,b)});d&&g.push.apply(g,k(d).map(function(a){return f(a,b)}));e&&g.push.apply(g,c(e).map(function(a){return f(a,b)}));d=g.filter(function(a){return 0>y.indexOf(a.type)?(u.default.info("not supported adaptation type",a.type),!1):
!0});if(0===d.length)throw new q.MediaError("MANIFEST_PARSE_ERROR",null,!0);e={};for(g=0;g<d.length;g++){var h=d[g],l=h.representations;var n=h.type;e[n]||(e[n]=[]);0<l.length&&e[n].push(h)}for(n in e)if(0===e[n].length)throw new q.MediaError("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!0);a.adaptations=e;return a}function f(a,b){if("undefined"===typeof a.id)throw new q.MediaError("MANIFEST_PARSE_ERROR",null,!0);var c=d(b,a),e={};w.forEach(function(a){a in c&&(e[a]=c[a])});a=c.representations.map(function(a){var b=
c.rootURL,f=c.baseURL;if("undefined"===typeof a.id)throw new q.MediaError("MANIFEST_PARSE_ERROR",null,!0);a=d(e,a);a.index?a.index.timescale||(a.index.timescale=1):a.index={indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0};null==a.bitrate?a.bitrate=1:0===a.bitrate&&u.default.warn("One of your representation has an invalid bitrate of 0.");"mp4a.40.02"===a.codecs&&(a.codecs="mp4a.40.2");a.baseURL=v.resolveURL(b,f,a.baseURL);a.codec=a.codecs;return a}).sort(function(a,b){return a.bitrate-
b.bitrate});b=c.type;var f=c.accessibility;f=void 0===f?[]:f;if(!b)throw new q.MediaError("MANIFEST_PARSE_ERROR",null,!0);switch(b){case "video":case "audio":a=a.filter(function(a){return m.isCodecSupported(g(a))});"audio"===b&&(b=p.default(f,"visuallyImpaired"),c.audioDescription=b);break;case "text":b=p.default(f,"hardOfHearing"),c.closedCaption=b}c.representations=a;c.bitrates=a.map(function(a){return a.bitrate});return c}function k(a){return(Array.isArray(a)?a:[a]).reduce(function(a,b){var c=
b.mimeType,d=b.codecs,e=b.url,f=b.language,g=b.languages,k=b.closedCaption;return a.concat((f?[f]:g||[]).map(function(a){return{id:"gen-text-ada-"+x++,type:"text",language:a,normalizedLanguage:r.normalize(a),accessibility:k?["hardOfHearing"]:[],baseURL:e,manuallyAdded:!0,representations:[{id:"gen-text-rep-"+x++,mimeType:c,codecs:d,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}}))},[])}function c(a){return(Array.isArray(a)?a:[a]).map(function(a){var b=a.mimeType;
a=a.url;return{id:"gen-image-ada-"+x++,type:"image",baseURL:a,manuallyAdded:!0,representations:[{id:"gen-image-rep-"+x++,mimeType:b,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})}function d(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b={};for(var c=a.length-1;0<=c;c--){var e=a[c],f;for(f in e)if(!b.hasOwnProperty(f)){var g=e[f];g&&"object"===typeof g?g instanceof Date?b[f]=new Date(g.getTime()):Array.isArray(g)?b[f]=g.slice(0):b[f]=d(g):b[f]=
g}}return b}function g(a){var b=a.codec;a=a.mimeType;return(void 0===a?"":a)+';codecs="'+(void 0===b?"":b)+'"'}Object.defineProperty(b,"__esModule",{value:!0});var n=a(17),p=a(9),m=a(5),q=a(8),t=a(269),r=a(34),u=a(1),v=a(23),w="audioSamplingRate codecs codingDependency frameRate height index maxPlayoutRate maximumSAPPeriod mimeType profiles segmentProfiles width".split(" "),x=0,y=["audio","video","text","image"];b.normalizeManifest=function(a,b,c,e){if(!b.transportType)throw new q.MediaError("MANIFEST_PARSE_ERROR",
null,!0);b.id=b.id||"gen-manifest-"+x++;b.type=b.type||"static";b.isLive="dynamic"===b.type;var f=b.locations;f&&f.length||(b.locations=[a]);var g={rootURL:l(b),baseURL:b.baseURL,isLive:b.isLive};a=b.periods.map(function(a){return h(a,g,c,e)});b=d(b,a[0]);b.periods=null;b.duration||(b.duration=Infinity);b.isLive&&(b.suggestedPresentationDelay=b.suggestedPresentationDelay||0,b.availabilityStartTime=b.availabilityStartTime||0);return new t.default(b)};b.updateManifest=function(a,b){var c=a.getAdaptations(),
d=b.getAdaptations();b=function(a){var b=n(d,function(b){return b.id===c[a].id});if(b){var e=c[a].representations,f=b.representations;b=function(a){var b=n(f,function(b){return b.id===e[a].id});b?e[a].index.update(b.index):u.default.warn('manifest: representation "'+e[a].id+'" not found when merging.')};for(var g=0;g<e.length;g++)b(g)}else u.default.warn('manifest: adaptation "'+c[a].id+'" not found when merging.')};for(var e=0;e<c.length;e++)b(e);return a};b.getCodec=g},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var l=a(17);a(2);var h=a(51),f=a(270);e=function(){function a(a){var b=h.default();this.id=null==a.id?b:""+a.id;this.transport=a.transportType||"";this.adaptations=Object.keys(a.adaptations).reduce(function(b,c){b[c]=(a.adaptations[c]||[]).map(function(a){return new f.default(a)});return b},{})||[];this.periods=[{adaptations:this.adaptations}];this.isLive="dynamic"===a.type;this.uris=a.locations||[];this._duration=a.duration;this.suggestedPresentationDelay=a.suggestedPresentationDelay;
this.availabilityStartTime=a.availabilityStartTime;this.presentationLiveGap=a.presentationLiveGap;this.timeShiftBufferDepth=a.timeShiftBufferDepth}a.prototype.getDuration=function(){return this._duration};a.prototype.getUrl=function(){return this.uris[0]};a.prototype.getAdaptations=function(){var a=this.adaptations;if(!a)return[];var b=[],e;for(e in a)a.hasOwnProperty(e)&&b.push.apply(b,a[e]);return b};a.prototype.getAdaptationsForType=function(a){return this.adaptations[a]||[]};a.prototype.getAdaptation=
function(a){return l(this.getAdaptations(),function(b){return a===b.id})};a.prototype.updateLiveGap=function(a){this.isLive&&(this.presentationLiveGap=this.presentationLiveGap?this.presentationLiveGap+a:a)};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(17),h=a(7),f=a(51),k=a(271);e=function(){function a(a){var b=this,c=f.default();this.id=null==a.id?c:""+a.id;this.type=a.type;this.representations=Array.isArray(a.representations)?a.representations.map(function(a){return new k.default(h({rootId:b.id},
a))}).sort(function(a,b){return a.bitrate-b.bitrate}):[];null!=a.language&&(this.language=a.language);null!=a.normalizedLanguage&&(this.normalizedLanguage=a.normalizedLanguage);null!=a.closedCaption&&(this.isClosedCaption=a.closedCaption);null!=a.audioDescription&&(this.isAudioDescription=a.audioDescription);null!=a.contentProtection&&(this.contentProtection=a.contentProtection);null!=a.smoothProtection&&(this._smoothProtection=a.smoothProtection);this.manuallyAdded=!!a.manuallyAdded}a.prototype.getAvailableBitrates=
function(){return this.representations.map(function(a){return a.bitrate})};a.prototype.getRepresentation=function(a){return l(this.representations,function(b){return a===b.id})};a.prototype.getRepresentationsForBitrate=function(a){return this.representations.filter(function(b){return b.bitrate===a})||null};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(51),h=a(272);e=function(){return function(a){var b=l.default();this.id=null==a.id?b:a.id;this.bitrate=
a.bitrate;this.codec=a.codecs;null!=a.height&&(this.height=a.height);null!=a.width&&(this.width=a.width);null!=a.mimeType&&(this.mimeType=a.mimeType);this.index=new h.default({index:a.index,rootId:this.id});this.baseURL=a.baseURL;null!=a.codecPrivateData&&(this._codecPrivateData=a.codecPrivateData);null!=a.channels&&(this._channels=a.channels);null!=a.bitsPerSample&&(this._bitsPerSample=a.bitsPerSample);null!=a.packetSize&&(this._packetSize=a.packetSize);null!=a.samplingRate&&(this._samplingRate=
a.samplingRate)}}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(273);e=function(){function a(a){this._index=a.index;this._rootId=a.rootId;this._indexHelpers=l.default(this._index)}a.prototype.getInitSegment=function(){return this._indexHelpers.getInitSegment(this._rootId,this._index)};a.prototype.getSegments=function(a,b){return this._indexHelpers.getSegments(this._rootId,this._index,a,b)};a.prototype.shouldRefresh=function(a,b,c){return this._indexHelpers.shouldRefresh(this._index,
a,b,c)};a.prototype.getFirstPosition=function(){return this._indexHelpers.getFirstPosition(this._index)};a.prototype.getLastPosition=function(){return this._indexHelpers.getLastPosition(this._index)};a.prototype.checkDiscontinuity=function(a){return this._indexHelpers.checkDiscontinuity(this._index,a)};a.prototype.scale=function(a){return this._indexHelpers.scale(this._index,a)};a.prototype.setTimescale=function(a){return this._indexHelpers.setTimescale(this._index,a)};a.prototype._addSegments=function(a,
b){for(var c=[],d=0;d<a.length;d++)this._indexHelpers._addSegmentInfos(this._index,a[d],b)&&c.push(a[d]);return c};a.prototype.update=function(a){this._index=a._index};a.prototype.getType=function(){return this._index.indexType||""};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l={};l.smooth=a(274).default;l.timeline=a(52).default;l.template=a(275).default;l.list=a(276).default;l.base=a(277).default;b.default=function(a){return l[a.indexType]}},function(e,
b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(30);e=a(52);b.default={getSegments:e.default.getSegments,getInitSegment:l.getInitSegment,checkDiscontinuity:e.default.checkDiscontinuity,_addSegmentInfos:e.default._addSegmentInfos,setTimescale:l.setTimescale,scale:l.scale,shouldRefresh:function(a,b,e,c){var d=a.timeline;a=a.timescale;d=d[d.length-1];if(!d)return!1;var f=d.r||0,k=d.ts+f*d.d;if(c*a<k)return!1;if(e*a>=k)return!0;b=b[b.length-1];return!b||d.ts+f*d.d>b.time?!1:!0},getFirstPosition:function(a){if(a.timeline.length)return a.timeline[0].ts/
a.timescale},getLastPosition:function(a){if(a.timeline.length)return l.getTimelineRangeEnd(a.timeline[a.timeline.length-1])/a.timescale}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(35),h=a(30);b.default={getInitSegment:h.getInitSegment,setTimescale:h.setTimescale,scale:h.scale,getSegments:function(a,b,c,d){var e=h.normalizeRange(b,c,d);c=e.to;d=b.duration;var f=b.startNumber,k=b.timescale;b=b.media;var m=[];for(e=e.up;e<=c;e+=d){var q=Math.floor(e/d)+(null==f?1:f);m.push(new l.default({id:""+
a+"_"+q,number:q,time:q*d,init:!1,duration:d,range:null,indexRange:null,timescale:k,media:b}))}return m},getFirstPosition:function(){},getLastPosition:function(){},shouldRefresh:function(){return!1},checkDiscontinuity:function(){return-1},_addSegmentInfos:function(){return!1}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(35),h=a(30);b.default={getInitSegment:h.getInitSegment,setTimescale:h.setTimescale,scale:h.scale,getSegments:function(a,b,c,d){var e=h.normalizeRange(b,
c,d);c=b.duration;d=b.list;b=b.timescale;var f=Math.min(d.length-1,Math.floor(e.to/c)),k=[];for(e=Math.floor(e.up/c);e<=f;)k.push(new l.default({id:""+a+"_"+e,time:e*c,init:!1,range:d[e].range,duration:c,indexRange:null,timescale:b,media:d[e].media})),e++;return k},getFirstPosition:function(){return 0},getLastPosition:function(a){return a.list.length*a.duration/a.timescale},shouldRefresh:function(a,b,c,d){b=a.list;c=a.presentationTimeOffset;a=Math.floor((d*a.timescale-(void 0===c?0:c))/a.duration);
return!(0<=a&&a<b.length)},_addSegmentInfos:function(){return!1},checkDiscontinuity:function(){return-1}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(30);a=a(52);b.default={getInitSegment:e.getInitSegment,setTimescale:e.setTimescale,scale:e.scale,getSegments:a.default.getSegments,getFirstPosition:a.default.getFirstPosition,getLastPosition:a.default.getLastPosition,checkDiscontinuity:a.default.checkDiscontinuity,_addSegmentInfos:function(a,b){if(b.timescale!==a.timescale){var e=
a.timescale;a.timeline.push({ts:b.time/b.timescale*e,d:b.duration/b.timescale*e,r:b.count,range:b.range})}else a.timeline.push({ts:b.time,d:b.duration,r:b.count,range:b.range});return!0},shouldRefresh:function(){return!1}}},function(e,b,a){function l(a,b,c){void 0===c&&(c=!0);return p.isKnownError(b)?b:b instanceof p.RequestError?new p.NetworkError(a,b,c):new p.OtherError(a,b,c)}Object.defineProperty(b,"__esModule",{value:!0});var h=a(7),f=a(0),k=a(6),c=a(9),d=a(10),g=a(18),n=a(53);e=a(4);var p=a(8),
m=a(279),q=e.default.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,t=e.default.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE,r=e.default.MAX_BACKOFF_DELAY_BASE,u=e.default.INITIAL_BACKOFF_DELAY_BASE;b.default=function(a,b){function e(a){return n.default(H,a).catch(function(a){throw l("PIPELINE_RESOLVE_ERROR",a);})}function p(a,b){function c(a){return m.default(n.default(E,a),J).catch(function(a){throw l("PIPELINE_LOAD_ERROR",a);}).do(function(b){var c=b.value;"response"===b.type&&D&&D.add(a,c)}).startWith({type:"request",
value:b})}var e=D?D.get(a):null;return null===e?c(a):d.default(e).map(function(a){return{type:"cache",value:a}}).catch(function(){return c(a)})}function v(a){return n.default(I,a).catch(function(a){throw l("PIPELINE_PARSING_ERROR",a);})}var w=a.resolver,B=a.loader;a=a.parser;void 0===b&&(b={});var C=b.maxRetry,D=b.cache,G=new k.Subject,H=w||f.Observable.of,E=B||f.Observable.of,I=a||f.Observable.of,J={baseDelay:u,maxDelay:r,maxRetryRegular:"number"===typeof C?C:q,maxRetryOffline:t,onRetry:function(a){G.next(l("PIPELINE_LOAD_ERROR",
a,!1))}};return function(a){var b=e(a).mergeMap(function(b){return p(b,a).mergeMap(function(a){var d=a.type;a=a.value;if(c.default(["cache","data","response"],d)){var e=h({response:a},b);return("response"===d?f.Observable.of({type:"metrics",value:{size:a.size,duration:a.duration}}):f.Observable.empty()).concat(v(e).map(function(a){return{type:"data",value:h({parsed:a},e)}}))}return f.Observable.of({type:d,value:a})})}).do(g.default,g.default,function(){G.complete()}),d=G.map(function(a){return{type:"error",
value:a}});return f.Observable.merge(b,d)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h=a(5),f=a(8),k=a(91);b.default=function(a,b){var c=b.baseDelay,d=b.maxDelay,e=b.maxRetryRegular,m=b.maxRetryOffline,q=b.onRetry,t=0,r=0;return a.catch(function(a,b){var g=a instanceof f.RequestError?a.type===f.RequestErrorTypes.ERROR_HTTP_CODE?500<=a.status||404===a.status:a.type===f.RequestErrorTypes.TIMEOUT||a.type===f.RequestErrorTypes.ERROR_EVENT:!1;if(!g)throw a;g=a instanceof
f.RequestError&&a.type===f.RequestErrorTypes.ERROR_EVENT&&h.isOffline()?2:1;var n=2===g?m:e;g!==r&&(t=0,r=g);if(++t>n)throw a;q&&q(a,t);a=k.getFuzzedDelay(Math.min(c*Math.pow(2,t-1),d));return l.Observable.timer(a).mergeMap(function(){return b})})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(16),h=a(8),f=a(1),k=a(94);b.default=function(a,b,e){return b&&b.length?k.createEME(a,b,e):l.onEncrypted$(a).map(function(){f.default.error("eme: ciphered media and no keySystem passed");
throw new h.EncryptedMediaError("MEDIA_IS_ENCRYPTED_ERROR",null,!0);})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(282);b.InMemorySessionsSet=e.default;a=a(283);b.PersistedSessionsSet=a.default},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=
null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(10),k=a(1);e=a(95);var c=a(96);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};b.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(a(this._entries[b]))return this._entries[b];return null};b.prototype.get=function(a){var b=c.default(a);
return(a=this.find(function(a){return a.initData===b}))?a.session:null};b.prototype.add=function(a,b,d){a=c.default(a);var e=this.get(a);e&&this.deleteAndClose(e);d=d.connect();b={session:b,initData:a,eventSubscription:d};k.default.debug("eme-mem-store: add session",b);this._entries.push(b)};b.prototype.deleteById=function(a){var b=this.find(function(b){return b.session.sessionId===a});return b?this.delete(b.session):null};b.prototype.delete=function(a){var b=this.find(function(b){return b.session===
a});if(!b)return null;var c=b.session,d=b.eventSubscription;k.default.debug("eme-mem-store: delete session",b);b=this._entries.indexOf(b);this._entries.splice(b,1);d.unsubscribe();return c};b.prototype.deleteAndClose=function(a){return(a=this.delete(a))?(k.default.debug("eme-mem-store: close session",a),f.default(a.close()).catch(function(){return h.Observable.of(null)})):h.Observable.of(null)};b.prototype.dispose=function(){var a=this,b=this._entries.map(function(b){return a.deleteAndClose(b.session)});
this._entries=[];return h.Observable.merge.apply(h.Observable,b)};return b}(e.default);b.default=a},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(2),
f=a(1);e=a(95);var k=a(96);a=function(a){function b(b){var c=a.call(this)||this;c.setStorage(b);return c}l(b,a);b.prototype.setStorage=function(a){if(this._storage!==a){h.default(a,"no licenseStorage given for keySystem with persistentLicense");h.default.iface(a,"licenseStorage",{save:"function",load:"function"});this._storage=a;try{this._entries=this._storage.load(),h.default(Array.isArray(this._entries))}catch(n){f.default.warn("eme-persitent-store: could not get entries from license storage",n),
this.dispose()}}};b.prototype.get=function(a){var b=k.default(a);return this.find(function(a){return a.initData===b})||null};b.prototype.add=function(a,b){var c=b&&b.sessionId;if(c){a=k.default(a);var d=this.get(a);d&&d.sessionId===c||(d&&this.delete(a),f.default.info("eme-persitent-store: add new session",c,b),this._entries.push({sessionId:c,initData:a}),this._save())}};b.prototype.delete=function(a){var b=k.default(a);if(a=this.find(function(a){return a.initData===b}))f.default.warn("eme-persitent-store: delete session from store",
a),a=this._entries.indexOf(a),this._entries.splice(a,1),this._save()};b.prototype.dispose=function(){this._entries=[];this._save()};b.prototype._save=function(){try{this._storage.save(this._entries)}catch(g){f.default.warn("eme-persitent-store: could not save licenses in localStorage")}};return b}(e.default);b.default=a},function(e,b,a){function l(a,b){var c=b.$keySystem,e=b.$mediaKeys,f=b.$mediaKeySystemConfiguration;if(!c||!e||d.shouldRenewMediaKeys())return null;if(f)return(a=a.filter(function(a){return a.type!==
c.type||a.persistentLicense&&"required"!==f.persistentState||a.distinctiveIdentifierRequired&&"required"!==f.distinctiveIdentifier?!1:!0})[0])?{keySystem:a,keySystemAccess:new d.KeySystemAccess(c.type,e,f)}:null}function h(a){for(var b=0,c=Object.keys(q);b<c.length;b++){var d=c[b];if(g.default(q[d],a))return d}}function f(a,b){var c=["temporary"],d="optional",e="optional";b.persistentLicense&&(d="required",c.push("persistent-license"));b.persistentStateRequired&&(d="required");b.distinctiveIdentifierRequired&&
(e="required");var f=b.videoRobustnesses||("widevine"===a?m:[]);a=b.audioRobustnesses||("widevine"===a?m:[]);f.length||f.push(void 0);a.length||a.push(void 0);f=f.map(function(a){return{contentType:'video/mp4;codecs="avc1.4d401e"',robustness:a}});a=a.map(function(a){return{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:a}});return[{initDataTypes:["cenc"],videoCapabilities:f,audioCapabilities:a,distinctiveIdentifier:e,persistentState:d,sessionTypes:c}]}function k(a,b){if(b=l(a,b))return n.default.debug("eme: found compatible keySystem quickly",
b),c.Observable.of(b);var e=a.reduce(function(a,b){var c=q[b.type]?q[b.type].map(function(a){return{keyName:b.type,keyType:a,keySystem:b}}):[{keyName:h(b.type)||"",keyType:b.type,keySystem:b}];return a.concat(c)},[]);return c.Observable.create(function(a){function b(k){if(!c)if(k>=e.length)a.error(new p.EncryptedMediaError("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var h=e[k],l=h.keyType,m=h.keySystem,t=f(h.keyName,m);n.default.debug("eme: request keysystem access "+l+","+(k+1+" of "+e.length),t);g=
d.requestMediaKeySystemAccess(l,t).subscribe(function(b){n.default.info("eme: found compatible keysystem",l,t);a.next({keySystem:m,keySystemAccess:b});a.complete()},function(){n.default.debug("eme: rejected access to keysystem",l,t);g=null;b(k+1)})}}var c=!1,g;b(0);return function(){c=!0;g&&g.unsubscribe()}})}Object.defineProperty(b,"__esModule",{value:!0});var c=a(0),d=a(5);e=a(4);var g=a(9),n=a(1),p=a(8),m=e.default.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,q=e.default.EME_KEY_SYSTEMS;b.findCompatibleKeySystem=
k;b.getKeySystem=function(a){return a.$keySystem&&a.$keySystem.type};b.default=k},function(e,b,a){function l(a,b){return h.Observable.defer(function(){return k.default(a.setServerCertificate(b)).ignoreElements().catch(function(a){throw new f.default("LICENSE_SERVER_CERTIFICATE_ERROR",a,!0);})})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(84),k=a(10);b.setServerCertificate=l;b.trySettingServerCertificate=function(a,b,e){return l(a,b).catch(function(a){a.fatal=!1;e.next(a);return h.Observable.empty()})};
b.default=l},function(e,b,a){function l(a,b,c){return{type:"ISessionEvent",value:g({name:a,session:b},c)}}function h(a,b,c){function d(a,b){return m.isKnownError(a)&&a.type===m.ErrorTypes.ENCRYPTED_MEDIA_ERROR?(a.fatal=b,a):new m.EncryptedMediaError("KEY_LOAD_ERROR",a,b)}r.default.debug("eme: handle message events",a);var e={totalRetry:2,retryDelay:200,errorSelector:function(a){return d(a,!0)},onRetry:function(a){return c.next(d(a,!1))}},f=x.onKeyError$(a).map(function(a){throw new m.EncryptedMediaError("KEY_ERROR",
a,!0);}),g=x.onKeyStatusesChange$(a).mergeMap(function(c){r.default.debug("eme: keystatuseschange event",a,c);a.keyStatuses.forEach(function(a,b){if(y.KEY_STATUS_ERRORS[b])throw new m.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",b,!0);if(y.KEY_STATUS_ERRORS[a])throw new m.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",a,!0);});var d=w.default(function(){return b&&b.onKeyStatusesChange?t.default(b.onKeyStatusesChange(c,a)):n.Observable.empty()});if(d)return d.catch(function(a){throw new m.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",
a,!0);});r.default.info("eme: keystatuseschange event not handled");return n.Observable.empty()}),k=x.onKeyMessage$(a).mergeMap(function(c){var d=new Uint8Array(c.message),f=c.messageType||"license-request";r.default.debug("eme: event message type "+f,a,c);c=n.Observable.defer(function(){return t.default(b.getLicense(d,f)).timeout(1E4).catch(function(a){if(a instanceof p.TimeoutError)throw new m.EncryptedMediaError("KEY_LOAD_TIMEOUT",null,!1);throw a;})});return v.retryWithBackoff(c,e)});g=n.Observable.merge(k,
g).concatMap(function(b){r.default.debug("eme: update session",b);return t.default(a.update(b)).catch(function(a){throw new m.EncryptedMediaError("KEY_UPDATE_ERROR",a,!0);}).mapTo(l("session-update",a,{updatedWith:b}))});f=n.Observable.merge(g,f);return a.closed?f.takeUntil(t.default(a.closed)):f}function f(a,b,c,d,e){r.default.debug("eme: create a new "+b+" session");var f=a.createSession(b);a=h(f,c,e).finally(function(){z.$loadedSessions.deleteAndClose(f);z.$storedSessions.delete(d)}).publish();
return{session:f,sessionEvents:a}}function k(a,b,c,d,e,g){a=f(a,c,b,e,g);var k=a.session;a=a.sessionEvents;z.$loadedSessions.add(e,k,a);r.default.debug("eme: generate request",d,e);d=t.default(k.generateRequest(d,e)).catch(function(a){throw new m.EncryptedMediaError("KEY_GENERATE_REQUEST_ERROR",a,!1);}).do(function(){"persistent-license"===c&&z.$storedSessions.add(e,k)}).mapTo(l("generated-request",k,{initData:e,initDataType:d}));return n.Observable.merge(a,d)}function c(a,b,c,d,e,f){return k(a,b,
c,d,e,f).catch(function(g){if(g.code!==m.ErrorCodes.KEY_GENERATE_REQUEST_ERROR)throw g;var h=z.$loadedSessions.getFirst();if(!h)throw g;r.default.warn("eme: could not create a new session, retry after closing a currently loaded session",g);return z.$loadedSessions.deleteAndClose(h).mergeMap(function(){return k(a,b,c,d,e,f)})})}function d(a,b,d,e,g,k){r.default.debug("eme: load persisted session",d);var h=f(a,"persistent-license",b,g,k),m=h.session,p=h.sessionEvents;return t.default(m.load(d)).catch(function(){return n.Observable.of(!1)}).mergeMap(function(f){if(f)return z.$loadedSessions.add(g,
m,p),z.$storedSessions.add(g,m),p.startWith(l("loaded-session",m,{storedSessionId:d}));r.default.warn("eme: no data stored for the loaded session, do fallback",d);z.$loadedSessions.deleteById(d);z.$storedSessions.delete(g);m.sessionId&&t.default(m.remove()).subscribe(u.default,function(a){r.default.warn("Failed to remove session:"+a.message)});return c(a,b,"persistent-license",e,g,k).startWith(l("loaded-session-failed",m,{storedSessionId:d}))})}Object.defineProperty(b,"__esModule",{value:!0});var g=
a(7),n=a(0),p=a(80),m=a(8),q=a(9),t=a(10),r=a(1),u=a(18),v=a(90),w=a(53),x=a(16),y=a(287),z=a(54);b.default=function(a,b,e,f,g,k){return n.Observable.defer(function(){var h=z.$loadedSessions.get(g);if(h&&h.sessionId)return r.default.debug("eme: reuse loaded session",h.sessionId),n.Observable.of(l("reuse-session",h));h="temporary";var m=b.sessionTypes;return m&&q.default(m,"persistent-license")&&e.persistentLicense&&(h="persistent-license",m=z.$storedSessions.get(g))?d(a,e,m.sessionId,f,g,k):c(a,e,
h,f,g,k)})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.KEY_STATUS_ERRORS={expired:!0,"internal-error":!0}},function(e,b,a){function l(a,b,e,l,m){return h.Observable.defer(function(){var d=m.$videoElement,g=m.$mediaKeys;m.$mediaKeys=a;m.$mediaKeySystemConfiguration=b;m.$keySystem=l;m.$videoElement=e;if(e.mediaKeys===a)return h.Observable.of(a);g&&g!==a&&c.$loadedSessions.dispose();d&&d!==e?(k.default.debug("eme: unlink old video element and set mediakeys"),d=f.setMediaKeys(d,
null).concat(f.setMediaKeys(e,a))):(k.default.debug("eme: set mediakeys"),d=f.setMediaKeys(e,a));return d.mapTo(a)})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(5),k=a(1),c=a(54);b.setMediaKeys=l;b.disposeMediaKeys=function(a){return a?f.setMediaKeys(a,null):h.Observable.empty()};b.default=l},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(26),h=a(1),f=a(47);b.default=function(a){return f.default(a,"error").mergeMap(function(){switch(a.error.code){case 1:var b=
"MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b="MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:b="MEDIA_ERR_UNKNOWN"}h.default.error("stream: video element MEDIA_ERR("+b+")");throw new l.default(b,null,!0);})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(4);var l=a(55),h=e.default.DEFAULT_LIVE_GAP;b.default=function(a,b){if(b){var c=l.getBufferLimits(a),d=c[0];c=c[1];if(null!=b.position)return Math.max(Math.min(b.position,
c),d);if(null!=b.wallClockTime)return Math.max(Math.min(a.isLive?b.wallClockTime-(a.availabilityStartTime||0):b.wallClockTime,c),d);if(null!=b.fromFirstPosition)return a=b.fromFirstPosition,0>=a?d:Math.min(d+a,c);if(null!=b.fromLastPosition)return a=b.fromLastPosition,0<=a?c:Math.max(d,c+a);if(null!=b.percentage)return a=b.percentage,100<a?c:0>a?d:d+ +a/100*(c-d)}return a.isLive?(d=a.suggestedPresentationDelay,l.getMaximumBufferPosition(a)-(null==d?h:d)):0}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var l=a(0),h=a(5),f=a(26),k=a(1);b.setDurationToMediaSource=function(a,b){b=Infinity===b?Number.MAX_VALUE:b;a.duration!==b&&(a.duration=b,k.default.info("set duration",a.duration))};b.createAndPlugMediaSource=function(a,b,e,n){return l.Observable.create(function(c){function d(){if(p&&"closed"!==p.readyState){var a=p.readyState;for(var c=p.sourceBuffers,d=0;d<c.length;d++){var e=c[d];try{"open"===a&&(k.default.info("aborting previous source buffer",e),e.abort()),p.removeSourceBuffer(e)}catch(z){k.default.warn("error while disposing souceBuffer",
z)}}}e=0;for(c=Object.keys(g);e<c.length;e++)a=c[e],delete g[a];c=0;for(d=Object.keys(l);c<d.length;c++){a=d[c];e=l[a];try{e.abort()}catch(z){k.default.warn("error while disposing souceBuffer",z)}delete l[a]}h.clearVideoSrc(b);if(u)try{k.default.debug("revoking previous URL"),URL.revokeObjectURL(u)}catch(z){k.default.warn("error while revoking ObjectURL",z)}u=p=null}var g=n.native,l=n.custom;d();if(e){if(!h.MediaSource_)throw new f.default("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);k.default.info("creating MediaSource");
var p=new h.MediaSource_;var u=URL.createObjectURL(p)}else p=null,u=a;k.default.info("attaching MediaSource URL to video element",u);b.src=u;c.next({url:a,mediaSource:p});return d})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(6);b.default=function(a,b,e,c,d){var f,k;return b.filter(function(b){var g=b.type;b=b.value;if("data"===g||"cache"===g)return!0;if("error"===g)b.pipelineType=a,d.next(b);else if("manifest"!==a)switch(g){case "metrics":e.next({type:a,value:b});break;
case "request":g=b&&b.segment;if(null!=g&&null!=g.duration){b=g.duration/g.timescale;var h=g.time/g.timescale;k=g.id;g={duration:b,time:h,requestTimestamp:Date.now(),id:k};f=new l.Subject;c.next(f);f.next({type:a,event:"requestBegin",value:g})}break;case "progress":b.size!==b.totalSize&&null!=k&&(g={duration:b.duration,size:b.size,totalSize:b.totalSize,timestamp:Date.now(),id:k},null!=f&&f.next({type:a,event:"progress",value:g}))}return!1}).map(function(a){return a.value}).finally(function(){null!=
f&&("manifest"!==a&&null!=k&&f.next({type:a,event:"requestEnd",value:{id:k}}),f.complete())}).share()}},function(e,b,a){function l(a){return"audio"===a||"video"===a}function h(a,b,c,d){d=d.native;null==d[b]&&(k.default.info("adding native sourcebuffer with type",c),d[b]=a.addSourceBuffer(c));return d[b]}Object.defineProperty(b,"__esModule",{value:!0});var f=a(26),k=a(1),c=a(294),d=a(295);e=a(97);b.ICustomTimeRanges=e.default;b.shouldHaveNativeSourceBuffer=l;b.addNativeSourceBuffer=h;b.createSourceBuffer=
function(a,b,e,m,q,t){void 0===t&&(t={});if(l(e))a=h(b,e,m,q);else{b=q.custom;if(q=b[e])try{q.abort()}catch(r){k.default.warn(r)}finally{delete b[e]}if("text"===e)k.default.info("add text sourcebuffer",m),a="html"===t.textTrackMode?new d.HTMLTextSourceBuffer(m,a,t.textTrackElement):new d.NativeTextSourceBuffer(m,a,t.hideNativeSubtitle);else if("image"===e)k.default.info("add image sourcebuffer",m),a=new c.default(m);else throw k.default.error("unknown buffer type "+e),new f.default("BUFFER_TYPE_UNKNOWN",
null,!0);b[e]=a}return a};b.disposeSourceBuffer=function(a,b,c,d){a=d.native;d=d.custom;var e=l(c);if(e){var f=a[c];delete a[c]}else f=d[c],delete d[c];if(f)try{f.abort(),e&&(k.default.info("removing native sourcebuffer",c),b.removeSourceBuffer(f))}catch(r){k.default.warn(r)}}},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,
e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype._append=function(){this.buffered.insert(0,Number.MAX_VALUE)};b.prototype._remove=function(){};b.prototype._abort=function(){};return b}(a(56).AbstractSourceBuffer);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=
a(296).default;b.HTMLTextSourceBuffer=e;a=a(313).default;b.NativeTextSourceBuffer=a},function(e,b,a){function l(a){var b=g.onSeeking$(a),c=g.onSeeked$(a);a=g.onEnded$(a);c=k.Observable.merge(c,a);a=k.Observable.interval(q).startWith(null);return c.startWith(null).switchMapTo(a.mapTo(!0).takeUntil(b).concat(k.Observable.of(!1)))}function h(a,b){if(b)try{a.removeChild(b)}catch(u){d.default.warn("Can't remove text track: not in the element.")}}var f=this&&this.__extends||function(){var a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),c=a(6);e=a(4);var d=a(1),g=a(16),n=a(56),p=a(297),m=a(298),q=e.default.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL;a=function(a){function b(b,e,f){var g=this;d.default.debug("creating html text track source buffer");
g=a.call(this,b)||this;g._videoElement=e;g._textTrackElement=f;g._destroy$=new c.Subject;g._buffer=new p.default;g._currentElement=null;l(g._videoElement).takeUntil(g._destroy$).subscribe(function(a){a?(a=g._buffer.get(Math.max(g._videoElement.currentTime-q/3E3,0)),a)?g._currentElement!==a.element&&(h(f,g._currentElement),g._currentElement=a.element,f.appendChild(g._currentElement)):(h(f,g._currentElement),g._currentElement=null):(h(f,g._currentElement),g._currentElement=null)});return g}f(b,a);b.prototype._append=
function(a){d.default.debug("appending new html text tracks",a);var b=a.timescale,c=a.start,e=a.end,f=a.data,g=a.type,k=a.language;a=a.timeOffset;e&&0>=e-c?d.default.warn("Invalid text track appended: the start time is inferior or equal to the end time."):(c/=b,b=null!=e?e/b:void 0,f=m.default(g,f,a,k),g=null!=b?b:f[f.length-1].end,this._buffer.insert(f,c,g),this.buffered.insert(c,g))};b.prototype._remove=function(a,b){d.default.debug("removing html text track data",a,b);this._buffer.remove(a,b)};
b.prototype._abort=function(){d.default.debug("aborting html text track source buffer");this._destroy$.next();this._destroy$.complete();h(this._textTrackElement,this._currentElement)};return b}(n.AbstractSourceBuffer);b.default=a},function(e,b,a){function l(a,b){for(var c=0;c<a.length;c++)if(b<a[c].end)return a.slice(0,c);return a.slice()}function h(a,b){for(var c=0;c<a.length;c++)if(b<a[c].end)return a.slice(c+1,a.length);return[]}function f(a,b,d){b={start:a.start,end:b,cues:l(a.cues,b)};a={start:d,
end:a.end,cues:h(a.cues,d)};return[b,a]}Object.defineProperty(b,"__esModule",{value:!0});a(2);e=function(){function a(){this._cuesBuffer=[]}a.prototype.get=function(a){for(var b=this._cuesBuffer,c=b.length-1;0<=c;c--)for(var e=b[c].cues,f=e.length-1;0<=f;f--){var k=e[f];if(a>=k.start){if(a<k.end)return k;return}}};a.prototype.remove=function(a,b){var c=Math.max(a,b);b=this._cuesBuffer;for(var d=b.length;0<d;){var e=b[0];if(e.end>=c){c=f(e,a,c);d=c[1];this._cuesBuffer[0]=c[0];b.splice(1,0,d);break}else e.cues=
l(e.cues,a),e.end=a;for(a=1;a<d;a++)if(e=b[0],c<e.end){b.splice(1,a-1);e.cues=h(e.cues,c);e.start=c;return}b.splice(1,b.length-1);break}};a.prototype.insert=function(a,b,e){var c=this._cuesBuffer;a={start:b,end:e,cues:a};for(var d=0;d<c.length;d++){var g=c[d];if(b<g.end){if(.2>=Math.abs(b-g.start)){if(.2>=Math.abs(e-g.end)){c[d]=a;return}if(e<g.end){g.cues=h(g.cues,e);g.start=e;c.splice(d,0,a);return}do c.splice(d,1),g=c[d];while(g&&e>g.end);if(!g){c[d]=a;return}if(.2>=Math.abs(e-g.end)){c[d]=a;return}g.cues=
h(g.cues,e);g.start=e;c.splice(d,0,a);return}if(b<g.start){if(e<g.start){c.splice(d,0,a);return}if(.2>=Math.abs(e-g.start)){g.start=e;c.splice(d,0,a);return}g.cues=h(g.cues,e);g.start=e;c.splice(d,0,a);return}if(e>g.end||.2>=Math.abs(e-g.end)){g.cues=l(g.cues,b);g.end=b;c.splice(d+1,0,a);return}b=f(g,b,e);e=b[1];this._cuesBuffer[d]=b[0];c.splice(d+1,0,a);c.splice(d+2,0,e);return}}c.push(a)};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(1),h={};h.sami=
a(299).default;h.ttml=a(300).default;h.srt=a(306).default;h.vtt=a(307).default;b.default=function(a,b,c,d){l.default.debug("finding parser for html text tracks:",a);a=h[a];if(!a)throw Error("no parser found for the given text track");l.default.debug("parser found, parsing...");b=a(b,c,d);l.default.debug("parsed successfully!",b);return b}},function(e,b,a){function l(a){return a.replace(f,function(a,b){return String.fromCharCode(b)})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(2),f=/&#([0-9]+);/g,
k=/<br>/gi,c=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,d=/\s*<p class=([^>]+)>(.*)/i,g=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.default=function(a,b,e){var f=/<sync[ >]/ig,n=/<sync[ >]|<\/body>/ig,m=[],p=a.match(c);p=p?p[1]:"";n.exec(a);var v=/\.(\S+)\s*{([^}]*)}/gi;for(var w={},x;x=v.exec(p);){var y=x[1];x=(x=x[2].match(/\s*lang:\s*(\S+);/i))?x[1]:null;null!=y&&null!=x&&(w[x]=y)}p=(p=/p\s*{([^}]*)}/gi.exec(p))?p[1]:"";w=w[e];for(h.default(w,"sami: could not find lang "+e+" in CSS");;){e=f.exec(a);
v=n.exec(a);if(!e&&!v)break;if(!e||!v||e.index>=v.index)throw Error("parse error");e=a.slice(e.index,v.index);v=e.match(g);if(!v)throw Error("parse error (sync time attribute)");v=+v[1];if(isNaN(v))throw Error("parse error (sync time attribute NaN)");e=e.split("\n");v/=1E3;for(y=e.length;0<=--y;)if(x=e[y].match(d)){var z=x[2];if(w===x[1])if("&nbsp;"===z)m[m.length-1].end=v;else{x=document.createElement("DIV");x.className="rxp-texttrack-region";var A=document.createElement("DIV");A.className="rxp-texttrack-div";
A.style.position="absolute";A.style.bottom="0";A.style.width="100%";A.style.color="#fff";A.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var B=document.createElement("div");B.className="rxp-texttrack-p";p&&(B.style.cssText=p);z=z.split(k);for(var C=0;C<z.length;C++){C&&B.appendChild(document.createElement("BR"));var D=document.createElement("SPAN");D.className="rxp-texttrack-span";D.textContent=l(z[C]);B.appendChild(D)}A.appendChild(B);x.appendChild(A);m.push({element:x,
start:v+b,end:-1})}}}return m}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(17),h=a(7),f=a(98),k=a(57),c=a(99),d=a(58),g=a(302),n=a(303);b.default=function(a,b){var e=[];if(a=(new DOMParser).parseFromString(a,"text/xml")){var m=a.getElementsByTagName("tt")[0];if(!m)throw Error("invalid XML");a=c.getBodyNode(m);var p=c.getStyleNodes(m),u=c.getRegionNodes(m),v=c.getTextNodes(m);m=f.default(m);for(var w=[],x=0;x<=p.length-1;x++){var y=p[x];if(y instanceof Element){var z=
y.getAttribute("xml:id");null!==z&&w.push({id:z,style:d.getStylingFromElement(y)})}}var A=[];p=function(a){var b=u[a];if(b instanceof Element&&(a=b.getAttribute("xml:id"),null!==a)){var c=d.getStylingFromElement(b),e=b.getAttribute("style");e&&(b=l(w,function(a){return a.id===e}))&&(c=h({},b.style,c));A.push({id:a,style:c})}};for(x=0;x<=u.length-1;x++)p(x);p=null!==a?d.getStylingAttributes(g.STYLE_ATTRIBUTES,[a],w,A):d.getStylingAttributes(g.STYLE_ATTRIBUTES,[],w,A);for(x=0;x<v.length;x++)y=v[x],
y instanceof Element&&(z=k.default(y,"div"),z=h({},p,d.getStylingAttributes(g.STYLE_ATTRIBUTES,[y].concat(z),w,A)),(y=n.default(y,b,w,A,a,z,m))&&e.push(y))}return e}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,e){return"function"===typeof String.prototype.startsWith?a.startsWith(b,e):a.substr(e||0,b.length)===b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.STYLE_ATTRIBUTES="backgroundColor color direction display displayAlign extent fontFamily fontSize fontStyle fontWeight lineHeight opacity origin overflow padding textAlign textDecoration textOutline unicodeBidi visibility wrapOption writingMode".split(" ")},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(100),h=a(305);b.default=function(a,b,c,d,e,n,p){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&/^\s*$/.test(a.textContent||""))return null;var f=l.default(a,p),g=f.start;f=f.end;a=h.default(a,e,d,c,n,"default"===p.spaceStyle);return{start:g+b,end:f+b,element:a}}},function(e,b,a){function l(a,b){a=a.exec(b);return null===a||""===a[0]?null:(Number(a[4])||0)/1E3+(Number(a[3])||0)+60*(Number(a[2])||0)+3600*(Number(a[1])||0)}
Object.defineProperty(b,"__esModule",{value:!0});var h=a(59);b.default=function(a,b){if(h.REGXP_TIME_COLON_FRAMES.test(a)){a=h.REGXP_TIME_COLON_FRAMES.exec(a);var c=Number(a[1]),d=Number(a[2]),e=Number(a[3]),f=Number(a[4]);f+=(Number(a[5])||0)/b.subFrameRate;e+=f/b.frameRate;return e+60*d+3600*c}if(h.REGXP_TIME_COLON.test(a))return l(h.REGXP_TIME_COLON,a);if(h.REGXP_TIME_COLON_MS.test(a))return l(h.REGXP_TIME_COLON_MS,a);if(h.REGXP_TIME_FRAMES.test(a))return a=h.REGXP_TIME_FRAMES.exec(a),Number(a[1])/
b.frameRate;if(h.REGXP_TIME_TICK.test(a))return a=h.REGXP_TIME_TICK.exec(a),Number(a[1])/b.tickRate;if(h.REGXP_TIME_HMS.test(a))return l(h.REGXP_TIME_HMS,a)}},function(e,b,a){function l(a){var b=d.REGXP_8_HEX_COLOR.exec(a);if(null!=b)return"rgba("+parseInt(b[1],16)+","+parseInt(b[2],16)+","+parseInt(b[3],16)+","+parseInt(b[4],16)/255+")";b=d.REGXP_4_HEX_COLOR.exec(a);return null!=b?"rgba("+parseInt(b[1]+b[1],16)+","+parseInt(b[2]+b[2],16)+","+parseInt(b[3]+b[3],16)+","+parseInt(b[4]+b[4],16)/255+
")":a}function h(a,b){return"-1px -1px "+b+" "+a+","+("1px -1px "+b+" "+a+",")+("-1px 1px "+b+" "+a+",")+("1px 1px "+b+" "+a)}function f(a,b,c,d,e){function f(a,d,m){a=a.childNodes;for(var p=[],t=0;t<a.length;t++){var r=a[t];if("#text"===r.nodeName){var q=g.getStylingAttributes(["backgroundColor"],m,c,b).backgroundColor;q?d.backgroundColor=q:delete d.backgroundColor;var u=r,v=d;q=e;r=document.createElement("span");u=u.textContent||"";q&&(q=u.trim(),u=q=q.replace(/\s+/g," "));r.innerHTML=u;r.className=
"rxp-texttrack-span";var w;q=r;if(u=v.color)q.style.color=l(u);if(w=v.backgroundColor)q.style.backgroundColor=l(w);(w=v.wrapOption)&&"noWrap"===w&&(q.style.whiteSpace="nowrap");if(w=v.textOutline){w=w.trim().replace(/\s+/g," ").split(" ");var x=w.length;if(3===x)u=l(w[0]),w=w[1],q.style.textShadow=h(u,w);else if(u&&1===x)w=w[0],q.style.textShadow=h(u,w);else if(2===x){x=/^[#A-Z]/i.test(w[0]);var E=/^[0-9]/.test(w[0]);x!==E&&(x?(u=l(w[0]),w=w[1],q.style.textShadow=h(u,w)):u&&(w=w[0],q.style.textShadow=
h(u,w)))}}if(u=v.textDecoration)switch(u){case "noUnderline":case "noLineThrough":case "noOverline":q.style.textDecoration="none";break;case "lineThrough":q.style.textDecoration="line-through";break;default:q.style.textDecoration=u}if(u=v.fontFamily)switch(u){case "proportionalSansSerif":q.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case "monospaceSansSerif":case "sansSerif":q.style.fontFamily="sans-serif";break;case "monospaceSerif":case "default":q.style.fontFamily="Courier New, Liberation Mono, monospace";
break;case "proportionalSerif":q.style.fontFamily="serif";break;default:q.style.fontFamily=u}if(u=v.fontStyle)q.style.fontStyle=u;if(u=v.fontWeight)q.style.fontWeight=u;if(u=v.fontSize)q.style.fontSize=u;if(u=v.direction)q.style.direction=u;if(u=v.unicodeBidi)switch(u){case "bidiOverride":q.style.unicodeBidi="bidi-override";break;case "embed":q.style.unicodeBidi="embed";break;default:q.style.unicodeBidi="normal"}if(u=v.visibility)q.style.visibility=u;"none"===v.display&&(q.style.display="none");p.push(r)}else"br"===
r.nodeName?(r=document.createElement("BR"),p.push(r)):"span"===r.nodeName&&0<r.childNodes.length&&(q=k({},d,g.getStylingAttributes(n,[r],c,b)),p.push.apply(p,f(r,q,[r].concat(m))))}return p}return f(a,k({},d),[])}Object.defineProperty(b,"__esModule",{value:!0});var k=a(7),c=a(57),d=a(59),g=a(58),n="color direction display fontFamily fontSize fontStyle fontWeight textDecoration textOutline unicodeBidi visibility wrapOption".split(" ");b.default=function(a,b,e,k,h,n){var m=c.default(a,"div"),p=document.createElement("DIV");
p.className="rxp-texttrack-region";var q=h.extent;q&&(q=d.REGXP_PERCENT_VALUES.exec(q),null!=q&&(p.style.width=q[1]+"%",p.style.height=q[2]+"%"));p.style.overflow=h.overflow||"hidden";if(q=h.padding)p.style.padding=q;if(q=h.origin)q=d.REGXP_PERCENT_VALUES.exec(q),null!=q&&(p.style.position="relative",p.style.left=q[1]+"%",p.style.top=q[2]+"%");q=h.displayAlign;p.style.display="flex";p.style.flexDirection="column";if(q)switch(q){case "before":p.style.justifyContent="flex-start";break;case "center":p.style.justifyContent=
"center";break;case "after":p.style.justifyContent="flex-end"}if(q=h.opacity)p.style.opacity=q;if(q=h.visibility)p.style.visibility=q;"none"===h.display&&(p.style.display="none");b&&(b=g.getStylingAttributes(["backgroundColor"],m.concat([b]),k,e).bodyBackgroundColor)&&(p.style.backgroundColor=l(b));b=document.createElement("p");b.className="rxp-texttrack-p";if(m=h.backgroundColor)b.style.backgroundColor=l(m);if(m=h.lineHeight)b.style.lineHeight=m;if(m=h.textAlign)switch(m){case "center":b.style.textAlign=
"center";break;case "left":case "start":b.style.textAlign="left";break;case "right":case "end":b.style.textAlign="right"}a=f(a,e,k,h,n);for(e=0;e<a.length;e++)b.appendChild(a[e]);p.appendChild(b);return p}},function(e,b,a){function l(a){var b=document.createElement("div");b.innerHTML=a;var c=function(a){var b=a.childNodes,d=document.createElement("span");d.className="rxp-texttrack-span";for(var e=0;e<b.length;e++){var f=b[e];"#text"===f.nodeName?d.innerHTML+=f.textContent:("B"===f.nodeName?(a=c(f),
a.style.fontWeight="bold"):"I"===f.nodeName?(a=c(f),a.style.fontStyle="italic"):"U"===f.nodeName?(a=c(f),a.style.textDecoration="underline"):"FONT"===f.nodeName&&null!=f.color?(a=c(f),a.style.color=f.color):a=c(f),d.appendChild(a))}return d};return c(b)}Object.defineProperty(b,"__esModule",{value:!0});var h=a(101);b.default=function(a,b){var c=a.split(/\r\n|\n|\r/);a=[];for(var d=0;d<c.length;d++)if(c[d]){var e=d;for(d++;c[d];)d++;a.push(c.slice(e,d))}c=[];for(d=0;d<a.length;d++){var f=a[d];e=b;var k=
f[1].split(" --\x3e "),m=k[0];k=k[1];f=f.slice(2,f.length);if(m&&k&&f.length)if(m=h.default(m),k=h.default(k),null==m||null==k)e=null;else{var q=document.createElement("div");q.className="rxp-texttrack-p";q.style.fontSize="28px";q.style.position="absolute";q.style.bottom="5%";q.style.width="100%";q.style.textAlign="center";q.style.color="#fff";q.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var t=0;t<f.length;t++){t&&q.appendChild(document.createElement("br"));
var r=l(f[t]);q.appendChild(r)}e={start:m+e,end:k+e,element:q}}else e=null;e&&c.push(e)}return c}},function(e,b,a){function l(a,b,d){var e=document.createElement("div"),g=document.createAttribute("style"),k=0;g.value="width:100%;     height:100%;     display:flex;     flex-direction:column;     justify-content:flex-end;     align-items:center;";e.setAttributeNode(g);var l=a[k];k++;if((g=c.default(a[k]))&&void 0!==g.start&&void 0!==g.end){k++;var n=document.createElement("p"),p=document.createAttribute("style");
p.value="text-align:center";n.setAttributeNode(p);var w=document.createElement("span");p=document.createAttribute("style");p.value="background-color:rgba(0,0,0,0.8);     color:white;";w.setAttributeNode(p);var x=d.filter(function(a){return a.className===l&&!a.isGlobalStyle||a.isGlobalStyle}).map(function(a){return a.styleContent});x&&(p.value+=x.join(),w.setAttributeNode(p));for(;a[k];)0!==w.childNodes.length&&w.appendChild(document.createElement("br")),f.default(a[k],d).forEach(function(a){w.appendChild(a)}),
k++;e.appendChild(n);n.appendChild(w);return{start:g.start+b,end:g.end+b,element:e}}h.default.warn("VTT: Invalid cue, the timecode line could not be parsed.")}Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),f=a(308),k=a(309),c=a(310),d=a(312);b.default=function(a,b){a=a.split(/\r\n|\n|\r/g);var c=[],e=[];if(!a[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw Error("Can't parse WebVTT: Invalid File.");for(var f=d.getFirstLineAfterHeader(a),g=f;g<a.length;g++)if(d.isStartOfStyleBlock(a[g])){var h=
g;for(g++;0!==a[g].length;)g++;h=a.slice(h,g);h=k.default(h);e.push.apply(e,h)}for(g=f;g<a.length;g++)if(0!==a[g].length)if(d.isStartOfCueBlock(a[g])){f=g;for(g++;0!==a[g].length;)g++;f=a.slice(f,g);(f=l(f,b,e))&&c.push(f)}else for(;0!==a[g].length;)g++;return c}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(9);b.default=function(a,b){var e=["u","i","b"],c=["u","i","b","c","#text"],d=b.map(function(a){return a.className});a=a.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,
"<$1$2>$3</$1$2>");return function(a){function f(a){var g=a.nodeName.toLowerCase().split(".")[0];if(l.default(c,g))if("#text"===g)g=document.createTextNode(a.wholeText);else{var k=[];a.nodeName.toLowerCase().split(".").forEach(function(a){-1!==d.indexOf(a)&&k.push(d.indexOf(a))});if(0!==k.length){var h=document.createAttribute("style");k.forEach(function(a){h.value+=b[a].styleContent});g=l.default(e,g)?g:"span";g=document.createElement(g);g.setAttributeNode(h)}else g=l.default(e,g)?g:"span",g=document.createElement(g);
for(var n=0;n<a.childNodes.length;n++)g.appendChild(f(a.childNodes[n]))}else for(g=document.createElement("span"),n=0;n<a.childNodes.length;n++)g.appendChild(f(a.childNodes[n]));return g}for(var g=[],k=0;k<a.length;k++)g[k]=f(a[k]);return g}((new DOMParser).parseFromString(a,"text/html").body.childNodes)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=[],e=1,k=[];if(a[e].match(/::cue {/))k.push({isGlobalStyle:!0}),e++;else for(var c=void 0;c=a[e].match(/::cue\(\.?(.*?)\)(?:,| {)/);)k.push({className:c[1],
isGlobalStyle:!1}),e++;for(var d="";!a[e].match(/}/)&&0!==a[e].length;)d+=a[e],e++;k.forEach(function(a){b.push({className:a.className,isGlobalStyle:a.isGlobalStyle,styleContent:d.replace(/\s/g,"")})});return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(311);b.default=function(a){var b=a.match("((?:[0-9]{2}:)?[0-9]{2}:[0-9]{2}.[0-9]{2,3})(?: |\t)--\x3e(?: |\t)((?:[0-9]{2}:)?[0-9]{2}:[0-9]{2}.[0-9]{2,3})");if(b&&3<=b.length)return a=l.default(b[1]),b=l.default(b[2]),
{start:a,end:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.split(":").reverse();if(b[2]||b[1]){a=b[2]?parseInt(b[2],10):0;var e=parseInt(b[1],10);b=parseFloat(b[0].replace(",","."));return isNaN(a)||isNaN(e)||isNaN(b)?void 0:3600*a+60*e+b}}},function(e,b,a){function l(a){return/^STYLE( .*)?$/g.test(a)}function h(a){return/^NOTE( .*)?$/g.test(a)}function f(a){return/^REGION( .*)?$/g.test(a)}Object.defineProperty(b,"__esModule",{value:!0});b.getFirstLineAfterHeader=
function(a){for(var b=0;b<a.length;){if(""===a[b])return b+1;b++}return b};b.isStartOfStyleBlock=l;b.isStartOfNoteBlock=h;b.isStartOfRegionBlock=f;b.isStartOfCueBlock=function(a){return!h(a)&&!l(a)&&!f(a)&&0!==a.length}},function(e,b,a){var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=
null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var h=a(5),f=a(1);e=a(56);var k=a(314);a=function(a){function b(b,c,d){f.default.debug("creating native text track source buffer");b=a.call(this,b)||this;var e=h.addTextTrack(c,d);d=e.track;e=e.trackElement;b._videoElement=c;b._track=d;b._trackElement=e;return b}l(b,a);b.prototype._append=function(a){f.default.debug("appending new native text tracks",a);var b=a.timescale,c=a.start,d=a.end,
e=a.data,g=a.type,h=a.language;a=a.timeOffset;if(null!=d&&0>=d-c)f.default.warn("Invalid subtitles appended");else if(c/=b,b=null!=d?d/b:void 0,e=k.default(g,e,a,h),0<e.length){g=e[0];h=this._track.cues;0<h.length&&g.startTime<h[h.length-1].startTime&&this._remove(g.startTime,Infinity);for(g=0;g<e.length;g++)this._track.addCue(e[g]);this.buffered.insert(c,null!=b?b:e[e.length-1].endTime)}else null!=b&&this.buffered.insert(c,b)};b.prototype._remove=function(a,b){f.default.debug("removing native text track data",
a,b);for(var c=this._track,d=c.cues,e=d.length-1;0<=e;e--){var g=d[e],k=g.startTime,h=g.endTime;k>=a&&k<=b&&h<=b&&c.removeCue(g)}this.buffered.remove(a,b)};b.prototype._abort=function(){f.default.debug("aborting native text track source buffer");var a=this._trackElement,b=this._videoElement;if(a&&b&&b.hasChildNodes())try{b.removeChild(a)}catch(p){f.default.warn("Can't remove track element from the video")}this._track&&(this._track.mode="disabled");this._trackElement&&(this._trackElement.innerHTML=
"")};return b}(e.AbstractSourceBuffer);b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(1),h={};h.vtt=a(315).default;h.ttml=a(316).default;h.sami=a(317).default;h.srt=a(318).default;b.default=function(a,b,c,d){l.default.debug("finding parser for native text tracks:",a);a=h[a];if(!a)throw Error("no parser found for the given text track");l.default.debug("parser found, parsing...");b=a(b,c,d);l.default.debug("parsed successfully!",b);return b}},function(e,b,a){function l(a){var b=
a.split(":");if(3===b.length){var c=parseInt(b[0],10);a=parseInt(b[1],10);b=parseFloat(b[2]);return isNaN(c)||isNaN(a)||isNaN(b)?void 0:3600*c+60*a+b}if(2===b.length)return a=parseInt(b[0],10),b=parseFloat(b[1]),isNaN(a)||isNaN(b)?void 0:60*a+b}function h(a){return a.split(/ |\t/).reduce(function(a,b){b=b.split(":");2===b.length&&(a[b[0]]=b[1]);return a},{})}Object.defineProperty(b,"__esModule",{value:!0});var f=a(9),k=a(5);b.default=function(a,b){var c=a.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(c[0]))throw Error("Can't parse WebVTT: Invalid file.");
a=[];for(var d=1;d<c.length;d++){var e=c[d];e=!e||/^(NOTE)|(REGION)|(STYLE)($| |\t)/.test(e)?!1:!0;if(e){e=d;for(d++;c[d];)d++;a.push(c.slice(e,d))}else if(c[d])for(;c[d];)d++}c=[];for(d=0;d<a.length;d++){a:{var m=a[d];e=b;var q=/--\x3e/;if(q.test(m[0]))q=m[0],m=m.slice(1,m.length);else{if(!q.test(m[1])){e=null;break a}q=m[1];m=m.slice(2,m.length)}var t;if(t=q.match(/^([\d:.]+)[ |\t]+--\x3e[ |\t]+([\d:.]+)[ |\t]*(.*)$/)){q=l(t[1]);var r=l(t[2]);null==q||null==r?t=null:(t=h(t[3]),t={start:q,end:r,
settings:t})}else t=null;if(t){if(q=t.start,r=t.end,t=t.settings,m=m.join("\n"),(e=k.makeCue(q+e,r+e,m))&&e instanceof VTTCue){m=t;q=e;!m.vertical||"rl"!==m.vertical&&"lr"!==m.vertical||(q.vertical=m.vertical);if(m.line)if(r=m.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/))q.line=r[1],q.snapToLines=!1,f.default(["start","center","end"],r[4])&&(q.lineAlign=r[4]);else if(r=m.line.match(/^(-?\d+)(,([a-z]+))?/))q.line=r[1],q.snapToLines=!0,f.default(["start","center","end"],r[3])&&(q.lineAlign=r[3]);m.position&&
(r=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(m.position))&&2<=r.length&&(t=parseInt(r[1],10),isNaN(t)||(q.position=t,null!=r[2]&&(q.positionAlign=r[2])));m.size&&(q.size=m.size);m.align&&f.default(["start","center","end","left"],m.align)&&(q.align=m.align)}}else e=null}e&&c.push(e)}return c}},function(e,b,a){function l(a,b,d,e,f,g){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&/^\s*$/.test(a.textContent||""))return null;e=n.default(a,g);d=e.start;e=e.end;a=h(a,"default"===g.spaceStyle);
b=c.makeCue(d+b,e+b,a);if(!b)return null;if(b instanceof VTTCue){if(a=f.extent)a=m.REGXP_PERCENT_VALUES.exec(a),null!=a&&(b.size=Number(a[1]));switch(f.writingMode){case "tb":case "tblr":b.vertical="lr";break;case "tbrl":b.vertical="rl"}(a=f.origin)&&m.REGXP_PERCENT_VALUES.exec(a);if(f=f.align)b.align=f,"center"===f&&("center"!==b.align&&(b.align="middle"),b.position="auto"),b.positionAlign=u[f]||"",b.lineAlign=r[f]||""}return b}function h(a,b){function c(a){a=a.childNodes;for(var d="",e=0;e<a.length;e++){var f=
a[e];"#text"===f.nodeName?(f=f.textContent||"",b&&(f=f.trim(),f=f.replace(/\s+/g," ")),d+=f):"br"===f.nodeName?d+="\n":"span"===f.nodeName&&0<f.childNodes.length&&(d+=c(f))}return d}return c(a)}Object.defineProperty(b,"__esModule",{value:!0});var f=a(17),k=a(7),c=a(5),d=a(98),g=a(57),n=a(100),p=a(99),m=a(59),q=a(58),t=["extent","writingMode","origin","align"],r={left:"start",center:"center",right:"end",start:"start",end:"end"},u={left:"line-left",center:"center",right:"line-right"};b.default=function(a,
b){var c=[];if(a=(new DOMParser).parseFromString(a,"text/xml")){var e=a.getElementsByTagName("tt")[0];if(!e)throw Error("invalid XML");var h=p.getBodyNode(e),n=p.getStyleNodes(e),m=p.getRegionNodes(e);a=p.getTextNodes(e);e=d.default(e);for(var u=[],r=0;r<=n.length-1;r++){var v=n[r];if(v instanceof Element){var w=v.getAttribute("xml:id");null!=w&&u.push({id:w,style:q.getStylingFromElement(v)})}}var E=[];n=function(a){var b=m[a];if(b instanceof Element&&(a=b.getAttribute("xml:id"),null!=a)){var c=q.getStylingFromElement(b),
d=b.getAttribute("style");d&&(b=f(u,function(a){return a.id===d}))&&(c=k({},b.style,c));E.push({id:a,style:c})}};for(r=0;r<=m.length-1;r++)n(r);h=h?q.getStylingAttributes(t,[h],u,E):q.getStylingAttributes(t,[],u,E);for(r=0;r<a.length;r++)n=a[r],n instanceof Element&&(v=g.default(n,"div"),v=k({},h,q.getStylingAttributes(t,[n].concat(v),u,E)),(n=l(n,b,u,E,v,e))&&c.push(n))}return c}},function(e,b,a){function l(a){return a.replace(c,"\n").replace(k,function(a,b){return String.fromCharCode(b)})}Object.defineProperty(b,
"__esModule",{value:!0});var h=a(5),f=a(2),k=/&#([0-9]+);/g,c=/<br>/gi,d=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,g=/\s*<p class=([^>]+)>(.*)/i,n=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.default=function(a,b,c){var e=/<sync[ >]/ig,k=/<sync[ >]|<\/body>/ig,m=[],p=a.match(d);p=p?p[1]:"";k.exec(a);var q=/\.(\S+)\s*{([^}]*)}/gi;for(var x={},y;y=q.exec(p);){var z=y[1];y=(y=y[2].match(/\s*lang:\s*(\S+);/i))?y[1]:null;null!=z&&null!=y&&(x[y]=z)}p=x[c];for(f.default(p,"sami: could not find lang "+c+" in CSS");;){c=
e.exec(a);q=k.exec(a);if(!c&&!q)break;if(!c||!q||c.index>=q.index)throw Error("parse error");c=a.slice(c.index,q.index);q=c.match(n);if(!q)throw Error("parse error (sync time attribute)");q=+q[1];if(isNaN(q))throw Error("parse error (sync time attribute NaN)");c=c.split("\n");x=q/1E3;for(z=c.length;0<=--z;)if(q=c[z].match(g))y=q[2],p===q[1]&&("&nbsp;"===y?m[m.length-1].end=x:m.push({text:l(y),start:x+b}))}a=[];for(b=0;b<m.length;b++)p=m[b],e=p.start,k=p.end,(p=p.text)&&null!=k&&(e=h.makeCue(e,k,p),
null!=e&&a.push(e));return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(5),h=a(101);b.default=function(a,b){var c=a.split(/\r\n|\n|\r/);a=[];for(var d=0;d<c.length;d++)if(c[d]){var e=d;for(d++;c[d];)d++;a.push(c.slice(e,d))}c=[];for(d=0;d<a.length;d++){var f=a[d];e=b;var k=f[1].split(" --\x3e "),m=k[0];k=k[1];f=f.slice(2,f.length);m&&k&&f.length?(m=h.default(m),k=h.default(k),null==m||null==k?e=null:(f=f.join("\n"),e=l.makeCue(m+e,k+e,f))):e=null;e&&c.push(e)}return c}},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),h=a(1);b.default=function(a,b,c,d){d=d.pauseWhenStalled;return(void 0===d||d?c.pairwise().map(function(a){var b=a[1].stalled;a=a[0].stalled;if(!a!==!b||a&&b&&a.state!==b.state)return!a}).filter(function(a){return null!=a}).startWith(!1):l.Observable.of(!1)).switchMap(function(c){return c?l.Observable.defer(function(){h.default.info("pause playback to build buffer");a.playbackRate=0;return l.Observable.of(0)}):b.do(function(b){h.default.info("resume playback speed",
b);a.playbackRate=b})})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(4);var l=a(1),h=a(15),f=a(5),k=e.default.DISCONTINUITY_THRESHOLD;b.default=function(a,b,e){return e.do(function(b){if(b.stalled){var c=b.currentTime,d=h.getNextRangeGap(b.buffered,c);f.isPlaybackStuck(b.currentTime,b.currentRange,b.state,!!b.stalled)?(l.default.warn("after freeze seek",c,b.currentRange),a.currentTime=c):d<k&&(b=c+d+1/60,l.default.warn("discontinuity seek",c,d,b),a.currentTime=b)}}).share().map(function(a){return a.stalled}).distinctUntilChanged(function(a,
b){return!a&&!b||!!a&&!!b&&a.state===b.state})}},function(e,b,a){function l(a){return a.filter(function(a){return"seeking"===a.state&&(Infinity===a.bufferGap||-2>a.bufferGap)}).skip(1).map(function(){return null}).startWith(null)}Object.defineProperty(b,"__esModule",{value:!0});var h=a(7),f=a(55);b.default=function(a,b){b=b.map(function(b){return h({liveGap:a.isLive?f.getMaximumBufferPosition(a)-b.currentTime:Infinity},b)});var c=l(b);return{timings:b,seekings:c}}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});b.PLAYER_STATES={STOPPED:"STOPPED",LOADED:"LOADED",LOADING:"LOADING",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",BUFFERING:"BUFFERING",SEEKING:"SEEKING"}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(17),h=function(a,b){if(!b)return null;if(a.length)return l(a,function(a){return b.normalized===a.normalizedLanguage&&b.closedCaption===a.isClosedCaption})},f=function(a,b){if(a.length&&b)return l(a,function(a){return b.normalized===a.normalizedLanguage&&
b.audioDescription===a.isAudioDescription})};e=function(){function a(a,b){var c=a.text;a=a.audio;var d=b.text$;b=b.audio$;this._currentTextAdaptation=this._currentAudioAdaptation=void 0;this._audioAdaptations=a||[];this._textAdaptations=c||[];this._text$=d;this._audio$=b}a.prototype.updateAdaptations=function(a){var b=a.text;this._audioAdaptations=a.audio||[];this._textAdaptations=b||[];if(a=this._currentAudioAdaptation){var c=a.id;l(this._audioAdaptations,function(a){return a.id===c})||(a=(a=f(this._audioAdaptations,
{language:a.language||"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription}))||this._audioAdaptations[0]||null,this._currentAudioAdaptation!==a&&(this._currentAudioAdaptation=a,this._audio$.next(this._currentAudioAdaptation)))}if(a=this._currentTextAdaptation){var e=a.id;l(this._textAdaptations,function(a){return a.id===e})||(a=(a=h(this._textAdaptations,{language:a.language||"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption}))||this._textAdaptations[0],
this._currentTextAdaptation!==a&&(this._currentTextAdaptation=a,this._text$.next(this._currentTextAdaptation)))}};a.prototype.setInitialAudioTrack=function(a){var b;a?b=f(this._audioAdaptations,a):null===a&&(b=null);void 0===b&&(b=this._audioAdaptations[0]||null);b!==this._currentAudioAdaptation&&(this._currentAudioAdaptation=b,this._audio$.next(this._currentAudioAdaptation))};a.prototype.setInitialTextTrack=function(a){a=a?h(this._textAdaptations,a)||null:null;a!==this._currentTextAdaptation&&(this._currentTextAdaptation=
a,this._text$.next(this._currentTextAdaptation))};a.prototype.setAudioTrackByID=function(a){var b=l(this._audioAdaptations,function(b){return b.id===a});if(void 0===b)throw Error("Audio Track not found.");this._currentAudioAdaptation!==b&&(this._currentAudioAdaptation=b,this._audio$.next(this._currentAudioAdaptation))};a.prototype.setTextTrackByID=function(a){var b=l(this._textAdaptations,function(b){return b.id===a});if(void 0===b)throw Error("Text Track not found.");this._currentTextAdaptation!==
b&&(this._currentTextAdaptation=b,this._text$.next(this._currentTextAdaptation))};a.prototype.disableAudioTrack=function(){null!==this._currentAudioAdaptation&&(this._currentAudioAdaptation=null,this._audio$.next(this._currentAudioAdaptation))};a.prototype.disableTextTrack=function(){null!==this._currentTextAdaptation&&(this._currentTextAdaptation=null,this._text$.next(this._currentTextAdaptation))};a.prototype.getCurrentAudioTrack=function(){var a=this._currentAudioAdaptation;return a?{language:a.language||
"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription,id:a.id}:null};a.prototype.getCurrentTextTrack=function(){var a=this._currentTextAdaptation;return a?{language:a.language||"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption,id:a.id}:null};a.prototype.getAvailableAudioTracks=function(){var a=this._currentAudioAdaptation,b=a&&a.id;return this._audioAdaptations.map(function(a){return{language:a.language||"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription,
id:a.id,active:null==b?!1:b===a.id}})};a.prototype.getAvailableTextTracks=function(){var a=this._currentTextAdaptation,b=a&&a.id;return this._textAdaptations.map(function(a){return{language:a.language||"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption,id:a.id,active:null==b?!1:b===a.id}})};return a}();b.default=e},function(e,b,a){function l(a,b){var d=a.currentTime,e=a.paused,f=a.playbackRate,g=a.readyState,h=a.buffered;return{currentTime:d,buffered:h,duration:a.duration,bufferGap:c.getLeftSizeOfRange(h,
d),state:b,playbackRate:f,currentRange:c.getRange(h,d),readyState:g,paused:e}}Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),f=a(46),k=a(7);e=a(4);var c=a(15),d=e.default.SAMPLING_INTERVAL_MEDIASOURCE,g=e.default.SAMPLING_INTERVAL_NO_MEDIASOURCE,n=e.default.RESUME_AFTER_SEEKING_GAP,p=e.default.RESUME_AFTER_BUFFERING_GAP,m=e.default.STALL_GAP,q="canplay play progress seeking seeked loadedmetadata".split(" ");b.default=function(a,b){var c=b.withMediaSource;return h.Observable.create(function(b){function e(d){d=
l(a,d&&d.type||"timeupdate");var e;var g=d.state,h=d.currentTime,q=d.bufferGap,u=d.paused,r=d.readyState,t=f.stalled,v=f.state,w=f.currentTime;var x=d.currentRange;x=null!=x&&d.duration-(q+x.end)<=m;var y=1<=r&&"loadedmetadata"!==g&&!t&&!x,z;c?y&&(q<=m||Infinity===q||1===r)?e=!0:t&&1<r&&Infinity>q&&(q>(t?"seeking"===t.state?n:p:0)||x)&&(z=!0):y&&(!u&&"timeupdate"===g&&"timeupdate"===v&&h===w||"seeking"===g&&Infinity===q)?e=!0:t&&("seeking"!==g&&h!==w||"canplay"===g||Infinity>q&&(q>(t?"seeking"===
t.state?n:p:0)||x))&&(z=!0);e=e?{state:g,timestamp:Date.now()}:z?null:t;f=k(d,{stalled:e});b.next(f)}var f=k(l(a,"init"),{stalled:null}),h=setInterval(e,c?d:g);q.forEach(function(b){return a.addEventListener(b,e)});b.next(f);return function(){clearInterval(h);q.forEach(function(b){return a.removeEventListener(b,e)})}}).multicast(function(){return new f.ReplaySubject(1)}).refCount()}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var l=a(7);e=a(4);var h=a(34),f=a(1),k=e.default.DEFAULT_AUTO_PLAY,
c=e.default.DEFAULT_INITIAL_BITRATES,d=e.default.DEFAULT_LIMIT_VIDEO_WIDTH,g=e.default.DEFAULT_MAX_BITRATES,n=e.default.DEFAULT_MAX_BUFFER_AHEAD,p=e.default.DEFAULT_MAX_BUFFER_BEHIND,m=e.default.DEFAULT_SHOW_NATIVE_SUBTITLE,q=e.default.DEFAULT_TEXT_TRACK_MODE,t=e.default.DEFAULT_THROTTLE_WHEN_HIDDEN,r=e.default.DEFAULT_WANTED_BUFFER_AHEAD;b.parseConstructorOptions=function(a){if(null==a.maxBufferAhead)var b=n;else if(b=Number(a.maxBufferAhead),isNaN(b))throw Error("Invalid maxBufferAhead parameter. Should be a number.");
if(null==a.maxBufferBehind)var e=p;else if(e=Number(a.maxBufferBehind),isNaN(e))throw Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==a.wantedBufferAhead)var f=r;else if(f=Number(a.wantedBufferAhead),isNaN(f))throw Error("Invalid wantedBufferAhead parameter. Should be a number.");var h=null==a.limitVideoWidth?d:!!a.limitVideoWidth;var k=null==a.throttleWhenHidden?t:!!a.throttleWhenHidden;if(null==a.videoElement)var l=document.createElement("video");else if(a.videoElement instanceof
HTMLMediaElement)l=a.videoElement;else throw Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");if(null==a.initialVideoBitrate)var m=c.video;else if(m=Number(a.initialVideoBitrate),isNaN(m))throw Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==a.initialAudioBitrate)var q=c.audio;else if(q=Number(a.initialAudioBitrate),isNaN(q))throw Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==a.maxVideoBitrate)var u=g.video;else if(u=
Number(a.maxVideoBitrate),isNaN(u))throw Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==a.maxAudioBitrate)a=g.audio;else if(a=Number(a.maxAudioBitrate),isNaN(a))throw Error("Invalid maxAudioBitrate parameter. Should be a number.");return{maxBufferAhead:b,maxBufferBehind:e,limitVideoWidth:h,videoElement:l,wantedBufferAhead:f,throttleWhenHidden:k,initialAudioBitrate:q,initialVideoBitrate:m,maxAudioBitrate:a,maxVideoBitrate:u}};b.parseLoadVideoOptions=function(a){var b,c;if(a&&
null!=a.url)var d=String(a.url);else throw Error("No url set on loadVideo");if(null==a.transport)throw Error("No transport set on loadVideo");var e=String(a.transport);var g=null==a.autoPlay?k:!!a.autoPlay;if(null==a.keySystems)var n=[];else{n=Array.isArray(a.keySystems)?a.keySystems:[a.keySystems];var p=0;for(b=n;p<b.length;p++){var r=b[p];if("string"!==typeof r.type||"function"!==typeof r.getLicense)throw Error("Invalid key system given: Missing type string or getLicense callback");}}p=a.transportOptions;
if(null==a.supplementaryTextTracks)b=[];else for(b=Array.isArray(a.supplementaryTextTracks)?a.supplementaryTextTracks:[a.supplementaryTextTracks],r=0,c=b;r<c.length;r++){var t=c[r];"boolean"!==typeof t.closedCaption&&(t.closedCaption=!!t.closedCaption);if("string"!==typeof t.language||"string"!==typeof t.mimeType||"string"!==typeof t.url)throw Error("Invalid supplementary text track given. Missing either language, mimetype or url");}if(null==a.supplementaryImageTracks)r=[];else for(r=Array.isArray(a.supplementaryImageTracks)?
a.supplementaryImageTracks:[a.supplementaryImageTracks],c=0,t=r;c<t.length;c++){var u=t[c];if("string"!==typeof u.mimeType||"string"!==typeof u.url)throw Error("Invalid supplementary image track given. Missing either mimetype or url");}if(null==a.textTrackMode)c=q;else{if("native"!==a.textTrackMode&&"html"!==a.textTrackMode)throw Error("Invalid textTrackMode.");c=a.textTrackMode}t=h.normalizeAudioTrack(a.defaultAudioTrack);u=h.normalizeTextTrack(a.defaultTextTrack);var H=null==a.hideNativeSubtitle?
!m:!!a.hideNativeSubtitle;if("html"===c){if(null==a.textTrackElement)throw Error('You have to provide a textTrackElement in "html" textTrackMode.');if(a.textTrackElement instanceof HTMLElement)var E=a.textTrackElement;else throw Error("textTrackElement should be an HTMLElement.");}else null!=a.textTrackElement&&f.default.warn('You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=a.startAt)if(a.startAt.wallClockTime instanceof Date){var I=a.startAt.wallClockTime.getTime()/
1E3;I=l({},a.startAt,{wallClockTime:I})}else I=a.startAt;return{url:d,transport:e,autoPlay:g,keySystems:n,transportOptions:p,supplementaryTextTracks:b,supplementaryImageTracks:r,textTrackMode:c,textTrackElement:E,defaultAudioTrack:t,defaultTextTrack:u,hideNativeSubtitle:H,startAt:I}}}])});
