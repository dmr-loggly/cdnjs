var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,b,a){f!=Array.prototype&&f!=Object.prototype&&(f[b]=a.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var b=0;return $jscomp.iteratorPrototype(function(){return b<f.length?{done:!1,value:f[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.iteratorFromArray=function(f,b){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var a=0,h={next:function(){if(a<f.length){var k=a++;return{value:b(k,f[k]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(f,b,a,h){if(b){a=$jscomp.global;f=f.split(".");for(h=0;h<f.length-1;h++){var k=f[h];k in a||(a[k]={});a=a[k]}f=f[f.length-1];h=a[f];b=b(h);b!=h&&null!=b&&$jscomp.defineProperty(a,f,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(f){return f?f:function(){return[]}},"es6","es5");
$jscomp.owns=function(f,b){return Object.prototype.hasOwnProperty.call(f,b)};$jscomp.polyfill("Object.assign",function(f){return f?f:function(b,a){for(var h=1;h<arguments.length;h++){var k=arguments[h];if(k)for(var e in k)$jscomp.owns(k,e)&&(b[e]=k[e])}return b}},"es6","es3");$jscomp.polyfill("Object.setPrototypeOf",function(f){return f?f:"object"!=typeof"".__proto__?null:function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}},"es6","es5");
$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();var b=f[Symbol.iterator];return b?b.call(f):$jscomp.arrayIterator(f)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(f){function b(){this.batch_=null}function a(a){return a instanceof k?a:new k(function(c,d){c(a)})}if(f&&!$jscomp.FORCE_POLYFILL_PROMISE)return f;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var h=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){h(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var d=a[c];delete a[c];try{d()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var k=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(d){c.reject(d)}};k.prototype.createResolveAndReject_=
function(){function a(l){return function(a){d||(d=!0,l.call(c,a))}}var c=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};k.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof k)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};k.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(d){this.reject_(d);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};k.prototype.reject_=function(a){this.settle_(2,a)};k.prototype.fulfill_=function(a){this.settle_(1,a)};k.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),a[c]=null;this.onSettledCallbacks_=null}};var e=new b;k.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};k.prototype.settleSameAsThenable_=function(a,c){var d=this.createResolveAndReject_();try{a.call(c,d.resolve,d.reject)}catch(l){d.reject(l)}};k.prototype.then=function(a,c){function d(c,d){return"function"==typeof c?function(d){try{l(c(d))}catch(q){g(q)}}:d}var l,g,e=new k(function(c,
d){l=c;g=d});this.callWhenSettled_(d(a,l),d(c,g));return e};k.prototype.catch=function(a){return this.then(void 0,a)};k.prototype.callWhenSettled_=function(a,c){function d(){switch(l.state_){case 1:a(l.result_);break;case 2:c(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?e.asyncExecute(d):this.onSettledCallbacks_.push(function(){e.asyncExecute(d)})};k.resolve=a;k.reject=function(a){return new k(function(c,d){d(a)})};k.race=function(g){return new k(function(c,
d){for(var l=$jscomp.makeIterator(g),e=l.next();!e.done;e=l.next())a(e.value).callWhenSettled_(c,d)})};k.all=function(g){var c=$jscomp.makeIterator(g),d=c.next();return d.done?a([]):new k(function(l,g){function e(c){return function(d){n[c]=d;k--;0==k&&l(n)}}var n=[],k=0;do n.push(void 0),k++,a(d.value).callWhenSettled_(e(n.length-1),g),d=c.next();while(!d.done)})};return k},"es6","es3");
$jscomp.polyfill("WeakMap",function(f){function b(a){$jscomp.owns(a,h)||$jscomp.defineProperty(a,h,{value:{}})}function a(a){var c=Object[a];c&&(Object[a]=function(d){b(d);return c(d)})}if(function(){if(!f||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),d=new f([[a,2],[c,3]]);if(2!=d.get(a)||3!=d.get(c))return!1;d.delete(a);d.set(c,4);return!d.has(a)&&4==d.get(c)}catch(l){return!1}}())return f;var h="$jscomp_hidden_"+Math.random().toString().substring(2);a("freeze");a("preventExtensions");
a("seal");var k=0,e=function(a){this.id_=(k+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};e.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,h))throw Error("WeakMap key fail: "+a);a[h][this.id_]=c;return this};e.prototype.get=function(a){return $jscomp.owns(a,h)?a[h][this.id_]:void 0};e.prototype.has=function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)};e.prototype.delete=
function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)?delete a[h][this.id_]:!1};return e},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(f){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!f||!f.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new f($jscomp.makeIterator([[c,"s"]]));if("s"!=d.get(c)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var a=d.entries(),g=a.next();if(g.done||g.value[0]!=c||"s"!=g.value[1])return!1;g=a.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!a.next().done?!1:!0}catch(m){return!1}}())return f;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var b=new WeakMap,a=function(c){this.data_={};this.head_=e();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var d;!(d=c.next()).done;)d=d.value,this.set(d[0],d[1])}};a.prototype.set=function(c,d){var a=h(this,c);a.list||(a.list=this.data_[a.id]=[]);a.entry?a.entry.value=d:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:d},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++);return this};a.prototype.delete=
function(c){c=h(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=e();this.size=0};a.prototype.has=function(c){return!!h(this,c).entry};a.prototype.get=function(c){return(c=h(this,c).entry)&&c.value};a.prototype.entries=function(){return k(this,function(c){return[c.key,
c.value]})};a.prototype.keys=function(){return k(this,function(c){return c.key})};a.prototype.values=function(){return k(this,function(c){return c.value})};a.prototype.forEach=function(c,d){for(var a=this.entries(),g;!(g=a.next()).done;)g=g.value,c.call(d,g[1],g[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var h=function(c,d){var a=d&&typeof d;"object"==a||"function"==a?b.has(d)?a=b.get(d):(a=""+ ++g,b.set(d,a)):a="p_"+d;var e=c.data_[a];if(e&&$jscomp.owns(c.data_,a))for(c=0;c<e.length;c++){var m=
e[c];if(d!==d&&m.key!==m.key||d===m.key)return{id:a,list:e,index:c,entry:m}}return{id:a,list:e,index:-1,entry:void 0}},k=function(c,a){var d=c.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=c.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:a(d)};d=null}return{done:!0,value:void 0}})},e=function(){var c={};return c.previous=c.next=c.head=c},g=0;return a},"es6","es3");
$jscomp.findInternal=function(f,b,a){f instanceof String&&(f=String(f));for(var h=f.length,k=0;k<h;k++){var e=f[k];if(b.call(a,e,k,f))return{i:k,v:e}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");
$jscomp.polyfill("Set",function(f){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!f||!f.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new f($jscomp.makeIterator([a]));if(!b.has(a)||1!=b.size||b.add(a)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var k=b.entries(),e=k.next();if(e.done||e.value[0]!=a||e.value[1]!=a)return!1;e=k.next();return e.done||e.value[0]==a||4!=e.value[0].x||e.value[1]!=e.value[0]?!1:k.next().done}catch(g){return!1}}())return f;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};b.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};
b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var k=this;this.map_.forEach(function(e){return a.call(b,e,e,k)})};return b},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3");
(function(f,b){"object"===typeof exports&&"object"===typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?exports.RxPlayer=b():f.RxPlayer=b()})(window,function(){return function(f){function b(h){if(a[h])return a[h].exports;var k=a[h]={i:h,l:!1,exports:{}};f[h].call(k.exports,k,k.exports,b);k.l=!0;return k.exports}var a={};b.m=f;b.c=a;b.d=function(a,k,e){b.o(a,k)||Object.defineProperty(a,k,{configurable:!1,enumerable:!0,get:e})};b.r=function(a){Object.defineProperty(a,
"__esModule",{value:!0})};b.n=function(a){var k=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(k,"a",k);return k};b.o=function(a,k){return Object.prototype.hasOwnProperty.call(a,k)};b.p="";return b(b.s=390)}([function(f,b,a){var h=a(18),k=a(386),e=a(64),g=a(384);f=function(){function c(c){this._isScalar=!1;c&&(this._subscribe=c)}c.prototype.lift=function(a){var d=new c;d.source=this;d.operator=a;return d};c.prototype.subscribe=function(c,a,g){var d=this.operator;c=k.toSubscriber(c,
a,g);d?d.call(c,this.source):c.add(this.source||!c.syncErrorThrowable?this._subscribe(c):this._trySubscribe(c));if(c.syncErrorThrowable&&(c.syncErrorThrowable=!1,c.syncErrorThrown))throw c.syncErrorValue;return c};c.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(l){c.syncErrorThrown=!0,c.syncErrorValue=l,c.error(l)}};c.prototype.forEach=function(c,a){var d=this;a||(h.root.Rx&&h.root.Rx.config&&h.root.Rx.config.Promise?a=h.root.Rx.config.Promise:h.root.Promise&&(a=h.root.Promise));
if(!a)throw Error("no Promise impl found");return new a(function(a,l){var g=d.subscribe(function(a){if(g)try{c(a)}catch(q){l(q),g.unsubscribe()}else c(a)},l,a)})};c.prototype._subscribe=function(c){return this.source.subscribe(c)};c.prototype[e.observable]=function(){return this};c.prototype.pipe=function(){for(var c=[],a=0;a<arguments.length;a++)c[a-0]=arguments[a];return 0===c.length?this:g.pipeFromArray(c)(this)};c.prototype.toPromise=function(c){var a=this;c||(h.root.Rx&&h.root.Rx.config&&h.root.Rx.config.Promise?
c=h.root.Rx.config.Promise:h.root.Promise&&(c=h.root.Promise));if(!c)throw Error("no Promise impl found");return new c(function(c,d){var l;a.subscribe(function(c){return l=c},function(c){return d(c)},function(){return c(l)})})};c.create=function(a){return new c(a)};return c}();b.Observable=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(41),k={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},e=Object.keys(k)[0];f={LEVELS:Object.keys(k),error:h.default,warn:h.default,info:h.default,
debug:h.default,setLevel:function(a){var c;(c=k[a])?e=a:(c=0,e="NONE");this.error=c>=k.ERROR?console.error.bind(console):h.default;this.warn=c>=k.WARNING?console.warn.bind(console):h.default;this.info=c>=k.INFO?console.info.bind(console):h.default;this.debug=c>=k.DEBUG?console.log.bind(console):h.default},getLevel:function(){return e}};b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_AUTO_PLAY:!1,
DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:Infinity,DEFAULT_MAX_BUFFER_BEHIND:Infinity,DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:Infinity,video:Infinity,other:Infinity},INACTIVITY_DELAY:6E4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:10,DEFAULT_SUGGESTED_PRESENTATION_DELAY:{SMOOTH:10,DASH:10},DISCONTINUITY_THRESHOLD:1,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},
DEFAULT_MAX_MANIFEST_REQUEST_RETRY:4,DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:Infinity,INITIAL_BACKOFF_DELAY_BASE:200,MAX_BACKOFF_DELAY_BASE:3E3,SAMPLING_INTERVAL_MEDIASOURCE:1E3,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:35E4,ABR_MINIMUM_CHUNK_SIZE:16E3,ABR_STARVATION_FACTOR:.72,ABR_REGULAR_FACTOR:.9,ABR_STARVATION_GAP:5,OUT_OF_STARVATION_GAP:7,RESUME_GAP_AFTER_SEEKING:1.5,RESUME_GAP_AFTER_NOT_ENOUGH_DATA:.5,RESUME_GAP_AFTER_BUFFERING:5,STALL_GAP:.5,
MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.12,MAX_BUFFERED_DISTANCE:.1,MINIMUM_SEGMENT_SIZE:.2,MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:50,BUFFER_PADDING:{audio:{high:1,low:1},video:{high:8,low:2},other:{high:1,low:1}},SEGMENT_PRIORITIES_STEPS:[6,14],EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready",
"com.chromecast.playready","com.youtube.playready"]},EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS:50,FORCED_ENDED_THRESHOLD:.001}},function(f,b,a){var h=this&&this.__extends||function(c,a){function d(){this.constructor=c}for(var l in a)a.hasOwnProperty(l)&&(c[l]=a[l]);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)},k=a(67);f=a(17);var e=a(117),g=a(65);a=function(a){function d(l,g,k){a.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=
!1;switch(arguments.length){case 0:this.destination=e.empty;break;case 1:if(!l){this.destination=e.empty;break}if("object"===typeof l){l instanceof d?(this.syncErrorThrowable=l.syncErrorThrowable,this.destination=l,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,l));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,l,g,k)}}h(d,a);d.prototype[g.rxSubscriber]=function(){return this};d.create=function(c,a,l){c=new d(c,a,l);c.syncErrorThrowable=!1;
return c};d.prototype.next=function(c){this.isStopped||this._next(c)};d.prototype.error=function(c){this.isStopped||(this.isStopped=!0,this._error(c))};d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};d.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};d.prototype._next=function(c){this.destination.next(c)};d.prototype._error=function(c){this.destination.error(c);this.unsubscribe()};d.prototype._complete=function(){this.destination.complete();
this.unsubscribe()};d.prototype._unsubscribeAndRecycle=function(){var c=this._parent,a=this._parents;this._parents=this._parent=null;this.unsubscribe();this.isStopped=this.closed=!1;this._parent=c;this._parents=a;return this};return d}(f.Subscription);b.Subscriber=a;var c=function(c){function a(a,d,l,g){c.call(this);this._parentSubscriber=a;a=this;if(k.isFunction(d))var n=d;else d&&(n=d.next,l=d.error,g=d.complete,d!==e.empty&&(a=Object.create(d),k.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),
a.unsubscribe=this.unsubscribe.bind(this)));this._context=a;this._next=n;this._error=l;this._complete=g}h(a,c);a.prototype.next=function(c){if(!this.isStopped&&this._next){var a=this._parentSubscriber;a.syncErrorThrowable?this.__tryOrSetError(a,this._next,c)&&this.unsubscribe():this.__tryOrUnsub(this._next,c)}};a.prototype.error=function(c){if(!this.isStopped){var a=this._parentSubscriber;if(this._error)a.syncErrorThrowable?this.__tryOrSetError(a,this._error,c):this.__tryOrUnsub(this._error,c),this.unsubscribe();
else if(a.syncErrorThrowable)a.syncErrorValue=c,a.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),c;}};a.prototype.complete=function(){var c=this;if(!this.isStopped){var a=this._parentSubscriber;if(this._complete){var d=function(){return c._complete.call(c._context)};a.syncErrorThrowable?this.__tryOrSetError(a,d):this.__tryOrUnsub(d)}this.unsubscribe()}};a.prototype.__tryOrUnsub=function(c,a){try{c.call(this._context,a)}catch(t){throw this.unsubscribe(),t;}};a.prototype.__tryOrSetError=
function(c,a,d){try{a.call(this._context,d)}catch(u){return c.syncErrorValue=u,c.syncErrorThrown=!0}return!1};a.prototype._unsubscribe=function(){var c=this._parentSubscriber;this._parentSubscriber=this._context=null;c.unsubscribe()};return a}(a)},function(f,b,a){function h(a,g){if(!a)throw new k.default(g||"invalid assertion");}Object.defineProperty(b,"__esModule",{value:!0});var k=a(244);b.default=h;b.assertInterface=function(a,g,c){void 0===c&&(c="object");h(null!=a,c+" should be an object");for(var d in g)g.hasOwnProperty(d)&&
h(typeof a[d]===g[d],c+" should have property "+d+" as a "+g[d])}},function(f,b,a){function h(c){c.src="";c.removeAttribute("src")}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0);f=a(33);var e=a(1),g=a(57),c=a(56);b.isFirefox=c.isFirefox;b.isIE=c.isIE;b.MediaSource_=c.MediaSource_;b.VTTCue_=c.VTTCue_;var d=a(15);b.events=d;var l=a(243);b.exitFullscreen=l.exitFullscreen;b.isFullscreen=l.isFullscreen;b.requestFullscreen=l.requestFullscreen;var n=a(242);b.getInitData=n.getInitData;b.KeySystemAccess=
n.KeySystemAccess;b.requestMediaKeySystemAccess=n.requestMediaKeySystemAccess;b.setMediaKeys=n.setMediaKeys;b.isCodecSupported=function(a){return c.MediaSource_?"function"===typeof c.MediaSource_.isTypeSupported?c.MediaSource_.isTypeSupported(a):!0:!1};b.hasEMEAPIs=function(){return"function"===typeof n.requestMediaKeySystemAccess};b.shouldRenewMediaKeys=function(){return c.isIE};b.shouldUnsetMediaKeys=function(){return c.isIE};b.onSourceOpen$=function(c){return"open"===c.readyState?k.Observable.of(null):
d.onSourceOpen$(c).take(1)};b.hasLoadedMetadata=function(a){return a.readyState>=c.READY_STATES.HAVE_METADATA?k.Observable.of(void 0):d.onLoadedMetadata$(a).take(1).mapTo(void 0)};b.canPlay=function(a){return a.readyState>=c.READY_STATES.HAVE_ENOUGH_DATA?k.Observable.of(void 0):g.default(a,"canplay").take(1).mapTo(void 0)};if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){a=window.WebKitSourceBuffer.prototype;for(var m in f.default.prototype)f.default.prototype.hasOwnProperty(m)&&
(a[m]=f.default.prototype[m]);a._listeners=[];a.__emitUpdate=function(c,a){var d=this;setTimeout(function(){d.trigger(c,a);d.updating=!1;d.trigger("updateend")},0)};a.appendBuffer=function(c){if(this.updating)throw Error("updating");this.trigger("updatestart");this.updating=!0;try{this.append(c)}catch(u){this.__emitUpdate("error",u);return}this.__emitUpdate("update")}}b.addTextTrack=function(a,d){if(c.isIE){var l=a.textTracks.length;a=0<l?a.textTracks[l-1]:a.addTextTrack("subtitles");a.mode=d?a.HIDDEN:
a.SHOWING}else{var g=document.createElement("track");a.appendChild(g);a=g.track;g.kind="subtitles";a.mode=d?"hidden":"showing"}return{track:a,trackElement:g}};b.isPlaybackStuck=function(a,d,l,g){return c.isFirefox&&g&&"timeupdate"===l&&!!d&&10<d.end-a};b.clearElementSrc=h;b.setElementSrc$=function(c,a){return k.Observable.create(function(d){e.default.info("Setting URL to Element",a,c);c.src=a;d.next(void 0);return function(){h(c)}})};b.isOffline=function(){return!1===navigator.onLine};b.makeCue=function(a,
d,l){if(!c.VTTCue_)throw Error("VTT cues not supported in your target");return a>=d?(e.default.warn("Invalid cue times: "+a+" - "+d),null):new c.VTTCue_(a,d,l)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(24);b.ErrorCodes=h.ErrorCodes;b.ErrorTypes=h.ErrorTypes;b.RequestErrorTypes=h.RequestErrorTypes;f=a(240);b.EncryptedMediaError=f.default;f=a(239);b.IndexError=f.default;f=a(32);b.MediaError=f.default;f=a(238);b.OtherError=f.default;f=a(237);b.NetworkError=f.default;
a=a(236);b.RequestError=a.default;b.isKnownError=function(a){return!!a&&!!a.type&&0<=Object.keys(h.ErrorTypes).indexOf(a.type)}},function(f,b,a){var h=this&&this.__extends||function(c,a){function d(){this.constructor=c}for(var l in a)a.hasOwnProperty(l)&&(c[l]=a[l]);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)},k=a(0);f=a(3);var e=a(17),g=a(58),c=a(102),d=a(65),l=function(c){function a(a){c.call(this,a);this.destination=a}h(a,c);return a}(f.Subscriber);b.SubjectSubscriber=
l;a=function(a){function m(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.closed=!1;this.thrownError=null}h(m,a);m.prototype[d.rxSubscriber]=function(){return new l(this)};m.prototype.lift=function(c){var a=new n(this,this);a.operator=c;return a};m.prototype.next=function(c){if(this.closed)throw new g.ObjectUnsubscribedError;if(!this.isStopped){var a=this.observers,d=a.length;a=a.slice();for(var l=0;l<d;l++)a[l].next(c)}};m.prototype.error=function(c){if(this.closed)throw new g.ObjectUnsubscribedError;
this.hasError=!0;this.thrownError=c;this.isStopped=!0;var a=this.observers,d=a.length;a=a.slice();for(var l=0;l<d;l++)a[l].error(c);this.observers.length=0};m.prototype.complete=function(){if(this.closed)throw new g.ObjectUnsubscribedError;this.isStopped=!0;var c=this.observers,a=c.length;c=c.slice();for(var d=0;d<a;d++)c[d].complete();this.observers.length=0};m.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;this.observers=null};m.prototype._trySubscribe=function(c){if(this.closed)throw new g.ObjectUnsubscribedError;
return a.prototype._trySubscribe.call(this,c)};m.prototype._subscribe=function(a){if(this.closed)throw new g.ObjectUnsubscribedError;if(this.hasError)return a.error(this.thrownError),e.Subscription.EMPTY;if(this.isStopped)return a.complete(),e.Subscription.EMPTY;this.observers.push(a);return new c.SubjectSubscription(this,a)};m.prototype.asObservable=function(){var c=new k.Observable;c.source=this;return c};m.create=function(c,a){return new n(c,a)};return m}(k.Observable);b.Subject=a;var n=function(c){function a(a,
d){c.call(this);this.destination=a;this.source=d}h(a,c);a.prototype.next=function(c){var a=this.destination;a&&a.next&&a.next(c)};a.prototype.error=function(c){var a=this.destination;a&&a.error&&this.destination.error(c)};a.prototype.complete=function(){var c=this.destination;c&&c.complete&&this.destination.complete()};a.prototype._subscribe=function(c){return this.source?this.source.subscribe(c):e.Subscription.EMPTY};return a}(a);b.AnonymousSubject=n},function(f,b,a){var h=Object.getOwnPropertySymbols,
k=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;f.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var c={};for(a=0;10>a;a++)c["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(a){return c[a]}).join(""))return!1;var d={};"abcdefghijklmnopqrst".split("").forEach(function(c){d[c]=c});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?
!1:!0}catch(l){return!1}}()?Object.assign:function(a,c){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var d=Object(a);for(var l,g=1;g<arguments.length;g++){var m=Object(arguments[g]);for(var b in m)k.call(m,b)&&(d[b]=m[b]);if(h){l=h(m);for(var f=0;f<l.length;f++)e.call(m,l[f])&&(d[l[f]]=m[l[f]])}}return d}},function(f,b,a){f.exports=function(a,k,e){if("function"===typeof Array.prototype.find)return a.find(k,e);e=e||this;var g=a.length,c;if("function"!==
typeof k)throw new TypeError(k+" is not a function");for(c=0;c<g;c++)if(k.call(e,a[c],c,a))return a[c]}},function(f,b,a){var h=a(18),k=a(116),e=a(115),g=a(118),c=a(0),d=a(61),l=a(381),n=a(64);b.subscribeToResult=function(a,b,f,p){var m=new l.InnerSubscriber(a,f,p);if(m.closed)return null;if(b instanceof c.Observable)if(b._isScalar)m.next(b.value),m.complete();else return m.syncErrorThrowable=!0,b.subscribe(m);else if(k.isArrayLike(b)){a=0;for(f=b.length;a<f&&!m.closed;a++)m.next(b[a]);m.closed||m.complete()}else{if(e.isPromise(b))return b.then(function(a){m.closed||
(m.next(a),m.complete())},function(a){return m.error(a)}).then(null,function(a){h.root.setTimeout(function(){throw a;})}),m;if(b&&"function"===typeof b[d.iterator]){b=b[d.iterator]();do{a=b.next();if(a.done){m.complete();break}m.next(a.value);if(m.closed)break}while(1)}else if(b&&"function"===typeof b[n.observable])if(b=b[n.observable](),"function"!==typeof b.subscribe)m.error(new TypeError("Provided object does not correctly implement Symbol.observable"));else return b.subscribe(new l.InnerSubscriber(a,
f,p));else b=g.isObject(b)?"an invalid object":"'"+b+"'",m.error(new TypeError("You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}return null}},function(f,b,a){var h=this&&this.__extends||function(a,e){function g(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(g.prototype=e.prototype,new g)};f=function(a){function e(){a.apply(this,arguments)}h(e,a);e.prototype.notifyNext=function(a,
c,d,l,e){this.destination.next(c)};e.prototype.notifyError=function(a,c){this.destination.error(a)};e.prototype.notifyComplete=function(a){this.destination.complete()};return e}(a(3).Subscriber);b.OuterSubscriber=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(4),k=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,e=/([0-9]+)-([0-9]+)/,g=/([0-9]+)(\/([0-9]+))?/;b.parseString=function(a){return a};b.parseBoolean=function(a){return"true"===a};
b.parseIntOrBoolean=function(a){return"true"===a?!0:"false"===a?!1:parseInt(a,10)};b.parseDateTime=function(a){return(new Date(Date.parse(a))).getTime()/1E3};b.parseDuration=function(a){if(!a)return 0;var c=k.exec(a);h.default(!!c,a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(c[2]||"0")+2592E3*parseFloat(c[4]||"0")+86400*parseFloat(c[6]||"0")+3600*parseFloat(c[8]||"0")+60*parseFloat(c[10]||"0")+parseFloat(c[12]||"0")};b.parseFrameRate=function(a){var c=g.exec(a);if(!c)return-1;a=
parseInt(c[1],10)||0;c=parseInt(c[2],10)||0;return 0<c?a/c:a};b.parseRatio=function(a){return a};b.parseByteRange=function(a){return(a=e.exec(a))?[+a[1],+a[2]]:null};b.isVisuallyImpaired=function(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&"1"===a.value:!1};b.isHardOfHearing=function(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&"2"===a.value:!1};b.parseScheme=function(a){for(var c,l,g=0;g<a.attributes.length;g++){var e=a.attributes[g];switch(e.name){case "schemeIdUri":c=
e.value;break;case "value":l=e.value}}return{schemeIdUri:c,value:l}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,k,e){if("function"===typeof Array.prototype.includes)return a.includes(k,e);var g=a.length>>>0;if(0===g)return!1;e|=0;for(e=Math.max(0<=e?e:g-Math.abs(e),0);e<g;){var c=a[e],d=k;if(c===d||"number"===typeof c&&"number"===typeof d&&isNaN(c)&&isNaN(d))return!0;e++}return!1}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);
a(111);b.default=function(a){return a instanceof h.Observable?a:a&&"function"===typeof a.subscribe?new h.Observable(function(e){var g=a.subscribe(function(a){e.next(a)},function(a){e.error(a)},function(){e.complete()});return function(){g&&g.dispose?g.dispose():g&&g.unsubscribe&&g.unsubscribe()}}):a&&"function"===typeof a.then?h.Observable.fromPromise(a):h.Observable.of(a)}},function(f,b,a){function h(a,c){return c.filter(function(c){var d=document.createElement(a.tagName);c="on"+c;c in d?d=!0:(d.setAttribute(c,
"return;"),d="function"===typeof d[c]);return d})[0]}function k(a,c){return a.reduce(function(a,d){return a.concat((c||l.BROWSER_PREFIXES).map(function(a){return a+d}))},[])}function e(a,g){var e,m=k(a,g);return function(a){return a instanceof l.HTMLElement_?("undefined"===typeof e&&(e=h(a,m)),e?c.Observable.fromEvent(a,e):c.Observable.never()):d.default(a,m)}}function g(){var a;null!=document.hidden?a="":null!=document.mozHidden?a="moz":null!=document.msHidden?a="ms":null!=document.webkitHidden&&
(a="webkit");var c=a?a+"Hidden":"hidden";return d.default(document,a+"visibilitychange").map(function(){return document[c]})}Object.defineProperty(b,"__esModule",{value:!0});var c=a(0);f=a(2);a(1);var d=a(57),l=a(56);a=f.default.INACTIVITY_DELAY;var n=window.devicePixelRatio||1,m=g().filter(function(a){return!a}),t=g().debounceTime(a).filter(function(a){return a});b.isInBackground$=function(){return c.Observable.merge(m,t).startWith(!1)};b.videoWidth$=function(a){return c.Observable.merge(c.Observable.interval(2E4),
d.default(window,"resize").debounceTime(500)).startWith(0).map(function(){return a.clientWidth*n}).distinctUntilChanged()};a=e(["loadedmetadata"]);b.onLoadedMetadata$=a;a=e(["seeking"]);b.onSeeking$=a;a=e(["seeked"]);b.onSeeked$=a;a=e(["ended"]);b.onEnded$=a;a=e(["timeupdate"]);b.onTimeUpdate$=a;a=e(["fullscreenchange","FullscreenChange"],l.BROWSER_PREFIXES.concat("MS"));b.onFullscreenChange$=a;b.onPlayPause$=function(a){return c.Observable.merge(e(["play"])(a),e(["pause"])(a))};b.onTextTrackChanges$=
function(a){return c.Observable.merge(e(["addtrack"])(a),e(["removetrack"])(a))};a=e(["sourceopen","webkitsourceopen"]);b.onSourceOpen$=a;a=e(["update"]);b.onUpdate$=a;a=e(["onremovesourcebuffer"]);b.onRemoveSourceBuffers$=a;a=e(["encrypted","needkey"]);b.onEncrypted$=a;a=e(["keymessage","message"]);b.onKeyMessage$=a;a=e(["keyadded","ready"]);b.onKeyAdded$=a;a=e(["keyerror","error"]);b.onKeyError$=a;a=e(["keystatuseschange"]);b.onKeyStatusesChange$=a},function(f,b,a){function h(a,c){return{start:Math.min(a.start,
c.start),end:Math.max(a.end,c.end)}}function k(a){for(var c=0;c<a.length;c++){var d=a[c];d.start===d.end&&a.splice(c++,1)}return a}function e(a){for(var c=1;c<a.length;c++){var d=a[c-1],l=a[c];if(Math.abs(l.start-d.end)<n||Math.abs(l.end-d.start)<n)d=h(d,l),a.splice(--c,2,d)}return a}function g(a,c){return a.end<=c.start}function c(a,c){var d=a.end;return a.start<=c&&c<d}function d(a,d){return c(a,d.start)||a.start<d.end&&d.end<a.end||c(d,a.start)}function l(a,c){for(var d=a.length-1;0<=d;d--){var l=
a.start(d);if(c>=l){var g=a.end(d);if(c<g)return{start:l,end:g}}}return null}Object.defineProperty(b,"__esModule",{value:!0});var n=1/60;b.createRange=function(a,c){return{start:a,end:c}};b.removeEmptyRanges=k;b.mergeContiguousRanges=e;b.isAfter=function(a,c){return a.start>=c.end};b.isBefore=g;b.isTimeInRange=c;b.convertToRanges=function(a){for(var c=[],d=0;d<a.length;d++)c.push({start:a.start(d),end:a.end(d)});return c};b.getRange=l;b.getNextRangeGap=function(a,c){for(var d=a.length,l=0;l<d;l++){var g=
a.start(l);if(c<g)return g-c}return Infinity};b.getInnerAndOuterTimeRanges=function(a,c){for(var d=null,l=[],g=0;g<a.length;g++){var e=a.start(g),n=a.end(g);c<e||c>=n?l.push({start:e,end:n}):d={start:e,end:n}}return{outerRanges:l,innerRange:d}};b.getSizeOfRange=function(a,c){return(a=l(a,c))?a.end-a.start:0};b.getPlayedSizeOfRange=function(a,c){return(a=l(a,c))?c-a.start:0};b.getLeftSizeOfRange=function(a,c){return(a=l(a,c))?a.end-c:Infinity};b.insertInto=function(a,c){if(c.start===c.end)return a;
for(var l=0;l<a.length;l++){var m=a[l],b=d(c,m),t=Math.abs(m.start-c.end)<n||Math.abs(m.end-c.start)<n;if(b||t)c=h(c,m),a.splice(l--,1);else if(0===l){if(g(c,a[0]))break}else if(g(a[l-1],c)&&g(c,m))break}a.splice(l,0,c);return e(k(a))};b.keepRangeIntersection=function(a,c){for(var l=0;l<a.length;l++){var g=a[l];a:{var e=g;for(var n=c,m=0;m<n.length;m++)if(d(e,n[m])){e=n[m];break a}e=null}e?e.start>g.start?g.start=e.start:e.end<g.end&&(g.end=e.end):a.splice(l--,1)}return a}},function(f,b,a){function h(a){return a.reduce(function(a,
c){return a.concat(c instanceof l.UnsubscriptionError?c.errors:c)},[])}var k=a(28),e=a(118),g=a(67),c=a(66),d=a(44),l=a(385);f=function(){function a(a){this.closed=!1;this._subscriptions=this._parents=this._parent=null;a&&(this._unsubscribe=a)}a.prototype.unsubscribe=function(){var a=!1;if(!this.closed){var n=this._parent;var b=this._parents,f=this._unsubscribe,q=this._subscriptions;this.closed=!0;this._subscriptions=this._parents=this._parent=null;for(var r=-1,w=b?b.length:0;n;)n.remove(this),n=
++r<w&&b[r]||null;if(g.isFunction(f)&&(n=c.tryCatch(f).call(this),n===d.errorObject)){a=!0;var v=v||(d.errorObject.e instanceof l.UnsubscriptionError?h(d.errorObject.e.errors):[d.errorObject.e])}if(k.isArray(q))for(r=-1,w=q.length;++r<w;)n=q[r],e.isObject(n)&&(n=c.tryCatch(n.unsubscribe).call(n),n===d.errorObject&&(a=!0,v=v||[],n=d.errorObject.e,n instanceof l.UnsubscriptionError?v=v.concat(h(n.errors)):v.push(n)));if(a)throw new l.UnsubscriptionError(v);}};a.prototype.add=function(c){if(!c||c===
a.EMPTY)return a.EMPTY;if(c===this)return this;var d=c;switch(typeof c){case "function":d=new a(c);case "object":if(d.closed||"function"!==typeof d.unsubscribe)return d;if(this.closed)return d.unsubscribe(),d;"function"!==typeof d._addParent&&(c=d,d=new a,d._subscriptions=[c]);break;default:throw Error("unrecognized teardown "+c+" added to Subscription.");}(this._subscriptions||(this._subscriptions=[])).push(d);d._addParent(this);return d};a.prototype.remove=function(a){var c=this._subscriptions;
c&&(a=c.indexOf(a),-1!==a&&c.splice(a,1))};a.prototype._addParent=function(a){var c=this._parent,d=this._parents;c&&c!==a?d?-1===d.indexOf(a)&&d.push(a):this._parents=[a]:this._parent=a};a.EMPTY=function(a){a.closed=!0;return a}(new a);return a}();b.Subscription=f},function(f,b,a){f=a(387);a="undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self;f="undefined"!==typeof window&&window||"undefined"!==typeof f&&f||a;b.root=f;if(!f)throw Error("RxJS could not find any global context (window, self, global)");
},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=0;b.default=function(){var a=0;h<Number.MAX_VALUE&&(a=h+1);h=a;return""+a}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=/^(?:[a-z]+:)?\/\//i,k=/\/\.{1,2}\//;b.resolveURL=function(){for(var a=[],g=0;g<arguments.length;g++)a[g]=arguments[g];g=a.length;if(0===g)return"";for(var c="",d=0;d<g;d++){var l=a[d];"string"===typeof l&&""!==l&&(h.test(l)?c=l:("/"===l[0]&&(l=l.substr(1)),"/"===c[c.length-1]&&(c=
c.substr(0,c.length-1)),c=c+"/"+l))}g=c;if(k.test(g)){a=[];g=g.split("/");c=0;for(d=g.length;c<d;c++)".."===g[c]?a.pop():"."!==g[c]&&a.push(g[c]);a=a.join("/")}else a=g;return a};b.normalizeBaseURL=function(a){var g=a.lastIndexOf("/");return 0<=g?a.substring(0,g+1):a}},function(f,b,a){function h(a){for(var c=a.length,d=new Uint8Array(c),l=0;l<c;l++)d[l]=a.charCodeAt(l)&255;return d}function k(a,c){void 0===c&&(c="");for(var d="",l=0;l<a.byteLength;l++)d+=(a[l]>>>4).toString(16),d+=(a[l]&15).toString(16),
c.length&&l<a.byteLength-1&&(d+=c);return d}Object.defineProperty(b,"__esModule",{value:!0});var e=a(4);b.strToBytes=h;b.bytesToStr=function(a){return String.fromCharCode.apply(null,a)};b.bytesToUTF16Str=function(a){for(var c="",d=a.length,l=0;l<d;l+=2)c+=String.fromCharCode(a[l]);return c};b.hexToBytes=function(a){for(var c=a.length,d=new Uint8Array(c/2),l=0,g=0;l<c;l+=2,g++)d[g]=parseInt(a.substr(l,2),16)&255;return d};b.bytesToHex=k;b.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=
arguments[c];c=a.length;for(var d=-1,l=0,e;++d<c;)e=a[d],l+="number"===typeof e?e:e.length;l=new Uint8Array(l);var m=0;for(d=-1;++d<c;)e=a[d],"number"===typeof e?m+=e:0<e.length&&(l.set(e,m),m+=e.length);return l};b.be2toi=function(a,c){return(a[c+0]<<8)+(a[c+1]<<0)};b.be3toi=function(a,c){return 65536*a[c+0]+256*a[c+1]+a[c+2]};b.be4toi=function(a,c){return 16777216*a[c+0]+65536*a[c+1]+256*a[c+2]+a[c+3]};b.be8toi=function(a,c){return 4294967296*(16777216*a[c+0]+65536*a[c+1]+256*a[c+2]+a[c+3])+16777216*
a[c+4]+65536*a[c+5]+256*a[c+6]+a[c+7]};b.itobe2=function(a){return new Uint8Array([a>>>8&255,a&255])};b.itobe4=function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])};b.itobe8=function(a){var c=a%4294967296;a=(a-c)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255])};b.le2toi=function(a,c){return(a[c+0]<<0)+(a[c+1]<<8)};b.le4toi=function(a,c){return a[c+0]+256*a[c+1]+65536*a[c+2]+16777216*a[c+3]};b.le8toi=function(a,c){return a[c+
0]+256*a[c+1]+65536*a[c+2]+16777216*a[c+3]+4294967296*(a[c+4]+256*a[c+5]+65536*a[c+6]+16777216*a[c+7])};b.itole2=function(a){return new Uint8Array([a&255,a>>>8&255])};b.itole4=function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])};b.itole8=function(a){var c=a%4294967296;a=(a-c)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,c&255,c>>>8&255,c>>>16&255,c>>>24&255])};b.guidToUuid=function(a){e.default(16===a.length,"UUID length should be 16");var c=h(a);
a=c[0];var d=c[1],l=c[2],g=c[3],m=c[4],b=c[5],f=c[6],p=c[7],q=c.subarray(8,10);c=c.subarray(10,16);var r=new Uint8Array(16);r[0]=g;r[1]=l;r[2]=d;r[3]=a;r[4]=b;r[5]=m;r[6]=p;r[7]=f;r.set(q,8);r.set(c,10);return k(r)};b.toBase64URL=function(a){return btoa(a).replace(/\=+$/,"")}},function(f,b,a){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};f=a(0);var k=a(62),
e=a(26),g=a(27);a=function(a){function c(c,d){a.call(this);this.array=c;this.scheduler=d;d||1!==c.length||(this._isScalar=!0,this.value=c[0])}h(c,a);c.create=function(a,d){return new c(a,d)};c.of=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=a[a.length-1];g.isScheduler(d)?a.pop():d=null;var m=a.length;return 1<m?new c(a,d):1===m?new k.ScalarObservable(a[0],d):new e.EmptyObservable(d)};c.dispatch=function(a){var c=a.array,d=a.index,l=a.subscriber;d>=a.count?l.complete():
(l.next(c[d]),l.closed||(a.index=d+1,this.schedule(a)))};c.prototype._subscribe=function(a){var d=this.array,l=d.length,e=this.scheduler;if(e)return e.schedule(c.dispatch,0,{array:d,index:0,count:l,subscriber:a});for(e=0;e<l&&!a.closed;e++)a.next(d[e]);a.complete()};return c}(f.Observable);b.ArrayObservable=a},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(6);b.default=function(a){var e=a.url,c=a.body,d=a.headers,l=null==a.method?"GET":a.method,n=null==a.responseType?
"json":a.responseType,m=null==a.timeout?3E4:a.timeout;return h.Observable.create(function(g){var b=new XMLHttpRequest;b.open(l,e,!0);0<=m&&(b.timeout=m);b.responseType=n;"document"===b.responseType&&b.overrideMimeType("text/xml");if(d)for(var t in d)d.hasOwnProperty(t)&&b.setRequestHeader(t,d[t]);var f=Date.now();b.onerror=function(){g.error(new k.RequestError(b,e,k.RequestErrorTypes.ERROR_EVENT))};b.ontimeout=function(){g.error(new k.RequestError(b,e,k.RequestErrorTypes.TIMEOUT))};a.ignoreProgressEvents||
(b.onprogress=function(a){var c=Date.now();g.next({type:"progress",value:{url:e,duration:c-f,sentTime:f,currentTime:c,size:a.loaded,totalSize:a.total}})});b.onload=function(a){if(4===b.readyState)if(200<=b.status&&300>b.status){var c=Date.now();var d=a.total,l=b.status,n=b.responseType;a=b.responseURL||e;if("json"===n)if("string"!==b.response)var m=b.response;else try{m=JSON.parse(b.responseText)}catch(y){m=null}else m=b.response;null==m?(c=k.RequestErrorTypes.PARSE_ERROR,g.error(new k.RequestError(b,
a,c))):(g.next({type:"response",value:{status:l,url:a,responseType:n,sentTime:f,receivedTime:c,duration:c-f,size:d,responseData:m}}),g.complete())}else c=k.RequestErrorTypes.ERROR_HTTP_CODE,g.error(new k.RequestError(b,e,c))};void 0!==c?b.send(c):b.send();return function(){b&&4!==b.readyState&&b.abort()}})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.ErrorTypes={NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",ENCRYPTED_MEDIA_ERROR:"ENCRYPTED_MEDIA_ERROR",INDEX_ERROR:"INDEX_ERROR",
OTHER_ERROR:"OTHER_ERROR"};b.RequestErrorTypes={TIMEOUT:"TIMEOUT",ERROR_EVENT:"ERROR_EVENT",ERROR_HTTP_CODE:"ERROR_HTTP_CODE",PARSE_ERROR:"PARSE_ERROR"};b.ErrorCodes={PIPELINE_RESOLVE_ERROR:"PIPELINE_RESOLVE_ERROR",PIPELINE_LOAD_ERROR:"PIPELINE_LOAD_ERROR",PIPELINE_PARSING_ERROR:"PIPELINE_PARSING_ERROR",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"MANIFEST_INCOMPATIBLE_CODECS_ERROR",MANIFEST_UNSUPPORTED_ADAPTATION_TYPE:"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",UNAVAILABLE_MEDIA_SOURCE:"UNAVAILABLE_MEDIA_SOURCE",
MEDIA_STARTING_TIME_NOT_FOUND:"MEDIA_STARTING_TIME_NOT_FOUND",MEDIA_TIME_NOT_FOUND:"MEDIA_TIME_NOT_FOUND",MEDIA_IS_ENCRYPTED_ERROR:"MEDIA_IS_ENCRYPTED_ERROR",KEY_ERROR:"KEY_ERROR",KEY_STATUS_CHANGE_ERROR:"KEY_STATUS_CHANGE_ERROR",KEY_UPDATE_ERROR:"KEY_UPDATE_ERROR",KEY_LOAD_ERROR:"KEY_LOAD_ERROR",KEY_LOAD_TIMEOUT:"KEY_LOAD_TIMEOUT",KEY_GENERATE_REQUEST_ERROR:"KEY_GENERATE_REQUEST_ERROR",INCOMPATIBLE_KEYSYSTEMS:"INCOMPATIBLE_KEYSYSTEMS",LICENSE_SERVER_CERTIFICATE_ERROR:"LICENSE_SERVER_CERTIFICATE_ERROR",
BUFFER_APPEND_ERROR:"BUFFER_APPEND_ERROR",BUFFER_FULL_ERROR:"BUFFER_FULL_ERROR",BUFFER_TYPE_UNKNOWN:"BUFFER_TYPE_UNKNOWN",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_UNKNOWN:"MEDIA_ERR_UNKNOWN",MEDIA_SOURCE_NOT_SUPPORTED:"MEDIA_SOURCE_NOT_SUPPORTED",MEDIA_KEYS_NOT_SUPPORTED:"MEDIA_KEYS_NOT_SUPPORTED",OUT_OF_INDEX_ERROR:"OUT_OF_INDEX_ERROR",UNKNOWN_INDEX:"UNKNOWN_INDEX",
UNKNOWN_ERROR:"UNKNOWN_ERROR"}},function(f,b,a){f=a(109);a=a(108);b.async=new a.AsyncScheduler(f.AsyncAction)},function(f,b,a){var h=this&&this.__extends||function(a,e){function g(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(g.prototype=e.prototype,new g)};f=function(a){function e(e){a.call(this);this.scheduler=e}h(e,a);e.create=function(a){return new e(a)};e.dispatch=function(a){a.subscriber.complete()};e.prototype._subscribe=function(a){var c=
this.scheduler;if(c)return c.schedule(e.dispatch,0,{subscriber:a});a.complete()};return e}(a(0).Observable);b.EmptyObservable=f},function(f,b,a){b.isScheduler=function(a){return a&&"function"===typeof a.schedule}},function(f,b,a){b.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(f,b,a){function h(a){if(null==a||""===a)return"";a=(""+a).toLowerCase().split("-");var c=a[0];switch(c.length){case 2:var d=k.default[c];break;case 3:d=e.default[c]}(d=d||c)&&(a[0]=d);return a.join("-")}
Object.defineProperty(b,"__esModule",{value:!0});var k=a(229),e=a(228);b.normalize=h;b.normalizeTextTrack=function(a){if(null!=a){if("string"===typeof a){var c=a;a=!1}else c=a.language,a=!!a.closedCaption;return{language:c,closedCaption:a,normalized:h(c)}}return a};b.normalizeAudioTrack=function(a){if(null!=a){if("string"===typeof a){var c=a;a=!1}else c=a.language,a=!!a.audioDescription;return{language:c,audioDescription:a,normalized:h(c)}}return a}},function(f,b,a){function h(a,c){for(var d=a.length,
l=0,b,k=0;l+8<d&&(k=g.be4toi(a,l),b=g.be4toi(a,l+4),e.default(0<k,"out of range size"),b!==c);)l+=k;if(l>=d)return-1;e.default(l+k<=d,"atom out of range");return l}function k(a){var c=a.privateData;a=a.systemId.replace(/-/g,"");e.default(32===a.length);c=g.concat(4,g.hexToBytes(a),g.itobe4(c.length),c);return g.concat(g.itobe4(c.length+8),g.strToBytes("pssh"),c)}Object.defineProperty(b,"__esModule",{value:!0});var e=a(4),g=a(21),c=a(231);b.getMDAT=c.getMDAT;b.getMDIA=c.getMDIA;b.getTRAF=c.getTRAF;
b.parseSidx=function(a,c){var d=h(a,1936286840);if(-1===d)return null;var l=g.be4toi(a,d);d=d+4+4;var e=a[d];d+=8;var k=g.be4toi(a,d);d+=4;if(0===e)e=g.be4toi(a,d),d+=4,c+=g.be4toi(a,d)+l,d+=4;else if(1===e)e=g.be8toi(a,d),d+=8,c+=g.be8toi(a,d)+l,d+=8;else return null;l=[];d+=2;var b=g.be2toi(a,d);for(d+=2;0<=--b;){var f=g.be4toi(a,d);d+=4;var r=f&2147483647;if(1===(f&2147483648)>>>31)throw Error("not implemented");f=g.be4toi(a,d);d+=4;d+=4;l.push({time:e,duration:f,count:0,timescale:k,range:[c,c+
r-1]});e+=f;c+=r}return l};b.parseTfdt=function(a){a=c.getTRAF(a);if(!a)return-1;var d=h(a,1952867444);if(-1===d)return-1;d=d+4+4;var e=a[d];d+=4;return 1<e?-1:e?g.be8toi(a,d):g.be4toi(a,d)};b.getDurationFromTrun=function(a){a=c.getTRAF(a);if(!a)return-1;var d=h(a,1953658222);if(-1===d)return-1;d=d+4+4;var e=a[d];d+=1;if(1<e)return-1;var k=g.be3toi(a,d);d+=3;e=k&256;var b=0;if(!e)return d=h(a,1952868452),-1===d?b=-1:(d=d+4+4+1,e=g.be3toi(a,d),e&8?(d+=4,e&1&&(d+=8),e&2&&(d+=4),b=g.be4toi(a,d)):b=-1),
0<=b?b:-1;var f=k&1,p=k&4,q=k&512,r=k&1024;k&=2048;var w=g.be4toi(a,d);d+=4;f&&(d+=4);p&&(d+=4);f=w;for(p=0;f--;)e?(p+=g.be4toi(a,d),d+=4):p+=b,q&&(d+=4),r&&(d+=4),k&&(d+=4);return p};b.getMDHDTimescale=function(a){a=c.getMDIA(a);if(!a)return-1;var d=h(a,1835296868);if(-1===d)return-1;d=d+4+4;var e=a[d];d+=4;return 1===e?g.be4toi(a,d+16):0===e?g.be4toi(a,d+8):-1};b.patchPssh=function(a,c){if(!c||!c.length)return a;var d=h(a,1836019574);if(-1===d)return a;for(var l=g.be4toi(a,d),e=[a.subarray(d,d+
l)],b=0;b<c.length;b++)e.push(k(c[b]));c=g.concat.apply(void 0,e);c.set(g.itobe4(c.length),0);return g.concat(a.subarray(0,d),c,a.subarray(d+l))}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,e){return null==e?a+" ("+b+")":"string"===typeof e?a+" ("+b+") "+e:a+" ("+b+") "+(e instanceof Event?e.type:e.message)}},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||
function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(c,d){function l(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(24),e=a(31);f=function(a){function c(d,l,g){var b=a.call(this)||this;Object.setPrototypeOf(b,c.prototype);b.name="MediaError";b.type=k.ErrorTypes.MEDIA_ERROR;b.reason=l;b.code=k.ErrorCodes.hasOwnProperty(d)?k.ErrorCodes[d]:"";b.fatal=!!g;b.message=
e.default(b.name,b.code,b.reason);return b}h(c,a);return c}(Error);b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1);f=function(){function a(){this._listeners={}}a.prototype.addEventListener=function(a,g){var c=this._listeners[a];c?c.push(g):this._listeners[a]=[g]};a.prototype.removeEventListener=function(a,g){if(null==a)this._listeners={};else{var c=this._listeners[a];c&&(null==g?delete this._listeners[a]:(g=c.indexOf(g),~g&&c.splice(g,1),c.length||delete this._listeners[a]))}};
a.prototype.trigger=function(a,g){(a=this._listeners[a])&&a.slice().forEach(function(a){try{a(g)}catch(d){h.default.error(d,d.stack)}})};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={activePeriodChanged:function(a){return{type:"activePeriodChanged",value:{period:a}}},adaptationChange:function(a,b,e){return{type:"adaptationChange",value:{type:a,adaptation:b,period:e}}},bufferComplete:function(a){return{type:"complete-buffer",value:{type:a}}},endOfStream:function(){return{type:"end-of-stream",
value:void 0}},resumeStream:function(){return{type:"resume-stream",value:void 0}},loaded:function(){return{type:"loaded",value:!0}},manifestReady:function(a,b){return{type:"manifestReady",value:{abrManager:a,manifest:b}}},manifestUpdate:function(a){return{type:"manifestUpdate",value:{manifest:a}}},nullRepresentation:function(a,b){return{type:"representationChange",value:{type:a,representation:null,period:b}}},periodBufferCleared:function(a,b){return{type:"periodBufferCleared",value:{type:a,period:b}}},
periodBufferReady:function(a,b,e){return{type:"periodBufferReady",value:{type:a,period:b,adaptation$:e}}},speedChanged:function(a){return{type:"speed",value:a}},stalled:function(a){return{type:"stalled",value:a}},warning:function(a){return{type:"warning",value:a}}}},function(f,b,a){function h(a,c){return!!a[c]&&/^STYLE( .*)?$/g.test(a[c])&&(!a[c+1]||0>a[c+1].indexOf("--\x3e"))}function k(a,c){return!!a[c]&&/^NOTE( .*)?$/g.test(a[c])&&(!a[c+1]||0>a[c+1].indexOf("--\x3e"))}function e(a,c){return!!a[c]&&
/^REGION( .*)?$/g.test(a[c])&&(!a[c+1]||0>a[c+1].indexOf("--\x3e"))}Object.defineProperty(b,"__esModule",{value:!0});b.getFirstLineAfterHeader=function(a){for(var c=0;c<a.length;){if(""===a[c])return c+1;c++}return c};b.isStartOfStyleBlock=h;b.isStartOfNoteBlock=k;b.isStartOfRegionBlock=e;b.isStartOfCueBlock=function(a,c){var d=a[c];if(!d||h(a,c)||e(a,c)||k(a,c))return!1;if(0<=d.indexOf("--\x3e"))return!0;a=a[c+1];return!!a&&0<=a.indexOf("--\x3e")};b.findEndOfCueBlock=function(a,c){for(c+=1;a[c];)c++;
return c}},function(f,b,a){function h(a){return"audio"===a||"video"===a}Object.defineProperty(b,"__esModule",{value:!0});var k=a(32),e=a(1),g=a(162),c=a(160);b.QueuedSourceBuffer=c.default;var d=a(159);b.BUFFER_TYPES=["audio","video","text","image"];f=function(){function a(a,c){this._videoElement=a;this._mediaSource=c;this._initializedNativeSourceBuffers={};this._initializedCustomSourceBuffers={}}a.isNative=function(a){return h(a)};a.prototype.has=function(a){return h(a)?!!this._initializedNativeSourceBuffers[a]:
!!this._initializedCustomSourceBuffers[a]};a.prototype.get=function(a){var c=h(a)?this._initializedNativeSourceBuffers[a]:this._initializedCustomSourceBuffers[a];if(!c)throw Error("SourceBufferManager: no "+a+" initialized yet");return c.sourceBuffer};a.prototype.createSourceBuffer=function(a,l,b){void 0===b&&(b={});if(h(a)){if(b=this._initializedNativeSourceBuffers[a])return b.codec!==l?e.default.warn("reusing native SourceBuffer with codec",b.codec,"for codec",l):e.default.info("reusing native SourceBuffer with codec",
l),b.sourceBuffer;e.default.info("adding native SourceBuffer with codec",l);b=this._mediaSource.addSourceBuffer(l);b=new c.default(b);this._initializedNativeSourceBuffers[a]={codec:l,sourceBuffer:b};return b}var n=this._initializedCustomSourceBuffers[a];if(n)return e.default.info("reusing a previous custom SourceBuffer for the type",a),n.sourceBuffer;if("text"===a)return e.default.info("creating a new text SourceBuffer with codec",l),a="html"===b.textTrackMode?new d.HTMLTextSourceBuffer(this._videoElement,
b.textTrackElement):new d.NativeTextSourceBuffer(this._videoElement,b.hideNativeSubtitle),a=new c.default(a),this._initializedCustomSourceBuffers.text={codec:l,sourceBuffer:a},a;if("image"===a)return e.default.info("creating a new image SourceBuffer with codec",l),a=new g.default,a=new c.default(a),this._initializedCustomSourceBuffers.image={codec:l,sourceBuffer:a},a;e.default.error("unknown buffer type:",a);throw new k.default("BUFFER_TYPE_UNKNOWN",null,!0);};a.prototype.disposeSourceBuffer=function(a){if(h(a)){var c=
this._initializedNativeSourceBuffers[a];if(null!=c){e.default.info("aborting native source buffer",a);if("open"===this._mediaSource.readyState)try{c.sourceBuffer.abort()}catch(t){e.default.warn("failed to abort a SourceBuffer:",t)}delete this._initializedNativeSourceBuffers[a]}}else if("text"===a||"image"===a){if(c=this._initializedCustomSourceBuffers[a],null!=c){e.default.info("aborting custom source buffer",a);try{c.sourceBuffer.abort()}catch(t){e.default.warn("failed to abort a SourceBuffer:",
t)}delete this._initializedCustomSourceBuffers[a]}}else e.default.error("cannot dispose an unknown buffer type",a)};a.prototype.disposeAll=function(){var a=this;b.BUFFER_TYPES.forEach(function(c){a.has(c)&&a.disposeSourceBuffer(c)})};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(1),e=a(12),g=a(212);b.default=function(a){for(var c={},l=a.childNodes,b=0;b<l.length;b++)if(l[b].nodeType===Node.ELEMENT_NODE){var m=l[b];"Initialization"===m.nodeName&&
(c.initialization=g.default(m))}for(b=0;b<a.attributes.length;b++)switch(l=a.attributes[b],l.name){case "timescale":m=parseInt(l.value,10);isNaN(m)?k.default.warn('DASH: invalid timescale ("'+l.value+'")'):c.timescale=m;break;case "timeShiftBufferDepth":m=e.parseDuration(l.value);isNaN(m)?k.default.warn('DASH: invalid timeShiftBufferDepth ("'+l.value+'")'):c.timeShiftBufferDepth=m;break;case "presentationTimeOffset":m=parseFloat(l.value);isNaN(m)?k.default.warn('DASH: invalid presentationTimeOffset ("'+
l.value+'")'):c.presentationTimeOffset=m;break;case "indexRange":c.indexRange=e.parseByteRange(l.value)||void 0;break;case "indexRangeExact":c.indexRangeExact=e.parseBoolean(l.value);break;case "availabilityTimeOffset":m=parseFloat(l.value);isNaN(m)?k.default.warn('DASH: invalid availabilityTimeOffset ("'+l.value+'")'):c.availabilityTimeOffset=m;break;case "availabilityTimeComplete":c.availabilityTimeComplete=e.parseBoolean(l.value);break;case "duration":m=parseInt(l.value,10);isNaN(m)?k.default.warn('DASH: invalid duration ("'+
l.value+'")'):c.duration=m;break;case "startNumber":m=parseInt(l.value,10),isNaN(m)?k.default.warn('DASH: invalid startNumber ("'+l.value+'")'):c.startNumber=m}return h(c,{availabilityTimeComplete:null==c.availabilityTimeComplete?!0:c.availabilityTimeComplete,indexRangeExact:!!c.indexRangeExact,timeline:[],timescale:null==c.timescale?1:c.timescale})}},function(f,b,a){function h(a,e,g){var c=a.presentationTimeOffset||0;a=a.timescale||1;return{up:e*a-c,to:(e+g)*a-c}}Object.defineProperty(b,"__esModule",
{value:!0});b.normalizeRange=h;b.getTimelineRangeStart=function(a){var e=a.ts,g=a.d;a=a.r;return-1===g?e:e+a*g};b.getTimelineRangeEnd=function(a){var e=a.ts,g=a.d;a=a.r;return-1===g?e:e+(a+1)*g};b.getInitSegment=function(a){var e=a.initialization;e=void 0===e?{}:e;return{id:"init",isInit:!0,time:0,range:e.range||void 0,indexRange:a.indexRange||void 0,media:e.media,timescale:a.timescale}};b.getSegmentsFromTimeline=function(a,e,g){g=h(a,e,g);e=g.up;g=g.to;var c=a.timeline,d=a.timescale,l=a.media;a=
a.startNumber;a=null!=a?a:void 0;for(var b=[],k=c.length,f=c.length&&c[0].d||0,u=0;u<k;u++){var p=c[u],q=p.d,r=p.ts,w=p.range;f=Math.max(f,q);if(0>q){if(r+f<g){var v={id:""+r,time:r,isInit:!1,range:w,duration:void 0,timescale:d,media:l,number:null!=a?a:void 0};b.push(v)}break}var x=c[u+1];v=p.r||0;0>v&&(v=Math.ceil(((x?x.ts:Infinity)-p.ts)/p.d)-1);p=v;x=e-r;x=0<x?Math.floor(x/q):0;for(v=r+x*q;v<g&&x<=p;)v={id:""+v,time:v,isInit:!1,range:w,duration:q,timescale:d,media:l,number:null!=a?a+x:void 0},
b.push(v),x++,v=r+x*q;if(v>=g)break;null!=a&&(a+=p+1)}return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){for(var b=0,e,g=0;g<a.length;g++)e=a[g],b=(b<<5)-b+e,b&=b;return b}},function(f,b,a){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var l in c)c.hasOwnProperty(l)&&(a[l]=c[l]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};f=a(7);var k=a(247),e=a(17),g=a(112),c=a(58),d=a(102);a=function(a){function b(c,
d,l){void 0===c&&(c=Number.POSITIVE_INFINITY);void 0===d&&(d=Number.POSITIVE_INFINITY);a.call(this);this.scheduler=l;this._events=[];this._bufferSize=1>c?1:c;this._windowTime=1>d?1:d}h(b,a);b.prototype.next=function(c){var d=this._getNow();this._events.push(new l(d,c));this._trimBufferThenGetEvents();a.prototype.next.call(this,c)};b.prototype._subscribe=function(a){var l=this._trimBufferThenGetEvents(),b=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;if(this.hasError)var k=e.Subscription.EMPTY;
else this.isStopped?k=e.Subscription.EMPTY:(this.observers.push(a),k=new d.SubjectSubscription(this,a));b&&a.add(a=new g.ObserveOnSubscriber(a,b));b=l.length;for(var n=0;n<b&&!a.closed;n++)a.next(l[n].value);this.hasError?a.error(this.thrownError):this.isStopped&&a.complete();return k};b.prototype._getNow=function(){return(this.scheduler||k.queue).now()};b.prototype._trimBufferThenGetEvents=function(){for(var a=this._getNow(),c=this._bufferSize,d=this._windowTime,l=this._events,e=l.length,g=0;g<e&&
!(a-l[g].time<d);)g++;e>c&&(g=Math.max(g,e-c));0<g&&l.splice(0,g);return l};return b}(f.Subject);b.ReplaySubject=a;var l=function(){return function(a,c){this.time=a;this.value=c}}()},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(){}},function(f,b,a){var h=a(27),k=a(106),e=a(114),g=a(104);b.concat=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return 1===a.length||2===a.length&&h.isScheduler(a[1])?e.from(a[0]):g.concatAll()(k.of.apply(void 0,
a))}},function(f,b,a){var h=a(0),k=a(22),e=a(27),g=a(107);b.merge=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=Number.POSITIVE_INFINITY;var l=null,b=a[a.length-1];e.isScheduler(b)?(l=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(d=a.pop())):"number"===typeof b&&(d=a.pop());return null===l&&1===a.length&&a[0]instanceof h.Observable?a[0]:g.mergeAll(d)(new k.ArrayObservable(a,l))}},function(f,b,a){b.errorObject={e:{}}},function(f,b,a){Object.defineProperty(b,"__esModule",
{value:!0});var h=a(9),k=a(13);f=function(){function a(a){this._array=[];this._sortingFn=a}a.prototype.get=function(a){if(0>a||a>=this._array.length)throw Error("Invalid index.");return this._array[a]};a.prototype.unwrap=function(){return this._array};a.prototype.find=function(a){return h(this._array,a)};a.prototype.indexOf=function(a){return this._array.indexOf(a)};a.prototype.has=function(a){return k.default(this._array,a)};a.prototype.length=function(){return this._array.length};a.prototype.add=
function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a.sort(this._sortingFn);for(var d=c=0;d<a.length;d++){for(var l=a[d],e=!1;!e&&c<this._array.length;)0>this._sortingFn(l,this._array[c])?(this._array.splice(c,0,l),e=!0):c++;e||this._array.push(l)}};a.prototype.removeFirst=function(a){a=this._array.indexOf(a);if(0<=a)return this._array.splice(a,1),a};a.prototype.head=function(){return this._array[0]};a.prototype.last=function(){return this._array[this._array.length-1]};a.prototype.shift=
function(){return this._array.shift()};a.prototype.pop=function(){return this._array.pop()};a.prototype.isBefore=function(a){return this._array.length?0>this._sortingFn(a,this._array[0]):!0};a.prototype.isAfter=function(a){return this._array.length?0<=this._sortingFn(a,this._array[this._array.length-1]):!0};a.prototype.checkSort=function(){for(var a=0;a<this._array.length-1;a++)if(0<this._sortingFn(this._array[a],this._array[a+1]))return!1;return!0};a.prototype.forceSort=function(){this._array.sort(this._sortingFn)};
return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.REGXP_TIME_COLON_FRAMES=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/;b.REGXP_TIME_COLON=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/;b.REGXP_TIME_COLON_MS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/;b.REGXP_TIME_FRAMES=/^(\d*\.?\d*)f$/;b.REGXP_TIME_TICK=/^(\d*\.?\d*)t$/;b.REGXP_TIME_HMS=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/;b.REGXP_PERCENT_VALUES=/^(\d{1,2}|100)% (\d{1,2}|100)%$/;b.REGXP_8_HEX_COLOR=
/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/;b.REGXP_4_HEX_COLOR=/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),k=a(13),e=a(153);b.getStylingAttributes=function(a,c,d,l){var e={},g=a.slice();a=function(a){var b=c[a];if(b){if(b.nodeType===Node.ELEMENT_NODE)for(var n=0;n<=b.attributes.length-1;n++){a=b.attributes[n];var m=a.name;if("style"===m)var f=a.value;else if("region"===m)var t=a.value;else if(m=m.substr(4),
k.default(g,m)&&(e[m]=a.value,g.splice(n,1),!g.length))return{value:e}}if(f&&(b=h(d,function(a){return a.id===f})))for(n=0;n<=g.length-1;n++)if(a=g[n],!e[a]&&b.style[a]){e[a]=b.style[a];g.splice(n,1);if(!g.length)return{value:e};n--}if(t&&(b=h(l,function(a){return a.id===t})))for(n=0;n<=g.length-1;n++)if(a=g[n],!e[a]&&b.style[a]){e[a]=b.style[a];g.splice(n,1);if(!g.length)return{value:e};n--}}};for(var b=0;b<=c.length-1;b++){var f=a(b);if("object"===typeof f)return f.value}return e};b.getStylingFromElement=
function(a){if(a.nodeType!==Node.ELEMENT_NODE)return{};for(var c={},d=0;d<=a.attributes.length-1;d++){var l=a.attributes[d];if(e.default(l.name,"tts")){var b=l.name.substr(4);c[b]=l.value}}return c}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){function e(a){var c=[];a.tagName.toLowerCase()===b.toLowerCase()&&c.push(a);a=a.parentNode;a instanceof Element&&c.push.apply(c,e(a));return c}return a.parentNode instanceof Element?e(a.parentNode):[]}},function(f,
b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(c,d){function l(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(4);f=a(33);var g=a(50),c=a(161);a=function(a){function d(){var d=a.call(this)||this;d.updating=!1;d.readyState=
"opened";d.buffered=new c.default;return d}h(d,a);d.prototype.appendBuffer=function(a){var c=this;this._lock(function(){return c._append(a)})};d.prototype.remove=function(a,c){var d=this;this._lock(function(){return d._remove(a,c)})};d.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};d.prototype._lock=function(a){var c=this;e.default(!this.updating,"updating");this.updating=!0;this.trigger("updatestart",void 0);g.default(function(){a();return k.Observable.of(void 0)}).subscribe(function(){return setTimeout(function(){c._unlock("update")},
0)},function(a){return setTimeout(function(){c._unlock("error",a)},0)})};d.prototype._unlock=function(a,c){this.updating=!1;this.trigger(a,c);this.trigger("updateend",void 0)};return d}(f.default);b.default=a},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);b.default=function(a,e){try{return a(e)}catch(g){return h.Observable.throw(g)}}},function(f,b,a){function h(a,c,d){var l=new r.default;return k.Observable.combineLatest(g.onEncrypted$(a),u.default(a,c,w,d)).mergeMap(function(c,
d){var e=c[1];return k.Observable.merge(p.default(c[0],l,e).map(function(a){return{type:a.type,value:{initData:a.value.initData,initDataType:a.value.initDataType,mediaKeySession:a.value.mediaKeySession,sessionType:a.value.sessionType,keySystemOptions:e.keySystemOptions,sessionStorage:e.sessionStorage}}}),0===d?n.default(e,a,w).ignoreElements():k.Observable.empty())}).mergeMap(function(a){var c=a.value,l=c.initData,e=c.initDataType,b=c.mediaKeySession,g=c.sessionType,n=c.sessionStorage;return k.Observable.merge(q.default(b,
c.keySystemOptions,d),"created-session"===a.type?t.default(b,l,e).do(function(){"persistent-license"===g&&null!=n&&n.add(l,e,b)}):k.Observable.empty()).ignoreElements()})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(5),g=a(15),c=a(6);a(4);var d=a(1),l=a(41),n=a(206),m=a(205),t=a(204),u=a(203),p=a(198),q=a(196);f=a(193);var r=a(192),w=new f.default;b.clearEMESession=function(a){return k.Observable.defer(function(){if(e.shouldUnsetMediaKeys())return m.default(a,w).ignoreElements();
var c=w.getState(a);return c&&c.keySystemOptions.closeSessionsOnStop?c.sessionsStore.closeAllSessions().ignoreElements():k.Observable.empty()})};b.disposeEME=function(a){m.default(a,w).subscribe(l.default)};b.getCurrentKeySystem=function(a){return(a=w.getState(a))&&a.keySystemOptions.type};b.default=function(a,l,b){return l&&l.length?e.hasEMEAPIs()?h(a,l,b):g.onEncrypted$(a).map(function(){d.default.error("eme: encrypted event but no EME API available");throw new c.EncryptedMediaError("MEDIA_IS_ENCRYPTED_ERROR",
null,!0);}):g.onEncrypted$(a).map(function(){d.default.error("eme: ciphered media and no keySystem passed");throw new c.EncryptedMediaError("MEDIA_IS_ENCRYPTED_ERROR",null,!0);})}},function(f,b,a){function h(a,b){a=a.toString();return a.length>=b?a:(Array(b+1).join("0")+a).slice(-b)}function k(a){return function(e,c,d){e=d?parseInt(d,10):1;return h(""+a,e)}}Object.defineProperty(b,"__esModule",{value:!0});b.addNextSegments=function(a,b,c){a.index._addSegments(b,c)};b.pad=h;b.processFormatedToken=
k;b.replaceTokens=function(a,b,c){return-1===a.indexOf("$")?a:a.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(c.id)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,k(c.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,function(a,c,e){if(null==b.number)throw Error("Segment number not defined in a $Number$ scheme");return k(b.number)(a,c,e)}).replace(/\$Time(|\%0(\d+)d)\$/g,function(a,c,e){if(null==b.time)throw Error("Segment time not defined in a $Time$ scheme");return k(b.time)(a,c,e)})};b.isMP4EmbeddedTrack=
function(a){return"application/mp4"===a.mimeType};b.byteRange=function(a){var e=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +e+"-"+ +a:"bytes="+ +e+"-"}},function(f,b,a){function h(a){if(u[a])return u[a];var c=m.strToBytes(a);return u[a]=c}function k(a,c){return m.concat(m.itobe4(c.length+8),h(a),c)}function e(a,c,d,l,e){for(var b=a.length,g=0,k;g<b;){k=m.be4toi(a,g);if(1970628964===m.be4toi(a,g+4)&&m.be4toi(a,g+8)===c&&m.be4toi(a,g+12)===d&&m.be4toi(a,g+16)===l&&m.be4toi(a,g+20)===e)return a.subarray(g+
24,g+k);g+=k}}function g(a,c,d,l){var e=[a,c,d];l.forEach(function(a){a=p.pssh(a.systemId,a.privateData,a.keyIds);e.push(a)});return e}function c(a,c,d,l){var e=a.length,b=c.length;d=d.length;a=a.subarray(d,e);e=new Uint8Array(b+(e-d));e.set(c,0);e.set(a,b);e.set(m.itobe4(c.length+8),l+16);return e}function d(a,c,d,l,e,b,n){d=p.mult("stbl",[d,k("stts",new Uint8Array(8)),k("stsc",new Uint8Array(8)),k("stsz",new Uint8Array(12)),k("stco",new Uint8Array(8))]);var f=k("url ",new Uint8Array([0,0,0,1]));
f=p.dref(f);f=p.mult("dinf",[f]);l=p.mult("minf",[l,f,d]);c=p.hdlr(c);d=p.mdhd(a);c=p.mult("mdia",[d,c,l]);e=p.tkhd(e,b,1);e=p.mult("trak",[e,c]);b=p.trex(1);b=p.mult("mvex",[b]);a=p.mvhd(a,1);n=p.mult("moov",g(a,b,e,n));a=p.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return m.concat(a,n)}Object.defineProperty(b,"__esModule",{value:!0});var l=a(5);f=a(30);var n=a(4),m=a(21),t=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],u={},p={mult:function(a,c){return k(a,m.concat.apply(null,
c))},avc1encv:function(a,c,d,l,e,b,g,n,f,t){return k(a,m.concat(6,m.itobe2(c),16,m.itobe2(d),m.itobe2(l),m.itobe2(e),2,m.itobe2(b),6,[0,1,g.length],m.strToBytes(g),31-g.length,m.itobe2(n),[255,255],f,"encv"===a?t||[]:[]))},avcc:function(a,c,d){return k("avcC",m.concat([1,a[1],a[2],a[3],252|(2===d?1:4===d?3:0),225],m.itobe2(a.length),a,[1],m.itobe2(c.length),c))},dref:function(a){return k("dref",m.concat(7,[1],a))},esds:function(a,c){return k("esds",m.concat(4,[3,25],m.itobe2(a),[0,4,17,64,21],11,
[5,2],m.hexToBytes(c),[6,1,2]))},frma:function(a){return k("frma",m.strToBytes(a))},free:function(a){return k("free",new Uint8Array(a-8))},ftyp:function(a,c){return k("ftyp",m.concat.apply(null,[m.strToBytes(a),[0,0,0,1]].concat(c.map(m.strToBytes))))},hdlr:function(a){switch(a){case "video":a="vide";var c="VideoHandler";break;case "audio":a="soun";c="SoundHandler";break;default:a="hint",c=""}return k("hdlr",m.concat(8,m.strToBytes(a),12,m.strToBytes(c),1))},mdhd:function(a){return k("mdhd",m.concat(12,
m.itobe4(a),8))},moof:function(a,c){return p.mult("moof",[a,c])},mp4aenca:function(a,c,d,l,e,b,g,n){return k(a,m.concat(6,m.itobe2(c),8,m.itobe2(d),m.itobe2(l),2,m.itobe2(e),m.itobe2(b),2,g,"enca"===a?n||[]:[]))},mvhd:function(a,c){return k("mvhd",m.concat(12,m.itobe4(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,m.itobe2(c+1)))},pssh:function(a,c,d){void 0===c&&(c=new Uint8Array(0));void 0===d&&(d=new Uint8Array(0));a=a.replace(/-/g,"");n.default(32===a.length,"wrong system id length");var l=
d.length;if(0<l){var e=1;d=m.concat.apply(void 0,[m.itobe4(l)].concat(d))}else e=0,d=[];return k("pssh",m.concat([e,0,0,0],m.hexToBytes(a),d,m.itobe4(c.length),c))},saio:function(a,c,d,l){return k("saio",m.concat(4,[0,0,0,1],m.itobe4(a.length+c.length+d.length+l.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return k("saiz",new Uint8Array(0));var c=m.be4toi(a,0),d=m.be4toi(a,4),l=new Uint8Array(d+9);l.set(m.itobe4(d),5);d=9;for(var e=8,b,g;e<a.length;)e+=8,2===(c&2)?(g=2,b=m.be2toi(a,e),e+=6*
b+2):g=b=0,l[d]=6*b+8+g,d++;return k("saiz",l)},schm:function(a,c){return k("schm",m.concat(4,m.strToBytes(a),m.itobe4(c)))},senc:function(a){return k("senc",a)},smhd:function(){return k("smhd",new Uint8Array(8))},stsd:function(a){return k("stsd",m.concat.apply(void 0,[7,[a.length]].concat(a)))},tkhd:function(a,c,d){return k("tkhd",m.concat(m.itobe4(7),8,m.itobe4(d),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],m.itobe2(a),2,m.itobe2(c),2))},trex:function(a){return k("trex",m.concat(4,m.itobe4(a),
[0,0,0,1],12))},tfdt:function(a){return k("tfdt",m.concat([1,0,0,0],m.itobe8(a)))},tenc:function(a,c,d){return k("tenc",m.concat(6,[a,c],m.hexToBytes(d)))},traf:function(a,c,d,l,e){var b=[a,c,d];e&&b.push(p.senc(e),p.saiz(e),p.saio(l,a,c,d));return p.mult("traf",b)},trun:function(a){if(a[11]&1)return a;var c=new Uint8Array(a.length+4);c.set(m.itobe4(a.length+4),0);c.set(a.subarray(4,16),4);c[11]|=1;c.set([0,0,0,0],16);c.set(a.subarray(16,a.length),20);return c},vmhd:function(){var a=new Uint8Array(12);
a[3]=1;return k("vmhd",a)}},q={senc:function(a){return e(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return e(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return e(a,3565190898,3392751253,2387879627,2655430559)}};b.default={getMdat:f.getMDAT,getTraf:f.getTRAF,parseTfrf:function(a){a=q.tfrf(a);if(!a)return[];for(var c=[],d=a[0],l=a[4],e=0;e<l;e++){if(1===d){var b=m.be8toi(a,16*e+5);var g=m.be8toi(a,16*e+13)}else b=m.be4toi(a,8*e+5),g=m.be4toi(a,8*e+9);c.push({time:b,
duration:g})}return c},parseTfxd:function(a){if(a=q.tfxd(a))return{duration:m.be8toi(a,12),time:m.be8toi(a,4)}},createVideoInitSegment:function(a,c,l,e,b,g,k,n,f){f=f||[];var t=k.split("00000001");k=t[2];t=m.hexToBytes(t[1]);k=m.hexToBytes(k);g=p.avcc(t,k,g);f.length&&null!=n?(n=p.tenc(1,8,n),n=p.mult("schi",[n]),k=p.schm("cenc",65536),t=p.frma("avc1"),n=p.mult("sinf",[t,k,n]),e=p.avc1encv("encv",1,c,l,e,b,"AVC Coding",24,g,n)):e=p.avc1encv("avc1",1,c,l,e,b,"AVC Coding",24,g);e=p.stsd([e]);return d(a,
"video",e,p.vmhd(),c,l,f)},createAudioInitSegment:function(a,c,l,e,b,g,k,n){n=n||[];g||(g=(32|t.indexOf(b)&31)<<4,g=m.bytesToHex(m.itobe2((g|c&31)<<3)));g=p.esds(1,g);if(n.length&&null!=k){k=p.tenc(1,8,k);k=p.mult("schi",[k]);var f=p.schm("cenc",65536),h=p.frma("mp4a");k=p.mult("sinf",[h,f,k]);c=p.mp4aenca("enca",1,c,l,e,b,g,k)}else c=p.mp4aenca("mp4a",1,c,l,e,b,g);c=p.stsd([c]);return d(a,"audio",c,p.smhd(),0,0,n)},patchSegment:function(a,d){var e=a.subarray(0,m.be4toi(a,0)),b=p.tfdt(d);d=b.length;
var g=m.be4toi(e,8),k=m.be4toi(e,g+8),n=m.be4toi(e,g+8+8),f=m.be4toi(e,g+8+8+n),t=e.subarray(8,g+8),h=e.subarray(g+8+8,g+8+8+k-8);k=h.subarray(0,n);f=h.subarray(n,n+f);k.set([0,0,0,1],12);h=q.senc(h);f=p.trun(f);b=p.traf(k,b,f,t,h);t=p.moof(t,b);d=g+8+8+n+d;return l.isIE?c(a,t,e,d):8<=e.length-t.length?(e=e.length-t.length,a.set(t,0),a.set(p.free(e),t.length),a.set(m.itobe4(t.length+8+e),d+16),a):c(a,t,e,d)}}},function(f,b,a){function h(a){if(!a.isLive)return[a.minimumTime||0,a.getDuration()];var e=
a.availabilityStartTime||0,b=a.presentationLiveGap||0,c=a.timeShiftBufferDepth||0;e=Date.now()/1E3-e-b;return[Math.min(e,Math.max(null!=a.minimumTime?a.minimumTime:0,e-c+5)),e]}Object.defineProperty(b,"__esModule",{value:!0});b.toWallClockTime=function(a,e){return new Date(1E3*(a+(e.availabilityStartTime||0)))};b.fromWallClockTime=function(a,e){if(e.isLive){var b=e.suggestedPresentationDelay||0;var c=e.presentationLiveGap||0,d=e.timeShiftBufferDepth||0;a="number"===typeof a?a:+a;var l=Date.now();
b=Math.max(Math.min(a,l-1E3*(c+b)),l-1E3*d)}else b=+a;return b/1E3-(e.availabilityStartTime||0)};b.getMinimumBufferPosition=function(a){return h(a)[0]};b.getMaximumBufferPosition=function(a){if(!a.isLive)return a.getDuration();var e=a.availabilityStartTime||0;a=a.presentationLiveGap||0;return Date.now()/1E3-e-a};b.getBufferLimits=h},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(){this._hashes={}}a.prototype.add=function(a){this._hashes[a]=!0};a.prototype.remove=
function(a){delete this._hashes[a]};a.prototype.test=function(a){return!!this._hashes[a]};a.prototype.isEmpty=function(){return!Object.keys(this._hashes).length};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(32);b.BROWSER_PREFIXES=["","webkit","moz","ms"];f=window;b.HTMLElement_=f.HTMLElement;b.VTTCue_=f.VTTCue||f.TextTrackCue;b.MediaSource_=f.MediaSource||f.MozMediaSource||f.WebKitMediaSource||f.MSMediaSource;f=f.MediaKeys||f.MozMediaKeys||f.WebKitMediaKeys||
f.MSMediaKeys;b.MediaKeys_=f;if(!f){var k=function(){throw new h.default("MEDIA_KEYS_NOT_SUPPORTED",null,!0);};b.MediaKeys_=f=function(){return function(){this.setServerCertificate=this.isTypeSupported=this.createSession=this.create=k}}()}f="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent);b.isIE=f;f=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");b.isFirefox=f;b.READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,
HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}},function(f,b,a){function h(a,c){if(Array.isArray(c)){var d=c.map(function(c){return h(a,c)});return k.Observable.merge.apply(k.Observable,d)}return a instanceof e.default?k.Observable.create(function(d){var l=function(a){d.next(a)};a.addEventListener(c,l);return function(){a.removeEventListener(c,l)}}):k.Observable.fromEvent(a,c)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(33);b.default=h},function(f,b,a){var h=this&&this.__extends||function(a,
e){function b(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(b.prototype=e.prototype,new b)};f=function(a){function e(){var e=a.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError";this.stack=e.stack;this.message=e.message}h(e,a);return e}(Error);b.ObjectUnsubscribedError=f},function(f,b,a){var h=a(297);b.multicast=function(a,b){return function(c){var d="function"===typeof a?a:function(){return a};if("function"===
typeof b)return c.lift(new k(d,b));var l=Object.create(c,h.connectableObservableDescriptor);l.source=c;l.subjectFactory=d;return l}};var k=function(){function a(a,c){this.subjectFactory=a;this.selector=c}a.prototype.call=function(a,c){var d=this.selector,l=this.subjectFactory();a=d(l).subscribe(a);a.add(c.subscribe(l));return a};return a}();b.MulticastOperator=k},function(f,b,a){var h=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);
a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},k=a(10);f=a(11);b.mergeMap=function(a,d,l){void 0===l&&(l=Number.POSITIVE_INFINITY);return function(c){"number"===typeof d&&(l=d,d=null);return c.lift(new e(a,d,l))}};var e=function(){function a(a,c,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.project=a;this.resultSelector=c;this.concurrent=e}a.prototype.call=function(a,c){return c.subscribe(new g(a,this.project,this.resultSelector,this.concurrent))};return a}();b.MergeMapOperator=
e;var g=function(a){function c(c,d,e,b){void 0===b&&(b=Number.POSITIVE_INFINITY);a.call(this,c);this.project=d;this.resultSelector=e;this.concurrent=b;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}h(c,a);c.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var c=this.index++;try{var d=this.project(a,c)}catch(t){this.destination.error(t);return}this.active++;this._innerSub(d,a,c)};c.prototype._innerSub=function(a,
c,d){this.add(k.subscribeToResult(this,a,c,d))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,c,d,e,b){this.resultSelector?this._notifyResultSelector(a,c,d,e):this.destination.next(c)};c.prototype._notifyResultSelector=function(a,c,d,e){try{var l=this.resultSelector(a,c,d,e)}catch(p){this.destination.error(p);return}this.destination.next(l)};c.prototype.notifyComplete=function(a){var c=
this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(f.OuterSubscriber);b.MergeMapSubscriber=g},function(f,b,a){function h(a){var e=a.Symbol;if("function"===typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;if((e=a.Set)&&"function"===typeof(new e)["@@iterator"])return"@@iterator";if(a=a.Map){e=Object.getOwnPropertyNames(a.prototype);for(var b=0;b<e.length;++b){var c=e[b];if("entries"!==
c&&"size"!==c&&a.prototype[c]===a.prototype.entries)return c}}return"@@iterator"}f=a(18);b.symbolIteratorPonyfill=h;b.iterator=h(f.root);b.$$iterator=b.iterator},function(f,b,a){var h=this&&this.__extends||function(a,e){function b(){this.constructor=a}for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c]);a.prototype=null===e?Object.create(e):(b.prototype=e.prototype,new b)};f=function(a){function e(e,c){a.call(this);this.value=e;this.scheduler=c;this._isScalar=!0;c&&(this._isScalar=!1)}h(e,a);e.create=
function(a,c){return new e(a,c)};e.dispatch=function(a){var c=a.value,d=a.subscriber;a.done?d.complete():(d.next(c),d.closed||(a.done=!0,this.schedule(a)))};e.prototype._subscribe=function(a){var c=this.value,d=this.scheduler;if(d)return d.schedule(e.dispatch,0,{done:!1,value:c,subscriber:a});a.next(c);a.closed||a.complete()};return e}(a(0).Observable);b.ScalarObservable=f},function(f,b,a){b.noop=function(){}},function(f,b,a){function h(a){var e=a.Symbol;"function"===typeof e?e.observable?a=e.observable:
(a=e("observable"),e.observable=a):a="@@observable";return a}f=a(18);b.getSymbolObservable=h;b.observable=h(f.root);b.$$observable=b.observable},function(f,b,a){f=a(18).root.Symbol;b.rxSubscriber="function"===typeof f&&"function"===typeof f.for?f.for("rxSubscriber"):"@@rxSubscriber";b.$$rxSubscriber=b.rxSubscriber},function(f,b,a){function h(){try{return e.apply(this,arguments)}catch(g){return k.errorObject.e=g,k.errorObject}}var k=a(44),e;b.tryCatch=function(a){e=a;return h}},function(f,b,a){b.isFunction=
function(a){return"function"===typeof a}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.PLAYER_STATES={STOPPED:"STOPPED",LOADED:"LOADED",LOADING:"LOADING",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",BUFFERING:"BUFFERING",SEEKING:"SEEKING"}},function(f,b,a){function h(a,e){return g.hasLoadedMetadata(a).do(function(){c.default.info("set initial time",e);a.playbackRate=1;a.currentTime="function"===typeof e?e():e}).share()}function k(a,e){return g.canPlay(a).do(function(){c.default.info("canplay event");
e&&a.play()}).share()}Object.defineProperty(b,"__esModule",{value:!0});var e=a(0),g=a(5),c=a(1);b.default=function(a,c,b){c=h(a,c);a=k(a,b);a=e.Observable.combineLatest(c,a).take(1).mapTo(void 0);return{initialSeek$:c,loadAndPlay$:a}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(5);f=a(2);var k=a(1),e=a(16),g=f.default.DISCONTINUITY_THRESHOLD;b.default=function(a,d){return d.do(function(c){if(c.stalled){var d=c.currentTime,l=e.getNextRangeGap(c.buffered,d);h.isPlaybackStuck(c.currentTime,
c.currentRange,c.state,!!c.stalled)?(k.default.warn("after freeze seek",d,c.currentRange),a.currentTime=d):l<g&&(c=d+l+1/60,k.default.warn("discontinuity seek",d,l,c),a.currentTime=c)}}).share().map(function(a){return a.stalled}).distinctUntilChanged(function(a,c){return!a&&!c||!!a&&!!c&&a.reason===c.reason})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(1);b.default=function(a,b,c,d){d=d.pauseWhenStalled;return(void 0===d||d?c.pairwise().map(function(a){var c=
a[1].stalled;a=a[0].stalled;if(!a!==!c||a&&c&&a.reason!==c.reason)return!a}).filter(function(a){return null!=a}).startWith(!1):h.Observable.of(!1)).switchMap(function(c){return c?h.Observable.defer(function(){k.default.info("pause playback to build buffer");a.playbackRate=0;return h.Observable.of(0)}):b.do(function(c){k.default.info("resume playback speed",c);a.playbackRate=c})})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(32),k=a(1),e=a(57);b.default=function(a){return e.default(a,
"error").mergeMap(function(){switch(a.error&&a.error.code){case 1:var c="MEDIA_ERR_ABORTED";break;case 2:c="MEDIA_ERR_NETWORK";break;case 3:c="MEDIA_ERR_DECODE";break;case 4:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:c="MEDIA_ERR_UNKNOWN"}k.default.error("stream: video element MEDIA_ERR("+c+")");throw new h.default(c,null,!0);})}},function(f,b,a){function h(a){return a.split(/ |\t/).reduce(function(a,c){c=c.split(":");2===c.length&&(a[c[0]]=c[1]);return a},{})}Object.defineProperty(b,"__esModule",
{value:!0});var k=a(143);b.default=function(a,b){var c=/--\x3e/;if(c.test(a[0]))c=a[0],a=a.slice(1,a.length);else{if(!c.test(a[1]))return null;var d=a[0];c=a[1];a=a.slice(2,a.length)}if(!c)return null;var e=c.match(/^([\d:.]+)[ |\t]+--\x3e[ |\t]+([\d:.]+)[ |\t]*(.*)$/);if(e){c=k.default(e[1]);var g=k.default(e[2]);null==c||null==g?c=null:(e=h(e[3]),c={start:c,end:g,settings:e})}else c=null;return c?{start:c.start+b,end:c.end+b,settings:c.settings,payload:a,header:d}:null}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var h=a(35);b.default=function(a,e){for(var b=[];e<a.length;e++)if(h.isStartOfCueBlock(a,e)){var c=h.findEndOfCueBlock(a,e);b.push(a.slice(e,c));e=c}else if(a[e])for(;a[e];)e++;return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(146);b.default=function(a,e){if(0===a.length)return null;var b=[];if(a[1]&&a[1].indexOf("--\x3e")){b=a[1].split("--\x3e").map(function(a){return a.trim()});var c=b[0];var d=b[1];b=a.slice(2,a.length)}c&&d||(b=a[0].split("--\x3e").map(function(a){return a.trim()}),
c=b[0],d=b[1],b=a.slice(1,a.length));if(!c||!d)return null;a=h.default(c);c=h.default(d);return null==a||null==c?null:{start:a+e,end:c+e,payload:b}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(147);b.default=function(a){for(var e=[],b=0;b<a.length;b++)if(a[b]){var c=h.default(a,b);b=a.slice(b,c);0<b.length&&(1===b.length?0<=b[0].indexOf("--\x3e")&&e.push(b):(0<=b[1].indexOf("--\x3e")||0<=b[0].indexOf("--\x3e"))&&e.push(b));b=c}return e}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var h=a(150);b.default=function(a,e){var b=a.getAttribute("begin"),c=a.getAttribute("dur");a=a.getAttribute("end");b=b?h.default(b,e):null;c=c?h.default(c,e):null;e=a?h.default(a,e):null;if(null==b||null==e&&null==c)throw Error("Invalid text cue");return{start:b,end:null==e?b+c:e}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.getBodyNode=function(a){return a.getElementsByTagName("body")[0]};b.getStyleNodes=function(a){return a.getElementsByTagName("style")};
b.getRegionNodes=function(a){return a.getElementsByTagName("region")};b.getTextNodes=function(a){return a.getElementsByTagName("p")}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.getAttribute("ttp:frameRate"),e=a.getAttribute("ttp:subFramRate"),g=a.getAttribute("ttp:tickRate"),c=a.getAttribute("ttp:frameRateMultiplier"),d=a.getAttribute("xml:space");if(d&&"default"!==d&&"preserve"!==d)throw Error("Invalid spacing style");a=Number(b)||30;e=Number(e)||
1;var l=Number(g)||0;g=l;var n=a,m=null!=e?e:1;d=d||"default";0===l&&(g=b?a*e:1);c&&(b=/^(\d+) (\d+)$/g.exec(c))&&(n=Number(b[1])/Number(b[2])*a);return{tickRate:g,frameRate:n,subFrameRate:m,spaceStyle:d}}},function(f,b,a){function h(a,d,e){void 0===e&&(e=!0);return c.isKnownError(d)?d:d instanceof c.RequestError?new c.NetworkError(a,d,e):new c.OtherError(a,d,e)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(8),e=a(0),g=a(7);f=a(2);var c=a(6),d=a(14),l=a(50),n=a(167),m=f.default.MAX_BACKOFF_DELAY_BASE,
t=f.default.INITIAL_BACKOFF_DELAY_BASE;b.default=function(a,c){function b(a){return l.default(y,a).catch(function(a){throw h("PIPELINE_RESOLVE_ERROR",a);})}function f(a){function c(){var c=n.default(l.default(z,a),E).catch(function(a){throw h("PIPELINE_LOAD_ERROR",a);}).do(function(c){"response"===c.type&&p&&p.add(a,c.value)});return e.Observable.of({type:"request",value:a}).concat(c)}var b=p?p.get(a):null;return null!=b?d.default(b).map(function(a){return{type:"cache",value:a}}).catch(c):c()}function u(a){return l.default(A,
a).catch(function(a){throw h("PIPELINE_PARSING_ERROR",a);})}var p=c.cache,x=c.maxRetry;c=c.maxRetryOffline;var z=a.loader,A=a.parser,y=null!=a.resolver?a.resolver:e.Observable.of.bind(e.Observable),C=new g.Subject,E={baseDelay:t,maxDelay:m,maxRetryRegular:x,maxRetryOffline:c,onRetry:function(a){C.next(h("PIPELINE_LOAD_ERROR",a,!1))}};return function(a){a=b(a).mergeMap(function(a){return f(a).mergeMap(function(c){switch(c.type){case "cache":case "data":case "response":var d=k({response:c.value},a);
return("response"===c.type?e.Observable.of({type:"metrics",value:{size:c.value.size,duration:c.value.duration}}):e.Observable.empty()).concat(u(d).map(function(a){return{type:"data",value:k({parsed:a},d)}}));default:return e.Observable.of(c)}})}).finally(function(){C.complete()});var c=C.map(function(a){return{type:"error",value:a}});return e.Observable.merge(a,c)}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=a(168);b.StaticRepresentationIndex=f.default},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var h=a(19);f=function(){function a(a){var e=h.default();this.id=null==a.id?e:a.id;this.bitrate=a.bitrate;this.codec=a.codecs;null!=a.height&&(this.height=a.height);null!=a.width&&(this.width=a.width);null!=a.mimeType&&(this.mimeType=a.mimeType);this.index=a.index;this.baseURL=a.baseURL}a.prototype.getMimeTypeString=function(){return this.mimeType+';codecs="'+this.codec+'"'};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),
k=a(8),e=a(19),g=a(82);f=function(){function a(a){var c=this,d=e.default();this.id=null==a.id?d:""+a.id;this.type=a.type;this.representations=Array.isArray(a.representations)?a.representations.map(function(a){return new g.default(k({rootId:c.id},a))}).sort(function(a,c){return a.bitrate-c.bitrate}):[];null!=a.language&&(this.language=a.language);null!=a.normalizedLanguage&&(this.normalizedLanguage=a.normalizedLanguage);null!=a.closedCaption&&(this.isClosedCaption=a.closedCaption);null!=a.audioDescription&&
(this.isAudioDescription=a.audioDescription);null!=a.contentProtection&&(this.contentProtection=a.contentProtection);this.manuallyAdded=!!a.manuallyAdded}a.prototype.getAvailableBitrates=function(){return this.representations.map(function(a){return a.bitrate})};a.prototype.getRepresentation=function(a){return h(this.representations,function(c){return a===c.id})};a.prototype.getRepresentationsForBitrate=function(a){return this.representations.filter(function(c){return c.bitrate===a})||null};return a}();
b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(0),e=a(6),g=a(1);f=a(182);b.createFakeBuffer=f.default;var c=a(181);a=function(){function a(a,c){this._abrManager=a;this._abrBaseClock$=c}a.prototype.createBuffer=function(a,d,b,f,h,p){function l(u){g.default.info("changing representation",t.type,u);return c.default({clock$:a,content:{representation:u,adaptation:t,period:m,manifest:n},queuedSourceBuffer:d,segmentBookkeeper:b,segmentFetcher:f,wantedBufferAhead$:h}).catch(function(a){if(!n.isLive||
a.type!==e.ErrorTypes.NETWORK_ERROR||!a.isHttpError(412))throw a;n.updateLiveGap(1);g.default.warn("precondition failed",n.presentationLiveGap);return k.Observable.timer(2E3).mergeMap(function(){return l(u)})})}var n=p.manifest,m=p.period,t=p.adaptation,u=this._getABRForAdaptation(t);p=u.filter(function(a){return null!=a.bitrate}).map(function(a){return{type:"bitrateEstimationChange",value:{type:t.type,bitrate:a.bitrate}}});u=u.map(function(a){return a.representation}).distinctUntilChanged(function(a,
c){return!a||!c||a.bitrate===c.bitrate&&a.id===c.id}).distinctUntilChanged(function(a,c){return a.id===c.id}).switchMap(function(a){return k.Observable.of({type:"representationChange",value:{type:t.type,period:m,representation:a}}).concat(l(a))});return k.Observable.merge(u,p)};a.prototype._getABRForAdaptation=function(a){var c=a.representations,d=null,e=this._abrBaseClock$.map(function(a){var c;if(d){var e=d.bitrate;d.index&&(c=d.index.getLastPosition())}return h({bitrate:e,lastIndexPosition:c},
a)});return this._abrManager.get$(a.type,e,c).do(function(a){d=a.representation})};return a}();b.default=a},function(f,b,a){f.exports=function(a,b,e){if("function"===typeof Array.prototype.findIndex)return a.findIndex(b,e);if("function"!==typeof b)throw new TypeError("predicate must be a function");a=Object(a);var g=a.length;if(0===g)return-1;for(var c=0;c<g;c++)if(b.call(e,a[c],c,a))return c;return-1}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(a){this._alpha=
Math.exp(Math.log(.5)/a);this._totalWeight=this._lastEstimate=0}a.prototype.addSample=function(a,e){var b=Math.pow(this._alpha,a);e=e*(1-b)+b*this._lastEstimate;isNaN(e)||(this._lastEstimate=e,this._totalWeight+=a)};a.prototype.getEstimate=function(){return this._lastEstimate/(1-Math.pow(this._alpha,this._totalWeight))};return a}();b.default=f},function(f,b,a){function h(a){return a*(.3*(2*Math.random()-1)+1)}Object.defineProperty(b,"__esModule",{value:!0});b.getFuzzedDelay=h;b.getBackedoffDelay=
function(a,e){void 0===e&&(e=1);return h(a*Math.pow(2,e-1))}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(13),k=a(1);b.default=function(a){if(""===a.sessionId)return!1;var e=[];a.keyStatuses.forEach(function(a){e.push(a)});return 0<e.length&&!h.default(e,"expired")&&!h.default(e,"internal-error")?(k.default.debug("eme: reuse loaded session",a.sessionId),!0):!1}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(12),e=a(37),g=a(210);b.default=
function(a){for(var c=e.default(a),b,n,m,f,u=0;u<a.childNodes.length;u++)if(a.childNodes[u].nodeType===Node.ELEMENT_NODE){var p=a.childNodes[u];"SegmentTimeline"===p.nodeName&&(f=g.default(p))}for(u=0;u<a.attributes.length;u++)switch(p=a.attributes[u],p.nodeName){case "initialization":null==c.initialization&&(c.initialization={media:p.value});break;case "index":b=p.value;break;case "media":n=p.value;break;case "bitstreamSwitching":m=k.parseBoolean(p.value)}if(null!=f)c=h({},c,{indexType:"timeline",
timeline:f});else{a=c.duration;if(null==a)throw Error("Invalid SegmentTemplate: no duration");c=h({},c,{indexType:"template",duration:a})}null!=b&&(c.index=b);null!=n&&(c.media=n);null!=m&&(c.bitstreamSwitching=m);return c}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(37),e=a(211);b.default=function(a){var c=k.default(a),d=[];a=a.childNodes;for(var b=0;b<a.length;b++)if(a[b].nodeType===Node.ELEMENT_NODE){var g=a[b];"SegmentURL"===g.nodeName&&(g=e.default(g),d.push(g))}a=
c.duration;if(null==a)throw Error("Invalid SegmentList: no duration");return h(c,{list:d,duration:a})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(4);var h=a(30);b.default=function(a,e,b,c){b=b||[];var d,l,g=h.parseTfdt(e);e=h.getDurationFromTrun(e);c=c&&c.timescale?c.timescale:a.timescale;if(c===a.timescale){var m=Math.min(.9*c,null!=a.duration?a.duration/4:.25);var k=a.time;a=a.duration}else m=Math.min(.9*c,null!=a.duration?a.duration/a.timescale*c/4:.25),k=(a.time||0)/a.timescale*
c,a=null!=a.duration?a.duration/a.timescale*c:void 0;0<=g&&(d=g);0<=e&&(null==a||Math.abs(e-a)<=m)&&(l=e);null==d&&(d=b[0].time,0<=d?(g=b[0].timescale,d=null!=g&&g!==c?d/g*c:d):d=k);null==l&&(b.length?(l=b.reduce(function(a,c){return a+(c.duration||0)},0),l=0<=l?l:a):l=a);return{timescale:c,time:d||0,duration:l||0}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=/\.(isml?)(\?token=\S+)?$/,k=/\?token=(\S+)/;b.byteRange=function(a){var e=a[0];return(a=a[1])&&Infinity!==a?"bytes="+
+e+"-"+ +a:"bytes="+ +e+"-"};b.extractISML=function(a){return a.getElementsByTagName("media")[0].getAttribute("src")};b.extractToken=function(a){return(a=a.match(k))&&a[1]||""};b.replaceToken=function(a,b){return b?a.replace(k,"?token="+b):a.replace(k,"")};b.resolveManifest=function(a){var e=a.match(h);return e?a.replace(e[1],e[1]+"/manifest"):a};b.buildSegmentURL=function(a,b,c){return a.replace(/\{bitrate\}/g,String(b.bitrate)).replace(/\{start time\}/g,String(c.time))}},function(f,b,a){function h(a,
c){return e.default({url:a,responseType:"document",ignoreProgressEvents:c})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(23);b.default=function(a){return function(c){var d=a.customManifestLoader,e=a.ignoreProgressEvents;return d?k.Observable.create(function(a){var e=!1,b=!1,l=d(c,{reject:function(c){void 0===c&&(c={});b||(e=!0,a.error(c))},resolve:function(c){b||(e=!0,a.next({type:"response",value:{responseData:c.data,size:c.size,duration:c.duration}}),a.complete())},fallback:function(){b=
!0;h(c).subscribe(a)}});return function(){e||b||"function"!==typeof l||l()}}):h(c,e)}}},function(f,b,a){function h(a){for(var e="",b=0;b<a.length;b+=16E3){var c=a.subarray(b,b+16E3);e+=String.fromCharCode.apply(null,c)}return e}Object.defineProperty(b,"__esModule",{value:!0});b.stringFromCharCode=h;b.stringFromUTF8=function(a){if(!a)return"";a=new Uint8Array(a);239===a[0]&&187===a[1]&&191===a[2]&&(a=a.subarray(3));a=h(a);a=escape(a);return decodeURIComponent(a)}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var h=a(21);b.default=function(a){var e=0,b=a.length,c=h.bytesToStr(a.subarray(e,e+8));e+=8;var d=a[e];e+=1;var l=a[e];e+=1;var n=a[e];e+=1;var m=a[e];e+=1;d=[d,l,n,m].join(".");l=a[e]+h.le4toi(a,e+1);e+=4;n=h.le4toi(a,e);e+=4;m=h.bytesToStr(a.subarray(e,e+4));e+=4;var k=h.le2toi(a,e);e+=2;var f=h.le2toi(a,e);e+=2;var p=[a[e],a[e+1]].join(":"),q=1===a[e+2];e=64;var r=[],w=0;if(!l)throw Error("bif: no images to parse");for(;e<b;){var v=h.le4toi(a,e);e+=4;var x=h.le4toi(a,e);
e+=4;if(C){var z=C.index,A=n,y=w;var C=a.subarray(C.offset,x);r.push({index:z,duration:A,ts:y,data:C});w+=n}if(4294967295===v)break;C={index:v,offset:x}}return{fileFormat:c,version:d,imageCount:l,timescale:n,format:m,width:k,height:f,aspectRatio:p,isVod:q,thumbs:r}}},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(c,d){function e(){this.constructor=
c}a(c,d);c.prototype=null===d?Object.create(d):(e.prototype=d.prototype,new e)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(7),g=a(21),c=a(14);f=a(33);var d=a(56),l=a(15),n=a(97),m;b.requestMediaKeySystemAccess=m;var t=function(){function a(){}a.prototype._setVideo=function(){throw Error("MediaKeys is not implemented in your browser");};a.prototype.createSession=function(){throw Error("MediaKeys is not implemented in your browser");};a.prototype.setServerCertificate=function(){throw Error("MediaKeys is not implemented in your browser");
};return a}();b.MockMediaKeys=t;if(navigator.requestMediaKeySystemAccess)b.requestMediaKeySystemAccess=m=function(a,d){return c.default(navigator.requestMediaKeySystemAccess(a,d))};else{var u=function(a){return function(c,d){var e=this;return new Promise(function(b,l){try{a.call(e,c,d),b()}catch(C){l(C)}})}};if(HTMLVideoElement.prototype.webkitGenerateKeyRequest){var p=function(a){function c(c,d){var b=a.call(this)||this;b._closeSession$=new e.Subject;b._vid=c;b._key=d;b.sessionId="";b.closed=new Promise(function(a){b._closeSession$.subscribe(a)});
b.keyStatuses=new Map;b.expiration=NaN;k.Observable.merge(l.onKeyMessage$(c),l.onKeyAdded$(c),l.onKeyError$(c)).takeUntil(b._closeSession$).subscribe(function(a){return b.trigger(a.type,a)});b.update=u(function(a,c){if(0<=b._key.indexOf("clearkey")){var d=JSON.parse(g.bytesToStr(a));a=g.strToBytes(atob(d.keys[0].k));d=g.strToBytes(atob(d.keys[0].kid));b._vid.webkitAddKey(b._key,a,d,c)}else b._vid.webkitAddKey(b._key,a,null,c);b.sessionId=c});return b}h(c,a);c.prototype.generateRequest=function(a,
c){var d=this;return new Promise(function(a){if("function"!==typeof d._vid.webkitGenerateKeyRequest)throw Error("impossible to generate a key request");d._vid.webkitGenerateKeyRequest(d._key,c);a()})};c.prototype.close=function(){var a=this;return new Promise(function(c){a._closeSession$.next();a._closeSession$.complete();c()})};c.prototype.load=function(){return Promise.resolve(!1)};c.prototype.remove=function(){return Promise.resolve()};return c}(f.default);b.MockMediaKeys=t=function(){function a(a){this.ks_=
a}a.prototype._setVideo=function(a){this._vid=a};a.prototype.createSession=function(){if(!this._vid)throw Error("Video not attached to the MediaKeys");return new p(this._vid,this.ks_)};a.prototype.setServerCertificate=function(){throw Error("Server certificate is not implemented in your browser");};return a}();var q=function(a){var c=document.querySelector("video")||document.createElement("video");return c&&c.canPlayType?!!c.canPlayType("video/mp4",a):!1};b.requestMediaKeySystemAccess=m=function(a,
c){if(!q(a))return k.Observable.throw(void 0);for(var d=0;d<c.length;d++){var b=c[d],e=b.videoCapabilities,l=b.audioCapabilities,g=b.initDataTypes,m=b.sessionTypes,f=b.distinctiveIdentifier;b=b.persistentState;var h=!0;if(h=(h=(h=(h=h&&(!g||!!g.filter(function(a){return"cenc"===a})[0]))&&(!m||m.filter(function(a){return"temporary"===a}).length===m.length))&&"required"!==f)&&"required"!==b)return c={videoCapabilities:e,audioCapabilities:l,initDataTypes:["cenc"],sessionTypes:["temporary"],distinctiveIdentifier:"not-allowed",
persistentState:"not-allowed"},k.Observable.of(new n.default(a,new t(a),c))}return k.Observable.throw(void 0)}}else if(d.MediaKeys_&&d.MediaKeys_.prototype&&"function"===typeof d.MediaKeys_.prototype.createSession&&"function"===typeof d.MediaKeys_.isTypeSupported){var r=function(a){function c(c){var d=a.call(this)||this;d.sessionId="";d.expiration=NaN;d.keyStatuses=new Map;d._mk=c;d._closeSession$=new e.Subject;d.closed=new Promise(function(a){d._closeSession$.subscribe(a)});d.update=u(function(a,
c){if(!d._ss)throw Error("MediaKeySession not set");d._ss.update(a,c);d.sessionId=c});return d}h(c,a);c.prototype.generateRequest=function(a,c){var d=this;return new Promise(function(a){d._ss=d._mk.memCreateSession("video/mp4",c);k.Observable.merge(l.onKeyMessage$(d._ss),l.onKeyAdded$(d._ss),l.onKeyError$(d._ss)).takeUntil(d._closeSession$).subscribe(function(a){return d.trigger(a.type,a)});a()})};c.prototype.close=function(){var a=this;return new Promise(function(c){a._ss&&(a._ss.close(),a._ss=void 0);
a._closeSession$.next();a._closeSession$.complete();c()})};c.prototype.load=function(){return Promise.resolve(!1)};c.prototype.remove=function(){return Promise.resolve()};return c}(f.default);d.MediaKeys_.prototype.alwaysRenew=!0;d.MediaKeys_.prototype.memCreateSession=d.MediaKeys_.prototype.createSession;d.MediaKeys_.prototype.createSession=function(){return new r(this)};b.requestMediaKeySystemAccess=m=function(a,c){if(!d.MediaKeys_.isTypeSupported(a))return k.Observable.throw(void 0);for(var b=
0;b<c.length;b++){var e=c[b],l=e.videoCapabilities,g=e.audioCapabilities,m=e.initDataTypes;e=e.distinctiveIdentifier;var f=!0;if(f=(f=f&&(!m||!!m.filter(function(a){return"cenc"===a})[0]))&&"required"!==e)return c={videoCapabilities:l,audioCapabilities:g,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},k.Observable.of(new n.default(a,new d.MediaKeys_(a),c))}return k.Observable.throw(void 0)}}else b.requestMediaKeySystemAccess=
m=null}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(a,b,g){this._keyType=a;this._mediaKeys=b;this._configuration=g}Object.defineProperty(a.prototype,"keySystem",{get:function(){return this._keyType},enumerable:!0,configurable:!0});a.prototype.createMediaKeys=function(){var a=this;return new Promise(function(b){return b(a._mediaKeys)})};a.prototype.getConfiguration=function(){return this._configuration};return a}();b.default=f},function(f,b,a){var h=this&&
this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(7);var k=a(58);a=function(a){function b(c){a.call(this);this._value=c}h(b,a);Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});b.prototype._subscribe=function(c){var d=a.prototype._subscribe.call(this,c);d&&!d.closed&&c.next(this._value);return d};b.prototype.getValue=
function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k.ObjectUnsubscribedError;return this._value};b.prototype.next=function(c){a.prototype.next.call(this,this._value=c)};return b}(f.Subject);b.BehaviorSubject=a},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(){var b=a.call(this,"Timeout has occurred");
this.name=b.name="TimeoutError";this.stack=b.stack;this.message=b.message}h(b,a);return b}(Error);b.TimeoutError=f},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(){var b=a.call(this,"argument out of range");this.name=b.name="ArgumentOutOfRangeError";this.stack=b.stack;this.message=b.message}h(b,a);return b}(Error);
b.ArgumentOutOfRangeError=f},function(f,b,a){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};f=a(3);b.refCount=function(){return function(a){return a.lift(new k(a))}};var k=function(){function a(a){this.connectable=a}a.prototype.call=function(a,d){var c=this.connectable;c._refCount++;a=new e(a,c);d=d.subscribe(a);a.closed||(a.connection=c.connect());return d};
return a}(),e=function(a){function c(c,b){a.call(this,c);this.connectable=b}h(c,a);c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._refCount;0>=c?this.connection=null:(a._refCount=c-1,1<c?this.connection=null:(c=this.connection,a=a._connection,this.connection=null,!a||c&&a!==c||a.unsubscribe()))}else this.connection=null};return c}(f.Subscriber)},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(b,c){a.call(this);this.subject=b;this.subscriber=c;this.closed=!1}h(b,a);b.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,c=a.observers;this.subject=null;!c||0===c.length||a.isStopped||a.closed||(a=c.indexOf(this.subscriber),-1!==a&&c.splice(a,1))}};return b}(a(17).Subscription);b.SubjectSubscription=f},function(f,b,a){var h=a(60);b.concatMap=function(a,
b){return h.mergeMap(a,b,1)}},function(f,b,a){var h=a(107);b.concatAll=function(){return h.mergeAll(1)}},function(f,b,a){b.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(f,b,a){f=a(22);b.of=f.ArrayObservable.of},function(f,b,a){var h=a(60),k=a(360);b.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return h.mergeMap(k.identity,null,a)}},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=
b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}h(b,a);b.prototype.flush=function(a){var c=this.actions;if(this.active)c.push(a);else{var d;this.active=!0;do if(d=a.execute(a.state,a.delay))break;while(a=c.shift());this.active=!1;if(d){for(;a=c.shift();)a.unsubscribe();throw d;}}};return b}(a(362).Scheduler);b.AsyncScheduler=f},function(f,b,a){var h=this&&this.__extends||
function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(18);f=function(a){function b(c,d){a.call(this,c,d);this.scheduler=c;this.work=d;this.pending=!1}h(b,a);b.prototype.schedule=function(a,d){void 0===d&&(d=0);if(this.closed)return this;this.state=a;this.pending=!0;a=this.id;var c=this.scheduler;null!=a&&(this.id=this.recycleAsyncId(c,a,d));this.delay=d;this.id=this.id||this.requestAsyncId(c,
this.id,d);return this};b.prototype.requestAsyncId=function(a,d,b){void 0===b&&(b=0);return k.root.setInterval(a.flush.bind(a,this),b)};b.prototype.recycleAsyncId=function(a,d,b){void 0===b&&(b=0);return null!==b&&this.delay===b&&!1===this.pending?d:(k.root.clearInterval(d),void 0)};b.prototype.execute=function(a,d){if(this.closed)return Error("executing a cancelled action");this.pending=!1;if(a=this._execute(a,d))return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,
this.id,null))};b.prototype._execute=function(a,d){d=!1;var c=void 0;try{this.work(a)}catch(n){d=!0,c=!!n&&n||Error(n)}if(d)return this.unsubscribe(),c};b.prototype._unsubscribe=function(){var a=this.id,d=this.scheduler,b=d.actions,e=b.indexOf(this);this.state=this.work=null;this.pending=!1;this.scheduler=null;-1!==e&&b.splice(e,1);null!=a&&(this.id=this.recycleAsyncId(d,a,null));this.delay=null};return b}(a(363).Action);b.AsyncAction=f},function(f,b,a){var h=a(28);b.isNumeric=function(a){return!h.isArray(a)&&
0<=a-parseFloat(a)+1}},function(f,b,a){f=a(0);a=a(367);f.Observable.fromPromise=a.fromPromise},function(f,b,a){var h=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};f=a(3);var k=a(371);b.observeOn=function(a,c){void 0===c&&(c=0);return function(d){return d.lift(new e(a,c))}};var e=function(){function a(a,c){void 0===c&&(c=0);this.scheduler=a;this.delay=c}a.prototype.call=
function(a,c){return c.subscribe(new g(a,this.scheduler,this.delay))};return a}();b.ObserveOnOperator=e;var g=function(a){function d(c,d,b){void 0===b&&(b=0);a.call(this,c);this.scheduler=d;this.delay=b}h(d,a);d.dispatch=function(a){a.notification.observe(a.destination);this.unsubscribe()};d.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(d.dispatch,this.delay,new c(a,this.destination)))};d.prototype._next=function(a){this.scheduleMessage(k.Notification.createNext(a))};d.prototype._error=
function(a){this.scheduleMessage(k.Notification.createError(a))};d.prototype._complete=function(){this.scheduleMessage(k.Notification.createComplete())};return d}(f.Subscriber);b.ObserveOnSubscriber=g;var c=function(){return function(a,c){this.notification=a;this.destination=c}}();b.ObserveOnMessage=c},function(f,b,a){function h(a){var c=a.value;a=a.subscriber;a.closed||(a.next(c),a.complete())}function k(a){var c=a.err;a=a.subscriber;a.closed||a.error(c)}var e=this&&this.__extends||function(a,d){function c(){this.constructor=
a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},g=a(18);f=function(a){function c(c,d){a.call(this);this.promise=c;this.scheduler=d}e(c,a);c.create=function(a,d){return new c(a,d)};c.prototype._subscribe=function(a){var c=this,d=this.promise,b=this.scheduler;if(null==b)this._isScalar?a.closed||(a.next(this.value),a.complete()):d.then(function(d){c.value=d;c._isScalar=!0;a.closed||(a.next(d),a.complete())},function(c){a.closed||
a.error(c)}).then(null,function(a){g.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.closed)return b.schedule(h,0,{value:this.value,subscriber:a})}else d.then(function(d){c.value=d;c._isScalar=!0;a.closed||a.add(b.schedule(h,0,{value:d,subscriber:a}))},function(c){a.closed||a.add(b.schedule(k,0,{err:c,subscriber:a}))}).then(null,function(a){g.root.setTimeout(function(){throw a;})})};return c}(a(0).Observable);b.PromiseObservable=f},function(f,b,a){f=a(374);b.from=f.FromObservable.create},
function(f,b,a){b.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(f,b,a){b.isArrayLike=function(a){return a&&"number"===typeof a.length}},function(f,b,a){b.empty={closed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},function(f,b,a){b.isObject=function(a){return null!=a&&"object"===typeof a}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8);f=a(2);var k=a(29),e=a(1),g=f.default.DEFAULT_AUTO_PLAY,
c=f.default.DEFAULT_INITIAL_BITRATES,d=f.default.DEFAULT_LIMIT_VIDEO_WIDTH,l=f.default.DEFAULT_MAX_BITRATES,n=f.default.DEFAULT_MAX_BUFFER_AHEAD,m=f.default.DEFAULT_MAX_BUFFER_BEHIND,t=f.default.DEFAULT_SHOW_NATIVE_SUBTITLE,u=f.default.DEFAULT_TEXT_TRACK_MODE,p=f.default.DEFAULT_THROTTLE_WHEN_HIDDEN,q=f.default.DEFAULT_WANTED_BUFFER_AHEAD;b.parseConstructorOptions=function(a){if(null==a.maxBufferAhead)var b=n;else if(b=Number(a.maxBufferAhead),isNaN(b))throw Error("Invalid maxBufferAhead parameter. Should be a number.");
if(null==a.maxBufferBehind)var e=m;else if(e=Number(a.maxBufferBehind),isNaN(e))throw Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==a.wantedBufferAhead)var g=q;else if(g=Number(a.wantedBufferAhead),isNaN(g))throw Error("Invalid wantedBufferAhead parameter. Should be a number.");var k=null==a.limitVideoWidth?d:!!a.limitVideoWidth;var f=null==a.throttleWhenHidden?p:!!a.throttleWhenHidden;if(null==a.videoElement)var t=document.createElement("video");else if(a.videoElement instanceof
HTMLMediaElement)t=a.videoElement;else throw Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");if(null==a.initialVideoBitrate)var h=c.video;else if(h=Number(a.initialVideoBitrate),isNaN(h))throw Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==a.initialAudioBitrate)var u=c.audio;else if(u=Number(a.initialAudioBitrate),isNaN(u))throw Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==a.maxVideoBitrate)var r=l.video;else if(r=
Number(a.maxVideoBitrate),isNaN(r))throw Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==a.maxAudioBitrate)var I=l.audio;else if(I=Number(a.maxAudioBitrate),isNaN(I))throw Error("Invalid maxAudioBitrate parameter. Should be a number.");if(null==a.stopAtEnd)a=!0;else if("boolean"===typeof a.stopAtEnd)a=a.stopAtEnd;else throw Error("Invalid stopAtEnd parameter. Should be a boolean.");return{maxBufferAhead:b,maxBufferBehind:e,limitVideoWidth:k,videoElement:t,wantedBufferAhead:g,
throttleWhenHidden:f,initialAudioBitrate:u,initialVideoBitrate:h,maxAudioBitrate:I,maxVideoBitrate:r,stopAtEnd:a}};b.parseLoadVideoOptions=function(a){var c,d;if(a&&null!=a.url)var b=String(a.url);else throw Error("No url set on loadVideo");if(null==a.transport)throw Error("No transport set on loadVideo");var l=String(a.transport);var m=null==a.autoPlay?g:!!a.autoPlay;if(null==a.keySystems)var n=[];else{n=Array.isArray(a.keySystems)?a.keySystems:[a.keySystems];var f=0;for(c=n;f<c.length;f++){var p=
c[f];if("string"!==typeof p.type||"function"!==typeof p.getLicense)throw Error("Invalid key system given: Missing type string or getLicense callback");}}f=a.transportOptions;if(null==a.supplementaryTextTracks)c=[];else for(c=Array.isArray(a.supplementaryTextTracks)?a.supplementaryTextTracks:[a.supplementaryTextTracks],p=0,d=c;p<d.length;p++){var q=d[p];"boolean"!==typeof q.closedCaption&&(q.closedCaption=!!q.closedCaption);if("string"!==typeof q.language||"string"!==typeof q.mimeType||"string"!==
typeof q.url)throw Error("Invalid supplementary text track given. Missing either language, mimetype or url");}if(null==a.supplementaryImageTracks)p=[];else for(p=Array.isArray(a.supplementaryImageTracks)?a.supplementaryImageTracks:[a.supplementaryImageTracks],d=0,q=p;d<q.length;d++){var r=q[d];if("string"!==typeof r.mimeType||"string"!==typeof r.url)throw Error("Invalid supplementary image track given. Missing either mimetype or url");}if(null==a.textTrackMode)d=u;else{if("native"!==a.textTrackMode&&
"html"!==a.textTrackMode)throw Error("Invalid textTrackMode.");d=a.textTrackMode}q=k.normalizeAudioTrack(a.defaultAudioTrack);r=k.normalizeTextTrack(a.defaultTextTrack);var H=null==a.hideNativeSubtitle?!t:!!a.hideNativeSubtitle;if("html"===d){if(null==a.textTrackElement)throw Error('You have to provide a textTrackElement in "html" textTrackMode.');if(a.textTrackElement instanceof HTMLElement)var D=a.textTrackElement;else throw Error("textTrackElement should be an HTMLElement.");}else null!=a.textTrackElement&&
e.default.warn('You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=a.startAt)if(a.startAt.wallClockTime instanceof Date){var B=a.startAt.wallClockTime.getTime()/1E3;B=h({},a.startAt,{wallClockTime:B})}else B=a.startAt;return{autoPlay:m,defaultAudioTrack:q,defaultTextTrack:r,hideNativeSubtitle:H,keySystems:n,networkConfig:null==a.networkConfig?{}:{manifestRetry:a.networkConfig.manifestRetry,offlineRetry:a.networkConfig.offlineRetry,segmentRetry:a.networkConfig.segmentRetry},
startAt:B,supplementaryImageTracks:p,supplementaryTextTracks:c,textTrackElement:D,textTrackMode:d,transport:l,transportOptions:f,url:b}}},function(f,b,a){function h(a,c){if(!a.length)return null;for(var d=function(d){var b=c[d];if(null===b)return{value:null};d=g(a,function(a){return(a.normalizedLanguage||"")===b.normalized&&!!a.isAudioDescription===b.audioDescription});if(void 0!==d)return{value:d}},b=0;b<c.length;b++){var e=d(b);if("object"===typeof e)return e.value}return a[0]}function k(a,c){if(!a.length)return null;
for(var d=function(d){var b=c[d];if(null===b)return{value:null};d=g(a,function(a){return(a.normalizedLanguage||"")===b.normalized&&!!a.isClosedCaption===b.closedCaption});if(void 0!==d)return{value:d}},b=0;b<c.length;b++){var e=d(b);if("object"===typeof e)return e.value}return null}function e(a,c){for(var d=0;d<a.length();d++){var b=a.get(d);if(b.period.id===c.id)return b}}Object.defineProperty(b,"__esModule",{value:!0});var g=a(9),c=a(13),d=a(1),l=a(45);f=function(){function a(a){void 0===a&&(a=
{});var c=a.preferredAudioTracks;a=a.preferredTextTracks;this._periods=new l.default(function(a,c){return a.period.start-c.period.start});this._audioChoiceMemory=new WeakMap;this._textChoiceMemory=new WeakMap;this._preferredAudioTracks=c||[];this._preferredTextTracks=a||[]}a.prototype.addPeriod=function(a,c,b){var l=e(this._periods,c);if(null!=l){if(null!=l[a]){d.default.warn("LanguageManager: "+a+" already added for period",c);return}l[a]={adaptations:c.adaptations[a]||[],adaptation$:b}}else this._periods.add((g=
{period:c},g[a]={adaptations:c.adaptations[a]||[],adaptation$:b},g));var g};a.prototype.removePeriod=function(a,c){a:{var b=this._periods;for(var e=0;e<b.length();e++)if(b.get(e).period.id===c.id){b=e;break a}b=void 0}null==b?d.default.warn("LanguageManager: "+a+" not found for period",c):(b=this._periods.get(b),null==b[a]?d.default.warn("LanguageManager: "+a+" already removed for period",c):(delete b[a],null==b.audio&&null==b.text&&this._periods.removeFirst(b)))};a.prototype.update=function(){this._updateAudioTrackChoices();
this._updateTextTrackChoices()};a.prototype.setInitialAudioTrack=function(a){var d=e(this._periods,a),b=d&&d.audio;if(!b||!d)throw Error("LanguageManager: Given Period not found.");d=this._preferredAudioTracks;var l=a.adaptations.audio||[],g=this._audioChoiceMemory.get(a);void 0!==g&&c.default(l,g)?b.adaptation$.next(g):(d=h(l,d),this._audioChoiceMemory.set(a,d),b.adaptation$.next(d))};a.prototype.setInitialTextTrack=function(a){var d=e(this._periods,a),b=d&&d.text;if(!b||!d)throw Error("LanguageManager: Given Period not found.");
d=this._preferredTextTracks;var l=a.adaptations.text||[],g=this._textChoiceMemory.get(a);void 0!==g&&c.default(l,g)?b.adaptation$.next(g):(d=k(l,d),this._textChoiceMemory.set(a,d),b.adaptation$.next(d))};a.prototype.setAudioTrackByID=function(a,c){var d=e(this._periods,a);d=d&&d.audio;if(!d)throw Error("LanguageManager: Given Period not found.");var b=g(d.adaptations,function(a){return a.id===c});if(void 0===b)throw Error("Audio Track not found.");this._audioChoiceMemory.get(a)!==b&&(this._audioChoiceMemory.set(a,
b),d.adaptation$.next(b))};a.prototype.setTextTrackByID=function(a,c){var d=e(this._periods,a);d=d&&d.text;if(!d)throw Error("LanguageManager: Given Period not found.");var b=g(d.adaptations,function(a){return a.id===c});if(void 0===b)throw Error("Text Track not found.");this._textChoiceMemory.get(a)!==b&&(this._textChoiceMemory.set(a,b),d.adaptation$.next(b))};a.prototype.disableAudioTrack=function(a){var c=e(this._periods,a);c=c&&c.audio;if(!c)throw Error("LanguageManager: Given Period not found.");
null!==this._audioChoiceMemory.get(a)&&(this._audioChoiceMemory.set(a,null),c.adaptation$.next(null))};a.prototype.disableTextTrack=function(a){var c=e(this._periods,a);c=c&&c.text;if(!c)throw Error("LanguageManager: Given Period not found.");null!==this._textChoiceMemory.get(a)&&(this._textChoiceMemory.set(a,null),c.adaptation$.next(null))};a.prototype.getChosenAudioTrack=function(a){var c=e(this._periods,a);return null==(c&&c.audio)?null:(a=this._audioChoiceMemory.get(a))?{language:a.language||
"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription,id:a.id}:null};a.prototype.getChosenTextTrack=function(a){var c=e(this._periods,a);return null==(c&&c.text)?null:(a=this._textChoiceMemory.get(a))?{language:a.language||"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption,id:a.id}:null};a.prototype.getAvailableAudioTracks=function(a){var c=e(this._periods,a);c=c&&c.audio;if(null==c)return[];var d=(a=this._audioChoiceMemory.get(a))&&a.id;return c.adaptations.map(function(a){return{language:a.language||
"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription,id:a.id,active:null==d?!1:d===a.id}})};a.prototype.getAvailableTextTracks=function(a){var c=e(this._periods,a);c=c&&c.text;if(null==c)return[];var d=(a=this._textChoiceMemory.get(a))&&a.id;return c.adaptations.map(function(a){return{language:a.language||"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption,id:a.id,active:null==d?!1:d===a.id}})};a.prototype._updateAudioTrackChoices=function(){var a=this,
d=this._preferredAudioTracks,b=function(e){if(!(e>=a._periods.length())){var l=a._periods.get(e);if(null==l.audio)b(e+1);else{var g=l.period;l=l.audio;var n=g.adaptations.audio||[],m=a._audioChoiceMemory.get(g);null===m||void 0!==m&&c.default(n,m)?b(e+1):(e=h(n,d),a._audioChoiceMemory.set(g,e),l.adaptation$.next(e),b(0))}}};b(0)};a.prototype._updateTextTrackChoices=function(){var a=this,d=this._preferredTextTracks,b=function(e){if(!(e>=a._periods.length())){var l=a._periods.get(e);if(null==l.text)b(e+
1);else{var g=l.period;l=l.text;var n=g.adaptations.text||[],m=a._textChoiceMemory.get(g);null===m||void 0!==m&&c.default(n,m)?b(e+1):(e=k(n,d),a._textChoiceMemory.set(g,e),l.adaptation$.next(e),b(0))}}};b(0)};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(2),k=a(68);b.default=function(a,b,c){return a.ended?k.PLAYER_STATES.ENDED:c?(b=h.default.FORCED_ENDED_THRESHOLD,a=Math.abs(a.duration-a.currentTime),null!=b&&a<b?k.PLAYER_STATES.ENDED:"seeking"===
c.reason?k.PLAYER_STATES.SEEKING:k.PLAYER_STATES.BUFFERING):b?k.PLAYER_STATES.PLAYING:k.PLAYER_STATES.PAUSED}},function(f,b,a){function h(a){if(!a)return 0;switch(a.reason){case "seeking":return m;case "not-ready":return t;default:return u}}function k(a,c){var b=a.buffered,e=a.currentTime,l=a.duration,g=a.ended,n=a.paused,m=a.playbackRate,k=a.readyState;a=a.seeking;return{bufferGap:d.getLeftSizeOfRange(b,e),buffered:b,currentRange:d.getRange(b,e),currentTime:e,duration:l,ended:g,paused:n,playbackRate:m,
readyState:k,seeking:a,state:c}}Object.defineProperty(b,"__esModule",{value:!0});var e=a(8),g=a(0),c=a(40);f=a(2);var d=a(16),l=f.default.SAMPLING_INTERVAL_MEDIASOURCE,n=f.default.SAMPLING_INTERVAL_NO_MEDIASOURCE,m=f.default.RESUME_GAP_AFTER_SEEKING,t=f.default.RESUME_GAP_AFTER_NOT_ENOUGH_DATA,u=f.default.RESUME_GAP_AFTER_BUFFERING,p=f.default.STALL_GAP,q="canplay play progress seeking seeked loadedmetadata canplay ratechange".split(" ");b.default=function(a,d){var b=d.withMediaSource;return g.Observable.create(function(c){function d(d){d=
k(a,d&&d.type||"timeupdate");var l;var n=d.state,m=d.currentTime,f=d.bufferGap,t=d.paused,u=d.readyState,q=d.ended,r=g.stalled,w=g.state,v=g.currentTime;var x=d.currentRange;x=null!=x&&d.duration-(f+x.end)<=p;var z=1<=u&&"loadedmetadata"!==n&&!r&&!(x||q),y;b?z&&(f<=p||Infinity===f||1===u)?l=!0:r&&1<u&&Infinity>f&&(f>h(r)||x||q)&&(y=!0):z&&(!t&&"timeupdate"===n&&"timeupdate"===w&&m===v||"seeking"===n&&Infinity===f)?l=!0:r&&("seeking"!==n&&m!==v||"canplay"===n||Infinity>f&&(f>h(r)||x||q))&&(y=!0);l=
l?{reason:"seeking"===n||d.seeking?"seeking":1===u?"not-ready":"buffering",timestamp:Date.now()}:y?null:r;g=e(d,{stalled:l});c.next(g)}var g=e(k(a,"init"),{stalled:null}),m=setInterval(d,b?l:n);q.forEach(function(c){return a.addEventListener(c,d)});c.next(g);return function(){clearInterval(m);q.forEach(function(c){return a.removeEventListener(c,d)})}}).multicast(function(){return new c.ReplaySubject(1)}).refCount()}},function(f,b,a){function h(a,d){if(!d)return 0;if(null!=d.position)return d.position;
if(null!=d.wallClockTime)return d.wallClockTime;if(null!=d.fromFirstPosition)return d.fromFirstPosition;a=a.duration;return a&&isFinite(a)?d.fromLastPosition?Math.max(0,a+d.fromLastPosition):null!=d.percentage?(d=d.percentage,100<=d?a:0>=d?0:+d/100*a):0:(c.default.warn("startAt.fromLastPosition set but no known duration, beginning at 0."),0)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(7),g=a(5),c=a(1),d=a(51),l=a(72),n=a(71),m=a(70),t=a(34),u=a(69);b.default=function(a){var b=
a.autoPlay,f=a.clock$,p=a.keySystems,v=a.mediaElement,x=a.speed$,z=a.startAt,A=a.url,y=new e.Subject;a=y.map(t.default.warning);g.clearElementSrc(v);c.default.debug("calculating initial time");var C=function(){return h(v,z)};c.default.debug("initial time calculated:",C);C=u.default(v,C,b);b=C.initialSeek$;C=C.loadAndPlay$;p=d.default(v,p,y);y=l.default(v);x=n.default(v,x,f,{pauseWhenStalled:!0}).map(t.default.speedChanged);f=m.default(v,f).map(t.default.stalled);C=C.mapTo(t.default.loaded());A=g.setElementSrc$(v,
A).ignoreElements();b=b.ignoreElements();A=k.Observable.merge(C,b,p,y,x,f,A);return k.Observable.merge(A,a)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(var e=a.length;b<e;){if(null!=a[b])return a[b];b++}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=a(2);var h=a(1),k=a(16),e=a(124),g=f.default.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,c=f.default.MAX_BUFFERED_DISTANCE,
d=f.default.MINIMUM_SEGMENT_SIZE;a=function(){function a(){this.inventory=[]}a.prototype.synchronizeBuffered=function(a){var b=this.inventory;a=k.convertToRanges(a);for(var l=0,g=b[0],n=a.length,f=0;f<n;f++){if(null==g)return;var h=a[f],w=h.start;h=h.end;if(!(h-w<d)){for(var v=l;g&&e.default(g.bufferedEnd,g.end)-w<d;)g=b[++l];var x=-1,z=l-v;0<z&&(l=b[v+z-1],x=e.default(l.bufferedEnd,l.end),b.splice(v,z),l=v);if(null==g)return;if(h-e.default(g.bufferedStart,g.start)>=d)for(null!=g.bufferedStart&&g.bufferedStart<
w?g.bufferedStart=w:null==g.bufferedStart&&(g.bufferedStart=-1!==x&&x>w&&g.start-x<=c?x:g.start-w<=c?w:g.start),g=b[++l];g&&h-e.default(g.bufferedStart,g.start)>=d;)w=b[l-1],null==w.bufferedEnd&&(w.bufferedEnd=w.end),g.bufferedStart=w.bufferedEnd,g=b[++l];if(w=b[l-1])null!=w.bufferedEnd&&w.bufferedEnd>h?w.bufferedEnd=h:null==w.bufferedEnd&&(w.bufferedEnd=h-w.end<=c?h:w.end)}}g&&b.splice(l,b.length-l)};a.prototype.insert=function(a,c,d,b,e,l){if(null==l)h.default.warn("SegmentBookkeeper: ending time of the segment not defined");
else{var g=this.inventory;a={start:e,end:l,bufferedStart:void 0,bufferedEnd:void 0,infos:{segment:b,period:a,adaptation:c,representation:d}};for(c=g.length-1;0<=c;c--)if(d=g[c],d.start<=e){d.end<=e?this.inventory.splice(c+1,0,a):d.start>=e?this.inventory.splice(c,1,a):(null!=d.end&&(d.end=e),this.inventory.splice(c+1,0,a));return}(g=this.inventory[0])?null==l?g.start===e?this.inventory.splice(0,1,a):this.inventory.splice(0,0,a):g.start>=l?this.inventory.splice(0,0,a):g.end<=l?this.inventory.splice(0,
1,a):(g.start=l,this.inventory.splice(0,0,a)):this.inventory.push(a)}};a.prototype.hasPlayableSegment=function(a,c){function d(a,c,d,b){if(!d||null==d.bufferedEnd||null==c.bufferedStart||d.bufferedEnd<c.bufferedStart){if(null==c.bufferedStart)return!1;var e=c.bufferedStart-c.start;if(a.start>c.start){if(d=c.bufferedStart-a.start,0<d&&e>g)return h.default.debug("The wanted segment has been garbage collected",c),!1}else if(e>g)return h.default.debug("The wanted segment has been garbage collected",c),
!1}if(null===c.end)return!1;if(!b||null==b.bufferedStart||null==c.bufferedEnd||b.bufferedStart>c.bufferedEnd){if(null==c.bufferedEnd)return!1;e=c.end-c.bufferedEnd;if(a.end<c.end){if(d=a.end-c.bufferedEnd,0<d&&e>g)return h.default.debug("The wanted segment has been garbage collected",c),!1}else if(e>g)return h.default.debug("The wanted segment has been garbage collected",c),!1}return!0}var b=c.time,e=c.duration;c=c.timescale;for(var l=this.inventory,n=l.length-1;0<=n;n--){var m=l[n],k=l[n-1],f=l[n+
1],z=m.infos.segment,A=b,y=e;z.timescale!==c&&(A=b*z.timescale/c,y=e*z.timescale/c);if(z.time===A&&z.duration===y&&(z=k&&null==k.bufferedEnd||null==m.bufferedStart?!1:f&&null==f.bufferedStart||null==m.bufferedEnd?!1:!0,z&&d(a,m,k,f)))return m}return null};a.prototype.reset=function(){this.inventory=[]};return a}();b.default=a},function(f,b,a){function h(a,b){var d=b.getUrl();return d?a(d).do(function(a){b.update(a)}).mapTo(c.default.manifestUpdate(b)):(e.default.warn("Cannot refresh the manifest: no url"),
k.Observable.empty())}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(1),g=a(36),c=a(34);b.default=function(a,c,b){return function(d){switch(d.type){case "discontinuity-encountered":g.default.isNative(d.value.bufferType)&&(e.default.warn("explicit discontinuity seek",d.value.nextTime),a.currentTime=d.value.nextTime);break;case "needs-manifest-refresh":return e.default.debug("needs manifest to be refreshed"),h(b,c)}return k.Observable.of(d)}}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});f=a(2);var h=a(54),k=f.default.DEFAULT_LIVE_GAP;b.default=function(a,b){if(b){var c=h.getBufferLimits(a),d=c[0];c=c[1];if(null!=b.position)return Math.max(Math.min(b.position,c),d);if(null!=b.wallClockTime)return Math.max(Math.min(a.isLive?b.wallClockTime-(a.availabilityStartTime||0):b.wallClockTime,c),d);if(null!=b.fromFirstPosition)return a=b.fromFirstPosition,0>=a?d:Math.min(d+a,c);if(null!=b.fromLastPosition)return a=b.fromLastPosition,0<=a?c:Math.max(d,c+a);if(null!=
b.percentage)return a=b.percentage,100<a?c:0>a?d:d+ +a/100*(c-d)}return a.isLive?(d=a.suggestedPresentationDelay,h.getMaximumBufferPosition(a)-(null==d?k:d)):h.getMinimumBufferPosition(a)}},function(f,b,a){function h(a,d,b,n){if(!isFinite(b)&&!isFinite(n))return k.Observable.empty();var c=[],l=g.getInnerAndOuterTimeRanges(a.getBuffered(),d),f=l.innerRange,h=l.outerRanges;(function(){if(isFinite(b)){for(var a=0;a<h.length;a++){var e=h[a];d-b>=e.end?c.push(e):d>=e.end&&d-b>e.start&&d-b<e.end&&c.push({start:e.start,
end:d-b})}f&&d-b>f.start&&c.push({start:f.start,end:d-b})}})();(function(){if(isFinite(n)){for(var a=0;a<h.length;a++){var b=h[a];d+n<=b.start?c.push(b):d<=b.start&&d+n<b.end&&d+n>b.start&&c.push({start:d+n,end:b.end})}f&&d+n<f.end&&c.push({start:d+n,end:f.end})}})();return k.Observable.from(c.map(function(c){e.default.debug("cleaning range from source buffer",c);return a.removeBuffer(c)})).concatAll().ignoreElements()}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(1),g=a(16);b.default=
function(a){var c=a.queuedSourceBuffer;return k.Observable.combineLatest(a.clock$,a.maxBufferBehind$,a.maxBufferAhead$).mergeMap(function(a){return h(c,a[0],a[1],a[2])})}},function(f,b,a){function h(a){for(var c=[],d=0;d<a.length;d++){var b=a[d];b.updating&&c.push(b)}return c}function k(a){return e.Observable.defer(function(){if("open"!==a.readyState)return e.Observable.of(null);var d=a.sourceBuffers,b=h(d);if(!b.length)return c.default.info("triggering end of stream"),a.endOfStream(),e.Observable.of(null);
b=b.map(g.onUpdate$);return e.Observable.race(e.Observable.merge.apply(e.Observable,b).takeLast(1),g.onRemoveSourceBuffers$(d).take(1)).mergeMap(function(){return k(a)})})}Object.defineProperty(b,"__esModule",{value:!0});var e=a(0),g=a(15),c=a(1);b.default=k;b.maintainEndOfStream=function(a){return k(a).concat(g.onSourceOpen$(a).concatMapTo(k(a)))}},function(f,b,a){function h(a,b,g){if(b&&"closed"!==b.readyState){for(var d=b.readyState,l=b.sourceBuffers,n=l.length-1;0<=n;n--){var k=l[n];try{"open"===
d&&(c.default.info("removing SourceBuffer from mediaSource",k),k.abort()),b.removeSourceBuffer(k)}catch(q){c.default.warn("error while disposing SourceBuffer",q)}}l.length&&c.default.warn("not all SourceBuffers could have been removed.")}e.clearElementSrc(a);if(g)try{c.default.debug("revoking previous URL"),URL.revokeObjectURL(g)}catch(q){c.default.warn("error while revoking the media source URL",q)}}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(5),g=a(32),c=a(1);b.setDurationToMediaSource=
function(a,b){b=Infinity===b?Number.MAX_VALUE:b;a.duration!==b&&(c.default.info("set duration",a.duration),a.duration=b)};b.resetMediaSource=h;b.default=function(a){return k.Observable.create(function(d){if(!e.MediaSource_)throw new g.default("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);h(a,null,a.src||null);c.default.info("creating MediaSource");var b=new e.MediaSource_,l=URL.createObjectURL(b);c.default.info("attaching MediaSource URL to video element",l);a.src=l;d.next(b);return function(){h(a,b,l)}})}},
function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(0),e=a(54);b.default=function(a,c,d,b){var l=b;d=d.take(1).do(function(){l=0}).ignoreElements();c=c.map(function(c){return h({liveGap:a.isLive?e.getMaximumBufferPosition(a)-c.currentTime:Infinity,timeOffset:l},c)});return k.Observable.merge(c,d)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(1),e=a(45),g=a(36);b.default=function(a,d){var c=new e.default(function(a,c){return a.period.start-
c.period.start});a=a.do(function(a){var d=a.period;a=a.type;var b=c.find(function(a){return a.period===d});b||(b={period:d,buffers:new Set},c.add(b));b.buffers.has(a)&&k.default.warn("Buffer type "+a+" already added to the period");b.buffers.add(a)});d=d.do(function(a){var d=a.period;a=a.type;if(c&&0!==c.length()){var b=c.find(function(a){return a.period===d});b?(b.buffers.delete(a),b.buffers.size||c.removeFirst(b)):k.default.error("ActivePeriodStore: cannot remove, unknown period.")}else k.default.error("ActivePeriodStore: cannot remove, no period is active.")});
return h.Observable.merge(a,d).map(function(){if(!c.head())return null;var a=c.find(function(a){return a.buffers.size>=g.BUFFER_TYPES.length});return null!=a?a.period:null}).distinctUntilChanged()}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(){this._cache=new WeakMap}a.prototype.add=function(a,b){var e=a.representation;a.segment.isInit&&this._cache.set(e,b)};a.prototype.get=function(a){var b=a.representation;return a.segment.isInit&&(a=this._cache.get(b),
null!=a)?a:null};return a}();b.default=f},function(f,b,a){function h(a,c,d){return{cache:t.default(["audio","video"],a)?new u.default:void 0,maxRetry:"image"===a?0:null!=c?c:n.default.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,maxRetryOffline:null!=d?d:n.default.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE}}function k(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];a=a.map(function(a){return a.filter(function(a){return"complete-buffer"===a.type||"active-buffer"===a.type}).map(function(a){return"complete-buffer"===
a.type}).startWith(!1).distinctUntilChanged()});return c.Observable.combineLatest.apply(c.Observable,a).map(function(a){return a.every(function(a){return a})}).distinctUntilChanged()}function e(a){a=a.representations;return a[0]&&a[0].getMimeTypeString()||""}function g(a,c){Object.keys(c.adaptations).forEach(function(d){if(w.default.isNative(d)){var b=c.adaptations[d]||[];b=b?b[0].representations:[];b.length&&(b=b[0].getMimeTypeString(),a.createSourceBuffer(d,b))}})}Object.defineProperty(b,"__esModule",
{value:!0});var c=a(0),d=a(40),l=a(7),n=a(2),m=a(6),t=a(13),u=a(133),p=a(1),q=a(45),r=a(84),w=a(36),v=a(132),x=a(34);b.default=function(a,b,n,f,t,u,I,H,D,B){function z(a,d){var e=new q.default(function(a,c){return a.start-c.start}),g=new l.Subject,n=b.filter(function(a){var c=a.currentTime;a=a.timeOffset;if(!C.getPeriodForTime(a+c))return!1;c=a+c;a=e.head();var d=e.last();c=null==a||null==d?!0:a.start>c||(d.end||Infinity)<c;return c}).take(1).do(function(c){p.default.info("Current position out of the bounds of the active periods,re-creating buffers.",
a,c.currentTime+c.timeOffset);g.next()}).mergeMap(function(c){c=C.getPeriodForTime(c.currentTime+c.timeOffset);if(null==c)throw new m.MediaError("MEDIA_TIME_NOT_FOUND",null,!0);return z(a,c)});d=y(a,d,g).do(function(a){"periodBufferReady"===a.type?e.add(a.value.period):"periodBufferCleared"===a.type&&e.removeFirst(a.value.period)}).share();return c.Observable.merge(d,n)}function y(a,e,g){p.default.info("creating new Buffer for",a,e);var n=new d.ReplaySubject(1),f=new l.Subject,k=new l.Subject,m=b.filter(function(a){var c=
a.currentTime;a=a.timeOffset;return!!e.end&&c+a>=e.end}),h=f.exhaustMap(function(c){return y(a,c,k)});g=g.take(1).do(function(){f.complete();k.next();k.complete()}).share();m=c.Observable.merge(m,g);var t=A(a,e,n).mergeMap(function(d){var b=d.type;if("full-buffer"===b){b=C.getPeriodAfter(e);if(null==b)return c.Observable.of(x.default.bufferComplete(a));f.next(b)}else"active-buffer"===b&&k.next();return c.Observable.of(d)}).share();n=c.Observable.of(x.default.periodBufferReady(a,e,n)).concat(t).takeUntil(m).concat(c.Observable.of(x.default.periodBufferCleared(a,
e)).do(function(){p.default.info("destroying buffer for",a,e)}));return c.Observable.merge(n,h,g.ignoreElements())}function A(a,d,l){return l.switchMap(function(l){if(null==l)return p.default.info("set no "+a+" Adaptation",d),l=void 0,t.has(a)?(p.default.info("clearing previous "+a+" SourceBuffer"),l=t.get(a).removeBuffer({start:d.start,end:d.end||Infinity}).mapTo(null)):l=c.Observable.of(null),l.mapTo(x.default.adaptationChange(a,null,d)).concat(r.createFakeBuffer(b,n,a,{manifest:C,period:d}));p.default.info("updating "+
a+" adaptation",l,d);if(t.has(a)){p.default.info("reusing a previous SourceBuffer for the type",a);var g=t.get(a)}else{var k=e(l);g=t.createSourceBuffer(a,k,"text"===a?D.textTrackOptions:void 0)}k=H.get(g);var m=I.get(g),q=h(a,D.maxRetry,D.maxRetryOffline);q=u.createPipeline(a,q);g=f.createBuffer(b,g,m,q,n,{manifest:C,period:d,adaptation:l}).catch(function(c){if(!w.default.isNative(a))return p.default.error("custom buffer: ",a,"has crashed. Aborting it.",c),t.disposeSourceBuffer(a),B.next(c),r.createFakeBuffer(b,
n,a,{manifest:C,period:d});p.default.error("native buffer: ",a,"has crashed. Stopping playback.",c);throw c;});return c.Observable.of(x.default.adaptationChange(a,l,d)).concat(c.Observable.merge(g,k))})}var C=a.manifest,E=a.period;g(t,E);var P=new l.Subject,G=new l.Subject;a=w.BUFFER_TYPES.map(function(a){return z(a,E).do(function(a){"periodBufferReady"===a.type?P.next(a.value):"periodBufferCleared"===a.type&&G.next(a.value)}).share()});var Q=v.default(P,G).filter(function(a){return!!a}).do(function(a){p.default.info("new active period",
a)}).map(function(a){return x.default.activePeriodChanged(a)}),S=k.apply(void 0,a).map(function(a){return a?x.default.endOfStream():x.default.resumeStream()});return c.Observable.merge.apply(c.Observable,[Q].concat(a,[S]))}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(5),k=a(76),e=a(75);b.default=function(a,c){a=a.split(/\r\n|\n|\r/);a=k.default(a);for(var d=[],b=0;b<a.length;b++){var g=e.default(a[b],c);if(g){var f=g.start;var t=g.end;g=g.payload.join("\n");(f=h.makeCue(f,
t,g))&&d.push(f)}}return d}},function(f,b,a){function h(a){return a.replace(c,"\n").replace(g,function(a,c){return String.fromCharCode(c)})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(5),e=a(4),g=/&#([0-9]+);/g,c=/<br>/gi,d=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,l=/\s*<p class=([^>]+)>(.*)/i,n=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.default=function(a,c,b){var g=/<sync[ >]/ig,f=/<sync[ >]|<\/body>/ig,m=[],t=a.match(d);t=t?t[1]:"";f.exec(a);var u=/\.(\S+)\s*{([^}]*)}/gi;for(var x={},
z;z=u.exec(t);){var A=z[1];z=(z=z[2].match(/\s*lang:\s*(\S+);/i))?z[1]:null;null!=A&&null!=z&&(x[z]=A)}t=x[b];for(e.default(!!t,"sami: could not find lang "+b+" in CSS");;){b=g.exec(a);u=f.exec(a);if(!b&&!u)break;if(!b||!u||b.index>=u.index)throw Error("parse error");b=a.slice(b.index,u.index);u=b.match(n);if(!u)throw Error("parse error (sync time attribute)");u=+u[1];if(isNaN(u))throw Error("parse error (sync time attribute NaN)");b=b.split("\n");x=u/1E3;for(A=b.length;0<=--A;)if(u=b[A].match(l))z=
u[2],t===u[1]&&("&nbsp;"===z?m[m.length-1].end=x:m.push({text:h(z),start:x+c}))}a=[];for(c=0;c<m.length;c++)t=m[c],g=t.start,f=t.end,(t=t.text)&&null!=f&&(g=k.makeCue(g,f,t),null!=g&&a.push(g));return a}},function(f,b,a){function h(a,d,b,e,l,g){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&/^\s*$/.test(a.textContent||""))return null;e=n.default(a,g);b=e.start;e=e.end;a=k(a,"default"===g.spaceStyle);d=c.makeCue(b+d,e+d,a);if(!d)return null;if(d instanceof VTTCue){if(a=l.extent)a=t.REGXP_PERCENT_VALUES.exec(a),
null!=a&&(d.size=Number(a[1]));switch(l.writingMode){case "tb":case "tblr":d.vertical="lr";break;case "tbrl":d.vertical="rl"}(a=l.origin)&&t.REGXP_PERCENT_VALUES.exec(a);if(l=l.align)d.align=l,"center"===l&&("center"!==d.align&&(d.align="middle"),d.position="auto"),d.positionAlign=r[l]||"",d.lineAlign=q[l]||""}return d}function k(a,c){function d(a){a=a.childNodes;for(var b="",e=0;e<a.length;e++){var l=a[e];"#text"===l.nodeName?(l=l.textContent||"",c&&(l=l.trim(),l=l.replace(/\s+/g," ")),b+=l):"br"===
l.nodeName?b+="\n":"span"===l.nodeName&&0<l.childNodes.length&&(b+=d(l))}return b}return d(a)}Object.defineProperty(b,"__esModule",{value:!0});var e=a(9),g=a(8),c=a(5),d=a(79),l=a(48),n=a(77),m=a(78),t=a(46),u=a(47),p=["extent","writingMode","origin","align"],q={left:"start",center:"center",right:"end",start:"start",end:"end"},r={left:"line-left",center:"center",right:"line-right"};b.default=function(a,c){var b=[];if(a=(new DOMParser).parseFromString(a,"text/xml")){var n=a.getElementsByTagName("tt")[0];
if(!n)throw Error("invalid XML");var f=m.getBodyNode(n),k=m.getStyleNodes(n),t=m.getRegionNodes(n);a=m.getTextNodes(n);n=d.default(n);for(var q=[],r=0;r<=k.length-1;r++){var w=k[r];if(w instanceof Element){var v=w.getAttribute("xml:id");null!=v&&q.push({id:v,style:u.getStylingFromElement(w)})}}var D=[];k=function(a){var c=t[a];if(c instanceof Element&&(a=c.getAttribute("xml:id"),null!=a)){var d=u.getStylingFromElement(c),b=c.getAttribute("style");b&&(c=e(q,function(a){return a.id===b}))&&(d=g({},
c.style,d));D.push({id:a,style:d})}};for(r=0;r<=t.length-1;r++)k(r);f=f?u.getStylingAttributes(p,[f],q,D):u.getStylingAttributes(p,[],q,D);for(r=0;r<a.length;r++)k=a[r],k instanceof Element&&(w=l.default(k,"div"),w=g({},f,u.getStylingAttributes(p,[k].concat(w),q,D)),(k=h(k,c,q,D,w,n))&&b.push(k))}return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(5),k=a(13),e=a(74),g=a(73),c=a(35);b.default=function(a,b){a=a.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(a[0]))throw Error("Can't parse WebVTT: Invalid file.");
var d=c.getFirstLineAfterHeader(a);a=e.default(a,d);d=[];for(var l=0;l<a.length;l++){var f=g.default(a[l],b);if(null!=f){var u=f.start;var p=f.end,q=f.payload.join("\n");u=h.makeCue(u,p,q);if(null!=u){if(u instanceof VTTCue){f=f.settings;p=u;!f.vertical||"rl"!==f.vertical&&"lr"!==f.vertical||(p.vertical=f.vertical);if(f.line)if(q=f.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/))p.line=q[1],p.snapToLines=!1,k.default(["start","center","end"],q[4])&&(p.lineAlign=q[4]);else if(q=f.line.match(/^(-?\d+)(,([a-z]+))?/))p.line=
q[1],p.snapToLines=!0,k.default(["start","center","end"],q[3])&&(p.lineAlign=q[3]);if(f.position&&(q=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(f.position))&&2<=q.length){var r=parseInt(q[1],10);isNaN(r)||(p.position=r,null!=q[2]&&(p.positionAlign=q[2]))}f.size&&(p.size=f.size);f.align&&k.default(["start","center","end","left"],f.align)&&(p.align=f.align)}d.push(u)}}}return d}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k={};k.vtt=a(138).default;k.ttml=
a(137).default;k.sami=a(136).default;k.srt=a(135).default;b.default=function(a,b,c,d){h.default.debug("finding parser for native text tracks:",a);a=k[a];if(!a)throw Error("no parser found for the given text track");h.default.debug("parser found, parsing...");b=a(b,c,d);h.default.debug("parsed successfully!",b);return b}},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&
(a[d]=c[d])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(5),e=a(1);f=a(49);var g=a(139);a=function(a){function c(c,d){e.default.debug("creating native text track source buffer");var b=a.call(this)||this;var l=k.addTextTrack(c,d);d=l.track;l=l.trackElement;b._videoElement=c;b._track=d;b._trackElement=l;return b}h(c,a);c.prototype._append=function(a){e.default.debug("appending new native text tracks",
a);var c=a.timescale,d=a.start,b=a.end,l=a.data,f=a.type,k=a.language;a=a.timeOffset;if(null!=b&&0>=b-d)e.default.warn("Invalid subtitles appended");else if(d/=c,c=null!=b?b/c:void 0,l=g.default(f,l,a,k),0<l.length){f=l[0];k=this._track.cues;0<k.length&&f.startTime<k[k.length-1].startTime&&this._remove(f.startTime,Infinity);for(f=0;f<l.length;f++)this._track.addCue(l[f]);this.buffered.insert(d,null!=c?c:l[l.length-1].endTime)}else null!=c&&this.buffered.insert(d,c)};c.prototype._remove=function(a,
c){e.default.debug("removing native text track data",a,c);for(var d=this._track,b=d.cues,l=b.length-1;0<=l;l--){var g=b[l],f=g.startTime,k=g.endTime;f>=a&&f<=c&&k<=c&&d.removeCue(g)}this.buffered.remove(a,c)};c.prototype._abort=function(){e.default.debug("aborting native text track source buffer");var a=this._trackElement,c=this._videoElement;if(a&&c&&c.hasChildNodes())try{c.removeChild(a)}catch(m){e.default.warn("Can't remove track element from the video")}this._track&&(this._track.mode="disabled");
this._trackElement&&(this._trackElement.innerHTML="")};return c}(f.default);b.default=a},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=[],e=1,g=[];if(2>a.length)return[];if(a[1].match(/::cue {/))g.push({isGlobalStyle:!0}),e++;else for(var c=void 0;a[e]&&(c=a[e].match(/::cue\(\.?(.*?)\)(?:,| {)/));)g.push({className:c[1],isGlobalStyle:!1}),e++;for(var d="";a[e]&&!a[e].match(/}/)&&0!==a[e].length;)d+=a[e],e++;g.forEach(function(a){b.push({className:a.className,
isGlobalStyle:a.isGlobalStyle,styleContent:d.replace(/\s/g,"")})});return b}},function(f,b,a){function h(a,b,c){var d=["u","i","b"];var e=a.nodeName.toLowerCase().split(".")[0];if(k.default(["u","i","b","c","#text"],e))if("#text"===e)for(a=a.wholeText.split("\n"),d=document.createElement("span"),e=0;e<a.length;e++){if(e&&d.appendChild(document.createElement("br")),0<a[e].length){var g=document.createTextNode(a[e]);d.appendChild(g)}}else{var f=[];a.nodeName.toLowerCase().split(".").forEach(function(a){-1!==
c.indexOf(a)&&f.push(c.indexOf(a))});if(0!==f.length){var t=document.createAttribute("style");f.forEach(function(a){b[a]&&(t.value+=b[a].styleContent)});d=k.default(d,e)?e:"span";d=document.createElement(d);d.setAttributeNode(t)}else d=k.default(d,e)?e:"span",d=document.createElement(d);for(g=0;g<a.childNodes.length;g++)e=h(a.childNodes[g],b,c),d.appendChild(e)}else for(d=document.createElement("span"),g=0;g<a.childNodes.length;g++)e=h(a.childNodes[g],b,c),d.appendChild(e);return d}Object.defineProperty(b,
"__esModule",{value:!0});var k=a(13);b.default=function(a,b){var c=b.map(function(a){return a.className}).filter(function(a){return null!=a});a=a.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,"<$1$2>$3</$1$2>");a=(new DOMParser).parseFromString(a,"text/html").body.childNodes;for(var d=[],e=0;e<a.length;e++)d.push(h(a[e],b,c));return d}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.split(":").reverse();
if(b[2]||b[1]){a=b[2]?parseInt(b[2],10):0;var e=parseInt(b[1],10);b=parseFloat(b[0].replace(",","."));return isNaN(a)||isNaN(e)||isNaN(b)?void 0:3600*a+60*e+b}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(35);b.default=function(a,b){for(var e=[];b<a.length;b++)if(h.isStartOfStyleBlock(a,b)){var c=b;for(b++;a[b];)b++;c=a.slice(c,b);e.push(c)}else if(a[b])for(;a[b];)b++;return e}},function(f,b,a){function h(a,c){var b=a.start,e=a.end,l=a.header;a=a.payload;var g=document.createElement("div"),
f=document.createAttribute("style");f.value="width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;";g.setAttributeNode(f);f=document.createElement("p");var k=document.createAttribute("style");k.value="text-align:center";f.setAttributeNode(k);var n=document.createElement("span");k=document.createAttribute("style");k.value="background-color:rgba(0,0,0,0.8);color:white;";n.setAttributeNode(k);var m=c.filter(function(a){return a.className===l&&!a.isGlobalStyle||
a.isGlobalStyle}).map(function(a){return a.styleContent});k.value+=m.join();n.setAttributeNode(k);d.default(a.join("\n"),c).forEach(function(a){n.appendChild(a)});g.appendChild(f);f.appendChild(n);return{start:b,end:e,element:g}}Object.defineProperty(b,"__esModule",{value:!0});var k=a(74),e=a(144),g=a(73),c=a(35),d=a(142),l=a(141);b.default=function(a,d){var b=a.split(/\r\n|\n|\r/g);if(!b.length)return[];a=[];var f=[];if(!b[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw Error("Can't parse WebVTT: Invalid File.");
var n=c.getFirstLineAfterHeader(b),m=e.default(b,n);b=k.default(b,n);for(n=0;n<m.length;n++){var r=l.default(m[n]);f.push.apply(f,r)}for(n=0;n<b.length;n++)m=g.default(b[n],d),null!=m&&(m=h(m,f))&&a.push(m);return a}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.split(":");if(b[2]){a=parseInt(b[0],10);var e=parseInt(b[1],10);b=parseFloat(b[2].replace(",","."));return isNaN(a)||isNaN(e)||isNaN(b)?void 0:3600*a+60*e+b}}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});b.default=function(a,b){for(b+=1;a[b];)b++;return b}},function(f,b,a){function h(a){var c=document.createElement("div");c.innerHTML=a;var d=function(a){a=a.childNodes;var c=document.createElement("span");c.className="rxp-texttrack-span";for(var b=0;b<a.length;b++){var e=a[b];if("#text"===e.nodeName){var l=e.wholeText.split("\n");for(e=0;e<l.length;e++)if(e&&c.appendChild(document.createElement("br")),0<l[e].length){var g=document.createTextNode(l[e]);c.appendChild(g)}}else"B"===
e.nodeName?(l=d(e),l.style.fontWeight="bold"):"I"===e.nodeName?(l=d(e),l.style.fontStyle="italic"):"U"===e.nodeName?(l=d(e),l.style.textDecoration="underline"):"FONT"===e.nodeName&&null!=e.color?(l=d(e),l.style.color=e.color):l=d(e),c.appendChild(l)}return c};return d(c)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(76),e=a(75);b.default=function(a,c){a=a.split(/\r\n|\n|\r/);a=k.default(a);for(var d=[],b=0;b<a.length;b++){var g=e.default(a[b],c);if(null!=g){var f=g.start;var t=g.end;g=
g.payload;var u=document.createElement("div");u.className="rxp-texttrack-p";u.style.fontSize="28px";u.style.position="absolute";u.style.bottom="5%";u.style.width="100%";u.style.textAlign="center";u.style.color="#fff";u.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var p=0;p<g.length;p++){p&&u.appendChild(document.createElement("br"));var q=h(g[p]);u.appendChild(q)}f={start:f,end:t,element:u};null!=f&&d.push(f)}}return d}},function(f,b,a){function h(a){var c=
d.REGXP_8_HEX_COLOR.exec(a);if(null!=c)return"rgba("+parseInt(c[1],16)+","+parseInt(c[2],16)+","+parseInt(c[3],16)+","+parseInt(c[4],16)/255+")";c=d.REGXP_4_HEX_COLOR.exec(a);return null!=c?"rgba("+parseInt(c[1]+c[1],16)+","+parseInt(c[2]+c[2],16)+","+parseInt(c[3]+c[3],16)+","+parseInt(c[4]+c[4],16)/255+")":a}function k(a,c){return"-1px -1px "+c+" "+a+","+("1px -1px "+c+" "+a+",")+("-1px 1px "+c+" "+a+",")+("1px 1px "+c+" "+a)}function e(a,c,d,b,e){function f(a,b,m){a=a.childNodes;for(var t=[],u=
0;u<a.length;u++){var p=a[u];if("#text"===p.nodeName){var q=l.getStylingAttributes(["backgroundColor"],m,d,c).backgroundColor;q?b.backgroundColor=q:delete b.backgroundColor;var r=p,w=b;q=e;p=document.createElement("span");r=r.textContent||"";q&&(q=r.trim(),r=q=q.replace(/\s+/g," "));p.innerHTML=r;p.className="rxp-texttrack-span";var v;q=p;if(r=w.color)q.style.color=h(r);if(v=w.backgroundColor)q.style.backgroundColor=h(v);(v=w.wrapOption)&&"noWrap"===v&&(q.style.whiteSpace="nowrap");if(v=w.textOutline){v=
v.trim().replace(/\s+/g," ").split(" ");var x=v.length;if(3===x)r=h(v[0]),v=v[1],q.style.textShadow=k(r,v);else if(r&&1===x)v=v[0],q.style.textShadow=k(r,v);else if(2===x){x=/^[#A-Z]/i.test(v[0]);var D=/^[0-9]/.test(v[0]);x!==D&&(x?(r=h(v[0]),v=v[1],q.style.textShadow=k(r,v)):r&&(v=v[0],q.style.textShadow=k(r,v)))}}if(r=w.textDecoration)switch(r){case "noUnderline":case "noLineThrough":case "noOverline":q.style.textDecoration="none";break;case "lineThrough":q.style.textDecoration="line-through";break;
default:q.style.textDecoration=r}if(r=w.fontFamily)switch(r){case "proportionalSansSerif":q.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case "monospaceSansSerif":case "sansSerif":q.style.fontFamily="sans-serif";break;case "monospaceSerif":case "default":q.style.fontFamily="Courier New, Liberation Mono, monospace";break;case "proportionalSerif":q.style.fontFamily="serif";break;default:q.style.fontFamily=r}if(r=w.fontStyle)q.style.fontStyle=r;if(r=w.fontWeight)q.style.fontWeight=
r;if(r=w.fontSize)q.style.fontSize=r;if(r=w.direction)q.style.direction=r;if(r=w.unicodeBidi)switch(r){case "bidiOverride":q.style.unicodeBidi="bidi-override";break;case "embed":q.style.unicodeBidi="embed";break;default:q.style.unicodeBidi="normal"}if(r=w.visibility)q.style.visibility=r;"none"===w.display&&(q.style.display="none");t.push(p)}else"br"===p.nodeName?(p=document.createElement("BR"),t.push(p)):"span"===p.nodeName&&0<p.childNodes.length&&(q=g({},b,l.getStylingAttributes(n,[p],d,c)),t.push.apply(t,
f(p,q,[p].concat(m))))}return t}return f(a,g({},b),[])}Object.defineProperty(b,"__esModule",{value:!0});var g=a(8),c=a(48),d=a(46),l=a(47),n="color direction display fontFamily fontSize fontStyle fontWeight textDecoration textOutline unicodeBidi visibility wrapOption".split(" ");b.default=function(a,b,g,f,k,n){var m=c.default(a,"div"),t=document.createElement("DIV");t.className="rxp-texttrack-region";var u=k.extent;u&&(u=d.REGXP_PERCENT_VALUES.exec(u),null!=u&&(t.style.width=u[1]+"%",t.style.height=
u[2]+"%"));t.style.overflow=k.overflow||"hidden";if(u=k.padding)t.style.padding=u;if(u=k.origin)u=d.REGXP_PERCENT_VALUES.exec(u),null!=u&&(t.style.position="relative",t.style.left=u[1]+"%",t.style.top=u[2]+"%");u=k.displayAlign;t.style.display="flex";t.style.flexDirection="column";if(u)switch(u){case "before":t.style.justifyContent="flex-start";break;case "center":t.style.justifyContent="center";break;case "after":t.style.justifyContent="flex-end"}if(u=k.opacity)t.style.opacity=u;if(u=k.visibility)t.style.visibility=
u;"none"===k.display&&(t.style.display="none");b&&(b=l.getStylingAttributes(["backgroundColor"],m.concat([b]),f,g).bodyBackgroundColor)&&(t.style.backgroundColor=h(b));b=document.createElement("p");b.className="rxp-texttrack-p";if(m=k.backgroundColor)b.style.backgroundColor=h(m);if(m=k.lineHeight)b.style.lineHeight=m;if(m=k.textAlign)switch(m){case "center":b.style.textAlign="center";break;case "left":case "start":b.style.textAlign="left";break;case "right":case "end":b.style.textAlign="right"}a=
e(a,g,f,k,n);for(g=0;g<a.length;g++)b.appendChild(a[g]);t.appendChild(b);return t}},function(f,b,a){function h(a,b){a=a.exec(b);return null===a||""===a[0]?null:(Number(a[4])||0)/1E3+(Number(a[3])||0)+60*(Number(a[2])||0)+3600*(Number(a[1])||0)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(46);b.default=function(a,b){if(k.REGXP_TIME_COLON_FRAMES.test(a)){a=k.REGXP_TIME_COLON_FRAMES.exec(a);var c=Number(a[1]),d=Number(a[2]),e=Number(a[3]),g=Number(a[4]);g+=(Number(a[5])||0)/b.subFrameRate;
e+=g/b.frameRate;return e+60*d+3600*c}if(k.REGXP_TIME_COLON.test(a))return h(k.REGXP_TIME_COLON,a);if(k.REGXP_TIME_COLON_MS.test(a))return h(k.REGXP_TIME_COLON_MS,a);if(k.REGXP_TIME_FRAMES.test(a))return a=k.REGXP_TIME_FRAMES.exec(a),Number(a[1])/b.frameRate;if(k.REGXP_TIME_TICK.test(a))return a=k.REGXP_TIME_TICK.exec(a),Number(a[1])/b.tickRate;if(k.REGXP_TIME_HMS.test(a))return h(k.REGXP_TIME_HMS,a)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(77),k=a(149);b.default=
function(a,b,c,d,l,f,m){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&/^\s*$/.test(a.textContent||""))return null;var e=h.default(a,m),g=e.start;e=e.end;a=k.default(a,l,d,c,f,"default"===m.spaceStyle);return{start:g+b,end:e+b,element:a}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.STYLE_ATTRIBUTES="backgroundColor color direction display displayAlign extent fontFamily fontSize fontStyle fontWeight lineHeight opacity origin overflow padding textAlign textDecoration textOutline unicodeBidi visibility wrapOption writingMode".split(" ")},
function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,e){return"function"===typeof String.prototype.startsWith?a.startsWith(b,e):a.substr(e||0,b.length)===b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),k=a(8),e=a(79),g=a(48),c=a(78),d=a(47),l=a(152),n=a(151);b.default=function(a,b){var f=[];if(a=(new DOMParser).parseFromString(a,"text/xml")){var m=a.getElementsByTagName("tt")[0];if(!m)throw Error("invalid XML");a=c.getBodyNode(m);
var t=c.getStyleNodes(m),r=c.getRegionNodes(m),w=c.getTextNodes(m);m=e.default(m);for(var v=[],x=0;x<=t.length-1;x++){var z=t[x];if(z instanceof Element){var A=z.getAttribute("xml:id");null!==A&&v.push({id:A,style:d.getStylingFromElement(z)})}}var y=[];t=function(a){var c=r[a];if(c instanceof Element&&(a=c.getAttribute("xml:id"),null!==a)){var b=d.getStylingFromElement(c),e=c.getAttribute("style");e&&(c=h(v,function(a){return a.id===e}))&&(b=k({},c.style,b));y.push({id:a,style:b})}};for(x=0;x<=r.length-
1;x++)t(x);t=null!==a?d.getStylingAttributes(l.STYLE_ATTRIBUTES,[a],v,y):d.getStylingAttributes(l.STYLE_ATTRIBUTES,[],v,y);for(x=0;x<w.length;x++)z=w[x],z instanceof Element&&(A=g.default(z,"div"),A=k({},t,d.getStylingAttributes(l.STYLE_ATTRIBUTES,[z].concat(A),v,y)),(z=n.default(z,b,v,y,a,A,m))&&f.push(z))}return f}},function(f,b,a){function h(a){return a.replace(e,function(a,c){return String.fromCharCode(c)})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(4),e=/&#([0-9]+);/g,g=/<br>/gi,
c=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,d=/\s*<p class=([^>]+)>(.*)/i,l=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.default=function(a,b,e){var f=/<sync[ >]/ig,n=/<sync[ >]|<\/body>/ig,m=[],t=a.match(c);t=t?t[1]:"";n.exec(a);var w=/\.(\S+)\s*{([^}]*)}/gi;for(var v={},x;x=w.exec(t);){var z=x[1];x=(x=x[2].match(/\s*lang:\s*(\S+);/i))?x[1]:null;null!=z&&null!=x&&(v[x]=z)}t=(t=/p\s*{([^}]*)}/gi.exec(t))?t[1]:"";v=v[e];for(k.default(!!v,"sami: could not find lang "+e+" in CSS");;){e=f.exec(a);w=n.exec(a);
if(!e&&!w)break;if(!e||!w||e.index>=w.index)throw Error("parse error");e=a.slice(e.index,w.index);w=e.match(l);if(!w)throw Error("parse error (sync time attribute)");w=+w[1];if(isNaN(w))throw Error("parse error (sync time attribute NaN)");e=e.split("\n");w/=1E3;for(z=e.length;0<=--z;)if(x=e[z].match(d)){var A=x[2];if(v===x[1])if("&nbsp;"===A)m[m.length-1].end=w;else{x=document.createElement("DIV");x.className="rxp-texttrack-region";var y=document.createElement("DIV");y.className="rxp-texttrack-div";
y.style.position="absolute";y.style.bottom="0";y.style.width="100%";y.style.color="#fff";y.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var C=document.createElement("div");C.className="rxp-texttrack-p";t&&(C.style.cssText=t);A=A.split(g);for(var E=0;E<A.length;E++){E&&C.appendChild(document.createElement("BR"));var G=document.createElement("SPAN");G.className="rxp-texttrack-span";G.textContent=h(A[E]);C.appendChild(G)}y.appendChild(C);x.appendChild(y);m.push({element:x,
start:w+b,end:-1})}}}return m}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k={};k.sami=a(155).default;k.ttml=a(154).default;k.srt=a(148).default;k.vtt=a(145).default;b.default=function(a,b,c,d){h.default.debug("finding parser for html text tracks:",a);a=k[a];if(!a)throw Error("no parser found for the given text track");h.default.debug("parser found, parsing...");b=a(b,c,d);h.default.debug("parsed successfully!",b);return b}},function(f,b,a){function h(a,c){for(var b=
0;b<a.length;b++){var e=a[b];if(c<e.end)return c>=e.start?a.slice(0,b):a.slice(0,b+1)}return a.slice()}function k(a,c){for(var b=0;b<a.length;b++){var e=a[b];if(c<e.end)return c>=e.start?a.slice(b+1,a.length):a.slice(b,a.length)}return[]}function e(a,c,b){c={start:a.start,end:Math.max(a.start,c),cues:h(a.cues,c)};a={start:Math.min(b,a.end),end:a.end,cues:k(a.cues,b)};return[c,a]}Object.defineProperty(b,"__esModule",{value:!0});a(4);f=function(){function a(){this._cuesBuffer=[]}a.prototype.get=function(a){for(var c=
this._cuesBuffer,b=c.length-1;0<=b;b--)for(var e=c[b].cues,g=e.length-1;0<=g;g--){var f=e[g];if(a>=f.start){if(a<f.end)return f;return}}};a.prototype.remove=function(a,b){var c=Math.max(a,b);b=this._cuesBuffer;for(var d=b.length,g=0;g<d;g++)if(b[g].end>a){var f=b[g];if(f.start>=c)break;if(f.end>=c){c=e(f,a,c);d=c[1];this._cuesBuffer[g]=c[0];b.splice(g+1,0,d);break}f.cues=h(f.cues,a);f.end=Math.max(a,f.start);for(a=g+1;a<d;a++)if(f=b[g],c<=f.end){b.splice(g+1,a-(g+1));c>f.start&&(f.cues=k(f.cues,c),
f.start=c);return}b.splice(g+1,b.length-(g+1));break}};a.prototype.insert=function(a,b,l){var c=this._cuesBuffer;a={start:b,end:l,cues:a};for(var d=0;d<c.length;d++){var g=c[d];if(b<g.end){if(.2>=Math.abs(b-g.start)){if(.2>=Math.abs(l-g.end)){c[d]=a;return}if(l<g.end){g.cues=k(g.cues,l);g.start=l;c.splice(d,0,a);return}do c.splice(d,1),g=c[d];while(g&&l>g.end);if(!g||.2>=Math.abs(l-g.end)){c[d]=a;return}g.cues=k(g.cues,l);g.start=l;c.splice(d,0,a);return}if(b<g.start){if(l<g.start){c.splice(d,0,a);
return}if(.2>=Math.abs(l-g.start)){g.start=l;c.splice(d,0,a);return}g.cues=k(g.cues,l);g.start=l;c.splice(d,0,a);return}if(l>g.end||.2>=Math.abs(l-g.end)){g.cues=h(g.cues,b);g.end=b;c.splice(d+1,0,a);return}b=e(g,b,l);l=b[1];this._cuesBuffer[d]=b[0];c.splice(d+1,0,a);c.splice(d+2,0,l);return}}c.push(a)};return a}();b.default=f},function(f,b,a){function h(a){var c=d.onSeeking$(a),b=d.onSeeked$(a);a=d.onEnded$(a);b=g.Observable.merge(b,a);a=g.Observable.interval(u).startWith(null);return b.startWith(null).switchMapTo(a.mapTo(!0).takeUntil(c).concat(g.Observable.of(!1)))}
function k(a,c){if(c)try{a.removeChild(c)}catch(r){l.default.warn("Can't remove text track: not in the element.")}}var e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),
c=a(7),d=a(15);f=a(2);var l=a(1),n=a(49),m=a(157),t=a(156),u=f.default.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL;a=function(a){function b(b,d){var e=this;l.default.debug("creating html text track source buffer");e=a.call(this)||this;e._videoElement=b;e._textTrackElement=d;e._destroy$=new c.Subject;e._buffer=new m.default;e._currentElement=null;h(e._videoElement).takeUntil(e._destroy$).subscribe(function(a){a?(a=e._buffer.get(Math.max(e._videoElement.currentTime-u/2E3,0)),a)?e._currentElement!==a.element&&
(k(d,e._currentElement),e._currentElement=a.element,d.appendChild(e._currentElement)):(k(d,e._currentElement),e._currentElement=null):(k(d,e._currentElement),e._currentElement=null)});return e}e(b,a);b.prototype._append=function(a){l.default.debug("appending new html text tracks",a);var c=a.timescale,b=a.start,d=a.end,e=a.data,g=a.type,f=a.language;a=a.timeOffset;d&&0>=d-b?l.default.warn("Invalid text track appended: the start time is inferior or equal to the end time."):(b/=c,c=null!=d?d/c:void 0,
e=t.default(g,e,a,f),g=null!=c?c:e[e.length-1].end,this._buffer.insert(e,b,g),this.buffered.insert(b,g))};b.prototype._remove=function(a,c){l.default.debug("removing html text track data",a,c);this._buffer.remove(a,c);this.buffered.remove(a,c)};b.prototype._abort=function(){l.default.debug("aborting html text track source buffer");this._destroy$.next();this._destroy$.complete();k(this._textTrackElement,this._currentElement)};return b}(n.default);b.default=a},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});f=a(158).default;b.HTMLTextSourceBuffer=f;a=a(140).default;b.NativeTextSourceBuffer=a},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(7),e=a(1),g;(function(a){a[a.Append=0]="Append";a[a.Remove=1]="Remove"})(g||(g={}));f=function(){function a(a){this._buffer=a;this._queue=[];this._lastInitSegment=this._flushing=null;this.__onUpdate=this._onUpdate.bind(this);this.__onError=this._onError.bind(this);this.__flush=this._flush.bind(this);this._buffer.addEventListener("update",
this.__onUpdate);this._buffer.addEventListener("error",this.__onError);this._buffer.addEventListener("updateend",this.__flush)}a.prototype.appendBuffer=function(a,c){var b=this;return h.Observable.defer(function(){return b._queueAction({type:g.Append,segment:c,initSegment:a})})};a.prototype.removeBuffer=function(a){var c=this,b=a.start,d=a.end;return h.Observable.defer(function(){return c._queueAction({type:g.Remove,start:b,end:d})})};a.prototype.abort=function(){this.dispose();this._buffer.abort()};
a.prototype.getBuffered=function(){return this._buffer.buffered};a.prototype.dispose=function(){this._buffer.removeEventListener("update",this.__onUpdate);this._buffer.removeEventListener("error",this.__onError);this._buffer.removeEventListener("updateend",this.__flush);this._queue.length=0;this._flushing=null};a.prototype._onUpdate=function(){this._flushing&&(this._flushing.next(void 0),this._flushing.complete(),this._flushing=null)};a.prototype._onError=function(a){this._flushing&&(this._flushing.error(a),
this._flushing=null)};a.prototype._queueAction=function(a){var c=!this._queue.length,b=new k.Subject;if(a.type===g.Append){var d=a.segment;a=a.initSegment;if(null===a&&null===d)return e.default.warn("QueuedSourceBuffer: no segment appended."),h.Observable.of(void 0);if(null===a)this._queue.unshift({type:g.Append,args:d,subject:b});else if(null===d){if(this._lastInitSegment===a)return h.Observable.of(void 0);this._queue.unshift({type:g.Append,args:a,subject:b})}else this._lastInitSegment!==a&&this._queue.unshift({type:g.Append,
args:a,subject:null}),this._queue.unshift({type:g.Append,args:d,subject:b});this._lastInitSegment=a}else if(a.type===g.Remove)this._queue.unshift({type:g.Remove,args:{start:a.start,end:a.end},subject:b});else throw Error("QueuedSourceBuffer: unrecognized action");c&&this._flush();return b.mapTo(void 0)};a.prototype._flush=function(){if(!this._flushing&&0!==this._queue.length&&!this._buffer.updating){var a=this._queue.pop();this._flushing=a.subject;try{switch(a.type){case g.Append:e.default.debug("pushing data to source buffer",
a.args);this._buffer.appendBuffer(a.args);break;case g.Remove:var c=a.args,b=c.start,f=c.end;e.default.debug("removing data from source buffer",b,f);this._buffer.remove(b,f)}}catch(t){this._onError(t)}}};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(4);var h=a(16);f=function(){function a(){this._ranges=[];this.length=0}a.prototype.insert=function(a,b){h.insertInto(this._ranges,{start:a,end:b});this.length=this._ranges.length};a.prototype.remove=function(a,
b){var c=[];0<a&&c.push({start:0,end:a});Infinity>b&&c.push({start:b,end:Infinity});h.keepRangeIntersection(this._ranges,c);this.length=this._ranges.length};a.prototype.start=function(a){if(a>=this._ranges.length)throw Error("INDEX_SIZE_ERROR");return this._ranges[a].start};a.prototype.end=function(a){if(a>=this._ranges.length)throw Error("INDEX_SIZE_ERROR");return this._ranges[a].end};return a}();b.default=f},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,g){function c(){this.constructor=b}a(b,g);b.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}h(b,a);b.prototype._append=function(a){var c=a.end,b=a.timescale;this.buffered.insert(a.start/b,null==c?Number.MAX_VALUE:c/b)};b.prototype._remove=
function(){};b.prototype._abort=function(){};return b}(a(49).default);b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(7),e=a(19),g=a(80);b.default=function(a,b,l,f,m,t){var c=g.default(b[a],t),d,n;return function(b){return c(b).do(function(c){switch(c.type){case "error":m.next(h(c.value,{pipelineType:a}));break;case "metrics":c=c.value;var b=c.size;c=c.duration;null!=b&&null!=c&&l.next({type:a,value:{size:b,duration:c}});break;case "request":b=(c=c.value)&&
c.segment;null!=b&&null!=b.duration&&(d=new k.Subject,f.next(d),c=b.duration/b.timescale,b=b.time/b.timescale,n=e.default(),d.next({type:a,event:"requestBegin",value:{duration:c,time:b,requestTimestamp:Date.now(),id:n}}));break;case "progress":c=c.value,null!=c.totalSize&&c.size<c.totalSize&&null!=n&&null!=d&&d.next({type:a,event:"progress",value:{duration:c.duration,size:c.size,totalSize:c.totalSize,timestamp:Date.now(),id:n}})}}).filter(function(a){return"data"===a.type||"cache"===a.type}).map(function(a){return a.value}).finally(function(){null!=
d&&(null!=n&&d.next({type:a,event:"requestEnd",value:{id:n}}),d.complete())}).share()}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),k=a(0),e=a(7);f=function(){function a(){this._pendingPriority=null;this._numberOfPendingObservables=0;this._queue=[]}a.prototype.create=function(a,b){var c=this;return k.Observable.defer(function(){if(null==c._pendingPriority||c._pendingPriority>=b)return c._pendingPriority=b,c._startObservable(a);var d=new e.Subject;c._queue.push({observable:a,
priority:b,trigger:d});return d.mergeMap(function(){return c._startObservable(a)})})};a.prototype.updatePriority=function(a,b){var c=h(this._queue,function(c){return c.observable===a});c&&(c.priority=b)};a.prototype._startObservable=function(a){var c=this;this._numberOfPendingObservables++;return a.finally(function(){c._numberOfPendingObservables--;if(!(0<c._numberOfPendingObservables)&&(c._pendingPriority=null,0!==c._queue.length)){c._pendingPriority=c._queue.reduce(function(a,c){return null==a||
a>c.priority?c.priority:a},null);for(var a=0;a<c._queue.length;a++){var b=c._queue[a];b.priority===c._pendingPriority&&(c._queue.splice(a,1),a--,b.trigger.next(),b.trigger.complete())}}})};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){return{createRequest:function(e,g){void 0===g&&(g=0);return a.create(b(e),g)},updatePriority:function(b,g){a.updatePriority(b,g)}}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});
var h=a(165),k=a(164),e=a(163);f=function(){function a(a,b,e,g){this._transport=a;this._metrics$=e;this._requestsInfos$=b;this._warning$=g;this._prioritizer=new k.default}a.prototype.createPipeline=function(a,b){a=e.default(a,this._transport,this._metrics$,this._requestsInfos$,this._warning$,b);return h.default(this._prioritizer,a)};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(5),e=a(6),g=a(87);b.default=function(a,b){var c=b.baseDelay,d=
b.maxDelay,f=b.maxRetryRegular,t=b.maxRetryOffline,u=b.onRetry,p=0,q=0;return a.catch(function(a,b){var l=a instanceof e.RequestError?a.type===e.RequestErrorTypes.ERROR_HTTP_CODE?500<=a.status||404===a.status:a.type===e.RequestErrorTypes.TIMEOUT||a.type===e.RequestErrorTypes.ERROR_EVENT:!1;if(!l)throw a;l=a instanceof e.RequestError&&a.type===e.RequestErrorTypes.ERROR_EVENT&&k.isOffline()?2:1;var n=2===l?t:f;l!==q&&(p=0,q=l);if(++p>n)throw a;u&&u(a,p);a=g.getFuzzedDelay(Math.min(c*Math.pow(2,p-1),
d));return h.Observable.timer(a).mergeMap(function(){return b})})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1);f=function(){function a(){}a.prototype.getInitSegment=function(){return null};a.prototype.getSegments=function(){return[{id:"0",isInit:!1,number:0,time:0,duration:Number.MAX_VALUE,timescale:1}]};a.prototype.getFirstPosition=function(){};a.prototype.getLastPosition=function(){};a.prototype.shouldRefresh=function(){return!1};a.prototype.checkDiscontinuity=function(){return-1};
a.prototype._addSegments=function(){};a.prototype._update=function(){h.default.warn("Tried to update a static RepresentationIndex")};return a}();b.default=f},function(f,b,a){function h(a){return a.reduce(function(a,b){var d=b.type;if(!b.representations.length)return a;a[d]||(a[d]=[]);a[d].push(new c.default(b));return a},{})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(9),e=a(19),g=a(29),c=a(83),d=a(81);f=function(){function a(a){this.id=a.id;this.adaptations=h(a.adaptations);this.duration=
a.duration;this.start=a.start;null!=this.duration&&null!=this.start&&(this.end=this.start+this.duration)}a.prototype.addSupplementaryImageAdaptations=function(a){a=(Array.isArray(a)?a:[a]).map(function(a){var b=a.mimeType;a=a.url;var l="gen-image-ada-"+e.default(),g="gen-image-rep-"+e.default();return new c.default({id:l,type:"image",manuallyAdded:!0,representations:[{baseURL:a,bitrate:0,id:g,mimeType:b,index:new d.StaticRepresentationIndex}]})});a.length&&(this.adaptations.image=this.adaptations.image?
this.adaptations.image.concat(a):a)};a.prototype.addSupplementaryTextAdaptations=function(a){a=(Array.isArray(a)?a:[a]).reduce(function(a,b){var l=b.mimeType,f=b.codecs,k=b.url,n=b.language,m=b.languages,h=b.closedCaption;return a.concat((n?[n]:m||[]).map(function(a){var b="gen-text-ada-"+e.default(),n="gen-text-rep-"+e.default();return new c.default({id:b,type:"text",language:a,normalizedLanguage:g.normalize(a),closedCaption:h,manuallyAdded:!0,representations:[{baseURL:k,bitrate:0,id:n,mimeType:l,
codecs:f,index:new d.StaticRepresentationIndex}]})}))},[]);a.length&&(this.adaptations.text=this.adaptations.text?this.adaptations.text.concat(a):a)};a.prototype.getAdaptations=function(){var a=this.adaptations;if(!a)return[];var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push.apply(c,a[b]);return c};a.prototype.getAdaptationsForType=function(a){return this.adaptations[a]||[]};a.prototype.getAdaptation=function(a){return k(this.getAdaptations(),function(c){return a===c.id})};return a}();b.default=f},
function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9);a(4);var k=a(19),e=a(29),g=a(1),c=a(83);b.Adaptation=c.default;var d=a(169);b.Period=d.default;f=a(82);b.Representation=f.default;var l=a(81);a=function(){function a(a){var c=k.default();this.id=null==a.id?c:""+a.id;this.transport=a.transportType||"";this.periods=a.periods.map(function(a){return new d.default(a)});this.adaptations=this.periods[0]&&this.periods[0].adaptations||[];this.minimumTime=a.minimumTime;this.isLive=
"dynamic"===a.type;this.uris=a.uris;this.suggestedPresentationDelay=a.suggestedPresentationDelay;this.availabilityStartTime=a.availabilityStartTime;this.presentationLiveGap=a.presentationLiveGap;this.timeShiftBufferDepth=a.timeShiftBufferDepth;this._duration=a.duration}a.prototype.addSupplementaryImageAdaptations=function(a){a=(Array.isArray(a)?a:[a]).map(function(a){var b=a.mimeType;a=a.url;var d="gen-image-ada-"+k.default(),e="gen-image-rep-"+k.default();return new c.default({id:d,type:"image",
manuallyAdded:!0,representations:[{baseURL:a,bitrate:0,id:e,mimeType:b,index:new l.StaticRepresentationIndex}]})});a.length&&(this.adaptations.image=this.adaptations.image?this.adaptations.image.concat(a):a)};a.prototype.addSupplementaryTextAdaptations=function(a){a=(Array.isArray(a)?a:[a]).reduce(function(a,b){var d=b.mimeType,g=b.codecs,f=b.url,n=b.language,m=b.languages,h=b.closedCaption;return a.concat((n?[n]:m||[]).map(function(a){var b="gen-text-ada-"+k.default(),n="gen-text-rep-"+k.default();
return new c.default({id:b,type:"text",language:a,normalizedLanguage:e.normalize(a),closedCaption:h,manuallyAdded:!0,representations:[{baseURL:f,bitrate:0,id:n,mimeType:d,codecs:g,index:new l.StaticRepresentationIndex}]})}))},[]);a.length&&(this.adaptations.text=this.adaptations.text?this.adaptations.text.concat(a):a)};a.prototype.getPeriodForTime=function(a){return h(this.periods,function(c){return a>=c.start&&(null==c.end||c.end>a)})};a.prototype.getPeriodAfter=function(a){var c=a.end;return null==
c?null:h(this.periods,function(a){return null==a.end||c<a.end})||null};a.prototype.getDuration=function(){return this._duration};a.prototype.getUrl=function(){return this.uris[0]};a.prototype.getAdaptations=function(){var a=this.periods[0];if(!a)return[];a=a.adaptations;var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push.apply(c,a[b]);return c};a.prototype.getAdaptationsForType=function(a){var c=this.periods[0];return c?c.adaptations[a]||[]:[]};a.prototype.getAdaptation=function(a){return h(this.getAdaptations(),
function(c){return a===c.id})};a.prototype.updateLiveGap=function(a){this.isLive&&(this.presentationLiveGap=this.presentationLiveGap?this.presentationLiveGap+a:a)};a.prototype.update=function(a){this._duration=a.getDuration();this.timeShiftBufferDepth=a.timeShiftBufferDepth;this.availabilityStartTime=a.availabilityStartTime;this.suggestedPresentationDelay=a.suggestedPresentationDelay;this.uris=a.uris;var c=this.periods,b=a.periods;var d=function(a){var d=c[a],l=h(b,function(a){return a.id===d.id});
if(l){d.start=l.start;d.end=l.end;d.duration=l.duration;var f=d.getAdaptations(),k=l.getAdaptations();l=function(a){var c=f[a],b=h(k,function(a){return a.id===c.id});if(b){var d=f[a].representations,e=b.representations;a=function(a){var c=d[a],b=h(e,function(a){return a.id===c.id});b?(c.baseURL=b.baseURL,d[a].index._update(b.index)):g.default.warn('manifest: representation "'+d[a].id+'" not found when merging.')};for(b=0;b<d.length;b++)a(b)}else g.default.warn('manifest: adaptation "'+f[a].id+'" not found when merging.')};
for(var n=0;n<f.length;n++)l(n)}else g.default.info("Period "+d.id+" not found after update. Removing."),c.splice(a,1),a--;e=a};var e;for(a=0;a<c.length;a++)d(a),a=e;if(b.length>c.length){var l=c[c.length-1];if(l)for(a=0;a<b.length-1;a++)d=b[a],d.start>l.start&&(g.default.info("Adding new period "+d.id),this.periods.push(d));else for(a=0;a<b.length-1;a++)d=b[a],g.default.info("Adding new period "+d.id),this.periods.push(d)}};return a}();b.default=a},function(f,b,a){function h(a,b){a=a.filter(function(a){return 0>
l.indexOf(a.type)?(c.default.info("not supported adaptation type",a.type),a=new g.MediaError("MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",null,!1),b.next(a),!1):!0}).map(function(a){if(a.representations.length&&(a.representations=k(a.type,a.representations),0===a.representations.length)){c.default.warn("Incompatible codecs for adaptation",a);var d=new g.MediaError("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!1);b.next(d)}return a}).filter(function(a){return a.representations.length});if(0===a.length)throw new g.MediaError("MANIFEST_PARSE_ERROR",
null,!0);return a}function k(a,c){function b(a){var c=a.codecs;a=a.mimeType;return(void 0===a?"":a)+';codecs="'+(void 0===c?"":c)+'"'}return"audio"===a||"video"===a?c.filter(function(a){return e.isCodecSupported(b(a))}):c}Object.defineProperty(b,"__esModule",{value:!0});var e=a(5),g=a(6),c=a(1),d=a(170),l=["audio","video","text","image"];b.default=function(a,c,b,e){a.periods=a.periods.map(function(a){a.adaptations=h(a.adaptations,e);return a});a=new d.default(a);a.addSupplementaryTextAdaptations(c);
a.addSupplementaryImageAdaptations(b);return a}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(171),k=a(80);b.default=function(a,b,c,d,l){void 0===d&&(d=[]);void 0===l&&(l=[]);return function(e){return k.default(a.manifest,b)({url:e}).do(function(a){"error"===a.type&&c.next(a.value)}).filter(function(a){return"data"===a.type||"cache"===a.type}).map(function(a){return h.default(a.value.parsed.manifest,d,l,c)}).share()}}},function(f,b,a){Object.defineProperty(b,"__esModule",
{value:!0});f=a(172);b.createManifestPipeline=f.default;a=a(166);b.SegmentPipelinesManager=a.default},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=a(2);var h=f.default.BITRATE_REBUFFERING_RATIO,k=f.default.MINIMUM_SEGMENT_SIZE;b.default=function(a,b,c,d,l){var e=b.period,g=b.adaptation;b=b.representation;if(l.test(a.id))return!1;if(a.isInit||0>a.time)return!0;l=a.duration;var f=a.timescale;return l?l/f<k?!1:(a=c.hasPlayableSegment(d,{time:a.time,duration:l,timescale:f}))&&a.infos.period.id===
e.id&&a.infos.adaptation.id===g.id?b.bitrate>a.infos.representation.bitrate*h:!0:!0}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(16);b.default=function(a,b,g,c,d){var e=g.currentTime+g.timeOffset,f=Math.max(a.start||0,e);a=null==g.liveGap?a.end:Math.min(a.end||Infinity,g.currentTime+g.liveGap);g=d.low;d=d.high;b=h.getLeftSizeOfRange(b,e);return{start:Math.min(Math.max(e+(b>g&&Infinity>b?Math.min(b,d):0),f),a||Infinity),end:Math.min(Math.max(e+c,f),a||Infinity)}}},function(f,
b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){var e=b.start;return a.index.getSegments(e,b.end-e)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(2).default.SEGMENT_PRIORITIES_STEPS;b.default=function(a,b){a=a.time/a.timescale-(b.currentTime+b.timeOffset);for(b=0;b<h.length;b++)if(a<h[b])return b;return h.length}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(2).default.BUFFER_PADDING;b.default=function(a){switch(a.type){case "audio":case "video":return h[a.type];
default:return h.other}}},function(f,b,a){function h(a,c,b){var d=g.getInnerAndOuterTimeRanges(c,a);c=d.innerRange;d=d.outerRanges;for(var l=[],f=0;f<d.length;f++){var k=d[f];a-b<k.end?l.push(k):a+b>k.start&&l.push(k)}c&&(e.default.debug("buffer: gc removing part of inner range",l),a-b>c.start&&l.push({start:c.start,end:a-b}),a+b<c.end&&l.push({start:a+b,end:c.end}));return l}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0);f=a(2);var e=a(1),g=a(16),c=f.default.BUFFER_GC_GAPS.CALM,d=f.default.BUFFER_GC_GAPS.BEEFY;
b.default=function(a,b){return a.take(1).mergeMap(function(a){e.default.warn("buffer: running garbage collector");var l=b.getBuffered(),g=h(a.currentTime,l,c);0===g.length&&(g=h(a.currentTime,l,d));e.default.debug("buffer: gc cleaning",g);return k.Observable.from(g.map(function(a){return b.removeBuffer(a)})).concatAll()})}},function(f,b,a){function h(a,b,e,g){return e.isInit?null==b?k.Observable.of(void 0):a.appendBuffer(b,null):null==g?k.Observable.of(void 0):a.appendBuffer(b,g)}Object.defineProperty(b,
"__esModule",{value:!0});var k=a(0),e=a(6),g=a(179);b.default=function(a,b,l,f,k){var c=h(b,l,f,k);return c.catch(function(d){if(!d||"QuotaExceededError"!==d.name)throw new e.MediaError("BUFFER_APPEND_ERROR",d,!0);return g.default(a,b).mergeMapTo(c).catch(function(a){throw new e.MediaError("BUFFER_FULL_ERROR",a,!0);})})}},function(f,b,a){function h(a,c){var b=a.manifest;a=a.representation;return c.stalled&&b.isLive?a.index.checkDiscontinuity(c.currentTime):-1}Object.defineProperty(b,"__esModule",
{value:!0});var k=a(0),e=a(40),g=a(1),c=a(55),d=a(180),l=a(178),n=a(177),m=a(176),t=a(175),u=a(174);b.default=function(a){var b=a.clock$,f=a.content,p=a.queuedSourceBuffer,v=a.segmentBookkeeper,x=a.segmentFetcher;a=a.wantedBufferAhead$;var z=f.manifest,A=f.period,y=f.adaptation,C=f.representation,E=y.type,G=C.index.getInitSegment(),I=l.default(y),H=null==G?{segmentData:null,segmentInfos:null}:null,D=new e.ReplaySubject(1),B=[],F=null,J=new c.default;a=k.Observable.combineLatest(b,a).map(function(a){var c=
a[0],b=a[1];a=p.getBuffered();var d=t.default(A,a,c,b,I);b=h(f,c);var e=f.representation.index.shouldRefresh(d.start,d.end);v.synchronizeBuffered(a);a=m.default(C,d).filter(function(a){return u.default(a,f,v,d,J)}).map(function(a){return{priority:n.default(a,c),segment:a}});null!=G&&null==H&&(a=[{segment:G,priority:n.default(G,c)}].concat(a));return{discontinuity:b,shouldRefreshManifest:e,state:a.length?{type:"need-segments",value:{neededSegments:a}}:null!=A.end&&d.end>=A.end?{type:"full-buffer",
value:void 0}:{type:"idle-buffer",value:void 0}}}).mergeMap(function(a){var c=a.discontinuity,b=a.state,d=a.shouldRefreshManifest;a=[];1<c&&a.push({type:"discontinuity-encountered",value:{nextTime:c+1,bufferType:E}});d&&a.push({type:"needs-manifest-refresh",value:{bufferType:E}});"need-segments"===b.type&&b.value.neededSegments.length?(c=b.value.neededSegments,b=c[0],F?F.segment.id!==b.segment.id?(g.default.debug("canceling old downloading queue and starting a new one",y.type),B=c,D.next(void 0)):
F.priority!==b.priority?(g.default.debug("updating pending request priority",y.type),x.updatePriority(F.request$,b.priority)):(g.default.debug("updating downloading queue",y.type),B=c.slice().splice(1,c.length)):(g.default.debug("starting downloading queue",y.type),B=c,D.next(void 0)),c={type:"active-buffer",value:{bufferType:E}}):(F&&g.default.debug("interrupting segment request."),B=[],D.next(void 0),c="full-buffer"===b.type?{type:"full-buffer",value:{bufferType:E}}:{type:"idle-buffer",value:{bufferType:E}});
return"idle-buffer"===c.type?k.Observable.of.apply(k.Observable,a):k.Observable.of.apply(k.Observable,a).concat(k.Observable.of(c))});var R=D.switchMap(function(){var a=k.Observable.defer(function(){var c=B.shift();if(null==c)return k.Observable.empty();var b=c.segment;c=c.priority;var d=x.createRequest({adaptation:y,init:H&&H.segmentInfos||void 0,manifest:z,period:A,representation:C,segment:b},c);F={segment:b,priority:c,request$:d};return d.map(function(a){return{segment:b,value:a.parsed}}).concat(a)});
return a.finally(function(){F=null})}).mergeMap(function(a){return k.Observable.defer(function(){var c=a.segment,e=a.value,l=e.segmentInfos;e=e.segmentData;c.isInit&&(H=a.value);if(null==e)return k.Observable.empty();var g=d.default(b,p,H&&H.segmentData,c,e);J.add(c.id);return g.mapTo({type:"added-segment",value:{bufferType:E,segment:c,segmentData:e}}).do(function(){if(!c.isInit){var a=l?l:c,b=a.time,d=a.duration;a=a.timescale;v.insert(A,y,C,c,b/a,null!=d?(b+d)/a:void 0)}}).finally(function(){J.remove(c.id)})})});
return k.Observable.merge(a,R).share()}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0);b.default=function(a,b,g,c){var d=c.period;return h.Observable.combineLatest(a,b).filter(function(a){var c=a[0];a=a[1];return null!=d.end&&c.currentTime+a>=d.end}).map(function(){return{type:"full-buffer",value:{bufferType:g}}})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(85);b.default=function(a,b){var e=h(a,function(a){return a.bitrate>b});return-1===
e?a[a.length-1]:a[e-1]}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9);b.default=function(a,b){var e=a.slice().sort(function(a,c){return(a.width||0)-(c.width||0)});if(e=h(e,function(a){return(a.width||0)>=b})){var c=e.width||0;return a.filter(function(a){return(a.width||0)<=c})}return a}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(85);b.default=function(a,b){var e=h(a,function(a){return a.bitrate>b});return-1===e?a:a.slice(0,e)}},function(f,
b,a){Object.defineProperty(b,"__esModule",{value:!0});f=a(2);var h=a(86),k=f.default.ABR_MINIMUM_TOTAL_BYTES,e=f.default.ABR_MINIMUM_CHUNK_SIZE;a=function(){function a(){this._fast=new h.default(2);this._slow=new h.default(10);this._bytesSampled=0}a.prototype.addSample=function(a,b){if(!(b<e)){var c=8E3*b/a;a/=1E3;this._bytesSampled+=b;this._fast.addSample(a,c);this._slow.addSample(a,c)}};a.prototype.getEstimate=function(){if(!(this._bytesSampled<k))return Math.min(this._fast.getEstimate(),this._slow.getEstimate())};
a.prototype.reset=function(){this._fast=new h.default(2);this._slow=new h.default(10);this._bytesSampled=0};return a}();b.default=a},function(f,b,a){function h(a,c){a=u.default(a,c)||a[0];return g.Observable.of({bitrate:void 0,representation:a})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(8),e=a(98),g=a(0),c=a(7);f=a(2);var d=a(1),l=a(186),n=a(86),m=a(185),t=a(184),u=a(183),p=f.default.ABR_STARVATION_GAP,q=f.default.OUT_OF_STARVATION_GAP,r=f.default.ABR_STARVATION_FACTOR,w=f.default.ABR_REGULAR_FACTOR;
a=function(){function a(a){this._dispose$=new c.Subject;this.manualBitrate$=new e.BehaviorSubject(null!=a.manualBitrate?a.manualBitrate:-1);this.maxAutoBitrate$=new e.BehaviorSubject(null!=a.maxAutoBitrate?a.maxAutoBitrate:Infinity);this.estimator=new l.default;this._currentRequests={};this._initialBitrate=a.initialBitrate||0;this._limitWidth$=a.limitWidth$;this._throttle$=a.throttle$}a.prototype.get$=function(a,c){var b=this;if(2>c.length)return g.Observable.of({bitrate:void 0,representation:c.length?
c[0]:null}).takeUntil(this._dispose$);var d=this.manualBitrate$,e=this.maxAutoBitrate$,l=this._initialBitrate,f=[];this._limitWidth$&&f.push(this._limitWidth$.map(function(a){return{width:a}}));this._throttle$&&f.push(this._throttle$.map(function(a){return{bitrate:a}}));var x=f.length?g.Observable.combineLatest.apply(g.Observable,f).map(function(a){return k.apply(void 0,[{}].concat(a))}):g.Observable.of({}),v;return d.switchMap(function(d){if(0<=d)return h(c,d);var f=!1;return g.Observable.combineLatest(a,
e,x).map(function(a){var d=a[0],e=a[1];a=a[2];var g=d.bufferGap;g<=p?f=!0:f&&g>=q&&(f=!1);if(f){var k=d.bitrate;a:{var h=b._currentRequests;g+=d.position;for(var B=Object.keys(h),x=B.length,F=0;F<x-1;F++){var z=h[B[F]];if(Math.abs(g-z.time)<z.duration){g=z;break a}}g=void 0}if(g&&(B=g.duration,h=g.requestTimestamp,h=(Date.now()-h)/1E3,B&&h>1.2*B+1)){var y=g;if(2<=y.progress.length){var A=new n.default(2);g=y.progress;for(B=1;B<g.length;B++)x=g[B].timestamp-g[B-1].timestamp,A.addSample(x/1E3,8*(g[B].size-
g[B-1].size)/(x/1E3));A=A.getEstimate()}!A&&k&&(A=y.duration*k/(5*h/4));y=A;if(null!=y){b.resetEstimate();var D=null!=k?Math.min(y,k,e):Math.min(y,e)}}}null==D&&(y=b.estimator.getEstimate(),D=Math.min(null!=y?f?y*r:y*w:null!=v?f?v*r:v*w:l,e));1<d.speed&&(D/=d.speed);d=c;null!=a.bitrate&&(d=m.default(d,a.bitrate));null!=a.width&&(d=t.default(d,a.width));return{bitrate:y,representation:u.default(d,D)||c[0]}}).do(function(a){a=a.bitrate;null!=a&&(v=a)}).share()})};a.prototype.addEstimate=function(a,
c){null!=a&&null!=c&&this.estimator.addSample(a,c)};a.prototype.resetEstimate=function(){this.estimator.reset()};a.prototype.addPendingRequest=function(a,c){this._currentRequests[a]?d.default.warn("ABR: request already added."):(c=c.value,this._currentRequests[a]={time:c.time,duration:c.duration,requestTimestamp:c.requestTimestamp,progress:[]},this._currentRequests[a].progress=[])};a.prototype.addRequestProgress=function(a,c){this._currentRequests[a]?this._currentRequests[a].progress.push(c.value):
d.default.warn("ABR: progress for a request not added")};a.prototype.removePendingRequest=function(a){this._currentRequests[a]||d.default.warn("ABR: can't remove unknown request");delete this._currentRequests[a]};a.prototype.resetRequests=function(){this._currentRequests={}};a.prototype.dispose=function(){this._dispose$.next();this.manualBitrate$.complete();this.maxAutoBitrate$.complete()};return a}();b.default=a},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(7),k=a(187),
e={limitWidth:{},throttle:{},initialBitrates:{},manualBitrates:{},maxAutoBitrates:{}};f=function(){function a(a,b,l){void 0===l&&(l=e);var c=this;this._dispose$=new h.Subject;this._choosers={};this._chooserInstanceOptions={initialBitrates:l.initialBitrates||{},manualBitrates:l.manualBitrates||{},maxAutoBitrates:l.maxAutoBitrates||{},throttle:l.throttle||{},limitWidth:l.limitWidth||{}};b.takeUntil(this._dispose$).subscribe(function(a){var b=a.type;a=a.value;c._lazilyCreateChooser(b);c._choosers[b].addEstimate(a.duration,
a.size)});a.mergeMap(function(a){return a}).takeUntil(this._dispose$).subscribe(function(a){var b=a.type,d=a.value;c._lazilyCreateChooser(b);switch(a.event){case "requestBegin":c._choosers[b].addPendingRequest(d.id,a);break;case "requestEnd":c._choosers[b].removePendingRequest(d.id);break;case "progress":c._choosers[b].addRequestProgress(d.id,a)}})}a.prototype.get$=function(a,b,e){void 0===e&&(e=[]);this._lazilyCreateChooser(a);return this._choosers[a].get$(b,e)};a.prototype.setManualBitrate=function(a,
b){var c=this._choosers[a];c?c.manualBitrate$.next(b):this._chooserInstanceOptions.initialBitrates[a]=b};a.prototype.setMaxAutoBitrate=function(a,b){var c=this._choosers[a];c?c.maxAutoBitrate$.next(b):this._chooserInstanceOptions.maxAutoBitrates[a]=b};a.prototype.getManualBitrate=function(a){var c=this._choosers[a];return c?c.manualBitrate$.getValue():this._chooserInstanceOptions.manualBitrates[a]};a.prototype.getMaxAutoBitrate=function(a){var c=this._choosers[a];return c?c.maxAutoBitrate$.getValue():
this._chooserInstanceOptions.maxAutoBitrates[a]};a.prototype.dispose=function(){var a=this;Object.keys(this._choosers).forEach(function(c){a._choosers[c].dispose()});this._chooserInstanceOptions=e;this._choosers={};this._dispose$.next();this._dispose$.complete()};a.prototype._lazilyCreateChooser=function(a){if(!this._choosers[a]){var c=this._choosers;var b=this._chooserInstanceOptions;b=new k.default({limitWidth$:b.limitWidth[a],throttle$:b.throttle[a],initialBitrate:b.initialBitrates[a],manualBitrate:b.manualBitrates[a],
maxAutoBitrate:b.maxAutoBitrates[a]});c[a]=b}};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(a){this._weakMap=new WeakMap;this._fn=a}a.prototype.get=function(a){var b=this._weakMap.get(a);if(b)return b;b=this._fn(a);this._weakMap.set(a,b);return b};a.prototype.destroy=function(a){this._weakMap.delete(a)};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(14),e=a(41);b.default=
function(a){var c=!1;return function(){for(var b=[],l=0;l<arguments.length;l++)b[l]=arguments[l];if(c)return h.Observable.empty();c=!0;return k.default(a.apply(void 0,b)).do(e.default,function(){return c=!1},function(){return c=!1})}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(7),e=a(2),g=a(1),c=a(190),d=a(189),l=a(15),n=a(6),m=a(188),t=a(84),u=a(51),p=a(173),q=a(36),r=a(134),w=a(131),v=a(130),x=a(129),z=a(128),A=a(127),y=a(126),C=a(72),E=a(125);b.SegmentBookkeeper=
E.default;var G=a(71),I=a(70),H=a(34),D=a(69);b.default=function(a){function b(a,c){v.setDurationToMediaSource(a,c.getDuration());g.default.debug("calculating initial time");var b=A.default(c,S);g.default.debug("initial time calculated:",b);var d=c.getPeriodForTime(b);if(null==d)throw new n.MediaError("MEDIA_STARTING_TIME_NOT_FOUND",null,!0);var e=D.default(L,b,B),l=e.loadAndPlay$;e=w.default(c,N,e.initialSeek$,b);b=new k.Subject;var F=new k.Subject,z=new p.SegmentPipelinesManager(T,F,b,O);b=new m.default(F,
b,f);F=h.Observable.combineLatest(N,Q).map(function(a){var b=a[0];return{bufferGap:b.bufferGap,duration:b.duration,isLive:c.isLive,position:b.currentTime,speed:a[1]}});F=new t.default(b,F);var J=new q.default(L,a),K=new k.Subject,E=c.isLive?y.default(L,c,U):h.Observable.of;d=r.default({manifest:c,period:d},e,X,F,J,z,ca,da,{maxRetry:M.segmentRetry,maxRetryOffline:M.offlineRetry,textTrackOptions:Y},O).mergeMap(function(c){switch(c.type){case "end-of-stream":return x.maintainEndOfStream(a).ignoreElements().takeUntil(K);
case "resume-stream":return K.next(null),h.Observable.empty();default:return E(c)}});e=u.default(L,P,O);z=C.default(L);F=G.default(L,Q,N,{pauseWhenStalled:!0}).map(H.default.speedChanged);var R=I.default(L,N).map(H.default.stalled);b=h.Observable.of(H.default.manifestReady(b,c));l=l.mapTo(H.default.loaded());return h.Observable.merge(b,l,d,e,z,F,R).finally(function(){J.disposeAll()})}var f=a.adaptiveOptions,B=a.autoPlay,K=a.bufferOptions,N=a.clock$,P=a.keySystems,M=a.networkConfig,Q=a.speed$,S=a.startAt,
V=a.supplementaryImageTracks,W=a.supplementaryTextTracks,Y=a.textTrackOptions,T=a.transport,aa=a.url,L=a.videoElement,X=K.wantedBufferAhead$,Z=K.maxBufferAhead$,ba=K.maxBufferBehind$,O=new k.Subject,U=c.default(p.createManifestPipeline(T,{maxRetry:null!=M.manifestRetry?M.manifestRetry:e.default.DEFAULT_MAX_MANIFEST_REQUEST_RETRY,maxRetryOffline:null!=M.offlineRetry?M.offlineRetry:e.default.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR},O,W,V)),da=new d.default(function(a){return z.default({queuedSourceBuffer:a,
clock$:N.map(function(a){return a.currentTime}),maxBufferBehind$:ba,maxBufferAhead$:Z})}),ca=new d.default(function(){return new E.default});a=v.default(L).mergeMap(function(a){return h.Observable.combineLatest(U(aa),l.onSourceOpen$(a).take(1)).mergeMap(function(c){return b(a,c[0])})});K=O.map(H.default.warning);return h.Observable.merge(a,K)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(39),k=a(55);f=function(){function a(){this._namedTypeData={};this._unnamedTypeData=
new k.default}a.prototype.has=function(a,c){return c?this._namedTypeData[c]?this._namedTypeData[c].test(h.default(a)):!1:this._unnamedTypeData.test(h.default(a))};a.prototype.add=function(a,c){this.has(a,c)||(c?(this._namedTypeData[c]||(this._namedTypeData[c]=new k.default),this._namedTypeData[c].add(h.default(a))):this._unnamedTypeData.add(h.default(a)))};a.prototype.remove=function(a,c){if(c){if(!this._namedTypeData[c])return!1;a=h.default(a);c=this._namedTypeData[c];if(c.test(a))return c.remove(a),
!0}else if(a=h.default(a),this._unnamedTypeData.test(a))return this._unnamedTypeData.remove(a),!0;return!1};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(){this._state=new WeakMap}a.prototype.setState=function(a,b){this._state.set(a,b)};a.prototype.getState=function(a){return this._state.get(a)||null};a.prototype.clearState=function(a){this._state.set(a,null)};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",
{value:!0});b.KEY_STATUS_ERRORS={expired:!0,"internal-error":!0}},function(f,b,a){function h(a,c){var b=0;return function(){b&&clearTimeout(b);b=window.setTimeout(a,c)}}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(87);b.retryObsWithBackoff=function(a,c){var b=c.retryDelay,l=c.totalRetry,g=c.shouldRetry,f=c.resetDelay,t=c.errorSelector,u=c.onRetry,p=0,q;null!=f&&0<f&&(q=h(function(){p=0},f));return a.catch(function(a,c){if(g&&!g(a)||p++>=l){if(t)throw t(a,p);throw a;}u&&u(a,p);a=
e.getBackedoffDelay(b,p);return k.Observable.timer(a).mergeMap(function(){q&&q();return c})})};b.retryFuncWithBackoff=function(a,c){function b(){return k.Observable.create(function(c){c.next(a());c.complete()}).catch(function(a){if(f&&!f(a)||q++>=g){if(u)throw u(a,q);throw a;}p&&p(a,q);a=e.getBackedoffDelay(l,q);return k.Observable.timer(a).mergeMap(function(){r&&r();return b()})})}var l=c.retryDelay,g=c.totalRetry,f=c.shouldRetry,t=c.resetDelay,u=c.errorSelector,p=c.onRetry,q=0,r;null!=t&&0<t&&(r=
h(function(){q=0},t));return b()};b.retryableFuncWithBackoff=function(a,c){var b=c.retryDelay,l=c.totalRetry,g=c.shouldRetry,f=c.resetDelay,t=c.errorSelector,u=c.onRetry,p=0,q;null!=f&&0<f&&(q=h(function(){p=0},f));return function w(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(void 0,c).catch(function(a){if(g&&!g(a)||p++>=l){if(t)throw t(a,p);throw a;}u&&u(a,p);a=e.getBackedoffDelay(b,p);return k.Observable.timer(a).mergeMap(function(){q&&q();return w.apply(void 0,c)})})}}},
function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(99),e=a(15),g=a(6),c=a(14),d=a(1),l=a(195),n=a(50),m=a(194);b.default=function(a,b,f){function t(a,c){return g.isKnownError(a)&&a.type===g.ErrorTypes.ENCRYPTED_MEDIA_ERROR?(a.fatal=c,a):new g.EncryptedMediaError("KEY_LOAD_ERROR",a,c)}d.default.debug("eme: handle message events",a);var u={totalRetry:2,retryDelay:200,errorSelector:function(a){return t(a,!0)},onRetry:function(a){return f.next(t(a,!1))}},p=e.onKeyError$(a).map(function(a){throw new g.EncryptedMediaError("KEY_ERROR",
a,!0);}),v=e.onKeyStatusesChange$(a).mergeMap(function(e){d.default.debug("eme: keystatuseschange event",a,e);a.keyStatuses.forEach(function(a,c){if(m.KEY_STATUS_ERRORS[c])throw new g.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",c,!0);if(m.KEY_STATUS_ERRORS[a])throw new g.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",a,!0);});return n.default(function(){return b&&b.onKeyStatusesChange?c.default(b.onKeyStatusesChange(e,a)):h.Observable.empty()}).catch(function(a){throw new g.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",
a,!0);}).map(function(a){return{type:"key-status-change",value:{license:a}}})}),x=e.onKeyMessage$(a).mergeMap(function(e){var f=new Uint8Array(e.message),n=e.messageType||"license-request";d.default.debug("eme: event message type "+n,a,e);e=h.Observable.defer(function(){var a=b.getLicense(f,n);return c.default(a).timeout(1E4).catch(function(a){throw a instanceof k.TimeoutError?new g.EncryptedMediaError("KEY_LOAD_TIMEOUT",null,!1):a;})});return l.retryObsWithBackoff(e,u).map(function(a){return{type:n,
value:{license:a}}})});v=h.Observable.merge(x,v).concatMap(function(b){d.default.debug("eme: update session",b);var e=b.value.license;return c.default(a.update(e)).catch(function(a){throw new g.EncryptedMediaError("KEY_UPDATE_ERROR",a,!0);}).mapTo({type:b.type,value:{session:a,license:e}})});p=h.Observable.merge(v,p);return a.closed?p.takeUntil(c.default(a.closed)):p}},function(f,b,a){function h(a,b){return k.Observable.defer(function(){c.default.debug("eme: load persisted session",a);return g.default(b.load(a))})}
Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(13);a(4);var g=a(14),c=a(1),d=a(88);b.default=function(a,b,g){return k.Observable.defer(function(){var l=g.keySystemOptions,f=g.sessionsStore,n=g.sessionStorage,m=g.mediaKeySystemAccess.getConfiguration().sessionTypes,r=(m=m&&e.default(m,"persistent-license"))&&n&&l.persistentLicense?"persistent-license":"temporary";c.default.debug("eme: create a new "+r+" session");var w=f.createSession(a,b,r);if(!m||!n||!l.persistentLicense)return k.Observable.of({type:"created-session",
value:{mediaKeySession:w,sessionType:r}});l=n.get(a,b);if(!l)return k.Observable.of({type:"created-session",value:{mediaKeySession:w,sessionType:r}});var v=function(){c.default.info("eme: removing previous persistent session.");null!==n.get(a,b)&&n.delete(a,b);return f.closeSession(w).map(function(){return{type:"created-session",value:{mediaKeySession:f.createSession(a,b,r),sessionType:r}}})};return h(l.sessionId,w).mergeMap(function(e){if(!e)return c.default.warn("eme: no data stored for the loaded session"),
n.delete(a,b),k.Observable.of({type:"created-session",value:{mediaKeySession:w,sessionType:r}});if(e&&d.default(w))return n.add(a,b,w),c.default.info("eme: succeeded to load persistent session."),k.Observable.of({type:"loaded-persistent-session",value:{mediaKeySession:w,sessionType:r}});c.default.warn("eme: previous persistent session not usable anymore.");return v()}).catch(function(){c.default.warn("eme: unable to load persistent session.");return v()})})}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var h=a(0),k=a(5);f=a(2);var e=a(1),g=a(197),c=a(88),d=f.default.EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS;b.default=function(a,b,f){return h.Observable.defer(function(){var l=k.getInitData(a),n=l.initData,m=l.initDataType;if(b.has(n,m))return e.default.debug("init data already received. Skipping it."),h.Observable.empty();b.add(n,m);l=null;var q=f.sessionsStore,r=q.get(n,m);if(null!=r){l=r.session;if(c.default(l))return e.default.debug("eme: reuse loaded session",l.sessionId),
h.Observable.of({type:"loaded-open-session",value:{mediaKeySession:l,sessionType:r.sessionType,initData:n,initDataType:m}});f.sessionStorage&&f.sessionStorage.delete(new Uint8Array(n),m)}return(l?q.closeSession(l):h.Observable.of(null)).mergeMap(function(){var a=[],c=q.getAll().slice();if(0<d&&d<=c.length)for(var b=0;b<d-c.length+1;b++)a.push(q.closeSession(c[b].session));return h.Observable.merge.apply(h.Observable,a).ignoreElements().concat(g.default(n,m,f).map(function(a){return{type:a.type,value:{mediaKeySession:a.value.mediaKeySession,
sessionType:a.value.sessionType,initData:n,initDataType:m}}}))})})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),k=a(4),e=a(39),g=a(1);f=function(){function a(a){k.default(null!=a,"no licenseStorage given for keySystem with persistentLicense");k.assertInterface(a,{save:"function",load:"function"},"licenseStorage");this._entries=[];this._storage=a;try{this._entries=this._storage.load(),k.default(Array.isArray(this._entries))}catch(l){g.default.warn("eme-persitent-store: could not get entries from license storage",
l),this.dispose()}}a.prototype.get=function(a,c){var b=e.default(a);return h(this._entries,function(a){return a.initData===b&&a.initDataType===c})||null};a.prototype.add=function(a,c,b){var d=b&&b.sessionId;if(d){var l=this.get(a,c);l&&l.sessionId===d||(l&&this.delete(a,c),g.default.info("eme-persitent-store: add new session",d,b),this._entries.push({sessionId:d,initData:e.default(a),initDataType:c}),this._save())}};a.prototype.delete=function(a,c){var b=e.default(a);if(a=h(this._entries,function(a){return a.initData===
b&&a.initDataType===c}))g.default.warn("eme-persitent-store: delete session from store",a),a=this._entries.indexOf(a),this._entries.splice(a,1),this._save()};a.prototype.dispose=function(){this._entries=[];this._save()};a.prototype._save=function(){try{this._storage.save(this._entries)}catch(d){g.default.warn("eme-persitent-store: could not save licenses in localStorage")}};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(9),k=a(0),e=a(6),g=a(14),c=
a(39),d=a(1);f=function(){function a(a){this._mediaKeys=a;this._entries=[]}a.prototype.getAll=function(){return this._entries.map(function(a){return{session:a.session,sessionType:a.sessionType}})};a.prototype.get=function(a,b){var d=c.default(a);return(a=h(this._entries,function(a){return a.initData===d&&a.initDataType===b}))?{session:a.session,sessionType:a.sessionType}:null};a.prototype.createSession=function(a,b,l){var g=this;if(this.get(a,b))throw new e.EncryptedMediaError("MULTIPLE_SESSIONS_SAME_INIT_DATA",
Error("This initialization data was already stored."),!0);var f=this._mediaKeys.createSession(l);a={session:f,sessionType:l,initData:c.default(a),initDataType:b};null!==f.closed&&f.closed.then(function(){g._delete(f)}).catch(function(a){d.default.warn("session.closed rejected: "+a)});d.default.debug("eme-mem-store: add session",a);this._entries.push(a);return f};a.prototype.closeSession=function(a){var c=this;return k.Observable.defer(function(){var b=c._delete(a);if(null==b)return k.Observable.of(null);
d.default.debug("eme-mem-store: close session",b);return g.default(b.close()).mapTo(null).catch(function(){return k.Observable.of(null)})})};a.prototype.closeAllSessions=function(){var a=this;return k.Observable.defer(function(){var c=a._entries.map(function(c){return a.closeSession(c.session)});a._entries=[];return k.Observable.merge.apply(k.Observable,c).ignoreElements().concat(k.Observable.of(null))})};a.prototype._delete=function(a){var c=h(this._entries,function(c){return c.session===a});if(!c)return null;
var b=c.session;d.default.debug("eme-mem-store: delete session",c);c=this._entries.indexOf(c);this._entries.splice(c,1);return b};return a}();b.default=f},function(f,b,a){function h(a,b){return e.Observable.defer(function(){return c.default(a.setServerCertificate(b)).catch(function(a){throw new g.EncryptedMediaError("LICENSE_SERVER_CERTIFICATE_ERROR",a,!0);})}).mapTo(null)}function k(a,c,b){return"function"===typeof a.setServerCertificate?h(a,c).catch(function(a){a.fatal=!1;b.next(a);return e.Observable.of(null)}):
e.Observable.of(null)}Object.defineProperty(b,"__esModule",{value:!0});var e=a(0),g=a(6),c=a(14);b.setServerCertificate=h;b.default=k;b.trySettingServerCertificate=k},function(f,b,a){function h(a,b,d){var e=b.getConfiguration();return c.shouldRenewMediaKeys()||!e?null:(a=a.filter(function(a){return a.type!==d.type||a.persistentLicense&&"required"!==e.persistentState||a.distinctiveIdentifierRequired&&"required"!==e.distinctiveIdentifier?!1:!0})[0])?{keySystemOptions:a,keySystemAccess:b}:null}function k(a){for(var c=
0,b=Object.keys(t);c<b.length;c++){var d=b[c];if(l.default(t[d],a))return d}}function e(a,c){var b=["temporary"],d="optional",e="optional";c.persistentLicense&&(d="required",b.push("persistent-license"));c.persistentStateRequired&&(d="required");c.distinctiveIdentifierRequired&&(e="required");var l=c.videoRobustnesses||("widevine"===a?m:[]);a=c.audioRobustnesses||("widevine"===a?m:[]);l.length||l.push(void 0);a.length||a.push(void 0);l=l.map(function(a){return{contentType:'video/mp4;codecs="avc1.4d401e"',
robustness:a}});a=a.map(function(a){return{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:a}});return[{initDataTypes:["cenc"],videoCapabilities:l,audioCapabilities:a,distinctiveIdentifier:e,persistentState:d,sessionTypes:b}]}Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),c=a(5);f=a(2);var d=a(6),l=a(13),n=a(1),m=f.default.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,t=f.default.EME_KEY_SYSTEMS;b.default=function(a,b,l){return g.Observable.defer(function(){var f=l.getState(a);if(f&&(f=h(b,
f.mediaKeySystemAccess,f.keySystemOptions)))return n.default.debug("eme: found cached compatible keySystem",f),g.Observable.of({type:"reuse-media-key-system-access",value:{mediaKeySystemAccess:f.keySystemAccess,options:f.keySystemOptions}});var m=b.reduce(function(a,c){var b=t[c.type]?t[c.type].map(function(a){return{keyName:c.type,keyType:a,keySystemOptions:c}}):[{keyName:k(c.type)||"",keyType:c.type,keySystemOptions:c}];return a.concat(b)},[]);return g.Observable.create(function(a){function b(f){if(!l)if(f>=
m.length)a.error(new d.EncryptedMediaError("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var k=m[f],h=k.keyType,t=k.keySystemOptions,u=e(k.keyName,t);n.default.debug("eme: request keysystem access "+h+","+(f+1+" of "+m.length),u);if(null==c.requestMediaKeySystemAccess)throw Error("requestMediaKeySystemAccess is not implemented in your browser.");g=c.requestMediaKeySystemAccess(h,u).subscribe(function(c){n.default.info("eme: found compatible keysystem",h,u);a.next({type:"create-media-key-system-access",
value:{options:t,mediaKeySystemAccess:c}});a.complete()},function(){n.default.debug("eme: rejected access to keysystem",h,u);g=null;b(f+1)})}}var l=!1,g;b(0);return function(){l=!0;g&&g.unsubscribe()}})})}},function(f,b,a){function h(a){if(!a.persistentLicense)return null;a=a.licenseStorage;if(!a)throw new e.EncryptedMediaError("INVALID_KEY_SYSTEM",Error("no license storage found for persistent license."),!0);c.default.info("set the given license storage");return new m.default(a)}Object.defineProperty(b,
"__esModule",{value:!0});var k=a(0),e=a(6),g=a(14),c=a(1),d=a(202),l=a(201),n=a(200),m=a(199);b.default=function(a,c,b,e){return d.default(a,c,b).mergeMap(function(c){var d=c.value,f=d.options,m=d.mediaKeySystemAccess;d=b.getState(a);return(null!=d&&"reuse-media-key-system-access"===c.type?k.Observable.of({mediaKeys:d.mediaKeys,sessionsStore:d.sessionsStore}):g.default(m.createMediaKeys()).map(function(a){return{mediaKeys:a,sessionsStore:new n.default(a)}})).mergeMap(function(a){var c=a.mediaKeys;
a=a.sessionsStore;var b=f.serverCertificate;return(null!=b?l.default(c,b,e):k.Observable.of(null)).mapTo({mediaKeySystemAccess:m,keySystemOptions:f,mediaKeys:c,sessionsStore:a,sessionStorage:h(f)})})})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(6),e=a(14);b.default=function(a,c,b){return h.Observable.defer(function(){return e.default(a.generateRequest(b||"",c)).catch(function(a){throw new k.EncryptedMediaError("KEY_GENERATE_REQUEST_ERROR",a,!1);}).mapTo(null)})}},
function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(5);b.default=function(a,b){return h.Observable.defer(function(){var c=b.getState(a);if(!c)return h.Observable.of(null);c=c.sessionsStore;b.clearState(a);return c.closeAllSessions().mergeMapTo(k.setMediaKeys(a,null))})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(5),e=a(1);b.default=function(a,c,b){return h.Observable.defer(function(){var d=b.getState(c),g=a.mediaKeys,f=a.sessionsStore;
b.setState(c,{keySystemOptions:a.keySystemOptions,mediaKeySystemAccess:a.mediaKeySystemAccess,mediaKeys:g,sessionsStore:f});return(d&&d.sessionsStore!==f?d.sessionsStore.closeAllSessions():h.Observable.of(null)).mergeMap(function(){if(c.mediaKeys===g)return h.Observable.of(null);e.default.debug("eme: set mediakeys");return k.setMediaKeys(c,g)})})}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(8),k=a(0),e=a(4),g=a(94),c=a(20),d=a(30),l=a(23),n=a(91),m=a(52);b.loader=function(a){var b=
a.segment,d=a.representation,e=b.media,g=b.range;a=b.indexRange;var f=b.isInit,h=m.isMP4EmbeddedTrack(d)?"arraybuffer":"text";if(f&&!(e||g||a))return k.Observable.of({type:"data",value:{responseData:null}});b=e?m.replaceTokens(e,b,d):"";b=c.resolveURL(d.baseURL,b);if(g&&a&&g[1]===a[0]-1)return l.default({url:b,responseType:h,headers:{Range:m.byteRange([g[0],a[1]])}});g=l.default({url:b,responseType:h,headers:g?{Range:m.byteRange(g)}:null});if(!a)return g;a=l.default({url:b,responseType:h,headers:{Range:m.byteRange(a)}});
return k.Observable.merge(g,a)};b.parser=function(a){var c=a.response,b=a.segment,l=a.representation,f=a.init,t=a.adaptation.language,v=b.isInit,x=b.indexRange;if(null==c.responseData)return k.Observable.of({segmentData:null,segmentInfos:0<b.timescale?{duration:b.isInit?0:b.duration,time:b.isInit?-1:b.time,timescale:b.timescale}:null});var z;(a=m.isMP4EmbeddedTrack(l))?(e.default(c.responseData instanceof ArrayBuffer),c=new Uint8Array(c.responseData),(x=d.parseSidx(c,x?x[0]:0))&&(z=x),b=v?{time:-1,
duration:0,timescale:b.timescale}:n.default(b,c,x,f)):(e.default("string"===typeof c.responseData),c=c.responseData,b=v?{time:-1,duration:0,timescale:b.timescale}:{time:b.time||0,duration:b.duration,timescale:b.timescale});if(v)a&&(c=d.getMDHDTimescale(c),0<c&&(b={time:-1,duration:0,timescale:c})),c=null;else if(e.default(null!=b),f={start:b.time,end:b.time+(b.duration||0),language:t,timescale:b.timescale,timeOffset:0},a){t=l.codec;a=void 0;switch((void 0===t?"":t).toLowerCase()){case "stpp":a="ttml";
break;case "wvtt":a="vtt"}if(!a)throw Error("The codec used for the subtitle is not managed yet.");c=h({data:g.stringFromUTF8(d.getMDAT(c)),type:a},{timescale:1},f)}else{a=void 0;t=l.mimeType;t=void 0===t?"":t;switch(l.mimeType){case "application/ttml+xml":a="ttml";break;case "application/x-sami":case "application/smil":a="sami";break;case "text/vtt":a="vtt"}if(!a)if(a=l.codec,"srt"===(void 0===a?"":a).toLowerCase())a="srt";else throw Error("could not find a text-track parser for the type "+t);c=
h({data:c,type:a},{timescale:1},f)}z&&m.addNextSegments(l,z,b);return k.Observable.of({segmentData:c,segmentInfos:b})}},function(f,b,a){function h(a){var b=a.url;a=a.segment;var d=a.range;a=a.indexRange;if(d&&a&&d[1]===a[0]-1)return g.default({url:b,responseType:"arraybuffer",headers:{Range:c.byteRange([d[0],a[1]])}});d=d?{Range:c.byteRange(d)}:null;d=g.default({url:b,responseType:"arraybuffer",headers:d});return a?(b=g.default({url:b,responseType:"arraybuffer",headers:{Range:c.byteRange(a)}}),k.Observable.merge(d,
b)):d}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(20),g=a(23),c=a(52);b.default=function(a){return function(b){var d=b.adaptation,l=b.manifest,g=b.period,f=b.representation;b=b.segment;var p=b.media,q=b.range,r=b.indexRange;if(b.isInit&&!(p||q||r))return k.Observable.empty();p=p?c.replaceTokens(p,b,f):"";p=e.resolveURL(f.baseURL,p);var w={adaptation:d,manifest:l,period:g,representation:f,segment:b,transport:"dash",url:p};return a?k.Observable.create(function(c){var b=!1,d=!1,e=
a(w,{reject:function(a){void 0===a&&(a={});d||(b=!0,c.error(a))},resolve:function(a){d||(b=!0,c.next({type:"response",value:{responseData:a.data,size:a.size,duration:a.duration}}),c.complete())},fallback:function(){d=!0;h(w).subscribe(c)}});return function(){b||d||"function"!==typeof e||e()}}):h(w)}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1);b.default=function(a,b){for(var e,c,d,l=0;l<a.attributes.length;l++){var f=a.attributes[l];switch(f.name){case "t":e=parseInt(f.value,
10);break;case "d":c=parseInt(f.value,10);break;case "r":d=parseInt(f.value,10)}}null==e&&b&&null!=b.d&&(e=b.ts+b.d*(b.r+1));if(null==e||isNaN(e)||null!=c&&isNaN(c)||null!=d&&isNaN(d))h.default.warn('DASH: A "S" Element could not have been parsed.');else return{ts:e,d:c,r:d||0}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(209);b.default=function(a){var b=[];a=a.childNodes;for(var f=0;f<a.length;f++)if(a[f].nodeType===Node.ELEMENT_NODE){var c=a[f];"S"===c.nodeName&&(c=
h.default(c,b[b.length-1]||null))&&b.push(c)}return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k=a(12);b.default=function(a){for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];switch(d.name){case "media":b.media=d.value;break;case "indexRange":var e=k.parseByteRange(d.value)||void 0;e?b.indexRange=e:h.default.warn('DASH: invalid indexRange ("'+d.value+'")');break;case "index":b.index=d.value;break;case "mediaRange":(e=k.parseByteRange(d.value)||
void 0)?b.mediaRange=e:h.default.warn('DASH: invalid mediaRange ("'+d.value+'")')}}return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k=a(12);b.default=function(a){for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];switch(d.name){case "range":var e=k.parseByteRange(d.value)||void 0;e?b.range=e:h.default.warn('DASH: invalid range ("'+d.value+'")');break;case "sourceURL":b.media=d.value}}return b}},function(f,b,a){Object.defineProperty(b,"__esModule",
{value:!0});var h=a(1),k=a(12),e=a(37),g=a(90),c=a(89);b.createRepresentationIntermediateRepresentation=function(a){for(var b=a.childNodes,d={baseURL:""},f=0;f<b.length;f++)if(b[f].nodeType===Node.ELEMENT_NODE){var t=b[f];switch(t.nodeName){case "BaseURL":d.baseURL=t.textContent||"";break;case "SegmentBase":d.segmentBase=e.default(t);break;case "SegmentList":d.segmentList=g.default(t);break;case "SegmentTemplate":d.segmentTemplate=c.default(t)}}b={};for(f=0;f<a.attributes.length;f++)switch(t=a.attributes[f],
t.name){case "audioSamplingRate":b.audioSamplingRate=t.value;break;case "bandwidth":var u=parseInt(t.value,10);isNaN(u)?h.default.warn('DASH: invalid bandwidth ("'+t.value+'")'):b.bitrate=u;break;case "codecs":b.codecs=t.value;break;case "codingDependency":b.codingDependency=k.parseBoolean(t.value);break;case "frameRate":u=k.parseFrameRate(t.value);isNaN(u)?h.default.warn('DASH: invalid frameRate ("'+t.value+'")'):b.frameRate=u;break;case "height":u=parseInt(t.value,10);isNaN(u)?h.default.warn('DASH: invalid height ("'+
t.value+'")'):b.height=u;break;case "id":b.id=t.value;break;case "maxPlayoutRate":u=parseFloat(t.value);isNaN(u)?h.default.warn('DASH: invalid maxPlayoutRate ("'+t.value+'")'):b.maxPlayoutRate=u;break;case "maximumSAPPeriod":u=parseFloat(t.value);isNaN(u)?h.default.warn('DASH: invalid maximumSAPPeriod ("'+t.value+'")'):b.maximumSAPPeriod=u;break;case "mimeType":b.mimeType=t.value;break;case "profiles":b.profiles=t.value;break;case "qualityRanking":u=parseInt(t.value,10);isNaN(u)?h.default.warn('DASH: invalid qualityRanking ("'+
t.value+'")'):b.qualityRanking=u;break;case "segmentProfiles":b.segmentProfiles=t.value;break;case "width":u=parseInt(t.value,10),isNaN(u)?h.default.warn('DASH: invalid width ("'+t.value+'")'):b.width=u}return{children:d,attributes:b}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(12);b.default=function(a){return h.parseScheme(a)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(12);b.default=function(a){for(var b={},f=0;f<a.attributes.length;f++){var c=
a.attributes[f];switch(c.name){case "id":b.id=c.value;break;case "lang":b.language=c.value;break;case "contentType":b.contentType=c.value;break;case "par":b.par=h.parseRatio(c.value)}}return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k=a(12),e=a(215),g=a(214),c=a(213),d=a(37),l=a(90),n=a(89);b.createAdaptationSetIntermediateRepresentation=function(a){for(var b=a.childNodes,f={baseURL:"",representations:[]},m=0;m<b.length;m++)if(b[m].nodeType===Node.ELEMENT_NODE){var q=
b[m];switch(q.nodeName){case "Accessibility":f.accessibility=k.parseScheme(q);break;case "BaseURL":f.baseURL=q.textContent||"";break;case "ContentComponent":f.contentComponent=e.default(q);break;case "Representation":q=c.createRepresentationIntermediateRepresentation(q);f.representations.push(q);break;case "Role":f.role=k.parseScheme(q);break;case "SegmentBase":f.segmentBase=d.default(q);break;case "SegmentList":f.segmentList=l.default(q);break;case "SegmentTemplate":f.segmentTemplate=n.default(q);
break;case "ContentProtection":f.contentProtection=g.default(q)}}b={};for(m=0;m<a.attributes.length;m++)switch(q=a.attributes[m],q.name){case "id":b.id=q.value;break;case "group":var r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid group ("'+q.value+'")'):b.group=r;break;case "lang":b.language=q.value;break;case "contentType":b.contentType=q.value;break;case "par":b.par=q.value;break;case "minBandwidth":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid minBandwidth ("'+q.value+
'")'):b.minBitrate=r;break;case "maxBandwidth":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid maxBandwidth ("'+q.value+'")'):b.maxBitrate=r;break;case "minWidth":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid minWidth ("'+q.value+'")'):b.minWidth=r;break;case "maxWidth":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid maxWidth ("'+q.value+'")'):b.maxWidth=r;break;case "minHeight":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid minHeight ("'+
q.value+'")'):b.minHeight=r;break;case "maxHeight":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid maxHeight ("'+q.value+'")'):b.maxHeight=r;break;case "minFrameRate":r=k.parseFrameRate(q.value);isNaN(r)?h.default.warn('DASH: invalid minFrameRate ("'+q.value+'")'):b.minFrameRate=r;break;case "maxFrameRate":r=k.parseFrameRate(q.value);isNaN(r)?h.default.warn('DASH: invalid maxFrameRate ("'+q.value+'")'):b.maxFrameRate=r;break;case "segmentAlignment":r=k.parseIntOrBoolean(q.value);"number"===
typeof r&&isNaN(r)?h.default.warn('DASH: invalid segmentAlignment ("'+q.value+'")'):b.segmentAlignment=r;break;case "subsegmentAlignment":r=k.parseIntOrBoolean(q.value);"number"===typeof r&&isNaN(r)?h.default.warn('DASH: invalid subsegmentAlignment ("'+q.value+'")'):b.subsegmentAlignment=r;break;case "bitstreamSwitching":b.bitstreamSwitching=k.parseBoolean(q.value);break;case "audioSamplingRate":b.audioSamplingRate=q.value;break;case "codecs":b.codecs=q.value;break;case "codingDependency":b.codingDependency=
k.parseBoolean(q.value);break;case "frameRate":r=k.parseFrameRate(q.value);isNaN(r)?h.default.warn('DASH: invalid frameRate ("'+q.value+'")'):b.frameRate=r;break;case "height":r=parseInt(q.value,10);isNaN(r)?h.default.warn('DASH: invalid height ("'+q.value+'")'):b.height=r;break;case "maxPlayoutRate":r=parseFloat(q.value);isNaN(r)?h.default.warn('DASH: invalid maxPlayoutRate ("'+q.value+'")'):b.maxPlayoutRate=r;break;case "maximumSAPPeriod":r=parseFloat(q.value);isNaN(r)?h.default.warn('DASH: invalid maximumSAPPeriod ("'+
q.value+'")'):b.maximumSAPPeriod=r;break;case "mimeType":b.mimeType=q.value;break;case "profiles":b.profiles=q.value;break;case "segmentProfiles":b.segmentProfiles=q.value;break;case "width":r=parseInt(q.value,10),isNaN(r)?h.default.warn('DASH: invalid width ("'+q.value+'")'):b.width=r}return{children:f,attributes:b}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k=a(12),e=a(216);b.createPeriodIntermediateRepresentation=function(a){for(var c=a.childNodes,b="",l=[],f=
0;f<c.length;f++)if(c[f].nodeType===Node.ELEMENT_NODE){var g=c[f];switch(g.nodeName){case "BaseURL":b=g.textContent||"";break;case "AdaptationSet":g=e.createAdaptationSetIntermediateRepresentation(g),l.push(g)}}c={baseURL:b,adaptations:l};b={};for(l=0;l<a.attributes.length;l++)switch(f=a.attributes[l],f.name){case "id":b.id=f.value;break;case "start":g=k.parseDuration(f.value);isNaN(g)?h.default.warn("DASH: Unrecognized start in the mpd:",f.value):b.start=g;break;case "duration":g=k.parseDuration(f.value);
isNaN(g)?h.default.warn("DASH: Unrecognized duration in the mpd:",f.value):b.duration=g;break;case "bitstreamSwitching":b.bitstreamSwitching=k.parseBoolean(f.value)}return{children:c,attributes:b}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(12),k=a(217);b.createMPDIntermediateRepresentation=function(a){for(var b=a.childNodes,c="",d=[],e=[],f=0;f<b.length;f++)if(b[f].nodeType===Node.ELEMENT_NODE){var m=b[f];switch(m.nodeName){case "BaseURL":c=m.textContent||"";break;
case "Location":d.push(m.textContent||"");break;case "Period":m=k.createPeriodIntermediateRepresentation(m),e.push(m)}}b={baseURL:c,locations:d,periods:e};c={};for(d=0;d<a.attributes.length;d++)switch(e=a.attributes[d],e.name){case "id":c.id=e.value;break;case "profiles":c.profiles=e.value;break;case "type":c.type=e.value;break;case "availabilityStartTime":c.availabilityStartTime=+h.parseDateTime(e.value);break;case "availabilityEndTime":c.availabilityEndTime=+h.parseDateTime(e.value);break;case "publishTime":c.publishTime=
+h.parseDateTime(e.value);break;case "mediaPresentationDuration":c.duration=h.parseDuration(e.value);break;case "minimumUpdatePeriod":c.minimumUpdatePeriod=h.parseDuration(e.value);break;case "minBufferTime":c.minBufferTime=h.parseDuration(e.value);break;case "timeShiftBufferDepth":c.timeShiftBufferDepth=h.parseDuration(e.value);break;case "suggestedPresentationDelay":c.suggestedPresentationDelay=h.parseDuration(e.value);break;case "maxSegmentDuration":c.maxSegmentDuration=h.parseDuration(e.value);
break;case "maxSubsegmentDuration":c.maxSubsegmentDuration=h.parseDuration(e.value)}return{children:b,attributes:c}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(38);f=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return h.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){return h.getSegmentsFromTimeline(this._index,a,b)};a.prototype.shouldRefresh=
function(a,b){var c=this._index;a=c.timeline;var d=c.presentationTimeOffset;b=b*c.timescale-(void 0===d?0:d);a=a[a.length-1];if(!a)return!1;0>a.d&&(a={ts:a.ts,d:0,r:a.r});return!(b<=h.getTimelineRangeEnd(a))};a.prototype.getFirstPosition=function(){var a=this._index;if(a.timeline.length)return a.timeline[0].ts/a.timescale};a.prototype.getLastPosition=function(){var a=this._index;if(a.timeline.length)return h.getTimelineRangeEnd(a.timeline[a.timeline.length-1])/a.timescale};a.prototype.checkDiscontinuity=
function(a){var b=this._index,c=b.timeline;b=b.timescale;b=void 0===b?1:b;a*=b;if(0>=a)return-1;var d=this._index.timeline;var e=0;for(var f=d.length;e<f;){var k=e+f>>>1;d[k].ts<a?e=k+1:f=k}e=0<e?e-1:e;if(0>e||e>=c.length-1)return-1;f=c[e];if(-1===f.d)return-1;d=f.ts;f=h.getTimelineRangeEnd(f);c=c[e+1];return f!==c.ts&&a>=d&&a<=f&&f-a<b?c.ts/b:-1};a.prototype._update=function(a){this._index=a._index};a.prototype._addSegments=function(a,b){for(var c=0;c<a.length;c++){var d=void 0,e=this._index,f=a[c],
g=e.timeline,k=e.timescale,u=g.length,p=g[u-1];f=f.timescale===k?{time:f.time,duration:f.duration}:{time:f.time/f.timescale*k,duration:f.duration/f.timescale*k};b&&b.timescale&&(d=b.timescale===k?b.time:b.time/b.timescale*k);null!=d&&f.time===d?(d=f.time+f.duration,k=d-(p.ts+p.d*p.r),0>=k||(-1===p.d&&((u=g[u-2])&&u.d===k?(u.r++,g.pop()):p.d=k),e.timeline.push({d:-1,ts:d,r:0}))):f.time>=h.getTimelineRangeEnd(p)&&(p.d===f.duration?p.r++:e.timeline.push({d:f.duration,ts:f.time,r:0}))}};return a}();b.default=
f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(1);var h=a(38);f=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return h.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){var c=this._index;a=h.normalizeRange(c,a,b);var d=a.up;a=a.to;if(a<=d)return[];b=c.duration;var e=c.startNumber,f=c.timescale,g=c.media;c=c.presentationTimeOffset;for(var k=[];d<=a;d+=b){var u=
Math.floor(d/b)+(null==e?1:e);k.push({id:""+u,number:u,time:(u-(null==e?1:e))*b+(c||0),isInit:!1,duration:b,timescale:f,media:g})}return k};a.prototype.getFirstPosition=function(){};a.prototype.getLastPosition=function(){};a.prototype.shouldRefresh=function(){return!1};a.prototype.checkDiscontinuity=function(){return-1};a.prototype._addSegments=function(){};a.prototype._update=function(a){this._index=a._index};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});
a(1);var h=a(38);f=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return h.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){var c=this._index,d=h.normalizeRange(c,a,b);a=c.duration;b=c.list;c=c.timescale;var e=Math.min(b.length-1,Math.floor(d.to/a)),f=[];for(d=Math.floor(d.up/a);d<=e;)f.push({id:""+d,time:d*a,isInit:!1,range:b[d].mediaRange,duration:a,timescale:c,media:b[d].media}),
d++;return f};a.prototype.shouldRefresh=function(a,b){var c=this._index;a=c.list;var d=c.presentationTimeOffset;b=Math.floor((b*c.timescale-(void 0===d?0:d))/c.duration);return!(0<=b&&b<a.length)};a.prototype.getFirstPosition=function(){return 0};a.prototype.getLastPosition=function(){var a=this._index;return a.list.length*a.duration/a.timescale};a.prototype.checkDiscontinuity=function(){return-1};a.prototype._update=function(a){this._index=a._index};a.prototype._addSegments=function(){};return a}();
b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(38);f=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return h.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){return h.getSegmentsFromTimeline(this._index,a,b)};a.prototype.shouldRefresh=function(){return!1};a.prototype.getFirstPosition=function(){var a=this._index;if(a.timeline.length)return a.timeline[0].ts/
a.timescale};a.prototype.getLastPosition=function(){var a=this._index;if(a.timeline.length)return h.getTimelineRangeEnd(a.timeline[a.timeline.length-1])/a.timescale};a.prototype.checkDiscontinuity=function(){return-1};a.prototype._addSegments=function(a){for(var b=0;b<a.length;b++){var c=this._index,d=a[b];if(d.timescale!==c.timescale){var e=c.timescale;c.timeline.push({ts:d.time/d.timescale*e,d:d.duration/d.timescale*e,r:d.count||0,range:d.range})}else c.timeline.push({ts:d.time,d:d.duration,r:d.count||
0,range:d.range})}};a.prototype._update=function(a){this._index=a._index};return a}();b.default=f},function(f,b,a){function h(a,c,b,d,f){function l(a,c){var b=a.split("/")[0];if(e.default(r,b))return b;if("application/bif"===a)return"image";if("application/ttml+xml"===a)return"text";if("application/mp4"===a)return c&&"urn:mpeg:dash:role:2011"===c.schemeIdUri&&e.default(w,c.value)?"text":"metadata"}function g(a){switch(a.substr(0,3)){case "avc":case "hev":case "hvc":case "vp8":case "vp9":case "av1":return"video";
case "vtt":return"text";case "bif":return"image"}switch(a.substr(0,4)){case "mp4a":return"audio";case "wvtt":case "stpp":return"text"}}if(null!=a&&(a=l(a,f),null!=a))return a;if(null!=b&&(b=g(b),null!=b))return b;for(b=0;b<c.length;b++)if(a=c[b],null!=a&&(a=l(a,f),null!=a))return a;for(b=0;b<d.length;b++)if(c=d[b],null!=c&&(a=g(c),null!=a))return a;return"unknown"}Object.defineProperty(b,"__esModule",{value:!0});var k=a(2),e=a(13),g=a(19),c=a(29),d=a(1),l=a(20),n=a(12),m=a(222),t=a(221),u=a(220),
p=a(219),q=a(218),r=["audio","video","text","image"],w=["subtitle","caption"],v=function(a){if(a&&(a=(a.representations||[]).map(function(a){a=a.index.getLastPosition();return null!=a?a-10:void 0}),!a.some(function(a){return null==a})&&(a=Math.min.apply(Math,a),!isNaN(a))))return a};b.default=function(a,b){a=q.createMPDIntermediateRepresentation(a);var e=a.children,f=a.attributes,r=l.resolveURL(l.normalizeBaseURL(b),e.baseURL),w=[];a=function(a){var b=e.periods[a],k=l.resolveURL(r,b.children.baseURL),
B=void 0;null==b.attributes.id?(d.default.warn("DASH: No usable id found in the Period. Generating one."),B="gen-dash-period-"+g.default()):B=b.attributes.id;if(null!=b.attributes.start)var q=b.attributes.start;else if(0===a)q="static"===f.type||null==f.availabilityStartTime?0:f.availabilityStartTime;else{var v=w[a-1];if(null!=v.duration)q=v.start+v.duration;else throw Error("Not enough informations on the periods: cannot find start.");}v=void 0;if(null!=b.attributes.duration)v=b.attributes.duration;
else{var x=w[a+1];x&&null!=x.start?v=x.start-q:0===a&&f.duration&&!x&&(v=f.duration)}a=b.children.adaptations.map(function(a){var b=l.resolveURL(k,a.children.baseURL),e=a.children;if(null!=e.segmentBase)var f=new m.default(e.segmentBase,q);else if(null!=e.segmentList)f=new t.default(e.segmentList,q);else if(null!=e.segmentTemplate){var g=e.segmentTemplate;g.presentationTimeOffset=q*g.timescale;f="timeline"===g.indexType?new p.default(g,q):new u.default(g,q)}else f=new u.default({duration:Number.MAX_VALUE,
timescale:1,startNumber:0},q);g=a.children.representations.map(function(c){var e=l.resolveURL(b,c.children.baseURL);if(null==c.attributes.bitrate){d.default.warn("DASH: No usable bitrate found in the Representation.");var g=0}else g=c.attributes.bitrate;if(null!=c.children.segmentBase)var k=new m.default(c.children.segmentBase,q);else null!=c.children.segmentList?k=new t.default(c.children.segmentList,q):null!=c.children.segmentTemplate?(k=c.children.segmentTemplate,k="timeline"===k.indexType?new p.default(k,
q):new u.default(k,q)):k=f;e={bitrate:g,index:k,id:null!=c.attributes.id?c.attributes.id:c.attributes.bitrate+(null!=c.attributes.height?"-"+c.attributes.height:"")+(null!=c.attributes.width?"-"+c.attributes.width:"")+(null!=c.attributes.mimeType?"-"+c.attributes.mimeType:"")+(null!=c.attributes.codecs?"-"+c.attributes.codecs:""),baseURL:e};if(null!=c.attributes.codecs)var h=c.attributes.codecs;else null!=a.attributes.codecs&&(h=a.attributes.codecs);null!=h&&(e.codecs="mp4a.40.02"===h?"mp4a.40.2":
h);null!=c.attributes.audioSamplingRate?e.audioSamplingRate=c.attributes.audioSamplingRate:null!=a.attributes.audioSamplingRate&&(e.audioSamplingRate=a.attributes.audioSamplingRate);null!=c.attributes.codingDependency?e.codingDependency=c.attributes.codingDependency:null!=a.attributes.codingDependency&&(e.codingDependency=a.attributes.codingDependency);null!=c.attributes.frameRate?e.frameRate=c.attributes.frameRate:null!=a.attributes.frameRate&&(e.frameRate=a.attributes.frameRate);null!=c.attributes.height?
e.height=c.attributes.height:null!=a.attributes.height&&(e.height=a.attributes.height);null!=c.attributes.maxPlayoutRate?e.maxPlayoutRate=c.attributes.maxPlayoutRate:null!=a.attributes.maxPlayoutRate&&(e.maxPlayoutRate=a.attributes.maxPlayoutRate);null!=c.attributes.maximumSAPPeriod?e.maximumSAPPeriod=c.attributes.maximumSAPPeriod:null!=a.attributes.maximumSAPPeriod&&(e.maximumSAPPeriod=a.attributes.maximumSAPPeriod);null!=c.attributes.mimeType?e.mimeType=c.attributes.mimeType:null!=a.attributes.mimeType&&
(e.mimeType=a.attributes.mimeType);null!=c.attributes.profiles?e.profiles=c.attributes.profiles:null!=a.attributes.profiles&&(e.profiles=a.attributes.profiles);null!=c.attributes.qualityRanking&&(e.qualityRanking=c.attributes.qualityRanking);null!=c.attributes.segmentProfiles?e.segmentProfiles=c.attributes.segmentProfiles:null!=a.attributes.segmentProfiles&&(e.segmentProfiles=a.attributes.segmentProfiles);null!=c.attributes.width?e.width=c.attributes.width:null!=a.attributes.width&&(e.width=a.attributes.width);
return e});var B=a.attributes.mimeType,r=a.attributes.codecs,w=g.map(function(a){return a.mimeType}).filter(function(a){return null!=a}),v=g.map(function(a){return a.codecs}).filter(function(a){return null!=a});B=h(B||null,w,r||null,v,e.role||null);var F,x;"text"===B&&e.accessibility&&n.isHardOfHearing(e.accessibility)&&(F=!0);"audio"===B&&e.accessibility&&n.isVisuallyImpaired(e.accessibility)&&(x=!0);null!=a.attributes.id?e=a.attributes.id:(e=B,a.attributes.language&&(e+="-"+a.attributes.language),
F&&(e+="-cc"),x&&(e+="-ad"),a.attributes.contentType&&(e+="-"+a.attributes.contentType),a.attributes.codecs&&(e+="-"+a.attributes.codecs),a.attributes.mimeType&&(e+="-"+a.attributes.mimeType),a.attributes.frameRate&&(e+="-"+a.attributes.frameRate),e.length===B.length&&(e+=g.length?"-"+g[0].id:"-empty"),e="adaptation-"+e);g={id:e,representations:g,type:B};null!=a.attributes.language&&(g.language=a.attributes.language,g.normalizedLanguage=c.normalize(a.attributes.language));null!=F&&(g.closedCaption=
F);null!=x&&(g.audioDescription=x);return g});B={id:B,start:q,duration:v,adaptations:a};null!=b.attributes.bitstreamSwitching&&(B.bitstreamSwitching=b.attributes.bitstreamSwitching);w.push(B)};for(var x=0;x<e.periods.length;x++)a(x);b={availabilityStartTime:"static"===f.type||null==f.availabilityStartTime?0:f.availabilityStartTime,duration:null==f.duration?Infinity:f.duration,id:null!=f.id?f.id:"gen-dash-manifest-"+g.default(),periods:w,transportType:"dash",type:f.type||"static",uris:[b].concat(e.locations),
suggestedPresentationDelay:null!=f.suggestedPresentationDelay?f.suggestedPresentationDelay:k.default.DEFAULT_SUGGESTED_PRESENTATION_DELAY.DASH};null!=f.profiles&&(b.profiles=f.profiles);"static"!==f.type&&null!=f.availabilityEndTime&&(b.availabilityEndTime=f.availabilityEndTime);null!=f.publishTime&&(b.publishTime=f.publishTime);null!=f.duration&&(b.duration=f.duration);null!=f.minimumUpdatePeriod&&(b.minimumUpdatePeriod=f.minimumUpdatePeriod);null!=f.minBufferTime&&(b.minBufferTime=f.minBufferTime);
null!=f.timeShiftBufferDepth&&(b.timeShiftBufferDepth=f.timeShiftBufferDepth);null!=f.maxSegmentDuration&&(b.maxSegmentDuration=f.maxSegmentDuration);null!=f.maxSubsegmentDuration&&(b.maxSubsegmentDuration=f.maxSubsegmentDuration);"dynamic"===b.type&&(a=b.periods[b.periods.length-1].adaptations.filter(function(a){return"video"===a.type})[0],a=v(a),b.presentationLiveGap=null!=a?Date.now()/1E3-(a+b.availabilityStartTime):10);return b}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});
var h=a(223);b.default=function(a,b){a=a.documentElement;if(!a||"MPD"!==a.nodeName)throw Error("document root should be MPD");return h.default(a,b)}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(0),k=a(30),e=a(95),g=a(23),c=a(20),d=a(93),l=a(91),n=a(224),m=a(208),t=a(207),u=a(52);b.default=function(a){void 0===a&&(a={});var b=d.default({customManifestLoader:a.manifestLoader}),f=m.default(a.segmentLoader);a={loader:function(a){return f({adaptation:a.adaptation,init:a.init,
manifest:a.manifest,period:a.period,representation:a.representation,segment:a.segment})},parser:function(a){var c=a.segment,b=a.representation,d=a.response;a=a.init;d=d.responseData instanceof Uint8Array?d.responseData:new Uint8Array(d.responseData);var e=c.indexRange;e=k.parseSidx(d,e?e[0]:0);if(!c.isInit)return h.Observable.of({segmentData:d,segmentInfos:l.default(c,d,e,a)});e&&u.addNextSegments(b,e);c=k.getMDHDTimescale(d);return h.Observable.of({segmentData:d,segmentInfos:0<c?{time:-1,duration:0,
timescale:c}:null})}};return{manifest:{loader:function(a){return b(a.url)},parser:function(a){var c=a.response;a=a.url;a=null==c.url?a:c.url;c="string"===typeof c.responseData?(new DOMParser).parseFromString(c.responseData,"text/xml"):c.responseData;return h.Observable.of({manifest:n.default(c,a),url:a})}},audio:a,video:a,text:{loader:t.loader,parser:t.parser},image:{loader:function(a){var b=a.segment;a=a.representation;if(b.isInit)return h.Observable.of({type:"data",value:{responseData:null}});var d=
b.media;b=d?u.replaceTokens(d,b,a):"";b=c.resolveURL(a.baseURL,b);return g.default({url:b,responseType:"arraybuffer"})},parser:function(a){var c=a.segment;a=a.response.responseData;if(null===a)return h.Observable.of({segmentData:null,segmentInfos:0<c.timescale?{duration:c.isInit?0:c.duration,time:c.isInit?-1:c.time,timescale:c.timescale}:null});c=e.default(new Uint8Array(a));return h.Observable.of({segmentData:{data:c.thumbs,start:0,end:Number.MAX_VALUE,timescale:1,timeOffset:0,type:"bif"},segmentInfos:{time:0,
duration:Number.MAX_VALUE,timescale:c.timescale}})}}}}},function(f,b,a){function h(a){var b=a.url,d;(a=a.segment.range)&&(d={Range:c.byteRange(a)});return e.default({url:b,responseType:"arraybuffer",headers:d})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0);a(4);var e=a(23),g=a(20);f=a(53);var c=a(92),d=f.default.createVideoInitSegment,l=f.default.createAudioInitSegment;b.default=function(a){return function(b){var e=b.segment,f=b.representation,n=b.adaptation,m=b.period,r=b.manifest;
b=b.init;if(e.isInit){if(!e.privateInfos||"smooth-init"!==e.privateInfos.type)throw Error("Smooth: Invalid segment format");m=void 0;m=e.privateInfos;r=m.protection;switch(n.type){case "video":m=d(e.timescale,f.width||0,f.height||0,72,72,4,m.codecPrivateData,r&&r.keyId,r&&r.keySystems);break;case "audio":m=l(e.timescale,m.channels||0,m.bitsPerSample||0,m.packetSize||0,m.samplingRate||0,m.codecPrivateData,r&&r.keyId,r&&r.keySystems);break;default:m=new Uint8Array(0)}return k.Observable.of({type:"data",
value:{responseData:m}})}var w=c.buildSegmentURL(g.resolveURL(f.baseURL),f,e),v={adaptation:n,init:b,manifest:r,period:m,representation:f,segment:e,transport:"smooth",url:w};return a?k.Observable.create(function(c){var b=!1,d=!1,e=a(v,{reject:function(a){void 0===a&&(a={});d||(b=!0,c.error(a))},resolve:function(a){d||(b=!0,c.next({type:"response",value:{responseData:a.data,size:a.size,duration:a.duration}}),c.complete())},fallback:function(){d=!0;h(v).subscribe(c)}});return function(){b||d||"function"!==
typeof e||e()}}):h(v)}}},function(f,b,a){function h(a){var b=a.ts,f=a.d;a=a.r;return null==f||-1===f?b:b+(a+1)*f}Object.defineProperty(b,"__esModule",{value:!0});f=function(){function a(a,b){this._index=a;this._bitsPerSample=b.bitsPerSample;this._channels=b.channels;this._codecPrivateData=b.codecPrivateData;this._packetSize=b.packetSize;this._samplingRate=b.samplingRate;this._protection=b.protection}a.prototype.getInitSegment=function(){return{id:"init",isInit:!0,time:0,timescale:this._index.timescale,
privateInfos:{type:"smooth-init",bitsPerSample:this._bitsPerSample,channels:this._channels,codecPrivateData:this._codecPrivateData,packetSize:this._packetSize,samplingRate:this._samplingRate,protection:this._protection}}};a.prototype.getSegments=function(a,b){var c=this._index,d=c.presentationTimeOffset||0,e=c.timescale||1;var f=a*e-d;a=(a+b)*e-d;b=c.timeline;c=c.timescale;var g;d=[];for(var k=(e=b.length)&&b[0].d||0,h=0;h<e;h++){var p=b[h],q=p.d,r=p.ts;k=Math.max(k,q||0);if(null!=q&&0>q){if(r+k<
a){var w={id:""+r,time:r,isInit:!1,timescale:c,number:null!=g?g:void 0};d.push(w)}break}var v=b[h+1];w=p.r||0;null!=p.d&&0>w&&(w=Math.ceil(((v?v.ts:Infinity)-p.ts)/p.d)-1);p=w;q?(v=f-r,v=0<v?Math.floor(v/q):0):v=0;for(w=r+v*(null==q?0:q);w<a&&v<=p;)w={id:""+w,time:w,isInit:!1,duration:q,timescale:c,number:null!=g?g+v:void 0},d.push(w),v++,w=r+v*q;if(w>=a)break;null!=g&&(g+=p+1)}return d};a.prototype.shouldRefresh=function(a,b){var c=this._index,d=c.timeline;c=c.timescale;d=d[d.length-1];if(!d)return!1;
var e=d.r||0,f=d.ts+(e+1)*d.d;return b*c<f?!1:a*c>=f?!0:a>d.ts+e*d.d};a.prototype.getFirstPosition=function(){var a=this._index;if(a.timeline.length)return a.timeline[0].ts/a.timescale};a.prototype.getLastPosition=function(){var a=this._index;if(a.timeline.length)return h(a.timeline[a.timeline.length-1])/a.timescale};a.prototype.checkDiscontinuity=function(a){var b=this._index,c=b.timeline,d=b.timescale;d=void 0===d?1:d;a*=d;if(0>=a)return-1;b=b.timeline;var e=0;for(var f=b.length;e<f;){var k=e+f>>>
1;b[k].ts<a?e=k+1:f=k}e=0<e?e-1:e;if(0>e||e>=c.length-1)return-1;f=c[e];if(-1===f.d)return-1;b=f.ts;f=h(f);c=c[e+1];return f!==c.ts&&a>=b&&a<=f&&f-a<d?c.ts/d:-1};a.prototype._update=function(a){this._index=a._index};a.prototype._addSegments=function(a,b){for(var c=0;c<a.length;c++){var d=void 0,e=this._index,f=a[c],g=e.timeline,k=e.timescale,u=g.length,p=g[u-1];f=f.timescale===k?{time:f.time,duration:f.duration}:{time:f.time/f.timescale*k,duration:f.duration/f.timescale*k};b&&b.timescale&&(d=b.timescale===
k?b.time:b.time/b.timescale*k);null!=d&&f.time===d?(d=f.time+f.duration,k=d-(p.ts+(p.d||0)*p.r),0>=k||(-1===p.d&&((u=g[u-2])&&u.d===k?(u.r++,g.pop()):p.d=k),e.timeline.push({d:-1,ts:d,r:0}))):f.time>=h(p)&&(p.d===f.duration?p.r++:e.timeline.push({d:f.duration,ts:f.time,r:0}))}};return a}();b.default=f},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",ger:"deu",gre:"ell",ice:"isl",mac:"mkd",
mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",wel:"cym"}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",
eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",
lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",
sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"}},function(f,b,a){function h(a){a=(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1];return(a=void 0===a?"":a)&&"avc1."+a}function k(a){return"boolean"===typeof a?a:"string"===typeof a?"TRUE"===a.toUpperCase():!1}function e(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",
privateData:n.concat([8,1,18,16],a)}]}function g(a){a.periods.forEach(function(c){var b=[];c.adaptations.forEach(function(c){var e=c.id;d.default(b,e)&&(u.default.warn("Smooth: Two adaptations with the same ID found. Updating.",e),e+="-",c.id=e,g(a));b.push(e);var f=[];c.representations.forEach(function(c){var b=c.id;d.default(f,b)&&(u.default.warn("Smooth: Two representations with the same ID found. Updating.",b),b+="-",c.id=b,g(a));f.push(b)})})})}Object.defineProperty(b,"__esModule",{value:!0});
var c=a(2),d=a(13),l=a(4),n=a(21),m=a(19),t=a(29),u=a(1),p=a(20),q=a(227),r={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},w={audio:"mp4a.40.2",video:"avc1.4D401E"},v={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};b.default=function(a){function b(a,c,b){for(a=a.firstElementChild;a;)b=c(b,a.nodeName,a),a=a.nextElementSibling;return b}function d(a,c){function b(c){c=a.getAttribute(c);return null==c?void 0:c}switch(c){case "audio":var d=b("AudioTag");
var e=b("Bitrate");var f=b("BitsPerSample"),l=b("Channels");var g=b("CodecPrivateData");c=b("FourCC");var k=b("PacketSize"),m=b("SamplingRate");return{audiotag:void 0!==d?parseInt(d,10):d,bitrate:e?parseInt(e,10)||0:0,bitsPerSample:void 0!==f?parseInt(f,10):f,channels:void 0!==l?parseInt(l,10):l,codecPrivateData:g||"",mimeType:void 0!==c?v[c]:c,packetSize:void 0!==k?parseInt(k,10):k,samplingRate:void 0!==m?parseInt(m,10):m};case "video":return e=b("Bitrate"),g=b("CodecPrivateData"),c=b("FourCC"),
d=b("MaxWidth"),f=b("MaxHeight"),{bitrate:e?parseInt(e,10)||0:0,mimeType:void 0!==c?v[c]:c,codecPrivateData:g||"",codecs:h(g||""),width:void 0!==d?parseInt(d,10):void 0,height:void 0!==f?parseInt(f,10):void 0};case "text":return e=b("Bitrate"),g=b("CodecPrivateData"),c=b("FourCC"),{bitrate:e?parseInt(e,10)||0:0,mimeType:void 0!==c?v[c]:c,codecPrivateData:g||""};default:throw Error("Unrecognized StreamIndex type: "+c);}}function f(a,c,e,f){var g=a.hasAttribute("Timescale")?+(a.getAttribute("Timescale")||
0):e,k=a.getAttribute("Type");if(null==k)throw Error("StreamIndex without type.");e=a.getAttribute("Subtype");var h=a.getAttribute("Name"),m=a.getAttribute("Language"),n=null==m?m:t.normalize(m),u=a.getAttribute("Url")||"";a=b(a,function(a,c,b){switch(c){case "QualityLevel":c=d(b,k);if("audio"===k){var e=b.getAttribute("FourCC")||"",f=c.codecPrivateData;e="AACH"===e?5:f?(parseInt(f.substr(0,2),16)&248)>>3:2;c.codecs=e?"mp4a.40."+e:""}("video"!==k||c.bitrate>G)&&a.representations.push(c);break;case "c":c=
a.index;e=a.index.timeline;f=e.length;var l=0<f?e[f-1]:{d:0,ts:0,r:0},g=b.getAttribute("d"),h=b.getAttribute("t");b=(b=b.getAttribute("r"))?+b-1:0;h=h?+h:void 0;g=g?+g:void 0;0<f&&!l.d&&(l.d=null!=h?h-l.ts:0,e[f-1]=l);0<f&&g===l.d&&null==h?l.r+=(b||0)+1:e.push({d:g,ts:null==h?l.ts+(l.d||0)*(l.r+1):h,r:b});c.timeline=e}return a},{representations:[],index:{timeline:[],timescale:g,initialization:{}}});g=a.representations;var B=a.index;l.default(0!==g.length,"adaptation should have at least one representation");
var F=k+(m?"_"+m:"");g.forEach(function(a){a.baseURL=p.resolveURL(c,u);a.mimeType=a.mimeType||r[k];a.codecs=a.codecs||w[k];a.id=F+"_"+k+"-"+a.mimeType+"-"+a.codecs+"-"+a.bitrate;a.index=new q.default(B,{bitsPerSample:a.bitsPerSample,channels:a.channels,codecPrivateData:a.codecPrivateData,packetSize:a.packetSize,samplingRate:a.samplingRate,protection:f})});if("ADVT"===e)return null;h={id:F,type:k,representations:g,name:null==h?void 0:h,language:null==m?void 0:m,normalizedLanguage:null==n?void 0:n};
"text"===k&&"DESC"===e&&(h.closedCaption=!0);return h}void 0===a&&(a={});var u=null==a.suggestedPresentationDelay?c.default.DEFAULT_SUGGESTED_PRESENTATION_DELAY.SMOOTH:a.suggestedPresentationDelay,x=a.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,G=a.minRepresentationBitrate||19E4,I=a.keySystems||e;return function(a,c){var d=p.normalizeBaseURL(c);var e=a.documentElement;l.default("SmoothStreamingMedia"===e.nodeName,"document root should be SmoothStreamingMedia");l.default(/^[2]-[0-2]$/.test(e.getAttribute("MajorVersion")+
"-"+e.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var h=+(e.getAttribute("Timescale")||1E7);a=b(e,function(a,c,b){switch(c){case "Protection":b=b.firstElementChild;l.default("ProtectionHeader"===b.nodeName,"Protection should have ProtectionHeader child");c=n.strToBytes(atob(b.textContent||""));var d=n.le2toi(c,8);d=n.bytesToUTF16Str(c.subarray(10,d+10));d=(new DOMParser).parseFromString(d,"application/xml").querySelector("KID");if(!d)throw Error("invalid XML");d=n.guidToUuid(atob(d.textContent||
"")).toLowerCase();var e=n.hexToBytes(d);b=(b.getAttribute("SystemID")||"").toLowerCase().replace(/\{|\}/g,"");c={keyId:d,keySystems:[{systemId:b,privateData:c}].concat(I(e))};a.protection=c;break;case "StreamIndex":a.adaptationNodes.push(b)}return a},{adaptationNodes:[]});var t=a.protection;a=a.adaptationNodes.map(function(a){return f(a,d,h,t)}).filter(function(a){return!!a});var q,r=a.filter(function(a){return"video"===a.type})[0],w=a.filter(function(a){return"audio"===a.type})[0],v;if(r||w){var y=
[],D=[];if(r){var A=r.representations[0];A&&(r=A.index.getFirstPosition(),A=A.index.getLastPosition(),null!=r&&y.push(r),null!=A&&D.push(A))}w&&(r=w.representations[0])&&(w=r.index.getFirstPosition(),r=r.index.getLastPosition(),null!=w&&y.push(w),null!=r&&D.push(r));y.length&&(v=Math.max.apply(Math,y));D.length&&(q=Math.max.apply(Math,D))}if(y=k(e.getAttribute("IsLive"))){var z=u;var C=+(e.getAttribute("DVRWindowLength")||0)/h;var E=x;var H=Date.now()/1E3-(null!=q?q+E:10);e=e.getAttribute("Duration");
q=null!=e&&0!==+e?+e/h:Infinity}else e=e.getAttribute("Duration"),q=null!=e&&0!==+e?null==q?(+e+(v||0))/h:q:Infinity;v=null!=v?v/h:void 0;c={id:"gen-smooth-manifest-"+m.default(),availabilityStartTime:E||0,duration:q,presentationLiveGap:H,suggestedPresentationDelay:z,timeShiftBufferDepth:C,transportType:"smooth",type:y?"dynamic":"static",uris:[c],minimumTime:v,periods:[{id:"gen-smooth-period-0",duration:q,adaptations:a,start:0}]};g(c);return c}}},function(f,b,a){function h(a,c){for(var b=a.length,
f=0,g,h=0;f+8<b&&(h=e.be4toi(a,f),g=e.be4toi(a,f+4),k.default(0<h,"out of range size"),g!==c);)f+=h;return f<b?a.subarray(f+8,f+h):null}Object.defineProperty(b,"__esModule",{value:!0});var k=a(4),e=a(21);b.getTRAF=function(a){return(a=h(a,1836019558))?h(a,1953653094):null};b.getMDAT=function(a){return h(a,1835295092)};b.getMDIA=function(a){a=h(a,1836019574);return a?(a=h(a,1953653099))?h(a,1835297121):null:null}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});var h=a(1),k=a(30);
f=a(53);var e=f.default.getTraf,g=f.default.parseTfrf,c=f.default.parseTfxd;b.default=function(a,b,f){var d=[];if(f)if(f=e(a)){var l=g(f);var n=c(f)}else h.default.warn("smooth: could not find traf atom");n?a={time:n.time,duration:n.duration,timescale:b.timescale}:(n=Math.min(.9*b.timescale,null!=b.duration?b.duration/4:.25),a=k.getDurationFromTrun(a),a=0<=a&&(null==b.duration||Math.abs(a-b.duration)<=n)?{time:b.time,duration:a,timescale:b.timescale}:{time:b.time,duration:b.duration,timescale:b.timescale});
if(l)for(n=0;n<l.length;n++)d.push({time:l[n].time,duration:l[n].duration,timescale:b.timescale});return{nextSegments:d,segmentInfos:a}}},function(f,b,a){function h(a,c,b){a=a.representations;for(var d=0;d<a.length;d++)a[d].index._addSegments(c,b)}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(95);a(4);var g=a(23),c=a(94),d=a(20),l=a(93),n=a(232),m=a(230);f=a(53);var t=a(226),u=a(92),p=f.default.patchSegment,q=f.default.getMdat,r=/\.wsx?(\?token=\S+)?/;b.default=function(a){void 0===
a&&(a={});var b=m.default(a),f=t.default(a.segmentLoader),w=l.default({customManifestLoader:a.manifestLoader,ignoreProgressEvents:!0});a={loader:function(a){return f({adaptation:a.adaptation,init:a.init,manifest:a.manifest,period:a.period,representation:a.representation,segment:a.segment})},parser:function(a){var c=a.segment,b=a.adaptation,d=a.manifest;a=a.response.responseData;if(c.isInit)return k.Observable.of({segmentData:a,segmentInfos:{timescale:c.timescale,time:-1,duration:0}});a=new Uint8Array(a);
d=n.default(a,c,d.isLive);c=d.nextSegments;d=d.segmentInfos;a=p(a,d.time);c&&h(b,c,d);return k.Observable.of({segmentData:a,segmentInfos:d})}};return{manifest:{resolver:function(a){a=a.url;var c=u.extractToken(a);return(r.test(a)?g.default({url:u.replaceToken(a,""),responseType:"document",ignoreProgressEvents:!0}).map(function(a){a=u.extractISML(a.value.responseData);if(!a)throw Error("Invalid ISML");return a}):k.Observable.of(a)).map(function(a){return{url:u.replaceToken(u.resolveManifest(a),c)}})},
loader:function(a){return w(a.url)},parser:function(a){var c=a.response;a=a.url;a=null==c.url?a:c.url;c="string"===typeof c.responseData?(new DOMParser).parseFromString(c.responseData,"text/xml"):c.responseData;c=b(c,a);return k.Observable.of({manifest:c,url:a})}},audio:a,video:a,text:{loader:function(a){var c=a.segment,b=a.representation;if(c.isInit)return k.Observable.of({type:"data",value:{responseData:null}});a=b.mimeType&&0<=b.mimeType.indexOf("mp4")?"arraybuffer":"text";var e=d.resolveURL(b.baseURL);
c=u.buildSegmentURL(e,b,c);return g.default({url:c,responseType:a})},parser:function(a){var b=a.segment,d=a.representation,e=a.adaptation,f=a.manifest,l=e.language,g=d.mimeType;g=void 0===g?"":g;d=d.codec;d=void 0===d?"":d;var m=a.response.responseData;if(null===m)return k.Observable.of({segmentData:null,segmentInfos:0<b.timescale?{duration:b.isInit?0:b.duration,time:b.isInit?-1:b.time,timescale:b.timescale}:null});a=null;var t=0<=g.indexOf("mp4");if(t){var u=new Uint8Array(m);b=n.default(u,b,f.isLive);
var p=b.nextSegments;a=b.segmentInfos;f=a.time;var r=null!=a.duration?a.time+a.duration:void 0;b=a.timescale}else u=m,f=r=b.time||0,r=null!=b.duration?r+b.duration:void 0,b=b.timescale;if(t){var v=d.toLowerCase();if("application/ttml+xml+mp4"===g||"stpp"===v)v="ttml";else if("wvtt"===v)v="vtt";else throw Error("could not find a text-track parser for the type "+g);g=q(u);g=c.stringFromUTF8(g)}else{switch(g){case "application/x-sami":case "application/smil":v="sami";break;case "application/ttml+xml":v=
"ttml";break;case "text/vtt":v="vtt"}if(!v)if(v=d.toLowerCase(),"srt"===v)v="srt";else throw Error("could not find a text-track parser for the type "+g);g=m}null!=a&&p&&h(e,p,a);return k.Observable.of({segmentData:{type:v,data:g,language:l,timescale:b,start:f,end:r,timeOffset:f/b},segmentInfos:a})}},image:{loader:function(a){var c=a.segment;a=a.representation;if(c.isInit)return k.Observable.of({type:"data",value:{responseData:null}});var b=d.resolveURL(a.baseURL);c=u.buildSegmentURL(b,a,c);return g.default({url:c,
responseType:"arraybuffer"})},parser:function(a){var c=a.segment;a=a.response.responseData;if(null===a)return k.Observable.of({segmentData:null,segmentInfos:0<c.timescale?{duration:c.isInit?0:c.duration,time:c.isInit?-1:c.time,timescale:c.timescale}:null});c=e.default(new Uint8Array(a));return k.Observable.of({segmentData:{data:c.thumbs,start:0,end:Number.MAX_VALUE,timescale:1,timeOffset:0,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:c.timescale}})}}}}},function(f,b,a){Object.defineProperty(b,
"__esModule",{value:!0});f={};f.smooth=a(233).default;f.dash=a(225).default;b.default=f},function(f,b,a){function h(a,b){if(b instanceof g.MockMediaKeys)return b._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(b);if(null!==b){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);if(a.msSetMediaKeys)return a.msSetMediaKeys(b)}}Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),e=a(14),g=a(96);b.default=function(a,b){return k.Observable.defer(function(){return e.default(h(a,
b)).mapTo(null)})}},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,f){function c(){this.constructor=b}a(b,f);b.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});f=function(a){function b(e,c,d){var f=a.call(this)||this;Object.setPrototypeOf(f,b.prototype);
f.name="RequestError";f.url=c;f.xhr=e;f.status=e.status;f.type=d;f.message=d;return f}h(b,a);return b}(Error);b.default=f},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",
{value:!0});var k=a(24),e=a(31);f=function(a){function c(b,f,g){var d=a.call(this)||this;Object.setPrototypeOf(d,c.prototype);d.name="NetworkError";d.type=k.ErrorTypes.NETWORK_ERROR;d.xhr=f.xhr;d.url=f.url;d.status=f.status;d.errorType=f.type;d.reason=f;d.code=k.ErrorCodes.hasOwnProperty(b)?k.ErrorCodes[b]:"";d.fatal=!!g;d.message=e.default(d.name,d.code,d.reason);return d}h(c,a);c.prototype.isHttpError=function(a){return this.errorType===k.RequestErrorTypes.ERROR_HTTP_CODE&&this.status===a};return c}(Error);
b.default=f},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(24),e=a(31);f=function(a){function c(b,f,g){var d=a.call(this)||this;Object.setPrototypeOf(d,
c.prototype);d.name="OtherError";d.type=k.ErrorTypes.OTHER_ERROR;d.reason=f;d.code=k.ErrorCodes.hasOwnProperty(b)?k.ErrorCodes[b]:"";d.fatal=!!g;d.message=e.default(d.name,d.code,d.reason);return d}h(c,a);return c}(Error);b.default=f},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,
b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(24),e=a(31);f=function(a){function c(b,f){var d=a.call(this)||this;Object.setPrototypeOf(d,c.prototype);d.name="IndexError";d.type=k.ErrorTypes.INDEX_ERROR;d.reason=null;d.code=k.ErrorCodes.hasOwnProperty(b)?k.ErrorCodes[b]:"";d.fatal=!!f;d.message=e.default(d.name,d.code,null);return d}h(c,a);return c}(Error);b.default=f},function(f,b,a){var h=this&&this.__extends||
function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(24),e=a(31);f=function(a){function c(b,f,g){var d=a.call(this)||this;Object.setPrototypeOf(d,c.prototype);d.name="EncryptedMediaError";d.type=k.ErrorTypes.ENCRYPTED_MEDIA_ERROR;
d.reason=f;d.code=k.ErrorCodes.hasOwnProperty(b)?k.ErrorCodes[b]:"";d.fatal=!!g;d.message=e.default(d.name,d.code,d.reason);return d}h(c,a);return c}(Error);b.default=f},function(f,b,a){function h(a){for(var b=new Uint8Array,f=new d.default,k=0;k<a.length;){if(a.length<k+8||e.be4toi(a,k+4)!==l)return c.default.warn("unrecognized initialization data. Use as is."),a;var h=e.be4toi(new Uint8Array(a),k);if(k+h>a.length)return c.default.warn("unrecognized initialization data. Use as is."),a;var n=a.subarray(k,
k+h),r=g.default(n);f.test(r)?c.default.warn("Duplicated PSSH found in initialization data, removing it."):(f.add(r),b=e.concat(b,n));k+=h}return k!==a.length?(c.default.warn("unrecognized initialization data. Use as is."),a):b}Object.defineProperty(b,"__esModule",{value:!0});var k=a(6),e=a(21),g=a(39),c=a(1),d=a(55),l=e.be4toi(e.strToBytes("pssh"),0);b.default=function(a){var c=a.initData;if(null==c)throw new k.EncryptedMediaError("INVALID_ENCRYPTED_EVENT",Error("no init data found on media encrypted event."),
!0);c=new Uint8Array(c);return{initData:h(c),initDataType:a.initDataType}}},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});f=a(241);b.getInitData=f.default;f=a(97);b.KeySystemAccess=f.default;f=a(96);b.requestMediaKeySystemAccess=f.requestMediaKeySystemAccess;a=a(235);b.setMediaKeys=a.default},function(f,b,a){function h(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}Object.defineProperty(b,"__esModule",
{value:!0});b.requestFullscreen=function(a){h()||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))};b.exitFullscreen=function(){h()&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())};
b.isFullscreen=h},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,f){function c(){this.constructor=b}a(b,f);b.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});f=function(a){function b(e){var c=a.call(this)||this;Object.setPrototypeOf(c,b.prototype);c.name=
"AssertionError";c.message=e;Error.captureStackTrace&&Error.captureStackTrace(c,b);return c}h(b,a);return b}(Error);b.default=f},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(){a.apply(this,arguments)}h(b,a);return b}(a(108).AsyncScheduler);b.QueueScheduler=f},function(f,b,a){var h=this&&this.__extends||function(a,
b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(b,c){a.call(this,b,c);this.scheduler=b;this.work=c}h(b,a);b.prototype.schedule=function(b,c){void 0===c&&(c=0);if(0<c)return a.prototype.schedule.call(this,b,c);this.delay=c;this.state=b;this.scheduler.flush(this);return this};b.prototype.execute=function(b,c){return 0<c||this.closed?a.prototype.execute.call(this,b,c):this._execute(b,
c)};b.prototype.requestAsyncId=function(b,c,d){void 0===d&&(d=0);return null!==d&&0<d||null===d&&0<this.delay?a.prototype.requestAsyncId.call(this,b,c,d):b.flush(this)};return b}(a(109).AsyncAction);b.QueueAction=f},function(f,b,a){f=a(246);a=a(245);b.queue=new a.QueueScheduler(f.QueueAction)},function(f,b){function a(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function h(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Object.prototype.hasOwnProperty.call(a,"callee")&&
!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}b="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();b=f.exports=b?a:h;b.supported=a;b.unsupported=h},function(f,b){function a(a){var b=[],e;for(e in a)b.push(e);return b}b=f.exports="function"===typeof Object.keys?Object.keys:a;b.shim=a},function(f,b,a){function h(a){return!a||"object"!==typeof a||"number"!==typeof a.length||"function"!==typeof a.copy||"function"!==typeof a.slice||0<a.length&&"number"!==
typeof a[0]?!1:!0}function k(a,b,f){var l;if(null===a||void 0===a||null===b||void 0===b||a.prototype!==b.prototype)return!1;if(c(a)){if(!c(b))return!1;a=e.call(a);b=e.call(b);return d(a,b,f)}if(h(a)){if(!h(b)||a.length!==b.length)return!1;for(l=0;l<a.length;l++)if(a[l]!==b[l])return!1;return!0}try{var k=g(a);var m=g(b)}catch(q){return!1}if(k.length!=m.length)return!1;k.sort();m.sort();for(l=k.length-1;0<=l;l--)if(k[l]!=m[l])return!1;for(l=k.length-1;0<=l;l--)if(m=k[l],!d(a[m],b[m],f))return!1;return typeof a===
typeof b}var e=Array.prototype.slice,g=a(249),c=a(248),d=f.exports=function(a,b,c){c||(c={});return a===b?!0:a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():!a||!b||"object"!=typeof a&&"object"!=typeof b?c.strict?a===b:a==b:k(a,b,c)}},function(f,b,a){var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(250),e=a(98),g=a(0),c=a(40),d=a(7);f=a(2);a(4);var l=a(33),n=a(1),m=a(41),t=a(16),u=a(5),p=a(15),q=a(6),r=a(54),w=a(234),v=a(51),x=a(191),z=a(123),A=a(122),y=a(68),C=a(121),E=a(120),G=a(119),I=f.default.DEFAULT_UNMUTED_VOLUME;a=function(a){function b(b){void 0===b&&(b={});var f=a.call(this)||this,l=G.parseConstructorOptions(b);b=l.initialAudioBitrate;var g=l.initialVideoBitrate,
k=l.limitVideoWidth,h=l.maxAudioBitrate,m=l.maxBufferAhead,t=l.maxBufferBehind,u=l.maxVideoBitrate,B=l.throttleWhenHidden,q=l.videoElement,r=l.wantedBufferAhead;l=l.stopAtEnd;q.preload="auto";f.version="3.4.1";f.log=n.default;f.state="STOPPED";f.videoElement=q;f._priv_destroy$=new d.Subject;p.onFullscreenChange$(q).takeUntil(f._priv_destroy$).subscribe(function(){return f.trigger("fullscreenChange",f.isFullscreen())});p.onTextTrackChanges$(q.textTracks).takeUntil(f._priv_destroy$).map(function(a){a=
a.target;for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}).distinctUntilChanged(function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}).subscribe(function(a){return f._priv_onNativeTextTracksNext(a)});f._priv_playing$=new c.ReplaySubject(1);f._priv_speed$=new e.BehaviorSubject(q.playbackRate);f._priv_stopCurrentContent$=new d.Subject;f._priv_streamLock$=new e.BehaviorSubject(!1);f._priv_bufferOptions={wantedBufferAhead$:new e.BehaviorSubject(r),
maxBufferAhead$:new e.BehaviorSubject(m),maxBufferBehind$:new e.BehaviorSubject(t)};f._priv_bitrateInfos={lastBitrates:{audio:b,video:g},initialMaxAutoBitrates:{audio:h,video:u},manualBitrates:{audio:-1,video:-1}};f._priv_throttleWhenHidden=B;f._priv_limitVideoWidth=k;f._priv_mutedMemory=I;f._priv_languageManager=null;f._priv_abrManager=null;f._priv_currentError=null;f._priv_contentInfos=null;f._priv_contentEventsMemory={period:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,
bitrateEstimation:void 0};f._priv_stopAtEnd=l;f._priv_setPlayerState(y.PLAYER_STATES.STOPPED);return f}h(b,a);Object.defineProperty(b,"ErrorTypes",{get:function(){return q.ErrorTypes},enumerable:!0,configurable:!0});Object.defineProperty(b,"ErrorCodes",{get:function(){return q.ErrorCodes},enumerable:!0,configurable:!0});Object.defineProperty(b,"LogLevel",{get:function(){return n.default.getLevel()},set:function(a){n.default.setLevel(a)},enumerable:!0,configurable:!0});b.prototype.stop=function(){this.state!==
y.PLAYER_STATES.STOPPED&&(this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(y.PLAYER_STATES.STOPPED))};b.prototype.dispose=function(){this.stop();this.videoElement&&v.disposeEME(this.videoElement);this._priv_destroy$.next();this._priv_destroy$.complete();this._priv_stopCurrentContent$.complete();this._priv_playing$.complete();this._priv_speed$.complete();this._priv_streamLock$.complete();this._priv_bufferOptions.wantedBufferAhead$.complete();this._priv_bufferOptions.maxBufferAhead$.complete();
this._priv_bufferOptions.maxBufferBehind$.complete();this.videoElement=null};b.prototype.loadVideo=function(a){var b=this,c=G.parseLoadVideoOptions(a);n.default.info("loadvideo",c);var d=c.autoPlay;a=c.defaultAudioTrack;var e=c.defaultTextTrack,f=c.keySystems,l=c.networkConfig,k=c.startAt,h=c.supplementaryImageTracks,t=c.supplementaryTextTracks,u=c.transport,q=c.transportOptions,B=c.url;if(!this.videoElement)throw Error("the attached video element is disposed");this.stop();var r="directfile"===u;
this._priv_currentError=null;this._priv_contentInfos={url:B,isDirectFile:r,thumbnails:null,manifest:null,currentPeriod:null,activeAdaptations:null,activeRepresentations:null,initialAudioTrack:a,initialTextTrack:e};this._priv_playing$.next(!1);var v=this.videoElement;a=A.default(v,{withMediaSource:!r});e=g.Observable.merge(this._priv_stopCurrentContent$,this._priv_stopAtEnd?p.onEnded$(v):g.Observable.empty()).take(1);if(r)var D=z.default({autoPlay:d,clock$:a,keySystems:f,mediaElement:v,speed$:this._priv_speed$,
startAt:k,url:B}).takeUntil(e).publish();else{r=w.default[u];if(!r)throw Error('transport "'+u+'" not supported');u=r(q);q={initialBitrates:this._priv_bitrateInfos.lastBitrates,manualBitrates:this._priv_bitrateInfos.manualBitrates,maxAutoBitrates:this._priv_bitrateInfos.initialMaxAutoBitrates,throttle:this._priv_throttleWhenHidden?{video:p.isInBackground$().map(function(a){return a?0:Infinity}).takeUntil(this._priv_stopCurrentContent$)}:{},limitWidth:this._priv_limitVideoWidth?{video:p.videoWidth$(v).takeUntil(this._priv_stopCurrentContent$)}:
{}};D=x.default({adaptiveOptions:q,autoPlay:d,bufferOptions:this._priv_bufferOptions,clock$:a,keySystems:f,networkConfig:l,speed$:this._priv_speed$,startAt:k,supplementaryImageTracks:h,supplementaryTextTracks:t,textTrackOptions:"native"===c.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:c.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:c.textTrackElement},transport:u,url:B,videoElement:v}).takeUntil(e).publish()}c=D.filter(function(a){return"stalled"===a.type}).map(function(a){return a.value});
d=D.filter(function(a){return"loaded"===a.type}).take(1).share();f=p.onEnded$(v);l=p.onSeeking$(v);c=d.mapTo(y.PLAYER_STATES.LOADED).concat(g.Observable.combineLatest(this._priv_playing$,c.startWith(null),f.startWith(null),l.startWith(null)).takeUntil(this._priv_stopCurrentContent$).map(function(a){return C.default(v,a[0],a[1])}).skipUntil(this._priv_playing$.filter(function(a){return a}))).distinctUntilChanged().startWith(y.PLAYER_STATES.LOADING);d=p.onPlayPause$(v).map(function(a){return"play"===
a.type});var E;this._priv_stopCurrentContent$.take(1).subscribe(function(){E&&E.unsubscribe()});d.takeUntil(this._priv_stopCurrentContent$).subscribe(function(a){return b._priv_onPlayPauseNext(a)},m.default);a.takeUntil(this._priv_stopCurrentContent$).subscribe(function(a){return b._priv_triggerTimeChange(a)},m.default);c.takeUntil(this._priv_stopCurrentContent$).subscribe(function(a){return b._priv_setPlayerState(a)},m.default);D.subscribe(function(a){return b._priv_onStreamNext(a)},function(a){return b._priv_onStreamError(a)},
function(){return b._priv_onStreamComplete()});this._priv_streamLock$.filter(function(a){return!a}).take(1).takeUntil(this._priv_stopCurrentContent$).subscribe(function(){E=D.connect()})};b.prototype.getError=function(){return this._priv_currentError};b.prototype.getManifest=function(){return this._priv_contentInfos&&this._priv_contentInfos.manifest};b.prototype.getCurrentAdaptations=function(){if(!this._priv_contentInfos)return null;var a=this._priv_contentInfos,b=a.currentPeriod;a=a.activeAdaptations;
return b&&a?a.get(b)||null:null};b.prototype.getCurrentRepresentations=function(){if(!this._priv_contentInfos)return null;var a=this._priv_contentInfos,b=a.currentPeriod;a=a.activeRepresentations;return b&&a?a.get(b)||null:null};b.prototype.getVideoElement=function(){return this.videoElement};b.prototype.getNativeTextTrack=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return 0<a.textTracks.length?a.textTracks[0]:null};b.prototype.getPlayerState=function(){return this.state};
b.prototype.isLive=function(){if(!this._priv_contentInfos)return!1;var a=this._priv_contentInfos,b=a.manifest;return a.isDirectFile||!b?!1:b.isLive};b.prototype.getUrl=function(){if(this._priv_contentInfos){var a=this._priv_contentInfos,b=a.manifest,c=a.url;if(a.isDirectFile)return c;if(b)return b.getUrl()}};b.prototype.getVideoDuration=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.duration};b.prototype.getVideoBufferGap=function(){if(!this.videoElement)throw Error("Disposed player");
var a=this.videoElement;return t.getLeftSizeOfRange(a.buffered,a.currentTime)};b.prototype.getVideoLoadedTime=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return t.getSizeOfRange(a.buffered,a.currentTime)};b.prototype.getVideoPlayedTime=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return t.getPlayedSizeOfRange(a.buffered,a.currentTime)};b.prototype.getWallClockTime=function(){if(!this.videoElement)throw Error("Disposed player");
if(!this._priv_contentInfos)return this.videoElement.currentTime;var a=this._priv_contentInfos,b=a.manifest;return a.isDirectFile?this.videoElement.currentTime:b?(a=this.videoElement.currentTime,this.isLive()?+r.toWallClockTime(a,b)/1E3:a):0};b.prototype.getPosition=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.currentTime};b.prototype.getPlaybackRate=function(){return this._priv_speed$.getValue()};b.prototype.getVolume=function(){if(!this.videoElement)throw Error("Disposed player");
return this.videoElement.volume};b.prototype.isFullscreen=function(){return u.isFullscreen()};b.prototype.getAvailableVideoBitrates=function(){if(!this._priv_contentInfos)return[];var a=this._priv_contentInfos,b=a.currentPeriod;a=a.activeAdaptations;return b&&a?(b=(b=a.get(b))&&b.video)?b.representations.map(function(a){return a.bitrate}):[]:[]};b.prototype.getAvailableAudioBitrates=function(){if(!this._priv_contentInfos)return[];var a=this._priv_contentInfos,b=a.currentPeriod;a=a.activeAdaptations;
return b&&a?(b=(b=a.get(b))&&b.audio)?b.representations.map(function(a){return a.bitrate}):[]:[]};b.prototype.getManualAudioBitrate=function(){return this._priv_bitrateInfos.manualBitrates.audio};b.prototype.getManualVideoBitrate=function(){return this._priv_bitrateInfos.manualBitrates.video};b.prototype.getVideoBitrate=function(){var a=this.getCurrentRepresentations();if(a&&a.video)return a.video.bitrate};b.prototype.getAudioBitrate=function(){var a=this.getCurrentRepresentations();if(a&&a.audio)return a.audio.bitrate};
b.prototype.getMaxVideoBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("video"):this._priv_bitrateInfos.initialMaxAutoBitrates.video};b.prototype.getMaxAudioBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("audio"):this._priv_bitrateInfos.initialMaxAutoBitrates.audio};b.prototype.play=function(){if(!this.videoElement)throw Error("Disposed player");this.videoElement.play()};b.prototype.pause=function(){if(!this.videoElement)throw Error("Disposed player");
this.videoElement.pause()};b.prototype.setPlaybackRate=function(a){this._priv_speed$.next(a)};b.prototype.seekTo=function(a){if(!this.videoElement)throw Error("Disposed player");if(!this._priv_contentInfos)throw Error("player: no content loaded");var b=this._priv_contentInfos,c=b.isDirectFile;b=b.manifest;if(!c&&!b)throw Error("player: the content did not load yet");var d=typeof a;if("number"===d)var e=a;else if("object"===d)if(e=this.videoElement.currentTime,null!=a.relative)e+=a.relative;else if(null!=
a.position)e=a.position;else if(null!=a.wallClockTime)e=c?a.wallClockTime:r.fromWallClockTime(1E3*a.wallClockTime,b);else throw Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');if(void 0===e)throw Error("invalid time given");return this.videoElement.currentTime=e};b.prototype.exitFullscreen=function(){u.exitFullscreen()};b.prototype.setFullscreen=function(a){void 0===a&&(a=!0);if(!this.videoElement)throw Error("Disposed player");
a?u.requestFullscreen(this.videoElement):u.exitFullscreen()};b.prototype.setVolume=function(a){if(!this.videoElement)throw Error("Disposed player");var b=this.videoElement;a!==b.volume&&(b.volume=a,this.trigger("volumeChange",a))};b.prototype.isMute=function(){return!this.getVolume()};b.prototype.mute=function(){this._priv_mutedMemory=this.getVolume();this.setVolume(0)};b.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this._priv_mutedMemory||I)};b.prototype.setVideoBitrate=function(a){this._priv_bitrateInfos.manualBitrates.video=
a;this._priv_abrManager&&this._priv_abrManager.setManualBitrate("video",a)};b.prototype.setAudioBitrate=function(a){this._priv_bitrateInfos.manualBitrates.audio=a;this._priv_abrManager&&this._priv_abrManager.setManualBitrate("audio",a)};b.prototype.setMaxVideoBitrate=function(a){this._priv_bitrateInfos.initialMaxAutoBitrates.video=a;this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("video",a)};b.prototype.setMaxAudioBitrate=function(a){this._priv_bitrateInfos.initialMaxAutoBitrates.audio=
a;this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("audio",a)};b.prototype.setMaxBufferBehind=function(a){this._priv_bufferOptions.maxBufferBehind$.next(a)};b.prototype.setMaxBufferAhead=function(a){this._priv_bufferOptions.maxBufferAhead$.next(a)};b.prototype.setWantedBufferAhead=function(a){this._priv_bufferOptions.wantedBufferAhead$.next(a)};b.prototype.getMaxBufferBehind=function(){return this._priv_bufferOptions.maxBufferBehind$.getValue()};b.prototype.getMaxBufferAhead=function(){return this._priv_bufferOptions.maxBufferAhead$.getValue()};
b.prototype.getWantedBufferAhead=function(){return this._priv_bufferOptions.wantedBufferAhead$.getValue()};b.prototype.getCurrentKeySystem=function(){if(!this.videoElement)throw Error("Disposed player");return v.getCurrentKeySystem(this.videoElement)};b.prototype.getAvailableAudioTracks=function(){if(!this._priv_contentInfos)return[];var a=this._priv_contentInfos.currentPeriod;return this._priv_languageManager&&a?this._priv_languageManager.getAvailableAudioTracks(a):[]};b.prototype.getAvailableTextTracks=
function(){if(!this._priv_contentInfos)return[];var a=this._priv_contentInfos.currentPeriod;return this._priv_languageManager&&a?this._priv_languageManager.getAvailableTextTracks(a):[]};b.prototype.getAudioTrack=function(){if(this._priv_contentInfos){var a=this._priv_contentInfos.currentPeriod;if(this._priv_languageManager&&a)return this._priv_languageManager.getChosenAudioTrack(a)}};b.prototype.getTextTrack=function(){if(this._priv_contentInfos){var a=this._priv_contentInfos.currentPeriod;if(this._priv_languageManager&&
a)return this._priv_languageManager.getChosenTextTrack(a)}};b.prototype.setAudioTrack=function(a){if(!this._priv_contentInfos)throw Error("No content loaded");var b=this._priv_contentInfos.currentPeriod;if(!this._priv_languageManager||!b)throw Error("No compatible content launched.");try{this._priv_languageManager.setAudioTrackByID(b,a)}catch(J){throw Error("player: unknown audio track");}};b.prototype.setTextTrack=function(a){if(!this._priv_contentInfos)throw Error("No content loaded");var b=this._priv_contentInfos.currentPeriod;
if(!this._priv_languageManager||!b)throw Error("No compatible content launched.");try{this._priv_languageManager.setTextTrackByID(b,a)}catch(J){throw Error("player: unknown text track");}};b.prototype.disableTextTrack=function(){if(this._priv_contentInfos){var a=this._priv_contentInfos.currentPeriod;if(this._priv_languageManager&&a)return this._priv_languageManager.disableTextTrack(a)}};b.prototype.getImageTrackData=function(){return this._priv_contentInfos&&this._priv_contentInfos.thumbnails};b.prototype.getMinimumPosition=
function(){if(!this._priv_contentInfos)return null;if(this._priv_contentInfos.isDirectFile)return 0;var a=this._priv_contentInfos.manifest;return a?r.getMinimumBufferPosition(a):null};b.prototype.getMaximumPosition=function(){if(!this._priv_contentInfos)return null;var a=this._priv_contentInfos,b=a.manifest;if(a.isDirectFile){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.duration}return b?r.getMaximumBufferPosition(b):null};b.prototype._priv_cleanUpCurrentContentState=
function(){var a=this;this._priv_streamLock$.next(!0);this._priv_languageManager=this._priv_contentInfos=null;this._priv_abrManager&&(this._priv_abrManager.dispose(),this._priv_abrManager=null);this._priv_contentEventsMemory={period:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0};var b=function(){a._priv_streamLock$.next(!1)};this.videoElement?v.clearEMESession(this.videoElement).catch(function(){return g.Observable.empty()}).subscribe(m.default,b,
b):b()};b.prototype._priv_triggerContentEvent=function(a,b){k(this._priv_contentEventsMemory[a],b)||(this._priv_contentEventsMemory[a]=b,this.trigger(a+"Change",b))};b.prototype._priv_onStreamNext=function(a){switch(a.type){case "activePeriodChanged":this._priv_onActivePeriodChanged(a.value);break;case "periodBufferReady":this._priv_onPeriodBufferReady(a.value);break;case "periodBufferCleared":this._priv_onPeriodBufferCleared(a.value);break;case "representationChange":this._priv_onRepresentationChange(a.value);
break;case "adaptationChange":this._priv_onAdaptationChange(a.value);break;case "manifestUpdate":this._priv_onManifestUpdate(a.value);break;case "bitrateEstimationChange":this._priv_onBitrateEstimationChange(a.value);break;case "manifestReady":this._priv_onManifestReady(a.value);break;case "warning":this._priv_onStreamWarning(a.value);break;case "added-segment":if(this._priv_contentInfos){a=a.value;var b=a.segmentData;"image"===a.bufferType&&null!=b&&"bif"===b.type&&(this._priv_contentInfos.thumbnails=
b.data,this.trigger("imageTrackUpdate",{data:this._priv_contentInfos.thumbnails}))}else n.default.error("Added segment while no content is loaded")}};b.prototype._priv_onStreamError=function(a){this._priv_stopCurrentContent$.next();this._priv_cleanUpCurrentContentState();this._priv_currentError=a;this._priv_setPlayerState(y.PLAYER_STATES.STOPPED);this._priv_currentError===a&&this.trigger("error",a)};b.prototype._priv_onStreamComplete=function(){this._priv_stopCurrentContent$.next();this._priv_cleanUpCurrentContentState();
this._priv_setPlayerState(y.PLAYER_STATES.ENDED)};b.prototype._priv_onStreamWarning=function(a){this.trigger("warning",a)};b.prototype._priv_onManifestReady=function(a){if(this._priv_contentInfos){var b=a.manifest;a=a.abrManager;this._priv_contentInfos.manifest=b;this._priv_abrManager=a;var c=this._priv_contentInfos;a=c.initialAudioTrack;c=c.initialTextTrack;this._priv_languageManager=new E.default({preferredAudioTracks:void 0===a?void 0:[a],preferredTextTracks:void 0===c?void 0:[c]});this.trigger("manifestChange",
b)}else n.default.error("The manifest is loaded but no content is.")};b.prototype._priv_onActivePeriodChanged=function(a){var b=a.period;this._priv_contentInfos?(this._priv_contentInfos.currentPeriod=b,this._priv_triggerContentEvent("period",b),this._priv_languageManager?(a=this._priv_languageManager.getChosenAudioTrack(b),b=this._priv_languageManager.getChosenTextTrack(b),this._priv_triggerContentEvent("audioTrack",a),this._priv_triggerContentEvent("textTrack",b)):(this._priv_triggerContentEvent("audioTrack",
null),this._priv_triggerContentEvent("textTrack",null)),(a=this.getCurrentRepresentations())&&null!=a.audio?(a=a.audio.bitrate,this._priv_triggerContentEvent("audioBitrate",null!=a?a:-1)):this._priv_triggerContentEvent("audioBitrate",null),(a=this.getCurrentRepresentations())&&null!=a.video?(a=a.video.bitrate,this._priv_triggerContentEvent("videoBitrate",null!=a?a:-1)):this._priv_triggerContentEvent("videoBitrate",null)):n.default.error("The active period changed but no content is loaded")};b.prototype._priv_onPeriodBufferReady=
function(a){var b=a.type,c=a.period;a=a.adaptation$;switch(b){case "audio":this._priv_languageManager?(this._priv_languageManager.addPeriod(b,c,a),this._priv_languageManager.setInitialAudioTrack(c)):(n.default.error("LanguageManager not instanciated for a new "+b+" period"),a.next(null));break;case "text":this._priv_languageManager?(this._priv_languageManager.addPeriod(b,c,a),this._priv_languageManager.setInitialTextTrack(c)):(n.default.error("LanguageManager not instanciated for a new "+b+" period"),
a.next(null));break;default:(b=c.adaptations[b])&&b.length?a.next(b[0]):a.next(null)}};b.prototype._priv_onPeriodBufferCleared=function(a){var b=a.type;a=a.period;("audio"===b||"text"===b)&&this._priv_languageManager&&this._priv_languageManager.removePeriod(b,a)};b.prototype._priv_onManifestUpdate=function(a){this._priv_contentInfos?(a=a.manifest,this._priv_contentInfos.manifest=a,this._priv_languageManager&&this._priv_languageManager.update(),this.trigger("manifestUpdate",a)):n.default.error("The manifest is updated but no content is loaded.")};
b.prototype._priv_onAdaptationChange=function(a){var b=a.type,c=a.adaptation;a=a.period;if(this._priv_contentInfos){this._priv_contentInfos.activeAdaptations||(this._priv_contentInfos.activeAdaptations=new Map);var d=this._priv_contentInfos,e=d.activeAdaptations;d=d.currentPeriod;var f=e.get(a);f?f[b]=c:e.set(a,(l={},l[b]=c,l));this._priv_languageManager&&null!=a&&a===d&&("audio"===b?(b=this._priv_languageManager.getChosenAudioTrack(d),this._priv_triggerContentEvent("audioTrack",b)):"text"===b&&(b=
this._priv_languageManager.getChosenTextTrack(d),this._priv_triggerContentEvent("textTrack",b)));var l}else n.default.error("The adaptations changed but no content is loaded")};b.prototype._priv_onRepresentationChange=function(a){var b=a.type,c=a.period;a=a.representation;if(this._priv_contentInfos){this._priv_contentInfos.activeRepresentations||(this._priv_contentInfos.activeRepresentations=new Map);var d=this._priv_contentInfos,e=d.activeRepresentations;d=d.currentPeriod;var f=e.get(c);f?f[b]=a:
e.set(c,(l={},l[b]=a,l));l=a&&a.bitrate;null!=l&&(this._priv_bitrateInfos.lastBitrates[b]=l);null!=c&&d===c&&("video"===b?this._priv_triggerContentEvent("videoBitrate",null!=l?l:-1):"audio"===b&&this._priv_triggerContentEvent("audioBitrate",null!=l?l:-1));var l}else n.default.error("The representations changed but no content is loaded")};b.prototype._priv_onBitrateEstimationChange=function(a){this._priv_triggerContentEvent("bitrateEstimation",{type:a.type,bitrate:a.bitrate})};b.prototype._priv_onPlayPauseNext=
function(a){if(!this.videoElement)throw Error("Disposed player");this._priv_playing$.next(a)};b.prototype._priv_onNativeTextTracksNext=function(a){this.trigger("nativeTextTracksChange",a)};b.prototype._priv_setPlayerState=function(a){this.state!==a&&(this.state=a,n.default.info("playerStateChange",a),this.trigger("playerStateChange",a))};b.prototype._priv_triggerTimeChange=function(a){if(this._priv_contentInfos){var b=this._priv_contentInfos,c=b.manifest;(b.isDirectFile||c)&&a&&(b={position:a.currentTime,
duration:a.duration,playbackRate:a.playbackRate,bufferGap:isFinite(a.bufferGap)?a.bufferGap:0},c&&c.isLive&&0<a.currentTime&&(b.wallClockTime=r.toWallClockTime(a.currentTime,c).getTime()/1E3,b.liveGap=r.getMaximumBufferPosition(c)-a.currentTime),this.trigger("positionUpdate",b))}else n.default.warn("Cannot perform time update: no content loaded.")};return b}(l.default);b.default=a},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var c;"function"===typeof a[a.length-1]&&(c=a.pop());return b.lift(new e(a,c))}};var e=function(){function a(a,b){this.observables=a;this.project=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.observables,this.project))};return a}(),g=function(a){function b(b,c,d){a.call(this,
b);this.observables=c;this.project=d;this.toRespond=[];b=c.length;this.values=Array(b);for(d=0;d<b;d++)this.toRespond.push(d);for(d=0;d<b;d++){var e=c[d];this.add(k.subscribeToResult(this,e,e,d))}}h(b,a);b.prototype.notifyNext=function(a,b,c,d,e){this.values[c]=b;a=this.toRespond;0<a.length&&(c=a.indexOf(c),-1!==c&&a.splice(c,1))};b.prototype.notifyComplete=function(){};b.prototype._next=function(a){0===this.toRespond.length&&(a=[a].concat(this.values),this.project?this._tryProject(a):this.destination.next(a))};
b.prototype._tryProject=function(a){try{var b=this.project.apply(this,a)}catch(m){this.destination.error(m);return}this.destination.next(b)};return b}(f.OuterSubscriber)},function(f,b,a){var h=a(252);b.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return h.withLatestFrom.apply(void 0,a)(this)}},function(f,b,a){f=a(0);a=a(253);f.Observable.prototype.withLatestFrom=a.withLatestFrom},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(25),e=a(105);f=a(3);var g=a(99);b.timeout=function(a,b){void 0===b&&(b=k.async);var d=e.isDate(a),f=d?+a-b.now():Math.abs(a);return function(a){return a.lift(new c(f,d,b,new g.TimeoutError))}};var c=function(){function a(a,b,c,d){this.waitFor=a;this.absoluteTimeout=b;this.scheduler=c;this.errorInstance=d}a.prototype.call=function(a,b){return b.subscribe(new d(a,this.absoluteTimeout,
this.waitFor,this.scheduler,this.errorInstance))};return a}(),d=function(a){function b(b,c,d,e,f){a.call(this,b);this.absoluteTimeout=c;this.waitFor=d;this.scheduler=e;this.errorInstance=f;this.action=null;this.scheduleTimeout()}h(b,a);b.dispatchTimeout=function(a){a.error(a.errorInstance)};b.prototype.scheduleTimeout=function(){var a=this.action;a?this.action=a.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(b.dispatchTimeout,this.waitFor,this))};b.prototype._next=function(b){this.absoluteTimeout||
this.scheduleTimeout();a.prototype._next.call(this,b)};b.prototype._unsubscribe=function(){this.errorInstance=this.scheduler=this.action=null};return b}(f.Subscriber)},function(f,b,a){var h=a(25),k=a(255);b.timeout=function(a,b){void 0===b&&(b=h.async);return k.timeout(a,b)(this)}},function(f,b,a){f=a(0);a=a(256);f.Observable.prototype.timeout=a.timeout},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.takeUntil=function(a){return function(b){return b.lift(new e(a))}};var e=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.notifier))};return a}(),g=function(a){function b(b,c){a.call(this,b);this.notifier=c;this.add(k.subscribeToResult(this,c))}h(b,a);b.prototype.notifyNext=function(a,b,c,d,e){this.complete()};b.prototype.notifyComplete=function(){};return b}(f.OuterSubscriber)},
function(f,b,a){var h=a(258);b.takeUntil=function(a){return h.takeUntil(a)(this)}},function(f,b,a){f=a(0);a=a(259);f.Observable.prototype.takeUntil=a.takeUntil},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);var k=a(100),e=a(26);b.takeLast=function(a){return function(b){return 0===a?new e.EmptyObservable:b.lift(new g(a))}};var g=function(){function a(a){this.total=
a;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.total))};return a}(),c=function(a){function b(b,c){a.call(this,b);this.total=c;this.ring=[];this.count=0}h(b,a);b.prototype._next=function(a){var b=this.ring,c=this.total,d=this.count++;b.length<c?b.push(a):b[d%c]=a};b.prototype._complete=function(){var a=this.destination,b=this.count;if(0<b)for(var c=this.count>=this.total?this.total:this.count,d=this.ring,e=0;e<c;e++){var f=b++%
c;a.next(d[f])}a.complete()};return b}(f.Subscriber)},function(f,b,a){var h=a(261);b.takeLast=function(a){return h.takeLast(a)(this)}},function(f,b,a){f=a(0);a=a(262);f.Observable.prototype.takeLast=a.takeLast},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);var k=a(100),e=a(26);b.take=function(a){return function(b){return 0===a?new e.EmptyObservable:
b.lift(new g(a))}};var g=function(){function a(a){this.total=a;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.total))};return a}(),c=function(a){function b(b,c){a.call(this,b);this.total=c;this.count=0}h(b,a);b.prototype._next=function(a){var b=this.total,c=++this.count;c<=b&&(this.destination.next(a),c===b&&(this.destination.complete(),this.unsubscribe()))};return b}(f.Subscriber)},function(f,b,a){var h=a(264);b.take=function(a){return h.take(a)(this)}},
function(f,b,a){f=a(0);a=a(265);f.Observable.prototype.take=a.take},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.switchMapTo=function(a,b){return function(c){return c.lift(new e(a,b))}};var e=function(){function a(a,b){this.observable=a;this.resultSelector=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,
this.observable,this.resultSelector))};return a}(),g=function(a){function b(b,c,d){a.call(this,b);this.inner=c;this.resultSelector=d;this.index=0}h(b,a);b.prototype._next=function(a){var b=this.innerSubscription;b&&b.unsubscribe();this.add(this.innerSubscription=k.subscribeToResult(this,this.inner,a,this.index++))};b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.closed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=
function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,d,e){e=this.destination;this.resultSelector?this.tryResultSelector(a,b,c,d):e.next(b)};b.prototype.tryResultSelector=function(a,b,c,d){var e=this.resultSelector,f=this.destination;try{var g=e(a,b,c,d)}catch(r){f.error(r);return}f.next(g)};return b}(f.OuterSubscriber)},function(f,b,a){var h=a(267);b.switchMapTo=function(a,b){return h.switchMapTo(a,b)(this)}},
function(f,b,a){f=a(0);a=a(268);f.Observable.prototype.switchMapTo=a.switchMapTo},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.switchMap=function(a,b){return function(c){return c.lift(new e(a,b))}};var e=function(){function a(a,b){this.project=a;this.resultSelector=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,
this.project,this.resultSelector))};return a}(),g=function(a){function b(b,c,d){a.call(this,b);this.project=c;this.resultSelector=d;this.index=0}h(b,a);b.prototype._next=function(a){var b=this.index++;try{var c=this.project(a,b)}catch(t){this.destination.error(t);return}this._innerSub(c,a,b)};b.prototype._innerSub=function(a,b,c){var d=this.innerSubscription;d&&d.unsubscribe();this.add(this.innerSubscription=k.subscribeToResult(this,a,b,c))};b.prototype._complete=function(){var b=this.innerSubscription;
b&&!b.closed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,d,e){this.resultSelector?this._tryNotifyNext(a,b,c,d):this.destination.next(b)};b.prototype._tryNotifyNext=function(a,b,c,d){try{var e=this.resultSelector(a,b,c,d)}catch(p){this.destination.error(p);return}this.destination.next(e)};
return b}(f.OuterSubscriber)},function(f,b,a){var h=a(270);b.switchMap=function(a,b){return h.switchMap(a,b)(this)}},function(f,b,a){f=a(0);a=a(271);f.Observable.prototype.switchMap=a.switchMap},function(f,b,a){var h=a(22),k=a(62),e=a(26),g=a(42),c=a(27);b.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var d=a[a.length-1];c.isScheduler(d)?a.pop():d=null;var f=a.length;return 1===f?g.concat(new k.ScalarObservable(a[0],d),b):1<f?g.concat(new h.ArrayObservable(a,
d),b):g.concat(new e.EmptyObservable(d),b)}}},function(f,b,a){var h=a(273);b.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return h.startWith.apply(void 0,a)(this)}},function(f,b,a){f=a(0);a=a(274);f.Observable.prototype.startWith=a.startWith},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);b.skipWhile=
function(a){return function(b){return b.lift(new k(a))}};var k=function(){function a(a){this.predicate=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate))};return a}(),e=function(a){function b(b,c){a.call(this,b);this.predicate=c;this.skipping=!0;this.index=0}h(b,a);b.prototype._next=function(a){var b=this.destination;this.skipping&&this.tryCallPredicate(a);this.skipping||b.next(a)};b.prototype.tryCallPredicate=function(a){try{this.skipping=!!this.predicate(a,this.index++)}catch(l){this.destination.error(l)}};
return b}(f.Subscriber)},function(f,b,a){var h=a(276);b.skipWhile=function(a){return h.skipWhile(a)(this)}},function(f,b,a){f=a(0);a=a(277);f.Observable.prototype.skipWhile=a.skipWhile},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.skipUntil=function(a){return function(b){return b.lift(new e(a))}};var e=function(){function a(a){this.notifier=
a}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.notifier))};return a}(),g=function(a){function b(b,c){a.call(this,b);this.isInnerStopped=this.hasValue=!1;this.add(k.subscribeToResult(this,c))}h(b,a);b.prototype._next=function(b){this.hasValue&&a.prototype._next.call(this,b)};b.prototype._complete=function(){this.isInnerStopped?a.prototype._complete.call(this):this.unsubscribe()};b.prototype.notifyNext=function(a,b,c,d,e){this.hasValue=!0};b.prototype.notifyComplete=function(){this.isInnerStopped=
!0;this.isStopped&&a.prototype._complete.call(this)};return b}(f.OuterSubscriber)},function(f,b,a){var h=a(279);b.skipUntil=function(a){return h.skipUntil(a)(this)}},function(f,b,a){f=a(0);a=a(280);f.Observable.prototype.skipUntil=a.skipUntil},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);b.skip=function(a){return function(b){return b.lift(new k(a))}};
var k=function(){function a(a){this.total=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.total))};return a}(),e=function(a){function b(b,c){a.call(this,b);this.total=c;this.count=0}h(b,a);b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return b}(f.Subscriber)},function(f,b,a){var h=a(282);b.skip=function(a){return h.skip(a)(this)}},function(f,b,a){f=a(0);a=a(283);f.Observable.prototype.skip=a.skip},function(f,b,a){function h(){return new g.Subject}
var k=a(59),e=a(101),g=a(7);b.share=function(){return function(a){return e.refCount()(k.multicast(h)(a))}}},function(f,b,a){var h=a(285);b.share=function(){return h.share()(this)}},function(f,b,a){f=a(0);a=a(286);f.Observable.prototype.share=a.share},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);b.scan=function(a,b){var c=!1;2<=arguments.length&&
(c=!0);return function(d){return d.lift(new k(a,b,c))}};var k=function(){function a(a,b,e){void 0===e&&(e=!1);this.accumulator=a;this.seed=b;this.hasSeed=e}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.accumulator,this.seed,this.hasSeed))};return a}(),e=function(a){function b(b,c,e,f){a.call(this,b);this.accumulator=c;this._seed=e;this.hasSeed=f;this.index=0}h(b,a);Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.hasSeed=!0;this._seed=
a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(this.hasSeed)return this._tryNext(a);this.seed=a;this.destination.next(a)};b.prototype._tryNext=function(a){var b=this.index++;try{var c=this.accumulator(this.seed,a,b)}catch(m){this.destination.error(m)}this.seed=c;this.destination.next(c)};return b}(f.Subscriber)},function(f,b,a){var h=a(288);b.scan=function(a,b){return 2<=arguments.length?h.scan(a,b)(this):h.scan(a)(this)}},function(f,b,a){f=a(0);a=a(289);f.Observable.prototype.scan=
a.scan},function(f,b,a){var h=a(7),k=a(59);b.publish=function(a){return a?k.multicast(function(){return new h.Subject},a):k.multicast(new h.Subject)}},function(f,b,a){var h=a(291);b.publish=function(a){return h.publish(a)(this)}},function(f,b,a){f=a(0);a=a(292);f.Observable.prototype.publish=a.publish},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};f=a(3);b.pairwise=function(){return function(a){return a.lift(new k)}};var k=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new e(a))};return a}(),e=function(a){function b(b){a.call(this,b);this.hasPrev=!1}h(b,a);b.prototype._next=function(a){this.hasPrev?this.destination.next([this.prev,a]):this.hasPrev=!0;this.prev=a};return b}(f.Subscriber)},function(f,b,a){var h=a(294);b.pairwise=function(){return h.pairwise()(this)}},function(f,b,a){f=a(0);a=a(295);f.Observable.prototype.pairwise=
a.pairwise},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(7);var k=a(0),e=a(3),g=a(17),c=a(101);a=function(a){function b(b,c){a.call(this);this.source=b;this.subjectFactory=c;this._refCount=0;this._isComplete=!1}h(b,a);b.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};b.prototype.getSubject=function(){var a=this._subject;
if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};b.prototype.connect=function(){var a=this._connection;a||(this._isComplete=!1,a=this._connection=new g.Subscription,a.add(this.source.subscribe(new d(this.getSubject(),this))),a.closed?(this._connection=null,a=g.Subscription.EMPTY):this._connection=a);return a};b.prototype.refCount=function(){return c.refCount()(this)};return b}(k.Observable);b.ConnectableObservable=a;a=a.prototype;b.connectableObservableDescriptor={operator:{value:null},
_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}};var d=function(a){function b(b,c){a.call(this,b);this.connectable=c}h(b,a);b.prototype._error=function(b){this._unsubscribe();a.prototype._error.call(this,b)};b.prototype._complete=function(){this.connectable._isComplete=!0;this._unsubscribe();
a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0;a._subject=null;a._connection=null;b&&b.unsubscribe()}};return b}(f.SubjectSubscriber);(function(){function a(a){this.connectable=a}a.prototype.call=function(a,b){var c=this.connectable;c._refCount++;a=new l(a,c);b=b.subscribe(a);a.closed||(a.connection=c.connect());return b};return a})();var l=function(a){function b(b,c){a.call(this,b);this.connectable=
c}h(b,a);b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;0>=b?this.connection=null:(a._refCount=b-1,1<b?this.connection=null:(b=this.connection,a=a._connection,this.connection=null,!a||b&&a!==b||a.unsubscribe()))}else this.connection=null};return b}(e.Subscriber)},function(f,b,a){var h=a(59);b.multicast=function(a,b){return h.multicast(a,b)(this)}},function(f,b,a){f=a(0);a=a(298);f.Observable.prototype.multicast=a.multicast},function(f,b,a){var h=
this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.mergeMapTo=function(a,b,f){void 0===f&&(f=Number.POSITIVE_INFINITY);"number"===typeof b&&(f=b,b=null);return function(c){return c.lift(new e(a,b,f))}};var e=function(){function a(a,b,c){void 0===c&&(c=Number.POSITIVE_INFINITY);this.ish=a;this.resultSelector=b;this.concurrent=c}a.prototype.call=
function(a,b){return b.subscribe(new g(a,this.ish,this.resultSelector,this.concurrent))};return a}();b.MergeMapToOperator=e;var g=function(a){function b(b,c,d,e){void 0===e&&(e=Number.POSITIVE_INFINITY);a.call(this,b);this.ish=c;this.resultSelector=d;this.concurrent=e;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}h(b,a);b.prototype._next=function(a){if(this.active<this.concurrent){var b=this.resultSelector,c=this.index++,d=this.ish,e=this.destination;this.active++;this._innerSub(d,
e,b,a,c)}else this.buffer.push(a)};b.prototype._innerSub=function(a,b,c,d,e){this.add(k.subscribeToResult(this,a,d,e))};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d,e){e=this.destination;this.resultSelector?this.trySelectResult(a,b,c,d):e.next(b)};b.prototype.trySelectResult=function(a,b,c,d){var e=this.resultSelector,f=this.destination;try{var g=e(a,b,c,d)}catch(r){f.error(r);return}f.next(g)};
b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return b}(f.OuterSubscriber);b.MergeMapToSubscriber=g},function(f,b,a){var h=a(300);b.mergeMapTo=function(a,b,f){void 0===f&&(f=Number.POSITIVE_INFINITY);return h.mergeMapTo(a,b,f)(this)}},function(f,b,a){f=a(0);a=a(301);f.Observable.prototype.flatMapTo=
a.mergeMapTo;f.Observable.prototype.mergeMapTo=a.mergeMapTo},function(f,b,a){var h=a(60);b.mergeMap=function(a,b,f){void 0===f&&(f=Number.POSITIVE_INFINITY);return h.mergeMap(a,b,f)(this)}},function(f,b,a){f=a(0);a=a(303);f.Observable.prototype.mergeMap=a.mergeMap;f.Observable.prototype.flatMap=a.mergeMap},function(f,b,a){var h=a(43);f=a(43);b.mergeStatic=f.merge;b.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(h.merge.apply(void 0,
[b].concat(a)))}}},function(f,b,a){var h=a(305);f=a(43);b.mergeStatic=f.merge;b.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return h.merge.apply(void 0,a)(this)}},function(f,b,a){f=a(0);a=a(306);f.Observable.prototype.merge=a.merge},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);b.mapTo=function(a){return function(b){return b.lift(new k(a))}};
var k=function(){function a(a){this.value=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.value))};return a}(),e=function(a){function b(b,c){a.call(this,b);this.value=c}h(b,a);b.prototype._next=function(a){this.destination.next(this.value)};return b}(f.Subscriber)},function(f,b,a){var h=a(308);b.mapTo=function(a){return h.mapTo(a)(this)}},function(f,b,a){f=a(0);a=a(309);f.Observable.prototype.mapTo=a.mapTo},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);b.map=function(a,b){return function(c){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new k(a,b))}};var k=function(){function a(a,b){this.project=a;this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.project,this.thisArg))};return a}();b.MapOperator=k;var e=function(a){function b(b,
c,e){a.call(this,b);this.project=c;this.count=0;this.thisArg=e||this}h(b,a);b.prototype._next=function(a){try{var b=this.project.call(this.thisArg,a,this.count++)}catch(n){this.destination.error(n);return}this.destination.next(b)};return b}(f.Subscriber)},function(f,b,a){var h=a(311);b.map=function(a,b){return h.map(a,b)(this)}},function(f,b,a){f=a(0);a=a(312);f.Observable.prototype.map=a.map},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);var k=a(63);b.ignoreElements=function(){return function(a){return a.lift(new e)}};var e=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new g(a))};return a}(),g=function(a){function b(){a.apply(this,arguments)}h(b,a);b.prototype._next=function(a){k.noop()};return b}(f.Subscriber)},function(f,b,a){var h=a(314);b.ignoreElements=function(){return h.ignoreElements()(this)}},function(f,
b,a){f=a(0);a=a(315);f.Observable.prototype.ignoreElements=a.ignoreElements},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);var k=a(17);b.finalize=function(a){return function(b){return b.lift(new e(a))}};var e=function(){function a(a){this.callback=a}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.callback))};return a}(),
g=function(a){function b(b,c){a.call(this,b);this.add(new k.Subscription(c))}h(b,a);return b}(f.Subscriber)},function(f,b,a){var h=a(317);b._finally=function(a){return h.finalize(a)(this)}},function(f,b,a){f=a(0);a=a(318);f.Observable.prototype.finally=a._finally;f.Observable.prototype._finally=a._finally},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};f=a(3);b.filter=function(a,b){return function(c){return c.lift(new k(a,b))}};var k=function(){function a(a,b){this.predicate=a;this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate,this.thisArg))};return a}(),e=function(a){function b(b,c,e){a.call(this,b);this.predicate=c;this.thisArg=e;this.count=0}h(b,a);b.prototype._next=function(a){try{var b=this.predicate.call(this.thisArg,a,this.count++)}catch(n){this.destination.error(n);return}b&&this.destination.next(a)};
return b}(f.Subscriber)},function(f,b,a){var h=a(320);b.filter=function(a,b){return h.filter(a,b)(this)}},function(f,b,a){f=a(0);a=a(321);f.Observable.prototype.filter=a.filter},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);b.exhaustMap=function(a,b){return function(c){return c.lift(new e(a,b))}};var e=function(){function a(a,
b){this.project=a;this.resultSelector=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.project,this.resultSelector))};return a}(),g=function(a){function b(b,c,d){a.call(this,b);this.project=c;this.resultSelector=d;this.hasCompleted=this.hasSubscription=!1;this.index=0}h(b,a);b.prototype._next=function(a){this.hasSubscription||this.tryNext(a)};b.prototype.tryNext=function(a){var b=this.index++,c=this.destination;try{var d=this.project(a,b);this.hasSubscription=!0;this.add(k.subscribeToResult(this,
d,a,b))}catch(u){c.error(u)}};b.prototype._complete=function(){this.hasCompleted=!0;this.hasSubscription||this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d,e){e=this.destination;this.resultSelector?this.trySelectResult(a,b,c,d):e.next(b)};b.prototype.trySelectResult=function(a,b,c,d){var e=this.resultSelector,f=this.destination;try{var g=e(a,b,c,d);f.next(g)}catch(r){f.error(r)}};b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(a){this.remove(a);
this.hasSubscription=!1;this.hasCompleted&&this.destination.complete()};return b}(f.OuterSubscriber)},function(f,b,a){var h=a(323);b.exhaustMap=function(a,b){return h.exhaustMap(a,b)(this)}},function(f,b,a){f=a(0);a=a(324);f.Observable.prototype.exhaustMap=a.exhaustMap},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(3);b.tap=function(a,
b,f){return function(c){return c.lift(new e(a,b,f))}};var e=function(){function a(a,b,c){this.nextOrObserver=a;this.error=b;this.complete=c}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.nextOrObserver,this.error,this.complete))};return a}(),g=function(a){function b(b,c,d,e){a.call(this,b);b=new k.Subscriber(c,d,e);b.syncErrorThrowable=!0;this.add(b);this.safeSubscriber=b}h(b,a);b.prototype._next=function(a){var b=this.safeSubscriber;b.next(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):
this.destination.next(a)};b.prototype._error=function(a){var b=this.safeSubscriber;b.error(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)};b.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return b}(k.Subscriber)},function(f,b,a){var h=a(326);b._do=function(a,b,f){return h.tap(a,b,f)(this)}},function(f,b,a){f=a(0);a=a(327);f.Observable.prototype.do=
a._do;f.Observable.prototype._do=a._do},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(3);var k=a(66),e=a(44);b.distinctUntilChanged=function(a,b){return function(c){return c.lift(new g(a,b))}};var g=function(){function a(a,b){this.compare=a;this.keySelector=b}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.compare,this.keySelector))};
return a}(),c=function(a){function b(b,c,d){a.call(this,b);this.keySelector=d;this.hasKey=!1;"function"===typeof c&&(this.compare=c)}h(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=k.tryCatch(this.keySelector)(a),b===e.errorObject))return this.destination.error(e.errorObject.e);var c=!1;if(this.hasKey){if(c=k.tryCatch(this.compare)(this.key,b),c===e.errorObject)return this.destination.error(e.errorObject.e)}else this.hasKey=!0;!1===
!!c&&(this.key=b,this.destination.next(a))};return b}(f.Subscriber)},function(f,b,a){var h=a(329);b.distinctUntilChanged=function(a,b){return h.distinctUntilChanged(a,b)(this)}},function(f,b,a){f=a(0);a=a(330);f.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(f,b,a){function h(a){a.debouncedNext()}var k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};f=a(3);var e=a(25);b.debounceTime=function(a,b){void 0===b&&(b=e.async);return function(c){return c.lift(new g(a,b))}};var g=function(){function a(a,b){this.dueTime=a;this.scheduler=b}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.dueTime,this.scheduler))};return a}(),c=function(a){function b(b,c,d){a.call(this,b);this.dueTime=c;this.scheduler=d;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}k(b,a);b.prototype._next=function(a){this.clearDebounce();this.lastValue=
a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(h,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(f.Subscriber)},
function(f,b,a){var h=a(25),k=a(332);b.debounceTime=function(a,b){void 0===b&&(b=h.async);return k.debounceTime(a,b)(this)}},function(f,b,a){f=a(0);a=a(333);f.Observable.prototype.debounceTime=a.debounceTime},function(f,b,a){var h=a(103);b.concatMapTo=function(a,b){return h.concatMap(function(){return a},b)}},function(f,b,a){var h=a(335);b.concatMapTo=function(a,b){return h.concatMapTo(a,b)(this)}},function(f,b,a){f=a(0);a=a(336);f.Observable.prototype.concatMapTo=a.concatMapTo},function(f,b,a){var h=
a(103);b.concatMap=function(a,b){return h.concatMap(a,b)(this)}},function(f,b,a){f=a(0);a=a(338);f.Observable.prototype.concatMap=a.concatMap},function(f,b,a){var h=a(104);b.concatAll=function(){return h.concatAll()(this)}},function(f,b,a){f=a(0);a=a(340);f.Observable.prototype.concatAll=a.concatAll},function(f,b,a){var h=a(42);f=a(42);b.concatStatic=f.concat;b.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(h.concat.apply(void 0,
[b].concat(a)))}}},function(f,b,a){var h=a(342);f=a(42);b.concatStatic=f.concat;b.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return h.concat.apply(void 0,a)(this)}},function(f,b,a){f=a(0);a=a(343);f.Observable.prototype.concat=a.concat},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(11);var k=a(10);
b.catchError=function(a){return function(b){var c=new e(a);b=b.lift(c);return c.caught=b}};var e=function(){function a(a){this.selector=a}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.selector,this.caught))};return a}(),g=function(a){function b(b,c,d){a.call(this,b);this.selector=c;this.caught=d}h(b,a);b.prototype.error=function(b){if(!this.isStopped){var c=void 0;try{c=this.selector(b,this.caught)}catch(m){a.prototype.error.call(this,m);return}this._unsubscribeAndRecycle();this.add(k.subscribeToResult(this,
c))}};return b}(f.OuterSubscriber)},function(f,b,a){var h=a(345);b._catch=function(a){return h.catchError(a)(this)}},function(f,b,a){f=a(0);a=a(346);f.Observable.prototype.catch=a._catch;f.Observable.prototype._catch=a._catch},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(110);f=a(0);var e=a(25),g=a(27),c=a(105);a=function(a){function b(b,
d,f){void 0===b&&(b=0);a.call(this);this.period=-1;this.dueTime=0;k.isNumeric(d)?this.period=1>Number(d)&&1||Number(d):g.isScheduler(d)&&(f=d);g.isScheduler(f)||(f=e.async);this.scheduler=f;this.dueTime=c.isDate(b)?+b-this.scheduler.now():b}h(b,a);b.create=function(a,c,d){void 0===a&&(a=0);return new b(a,c,d)};b.dispatch=function(a){var b=a.index,c=a.period,d=a.subscriber;d.next(b);if(!d.closed){if(-1===c)return d.complete();a.index=b+1;this.schedule(a,c)}};b.prototype._subscribe=function(a){return this.scheduler.schedule(b.dispatch,
this.dueTime,{index:0,period:this.period,subscriber:a})};return b}(f.Observable);b.TimerObservable=a},function(f,b,a){f=a(348);b.timer=f.TimerObservable.create},function(f,b,a){f=a(0);a=a(349);f.Observable.timer=a.timer},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(b,c){a.call(this);this.error=b;this.scheduler=
c}h(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){a.subscriber.error(a.error)};b.prototype._subscribe=function(a){var c=this.error,d=this.scheduler;a.syncErrorThrowable=!0;if(d)return d.schedule(b.dispatch,0,{error:c,subscriber:a});a.error(c)};return b}(a(0).Observable);b.ErrorObservable=f},function(f,b,a){f=a(351);b._throw=f.ErrorObservable.create},function(f,b,a){f=a(0);a=a(352);f.Observable.throw=a._throw},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(28),e=a(22);f=a(11);var g=a(10);b.race=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1===a.length)if(k.isArray(a[0]))a=a[0];else return a[0];return(new e.ArrayObservable(a)).lift(new c)};var c=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new d(a))};return a}();b.RaceOperator=c;var d=function(a){function b(b){a.call(this,
b);this.hasFirst=!1;this.observables=[];this.subscriptions=[]}h(b,a);b.prototype._next=function(a){this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{for(var c=0;c<b&&!this.hasFirst;c++){var d=a[c];d=g.subscribeToResult(this,d,d,c);this.subscriptions&&this.subscriptions.push(d);this.add(d)}this.observables=null}};b.prototype.notifyNext=function(a,b,c,d,e){if(!this.hasFirst){this.hasFirst=!0;for(a=0;a<this.subscriptions.length;a++)a!==
c&&(d=this.subscriptions[a],d.unsubscribe(),this.remove(d));this.subscriptions=null}this.destination.next(b)};return b}(f.OuterSubscriber);b.RaceSubscriber=d},function(f,b,a){f=a(0);a=a(354);f.Observable.race=a.race},function(f,b,a){f=a(0);a=a(106);f.Observable.of=a.of},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(0);var k=a(63);a=
function(a){function b(){a.call(this)}h(b,a);b.create=function(){return new b};b.prototype._subscribe=function(a){k.noop()};return b}(f.Observable);b.NeverObservable=a},function(f,b,a){f=a(357);b.never=f.NeverObservable.create},function(f,b,a){f=a(0);a=a(358);f.Observable.never=a.never},function(f,b,a){b.identity=function(a){return a}},function(f,b,a){f=a(0);a=a(43);f.Observable.merge=a.merge},function(f,b,a){f=function(){function a(b,e){void 0===e&&(e=a.now);this.SchedulerAction=b;this.now=e}a.prototype.schedule=
function(a,b,f){void 0===b&&(b=0);return(new this.SchedulerAction(this,a)).schedule(f,b)};a.now=Date.now?Date.now:function(){return+new Date};return a}();b.Scheduler=f},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(b,c){a.call(this)}h(b,a);b.prototype.schedule=function(a,b){return this};return b}(a(17).Subscription);
b.Action=f},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(110);f=a(0);var e=a(25);a=function(a){function b(b,c){void 0===b&&(b=0);void 0===c&&(c=e.async);a.call(this);this.period=b;this.scheduler=c;if(!k.isNumeric(b)||0>b)this.period=0;c&&"function"===typeof c.schedule||(this.scheduler=e.async)}h(b,a);b.create=function(a,c){void 0===
a&&(a=0);void 0===c&&(c=e.async);return new b(a,c)};b.dispatch=function(a){var b=a.subscriber,c=a.period;b.next(a.index);b.closed||(a.index+=1,this.schedule(a,c))};b.prototype._subscribe=function(a){var c=this.period;a.add(this.scheduler.schedule(b.dispatch,c,{index:0,subscriber:a,period:c}))};return b}(f.Observable);b.IntervalObservable=a},function(f,b,a){f=a(364);b.interval=f.IntervalObservable.create},function(f,b,a){f=a(0);a=a(365);f.Observable.interval=a.interval},function(f,b,a){f=a(113);b.fromPromise=
f.PromiseObservable.create},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(0);var k=a(66),e=a(67),g=a(44),c=a(17),d=Object.prototype.toString;a=function(a){function b(b,c,d,e){a.call(this);this.sourceObj=b;this.eventName=c;this.selector=d;this.options=e}h(b,a);b.create=function(a,c,d,f){e.isFunction(d)&&(f=d,d=void 0);return new b(a,
c,f,d)};b.setupSubscription=function(a,e,f,g,h){if(a&&"[object NodeList]"===d.call(a)||a&&"[object HTMLCollection]"===d.call(a))for(var k=0,l=a.length;k<l;k++)b.setupSubscription(a[k],e,f,g,h);else if(a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener){a.addEventListener(e,f,h);var m=function(){return a.removeEventListener(e,f)}}else if(a&&"function"===typeof a.on&&"function"===typeof a.off)a.on(e,f),m=function(){return a.off(e,f)};else if(a&&"function"===typeof a.addListener&&
"function"===typeof a.removeListener)a.addListener(e,f),m=function(){return a.removeListener(e,f)};else throw new TypeError("Invalid event target");g.add(new c.Subscription(m))};b.prototype._subscribe=function(a){var c=this.selector;b.setupSubscription(this.sourceObj,this.eventName,c?function(){for(var b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];b=k.tryCatch(c).apply(void 0,b);b===g.errorObject?a.error(g.errorObject.e):a.next(b)}:function(b){return a.next(b)},a,this.options)};return b}(f.Observable);
b.FromEventObservable=a},function(f,b,a){f=a(368);b.fromEvent=f.FromEventObservable.create},function(f,b,a){f=a(0);a=a(369);f.Observable.fromEvent=a.fromEvent},function(f,b,a){var h=a(0);f=function(){function a(a,b,c){this.kind=a;this.value=b;this.error=c;this.hasValue="N"===a}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.error);case "C":return a.complete&&a.complete()}};a.prototype.do=function(a,b,c){switch(this.kind){case "N":return a&&
a(this.value);case "E":return b&&b(this.error);case "C":return c&&c()}};a.prototype.accept=function(a,b,c){return a&&"function"===typeof a.next?this.observe(a):this.do(a,b,c)};a.prototype.toObservable=function(){switch(this.kind){case "N":return h.Observable.of(this.value);case "E":return h.Observable.throw(this.error);case "C":return h.Observable.empty()}throw Error("unexpected notification kind value");};a.createNext=function(b){return"undefined"!==typeof b?new a("N",b):a.undefinedValueNotification};
a.createError=function(b){return new a("E",void 0,b)};a.createComplete=function(){return a.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();b.Notification=f},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(0);var k=a(62),e=a(26);a=function(a){function b(b,c){a.call(this);
this.arrayLike=b;this.scheduler=c;c||1!==b.length||(this._isScalar=!0,this.value=b[0])}h(b,a);b.create=function(a,c){var d=a.length;return 0===d?new e.EmptyObservable:1===d?new k.ScalarObservable(a[0],c):new b(a,c)};b.dispatch=function(a){var b=a.arrayLike,c=a.index,d=a.subscriber;d.closed||(c>=a.length?d.complete():(d.next(b[c]),a.index=c+1,this.schedule(a)))};b.prototype._subscribe=function(a){var c=this.arrayLike,d=this.scheduler,e=c.length;if(d)return d.schedule(b.dispatch,0,{arrayLike:c,index:0,
length:e,subscriber:a});for(d=0;d<e&&!a.closed;d++)a.next(c[d]);a.complete()};return b}(f.Observable);b.ArrayLikeObservable=a},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(18);f=a(0);var e=a(61);a=function(a){function b(b,d){a.call(this);this.scheduler=d;if(null==b)throw Error("iterator cannot be null.");if((d=b[e.iterator])||"string"!==
typeof b)if(d||void 0===b.length){if(!d)throw new TypeError("object is not iterable");b=b[e.iterator]()}else b=new c(b);else b=new g(b);this.iterator=b}h(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){var b=a.index,c=a.iterator,d=a.subscriber;if(a.hasError)d.error(a.error);else{var e=c.next();e.done?d.complete():(d.next(e.value),a.index=b+1,d.closed?"function"===typeof c.return&&c.return():this.schedule(a))}};b.prototype._subscribe=function(a){var c=this.iterator,d=this.scheduler;
if(d)return d.schedule(b.dispatch,0,{index:0,iterator:c,subscriber:a});do{d=c.next();if(d.done){a.complete();break}else a.next(d.value);if(a.closed){"function"===typeof c.return&&c.return();break}}while(1)};return b}(f.Observable);b.IteratorObservable=a;var g=function(){function a(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);this.str=a;this.idx=b;this.len=c}a.prototype[e.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:
{done:!0,value:void 0}};return a}(),c=function(){function a(a,b,c){void 0===b&&(b=0);if(void 0===c)if(c=+a.length,isNaN(c))c=0;else if(0!==c&&"number"===typeof c&&k.root.isFinite(c)){var e=+c;e=0===e?e:isNaN(e)?e:0>e?-1:1;c=e*Math.floor(Math.abs(c));c=0>=c?0:c>d?d:c}this.arr=a;this.idx=b;this.len=c}a.prototype[e.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),d=Math.pow(2,53)-1},function(f,
b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(28),e=a(116),g=a(115),c=a(113),d=a(373),l=a(22),n=a(372),m=a(61),t=a(0),u=a(112),p=a(64);f=function(a){function b(b,c){a.call(this,null);this.ish=b;this.scheduler=c}h(b,a);b.create=function(a,f){if(null!=a){if("function"===typeof a[p.observable])return a instanceof t.Observable&&!f?a:new b(a,f);if(k.isArray(a))return new l.ArrayObservable(a,
f);if(g.isPromise(a))return new c.PromiseObservable(a,f);if("function"===typeof a[m.iterator]||"string"===typeof a)return new d.IteratorObservable(a,f);if(e.isArrayLike(a))return new n.ArrayLikeObservable(a,f)}throw new TypeError((null!==a&&typeof a||a)+" is not observable");};b.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[p.observable]().subscribe(a):b[p.observable]().subscribe(new u.ObserveOnSubscriber(a,c,0))};return b}(t.Observable);b.FromObservable=f},function(f,
b,a){f=a(0);a=a(114);f.Observable.from=a.from},function(f,b,a){f=a(26);b.empty=f.EmptyObservable.create},function(f,b,a){f=a(0);a=a(376);f.Observable.empty=a.empty},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(0);var k=a(10);a=a(11);f=function(a){function b(b){a.call(this);this.observableFactory=b}h(b,a);b.create=function(a){return new b(a)};
b.prototype._subscribe=function(a){return new e(a,this.observableFactory)};return b}(f.Observable);b.DeferObservable=f;var e=function(a){function b(b,c){a.call(this,b);this.factory=c;this.tryDefer()}h(b,a);b.prototype.tryDefer=function(){try{this._callFactory()}catch(d){this._error(d)}};b.prototype._callFactory=function(){var a=this.factory();a&&this.add(k.subscribeToResult(this,a))};return b}(a.OuterSubscriber)},function(f,b,a){f=a(378);b.defer=f.DeferObservable.create},function(f,b,a){f=a(0);a=
a(379);f.Observable.defer=a.defer},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(b,c,d){a.call(this);this.parent=b;this.outerValue=c;this.outerIndex=d;this.index=0}h(b,a);b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};b.prototype._error=function(a){this.parent.notifyError(a,
this);this.unsubscribe()};b.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return b}(a(3).Subscriber);b.InnerSubscriber=f},function(f,b,a){var h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(22),e=a(28);f=a(11);var g=a(10),c={};b.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=
null;"function"===typeof a[a.length-1]&&(c=a.pop());1===a.length&&e.isArray(a[0])&&(a=a[0].slice());return function(b){return b.lift.call(new k.ArrayObservable([b].concat(a)),new d(c))}};var d=function(){function a(a){this.project=a}a.prototype.call=function(a,b){return b.subscribe(new l(a,this.project))};return a}();b.CombineLatestOperator=d;var l=function(a){function b(b,c){a.call(this,b);this.project=c;this.active=0;this.values=[];this.observables=[]}h(b,a);b.prototype._next=function(a){this.values.push(c);
this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{this.toRespond=this.active=b;for(var c=0;c<b;c++){var d=a[c];this.add(g.subscribeToResult(this,d,d,c))}}};b.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};b.prototype.notifyNext=function(a,b,d,e,f){a=this.values;e=a[d];e=this.toRespond?e===c?--this.toRespond:this.toRespond:0;a[d]=b;0===e&&(this.project?this._tryProject(a):this.destination.next(a.slice()))};
b.prototype._tryProject=function(a){try{var b=this.project.apply(this,a)}catch(p){this.destination.error(p);return}this.destination.next(b)};return b}(f.OuterSubscriber);b.CombineLatestSubscriber=l},function(f,b,a){var h=a(27),k=a(28),e=a(22),g=a(382);b.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var f=b=null;h.isScheduler(a[a.length-1])&&(f=a.pop());"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&k.isArray(a[0])&&(a=a[0]);return(new e.ArrayObservable(a,
f)).lift(new g.CombineLatestOperator(b))}},function(f,b,a){function h(a){return a?1===a.length?a[0]:function(b){return a.reduce(function(a,b){return b(a)},b)}:k.noop}var k=a(63);b.pipe=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return h(a)};b.pipeFromArray=h},function(f,b,a){var h=this&&this.__extends||function(a,b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=function(a){function b(b){a.call(this);
this.errors=b;b=Error.call(this,b?b.length+" errors occurred during unsubscription:\n  "+b.map(function(a,b){return b+1+") "+a.toString()}).join("\n  "):"");this.name=b.name="UnsubscriptionError";this.stack=b.stack;this.message=b.message}h(b,a);return b}(Error);b.UnsubscriptionError=f},function(f,b,a){var h=a(3),k=a(65),e=a(117);b.toSubscriber=function(a,b,d){if(a){if(a instanceof h.Subscriber)return a;if(a[k.rxSubscriber])return a[k.rxSubscriber]()}return a||b||d?new h.Subscriber(a,b,d):new h.Subscriber(e.empty)}},
function(f,b){b=function(){return this}();try{b=b||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(b=window)}f.exports=b},function(f,b,a){f=a(0);a=a(383);f.Observable.combineLatest=a.combineLatest},function(f,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(388);a(380);a(377);a(375);a(370);a(111);a(366);a(361);a(359);a(356);a(355);a(353);a(350);a(347);a(344);a(341);a(339);a(337);a(334);a(331);a(328);a(325);a(322);a(319);a(316);a(313);a(310);a(307);a(304);a(302);
a(299);a(296);a(293);a(290);a(287);a(284);a(281);a(278);a(275);a(272);a(269);a(266);a(263);a(260);a(257);a(254);a(1);f=a(251);b.default=f.default},function(f,b,a){f.exports=a(389).default}])});
