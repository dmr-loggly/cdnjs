/*
* datalist-polyfill.js - https://github.com/mfranzke/datalist-polyfill
* @license Copyright(c) 2017 by Maximilian Franzke
* Supported by Christian and Johannes - many thanks for that !
*/
!function(){"use strict";if(!("list"in document.createElement("input"))||(!document.createElement("datalist")||!window.HTMLDataListElement)){!function(e){e&&e.prototype&&void 0===e.prototype.list&&Object.defineProperty(e.prototype,"list",{get:function(){if("object"==typeof this&&this instanceof e){var t=this.getAttribute("list");return document.getElementById(t)}return null}})}(window.HTMLInputElement),function(e){e&&e.prototype&&void 0===e.prototype.options&&Object.defineProperty(e.prototype,"options",{get:function(){if("object"==typeof this&&this instanceof e)return this.getElementsByTagName("option")}})}(window.HTMLElement);var e=function(e){var t=e.target,i=t.tagName;if(i&&"input"===i.toLowerCase()&&t.getAttribute("list")){var r=t.getAttribute("list"),n=document.getElementById(r);if(null!==n){var a=n.getElementsByTagName("select")[0];if(void 0!==a){if(27===e.keyCode)return a.setAttributeNode(document.createAttribute("hidden")),void a.setAttribute("aria-hidden",!0);var o=n.querySelectorAll("option[value]"),d=t.value,u=document.createDocumentFragment(),l=document.createDocumentFragment(),s=!1;if("email"===t.type&&t.multiple){var c=d.split(","),p=c.length-1;d=c[p].trim()}""!==d&&(Array.prototype.slice.call(o).sort(function(e,t){return e.value.localeCompare(t.value)}).forEach(function(e){var t=e.value;""!==t&&-1!==t.toLowerCase().indexOf(d.toLowerCase())&&!1===e.disabled?(e.innerText=t,u.appendChild(e),s=!0):l.appendChild(e)}),a.appendChild(u),a.selectedIndex=0,n.appendChild(l)),s?a.removeAttribute("hidden"):a.setAttributeNode(document.createAttribute("hidden")),a.setAttribute("aria-hidden",!s),38!==e.keyCode&&40!==e.keyCode||a.focus()}}}},t=function(r){var n=r.target,a=n.tagName,o=window.getComputedStyle(n);if(a&&"input"===a.toLowerCase()&&n.getAttribute("list")){var d=r.type,u=n.getAttribute("list"),l=document.getElementById(u);if(null!==l){var s=l.getElementsByTagName("select")[0],c="focus"===d&&""!==r.target.value||r.relatedTarget&&r.relatedTarget===s,p=l.title;if(void 0===s){var m=n.getClientRects(),b=document.createElement("option");s=document.createElement("select"),s.setAttributeNode(document.createAttribute("hidden")),s.style.position="absolute",s.setAttribute("aria-hidden",!0),s.setAttribute("aria-live","polite"),s.setAttribute("role","listbox"),"rtl"===o.direction?s.style.marginRight="-"+m[0].width+"px":s.style.marginLeft="-"+m[0].width+"px",s.style.marginTop=m[0].height+"px",s.style.minWidth=m[0].width+"px",b.innerText=p,b.disabled=!0,s.appendChild(b),l.appendChild(s),s.addEventListener("change",i),s.addEventListener("blur",i),s.addEventListener("keyup",i),n.setAttribute("autocomplete","off"),n.setAttribute("role","textbox"),n.setAttribute("aria-haspopup","true"),n.setAttribute("aria-autocomplete","list"),n.setAttribute("aria-owns",u)}switch(c?s.removeAttribute("hidden"):s.setAttributeNode(document.createAttribute("hidden")),s.setAttribute("aria-hidden",!c),d){case"focus":n.addEventListener("keyup",e),n.addEventListener("blur",t,!0);break;case"blur":n.removeEventListener("keyup",e),n.removeEventListener("blur",t,!0);break}}}},i=function(e){var t=e.target,i=t.tagName,r=t.parentNode.title;if(i&&"select"===i.toLowerCase()){var n=e.type,a="keyup"===n&&13!==e.keyCode&&27!==e.keyCode;if("change"===n||"keyup"===n&&13===e.keyCode){var o=t.parentNode.id,d=document.querySelector('input[list="'+o+'"]'),u=t.value;if(null!==d&&u.length>0&&u!==r){var l=d.value,s;"email"===d.type&&d.multiple&&(s=l.lastIndexOf(","))>-1?d.value=l.slice(0,s)+","+u:d.value=u}}a?t.removeAttribute("hidden"):t.setAttributeNode(document.createAttribute("hidden")),t.setAttribute("aria-hidden",!a)}};document.addEventListener("focus",t,!0)}}();