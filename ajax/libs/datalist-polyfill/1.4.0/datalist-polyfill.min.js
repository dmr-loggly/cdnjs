/*
* datalist-polyfill.js - https://github.com/mfranzke/datalist-polyfill
* @license Copyright(c) 2017 by Maximilian Franzke
* Supported by Christian and Johannes - many thanks for that !
*/
!function(){"use strict";if(!("list"in document.createElement("input"))||(!document.createElement("datalist")||!window.HTMLDataListElement)){!function(e){e&&e.prototype&&void 0===e.prototype.list&&Object.defineProperty(e.prototype,"list",{get:function(){if("object"==typeof this&&this instanceof e){var t=this.getAttribute("list");return document.getElementById(t)}return null}})}(window.HTMLInputElement),function(e){e&&e.prototype&&void 0===e.prototype.options&&Object.defineProperty(e.prototype,"options",{get:function(){if("object"==typeof this&&this instanceof e)return this.getElementsByTagName("option")}})}(window.HTMLElement);var e=function(e){var t=e.target,i=t.tagName;if(i&&"input"===i.toLowerCase()&&t.getAttribute("list")){var n=t.getAttribute("list"),r=document.getElementById(n);if(null!==r){var a=r.getElementsByTagName("select")[0];if(void 0!==a){if(27===e.keyCode)return a.classList.remove("visible"),void a.setAttribute("aria-hidden",!0);var o=r.querySelectorAll("option[value]"),l=t.value,s=document.createDocumentFragment(),u=document.createDocumentFragment(),d=!1;if("email"===t.type&&t.multiple){var p=l.split(","),c=p.length-1;l=p[c].trim()}""!==l&&(Array.prototype.slice.call(o).sort(function(e,t){return e.value.localeCompare(t.value)}).forEach(function(e){var t=e.value;""!==t&&-1!==t.toLowerCase().indexOf(l.toLowerCase())&&!1===e.disabled?(e.innerText=t,s.appendChild(e),d=!0):u.appendChild(e)}),a.appendChild(s),a.selectedIndex=0,r.appendChild(u)),a.classList.toggle("visible",d),a.setAttribute("aria-hidden",!d),38!==e.keyCode&&40!==e.keyCode||a.focus()}}}},t=function(n){var r=n.target,a=r.tagName,o=window.getComputedStyle(r);if(a&&"input"===a.toLowerCase()&&r.getAttribute("list")){var l=n.type,s=r.getAttribute("list"),u=document.getElementById(s);if(null!==u){var d=u.getElementsByTagName("select")[0],p="focus"===l&&""!==n.target.value||n.relatedTarget&&n.relatedTarget===d,c=u.title;if(void 0===d){var m=r.getClientRects(),v=document.createElement("option");d=document.createElement("select"),d.setAttribute("aria-hidden",!0),d.setAttribute("aria-live","polite"),d.setAttribute("role","listbox"),"rtl"===o.direction?d.style.marginRight="-"+m[0].width+"px":d.style.marginLeft="-"+m[0].width+"px",d.style.marginTop=m[0].height+"px",d.style.minWidth=m[0].width+"px",v.innerText=c,v.disabled=!0,d.appendChild(v),u.appendChild(d),d.addEventListener("change",i),d.addEventListener("blur",i),d.addEventListener("keyup",i),r.setAttribute("autocomplete","off"),r.setAttribute("role","textbox"),r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-autocomplete","list"),r.setAttribute("aria-owns",s)}switch(d.classList.toggle("visible",p),d.setAttribute("aria-hidden",!p),l){case"focus":r.addEventListener("keyup",e),r.addEventListener("blur",t,!0);break;case"blur":r.removeEventListener("keyup",e),r.removeEventListener("blur",t,!0);break}}}},i=function(e){var t=e.target,i=t.tagName,n=t.parentNode.title;if(i&&"select"===i.toLowerCase()){var r=e.type,a="keyup"===r&&13!==e.keyCode&&27!==e.keyCode;if("change"===r||"keyup"===r&&13===e.keyCode){var o=t.parentNode.id,l=document.querySelector('input[list="'+o+'"]'),s=t.value;if(null!==l&&s.length>0&&s!==n){var u=l.value,d;"email"===l.type&&l.multiple&&(d=u.lastIndexOf(","))>-1?l.value=u.slice(0,d)+","+s:l.value=s}}t.classList.toggle("visible",a),t.setAttribute("aria-hidden",!a)}};document.addEventListener("focus",t,!0)}}();