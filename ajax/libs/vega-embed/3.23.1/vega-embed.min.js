!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vega-lib"),require("vega-lite")):"function"==typeof define&&define.amd?define(["vega-lib","vega-lite"],t):e.vegaEmbed=t(e.vega,e.vl)}(this,function(e,t){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e}function a(e){var t=o(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===r&&e.documentElement.namespaceURI===r?e.createElement(n):e.createElementNS(t,n)}})(t)}function n(){}function p(e){return null==e?n:function(){return this.querySelector(e)}}function f(){return[]}var s=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var l=document.documentElement;if(!l.matches){var c=l.webkitMatchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector;s=function(e){return function(){return c.call(this,e)}}}}var u=s;function h(e){return new Array(e.length)}function d(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}d.prototype={constructor:d,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var v="$";function _(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new d(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function S(e,t,n,r,i,o,a){var s,l,c,u={},p=t.length,f=o.length,h=new Array(p);for(s=0;s<p;++s)(l=t[s])&&(h[s]=c=v+a.call(l,l.__data__,s,t),c in u?i[s]=l:u[c]=l);for(s=0;s<f;++s)(l=u[c=v+a.call(e,o[s],s,o)])?((r[s]=l).__data__=o[s],u[c]=null):n[s]=new d(e,o[s]);for(s=0;s<p;++s)(l=t[s])&&u[h[s]]===l&&(i[s]=l)}function g(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function m(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function y(e){return e.trim().split(/^|\s+/)}function b(e){return e.classList||new w(e)}function w(e){this._node=e,this._names=y(e.getAttribute("class")||"")}function x(e,t){for(var n=b(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function k(e,t){for(var n=b(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function E(){this.textContent=""}function C(){this.innerHTML=""}function A(){this.nextSibling&&this.parentNode.appendChild(this)}function j(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O(){return null}function z(){var e=this.parentNode;e&&e.removeChild(this)}function T(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function N(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}w.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var P={},I=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));function F(n,e,t){return n=W(n,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}function W(n,r,i){return function(e){var t=I;I=e;try{n.call(this,this.__data__,r,i)}finally{I=t}}}function L(o){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,i=e.length;n<i;++n)t=e[n],o.type&&t.type!==o.type||t.name!==o.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.capture);++r?e.length=r:delete this.__on}}}function D(l,c,u){var p=P.hasOwnProperty(l.type)?F:W;return function(e,t,n){var r,i=this.__on,o=p(c,t,n);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=u),void(r.value=c);this.addEventListener(l.type,o,u),r={type:l.type,name:l.name,value:c,listener:o,capture:u},i?i.push(r):this.__on=[r]}}function R(e,t,n){var r=m(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var $=[null];function B(e,t){this._groups=e,this._parents=t}function V(){return new B([[document.documentElement]],$)}function M(e,t,n){return e.fields=t||[],e.fname=n,e}function q(e){throw Error(e)}B.prototype=V.prototype={constructor:B,select:function(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new B(r,this._parents)},selectAll:function(e){var t;"function"!=typeof e&&(e=null==(t=e)?f:function(){return this.querySelectorAll(t)});for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var s,l=n[a],c=l.length,u=0;u<c;++u)(s=l[u])&&(i.push(e.call(s,s.__data__,u,l)),o.push(s));return new B(i,o)},filter:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new B(r,this._parents)},data:function(e,t){if(!e)return d=new Array(this.size()),u=-1,this.each(function(e){d[++u]=e}),d;var n,r=t?S:_,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var p=i[u],f=o[u],h=f.length,d=e.call(p,p&&p.__data__,u,i),v=d.length,g=l[u]=new Array(v),m=s[u]=new Array(v);r(p,f,g,m,c[u]=new Array(h),d,t);for(var y,b,w=0,x=0;w<v;++w)if(y=g[w]){for(x<=w&&(x=w+1);!(b=m[x])&&++x<v;);y._next=b||null}}return(s=new B(s,i))._enter=l,s._exit=c,s},enter:function(){return new B(this._enter||this._groups.map(h),this._parents)},exit:function(){return new B(this._exit||this._groups.map(h),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],p=c.length,f=a[s]=new Array(p),h=0;h<p;++h)(l=c[h]||u[h])&&(f[h]=l);for(;s<r;++s)a[s]=t[s];return new B(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n||(n=g);for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var a,s=t[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new B(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=o(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):(r=this.node(),i=e,r.style.getPropertyValue(i)||m(r).getComputedStyle(r,null).getPropertyValue(i));var r,i},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=y(e+"");if(arguments.length<2){for(var r=b(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?x:k)(this,e)}}:t?function(e){return function(){x(this,e)}}:function(e){return function(){k(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?E:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?C:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(A)},lower:function(){return this.each(j)},append:function(e){var t="function"==typeof e?e:a(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:a(e),r=null==t?O:"function"==typeof t?t:p(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(z)},clone:function(e){return this.select(e?N:T)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=o.length;if(!(arguments.length<2)){for(s=t?D:L,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return R(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return R(this,e,t)}})(e,t))}};var H=Array.isArray;function U(e){return e===Object(e)}function X(e){return"string"==typeof e}function J(e){return H(e)?"["+e.map(J)+"]":U(e)||X(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var G,Y,Z,K,Q=[],ee=(Z=function(e){var t,n,r,i=[],o=null,a=0,s=e.length,l="";function c(){i.push(l+e.substring(t,n)),l="",t=n+1}for(e+="",t=n=0;n<s;++n)if("\\"===(r=e[n]))l+=e.substring(t,n),t=++n;else if(r===o)c(),o=null,a=-1;else{if(o)continue;t===a&&'"'===r?(t=n+1,o=r):t===a&&"'"===r?(t=n+1,o=r):"."!==r||a?"["===r?(t<n&&c(),a=t=n+1):"]"===r&&(a||q("Access path missing open bracket: "+e),0<a&&c(),a=0,t=n+1):t<n?c():t=n+1}return a&&q("Access path missing closing bracket: "+e),o&&q("Access path missing closing quote: "+e),t<n&&(n++,c()),i}(G="id"),K="return _["+Z.map(J).join("][")+"];",M(Function("_",K),[G=1===Z.length?Z[0]:G],Y||G),M(function(e){return e},Q,"identity"),M(function(){return 0},Q,"zero"),M(function(){return 1},Q,"one"),M(function(){return!0},Q,"true"),M(function(){return!1},Q,"false"),"3.23.1"),te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ne(o,a,s,l){return new(s||(s=Promise))(function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((l=l.apply(o,a||[])).next())})}function re(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var ie=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g;function oe(e,t,n){return t in e?e[t]:n}var ae=function(e,t){t=t||{};var d=JSON.stringify([1],null,oe(t,"indent",2)).slice(2,-3),v=oe(t,"margins",!1),g=""===d?1/0:oe(t,"maxLength",80);return function o(a,e,t){a&&"function"==typeof a.toJSON&&(a=a.toJSON());var n=JSON.stringify(a);if(void 0===n)return n;var r,i,s=g-e.length-t;if(n.length<=s){var l=(i={"{":"{"+(r=v?" ":""),"[":"["+r,"}":r+"}","]":r+"]",",":", ",":":": "},n.replace(ie,function(e,t){return t?e:i[e]}));if(l.length<=s)return l}if("object"==typeof a&&null!==a){var c,u=e+d,p=[],f=function(e,t){return t===e.length-1?0:1};if(Array.isArray(a)){for(var h=0;h<a.length;h++)p.push(o(a[h],u,f(a,h))||"null");c="[]"}else Object.keys(a).forEach(function(e,t,n){var r=JSON.stringify(e)+": ",i=o(a[e],u,r.length+f(n,t));void 0!==i&&p.push(r+i)}),c="{}";if(0<p.length)return[c[0],d+p.join(",\n"+u),c[1]].join("\n"+e)}return n}(e,"",0)};function se(e,t){return e(t={exports:{}},t.exports),t.exports}var le,ce=se(function(e,r){var p;r=e.exports=X,p="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},r.SEMVER_SPEC_VERSION="2.0.0";var i=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,l=r.re=[],t=r.src=[],n=0,a=n++;t[a]="0|[1-9]\\d*";var s=n++;t[s]="[0-9]+";var c=n++;t[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=n++;t[u]="("+t[a]+")\\.("+t[a]+")\\.("+t[a]+")";var f=n++;t[f]="("+t[s]+")\\.("+t[s]+")\\.("+t[s]+")";var h=n++;t[h]="(?:"+t[a]+"|"+t[c]+")";var d=n++;t[d]="(?:"+t[s]+"|"+t[c]+")";var v=n++;t[v]="(?:-("+t[h]+"(?:\\."+t[h]+")*))";var g=n++;t[g]="(?:-?("+t[d]+"(?:\\."+t[d]+")*))";var m=n++;t[m]="[0-9A-Za-z-]+";var y=n++;t[y]="(?:\\+("+t[m]+"(?:\\."+t[m]+")*))";var b=n++,w="v?"+t[u]+t[v]+"?"+t[y]+"?";t[b]="^"+w+"$";var x="[v=\\s]*"+t[f]+t[g]+"?"+t[y]+"?",_=n++;t[_]="^"+x+"$";var S=n++;t[S]="((?:<|>)?=?)";var k=n++;t[k]=t[s]+"|x|X|\\*";var E=n++;t[E]=t[a]+"|x|X|\\*";var C=n++;t[C]="[v=\\s]*("+t[E]+")(?:\\.("+t[E]+")(?:\\.("+t[E]+")(?:"+t[v]+")?"+t[y]+"?)?)?";var A=n++;t[A]="[v=\\s]*("+t[k]+")(?:\\.("+t[k]+")(?:\\.("+t[k]+")(?:"+t[g]+")?"+t[y]+"?)?)?";var j=n++;t[j]="^"+t[S]+"\\s*"+t[C]+"$";var O=n++;t[O]="^"+t[S]+"\\s*"+t[A]+"$";var z=n++;t[z]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var T=n++;t[T]="(?:~>?)";var N=n++;t[N]="(\\s*)"+t[T]+"\\s+",l[N]=new RegExp(t[N],"g");var P=n++;t[P]="^"+t[T]+t[C]+"$";var I=n++;t[I]="^"+t[T]+t[A]+"$";var F=n++;t[F]="(?:\\^)";var W=n++;t[W]="(\\s*)"+t[F]+"\\s+",l[W]=new RegExp(t[W],"g");var L=n++;t[L]="^"+t[F]+t[C]+"$";var D=n++;t[D]="^"+t[F]+t[A]+"$";var R=n++;t[R]="^"+t[S]+"\\s*("+x+")$|^$";var $=n++;t[$]="^"+t[S]+"\\s*("+w+")$|^$";var B=n++;t[B]="(\\s*)"+t[S]+"\\s*("+x+"|"+t[C]+")",l[B]=new RegExp(t[B],"g");var V=n++;t[V]="^\\s*("+t[C]+")\\s+-\\s+("+t[C]+")\\s*$";var M=n++;t[M]="^\\s*("+t[A]+")\\s+-\\s+("+t[A]+")\\s*$";var q=n++;t[q]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)p(H,t[H]),l[H]||(l[H]=new RegExp(t[H]));function U(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof X)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t.loose?l[_]:l[b]).test(e))return null;try{return new X(e,t)}catch(e){return null}}function X(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof X){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof X))return new X(e,t);p("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?l[_]:l[b]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<o)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}r.parse=U,r.valid=function(e,t){var n=U(e,t);return n?n.version:null},r.clean=function(e,t){var n=U(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},(r.SemVer=X).prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(e){return p("SemVer.compare",this.version,this.options,e),e instanceof X||(e=new X(e,this.options)),this.compareMain(e)||this.comparePre(e)},X.prototype.compareMain=function(e){return e instanceof X||(e=new X(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},X.prototype.comparePre=function(e){if(e instanceof X||(e=new X(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(p("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return G(n,r)}while(++t)},X.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;0<=--n;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},r.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new X(e,n).inc(t,r).version}catch(e){return null}},r.diff=function(e,t){{if(Q(e,t))return null;var n=U(e),r=U(t);if(n.prerelease.length||r.prerelease.length){for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return"pre"+i;return"prerelease"}for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return i}},r.compareIdentifiers=G;var J=/^[0-9]+$/;function G(e,t){var n=J.test(e),r=J.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:t<e?1:0}function Y(e,t,n){return new X(e,n).compare(new X(t,n))}function Z(e,t,n){return 0<Y(e,t,n)}function K(e,t,n){return Y(e,t,n)<0}function Q(e,t,n){return 0===Y(e,t,n)}function ee(e,t,n){return 0!==Y(e,t,n)}function te(e,t,n){return 0<=Y(e,t,n)}function ne(e,t,n){return Y(e,t,n)<=0}function re(e,t,n,r){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=Q(e,n,r);break;case"!=":i=ee(e,n,r);break;case">":i=Z(e,n,r);break;case">=":i=te(e,n,r);break;case"<":i=K(e,n,r);break;case"<=":i=ne(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);p("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,p("comp",this)}r.rcompareIdentifiers=function(e,t){return G(t,e)},r.major=function(e,t){return new X(e,t).major},r.minor=function(e,t){return new X(e,t).minor},r.patch=function(e,t){return new X(e,t).patch},r.compare=Y,r.compareLoose=function(e,t){return Y(e,t,!0)},r.rcompare=function(e,t,n){return Y(t,e,n)},r.sort=function(e,n){return e.sort(function(e,t){return r.compare(e,t,n)})},r.rsort=function(e,n){return e.sort(function(e,t){return r.rcompare(e,t,n)})},r.gt=Z,r.lt=K,r.eq=Q,r.neq=ee,r.gte=te,r.lte=ne,r.cmp=re,r.Comparator=ie;var oe={};function ae(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof ie)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,n,r,i,o,a,s,l,c,u,p,f){return((t=se(n)?"":se(r)?">="+n+".0.0":se(i)?">="+n+"."+r+".0":">="+t)+" "+(s=se(l)?"":se(c)?"<"+(+l+1)+".0.0":se(u)?"<"+l+"."+(+c+1)+".0":p?"<="+l+"."+c+"."+u+"-"+p:"<="+s)).trim()}function ce(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(n||(n={}),!t.prerelease.length||n.includePrerelease)return!0;for(r=0;r<e.length;r++)if(p(e[r].semver),e[r].semver!==oe&&0<e[r].semver.prerelease.length){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}function ue(e,t,n){try{t=new ae(t,n)}catch(e){return!1}return t.test(e)}function pe(e,t,n,r){var i,o,a,s,l;switch(e=new X(e,r),t=new ae(t,r),n){case">":i=Z,o=ne,a=K,s=">",l=">=";break;case"<":i=K,o=te,a=Z,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],p=null,f=null;if(u.forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),p=p||e,f=f||e,i(e.semver,p.semver,r)?p=e:a(e.semver,f.semver,r)&&(f=e)}),p.operator===s||p.operator===l)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===l&&a(e,f.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?l[R]:l[$],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new X(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return p("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new X(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new ae(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new ae(this.value,t),ue(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&a||s||l},(r.Range=ae).prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?l[M]:l[V];e=e.replace(n,le),p("hyphen replace",e),e=e.replace(l[B],"$1$2$3"),p("comparator trim",e,l[B]),e=(e=(e=e.replace(l[N],"$1~")).replace(l[W],"$1^")).split(/\s+/).join(" ");var r=t?l[R]:l[$],i=e.split(" ").map(function(e){return t=e,n=this.options,p("comp",t,n),s=n,t=t.trim().split(/\s+/).map(function(e){return function(a,e){p("caret",a,e),e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1});var t=e.loose?l[D]:l[L];return a.replace(t,function(e,t,n,r,i){var o;return p("caret",a,e,t,n,r,i),o=se(t)?"":se(n)?">="+t+".0.0 <"+(+t+1)+".0.0":se(r)?"0"===t?">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0":">="+t+"."+n+".0 <"+(+t+1)+".0.0":i?(p("replaceCaret pr",i),"-"!==i.charAt(0)&&(i="-"+i),"0"===t?"0"===n?">="+t+"."+n+"."+r+i+" <"+t+"."+n+"."+(+r+1):">="+t+"."+n+"."+r+i+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+r+i+" <"+(+t+1)+".0.0"):(p("no pr"),"0"===t?"0"===n?">="+t+"."+n+"."+r+" <"+t+"."+n+"."+(+r+1):">="+t+"."+n+"."+r+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+r+" <"+(+t+1)+".0.0"),p("caret return",o),o})}(e,s)}).join(" "),p("caret",t),a=n,t=t.trim().split(/\s+/).map(function(e){return function(a,e){e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1});var t=e.loose?l[I]:l[P];return a.replace(t,function(e,t,n,r,i){var o;return p("tilde",a,e,t,n,r,i),o=se(t)?"":se(n)?">="+t+".0.0 <"+(+t+1)+".0.0":se(r)?">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0":i?(p("replaceTilde pr",i),"-"!==i.charAt(0)&&(i="-"+i),">="+t+"."+n+"."+r+i+" <"+t+"."+(+n+1)+".0"):">="+t+"."+n+"."+r+" <"+t+"."+(+n+1)+".0",p("tilde return",o),o})}(e,a)}).join(" "),p("tildes",t),p("replaceXRanges",i=t,o=n),t=i.split(/\s+/).map(function(e){return function(u,e){u=u.trim(),e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1});var t=e.loose?l[O]:l[j];return u.replace(t,function(e,t,n,r,i,o){p("xRange",u,e,t,n,r,i,o);var a=se(n),s=a||se(r),l=s||se(i),c=l;return"="===t&&c&&(t=""),a?e=">"===t||"<"===t?"<0.0.0":"*":t&&c?(s&&(r=0),l&&(i=0),">"===t?(t=">=",s?(n=+n+1,i=r=0):l&&(r=+r+1,i=0)):"<="===t&&(t="<",s?n=+n+1:r=+r+1),e=t+n+"."+r+"."+i):s?e=">="+n+".0.0 <"+(+n+1)+".0.0":l&&(e=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0"),p("xRange return",e),e})}(e,o)}).join(" "),p("xrange",t),p("replaceStars",r=t,n),t=r.trim().replace(l[q],""),p("stars",t),t;var t,n,r,i,o,a,s},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(e){return!!e.match(r)})),i=i.map(function(e){return new ie(e,this.options)},this)},ae.prototype.intersects=function(n,r){if(!(n instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(e){return e.every(function(t){return n.set.some(function(e){return e.every(function(e){return t.intersects(e,r)})})})})},r.toComparators=function(e,t){return new ae(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new X(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},r.satisfies=ue,r.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new ae(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new X(r=e,n)))}),r},r.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new ae(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new X(r=e,n)))}),r},r.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch(e){return null}},r.ltr=function(e,t,n){return pe(e,t,"<",n)},r.gtr=function(e,t,n){return pe(e,t,">",n)},r.outside=pe,r.prerelease=function(e,t){var n=U(e,t);return n&&n.prerelease.length?n.prerelease:null},r.intersects=function(e,t,n){return e=new ae(e,n),t=new ae(t,n),e.intersects(t)},r.coerce=function(e){if(e instanceof X)return e;if("string"!=typeof e)return null;var t=e.match(l[z]);return null==t?null:U((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),ue=(ce.SEMVER_SPEC_VERSION,ce.re,ce.src,ce.parse,ce.valid,ce.clean,ce.SemVer,ce.inc,ce.diff,ce.compareIdentifiers,ce.rcompareIdentifiers,ce.major,ce.minor,ce.patch,ce.compare,ce.compareLoose,ce.rcompare,ce.sort,ce.rsort,ce.gt,ce.lt,ce.eq,ce.neq,ce.gte,ce.lte,ce.cmp,ce.Comparator,ce.Range,ce.toComparators,ce.satisfies),pe=(ce.maxSatisfying,ce.minSatisfying,ce.validRange,ce.ltr,ce.gtr,ce.outside,ce.prerelease,ce.intersects,ce.coerce,se(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}})),fe=(le=pe)&&le.__esModule&&Object.prototype.hasOwnProperty.call(le,"default")?le.default:le,he="#4572a7",de={background:"#fff",arc:{fill:he},area:{fill:he},line:{stroke:he,strokeWidth:2},path:{stroke:he},rect:{fill:he},shape:{stroke:he},symbol:{fill:he,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ve="#000",ge={group:{fill:"#e5e5e5"},arc:{fill:ve},area:{fill:ve},line:{stroke:ve},path:{stroke:ve},rect:{fill:ve},shape:{stroke:ve},symbol:{fill:ve,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},me="#ab5787",ye="#979797",be={background:"#f9f9f9",arc:{fill:me},area:{fill:me},line:{stroke:me},path:{stroke:me},rect:{fill:me},shape:{stroke:me},symbol:{fill:me,size:30},axis:{domainColor:ye,domainWidth:.5,gridWidth:.2,labelColor:ye,tickColor:ye,tickWidth:.2,titleColor:ye},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},we="#3e5c69",xe={background:"#fff",arc:{fill:we},area:{fill:we},line:{stroke:we},path:{stroke:we},rect:{fill:we},shape:{stroke:we},symbol:{fill:we},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},_e="#fff",Se={background:"#333",title:{color:_e},style:{"guide-label":{fill:_e},"guide-title":{fill:_e}},axis:{domainColor:_e,gridColor:"#aaa",tickColor:_e}},ke="#30a2da",Ee="#cbcbcb",Ce="#f0f0f0",Ae={arc:{fill:ke},area:{fill:ke},axisBand:{grid:!1},axisBottom:{domain:!1,domainColor:"black",domainWidth:3,grid:!0,gridColor:Ee,gridWidth:1,labelFontSize:12,labelPadding:4,tickColor:Ee,tickSize:10,titleFontSize:14,titlePadding:10},axisLeft:{domainColor:Ee,domainWidth:1,gridColor:Ee,gridWidth:1,labelFontSize:12,labelPadding:4,tickColor:Ee,tickSize:10,ticks:!0,titleFontSize:14,titlePadding:10},axisRight:{domainColor:Ee,domainWidth:1,gridColor:Ee,gridWidth:1,labelFontSize:12,labelPadding:4,tickColor:Ee,tickSize:10,ticks:!0,titleFontSize:14,titlePadding:10},axisTop:{domain:!1,domainColor:"black",domainWidth:3,grid:!0,gridColor:Ee,gridWidth:1,labelFontSize:12,labelPadding:4,tickColor:Ee,tickSize:10,titleFontSize:14,titlePadding:10},background:Ce,group:{fill:Ce},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleFontSize:14,titlePadding:10},line:{stroke:ke,strokeWidth:2},path:{stroke:ke,strokeWidth:.5},point:{filled:!0},rect:{fill:ke},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},symbol:{opacity:1,shape:"circle",size:40,strokeWidth:1},shape:{stroke:ke},style:{bar:{binSpacing:2,fill:ke,stroke:null}},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},je=Object.freeze({excel:de,ggplot2:ge,quartz:be,vox:xe,dark:Se,fivethirtyeight:Ae}),Oe="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n\n/* Dark and light color themes */\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n\n#vg-tooltip-element.light-theme {\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.light-theme td.key {\n  color: #808080;\n}",ze="vg-tooltip-element",Te={offsetX:10,offsetY:10,id:ze,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function Ne(e,t,n){if(H(e))return"["+e.map(function(e){return t(X(e)?e:Pe(e,n))}).join(", ")+"]";if(U(e)){var r="",i=e,o=i.title,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(i,["title"]);o&&(r+="<h2>"+t(o)+"</h2>");var s=Object.keys(a);if(0<s.length){r+="<table>";for(var l=0,c=s;l<c.length;l++){var u=c[l],p=a[u];U(p)&&(p=Pe(p,n)),r+='<tr><td class="key">'+t(u)+':</td><td class="value">'+t(p)+"</td></tr>"}r+="</table>"}return r||"{}"}return t(e)}function Pe(e,t){return JSON.stringify(e,(r=t,i=[],function(e,t){if("object"!=typeof t||null===t)return t;var n=i.indexOf(this)+1;return i.length=n,i.length>r?"[Object]":0<=i.indexOf(t)?"[Circular]":(i.push(t),t)}));var r,i}var Ie=function(){function e(e){this.options=te({},Te,e);var t=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var n=document.createElement("style");n.setAttribute("id",this.options.styleId),n.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Oe.toString().replace(ze,e)}(t),0<document.head.childNodes.length?document.head.insertBefore(n,document.head.childNodes[0]):document.head.appendChild(n)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return e.prototype.tooltip_handler=function(e,t,n,r){if(null!=r&&""!==r){this.el.innerHTML=Ne(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme");var i=function(e,t,n,r){var i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);var o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=i.x,a=i.y;this.el.setAttribute("style","top: "+a+"px; left: "+o+"px")}else this.el.classList.remove("visible",this.options.theme+"-theme")},e}();var Fe='.vega-embed {\n  position: relative;\n  display: inline-block;\n  padding-right: 38px;\n}\n\n.vega-embed .vega-actions-wrapper {\n  display: inline-flex;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n\n  opacity: 0.2;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  transition: opacity 0.4s ease-in;\n\n  outline: none;\n  cursor: pointer;\n}\n\n.vega-embed:hover .vega-actions-wrapper,\n.vega-embed .vega-actions-wrapper:focus {\n  transition: opacity 0.2s ease;\n  opacity: 1;\n}\n\n.vega-embed .vega-actions {\n  position: absolute;\n  top: 34px;\n  right: -9px;\n  display: none;\n  flex-direction: column;\n\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n}\n\n.vega-embed .vega-actions-wrapper:focus .vega-actions {\n  display: flex;\n}\n\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n\n.vega-embed .vega-actions a:hover {\n  background-color: #f7f7f9;\n  color: #1b1e23;\n}\n\n.vega-embed .vega-actions-wrapper:focus::before,\n.vega-embed .vega-actions-wrapper:focus::after {\n  content: "";\n  position: absolute;\n  width: 0;\n  height: 0;\n  top: 34px;\n  right: 10px;\n  box-sizing: border-box;\n\n  border: 6px solid black;\n\n  transform-origin: 0 0;\n  transform: rotate(-45deg);\n}\n\n.vega-embed .vega-actions-wrapper:focus::before {\n  border-color: #d9d9d9;\n\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n}\n\n.vega-embed .vega-actions-wrapper:focus::after {\n  top: 35px;\n\n  border-color: white white transparent transparent;\n}';function We(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){e=Le(e,i[r])}return e}function Le(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||H(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=We(H(t[n].constructor)?[]:{},t[n]):We(e[n],t[n]));return e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var De=e,Re=t,$e={vega:"Vega","vega-lite":"Vega-Lite"},Be={vega:De.version,"vega-lite":Re?Re.version:"not available"},Ve={vega:function(e,t){return e},"vega-lite":function(e,t){return Re.compile(e,{config:t}).spec}},Me='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',qe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"};function He(e,t,n,r){var i="<html><head>"+t+'</head><body><pre><code class="json">',o="</code></pre>"+n+"</body></html>",a=window.open("");a.document.write(i+e+o),a.document.title=$e[r]+" JSON Source"}function Ue(T,N,P){return void 0===P&&(P={}),ne(this,void 0,void 0,function(){var i,o,a,s,l,c,u,p,f,h,d,v,g,m,y,b,w,x,_,S,k,E,C,A,j,O,z;return re(this,function(e){switch(e.label){case 0:return i=(P=P||{}).patch||P.onBeforeParse,o=!0===P.actions||!1===P.actions?P.actions:We({},{export:{svg:!0,png:!0},source:!0,compiled:!1,editor:!0},P.actions||{}),a=te({},qe,P.i18n),r=P.loader,s=r&&"load"in r?P.loader:De.loader(P.loader),l=P.renderer||"canvas",c=P.logLevel||De.Warn,De.isString(N)?[4,s.load(N)]:[3,2];case 1:return p=e.sent(),[2,Ue(T,JSON.parse(p),P)];case 2:return u=P.config||{},De.isString(u)?[4,s.load(u)]:[3,4];case 3:return p=e.sent(),[2,Ue(T,N,te({},P,{config:JSON.parse(p)}))];case 4:return P.defaultStyle&&(f="vega-embed-style",document.getElementById(f)||((h=document.createElement("style")).id=f,h.innerText=!0===P.defaultStyle?Fe.toString():P.defaultStyle,document.getElementsByTagName("head")[0].appendChild(h))),P.theme&&(u=We({},je[P.theme],u)),d=function(e,t){if(e.$schema){var n=fe(e.$schema);t&&t!==n.library&&console.warn("The given visualization spec is written in "+$e[n.library]+", but mode argument sets "+($e[t]||t)+".");var r=n.library;return ue(Be[r],"^"+n.version.slice(1))||console.warn("The input spec uses "+r+" "+n.version+", but the current version of "+$e[r]+" is "+Be[r]+"."),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t||"vega"}(N,P.mode),v=Ve[d](N,u),"vega-lite"===d&&v.$schema&&(g=fe(v.$schema),ue(Be.vega,"^"+g.version.slice(1))||console.warn("The compiled spec uses Vega "+g.version+", but current version is "+Be.vega+".")),m=(n=T,"string"==typeof n?new B([[document.querySelector(n)]],[document.documentElement]):new B([[n]],$)).classed("vega-embed",!0).html(""),i&&(v=i instanceof Function?i(v):We(v,i)),y=De.parse(v,"vega-lite"===d?{}:u),b=new De.View(y,{loader:s,logLevel:c,renderer:l}).initialize(T),!1!==P.tooltip&&(w=void 0,t=P.tooltip,w="function"==typeof t?P.tooltip:new Ie(!0===P.tooltip?{}:P.tooltip).call,b.tooltip(w)),void 0===(x=P.hover)&&(x="vega-lite"!==d),x&&(S=(_="boolean"==typeof x?{}:x).hoverSet,k=_.updateSet,b.hover(S,k)),P&&(P.width&&b.width(P.width),P.height&&b.height(P.height),P.padding&&b.padding(P.padding)),P.runAsync?[4,b.runAsync()]:[3,6];case 5:return e.sent(),[3,7];case 6:b.run(),e.label=7;case 7:if(!1!==o){if(E=m.append("div").attr("class","vega-actions-wrapper").attr("tabindex","1").attr("title",qe.CLICK_TO_VIEW_ACTIONS),!0===P.defaultStyle&&E.html(Me),C=E.insert("div").attr("class","vega-actions"),!0===o||!1!==o.export)for(A=function(e){if(!0===o||!0===o.export||o.export[e]){var t=a[e.toUpperCase()+"_ACTION"];C.append("a").text(t).attr("href","#").attr("target","_blank").attr("download","visualization."+e).on("mousedown",function(){var t=this;b.toImageURL(e,P.scaleFactor).then(function(e){t.href=e}).catch(function(e){throw e}),I.preventDefault()})}},j=0,O=["svg","png"];j<O.length;j++)A(O[j]);!0!==o&&!1===o.source||C.append("a").text(a.SOURCE_ACTION).attr("href","#").on("mousedown",function(){He(ae(N),P.sourceHeader||"",P.sourceFooter||"",d),I.preventDefault()}),"vega-lite"!==d||!0!==o&&!1===o.compiled||C.append("a").text(a.COMPILED_ACTION).attr("href","#").on("mousedown",function(){He(ae(v),P.sourceHeader||"",P.sourceFooter||"","vega"),I.preventDefault()}),!0!==o&&!1===o.editor||(z=P.editorUrl||"https://vega.github.io/editor/",C.append("a").text(a.EDITOR_ACTION).attr("href","#").on("mousedown",function(){var n,e,t,r,i,o;n=window,e=z,t={config:u,mode:d,renderer:l,spec:ae(N)},r=n.open(e),o=~~(1e4/(i=250)),n.addEventListener("message",function e(t){t.source===r&&(o=0,n.removeEventListener("message",e,!1))},!1),setTimeout(function e(){o<=0||(r.postMessage(t,"*"),setTimeout(e,i),o-=1)},i),I.preventDefault()}))}return[2,{view:b,spec:N,vgSpec:v}]}var t,n,r})})}function Xe(r,i){return void 0===i&&(i={}),ne(this,void 0,void 0,function(){var t,n;return re(this,function(e){return t=document.createElement("div"),n=!0===i.actions||!1===i.actions?i.actions:te({export:!0,source:!1,compiled:!0,editor:!0},i.actions||{}),[2,Ue(t,r,te({actions:n,defaultStyle:!0,runAsync:!0},i||{})).then(function(e){return t.value=e.view,t})]})})}var Je=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return 1<n.length&&(X(n[0])&&!((t=n[0]).startsWith("http://")||t.startsWith("https://")||t.startsWith("//"))||((e=n[0])instanceof V||"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)||3===n.length)?Ue(n[0],n[1],n[2]):Xe(n[0],n[1])};return Je.vl=Re,Je.container=Xe,Je.embed=Ue,Je.vega=De,Je.default=Ue,Je.version=ee,Je});
